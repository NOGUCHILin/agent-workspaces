# 仕様駆動開発ルール

## 原則

1. **仕様優先**: 実装前に必ず仕様を確認・作成
2. **調査記録**: 調べた内容は research/ に記録
3. **変更追跡**: 仕様変更時は上流ドキュメントも更新

## トリガー

**開発作業を依頼されたら必ず仕様確認を開始**

- 機能追加、修正、リファクタリング
- バグ修正（原因調査後に設計が必要な場合）
- 新規プロジェクト、新規モジュール

## 行動ルール

1. **確認**: `docs/specs/` に該当仕様があるか確認
2. **存在すれば**: 内容を読んで現状把握してから作業開始
3. **なければ**: 仕様作成を提案（「仕様を作りましょうか？」）
4. **ユーザーが拒否した場合のみ**: 仕様なしで進める

## 仕様作成時

`docs/specs/{feature-name}/` を作成し、以下3ファイルを順番に埋める:

### 01-requirements.md（要件定義）

```markdown
# Requirements: {feature-name}

> Status: draft

## 概要
（達成したいことを1-2文で）

## 機能要件
- [ ] 必須: ...
- [ ] 推奨: ...

## 非機能要件
- パフォーマンス:
- セキュリティ:

## 成功基準
- [ ] ...
```

### 02-design.md（設計）

```markdown
# Design: {feature-name}

> Status: draft

## アーキテクチャ概要
（システム構成、コンポーネント関係）

## データ設計
（テーブル、スキーマ、型定義）

## API設計
（エンドポイント、リクエスト/レスポンス）

## 技術選定
| 用途 | 技術 | 理由 |
```

### 03-tasks.md（タスク）

```markdown
# Tasks: {feature-name}

> Status: draft

## タスク一覧
- [ ] T1: ...
- [ ] T2: ...
- [ ] T3: テスト
- [ ] T4: レビュー・マージ
```

## 禁止事項

- `~/.claude/plans/` は使用しない（Claude Code内部用）
- Claude Codeの `/plan` コマンドは使用しない
- 上記テンプレート構造を無視しない
