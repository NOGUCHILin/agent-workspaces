# 資金繰り管理 自動化計画

作成日: 2026-01-11
作成者: 野口凜

---

## 基本方針

**人間もシステムの一部として設計する**

- API連携による完全自動化
- 人間への連絡・リマインドによる半自動化
- どちらも「自動化」として扱う

---

## 自動化対象一覧

### 1. クレカ支払い額の把握（優先度1）

| 対象 | 現状 | 自動化方法 |
|------|------|-----------|
| 会社カード3枚 | 代表に確認 | API取得（将来） |
| 個人カード6枚 | 代表にスクショ依頼 | Slackリマインド「スクショお願いします」 |
| 支払確定額 | 都度確認 | 締め後にSlackリマインド「確定額教えてください」 |

**リマインド設計:**
- 毎日10:00「本日のカード残高確認お願いします」
- 各カード締め日翌日「○○カードの確定額を教えてください」

---

### 2. 請求書カード払いの申請リマインド（優先度2）

| 支払先 | 期日 | リマインド開始 | 送信先 |
|--------|------|---------------|--------|
| ヤマト | 25日 | 18日〜25日 | 資金繰り担当 |
| ドンキ | 末日 | 24日〜末日 | 資金繰り担当 |
| ユニホー | 末日（超過OK） | 24日〜翌5日 | 資金繰り担当 |
| ビズビ | 末日（超過OK） | 24日〜翌5日 | 資金繰り担当 |
| 徐さん | 未定 | 請求書到着時 | 資金繰り担当 |

**リマインド内容例:**
```
📋 請求書カード払いリマインド

【ヤマト】12月分
- 金額: 約120万円
- 期日: 12/25（厳守）
- 推奨カード: トヨタ（枠120万円）
- 申請期限: 12/19（振込4営業日前）

👉 マネーフォワードで申請してください
```

---

### 3. カード枠不足警告（優先度3）

| トリガー | 通知内容 |
|---------|---------|
| 予定支払額 > 利用可能額 | 「○○カードの枠が不足しています」 |
| 利用可能額 < 10万円 | 「○○カードの枠が残りわずかです」 |

**チェックタイミング:**
- 毎日10:00（残高入力後）
- 請求書到着時

---

### 4. 締め日・支払日通知

| カード | 締め日 | 通知開始 |
|--------|--------|---------|
| トヨタ | 5日 | 1日〜5日 |
| MI | 5日 | 1日〜5日 |
| セゾン | 10日 | 6日〜10日 |
| しんきんVisa/JCB | 15日 | 11日〜15日 |
| JFR | 15日 | 11日〜15日 |
| アメックス | 22日 | 18日〜22日 |
| Amazon/GPC | 末日 | 25日〜末日 |

**通知内容例:**
```
📅 締め日リマインド

【しんきんVisa】本日15日が締め日です
- 現在の利用額: 150万円
- 来月10日の引落予定: 150万円

今日中の決済は来月引落、明日以降は翌々月引落になります
```

---

## 実装計画

### Phase 1: Slackリマインド（人間への通知）

**必要なもの:**
- Slack Webhook URL
- リマインドスケジュールのcron設定
- ダッシュボードからのデータ読み取り

**実装方法:**
1. Node.jsスクリプトでダッシュボードのlocalStorageを読み取り
2. Slack Webhookで通知送信
3. cronで毎日10:00に実行

### Phase 2: データ永続化

**課題:** 現在のlocalStorageをサーバー側に移行

**方法:**
- JSON/SQLiteでサーバー側に保存
- 複数端末からアクセス可能に

### Phase 3: API連携

**対象:**
- マネーフォワード請求書払いAPI（OAuth2.0）
- 会社カード3枚の残高取得

---

## 関係者と役割

| 役割 | 担当 | 受け取る通知 |
|------|------|-------------|
| 資金繰り担当 | その日の担当者 | 申請リマインド、枠不足警告 |
| 代表 | カード残高確認 | スクショ依頼、確定額確認 |
| 野口凜 | システム管理 | エラー通知 |

---

## 参照ドキュメント

- [workflow-tree.md](workflow-tree.md) - ワークフロー全体像（野口沙羅作成）
- [decision-rules.md](decision-rules.md) - カード選択判断ルール
- [master-data.md](master-data.md) - カード・支払先マスター
- [optimization_logic.md](optimization_logic.md) - 最適化アルゴリズム

---

## 更新履歴

- 2026-01-11: 初版作成
