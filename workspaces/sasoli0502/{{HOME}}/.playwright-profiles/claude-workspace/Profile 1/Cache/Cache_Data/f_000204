"use strict";(globalThis.webpackChunknotion_next=globalThis.webpackChunknotion_next||[]).push([[44128],{15785:(e,t,s)=>{s.d(t,{u:()=>n});const n=(0,s(340498).xh)("arrowStraightDown",{default:{loader:()=>s.e(67678).then(s.bind(s,655923))},small:{loader:()=>s.e(67678).then(s.bind(s,403733))},fill:{loader:()=>s.e(67678).then(s.bind(s,378815))},fillSmall:{loader:()=>s.e(67678).then(s.bind(s,886358))}},["arrow","right","direction","next","forward"])},152077:(e,t,s)=>{s.d(t,{Vs:()=>d,WA:()=>l,YU:()=>c,bO:()=>i,lU:()=>r});var n=s(296540),o=s(474848);const a=n.createContext(void 0);function i(e){return(0,o.jsx)(a.Provider,{value:e.surface,children:e.children})}function r(){return n.useContext(a)}function l(){const e=r();return"TeamHome"===e||"PersonalHome"===e}function d(){return void 0===r()}function c(){return d()?12:0}a.displayName="PostFeedSurfaceContext"},258467:(e,t,s)=>{s.d(t,{Ft:()=>S,Hq:()=>m,Mb:()=>u,ZF:()=>g,k7:()=>y,sR:()=>c});s(16280);var n=()=>s(675133),o=()=>s(278729),a=()=>s(402390),i=()=>s(848538),r=()=>s(753812),l=()=>s(411618),d=()=>s(475355);async function c(e){const{environment:t,email:s}=e,o=await r().callApi({eventName:"findUser",environment:t,data:{email:s}});if("success"===o.type){const e=o.data;if(e.value)return e.value.value.id}return await async function(e){const{environment:t,email:s}=e,o=await r().callApi({eventName:"createEmailUser",environment:t,data:{email:s,preferredLocaleOrigin:"inferred_from_inviter",preferredLocale:(0,a().H)(n().A.getIntl())}});if("failed"===o.type)throw o.error;return o.data.userId}({environment:t,email:s})}async function u(e){const{block:t,blockRole:s,environment:n,inviteeUserId:o,inviteMessage:a}=e;await p({environment:n,block:t,blockRole:s,inviteeUserId:o,inviteMessage:a,type:"guest-invite-request"})}async function m(e){const{block:t,blockRole:s,environment:n,inviteeUserId:o,inviteMessage:a}=e;await p({environment:n,block:t,blockRole:s,inviteeUserId:o,inviteMessage:a,type:"restricted-member-invite-request"})}async function p(e){const{environment:t,block:s,blockRole:n,inviteeUserId:o,inviteMessage:a,type:i}=e,l=await r().callApi({eventName:"requestAccess",environment:t,data:{type:i,block:s,forActorId:o,message:void 0,attributes:{role:n,inviteMessage:a}}});if("failed"===l.type)throw l.error}async function y(e){const{environment:t,spaceStore:s,inviteeUserId:n,inviteMessage:o}=e;if(s.canAdmin())throw new Error("This operation is not valid for workspace owners, because member requests are immediately approved when created by a workspace owner. Use createMember instead.");const a=await r().callApi({eventName:"requestAccess",environment:t,data:{type:"actor-to-space",forActorId:n,spaceId:s.id,message:o}});if("failed"===a.type)throw a.error}async function g(e){const{blockPermissionItem:t,blockStore:s,environment:n,inviteOrigin:a,spaceActor:r,spaceStore:c,sudoModeStore:u,shareMenuSessionId:m}=e;if(t.user_id!==r.userId)throw new Error("User IDs for block and space permission items must match");if(!(!0===o().V.createChildStore(c,(0,i().i1)({userId:r.userId,spaceId:c.id})).isMember())){if(!c.isTeamsEnabled()){if(!(await d().oH({environment:n,flowId:"",trackCreateTeamComplete:!1})))throw new Error("Failed to enable teams before creating member.")}await l().dz({environment:n,spaceStore:c,actors:[r],invite:{inviteOrigin:a}})}await l().J4({environment:n,store:s,sudoModeStore:u,permissionItems:[t],skipGuestLimitValidation:!0,invite:{inviteOrigin:a},shareMenuSessionId:m})}async function S(e){const{blockPermissionItem:t,blockStore:s,environment:n,metadata:o,sudoModeStore:a,shareMenuSessionId:i}=e;await l().J4({environment:n,store:s,sudoModeStore:a,permissionItems:[t],invite:o,skipGuestLimitValidation:!0,shareMenuSessionId:i})}},523347:(e,t,s)=>{s.d(t,{e:()=>W});s(898992),s(672577),s(581454);var n=s(296540),o=()=>s(756117),a=()=>s(395361),i=()=>s(590526),r=()=>s(401497),l=()=>s(718827),d=()=>s(249046),c=()=>s(250910),u=()=>s(118307),m=()=>s(807449),p=()=>s(695115),y=()=>s(31511),g=()=>s(546926),S=()=>s(493552),h=()=>s(373009),b=()=>s(890492),v=()=>s(81068),j=()=>s(663639),f=()=>s(736847),x=()=>s(324254),w=()=>s(582684),k=()=>s(344417),C=()=>s(253673),I=()=>s(824375),A=()=>s(435644),D=()=>s(69708),M=()=>s(100622),R=()=>s(284371),E=()=>s(523996),T=s(474848);const B=(0,D().YK)({searchLabel:{id:"workspaceDiscovery.searchButton.tooltip",defaultMessage:"Search"},searchInputPlaceholder:{id:"workspaceDiscovery.searchInput.placeholder",defaultMessage:"Type to search..."},sortRecommended:{id:"workspaceDiscovery.sort.recommended",defaultMessage:"Recommended"},sortWorkspaceName:{id:"workspaceDiscovery.sort.spaceName",defaultMessage:"Workspace name"},sortMemberCount:{id:"workspaceDiscovery.sort.members",defaultMessage:"Number of members"}});function W(e){const{isReimaginedStyles:t,joinContext:s="onboarding"}=e,n=F({isReimaginedStyles:t,joinContext:s});return(0,T.jsxs)(d().Ye,{justifyContent:"space-between",style:n.commandBarContainer,children:[(0,T.jsx)(_,{isReimaginedStyles:t,joinContext:s}),(0,T.jsx)(N,{isReimaginedStyles:t,joinContext:s})]})}function _(e){const{isReimaginedStyles:t,joinContext:s}=e,o=(0,i().uB)(void 0,u().A),a=(0,i().K8)((()=>E().jF.state.sort),[]),r=F({isReimaginedStyles:t,joinContext:s}),d=(0,n.useCallback)(((e,t)=>{E().jF.setState({...E().jF.state,sort:{type:e,order:"asc"}}),t.close()}),[]),p=()=>[{key:"recommended",label:B.sortRecommended,icon:I().sparklesIcon},{key:E().w1,label:B.sortWorkspaceName,icon:A().a},{key:E().qZ,label:B.sortMemberCount,icon:C().personIcon}],y=p().find((e=>e.key===a.type));return(0,T.jsx)(c().A,{popupType:c().z.Popup,renderOrigin:e=>t?(0,T.jsx)(h().E,{iconLeading:w().arrowUpDownIcon,iconTrailing:x().arrowChevronSingleDownSmallIcon,colorPalette:"blue",...e,shape:"pill",style:r.reimaginedSortButton,children:y?(0,T.jsx)(D().sA,{...y.label}):(0,T.jsx)(D().sA,{defaultMessage:"Sort",id:"workspaceDiscovery.sort.title"})}):(0,T.jsxs)(l().Ay,{...e,style:r.sortButton,children:[(0,T.jsx)(m().I,{icon:w().arrowUpDownIcon,size:"sm",colorVariant:"secondary"}),(0,T.jsx)(D().sA,{defaultMessage:"Sort",id:"workspaceDiscovery.sort.title"}),(0,T.jsx)(m().I,{icon:x().arrowChevronSingleDownSmallIcon,size:10,colorVariant:"secondary",style:r.chevronDownIcon})]}),buttonPopupStore:o,render:e=>(0,T.jsx)(b().A,{menuType:g().gu.Popup,width:235,children:(0,T.jsx)(j().A,{type:j().O.Vertical,initialFocus:void 0,sections:[{key:"pages",render:e=>(0,T.jsx)(f().A,{...e}),items:p().map((t=>({key:t.key,action:()=>{d(t.key,e)},render:e=>(0,T.jsx)(v().A,{...e,title:(0,T.jsxs)("div",{style:r.menuItem,children:[(0,T.jsx)(m().I,{icon:t.icon}),(0,T.jsx)(S().D,{styleKey:"bodyRegular",children:(0,T.jsx)(D().sA,{...t.label})})]}),isChecked:a.type===t.key})})))}]})})})}function N(e){const{isReimaginedStyles:t,joinContext:s}=e,r=(0,D().tz)(),[l,c]=(0,n.useState)(!1),u=(0,n.useCallback)((()=>{c(!l)}),[l]),m=(0,n.useCallback)((()=>{c(!1)}),[]),g=(0,i().K8)((()=>E().jF.state.searchQuery),[]),S=(0,n.useCallback)((e=>{E().jF.setState({...E().jF.state,searchQuery:e.target.value})}),[]),h=(0,a().Y)(S,250),b=(0,n.useCallback)((()=>{E().jF.setState({...E().jF.state,searchQuery:""}),c(!1)}),[]),v=F({isReimaginedStyles:t,joinContext:s});return(0,T.jsxs)(d().Ye,{alignItems:"center",style:v.searchContainer,children:[(0,T.jsx)(p().A,{icon:k().magnifyingGlassSmallIcon,style:v.searchButton,disabled:!1,onClick:u,ariaLabel:r.formatMessage(B.searchLabel)}),(0,T.jsx)(o().A,{visible:l,animate:{width:150,opacity:1},initial:{width:0,opacity:0},exit:{width:0,opacity:0},children:(0,T.jsx)(y().A,{style:v.searchInput,format:"transparent",placeholder:r.formatMessage(B.searchInputPlaceholder),value:g,onChange:h,focusInitial:!0,showClearButton:!0,onClearButtonClick:b,onCancel:m})})]})}function F(e){const{isReimaginedStyles:t,joinContext:s}=e,n="settings"===s;return(0,r().IS)((()=>({commandBarContainer:{paddingInlineStart:t||n?0:24},sortButton:{display:"flex",flexDirection:"row",alignItems:"center",width:"fit-content",gap:4,paddingInlineStart:8,paddingInlineEnd:8,paddingTop:4,paddingBottom:4,borderRadius:8,background:M().Tj.background.secondary,fontSize:14,color:M().Tj.text.secondary},reimaginedSortButton:{fontWeight:R().Wy.regular},menuItem:{display:"flex",flexDirection:"row",alignItems:"center",gap:8,paddingInlineStart:8,paddingInlineEnd:8,paddingTop:4,paddingBottom:4},hoveredMenuItem:{borderRadius:8},chevronDownIcon:{marginInlineStart:4},searchContainer:{maxWidth:140,fontSize:14},searchInput:{paddingInlineEnd:4},searchButton:{height:28,width:28}})),[t,n])}},523713:(e,t,s)=>{s.d(t,{x:()=>a});var n=()=>s(534177),o=()=>s(686070);function a({isPhone:e,spaceStore:t}){return!e&&(0,n().O9)(t)&&!(0,o().d)({spaceStore:t})}},523996:(e,t,s)=>{s.d(t,{fH:()=>a,jF:()=>l,qZ:()=>i,w1:()=>o});s(898992),s(354520);var n=()=>s(496603);const o="name",a="createdBy",i="members-count";class r extends(()=>s(757695))().Store{getInitialState(){return{sort:{type:"recommended",order:"asc"},searchQuery:void 0,discoverableWorkspaces:[],allDiscoverableWorkspacesCount:0}}getJoinableSpaces(e){const{discoverableWorkspaces:t,sort:s,searchQuery:r}=this.state;let l=t;return r&&(l=l.filter((e=>{var t;return null===(t=e.name)||void 0===t?void 0:t.toLowerCase().includes(r.toLowerCase())}))),s.type===o?l=(0,n().My)(l,(e=>{var t;return null===(t=e.name)||void 0===t?void 0:t.toLowerCase()}),s.order):s.type===i?l=(0,n().My)(l,(e=>e.totalMemberCount),s.order):s.type===a&&(l=(0,n().My)(l,(e=>{var t;return null===(t=e.createdBy)||void 0===t||null===(t=t.name)||void 0===t?void 0:t.toLowerCase()}),s.order)),this.emit(),l}}const l=new r},552945:(e,t,s)=>{s.d(t,{g:()=>g});s(944114),s(296540);var n=()=>s(907258),o=()=>s(590526),a=()=>s(401497),i=()=>s(249046),r=()=>s(265060),l=()=>s(26697),d=()=>s(842599),c=()=>s(13966),u=()=>s(69708),m=()=>s(235921),p=()=>s(620641),y=s(474848);function g(e){const{joinableSpaces:t,formSpaceId:s,isReimaginedStyles:g,joinContext:S="onboarding"}=e,h=(0,a().IS)((()=>({firstOrMiddleSection:{marginBottom:25},helpButton:{cursor:"pointer"}})),[]),b=(0,o().K8)((()=>{var e,t;const{onboardingData:s}=m().A.state,o=(null==s||null===(e=s.userStore)||void 0===e?void 0:e.getEmail())??(null===(t=n().default.state.currentUserStore)||void 0===t?void 0:t.getEmail());return o?(0,d().zN)(o):void 0}),[]),v=[],j=[];let f;for(const n of t)s&&n.id===s?f=n:n.guestPageIds.length>0?v.push(n):j.push(n);return(0,y.jsxs)(y.Fragment,{children:[f?(0,y.jsx)(p().E,{joinableSpaces:[f],title:(0,y.jsx)(u().sA,{defaultMessage:"Join where form was created",id:"workspaceDiscovery.formResponseWorkspace.title"}),styles:h.firstOrMiddleSection,isReimaginedStyles:g,joinContext:S}):void 0,v.length>0?(0,y.jsx)(p().E,{joinableSpaces:v,title:(0,y.jsx)(u().sA,{defaultMessage:"Shared pages",id:"workspaceDiscovery.sharedWorkspaces.title"}),styles:h.firstOrMiddleSection,isReimaginedStyles:g,joinContext:S}):void 0,j.length>0?(0,y.jsx)(p().E,{joinableSpaces:j,title:(0,y.jsxs)(i().Ye,{alignItems:"center",gap:4,children:[(0,y.jsx)(u().sA,{defaultMessage:"Suggested workspaces",id:"workspaceDiscovery.suggestedSpaces.title"}),(0,y.jsx)(l().m,{renderTooltip:()=>(0,y.jsx)(u().sA,{defaultMessage:"Workspaces with {emailDomain} as a trusted email domain",id:"workspaceDiscovery.suggestedSpaces.tooltip",values:{emailDomain:b}}),placement:"bottom",render:e=>(0,y.jsx)("div",{style:h.helpButton,...e,children:(0,y.jsx)(r().Q,{iconGroup:c().H,variantName:"small",colorVariant:"secondary"})})})]}),isReimaginedStyles:g,joinContext:S}):void 0]})}},559962:(e,t,s)=>{s.d(t,{N:()=>h});var n=s(296540),o=()=>s(907258),a=()=>s(484714),i=()=>s(590526),r=()=>s(401497),l=()=>s(493552),d=()=>s(69708),c=()=>s(100622),u=()=>s(687601),m=()=>s(523996),p=()=>s(523347),y=()=>s(552945),g=s(474848);const S=24;function h({onLoaded:e,showHeader:t=!0,title:s,showSubtitle:h=!0,showCommandBar:b=!0,joinContext:v="settings",footer:j}){const{isLoading:f,hasError:x,joinableSpaces:w,allDiscoverableWorkspacesCount:k}=function(){const e=(0,a().v3)(),t=(0,d().tz)(),[s,r]=(0,n.useState)(!0),[l,c]=(0,n.useState)(!1),p=(0,i().K8)((()=>m().jF.getJoinableSpaces(t)),[t]),y=(0,i().K8)((()=>m().jF.state.allDiscoverableWorkspacesCount),[]);return(0,n.useEffect)((()=>{let t=!1;return(async()=>{c(!1),m().jF.setState({sort:{type:"recommended",order:"asc"},searchQuery:"",discoverableWorkspaces:[],allDiscoverableWorkspacesCount:0});const s=await e.api.callApi({eventName:"getJoinableSpaces",environment:e,data:{excludeUnactionableSpaces:!0}});if(!t){if("success"===s.type){const e=o().default.state.currentUserRootStore,t=e?(0,u().md)({results:s.data.results,userRootStore:e,isNewUserFlow:!1}):s.data.results;m().jF.setState({sort:{type:"recommended",order:"asc"},searchQuery:"",discoverableWorkspaces:t,allDiscoverableWorkspacesCount:t.length}),c(!1)}else c(!0);r(!1)}})(),()=>{t=!0}}),[e]),{isLoading:s,hasError:l,joinableSpaces:p,allDiscoverableWorkspacesCount:y}}(),C=function(e){const t="settings"===e;return(0,r().IS)((()=>({container:{display:"flex",flexDirection:"column",gap:12},header:{display:"flex",alignItems:"center",gap:8},headerIcon:{height:48,width:48,background:c().Tj.background.primary,borderRadius:8,display:"flex",alignItems:"center",justifyContent:"center"},headerText:{display:"flex",flexDirection:"column",gap:4},tableContainer:{background:c().Tj.background.primary,borderRadius:16,paddingTop:20,paddingBottom:20},commandBar:{marginBottom:16},footer:{paddingInlineStart:t?0:S},divider:{height:1,background:c().Tj.border.primary,marginTop:0,marginBottom:8},statusText:{color:c().Tj.text.secondary}})),[t])}(v);let I;return(0,n.useEffect)((()=>{f||null==e||e()}),[f,e]),I=f&&0===w.length?(0,g.jsx)(l().D,{styleKey:"bodyMedium",style:C.statusText,children:(0,g.jsx)(d().sA,{id:"workspaceDiscovery.loading",defaultMessage:"Loading workspaces..."})}):x?(0,g.jsx)(l().D,{styleKey:"bodyMedium",style:C.statusText,children:(0,g.jsx)(d().sA,{id:"workspaceDiscovery.error",defaultMessage:"We couldnâ€™t load available workspaces right now."})}):0===k?(0,g.jsx)(l().D,{styleKey:"bodyMedium",style:C.statusText,children:(0,g.jsx)(d().sA,{id:"workspaceDiscovery.noSearchResults.message",defaultMessage:"No workspaces found"})}):(0,g.jsxs)("div",{style:C.tableContainer,children:[b?(0,g.jsx)("div",{style:C.commandBar,children:(0,g.jsx)(p().e,{isReimaginedStyles:!1,joinContext:v})}):void 0,(0,g.jsx)(y().g,{joinableSpaces:"personal_home"===v?w.slice(0,5):w,formSpaceId:void 0,isReimaginedStyles:!1,joinContext:v}),j?(0,g.jsx)("div",{style:C.footer,children:j}):void 0]}),(0,g.jsxs)("div",{style:C.container,children:[t?(0,g.jsxs)(g.Fragment,{children:[(0,g.jsx)("div",{style:C.header,children:(0,g.jsxs)("div",{style:C.headerText,children:[(0,g.jsx)(l().D,{styleKey:"titleSmMedium",colorVariant:"primary",children:s??(0,g.jsx)(d().sA,{defaultMessage:"Collaborate with teammates",id:"workspaceDiscovery.title.collaborateWithTeammates"})}),h?(0,g.jsx)(l().D,{styleKey:"bodySmRegular",colorVariant:"secondary",textOverflow:"ellipsis",children:(0,g.jsx)(d().sA,{defaultMessage:"{numSpaces, plural, one {{numSpaces} workspace} other {{numSpaces} workspaces}}",id:"workspaceDiscovery.subtitle",values:{numSpaces:k}})}):void 0]})}),(0,g.jsx)("div",{style:C.divider})]}):void 0,I]})}},620641:(e,t,s)=>{s.d(t,{E:()=>Q});s(944114),s(898992),s(672577),s(581454);var n=s(296540),o=()=>s(590526),a=()=>s(401497),i=()=>s(15258),r=()=>s(718827),l=()=>s(249046),d=()=>s(807449),c=()=>s(265060),u=()=>s(493552),m=()=>s(15785);const p=(0,s(340498).xh)("arrowStraightUp",{default:{loader:()=>s.e(72925).then(s.bind(s,112282))},small:{loader:()=>s.e(72925).then(s.bind(s,4688))},fill:{loader:()=>s.e(72925).then(s.bind(s,892936))},fillSmall:{loader:()=>s.e(72925).then(s.bind(s,107023))}},["arrow","right","direction","next","forward"]);var y=()=>s(390635),g=()=>s(792071),S=()=>s(72135),h=()=>s(96689),b=()=>s(69708),v=()=>s(100622),j=()=>s(284371),f=()=>s(187820),x=()=>s(453697),w=()=>s(317182),k=()=>s(79430),C=()=>s(235921),I=()=>s(523996),A=(s(354520),()=>s(484714)),D=()=>s(128933),M=()=>s(302996),R=()=>s(373399),E=()=>s(118307),T=()=>s(406094),B=()=>s(631524),W=()=>s(617668),_=()=>s(534663),N=()=>s(258467),F=s(474848);function P(e){const{joinableSpace:t,joinableSpaceIndex:s,isReimaginedStyles:i,joinContext:r="onboarding"}=e,{joinabilityStatus:l}=t,d="settings"===r||"personal_home"===r,c="ADDED_AS_PAGE_GUEST"===l||"ADDED_AS_TEAMSPACE_GUEST"===l,u=(0,A().v3)(),m=(0,o().uB)(void 0,E().A),p=(0,a().IS)((()=>({actionButton:{display:"flex",flexDirection:"row",alignItems:"center",justifyContent:"center",gap:4,height:32,width:"fit-content",fontSize:14,fontWeight:j().Wy.medium,paddingInlineStart:8,paddingInlineEnd:10,paddingTop:4,paddingBottom:4,marginInlineEnd:24},requestAccessButton:{paddingInlineStart:8,marginInlineEnd:24},reimaginedRequestAccessButton:{paddingInlineStart:8}})),[]),y=(0,n.useCallback)((async()=>{const e=I().jF.state.discoverableWorkspaces;if(u.currentUser.id){if(d&&"CAN_JOIN"===l){await(0,R().y)({environment:u,spaceId:t.id,userId:u.currentUser.id,joinableSpacesViewType:"workspace_discovery_table"});const s=e.filter((e=>e.id!==t.id));return I().jF.setState({...I().jF.state,discoverableWorkspaces:s,allDiscoverableWorkspacesCount:s.length}),void D().D6({label:(0,F.jsx)(b().sA,{id:"workspaceDiscovery.joinedSpace.success",defaultMessage:"Joined workspace"})})}if(d&&("CAN_REQUEST"===l||c)){const s=new(M().SpaceStore)(u,{table:h().NX,id:t.id});await(0,N().k7)({environment:u,inviteeUserId:u.currentUser.id,spaceStore:s});const n=e.map((e=>e.id===t.id?{...e,joinabilityStatus:"PENDING_REQUEST"}:e));return I().jF.setState({...I().jF.state,discoverableWorkspaces:n}),void D().D6({label:(0,F.jsx)(b().sA,{id:"workspaceDiscovery.requestAccess.success",defaultMessage:"Access requested"})})}await(0,_().N)({environment:u,result:t,index:s,joinableSpaces:e,buttonPopupStore:m,joinableSpaceViewType:"workspace_discovery_table"})}}),[u,t,s,m,d,c,l]);return i?(0,F.jsx)(B().p,{onClick:y,disabled:"PENDING_REQUEST"===l,colorPalette:"blue",disabledFeedback:"PENDING_REQUEST"===l,children:(0,F.jsx)(U,{joinabilityStatus:l})}):(0,F.jsx)(T().A,{style:p.actionButton,disabled:"PENDING_REQUEST"===l,onClick:y,iconLeading:{icon:W().plusIcon,colorVariant:"tertiary"},children:(0,F.jsx)(U,{joinabilityStatus:l})})}function U({joinabilityStatus:e}){switch(e){case"CAN_JOIN":return(0,F.jsx)(b().sA,{id:"workspaceDiscovery.joinSpaceButton.label",defaultMessage:"Join workspace"});case"CAN_REQUEST":case"ADDED_AS_PAGE_GUEST":case"ADDED_AS_TEAMSPACE_GUEST":return(0,F.jsx)(b().sA,{id:"workspaceDiscovery.requestAccessButton.label",defaultMessage:"Request access"});case"PENDING_REQUEST":return(0,F.jsx)(b().sA,{id:"workspaceDiscovery.accessRequestedForSpaceButton.label",defaultMessage:"Access requested"});default:return null}}const L=24,q={paddingInlineStart:L},H=1300,K=1100,z=1680,O=[{key:I().w1,header:(0,F.jsx)(b().sA,{defaultMessage:"Workspace",id:"workspaceDiscovery.joinableSpaces.nameColumnHeader.label"}),style:{width:"30%"}},{key:I().fH,header:(0,F.jsx)(b().sA,{defaultMessage:"Creator",id:"workspaceDiscovery.joinableSpaces.creatorColumnHeader.label"}),style:{width:"20%"}},{key:I().qZ,header:(0,F.jsx)(b().sA,{defaultMessage:"Members",id:"workspaceDiscovery.joinableSpaces.membersColumnHeader.label"}),style:{width:"20%"}},{key:"join",header:null,style:{width:"30%"}}],G=[{key:I().w1,header:(0,F.jsx)(b().sA,{defaultMessage:"Workspace",id:"workspaceDiscovery.joinableSpaces.nameColumnHeader.label"}),style:{width:"42%"}},{key:I().fH,header:(0,F.jsx)(b().sA,{defaultMessage:"Creator",id:"workspaceDiscovery.joinableSpaces.creatorColumnHeader.label"}),style:{width:"24%"}},{key:I().qZ,header:(0,F.jsx)(b().sA,{defaultMessage:"Members",id:"workspaceDiscovery.joinableSpaces.membersColumnHeader.label"}),style:{width:"14%"}},{key:"join",header:null,style:{width:"20%"}}],V=[{key:I().w1,header:(0,F.jsx)(b().sA,{defaultMessage:"Workspace",id:"workspaceDiscovery.joinableSpaces.nameColumnHeader.label"}),style:{width:"45%"}},{key:I().fH,header:(0,F.jsx)(b().sA,{defaultMessage:"Creator",id:"workspaceDiscovery.joinableSpaces.creatorColumnHeader.label"}),style:{width:"27%"}},{key:"join",header:null,style:{width:"28%"}}];function Q(e){const{joinableSpaces:t,title:s,styles:n,isReimaginedStyles:o,joinContext:a="onboarding"}=e,i="settings"===a;return(0,F.jsxs)(l().wt,{gap:22,style:n,children:[(0,F.jsx)(u().D,{styleKey:"bodyMedium",colorVariant:"primary",style:o||i?void 0:q,children:s}),(0,F.jsx)(J,{joinableSpaces:t,isReimaginedStyles:o,joinContext:a})]})}function J(e){const{joinableSpaces:t,isReimaginedStyles:s,joinContext:a}=e,{columns:i,rows:r}=function(e){const{joinableSpaces:t,isReimaginedStyles:s,joinContext:a}=e,i=(0,o().K8)((()=>{var e;const{onboardingData:t}=C().A.state;return null==t||null===(e=t.userRootStore)||void 0===e?void 0:e.getSpaceViewStores().map((e=>e.getSpaceStore()))}),[]),{isNarrowScreen:r,isWideScreen:d}=ne(a),c=(0,o().K8)((()=>t.map(((e,t)=>{const{id:n,name:o,spaceIcon:d,createdBy:c,totalMemberCount:u,guestPageIds:m,requiredAuthStep:p}=e,y=null==i?void 0:i.find((e=>(null==e?void 0:e.id)===n)),g=[(0,F.jsx)($,{spaceId:n,name:o,spaceIcon:d,spaceStore:y,sharedPageIds:m,requiredAuthStep:p,isReimaginedStyles:s,joinContext:a},`${n}-name`),(0,F.jsx)(ee,{createdBy:c,isReimaginedStyles:s,joinContext:a},`${n}-creator`)];return r||g.push((0,F.jsx)(te,{totalMemberCount:u,isReimaginedStyles:s,joinContext:a},`${n}-members-count`)),g.push((0,F.jsx)(l().wt,{alignItems:"flex-end",children:(0,F.jsx)(P,{joinableSpace:e,joinableSpaceIndex:t,isReimaginedStyles:s,joinContext:a})},`${n}-join`)),{key:n,columns:g}}))),[t,i,r,s,a]),u=r?V:d?O:G,m=(0,o().K8)((()=>I().jF.state.sort),[]),p=(0,n.useCallback)((e=>{if("join"===e)return;const t=m;let s="asc";t.type===e&&(s="asc"===t.order?"desc":"asc"),I().jF.setState({...I().jF.state,sort:{type:e,order:s}})}),[m]),y=u.map((e=>({key:e.key,header:(0,F.jsx)(Y,{column:e,joinContext:a,sortType:m.type,sortOrder:m.order,onSortableColumnClick:p,isReimaginedStyles:s}),style:e.style})));return{columns:y,rows:c}}({joinableSpaces:t,isReimaginedStyles:s,joinContext:a}),d=se({isReimaginedStyles:s,joinContext:a});return(0,F.jsx)(w().A,{columns:i,rows:r,tableStyle:d.tableContainer,rowHoveredStyle:s?void 0:d.tableRowHoveredStyle,hideTopBorderForHeader:!0,hideBottomBorderForLastRow:!0,rowStyle:({rowIndex:e})=>s&&0!==e?d.row:void 0})}function Y(e){const{column:t,joinContext:s,sortType:n,sortOrder:o,onSortableColumnClick:a,isReimaginedStyles:i}=e,l="settings"===s,{header:d}=t;return"join"===t.key?null:(0,F.jsxs)(r().Ay,{style:{display:"flex",gap:4,alignItems:"center",width:"fit-content",padding:l?"2px 4px":void 0,borderRadius:l?4:void 0,marginInlineStart:i||l?0:L},onClick:()=>a(t.key),children:[d,n===t.key?(0,F.jsx)(Z,{sortOrder:o}):void 0]})}function Z(e){const{sortOrder:t}=e;return(0,F.jsx)(c().Q,{iconGroup:"asc"===t?m().u:p,variantName:"small",overrideSize:e=>e-4})}function $(e){const{spaceId:t,name:s,spaceIcon:n,spaceStore:o,sharedPageIds:a,requiredAuthStep:i,isReimaginedStyles:r,joinContext:c}=e,m=a.length>0,p=se({isReimaginedStyles:r,joinContext:c}),g={maxWidth:m?"65%":"85%",...j().RC};return(0,F.jsxs)(l().Ye,{alignItems:"center",gap:4,style:p.columnLeftPadding,children:[(0,F.jsx)(f().B6,{icon:X(t,n),title:s,iconRecordCategory:"workspace",disabled:!0,bucket:"public",isEmptyPage:!1,size:24,emojiSize:24,style:p.spaceIcon,iconBoxStyles:p.spaceIconBox,placeholderStyle:p.spaceIconPlaceholder}),(0,F.jsx)("div",{style:g,children:(0,F.jsx)(u().D,{styleKey:r?"bodyMedium":"bodyRegular",colorVariant:r?"primary":"secondary",children:s})}),"required-saml-auth"===(null==i?void 0:i.type)?(0,F.jsx)("div",{style:p.lockIconContainer,children:(0,F.jsx)(d().I,{icon:y().shieldLockFillIcon,size:"sm"})}):null,(0,F.jsx)(k().R,{spaceStore:o,pageIds:a},`${t}-pages`)]})}function X(e,t){return t?{pointer:{table:h().NX,id:e},icon:t}:void 0}function ee(e){const{createdBy:t,isReimaginedStyles:s,joinContext:n}=e,o=(0,b().tz)(),a=null==t?void 0:t.profile_photo,i=(null==t?void 0:t.name)??o.formatMessage(g().Fvx.messages.anonymousPlaceholder),{isNarrowScreen:r}=ne(n),d=se({isReimaginedStyles:s,joinContext:n}),c={maxWidth:r?"55%":"80%",...j().RC};return(0,F.jsxs)(l().Ye,{alignItems:"center",gap:8,style:d.columnLeftPadding,children:[a?(0,F.jsx)(x().A,{avatar:{name:i,avatarUrl:a},size:24,avatarShouldShowShadow:!1,isOffline:!1}):void 0,(0,F.jsx)(u().D,{styleKey:"bodyRegular",style:c,children:i})]})}function te(e){const{totalMemberCount:t,isReimaginedStyles:s,joinContext:n}=e,o=(0,b().tz)(),a=se({isReimaginedStyles:s,joinContext:n});return(0,F.jsx)("div",{style:a.columnLeftPadding,children:(0,F.jsx)(u().D,{styleKey:"bodyRegular",style:a.memberCount,children:(0,F.jsx)(b().sA,{defaultMessage:"{totalMemberCount, plural, one {{totalMemberCount} member} other {{totalMemberCount} members}}",id:"workspaceDiscovery.joinableSpaces.membersCount",values:{totalMemberCount:(0,S().ZV)(t,"number_with_commas",o)}})})})}function se(e){const{isReimaginedStyles:t,joinContext:s}=e,n="settings"===s;return(0,a().IS)((()=>({tableContainer:{fontSize:14,color:v().Tj.text.secondary,cursor:"default",tableLayout:"fixed"},tableRowHoveredStyle:{background:v().Tj.background.secondary},columnLeftPadding:{paddingInlineStart:n?0:t?void 0:L},spaceIcon:{borderRadius:6,fontSize:j().J.UISmall.desktop,fontWeight:j().Wy.light},spaceIconBox:{borderRadius:6},spaceIconPlaceholder:{fontWeight:500},memberCount:{maxWidth:"90%",...j().RC},lockIconContainer:{display:"grid",justifyContent:"center",alignItems:"center"},row:{borderTop:"none"}})),[t,n])}function ne(e){const t=(0,i().lW)();return(0,n.useMemo)((()=>{const s=t.width;return s<("settings"===e?K:H)?{isNarrowScreen:!0,isWideScreen:!1}:s>z?{isNarrowScreen:!1,isWideScreen:!0}:{isNarrowScreen:!1,isWideScreen:!1}}),[t.width,e])}},799836:(e,t,s)=>{s.d(t,{P:()=>a});var n=()=>s(187174),o=()=>s(753812);function a({environment:e,skipServerFetch:t,includeTopSpaces:s=!1,limit:a}){return(0,n().Yb)((async()=>{if(t)return;const n=await o().callMainCellApi({eventName:"hasJoinableSpaces",environment:e,data:{includeTopSpaces:s,limit:a}});return"failed"!==n.type?n.data:void 0}),[e,t,s,a])}},841307:(e,t,s)=>{s.d(t,{M:()=>d});var n=()=>s(59226),o=()=>s(242422),a=()=>s(484714),i=()=>s(590526),r=()=>s(680074),l=()=>s(799836);function d(e,{experimentId:t}){const s=(0,a().v3)(),d=(0,i().K8)((()=>"professional"===(0,r().FX)()),[]),c=(0,i().K8)((()=>(null==e?void 0:e.canRead())??!1),[e]),u=(0,n().X)("should_request_joinable_spaces_for_workspace_discovery_surface")&&Boolean(e)&&d&&c,[{value:m,status:p}]=(0,l().P)({environment:s,skipServerFetch:!u}),y=Boolean(null==m?void 0:m.hasJoinableSpaces),g=Boolean(e)&&d&&c&&y,S=(0,i().K8)((()=>!!g&&"on"===o().default.getEligibleGroup({experimentId:t,defaultGroup:"control"})),[t,g]);return{shouldShowTab:g&&S,isLoading:"pending"===p&&u}}}}]);