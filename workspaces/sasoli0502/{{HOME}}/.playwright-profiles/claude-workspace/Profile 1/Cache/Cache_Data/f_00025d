"use strict";(globalThis.webpackChunknotion_next=globalThis.webpackChunknotion_next||[]).push([[7457,41751],{9768:(e,t,o)=>{o.d(t,{Br:()=>A,Jh:()=>M,Lb:()=>_,YE:()=>k,cu:()=>T});o(16280),o(898992),o(672577);var i=o.n(o(32485)),n=o(296540),r=()=>o(726637),s=()=>o(484714),a=()=>o(590526),l=()=>o(795732),c=()=>o(677610),d=()=>o(778781),u=()=>o(534177),p=()=>o(623186),g=()=>o(860116),m=()=>o(620612),S=()=>o(478726),v=()=>o(821507),f=()=>o(517223),h=()=>o(823082),y=()=>o(241181),b=()=>o(817942),x=o(474848);const _=12,k=12,C=10,w=10,I=8;function P({collectionSchema:e,module:t}){return!(!e||"normalizedTitleWithIcon"!==t.type)&&(0,f().LD)({collectionSchema:e,module:t}).length>0}function M({layoutModule:e,area:t,context:o,collectionSchema:s,collectionStore:v,showDetailsPanelToggleButtonBelowTitle:f,modules:M,postContext:A}){const T=M.findIndex((t=>t.id===e.id)),B=null!=M&&M.length&&-1!==T?M[T+1]:void 0,j=(0,y().p)({collectionStore:v,layoutModule:B}),V=(0,p().aN)(v),K=(0,a().K8)((()=>Boolean(null==v?void 0:v.isPageTreeCollection())),[v]),E=(0,c().y)(),R=(0,a().K8)((()=>(0,g().I)(null==v?void 0:v.getLayoutStore())),[v]),D=(0,a().K8)((()=>(0,m().n)()),[]),L=R&&!D,[F,z]=(0,n.useMemo)((()=>{const i=P({collectionSchema:s,module:e});let n=!1;const a={};if("page_details"===t||"person_profile_page_details"===t)a.marginBottom=C,a.paddingBottom=w;else if("page_main"===t||"person_profile_page_main"===t)a.marginBottom=k,a.paddingBottom=_;else if("views_main_tab_modules"===t)a.marginBottom=k,a.paddingBottom=_;else{if("form_layout_schema"===t||"form_conditional_modules"===t)throw new Error("Not implemented for forms");if("dashboard_layout_schema"===t)throw new Error("Not implemented for dashboard");(0,u().HB)(t)}const c="editor"===(null==B?void 0:B.type);(0,S().Mi)(A)?"editor"===e.type&&A!==l().R.DraftPostInFullPageComposer?n=!0:"normalizedTitleWithIcon"===e.type&&(a.marginBottom=void 0,a.paddingBottom=I):c&&(n=!0,"normalizedTitleWithIcon"!==e.type||i||(n=!1,a.marginBottom=void 0,a.paddingBottom=void 0),"views_main_tab_modules"===t&&(n=!1,a.marginBottom=void 0,a.paddingBottom=void 0)),j&&a.marginBottom&&(a.marginBottom=Math.max(a.marginBottom-4,0)),"page_main"!==t&&"page_details"!==t&&"views_main_tab_modules"!==t||(E||"discussions"===e.type?a.marginInlineStart=0:"normalizedTitleWithIcon"===e.type?a.marginInlineStart=-4:(0,d().gx)(e)||"properties"===e.type||"relationsGroup"===e.type?a.marginInlineStart=-6:"editor"===e.type&&(a.marginInlineStart=-2));const p="views"===(null==B?void 0:B.type)||"editor"===(null==B?void 0:B.type);return"page_main"!==t&&"page_details"!==t||!a.paddingBottom||p||("property_text"===e.type||"property_relation"===e.type&&V?a.paddingBottom=Math.max(a.paddingBottom-4,0):"properties"===e.type&&(K&&!r().A.isMobile||(a.paddingBottom=Math.max(a.paddingBottom-4,0))),"viewsMain"===(null==B?void 0:B.type)&&(a.paddingBottom=Math.max(a.paddingBottom-12,0))),"normalizedTitleWithIcon"===e.type&&(i?r().A.isMobile&&"properties"===(null==B?void 0:B.type)&&!j&&(a.paddingBottom=void 0,a.marginBottom=4):(f?"discussions"===(null==B?void 0:B.type)&&(a.marginBottom=void 0):"properties"===(null==B?void 0:B.type)?(a.paddingBottom=void 0,a.marginBottom=8):"discussions"===(null==B?void 0:B.type)&&(a.paddingBottom=_),r().A.isMobile&&"discussions"===(null==B?void 0:B.type)&&(a.marginBottom=void 0))),"bottomControls"===e.type&&(a.paddingBottom=void 0,a.marginBottom=void 0),"discussions"===e.type&&c&&(a.paddingBottom=void 0,a.marginBottom=void 0),"discussions"===e.type&&L&&(a.paddingTop=40),"inlinePageSections"!==(null==B?void 0:B.type)&&"expandedBacklinks"!==(null==B?void 0:B.type)&&"bottomControls"!==(null==B?void 0:B.type)||(a.marginBottom=8),"editor"!==e.type||(0,S().Mi)(A)||o===l().R.Presentation||(a.marginTop=8),("views"===e.type||"editor"===e.type&&!(0,S().Mi)(A))&&(a.paddingBottom=void 0,a.marginBottom=void 0),"viewsMain"===e.type&&(a.paddingBottom=void 0),o!==l().R.DraftPostInInlineComposer&&o!==l().R.WorkflowInstructionsInInlineComposer||(a.marginBottom=4,a.paddingBottom=0),[n,a]}),[s,e,t,null==B?void 0:B.type,j,K,o,V,f,A,E,L]);return(0,n.useMemo)((()=>function(t){return(0,x.jsx)(b().vV,{className:i()({"layout-content-with-divider":F}),style:z,testId:(0,h().H)(e),children:t})}),[e,F,z])}function A({layoutModule:e,area:t,collectionSchema:o,collectionStore:i,showDetailsPanelToggleButtonBelowTitle:n,pageMainModules:r}){const l=(0,s().Y0)(),c=(0,a().K8)((()=>{if(!i)return!1;return!!r.find((e=>"normalizedTitleWithIcon"===e.type))&&n}),[i,r,n]),d=(0,v().D1)(l);if(!i)return!1;if("properties"!==e.type&&"discussions"!==e.type&&"relationsGroup"!==e.type)return!1;if("page_main"!==t)return!0;const u=r.findIndex((t=>t.id===e.id));if(0===u||r.length<=1)return!1;if("discussions"===e.type&&d)return!1;const p=r[u-1];if("normalizedTitleWithIcon"!==(null==p?void 0:p.type))return!0;if("relationsGroup"===e.type&&c)return!0;if("properties"===e.type&&c&&!l.isPhone)return!0;const g=P({collectionSchema:o,module:p});return("properties"!==e.type||!l.isPhone||!g)&&g}function T({collectionStore:e,modulesByArea:t}){return!((e.getNormalizedPropertyGroups({publicPageDataFallbackEnabled:!0})||[]).length>0)&&0===(0,f().Ul)({collectionStore:e,modulesByArea:t}).length}},21178:(e,t,o)=>{o.d(t,{DV:()=>n,Up:()=>s,cf:()=>r});var i=()=>o(201980);const n=1e3;function r(e){if(!e)return!1;const t=(0,i().q4_)(e.getValue());return Boolean(t)}function s(e){if(!e)return[];const t=e.getSettings();return(null==t?void 0:t.hidden_collection_descriptions)??[]}},25680:(e,t,o)=>{o.d(t,{S:()=>c});var i=o(296540),n=()=>o(590526),r=()=>o(795732),s=()=>o(174765),a=()=>o(466721);const l=new(o(299919).Y)((e=>new(o(247860).A)));function c({store:e,environment:t,postContext:o}){const{pageVisitStore:c,presenceStore:d}=(0,n().K8)((()=>({pageVisitStore:l.get(e),presenceStore:new(s().A)})),[e]);return(0,i.useEffect)((()=>{!o||o!==r().R.PostInFullPageOrPeek&&o!==r().R.PageInFeed||(e.id!==c.state.pageId&&c.setState({...c.getInitialState(),pageId:e.id}),a().updatePageVisits(t,{blockStore:e,pageVisitStore:c,incremental:!1,includeTotalCount:!0}))}),[e,c,t,d,o]),{pageVisitStore:c,presenceStore:d}}},67805:(e,t,o)=>{o.d(t,{X:()=>s,c:()=>a});o(898992),o(672577);var i=()=>o(907258),n=()=>o(68263),r=()=>o(761309);function s(e,t){return e.sort(((e,o)=>{const i=e.store.canAdmin();if(i===o.store.canAdmin()){var n,r;const i=null===(n=e.publishedMetadata.publishedBy)||void 0===n?void 0:n.id,s=e.publishedMetadata.publishedTime,a=null===(r=o.publishedMetadata.publishedBy)||void 0===r?void 0:r.id,l=o.publishedMetadata.publishedTime;if(t){if(i===t&&a===t&&s&&l)return l-s;if(i===t)return-1;if(a===t)return 1}return s&&l?l-s:0}return i?-1:1}))}function a(e){const{environment:t,store:o}=e;if(!r().i0(o).find((e=>(0,n().W8)(e.permissionItem))))return!1;const s=i().default.getState().sidebarSpaceStore;if(null!=s&&s.getSettings().hide_sites_banner)return!1;return!r().qb(t,o,o.getSpaceStore())}},72900:(e,t,o)=>{o.d(t,{A:()=>M});o(581454);var i=o(296540),n=()=>o(484714),r=()=>o(590526),s=()=>o(757695),a=()=>o(302501),l=()=>o(69708),c=()=>o(726637),d=()=>o(100622),u=()=>o(284371),p=()=>o(187820),g=()=>o(16006),m=(o(898992),o(354520),o(474848));const S=function({store:e,style:t}){const i=(0,r().K8)((()=>(0,o(371722).f)(e,{includeTeamHomeFeed:!1,includeDataSources:!0}).filter((e=>!(e instanceof o(350013).N)))),[e]);(0,r().K8)((()=>e.isNavigableBlock()),[e])&&i.shift(),i.reverse();const n=i.length;if(0===n)return null;n>2&&i.splice(1,i.length-2);const s=i.map((e=>(0,m.jsx)(h,{store:e},e.id)));n>2&&s.splice(1,0,(0,m.jsx)(f,{}));const l=(0,o(681873).G)(s,(e=>(0,m.jsx)(v,{},e)));return(0,m.jsx)(a().A,{isSecondaryColor:!0,isSmall:!0,style:t,children:l})};function v(){return(0,m.jsx)("span",{style:{paddingInlineStart:4,paddingInlineEnd:4},children:"/"})}function f(){return(0,m.jsx)("span",{children:"..."})}function h({store:e}){return(0,m.jsx)(g().A,{store:e,shouldWrap:!0,maxLength:20})}var y=()=>o(365136),b=()=>o(761309);const x=function({currentBlockStore:e,backlinkStore:t,scrollToBlockId:i,discussionId:s,showOriginalToken:a,disableCurrentPageToken:c,disableArrow:p}){const v=(0,n().v3)(),f=(0,r().K8)((()=>!(0,b().X9)(v,e)&&(0,b().X9)(v,t)),[v,e,t]),h=(0,r().O$)(o(907258).AppStoreMainEditorCurrentBlockStore),y=h&&h.id===t.id,x=(0,r().K8)((()=>(0,o(492414).Ay)({store:t,scrollToBlockId:i,discussionId:s,fullyQualified:!0,preferPublicLink:(0,o(466088).w)(v),pageVisitSource:o(584262).y8.LinkInPage})),[t,i,s,v]);return(0,m.jsx)(o(996332).Q,{href:x,external:!1,innerStyle:{paddingInlineStart:8,paddingInlineEnd:16},children:(0,m.jsx)(o(83801).Ay,{childrenStyle:{padding:"4px 2px"},alignment:"center",style:{marginBottom:2,marginInlineEnd:4},right:(0,m.jsxs)(m.Fragment,{children:[a?(0,m.jsx)("div",{style:k(v),children:(0,m.jsx)(l().sA,{defaultMessage:"Original",id:"backlink.originalTokenLabel"})}):void 0,y&&!c?(0,m.jsx)("div",{style:k(v),children:(0,m.jsx)(l().sA,{defaultMessage:"This page",id:"backlink.currentPageTokenLabel"})}):void 0]}),children:(0,m.jsxs)("div",{style:{display:"flex",alignItems:"center"},children:[p?void 0:(0,m.jsx)(o(807449).I,{icon:o(607481).K,size:"sm"}),(0,m.jsx)(_,{backlinkStore:t}),(0,m.jsx)(g().A,{store:t,style:{fontWeight:u().Wy.medium,fontSize:u().J.UIRegular.desktop,lineHeight:1.3,borderBottom:`1px solid ${d().Tj.border.primaryTranslucent}`,flexShrink:1}}),(0,m.jsxs)("div",{style:{marginTop:-2,minWidth:0,display:"flex",alignItems:"baseline",flex:"2 0 40%",paddingTop:"0.1em"},children:[(0,m.jsx)(S,{store:t,style:{paddingInlineStart:8}}),(0,m.jsx)(C,{isPrivate:f})]})]})})})};function _({backlinkStore:e}){const t=(0,r().K8)((()=>e.getIcon()),[e]),o=(0,r().K8)((()=>e.isEmptyPage()),[e]),i=(0,r().K8)((()=>(0,p().Te)(e)),[e]);return(0,m.jsx)(p().B6,{disabled:!0,icon:t,iconRecordCategory:i,isEmptyPage:o,size:20,style:{marginInlineStart:4,marginInlineEnd:4}})}function k(e){const{device:t}=e;return{padding:"2px 6px",borderRadius:4,color:d().Tj.text.secondary,background:d().Tj.legacyDefaultSelectColor,fontSize:c().A.isMobile?11:9,lineHeight:t.isAndroid?1.5:1,textTransform:"uppercase",letterSpacing:"0.04em",whiteSpace:"nowrap",marginInlineStart:4}}function C({isPrivate:e}){return e?(0,m.jsx)("div",{style:{paddingInlineEnd:4,marginInlineStart:12},children:(0,m.jsx)(y().Y,{})}):null}const w=10,I=s().Store.createClass(w,{name:"ShowMoreStore"}),P=s().Store.createClass(!1,{name:"HoveredStore"});const M=function({store:e,originalTransclusionStore:t,disableInaccessiblePages:s,headerText:a,disableArrow:c,disableCurrentPageToken:d}){const u=(0,n().v3)(),p=(0,r().uB)(void 0,P),g=(0,r().uB)(void 0,I),S=(0,r().K8)((()=>(0,o(900967).cg)(e,u)),[e,u]),v=(0,i.useCallback)((()=>function(e){e.setState(e.state+w)}(g)),[g]),f=(0,i.useCallback)((()=>function(e){e.setState(!1)}(p)),[p]),h=(0,i.useCallback)((()=>function(e){e.setState(!0)}(p)),[p]),y=(0,r().O$)(g),b=(0,r().K8)((()=>t?t.getNavigableBlockStore():void 0),[t]);if(0===S.backlinks.length&&!t)return null;const _=S.backlinks.length>y,k=S.inaccessibleBacklinkCount>0&&!s;return(0,m.jsxs)("div",{onMouseMove:h,onMouseLeave:f,children:[a?(0,m.jsx)(A,{headerText:a}):void 0,t&&b?(0,m.jsx)(x,{currentBlockStore:e,disableArrow:c,disableCurrentPageToken:d,backlinkStore:b,scrollToBlockId:t.id,showOriginalToken:!0}):void 0,S.backlinks.slice(0,y).map((t=>(0,m.jsx)(x,{currentBlockStore:e,disableArrow:c,disableCurrentPageToken:d,...t},t.backlinkStore.id))),_||k?(0,m.jsx)(o(26697).m,{disableTooltip:_,renderTooltip:()=>(0,m.jsx)(l().sA,{defaultMessage:"Synced in pages that you don’t have access to.",id:"page.backlinks.privatePagesTooltip"}),render:e=>(0,m.jsx)(o(631524).p,{iconLeading:o(589407).ellipsisIcon,colorPalette:"gray",onClick:v,style:{padding:`2px ${c?17:14}px`,width:"100%"},disabled:!_,...e,children:_?(0,m.jsx)(l().sA,{defaultMessage:"{count} more",id:"page.backlinks.more",values:{count:S.backlinks.length-y}}):(0,m.jsx)(l().sA,{id:"page.backlinks.privatePages",defaultMessage:"{count, plural, one {{count} private page} other {{count} private pages}}",values:{count:S.inaccessibleBacklinkCount}})})}):void 0]})};function A({headerText:e}){return(0,m.jsx)("div",{style:{display:"flex"},children:(0,m.jsx)(a().A,{isSmall:!0,style:{marginTop:12,marginBottom:8,marginInlineStart:4,flex:1,paddingInlineStart:8},children:e})})}},77126:(e,t,o)=>{o.d(t,{j:()=>n});class i extends(()=>o(959180))().A{}const n=new i},94701:(e,t,o)=>{o.r(t),o.d(t,{checkmarkFillIcon:()=>n,iconDefinition:()=>i});o(296540);const i={viewBox:"0 0 20 20",fittedViewBox:"3.66 3.66 12.68 12.68",svg:(0,o(474848).jsx)("path",{d:"M15.913 3.787a.875.875 0 0 1 .3 1.2L9.658 15.914a.875.875 0 0 1-1.415.119l-4.37-5.098a.875.875 0 0 1 1.329-1.14l3.58 4.177 5.93-9.884a.875.875 0 0 1 1.2-.3"})},n=(0,o(340498).wt)("checkmarkFill",i,"fill")},103018:(e,t,o)=>{o.d(t,{W:()=>n});var i=()=>o(753851);function n(e){return(0,i().F)(e)}},155129:(e,t,o)=>{o.d(t,{X:()=>i});const i=(0,o(296540).createContext)(0);i.displayName="PageViewHorizontalOffsetContext"},158574:(e,t,o)=>{o.d(t,{JO:()=>a,K$:()=>d,KM:()=>c});var i=()=>o(908006),n=()=>o(21178),r=()=>o(260850),s=()=>o(244828);function a(e){const{store:t,pageId:o,descriptionStore:i,environment:n,userSettingsStore:r}=e;l({environment:n,isExpanded:!t.state.isPageDescriptionExpanded,pageId:o,store:t,userSettingsStore:r,descriptionStore:i})}function l(e){const{environment:t,pageId:o,isExpanded:i,store:r,userSettingsStore:a}=e;i!==r.state.isPageDescriptionExpanded&&(r.setState({...r.state,isPageDescriptionExpanded:i}),a&&s().createAndCommit({userAction:"pageDescriptionActions.setExpanded",environment:t,canUndo:!0,perform:e=>{if(i){const t={pointer:{table:"user_settings",id:a.id},path:["settings","hidden_collection_descriptions"],command:"listRemove",args:{id:o}};s().applyOperation({store:a,transaction:e,operation:t})}else{const t={pointer:{table:"user_settings",id:a.id},path:["settings","hidden_collection_descriptions"],command:"listAfter",args:{id:o}};s().applyOperation({store:a,transaction:e,operation:t});let i=(0,n().Up)(a);for(;i.length>n().DV;){const t=i[0],o={pointer:{table:"user_settings",id:a.id},path:["settings","hidden_collection_descriptions"],command:"listRemove",args:{id:t}};s().applyOperation({store:a,transaction:e,operation:o}),i=(0,n().Up)(a)}}}}))}function c(e){const{environment:t,pageId:o,store:n,userSettingsStore:s,descriptionStore:a}=e;l({environment:t,isExpanded:!0,pageId:o,store:n,userSettingsStore:s,descriptionStore:a}),i().default.afterNextFlush((()=>{a&&!t.device.isMobileBrowser&&(0,r().z)({store:a})}))}function d(e){const{pageId:t,store:o,userSettingsStore:i,descriptionHasText:r}=e;if(!r)return void o.setState({...o.state,isPageDescriptionExpanded:!1});const s=!(0,n().Up)(i).includes(t);o.setState({...o.state,isPageDescriptionExpanded:s})}},165121:(e,t,o)=>{o.d(t,{A:()=>n});class i extends(()=>o(757695))().Store{constructor(){super()}getInitialState(){}}const n=new i},182034:(e,t,o)=>{o.d(t,{O:()=>u,e:()=>d});o(898992),o(672577);var i=()=>o(908006),n=()=>o(961232),r=()=>o(878523),s=()=>o(222138),a=()=>o(299545),l=()=>o(77126),c=()=>o(260850);function d(e,t){const o=a().dd(t),i=s().xh(o);e.setState({...e.state,files:i})}async function u(e){const{blockStore:t,pageViewBlockStore:o,environment:s}=e;o?o.setState({...o.state,forceDiscussionOpen:!0}):n().A.openNewPageDiscussionInput(t),r().o2(s,{from:"page_comments"}),await i().default.afterNextFlush();const a=l().j.find((e=>e.getBlockStore().id===t.id)),d=null==a?void 0:a.getInputStore();d&&(0,c().z)({store:d.state.textStore})}},243991:(e,t,o)=>{o.d(t,{p:()=>le});var i=o(296540),n=()=>o(23749),r=()=>o(726637),s=()=>o(484714),a=()=>o(590526),l=()=>o(401497),c=()=>o(795732),d=()=>o(69708),u=()=>o(100622),p=()=>o(741751),g=()=>o(993905),m=()=>o(478726),S=()=>o(835066),v=o(474848);function f(e){const{pageBlockStore:t,isVisible:i,context:n}=e,r=(0,s().Y0)(),l=(0,a().K8)((()=>(0,m().Ck)(t,n,r)),[t,n,r]);return(0,v.jsx)(g().s,{allowSelectionWithin:!0,style:{width:l&&i?S().Qb:0},children:(0,v.jsx)(o(774733).UY,{...e})})}var h=()=>o(601734),y=()=>o(860116),b=()=>o(79926);const x=new(b().O2)("VirtualList",(()=>Promise.all([o.e(51220),o.e(10876)]).then(o.bind(o,786148)))),_=(0,b()._h)(x,(e=>e.VirtualList));var k=()=>o(284371);function C(e){return(0,o(821507).D1)(e)?k().LP.redesign:k().LP.control}var w=()=>o(622237),I=()=>o(712505);function P({environment:e,pageBlockStore:t,pathToBlockId:i}){const n=new(o(770063).pm)({environment:e,pointer:t.pointer,path:i}).getValue();return new(o(295633).B)(e,{table:"block",spaceId:t.getSpaceId(),id:n})}var M=()=>o(907258),A=()=>o(135168),T=()=>o(110525),B=()=>o(402014),j=()=>o(929219),V=()=>o(677610),K=()=>o(718827),E=()=>o(584262),R=()=>o(799954),D=()=>o(160568),L=()=>o(716776),F=()=>o(649813),z=()=>o(245125),O=()=>o(33791),W=()=>o(109488),H=()=>o(68465),N=()=>o(492414),U=()=>o(619206),q=()=>o(246766),Q=()=>o(691809),Y=()=>o(957763),G=()=>o(244828),X=()=>o(874832),$=()=>o(249046);function J(){const e=(0,l().IS)((()=>({textOne:{height:24,width:"100%",borderRadius:8},textTwo:{height:24,width:"100%",borderRadius:8},textThree:{height:24,width:"80%",borderRadius:8}})),[]);return(0,v.jsxs)($().wt,{gap:6,children:[(0,v.jsx)(X().P,{style:e.textOne}),(0,v.jsx)(X().P,{style:e.textTwo}),(0,v.jsx)(X().P,{style:e.textThree})]})}o(581454);function Z(){const e=(0,l().IS)((()=>({menu:{display:"flex",alignItems:"center",marginBottom:5},icon:{marginInlineStart:5,width:26,height:26,marginInlineEnd:10,borderRadius:4},menuItem:{height:14,marginTop:8,marginBottom:8,width:"25%",borderRadius:8}})),[]);return(0,v.jsx)(v.Fragment,{children:[...Array(6)].map(((t,o)=>(0,v.jsxs)("div",{style:e.menu,children:[(0,v.jsx)(X().P,{style:e.icon}),(0,v.jsx)(X().P,{style:e.menuItem})]},o)))})}const ee={width:"100%"};function te(e){const{menuListStore:t,store:i}=e;(0,o(852507).w)((()=>{t.reset()}));const n=(0,a().K8)((()=>function(e){const t=z().f.state.pages.get(e.id);if(t){if(!t.hasContent)return!1}else{const t=e.getFormat().duplication_job_ids;if(!t||0===t.length)return!1}return!e.hasContent()}(i)),[i]),r=(0,a().K8)((()=>function(e){return Boolean(e.getAssociatedCollectionStore())}(i)),[i]);return(0,v.jsx)(g().s,{style:ee,allowSelectionWithin:!1,children:r&&n?(0,v.jsx)(J,{}):(0,v.jsx)(oe,{menuListStore:t,store:i,collectionPage:r})})}function oe(e){const{menuListStore:t,store:o,collectionPage:n}=e,r=(0,s().WS)(),c=(0,a().O$)(j().e),d=(0,a().K8)((()=>o.isTeamPost()),[o]),u=(0,a().K8)((()=>(0,y().I)(o.getAssociatedLayoutStore())),[o]),p=(0,l().IS)((()=>({wrapStyle:{width:"100%",display:"flex",flexDirection:"column",marginBottom:d?void 0:u?0:"14vh"}})),[d,u]),g=(0,i.useCallback)((()=>!r&&(0,v.jsx)(Z,{})),[r]);return(0,v.jsx)(W().A,{capture:!0,render:e=>(0,Q().A)((i=>(0,v.jsxs)("div",{...e,...i,style:p.wrapStyle,children:[(0,v.jsx)(ne,{store:o,collectionPage:n}),c?(0,v.jsx)(h().t,{menuListStore:t,store:o,renderLoading:g}):void 0]})))})}function ie(e,t,o){const{mainEditorCurrentBlockStore:i}=M().default.state;!function(e,t,o){o?o(e):(0,q().navigate)({environment:t,url:e})}(i?(0,N().Ay)({store:i,peekViewBlockId:e.id,fullyQualified:!1,pageVisitSource:E().y8.LinkInPage}):(0,N().Ay)({store:e,fullyQualified:!1,pageVisitSource:E().y8.LinkInPage}),t,o)}function ne(e){const{store:t,collectionPage:o}=e,n=(0,s().v3)(),c=(0,s().Y0)(),p=(0,i.useContext)(T().n),g=(0,a().K8)((()=>U().A.getMode(n,t,t.getSpaceStore())),[n,t]),m=(0,i.useCallback)((()=>function(e){const{environment:t,store:o,overrideLinkClick:i}=e,n=o.getAssociatedCollectionStore();if(n&&(0,Y().E)(t,(0,A().f)(o))){const{performResult:e}=G().createAndCommit({userAction:"TemplatePicker.newPage",environment:t,canUndo:!0,perform:e=>F().bI({environment:t,collectionStore:n,transaction:e})});e&&ie(e,t,i),D().er(t,{collection_id:n.id})}}({environment:n,store:t,overrideLinkClick:p})),[n,t,p]),S=(0,a().K8)((()=>t.isTemplate()),[t]),f=(0,a().O$)(j().e),h=(0,a().K8)((()=>function(e){const t=e.getAssociatedCollectionStore(),o=t?t.getTemplatePageStores():void 0;return o&&o.length>0}(t)),[t]),y=o&&!h,b=o&&h,x=(0,a().K8)((()=>{const e=t.getAssociatedCollectionStore(),o=e&&e.getParentBlockStore();return!(0,O().v)({collectionStore:e,collectionViewBlockStore:o,checkNavigableAncestorLocked:!0})}),[t]),_=(0,a().K8)((()=>(0,H().ZE)(g,t)),[g,t]),k=(0,a().K8)((()=>t.isTeamPost()),[t]),C=(0,V().y)(),w=(0,l().IS)((()=>{const e=C?8:0,t=C?8:5;return{placeholder:{...R().CC,color:u().Tj.text.tertiary,paddingTop:k?3:t,paddingBottom:k?3:24,paddingInlineStart:k?2:e,paddingInlineEnd:k?2:void 0}}}),[k,C]);let I=null;return f||c.isPhone?S?I=(0,v.jsx)(d().sA,{defaultMessage:"{isMobileDevice, select, true {Tap here to continue with an empty page.} other {Press Enter to continue with an empty page.}}",id:"templatePicker.isTemplate.emptyPagePrompt",values:{isMobileDevice:r().A.isMobile}}):r().A.isMobile?b?I=c.isTablet?(0,v.jsx)(d().sA,{defaultMessage:"Tap here to continue with an empty page, or pick a template",id:"templatePicker.mobileTabletEmptyPage.withTemplates.prompt"}):(0,v.jsx)(d().sA,{defaultMessage:"Tap here to continue...",id:"templatePicker.mobilePhoneEmptyPage.withTemplates.prompt"}):y?I=(0,v.jsx)(d().sA,{defaultMessage:"{isParentLocked, select, true {Tap here to continue with an empty page} other {Tap here to continue with an empty page, or <templatebutton>create a template</templatebutton>}}",id:"templatePicker.mobileCollectionEmptyPage.prompt",values:{isParentLocked:x,templatebutton:e=>(0,v.jsx)(K().Ay,{style:{display:"inline-block",textDecoration:"underline"},onClick:m,children:e})}}):c.isPhone||(I=c.isTablet?(0,v.jsx)(d().sA,{defaultMessage:"Tap here to continue with an empty page, or pick a template",id:"templatePicker.mobileTabletEmptyPage.withTemplates.prompt"}):(0,v.jsx)(d().sA,{defaultMessage:"Tap here to continue...",id:"templatePicker.mobilePhoneEmptyPage.withTemplates.prompt"})):y?I=(0,v.jsx)(d().sA,{defaultMessage:"{isParentLocked, select, true {Press Enter to continue with an empty page} other {Press Enter to continue with an empty page, or <templatebutton>create a template</templatebutton>}}",id:"templatePicker.webCollectionEmptyPage.prompt",values:{isParentLocked:x,templatebutton:e=>(0,v.jsx)(K().Ay,{style:{display:"inline-block",textDecoration:"underline"},onClick:m,children:e})}}):_&&!o||(I=(0,v.jsx)(d().sA,{defaultMessage:"Press Enter to continue with an empty page, or pick a template (↑↓ to select)",id:"templatePicker.webEmptyPage.withTemplates.prompt"})):I=(0,v.jsx)(d().sA,{defaultMessage:"{isMobileDevice, select, true {Tap here to continue with an empty page. Please go online to use templates.} other {Press Enter to continue with an empty page. Please go online to use templates.}}",id:"templatePicker.deviceOffline.goOnlinePrompt",values:{isMobileDevice:r().A.isMobile}}),I?(0,v.jsx)("div",{style:ee,children:(0,v.jsx)("div",{style:w.placeholder,onClick:e=>function(e,t,o){(0,B().SQ)(e,B().y$.Click,(()=>{(0,Y().E)(o,(0,A().f)(t))&&(G().createAndCommit({userAction:"TemplatePicker.handleEmptyPageContinueClick",environment:o,canUndo:!0,perform:e=>{L().n({environment:o,store:t,transaction:e})}}),D().ki(o,{is_keyboard:!1,from:"template_picker",template_type:"empty_page"}))}))}(e,t,n),children:I})}):null}var re=()=>o(551619),se=()=>o(817942);const ae=(0,i.forwardRef)((function({context:e,disabled:t,onClick:g,store:S,templatePickerMenuListStore:f,testPlaceholder:b,forceIsInsideMarginCollapseContainer:x},k){const P=(0,s().v3)(),{device:M}=P,A=(0,re().Hy)(S),T=(0,o(877051).V)(),B=function(e,t){const o=(0,re().O9)(e,t),i=(0,re().Rg)(e,t);if(o)return"horizontal";if(i)return"legacy";return"none"}(S,e),j=(0,re().f7)(S),V=(0,re().Sm)(S),K=(0,a().K8)((()=>!!t||(!!(0,o(457419).S)(S)||!!V)),[S,t,V]),E=(0,a().K8)((()=>S.getFormat()),[S]),R=(0,a().K8)((()=>(0,m().In)(S)),[S]),D=(0,m().L5)(e),L=(0,a().K8)((()=>S.isTeamPost()),[S]),F=(0,o(891078).bx)(S,t),z=(0,s().WS)(),O=(0,a().K8)((()=>S.isCollectionView()),[S]),W=(0,a().K8)((()=>(0,o(620612).n)()),[]),H=(0,a().K8)((()=>Boolean(S.getCover())),[S]),N=(0,o(59226).X)("page_editor_virtual_list"),U=(0,a().K8)((()=>{var e;const t=null===(e=S.getAssociatedCollectionStore())||void 0===e?void 0:e.getLayoutStore();return(0,y().I)(t)}),[S]),q=(0,a().K8)((()=>M.isAndroid&&M.isTablet&&M.isMobileNative?P.WindowSizeStore.getSafePaddingBottomPx(36):0),[M,P.WindowSizeStore]),Q=(0,a().K8)((()=>D?o(612587).A.state.totalHeight:o(150193).A.state.totalHeight),[D]),Y=(0,a().K8)((()=>{const e=(0,o(747100).cq)(S)&&!I().default.isSidePeekOpen()&&!I().default.isSidePeekClosingStore.state?`100vh - ${I().PeekModeOuterPadding}px*2`:"100vh",t=(0,o(175947).ek)(P.device.isElectronMac),i=o(729380).u.getTotalHeight();return`calc(${e} - ${t}px - 66px - 48px - 140px - ${q}px - ${Q??0}px + ${i<250?0:i}px)`}),[S,P.device.isElectronMac,q,Q]),G=C(M),X=(0,i.useCallback)((()=>e===c().R.DraftPostInInlineComposer||e===c().R.WorkflowInstructionsInInlineComposer?29:L||W||U?0:"15vh"),[e,L,U,W]),$=(0,l().IS)((()=>{const t=E.page_font||p().zs,i=p().DX[t];let n,s;if(n=r().A.isMobile?G.lineHeight:p().JK[t]||1.5,r().A.isMobile)s=G.fontSize;else if(e===c().R.DraftPostInInlineComposer||e===c().R.WorkflowInstructionsInInlineComposer)s=14;else{s=E.page_small_text?p().Y4[t]||p().dp:p().T1[t]||p().uD}let a={},l=e===c().R.Presentation?{}:{paddingTop:e===c().R.DraftPostInInlineComposer||e===c().R.WorkflowInstructionsInInlineComposer?0:8};const d=(0,m().L5)(e);if(!(R&&d&&"none"===B&&!A)){const e=R?X():0;l={...l,paddingBottom:e},a={...l,paddingInlineStart:0,paddingInlineEnd:0}}let g={};d&&!L&&(g={...U?{}:{minHeight:240},zIndex:1});let S={};e===c().R.InAppTemplatePreview&&(S={margin:"0 auto"});let v={};if(z&&!O&&F&&!H){const t=132,i=(0,p().nu)(e,M),n=o(911988).s1+t-i;v={minHeight:U?`${n}px`:`calc(100vh - ${n}px)`}}return{content:{flexShrink:0,flexGrow:1,maxWidth:"100%",display:"flex",alignItems:"flex-start",flexDirection:"column",fontFamily:p().AP[t],fontSize:s,letterSpacing:i?`${i}em`:void 0,lineHeight:n,width:"100%",...U||W?{minHeight:80}:{},zIndex:4,...a,...g,...S,...v},emptyDroppableStyle:{width:"100%"},templatePicker:{position:"absolute",top:Y,width:"100%",pointerEvents:"none",transition:"top 220ms ease"},emptyPlaceholderText:{color:u().Tj.text.disabled,paddingInlineStart:8}}}),[E.page_font,E.page_small_text,M,e,R,B,A,L,z,O,F,H,Y,G,X,U,W]),[J,Z]=function(e,t){const n=(0,i.useRef)(null),r=(0,o(93583).A)(n,e),s=(0,o(943101).wY)(n),l=(0,i.useCallback)((e=>{w().A.setWidth(e.width,t)}),[t]);(0,i.useEffect)((()=>{s&&l(s)}),[l,s]);const c=(0,a().K8)((()=>w().A.getWidth(t)),[t]);return[r,c]}(k,D),ee=R&&W,oe=N?_:o(217638).A;return(0,v.jsxs)(n().A,{name:"PageEditor",children:[(0,v.jsxs)("div",{className:o(882722).pXT,onClick:g,style:$.content,ref:J,children:[j?void 0:(0,v.jsx)(oe,{store:S.getContentStore(),emptyDroppableStyle:$.emptyDroppableStyle,disabled:K,placeholder:b,forceIsInsideMarginCollapseContainer:!!x||void 0}),A?(0,v.jsx)(o(98126).k,{}):void 0,ee?(0,v.jsx)("div",{style:$.emptyPlaceholderText,children:(0,v.jsx)(d().sA,{id:"pageEditor.empty.placeholderText",defaultMessage:"Empty"})}):void 0,f&&"legacy"===B?(0,v.jsx)(te,{store:S,menuListStore:f}):void 0]}),"horizontal"!==B||T?void 0:(0,v.jsx)("div",{style:$.templatePicker,children:(0,v.jsx)(h().Nv,{store:S,context:e,menuListStore:f,editorWidth:Z})})]})}));const le=(0,i.forwardRef)((function(e,t){const{context:l,disabled:d,handlePlaceholderWrapClick:u,pageBlockStore:p,pathToBlockId:g,templatePickerMenuListStore:h,pageViewBlockAccessor:y,editorWrapper:b,forceIsInsideMarginCollapseContainer:x}=e,_=(0,s().v3)(),k=(0,a().K8)((()=>g?P({environment:_,pageBlockStore:p,pathToBlockId:g}):p),[_,p,g]),C=(0,a().K8)((()=>(0,S().dC)(_,p)),[_,p]),w=(0,a().K8)((()=>(0,m().In)(p)),[p]),I=(0,a().K8)((()=>(0,o(715142).Fm)(p)),[p]),M=l===c().R.DraftPostInInlineComposer||l===c().R.WorkflowInstructionsInInlineComposer,A=r().A.isMobile||M?0:5,T=(0,a().K8)((()=>o(610640).A.state.isHovered),[]),B=b||(e=>(0,v.jsx)(se().vV,{style:{...M?{minHeight:void 0,pointerEvents:"auto"}:{minHeight:170},paddingTop:A},children:e})),j=(0,i.useMemo)((()=>I?async()=>{const e=await o(650829).assistantDependency.load();await e.assistantEditActions.saveAssistantCreatedPage(_)}:w?u:void 0),[u,w,I,_]);return(0,v.jsxs)(n().A,{name:"PageEditorModule",children:[B((0,v.jsx)(ae,{store:k,disabled:d,context:l,templatePickerMenuListStore:h,onClick:j,ref:t,forceIsInsideMarginCollapseContainer:x})),C&&y?(0,v.jsx)(se().kZ,{children:(0,v.jsx)(f,{pageBlockStore:p,isVisible:!T,context:l,pageViewBlockAccessor:y,isCollapsedAnchor:!0})}):null]})}))},257502:(e,t,o)=>{o.d(t,{d:()=>le});o(18107),o(967357),o(898992),o(672577),o(430670),o(581454);var i=()=>o(906745),n=o(296540),r=()=>o(59226),s=()=>o(993905),a=()=>o(23749),l=()=>o(726637),c=()=>o(402014),d=()=>o(484714),u=()=>o(943101),p=()=>o(590526),g=()=>o(401497),m=()=>o(79926),S=()=>o(609679),v=()=>o(795732),f=()=>o(882722),h=()=>o(677610),y=()=>o(718827),b=()=>o(249046),x=()=>o(807449),_=()=>o(695115),k=()=>o(799954),C=()=>o(869190),w=()=>o(546703),I=()=>o(824862),P=()=>o(798880),M=()=>o(69708),A=()=>o(100622),T=()=>o(496603),B=()=>o(534177),j=()=>o(774733),V=()=>o(517288),K=()=>o(663290),E=()=>o(848565),R=()=>o(256863),D=()=>o(453697),L=()=>o(17680),F=()=>o(862292),z=()=>o(732430),O=()=>o(729380),W=()=>o(551619),H=()=>o(720501),N=()=>o(161479),U=()=>o(404783),q=o(474848);function Q(e){const{store:t,discussionStore:o,isFirst:i,isOnly:r,discussionLocation:s,collapsed:a}=e,l=(0,d().v3)(),c=(0,n.useMemo)((()=>new(U().A)(l,(0,N().e)(t.pointer.spaceId))),[l,t.pointer.spaceId]),{value:u}=(0,m().fJ)(j().commentsDependency);return u?(0,q.jsx)(j().PW,{store:o,format:u.discussionHelpers.DiscussionFormat.Page,isFirst:i,isOnly:r,collapsed:a,showResolveButtonByDefaultIfPossible:!1,blockStore:t,discussionInputStore:c,..."feed_item_top_level_discussion"===s?{discussionLocation:"feed_item_top_level_discussion",pageVisitStore:e.pageVisitStore,presenceStore:e.presenceStore}:{discussionLocation:"page_discussion"}},o.id):null}var Y=()=>o(908006),G=()=>o(790748),X=()=>o(511562),$=()=>o(461106),J=()=>o(755125),Z=()=>o(197959),ee=()=>o(583824),te=()=>o(143857),oe=()=>o(77126),ie=()=>o(260850),ne=()=>o(244828);function re(e){const{store:t,from:o}=e,i=(0,d().v3)(),r=(0,n.useMemo)((()=>new(U().A)(i,(0,N().e)(t.pointer.spaceId))),[i,t.pointer.spaceId]),s=(0,n.useRef)(null),a=(0,n.useCallback)((()=>{(0,J().clear)({environment:i})}),[i]),c=function(e){const{environment:t,discussionInputStore:o,store:i,from:r}=e,s=(0,p().uB)(void 0,X().A),a=(0,n.useCallback)((e=>{var o;const n=i.id;null===(o=t.PageDetailsStore)||void 0===o||o.setToggleState({environment:t,type:"discussion",id:n},e)}),[t,i.id]);return(0,n.useCallback)((async()=>{const e=o.state.textStore.getValue(),n=o.state.files;if((!e||0===e.length)&&0===n.length)return;const c=await F().T.formulas.load(),d=(0,N().e)(i.pointer.spaceId),u=t.idCreator.getSpaceIdCreatorSync(d).deterministicIdInSavedSpace(Z().$Y,`${i.id}-discussion-0`),p=u?$().c.createChildStore(i,{table:Z().$Y,id:u,spaceId:d}):void 0;await(null==p?void 0:p.load());const g=Boolean(!(null!=p&&p.getResolved())),{performResult:m}=ne().createAndCommit({userAction:"PageDiscussion.useSubmitNewDiscussion",environment:t,canUndo:!0,perform:o=>(0,ee().i)({discussionId:g?u:void 0,environment:t,type:"default",blockStore:i,commentTextValue:e||[],transaction:o,files:n,formulasModule:c,fromOverride:r}),skipUpdatingEditedMetadata:!0});if(o.reset(),s.setState({...s.state,forceDiscussionOpen:!1}),a(!0),m&&!l().A.isMobile){await Y().default.afterNextFlush();const e=te().A.find((e=>e.getStore().id===m.id));e&&(0,ie().z)({store:e.getInputStore().state.textStore})}}),[o,t,s,a,i,r])}({environment:i,discussionInputStore:r,store:t,from:o});(0,G().b)(oe().j,(()=>({getNode:()=>s.current,getBlockStore:()=>t,getInputStore:()=>r})),[r]);const{value:u}=(0,m().fJ)(j().commentsDependency);return u?(0,q.jsx)("div",{ref:s,children:(0,q.jsx)(j().bd,{showAvatar:!0,parentStore:t,onSubmit:c,onCancel:a,discussionInputStore:r,discussionFormat:u.discussionHelpers.DiscussionFormat.Page,isMobileSlideUpMenu:!1,shouldSaveUnsentComments:!0,canDrop:!0,blockStore:t})}):null}const se=5;function ae(e){const{store:t,showDiscussionInput:o,unresolvedDiscussionStores:s,discussionLocation:a,collapsed:c}=e,u=(0,d().v3)(),h=(0,M().tz)(),{value:b}=(0,m().fJ)(F().T.formulas),{value:k}=(0,m().fJ)(j().commentsDependency),I=(0,r().X)("block_reactions"),P=(0,p().K8)((()=>s.find((e=>e.getReactions().length>0))),[s]),B=(0,p().K8)((()=>s.find((e=>e.getCommentPointers().length>0))),[s]),R=(0,p().K8)((()=>Boolean(P)),[P]),D=(0,p().K8)((()=>(null==B?void 0:B.getCommentPointers().length)??0),[B]),O=(0,p().K8)((()=>{const e=[...(null==B?void 0:B.getCommentStores())??[]].reverse().flatMap((e=>{const t=e.getCreatedByStore();return t?[t]:[]}));return T().hS(e,"id").slice(0,se)}),[B]),H=(0,p().K8)((()=>{const e=null==B?void 0:B.getCommentStores().at(-1),t=null==e?void 0:e.getCreatedTime();return t?(0,C().eV)({value:i().DateTime.fromMillis(t),preset:"time",locale:S().locale}):void 0}),[B]),N=(0,n.useCallback)((e=>{const o=B;if(!o)return;const i=e.target;(0,K().I)({environment:u,discussionStore:o,rect:i.getBoundingClientRect(),blockStore:t,discussionLocation:"feed_item_top_level_discussion"})}),[u,t,B]),U=(0,g().IS)((()=>{const e={paddingTop:s.length>0?12:-1*E().Ql/2,paddingBottom:12,paddingInlineEnd:4};return{pageViewDiscussion:{width:"100%",margin:"0 auto"},newPageDiscussionWrapper:{..."feed_item_top_level_discussion"===a?{padding:0}:e},emptyPostDiscussion:{display:"flex",justifyContent:"space-between",paddingBottom:12},reactionButton:{...null==k?void 0:k.REACTION_PILL_STYLE,width:40,paddingInlineStart:10,paddingInlineEnd:10,borderRadius:13,borderWidth:1,borderColor:A().Tj.border.secondary,borderStyle:"solid",...l().A.isMobile?null==k?void 0:k.MOBILE_REACTION_PILL_STYLE_OVERRIDES:{},border:"none",background:A().Tj.background.secondary}}}),[s.length,k,a]),Y=(0,g().IS)((()=>({container:{display:"flex",flexDirection:"column",gap:12},presenceReactionsContainer:{display:"flex",flexDirection:"row",justifyContent:I?"space-between":"flex-end",...l().A.isMobile?{justifyContent:"flex-start",gap:4}:{}},reactionsContainer:{display:"flex",gap:6,minHeight:27},repliesButton:{display:"flex",alignItems:"center",gap:8,cursor:"pointer",padding:4,borderRadius:6},repliesButtonContent:{display:"flex",alignItems:"center",gap:8},repliesInfo:{display:"flex",alignItems:"baseline",gap:8},replyCount:{fontSize:14,color:A().Tj.text.primary},lastReplyTime:{fontSize:12,color:A().Tj.text.tertiary}})),[I]);if("feed_item_top_level_discussion"===a&&(null==e?void 0:e.pageViewBlockContext)===v().R.PageInFeed){const o=e.pageVisitStore&&e.presenceStore,i=o&&l().A.isMobile;return(0,q.jsxs)("div",{style:Y.container,children:[(0,q.jsxs)("div",{style:Y.presenceReactionsContainer,children:[I?(0,q.jsxs)("div",{style:Y.reactionsContainer,children:[P?(0,q.jsx)(j().PH,{focused:!0,disableShadow:!0,parentStore:P,discussionLocation:e.discussionLocation,showAddReactionButton:!0,additionalItems:i?(0,q.jsx)(z().pc,{pageVisitStore:e.pageVisitStore,presenceStore:e.presenceStore,rootStore:t,enableFacepile:!1,isShowingInFeed:!0}):void 0}):void 0,R?void 0:(0,q.jsx)(_().A,{ariaLabel:h.formatMessage({defaultMessage:"Add reaction",id:"ReactionBar.newReaction.ariaLabel"}),hasBackground:!1,showShadow:!1,style:U.reactionButton,icon:()=>(0,q.jsx)(x().I,{icon:w().r,colorVariant:"secondary"}),onClick:e=>{(0,V().O)({environment:u,blockStore:t,rect:e.currentTarget.getBoundingClientRect(),skipOpeningDiscussionOnSubmit:!0,formulasModule:b})}})]}):void 0,R&&i||!o?void 0:(0,q.jsx)(z().pc,{pageVisitStore:e.pageVisitStore,presenceStore:e.presenceStore,rootStore:t,maxUsers:5,enableFacepile:!l().A.isMobile,isShowingInFeed:!0})]}),D>0?(0,q.jsx)(y().Ay,{style:Y.repliesButton,onClick:N,children:(0,q.jsxs)("div",{style:Y.repliesButtonContent,children:[(0,q.jsx)(de,{commenters:O}),(0,q.jsxs)("div",{style:Y.repliesInfo,children:[(0,q.jsx)("div",{style:Y.replyCount,children:(0,q.jsx)(M().sA,{defaultMessage:"{replyCount, plural, one {{replyCount} reply} other {{replyCount} replies}}",id:"pageLayout.discussionsModule.replyCount",values:{replyCount:D}})}),H?(0,q.jsx)("div",{style:Y.lastReplyTime,children:H}):void 0]})]})}):(0,q.jsx)("div",{style:U.newPageDiscussionWrapper,children:(0,q.jsx)(re,{from:a,store:t})})]})}return(0,q.jsxs)("div",{style:U.pageViewDiscussion,onMouseDown:W().NV,onClick:W().sx,className:f().Jv,children:["feed_item_top_level_discussion"!==a||R?void 0:(0,q.jsxs)("div",{style:U.emptyPostDiscussion,children:[(0,q.jsx)(_().A,{ariaLabel:h.formatMessage({defaultMessage:"Add reaction",id:"ReactionBar.newReaction.ariaLabel"}),hasBackground:!1,showShadow:!1,style:U.reactionButton,icon:()=>(0,q.jsx)(x().I,{icon:w().r,colorVariant:"secondary"}),onClick:e=>{(0,V().O)({environment:u,blockStore:t,rect:e.currentTarget.getBoundingClientRect(),skipOpeningDiscussionOnSubmit:!0,formulasModule:b})}}),e.pageVisitStore&&e.presenceStore?(0,q.jsx)(L().hJ,{pageVisitStore:e.pageVisitStore,presenceStore:e.presenceStore,rootStore:t,maxUsers:5,isShowingInFeed:!0}):void 0]}),s.map(((o,i,n)=>(0,q.jsx)(Q,{store:t,discussionStore:o,isFirst:0===i,isOnly:1===n.length,collapsed:c,..."feed_item_top_level_discussion"===a?{discussionLocation:"feed_item_top_level_discussion",pageVisitStore:e.pageVisitStore,presenceStore:e.presenceStore}:{discussionLocation:a}},o.id))),o?(0,q.jsx)("div",{style:U.newPageDiscussionWrapper,children:(0,q.jsx)(re,{from:a,store:t})}):void 0]})}function le(e){const{store:t,wrapper:o,discussionLocation:i,collapsed:r,showDefaultTitle:l,pageDiscussionsRenderState:d}=e,p=(0,n.useRef)(null),g=(0,n.useCallback)((e=>{O().u.setDiscussionsHeight(e.height)}),[]);(0,u().tK)(p,g);const m=(0,h().y)();return(0,q.jsx)(a().A,{name:"PageDiscussionsWrapper",children:"hidden"!==d.type?o((0,q.jsx)(b().wt,{style:{paddingInlineStart:m?k().dE.paddingInlineStart:void 0},gap:2,ref:p,children:(0,q.jsxs)(s().s,{allowSelectionWithin:!0,children:[l?(0,q.jsx)("div",{onClick:e=>(0,c().SQ)(e,c().y$.Click,(()=>{})),children:(0,q.jsx)(H().j,{store:t,children:(0,q.jsx)(M().sA,{id:"pageLayout.discussionsModule.title",defaultMessage:"Comments"})})}):void 0,(0,q.jsx)(ae,{...d,withLegacyInputPadding:!0,store:t,collapsed:r,..."feed_item_top_level_discussion"===i?{discussionLocation:"feed_item_top_level_discussion",pageVisitStore:e.pageVisitStore,presenceStore:e.presenceStore,pageViewBlockContext:e.pageViewBlockContext}:{discussionLocation:"page_discussion"}})]})})):void 0})}function ce(e){const{actorStore:t,size:o}=e;return t.table===I().GP?(0,q.jsx)(R().A,{botStore:t,size:o}):t.table===P().oo?(0,q.jsx)(D().A,{userStore:t,size:o}):void(0,B().HB)(t)}function de(e){const{commenters:t}=e,o=(0,g().IS)((()=>({container:{display:"flex",alignItems:"center",width:16*t.length+8,paddingInlineEnd:8}})),[t.length,8]);return(0,q.jsx)("div",{style:o.container,children:t.map(((e,o)=>(0,q.jsx)("div",{style:{position:"relative",insetInlineStart:-8*o,zIndex:t.length-o},children:(0,q.jsx)(ce,{actorStore:e,size:24})},e.id)))})}},352759:(e,t,o)=>{o.d(t,{p:()=>h,t:()=>y});o(581454),o(296540);var i=()=>o(381175),n=()=>o(484714),r=()=>o(590526),s=()=>o(663639),a=()=>o(736847),l=()=>o(584262),c=()=>o(69708),d=()=>o(72900),u=()=>o(305390),p=()=>o(900967),g=()=>o(211716),m=()=>o(535960),S=()=>o(592968),v=()=>o(551619),f=o(474848);function h({store:e}){return(0,f.jsx)("div",{style:{width:"100%",maxWidth:"100%",marginTop:0,marginInlineEnd:"auto",marginBottom:6,marginInlineStart:"auto"},onMouseDown:v().NV,onClick:v().sx,children:(0,f.jsx)(d().A,{type:"page",store:e,headerText:(0,f.jsx)(c().sA,{defaultMessage:"Linked to this page",id:"page.expandedBacklinks.label"}),disableCurrentPageToken:!0,disableInaccessiblePages:!0})})}function y({store:e}){const t=(0,n().v3)(),o=(0,r().K8)((()=>(0,p().cg)(e,t)),[e,t]),c=(0,r().K8)((()=>o.backlinks.map((e=>e.backlinkStore))),[o]).map(((e,o)=>({key:e.id,render:t=>(0,f.jsx)(u().A,{...t,store:e,hidePath:!1}),action:({event:o})=>{S().F.setState({isOpen:!1});const n=(0,i().V)(o);(0,m().u)({environment:t,store:e,openInNew:n,visitType:g().ig.Link,pageVisitSource:l().y8.Backlinks})}})));return(0,f.jsx)(s().A,{type:s().O.Vertical,initialFocus:void 0,sections:[{key:"all",items:c,render:e=>(0,f.jsx)(a().A,{...e})}]})}},365136:(e,t,o)=>{o.d(t,{Y:()=>l});o(296540);var i=()=>o(807449),n=()=>o(26697),r=()=>o(338862),s=()=>o(69708),a=o(474848);function l(){return(0,a.jsx)(n().m,{placement:"top",renderTooltip:()=>(0,a.jsx)(s().sA,{defaultMessage:"Only visible to you",id:"privatePageBadge.tooltip"}),render:e=>(0,a.jsx)("div",{...e,children:(0,a.jsx)(i().I,{icon:r().lockFillSmallIcon,size:"sm",colorPalette:"gray",colorVariant:"secondary",fitToViewBox:"vertical"})})})}},377157:(e,t,o)=>{o.d(t,{A:()=>p});o(898992),o(354520),o(672577),o(581454);var i=o(296540),n=()=>o(590526),r=()=>o(496603),s=()=>o(896628),a=()=>o(9768),l=()=>o(271205),c=()=>o(244828),d=o(474848);function u(e){const{store:t,collectionStore:i,disabled:a,locked:u,propertyIds:p,blockPropertyValueOverlayStore:m,format:S,type:v}=e,f=(0,o(484714).v3)(),h=(0,o(908201).Ks)(),y=(0,n().K8)((()=>{var e;return null==h||null===(e=h.permissionScopesStore.state)||void 0===e?void 0:e.canConfigureCollection}),[h]);return h?"minimal"===v?(0,d.jsx)(d.Fragment,{children:p.map(((e,o)=>(0,d.jsx)(g,{format:S,locked:u,collectionStore:i,store:t,disabled:a,blockPropertyValueOverlayStore:m,propertyId:e,visibility:v,isLast:o===p.length-1},e)))}):a||u||!y?(0,d.jsx)("div",{style:l().Bb,children:p.map(((e,o)=>(0,d.jsx)(g,{format:S,locked:u,collectionStore:i,store:t,disabled:a,blockPropertyValueOverlayStore:m,propertyId:e,visibility:v,isLast:o===p.length-1},e)))}):(0,d.jsx)(l().Ay,{direction:"vertical",keys:p,renderKey:(e,o)=>(0,d.jsx)(g,{format:S,locked:u,collectionStore:i,store:t,disabled:a,blockPropertyValueOverlayStore:m,propertyId:e,visibility:v,isLast:o===p.length-1},e),onDrop:e=>function(e,t,o,i){const n=o.collection_page_sections||[],a=r().oE(e.map((e=>n.find((t=>t.section===e))))),l=n.filter((t=>!e.includes(t.section))),d=[...a,...l];c().createAndCommit({userAction:"RelationPropertyPageSections.handleReorder",environment:i,canUndo:!0,perform:e=>{s().zA({stores:[t],update:{collection_page_sections:d},transaction:e})}})}(e,i,S,f)}):null}const p=i.memo(u,o(821062).A),g=i.memo((function({propertyId:e,format:t,locked:i,collectionStore:r,store:s,disabled:l,blockPropertyValueOverlayStore:c,visibility:u,isLast:p}){let g;if(u)g=u;else{const o=t.collection_page_sections??[];g=o.filter((t=>t.section===e)).map((e=>e.visibility))[0]}const[m,S]=(0,o(997583).z)(),v=(0,o(255824).a)(),f="inline"===g,h=!p&&"minimal"!==g,y=(0,n().K8)((()=>s.canEdit()),[s]),b=(0,o(401497).IS)((()=>{const e={position:"absolute",visibility:S?"visible":"hidden",insetInlineStart:S?S+4:void 0,top:0};return{discussionIndicator:o(726637).A.isMobile?{flexShrink:0}:f?e:{},wrapperDiv:{position:"relative",width:"minimal"!==g?"100%":void 0,...h?{marginBottom:a().YE+a().Lb+(y?-4:0)}:{}},selectable:f?{}:{display:"flex",alignItems:"center"}}}),[S,h,f,g,y]),x=(0,d.jsx)(o(774733).L_,{store:s,propertyId:e,style:b.discussionIndicator});return(0,d.jsx)("div",{className:"minimal"!==g?"layout-content":void 0,style:b.wrapperDiv,ref:m,children:(0,d.jsxs)(o(692763).Ay,{store:s,analyticsName:"page_property",style:b.selectable,children:[(0,d.jsx)(o(599806).qm,{store:s,property:e,disabled:l,locked:i,surface:"property_module",tableWrap:!1,blockPropertyValueOverlayStore:c,collectionStore:r,propertyVisibility:g},e),v?null:x]})})}))},400851:(e,t,o)=>{o.d(t,{X:()=>m,Y:()=>g});var i=()=>o(59226),n=()=>o(726637),r=()=>o(590526),s=()=>o(795732),a=()=>o(179034),l=()=>o(534177),c=()=>o(799832),d=()=>o(761309),u=()=>o(619206),p=()=>o(77246);function g({environment:e,blockStore:t,from:o,blockContext:i,allowTabletsToUseLayoutBuilder:r}){const{currentUser:g}=e;if(r&&e.device.isPhone||!r&&n().A.isMobile)return!1;if(!g.isLoggedIn()||(0,d().qb)(e,t,t.getSpaceStore())&&!u().A.state.editing)return!1;if(i===s().R.InPageSnapShot)return!1;if("suggest"===p().Uv.getMode(t))return!1;if(t.pathIsDead())return!1;if(t.isCollectionView()&&"topControls"!==o){const e=(0,c().U)(t);return!!e&&Boolean(e.permissionScopesStore.state.canConfigureCollection&&(function(e){switch(e){case"topControls":case"pageActionsMenu":return!1;case"viewsModule":case"pagePropertiesRowNameMenu":case"collectionSettingsMenu":return!0;default:(0,l().HB)(e)}}(o)||t.getCollectionStoreIfSingleSource())&&!t.isCollectionViewPageWithContent()&&!t.isLocked()&&!t.isTeamPost()&&!t.isTeamPostCollectionBlock()&&!e.permissionScopesStore.state.isExternallyImportedAndSyncedCollection)}if(t.isPageBlock()||t.isExternalObjectInstancePageBlockStore()){const e=t.getAssociatedCollectionStore(),o=null==e?void 0:e.getParentStore();return Boolean(!t.isLocked()&&e&&e.canEditCollection()&&!e.isPageTreeCollection()&&(null==o?void 0:o.table)===a().ev&&!o.isLocked()&&!e.isExternallyImportedAndSyncedCollection())}return!1}function m({environment:e,blockStore:t,from:o,blockContext:n}){const s=(0,i().X)("layouts_tablet_builder");return(0,r().K8)((()=>!!t&&g({environment:e,blockStore:t,from:o,blockContext:n,allowTabletsToUseLayoutBuilder:s})),[n,t,e,o,s])}},441301:(e,t,o)=>{o.d(t,{s:()=>y});var i=o(296540),n=()=>o(907258),r=()=>o(993905),s=()=>o(23749),a=()=>o(726637),l=()=>o(484714),c=()=>o(590526),d=()=>o(609679),u=()=>o(795732),p=()=>o(799954),g=()=>o(69708),m=()=>o(100622),S=()=>o(284371),v=()=>o(551619),f=o(474848);const h=Object.freeze({property:!0}),y=i.memo((function({store:e,context:t,disabled:n,isInSidePeek:y,extraStyles:_,titlePlaceholder:k,collectionContextStore:C,shouldShowTemplatePicker:w,onTitleChange:I,onTitleEditText:P,onTitleEsc:M,onTitleUntab:A,onTitleTab:T,onMoveUp:B,onMoveDown:j,hideText:V,disableEnter:K}){const E=(0,g().tz)(),R=(0,l().v3)(),D=(0,o(792485).S)(),L=(0,o(404694).V)(),F=(0,o(201941).u)(),z=(0,c().K8)((()=>e.getTitleStore()),[e]),O=(0,c().K8)((()=>{if(e.isCollectionView()){const t=e.getCollectionStoreIfSingleSource();return!!t&&t.isSyncedCollection()}return e.isType(o(700500).xd.externalObjectInstancePage)}),[e]),W=(0,v().Sm)(e),H=(0,c().K8)((()=>{if(n)return!1;if(o(440375).l.state)return!1;const t=null==D?void 0:D.publicEditModeStore.state;return!(0,o(761309).QT)(t)&&e.canEditCollection()}),[n,null==D?void 0:D.publicEditModeStore,e]),N=(0,c().K8)((()=>{if(!e.isCollectionView())return!1;const t=e.getCollectionStoreIfSingleSource();return!!t&&(0,o(107041).Qu)(t.getValue())}),[e]),U=(0,c().K8)((()=>{const t=e.getModel();return k??(null==t?void 0:t.getEmptyTitlePlaceholder({getRecordModel:e.getRecordModel,userTimeZone:(0,o(416504).P)(),intl:E}))}),[e,k,E]),q=!a().A.isMobile&&y,Q=(0,c().K8)((()=>H&&!(0,o(457419).S)(e)&&!O&&!W&&!(0,o(696746).Nh)(e.id)&&!("suggest"===o(77246).Uv.getMode(e))),[H,O,W,e]),Y=(0,c().K8)((()=>e.isEmptyPage()),[e]),G=(0,c().K8)((()=>e.isTemplate()),[e]),X=(0,c().K8)((()=>e.getAssociatedCollectionTemplateStores()),[e]),$=(0,c().K8)((()=>e.getSyncedUri()),[e]),J=function(e){const{store:t,isInSidePeek:i,context:n,shouldRenderIconInlineWithTitle:r,extraStyles:s,disabled:g}=e,v=(0,l().v3)(),f=(0,c().K8)((()=>t.getFormat()),[t]),h=(0,c().K8)((()=>t.isCollectionView()),[t]),y=(0,c().K8)((()=>t.isExternalObjectInstancePageBlockStore()),[t]),b=x(t),_=(0,l().Y0)(),k=(0,o(821507).D1)(_),C=(0,o(677610).y)();return(0,o(401497).IS)((()=>{const e=Boolean(f.page_small_text)||h||i;let t;t=a().A.isMobile?k?34:28:e?32:n===u().R.DraftPostInInlineComposer||n===u().R.WorkflowInstructionsInInlineComposer?26:40;const o=n===u().R.DraftPostInInlineComposer||n===u().R.WorkflowInstructionsInInlineComposer?S().Wy.semibold:S().Wy.bold,l="0px",c=C&&!h?p().dE:p().CC;return{container:{display:(null==s?void 0:s.display)??void 0,flex:r?1:void 0},title:{...c,paddingBottom:l,width:y||b?"fit-content":"100%",fontSize:"1em",fontWeight:"inherit",margin:0,cursor:g?"default":"text",...(n===u().R.DraftPostInInlineComposer||n===u().R.WorkflowInstructionsInInlineComposer)&&{fontSize:24},...b&&{whiteSpace:"nowrap"},...b&&!C&&{marginInlineEnd:6}},selectable:{color:m().Tj.text.primary,fontWeight:o,lineHeight:1.2,fontSize:t,fontFamily:S().xf({pageFont:f.page_font,locale:d().locale}),cursor:g?"default":"text",display:"flex",alignItems:"center",textRendering:v.device.isSafari?"optimizeSpeed":void 0,...b&&{flexWrap:"wrap"},...s},placeholder:{...c,paddingBottom:l,WebkitTextFillColor:m().Tj.pageTitlePlaceholderTextColor,cursor:g?"default":"text",...(n===u().R.DraftPostInInlineComposer||n===u().R.WorkflowInstructionsInInlineComposer)&&{color:m().Tj.text.tertiary,WebkitTextFillColor:m().Tj.text.tertiary}},personPronounSuffix:{color:m().Tj.text.secondary,paddingBottom:l,paddingTop:c.paddingTop}}}),[k,v.device.isSafari,s,f.page_font,f.page_small_text,h,y,b,i,n,C,r,g])}({store:e,isInSidePeek:y,context:t,shouldRenderIconInlineWithTitle:q,extraStyles:_,disabled:n||!Q}),Z=(0,c().K8)((()=>e.isExternalObjectInstancePageBlockStore()),[e]),ee=(0,c().K8)((()=>e.isExternalCollectionBlockStore()?e:void 0),[e]),te=(0,c().K8)((()=>(null==ee?void 0:ee.canEdit())??!1),[ee]),oe=(0,c().K8)((()=>$?(0,o(493208).e)($,e.pointer.spaceId):void 0),[e.pointer.spaceId,$]),ie=(0,c().K8)((()=>o(383070).zD.shouldEnablePageTitleDiffs()),[]),ne=X&&0===X.length,re=(0,v().O9)(e,t),se=!!K||!re&&!(!w||G||ne||a().A.isMobile)&&Y,ae=(0,i.useRef)(null),le=(0,i.useCallback)((()=>{e&&o(244828).createAndCommit({userAction:"TourTutorial.createEmptyTextBlock",environment:R,canUndo:!0,perform:t=>{o(274873)._N({environment:R,store:e,transaction:t})}})}),[e,R]),ce=x(e)?(0,f.jsx)("span",{style:J.personPronounSuffix,children:(0,f.jsx)(g().sA,{id:"pageTitle.personalPronoun",defaultMessage:"(You)"})}):null;if(N)return(0,f.jsx)(s().A,{name:"PageTitle",children:null});if(!z)return(0,f.jsx)(s().A,{name:"PageTitle",children:null});const de=o(295633).B.createChildStore(z,e.pointer),ue=R.device.isIOS||R.device.isSafari,pe=(0,f.jsx)(o(964899).n,{step:"create_page_start_with_title",showSidebarOverlays:!1,onNextButtonClick:le,inAppCalloutStore:L,teamIds:F,children:V?(0,f.jsx)(f.Fragment,{}):(0,f.jsxs)(f.Fragment,{children:[(0,f.jsx)(o(405623).A,{tagName:"h1",style:J.title,store:z,placeholderStyle:J.placeholder,disabled:!Q,placeholder:U,disableSlashCommands:!0,disableSelectAllBlocks:!0,disableStyleAnnotations:!0,disableInsertedDeletedAnnotations:!ie,disableMobileActionBar:!1,disableShiftEnter:!0,disableEmbedMenu:!0,onEsc:M,onUntab:A,onTab:T,onMoveDown:j,onMoveUp:B,disableUpDownArrows:!(!w||G||ne||a().A.isMobile)&&Y,disableEnter:se,onChange:I,disableHorizontalEdgeScroll:!0,pasteBehavior:"block",trackEditsToUserFlow:"user_flow_edit_page_title",inPageFind:o(366437).Os.block_match,disabledMentionTypes:h},z.id),ce]})}),ge=E.formatMessage({id:"PageTitle.syncedBlock.original",defaultMessage:"Link to original url"});return(0,f.jsx)(s().A,{name:"PageTitle",children:(0,f.jsxs)("div",{style:J.container,ref:ae,children:[(0,f.jsxs)(o(692763).Ay,{canSelect:!1,canDrag:!1,canEditText:Q,onEditText:P,store:de,style:J.selectable,analyticsName:"page_content",shouldShowDropZone:!0,children:[ue?(0,f.jsx)(r().s,{allowSelectionWithin:!0,style:{width:"100%",maxWidth:"100%"},children:pe}):pe,(0,f.jsxs)(r().s,{allowSelectionWithin:!0,children:[(0,f.jsx)(o(100102).vE,{origin:ae??void 0}),Z?(0,f.jsx)(o(26697).m,{placement:"bottom",renderTooltip:()=>ge,render:e=>(0,f.jsx)(o(996332).Q,{href:oe,ignoreLocalHoverState:!0,hovered:!1,children:(0,f.jsx)(o(695115).A,{ariaLabel:ge,...e,icon:()=>(0,f.jsx)(o(807449).I,{icon:o(742852).linkIcon,colorVariant:"secondary"}),style:{marginInlineStart:4},onClick:()=>{oe&&(0,o(752860).L)({url:oe,environment:R})}})})}):void 0,ee&&!a().A.isMobile?(0,f.jsx)(o(619126).A,{store:ee,canEdit:te,buttonStyle:{fontWeight:"normal",margin:0}}):void 0]})]}),(0,f.jsx)(r().s,{allowSelectionWithin:!0,style:{marginInlineStart:4},children:(0,f.jsx)(b,{store:e,collectionContextStore:C})})]})})}));function b(e){const{store:t,collectionContextStore:i}=e,n=(0,c().K8)((()=>t.isCollectionView()),[t]),r=(0,c().K8)((()=>t.getCollectionStoreIfSingleSource()),[t]);return n&&i&&r?(0,f.jsx)(o(689383).A,{collectionStore:r,collectionContextStore:i}):null}function x(e){return(0,c().K8)((()=>{var t;const o=e.getPersonProfileUserId(),i=null===(t=n().default.state.currentUserStore)||void 0===t?void 0:t.id;return!(!o||!i)&&o===i}),[e])}},474204:(e,t,o)=>{o.d(t,{M:()=>n});var i=()=>o(590526);function n(e){return(0,i().K8)((()=>{const t=null==e?void 0:e.collectionViewStore();return t&&"page"!==t.getType()}),[e])}},483832:(e,t,o)=>{o.d(t,{v:()=>I});var i=o(296540),n=()=>o(993905),r=()=>o(726637),s=()=>o(590526),a=()=>o(795732),l=()=>o(249046),c=()=>o(778781),d=()=>o(599806),u=()=>o(543886),p=()=>o(405170),g=()=>o(33791),m=()=>o(774733),S=()=>o(891078),v=()=>o(402838),f=()=>o(457419),h=()=>o(692763),y=()=>o(171018),b=()=>o(795963),x=()=>o(255824),_=()=>o(671891),k=()=>o(517223),C=()=>o(390606),w=o(474848);function I(e){const{store:t,context:o,propertyId:I,disabled:P,wrapper:M,pageModule:A,stackPropertyLabelAndValue:T}=e,B=(0,S().bx)(t,P),j=(0,s().K8)((()=>t.getAssociatedCollectionStore()),[t]),V=(0,s().K8)((()=>{if(t.isCollectionViewPageWithContent())return{type:"hidden"};const e=t.getAssociatedCollectionStore();return e?{type:"visible",collectionStore:e}:{type:"hidden"}}),[t]),K=(0,s().K8)((()=>null==j?void 0:j.getSchema()),[j]),E=(0,s().K8)((()=>null==j?void 0:j.getFormat()),[j]),R=(0,s().K8)((()=>{var e;return null===(e=V.collectionStore)||void 0===e?void 0:e.getSchema()[I]}),[V.collectionStore,I]),D=(0,s().K8)((()=>(0,f().S)(t)),[t]),L=(0,i.useMemo)((()=>new(y().YB)),[]),F=i.useRef(null),z=(0,s().K8)((()=>{const e=null==j?void 0:j.getParentStore();return!(!j||!e||"block"!==e.table)&&(0,g().v)({collectionStore:j,collectionViewBlockStore:e,checkNavigableAncestorLocked:!1})}),[j]),O=o===a().R.PeekView,W=(0,c().gx)(A)?A:void 0,{isPropertyInPageDetails:H}=(0,k()._1)({store:t,propertyId:I}),N=(0,v().s)(F,50),U=(0,_().l)(t),q=(0,s().K8)((()=>{var e;return"hide"===(null==U||null===(e=U.getFormat())||void 0===e?void 0:e.property_icons_visibility)}),[U]),Q=(0,x().a)();if(!R)return null;if("hidden"===V.type)return null;if(!j||!K||!E)return null;const Y=!Q&&"relation"!==R.type,G=!Q,X=(0,b().Ge)({isMobile:r().A.isMobile,stackPropertyLabelAndValue:T,isPropertyInPageDetails:H}),$=(0,w.jsx)(m().L_,{store:t,propertyId:I,style:H||r().A.isMobile?{flexShrink:0}:{position:"absolute",insetInlineStart:null!=N&&N.width?N.width+4:void 0,top:0}}),J=(0,w.jsxs)(w.Fragment,{children:[Y?(0,w.jsxs)(l().Ye,{alignItems:"center",justifyContent:H?void 0:"space-between",style:X?{width:X,flexShrink:0}:void 0,children:[(0,w.jsx)(C().I,{schema:K,format:E,hideIcon:q,hideDragHandle:!0,property:I,blockStore:t,collectionStore:j,pagePropertiesStore:L,disabled:P,locked:D,canConfigureCollection:z,isInPeekRenderer:O,styleVariants:{width:(0,b().aG)({stackPropertyLabelAndValue:T}),height:T?{variant:"small"}:{variant:"medium"},size:"small",fontWeight:"medium"},layoutModule:W,hideDuplicatePropertyOption:!0}),G?$:null]}):void 0,(0,w.jsx)(h().Ay,{store:t,analyticsName:"page_property",children:(0,w.jsx)(d().qm,{store:t,property:I,disabled:!B,locked:D,surface:"property_module",tableWrap:!0,blockPropertyValueOverlayStore:O?p().A:u().A,collectionStore:V.collectionStore,isInPeekRenderer:O,propertyModule:W},I)})]});return M((0,w.jsx)(n().s,{allowSelectionWithin:!0,style:{position:"relative",width:"100%"},children:T?(0,w.jsx)(l().wt,{ref:F,children:J}):(0,w.jsx)(l().Ye,{ref:F,style:{alignItems:"flex-start"},children:J})}))}},511562:(e,t,o)=>{o.d(t,{A:()=>n});class i extends(()=>o(757695))().Store{getInitialState(){return{forceDiscussionOpen:!1,isPageDescriptionExpanded:!0}}}const n=i},534691:(e,t,o)=>{o.d(t,{M:()=>n});class i extends(()=>o(757695))().Store{getInitialState(){return{blockStoreMode:{},siteTemplateStatus:{}}}getStateForBlock(e){if(e in this.state.blockStoreMode)return this.state.blockStoreMode[e]}setStateForBlock(e,t){this.update((o=>({...o,blockStoreMode:{...o.blockStoreMode,[e]:t}})))}setSiteTemplateStatus(e,t){this.update((o=>({...o,siteTemplateStatus:{[e]:t}})))}isTemplateListing(e){var t;return(null===(t=this.state.siteTemplateStatus[e])||void 0===t?void 0:t.templateListingExists)??!1}clearStateForBlock(e){e in this.state.blockStoreMode&&(delete this.state.blockStoreMode[e],this.emit())}}const n=new i;(0,o(852832).exposeDebugValue)("MarketplaceTemplateStore",n)},557198:(e,t,o)=>{o.d(t,{Ap:()=>u,RR:()=>p,X1:()=>d});var i=o(296540),n=()=>o(484714),r=()=>o(590526),s=()=>o(534177),a=()=>o(334261),l=()=>o(900967),c=()=>o(449195);function d(e){const{format:t}=e;return{backlinksConfiguredToShowAboveTitle:(0,r().K8)((()=>{const e=(0,c().nl)(t.page_section_visibility);return"section_collapsed"===e||"always_show"===e}),[t.page_section_visibility])}}function u(e){const{store:t,format:o}=e,r=(0,n().v3)();return{backlinksVisibility:(0,c().nl)(o.page_section_visibility),updateBacklinksVisibility:(0,i.useCallback)((e=>{const i=(0,c().SB)(e);a().OD({environment:r,pageSection:"backlinks",visibility:i,store:t,format:o})}),[r,t,o])}}function p(e){const{pageStore:t}=e,o=(0,n().v3)(),{store:i,format:a}=(0,r().K8)((()=>{const e=t.getAssociatedCollectionStore()??t,o=e.getFormat();return{store:e,format:o}}),[t]),{backlinksVisibility:c}=u({store:i,format:a}),d=(0,r().K8)((()=>"section_hide"!==c&&(0,l().Pn)(t,o)),[t,o,c],{debugName:"useShowBacklinksTopControlButtonInPage.useComputedStore:mightHaveBacklinks"});return"section_hide"===c?"never":d?"always_show"===c?"always":"section_collapsed"===c?"onHover":void(0,s().HB)(c):"never"}},561503:(e,t,o)=>{o.r(t),o.d(t,{measurePageRenderMetrics:()=>z,measureRenderedBlocks:()=>H,setInitialRenderCompleted:()=>L,setSubMetric:()=>K,setSubMetricsAtRenderCallback:()=>V,updateMetricData:()=>E,updateMetricDataWithIsPushTag:()=>F,updateOPFSMetadata:()=>D,updateOPFSMetricData:()=>R});o(898992),o(354520),o(672577),o(581454),o(737550),o(814603),o(147566),o(198721);var i=()=>o(564884),n=()=>o(907258),r=()=>o(755531),s=()=>o(777022),a=()=>o(242422),l=()=>o(906510),c=()=>o(105751),d=()=>o(391400),u=()=>o(918516),p=()=>o(524171),g=()=>o(711339),m=()=>o(584262),S=()=>o(410690),v=()=>o(589895),f=()=>o(473336),h=()=>o(807054);var y=()=>o(706250),b=()=>o(466088),x=()=>o(402411),_=()=>o(430476),k=()=>o(644852),C=()=>o(543159);var w=()=>o(736316),I=()=>o(129522),P=()=>o(836724),M=()=>o(52957),A=()=>o(977390),T=()=>o(606932);class B extends(()=>o(757695))().Store{getInitialState(){return{isInitialPageRender:!0}}}const j=new B;function V(e){const{mainStartTime:t,prefetchInitiatedTime:o,statsigBootupBlockingStartTime:i,renderStartTime:n,renderEndTime:r}=e,s=S().getAppStartTime();if(!s)return;const a={app_start_to_main_start:{startTime:s,endTime:t},main_start_to_prefetch_initiated:{startTime:t,endTime:o},prefetch_initiated_to_statsig_bootup_blocking_start:{startTime:o,endTime:i},statsig_bootup_blocking:{startTime:i,endTime:n},render_start_to_render_end:{startTime:n,endTime:r}};for(const[l,c]of Object.entries(a)){const e=null==c?void 0:c.startTime,t=null==c?void 0:c.endTime;e&&t&&(0,w().f)({name:l,startTime:e,endTime:t})}d().A.state.subMetricsStore.update((e=>({...e,...a})))}function K(e){const{name:t,endTime:o}=e,i=e.startTime(d().A.state.subMetricsStore.state);i&&(d().A.state.subMetricsStore.update((e=>({...e,[t]:{startTime:i,endTime:o}}))),(0,w().f)({name:t,startTime:i,endTime:o}))}function E(e){d().A.state.metricDataStore.update((t=>({...t,...e})))}function R(e){d().A.state.OPFSMetricDataStore.update((t=>({...t,...e})))}function D(e){d().A.update((t=>({...t,opfsMetadata:{...t.opfsMetadata,...e}})))}function L(){d().A.update((e=>({...e,initialRenderCompleted:!0}))),p().N.markInitialPageRendered()}function F(e){const t=e.RouterStore.state;let o;var i;"page"===t.route.name&&(o=t.route.mobileData,E({is_push:null===(i=o)||void 0===i?void 0:i.isPush}))}function z({environment:e,isEditable:t,isHomePage:o,isWikiHome:n,isPageWithCustomLayout:r,idSchema:s}){const{initialRoute:{name:c},route:u}=e.RouterStore.state,{initialRenderCompleted:v,initialRenderAfterLoginCompleted:f}=d().A.state,x=h().isPrewarmedTabInitialRender(e),_=(0,b().w)(e);v?f||"login"!==c?async function(e,t){const o="page"===t.name?t.mobileData:void 0,{timings:i,isDeduplicatingLcpc:n}=T().A.popTimings();if(i){const{navigationStart:r,requestFirstChunkStart:s,requestFirstChunkEnd:a,requestFirstChunkSource:l,requestFirstChunkLocalSource:c,pageViewBlockRender:u}=i,S=performance.now();j.setState({isInitialPageRender:!1,pageId:"page"===t.name?t.blockId:void 0,pageRenderStartTime:r,pageRenderEndTime:S});const v="page"===t.name?e.prefetcher.cache.getPrefetchAnalytic(`loadCachedPageChunk(${t.blockId})`):void 0,{metrics:f,metadata:y}=T().A.popOPFSData(),b="local"===l&&"opfs"===c,{is_autosynced_origin:x,is_explicitly_offlined_origin:_}=await U(e),k="pageVisitSource"in t?t.pageVisitSource:void 0,C=k?(0,m().hJ)(parseInt(k)):void 0;g().default.measure({metricName:"navigation_page_render",startTime:r,endTime:S},{environment:e,data:{sub_metrics:{navigation_start_to_request_first_chunk_start:s?s-r:0,request_first_chunk_start_to_request_first_chunk_end:s&&a?a-s:0,request_first_chunk_end_to_pvb_render:a&&u?u-a:0,pvb_render_to_handle_navigation_render:u?S-u:0},chunk_source:l,local_source:c,is_push:(null==o?void 0:o.isPush)??!1,wasm_sqlite_initialized:d().A.state.metricDataStore.state.wasm_sqlite_initialized,wasm_sqlite_wasm_ready_time:d().A.state.metricDataStore.state.wasm_sqlite_wasm_ready_time,wasm_sqlite_fully_ready_time:d().A.state.metricDataStore.state.wasm_sqlite_fully_ready_time,opfs_metrics:b?f:void 0,opfs_metadata:y,...v?{page_chunk_prefetch:v,page_chunk_prefetch_type:v.type}:{},is_deduplicating_lcpc:"boolean"==typeof n?n:"unknown",is_autosynced_origin:x,is_explicitly_offlined_origin:_,is_swv2:await h().isSWV2(),is_browser_sw:await h().isBrowserSW(),page_visit_source:C}}),p().N.markNavigationRender(e)}A().A.state.isMeasuring&&A().A.update((e=>({...e,isMeasuring:!1})))}(e,u):function(e){g().default.DO_NOT_USE_measureLegacy("initial_page_render_after_login",{environment:e}),d().A.update((e=>({...e,initialRenderAfterLoginCompleted:!0})))}(e):x?async function({environment:e,initialRoute:t,isEditable:o,isHomePage:i,isWikiHome:n,isPageWithCustomLayout:r,isPublicDomain:s,idSchema:a}){L();const l=performance.now(),c=y().D.state.startTime;K({name:"await_page_chunk_end_to_browser_repaint_start",startTime:e=>{var t;return null===(t=e.await_page_chunk_start_to_await_page_chunk_end)||void 0===t?void 0:t.endTime},endTime:l});const{is_autosynced_origin:u,is_explicitly_offlined_origin:p}=await U(e),m=d().A.state.prewarmedTabAppStartTimeOverride;m&&g().default.measure({metricName:"initial_page_render",startTime:m,endTime:l},{environment:e,data:await O({initialRoute:t,isEditable:o,isHomePage:i,isWikiHome:n,isPageWithCustomLayout:r,isPublicDomain:s,idSchema:a,isPrewarmedTab:!0,prewarmedTabNavigationStart:m,is_autosynced_origin:u,is_explicitly_offlined_origin:p}),shouldSendIfStatsigNotInitialized:!0});A().A.state.isMeasuring&&A().A.update((e=>({...e,isMeasuring:!1})));!function(e,t,o){const i=(0,h().getDesktopLoadOrigin)();let n;switch(i){case"active_tab_change":n=d().A.state.prewarmedTabAppStartTimeOverride;break;case"new_inactive_tab":n=o}n&&g().default.measure({metricName:"tab_switch_render",startTime:n,endTime:t},{environment:e,data:{was_loaded:!1,desktop_load_origin:i,is_prewarmed_tab:!0}})}(e,l,c)}({environment:e,initialRoute:c,isEditable:t,isHomePage:o,isWikiHome:n,isPageWithCustomLayout:r,isPublicDomain:_,idSchema:s}):async function({environment:e,initialRoute:t,isEditable:o,isHomePage:n,isWikiHome:r,isPageWithCustomLayout:s,isPublicDomain:c,idSchema:u}){var p;const{initialLoadCachedPageChunkCalledAt:m}=d().A.state;L();const v=Boolean(null===(p=performance)||void 0===p?void 0:p.mark)?performance.mark("initial_page_render").startTime:performance.now();l().S3.mark("initial_page_render"),K({name:"await_page_chunk_end_to_browser_repaint_start",startTime:e=>{var t;return null===(t=e.await_page_chunk_start_to_await_page_chunk_end)||void 0===t?void 0:t.endTime},endTime:v});const f=S().getAppStartTime(),y=S().getPageOriginTime();f&&y&&y>0&&f>y&&K({name:"page_origin_to_app_start",startTime:()=>y,endTime:f});const b=e.RouterStore.state.route;j.setState({isInitialPageRender:!0,pageId:"page"===b.name?b.blockId:void 0,pageRenderStartTime:y,pageRenderEndTime:v});const{is_autosynced_origin:x,is_explicitly_offlined_origin:_}=await U(e);g().default.measureFromPageOrigin({metricName:"initial_page_render",endTime:v},{environment:e,data:await O({initialRoute:t,isEditable:o,isHomePage:n,isWikiHome:r,isPageWithCustomLayout:s,isPublicDomain:c,idSchema:u,onAppStartSetting:"root"===t?q(e):void 0,prefetchedQueryCollection:N(e),isPrewarmedTab:!1,is_autosynced_origin:x,is_explicitly_offlined_origin:_}),shouldSendIfStatsigNotInitialized:!0});d().A.state.subMetricsStore.state;void 0!==m&&g().default.DO_NOT_USE_measureFromPageOriginLegacy({metricName:"load_cached_page_chunk_wait_time",endTime:m},{environment:e,data:{initial_route:t},shouldSendIfStatsigNotInitialized:!0,sendToStatsig:!0});a().default.checkGate({gateName:"beacon_pre_ipr_assets"})&&function(e,t,o){var n;if(null===(n=performance)||void 0===n||!n.getEntriesByType)return;const r=performance.getEntriesByType("resource"),s={eventName:"pre_ipr_assets",eventProperties:{ipr_duration:o,ipr_end:t,assets:r.map((e=>{let t;try{t=new URL(e.name).pathname}catch{t=e.name}return{url:t,initiator_type:e.initiatorType,time:e.duration,perf_start:e.startTime,perf_end:e.startTime+e.duration,decoded_body_size:e.decodedBodySize,transfer_size:e.transferSize,service_worker_processing_time:0!==e.workerStart?e.fetchStart-e.workerStart:void 0}})).filter((e=>e.perf_end<=t))}};(0,i().u)({environment:e,event:s})}(e,v,y?v-y:void 0);!function(e,t){const o=(0,h().getDesktopLoadOrigin)();"active_tab_change"===o&&g().default.measureFromPageOrigin({metricName:"tab_switch_render",endTime:t},{environment:e,data:{was_loaded:!1,desktop_load_origin:o,is_prewarmed_tab:!1}})}(e,v)}({environment:e,initialRoute:c,isEditable:t,isHomePage:o,isWikiHome:n,isPageWithCustomLayout:r,isPublicDomain:_,idSchema:s})}async function O(e){const{initialRoute:t,isEditable:o,isHomePage:i,isWikiHome:n,isPageWithCustomLayout:r,isPublicDomain:s,isPrewarmedTab:a,idSchema:l,prefetchedQueryCollection:c,onAppStartSetting:p,is_autosynced_origin:g,is_explicitly_offlined_origin:m}=e;return{...h().getSubMetricsAndMetricDataForTracking(e.isPrewarmedTab?{isPrewarmedTab:!0,prewarmedTabNavigationStart:e.prewarmedTabNavigationStart}:{isPrewarmedTab:!1}),initial_route:t,is_editable:o,is_home_page:i,is_page_with_custom_layout:r,is_public_domain:s,profiling_tool:(0,u().getProfilingToolForSession)(),is_wiki_home:n,time_origin_to_app_start:S().getAppStartTime(),includes_page_origin_to_app_start:!0,id_schema:l,prefetched_cvb:c,is_prewarmed_tab:a,desktop_load_origin:h().getDesktopLoadOrigin(),desktop_tab_count:d().A.state.desktopTabCount,desktop_was_loaded_at_login:d().A.state.desktopWasLoadedAtLogin,is_swv2:await h().isSWV2(),is_browser_sw:await h().isBrowserSW(),opfs_metadata:d().A.state.opfsMetadata,is_deduplicating_lcpc:"boolean"==typeof d().A.state.isDeduplicatingLcpc?d().A.state.isDeduplicatingLcpc:"unknown",on_app_start_setting:p,is_autosynced_origin:g,is_explicitly_offlined_origin:m,tq_storage_estimate_time:d().A.state.transactionQueueStorageEstimateTime,html_source:await W()}}async function W(){try{return await(0,c().getHtmlStreamQueueEntry)("source")}catch(e){return"unknown"}}async function H(e,t){if(!a().default.checkGate({gateName:"initial_page_rendered_blocks"}))return;if(t!==j.state.pageId)return;const o=j.state.pageRenderStartTime,i=j.state.pageRenderEndTime;if(!i)return;const n=j.state.isInitialPageRender?"initial_page_rendered_blocks":"navigation_page_rendered_blocks",r=s().A.find((e=>e.getProps().isRootContainer)),l=P().T.filter((e=>e.getContextSelectableContainer()===r)).filter((e=>{const t=e.props.store;return Boolean(I().K.findBlockFromStore(t))&&"listItemBlock"===e.refLocation&&!t.isInsideCollection()})),c=l.length,d=l.filter((e=>{const o=e.props.store.getParentPointer();return o&&o.id===t})),u=d.length,p=l.filter((e=>"collection_view"===e.props.store.getType())).length,m=0!==p,S=performance.now();await new Promise((e=>setTimeout(e,200)));const v=window.innerHeight,f=window.innerWidth,h=l.filter((e=>{const t=M().default.state.selectableRectMap.get(e);return t&&t.right>=0&&t.left<=f&&t.bottom>=0&&t.top<=v})).length,y=d.filter((e=>{const t=M().default.state.selectableRectMap.get(e);return t&&t.right>=0&&t.left<=f&&t.bottom>=0&&t.top<=v})).length;g().default.measure({metricName:n,startTime:i,endTime:S},{environment:e,data:{page_render_duration:o?i-o:void 0,total_blocks_count:c,visible_blocks_count:h,total_top_level_blocks_count:u,visible_top_level_blocks_count:y,has_inline_collection:m,inline_collection_count:p},shouldSendIfStatsigNotInitialized:!0}),(0,w().f)({name:n,startTime:i,endTime:S})}function N(e){const t=e.RouterStore.state.route;if("page"!==t.name||!t.blockId)return!1;return v().Ob.lookupViewIds(t.blockId).some((t=>{const o=(0,f().A)(t),i=e.prefetcher.cache.getPrefetchAnalytic(o);return"hit-match"===(null==i?void 0:i.type)||"attempted"===(null==i?void 0:i.type)||"hit-mismatch"===(null==i?void 0:i.type)}))}async function U(e){var t,o;const i=e.RouterStore.state.route;if("page"!==i.name||!i.blockId||!e.currentUser.id||!e.sqliteConnection)return{is_autosynced_origin:!1,is_explicitly_offlined_origin:!1};let n;try{n=await async function(e){const{connection:t,userId:o,pageId:i}=e,n=(await(0,_().G2)({connection:t,statements:[(0,C().y)({userId:o,pageId:i}).asRead()],queryName:"getOfflinePageMetadataForPage"}))[0].data;return k().m.rowsFromSqlite(n)[0]}({connection:e.sqliteConnection,userId:e.currentUser.id,pageId:i.blockId})}catch(r){}return{is_autosynced_origin:(null===(t=n)||void 0===t?void 0:t.is_autosynced_origin)||!1,is_explicitly_offlined_origin:(null===(o=n)||void 0===o?void 0:o.is_explicitly_offlined_origin)||!1}}function q(e){var t,o;const i=null===(t=n().default.state.sidebarSpaceViewStore)||void 0===t?void 0:t.getModel(),s=null===(o=(0,r().S)())||void 0===o?void 0:o.getModel();if(i&&s)return(0,x().Y)(e,{spaceView:i,space:s})}(0,o(852832).exposeDebugValue)("renderedBlocksMetricStore",j)},577814:(e,t,o)=>{o.d(t,{A:()=>a});o(898992),o(354520);var i=()=>o(661075),n=()=>o(449195),r=()=>o(478726),s=()=>o(299545);function a(e){var t;const{store:o,pageViewBlockStore:a,environment:l}=e,c=s().O3(o,{recursivelyLoadAllDiscussions:!1}).sort(((e,t)=>t.getReactions().length-e.getReactions().length)),d=c.length>0,u=0===c.length,p=0===c.filter((e=>e.getComments().length>0)).length,g="PageDetailsStore"in l&&l.PageDetailsStore.getToggleState({environment:l,type:"discussion",id:o.id}),m={type:"hidden"},S=o.getAssociatedCollectionStore()??o,v="section_hide"===(0,n().z5)(null===(t=S.getFormat())||void 0===t?void 0:t.page_section_visibility);if(!(null==a?void 0:a.state.forceDiscussionOpen)&&(!o.isInsideCollection()||!u)&&(u||d&&(!1===g||void 0===g&&v)))return m;if(v)return m;const f=o.pathIsDead();if(u&&f)return m;const h=function(e){const{environment:t,blockStore:o,visibilityStore:n,hasNoOpenCommentDiscussion:s}=e;return!!t.currentUser.isLoggedIn()&&(!(!o.canComment()||!s)&&(!((0,r().sV)(o)||(0,r().fc)(o)&&!(0,r().f1)(o))&&(!(n!==o&&"isExternallyImportedAndSyncedCollection"in n)||(0,i().vW)(n))))}({environment:l,blockStore:o,visibilityStore:S,hasNoOpenCommentDiscussion:p});return!h&&u?m:{type:"visible",showDiscussionInput:h,unresolvedDiscussionStores:c}}},588e3:(e,t,o)=>{o.d(t,{A:()=>m});var i=o(296540),n=()=>o(484714),r=()=>o(631524),s=o(474848);const a={viewBox:"0 0 20 20",fittedViewBox:"2.37 4.12 15.25 11.75",svg:(0,s.jsx)("path",{d:"M2.375 6.25c0-1.174.951-2.125 2.125-2.125h11c1.174 0 2.125.951 2.125 2.125v7.5a2.125 2.125 0 0 1-2.125 2.125h-11a2.125 2.125 0 0 1-2.125-2.125zm1.25 7.5c0 .483.392.875.875.875h11a.875.875 0 0 0 .875-.875v-2.791l-2.87-2.871a.625.625 0 0 0-.884 0l-4.137 4.136-1.98-1.98a.625.625 0 0 0-.883 0L3.625 12.24zM8.5 9.31a1.5 1.5 0 0 0 1.33-.806 1.094 1.094 0 0 1-.702-2.058A1.5 1.5 0 1 0 8.5 9.31"})},l=(0,o(340498).wt)("photoFill",a,"fill");var c=()=>o(69708),d=()=>o(222299),u=()=>o(675925),p=()=>o(748539),g=()=>o(244828);function m(e){const{store:t,style:o,label:a,from:m}=e,S=(0,n().v3)(),[v,f]=(0,i.useState)(!1),h=(0,n().Y0)(),y=(0,i.useCallback)((async()=>{await(0,u().o)(S,{action:"edit_cover",block_type:"page",from:m},(async e=>{const o=t.getCoverStore();if(!o)return;if(o.getValue())return;f(!0);const i=await p().f.load(),{serverCommitResult:n}=g().createAndCommit({userAction:"PageViewBlock.handleAddRandomCoverClick",environment:S,canUndo:!0,perform:e=>{d().Oj({transaction:e,store:t,coverStore:o,pageCovers:i})}});n.then(e),f(!1)}))}),[S,t,m]);return!0===v?(0,s.jsx)(r().p,{style:o,colorVariant:"tertiary",disabled:!0,iconLeading:{icon:l,size:"xs",fitToViewBox:"all"},children:h.isSmallPhone?(0,s.jsx)(c().sA,{id:"pageAddCoverButton.add.pageCoverMobileLoading",defaultMessage:"Loading"}):(0,s.jsx)(c().sA,{id:"pageAddCoverButton.add.pageCoverLoading",defaultMessage:"Loading cover"})},"add-cover-loading"):(0,s.jsx)(r().p,{style:o,colorVariant:"tertiary",onClick:y,iconLeading:{icon:l,size:"xs",fitToViewBox:"all"},children:a},"add-cover")}},589895:(e,t,o)=>{o.d(t,{Bs:()=>u,L:()=>d,Ob:()=>c});o(517642),o(658004),o(733853),o(845876),o(432475),o(515024),o(731698),o(898992),o(354520),o(803949);var i=o(296540),n=()=>o(852507),r=()=>o(118884),s=()=>o(994310),a=()=>o(477293),l=()=>o(473336);const c=new class{constructor(){this.currentPageId=void 0,this._localStorage=void 0}startCachingViewIds(e){this.currentPageId=e,this.localStorage[e]&&(delete this.localStorage[e],this.writeToLocalStorage());this.entryForPage(e).v=[]}stopCachingViewIds(){const e=this.currentPageId;if(this.currentPageId=void 0,e){0===this.entryForPage(e).v.length&&(delete this.localStorage[e],this.writeToLocalStorage())}}registerView(e,t){if(this.currentPageId!==e)return;const o=this.entryForPage(e);o.v=[...new Set([...o.v,t])],o.t=Date.now(),this.writeToLocalStorage()}unregisterView(e,t){const o=this.localStorage[e];o&&(o.v=o.v.filter((e=>e!==t)),0===o.v.length&&delete this.localStorage[e],this.writeToLocalStorage())}lookupViewIds(e){const t=this.localStorage[e];return(null==t?void 0:t.v)??[]}clear(){this.currentPageId=void 0,this._localStorage=void 0}get localStorage(){return this._localStorage??(this._localStorage=s().A.get(l().O)||Object.create(null))}entryForPage(e){let t=this.localStorage[e];return t||(t={v:[],t:0},this.localStorage[e]=t),t}writeToLocalStorage(){this.limitLocalStorageSize(),s().A.set(l().O,this.localStorage)}limitLocalStorageSize(){const e=Object.keys(this.localStorage);if(e.length>=100){const t={timestamp:Number.MAX_SAFE_INTEGER,key:void 0};e.forEach((e=>{e!==this.currentPageId&&this.localStorage[e].t<t.timestamp&&(t.timestamp=this.localStorage[e].t,t.key=e)})),t.key&&delete this.localStorage[t.key]}}};function d({collectionContextStore:e,collectionViewStore:t,isFullScreen:o,wasCreatedThisSessionStore:n,didDelayOffscreenRenderRef:r,environment:s}){const l="on"===(0,a().r)("collections_inline_register_on_load",{enableEventTrailLogging:!0}),d=(0,i.useRef)(!1),u=(0,i.useCallback)((()=>{var t;const o=null===(t=e.collectionViewStore())||void 0===t?void 0:t.id,i=s.RouterStore.state.route;if("page"!==i.name)return;const n=i.blockId;n&&o&&(r.current?(c.unregisterView(n,o),e.shouldDelayRenderStore.removeListener(u)):c.registerView(n,o))}),[e,r,s]);(0,i.useEffect)((()=>{var t;if(o||n.state)return;const i=null===(t=e.collectionViewStore())||void 0===t?void 0:t.id,r=s.RouterStore.state.route;if("page"!==r.name)return;return r.blockId&&i?(e.shouldDelayRenderStore.addListener(u),u(),()=>{e.shouldDelayRenderStore.removeListener(u)}):void 0}),[e,o,n,s,u]),(0,i.useEffect)((()=>{l&&t&&(d.current||(d.current=!0,u()))}),[t,u,l])}function u({pageId:e,isFrameContext:t}){(0,n().l)((()=>{t&&c.startCachingViewIds(e)})),(0,r().X)((()=>{t&&c.stopCachingViewIds()}))}},592968:(e,t,o)=>{o.d(t,{F:()=>n});class i extends(()=>o(757695))().Store{getInitialState(){return{isOpen:!1}}}const n=new i},601726:(e,t,o)=>{o.d(t,{E:()=>m,f:()=>g});o(296540);var i=()=>o(756117),n=()=>o(993905),r=()=>o(484714),s=()=>o(590526),a=()=>o(882722),l=()=>o(478726),c=()=>o(495576),d=()=>o(551619),u=()=>o(817942),p=o(474848);function g(e){const{store:t,isEditable:o,isInPeek:l,paddingX:g,pageCoverHeight:S,onMouseEnter:v,onMouseLeave:f}=e,h=(0,r().v3)(),y=(0,s().K8)((()=>t.isCollectionView()?"20vh":S),[S,t]),b=(0,s().K8)((()=>h.WindowSizeStore.getSafePaddingLeftCSS(g)),[h.WindowSizeStore,g]),x=(0,s().K8)((()=>h.WindowSizeStore.getSafePaddingRightCSS(g)),[h.WindowSizeStore,g]),_=(0,s().K8)((()=>h.WindowSizeStore.state.width),[h.WindowSizeStore]),k=(0,d().no)(t),C=(0,s().K8)((()=>m(t,h)),[h,t]);return(0,p.jsx)(u().Pb,{style:{isolation:"isolate"},children:(0,p.jsx)(i().A,{tag:n().s,animate:{translateX:k},allowSelectionWithin:!1,className:l?a().S6D:void 0,style:C,onMouseEnter:v,onMouseLeave:f,children:(0,p.jsx)(c().d,{height:y,store:t,disabled:!o,paddingLeft:b,paddingRight:x,proxyWidth:_})})})}function m(e,t){const o=(0,l().NR)(e,t);return o.zIndex=2,o}},603616:(e,t,o)=>{o.d(t,{v:()=>d});var i=o(296540),n=()=>o(726637),r=()=>o(590526),s=()=>o(700500),a=()=>o(187820),l=()=>o(103018),c=o(474848);const d=i.memo((function(e){const{hasCover:t,isEditable:d,isInlinePostTitle:u,isInPageLayoutModuleEditor:p,isInSidePeek:g,openMenuOnMount:m,openMenuOnMountCallback:S,store:v}=e,f=(0,o(484714).v3)(),h=(0,o(69708).tz)(),y=(0,o(59226).X)("nds_stickered_page_icon"),b=(0,r().K8)((()=>v.isPersonProfile()),[v]),x=(0,r().K8)((()=>b?v.getPersonProfileUserStore():void 0),[b,v]),_=(0,r().K8)((()=>v.getIcon()),[v]),k=(0,r().K8)((()=>v.getIconStore()),[v]),C=(0,r().K8)((()=>v.getType()),[v]),w=(0,r().K8)((()=>{if(v.isCollectionView()){const e=v.getCollectionStoreIfSingleSource();return!!e&&e.isSyncedCollection()}return v.isType(s().xd.externalObjectInstancePage)}),[v]),I=(0,r().K8)((()=>v.isType(s().xd.form)),[v]),P=(0,r().K8)((()=>v.isCollectionView()),[v]),M=(0,r().K8)((()=>v.isEmptyPage()),[v]),A=(0,r().K8)((()=>(0,a().Te)(v)),[v]),T=(0,r().K8)((()=>o(77246).Uv.getMode(v)),[v]),B=(0,i.useCallback)((e=>{const t=v.getIconStore();t&&(0,o(675925).o)(f,{action:"edit_icon",block_type:C,from:"page_header"},(i=>{const r=(0,o(522419).pc)({source:e,secureFileConfigRootpath:n().A.secureFileConfig.rootPath,secureFileConfigHostname:n().A.secureFileConfig.hostname}),s=r?r.link:e,{serverCommitResult:a}=o(244828).createAndCommit({userAction:"PageIcon.handleChange",environment:f,canUndo:!0,perform:e=>{o(384944).KY({store:t,value:s,transaction:e})}});a.then(i)}))}),[f,v,C]),j=u?"xs":P||g?"sm":"md",{size:V,emojiSize:K}=(0,i.useMemo)((()=>"xs"===j?{size:26,emojiSize:26}:"sm"===j?{size:36,emojiSize:36}:"md"===j&&w?{size:74,emojiSize:78}:{size:140,emojiSize:78}),[w,j]),E=(0,o(401497).IS)((()=>{const e={position:"relative",zIndex:1,marginInlineStart:3,marginBottom:n().A.isMobile?8:0,marginTop:4,pointerEvents:"auto"},i="xs"===j?{marginInlineEnd:4,height:V,width:V}:"sm"===j?{marginInlineEnd:6}:"md"===j?t&&!p?{marginTop:-80}:n().A.isMobile||p?{marginTop:0}:{marginTop:(0,l().W)(f)-(I?32:0)}:{},r="xs"===j?{marginInlineEnd:4}:"sm"===j?{marginTop:4,marginInlineEnd:8}:t&&!p?{marginTop:-42}:n().A.isMobile||p?{marginTop:0}:{marginTop:(0,l().W)(f)-(I?32:0)};return{icon:{...e,...i},emoji:r,personProfile:{...e,...i,borderRadius:"50%",background:o(100622).Tj.background.primary,overflow:"hidden",width:V,height:V,border:"2px solid white"}}}),[f,t,I,p,j,V]);if(b)return(0,c.jsx)("div",{style:E.personProfile,children:(0,c.jsx)(o(453697).A,{userStore:x,size:V})});if(!_&&!u)return null;if(!d||"suggest"===T)return(0,c.jsx)(a().B6,{disabled:!0,icon:_,useStickeredIcon:t&&y,iconRecordCategory:A,isEmptyPage:M,size:V,emojiSize:K,style:E.icon,emojiStyle:E.emoji,largeIcon:!0,label:h.formatMessage({id:"layout.pageIcon.disabledLabel",defaultMessage:"Page icon"}),testId:"pageIcon"});const R=null==k?void 0:k.table;return(0,c.jsx)(a().B6,{disabled:!1,bucket:"secure",icon:_,useStickeredIcon:t&&y,iconRecordCategory:A,store:v,isEmptyPage:M,onChange:B,size:V,emojiSize:K,style:E.icon,emojiStyle:E.emoji,largeIcon:!0,openMenuOnMount:m,openMenuOnMountCallback:S,isInlinePostTitle:u,iconLoggingData:{recordTable:R,source:"page_header",block_type:C,collection_id:"collection"===R?null==k?void 0:k.id:void 0},label:h.formatMessage({id:"layout.pageIcon.label",defaultMessage:"Change page icon"}),testId:"pageIcon"})}))},607481:(e,t,o)=>{o.d(t,{K:()=>n});o(296540);const i={viewBox:"0 0 16 16",fittedViewBox:"3.66 3.65 8.68 8.68",directional:!0,svg:(0,o(474848).jsx)("path",{d:"M12.154 3.846a.614.614 0 0 0-.867-.017l-6.374 6.374v-4.6a.625.625 0 1 0-1.25 0v6.11c0 .345.28.624.625.624h6.109a.625.625 0 1 0 0-1.25h-4.6l6.374-6.374a.614.614 0 0 0-.017-.867"})},n=(0,o(340498).wt)("arrowDiagonalDownLeftSmall",i,"small")},619207:(e,t,o)=>{o.r(t),o.d(t,{emojiFaceFillIcon:()=>n,iconDefinition:()=>i});o(296540);const i={viewBox:"0 0 20 20",fittedViewBox:"2.37 2.37 15.26 15.25",svg:(0,o(474848).jsx)("path",{d:"M2.375 10a7.625 7.625 0 1 1 15.25 0 7.625 7.625 0 0 1-15.25 0m5.67 1.706a.625.625 0 0 0-1.036.698A3.6 3.6 0 0 0 10.005 14c1.245 0 2.35-.637 2.996-1.596a.625.625 0 0 0-1.036-.698 2.37 2.37 0 0 1-1.96 1.044 2.36 2.36 0 0 1-1.96-1.044m-.68-2.041c.49 0 .88-.46.88-1.02s-.39-1.02-.88-1.02-.88.46-.88 1.02.39 1.02.88 1.02m6.15-1.02c0-.56-.39-1.02-.88-1.02s-.88.46-.88 1.02.39 1.02.88 1.02.88-.46.88-1.02"})},n=(0,o(340498).wt)("emojiFaceFill",i,"fill")},620137:(e,t,o)=>{o.d(t,{e:()=>r});var i=()=>o(79926);const n=new(i().O2)("FormBlock",(async()=>await Promise.all([o.e(35530),o.e(9773),o.e(36556),o.e(55373),o.e(40537),o.e(27992),o.e(63452),o.e(66249),o.e(92845),o.e(14578),o.e(71003),o.e(69785),o.e(29357),o.e(15553),o.e(77345),o.e(41751),o.e(94995),o.e(68395),o.e(96654),o.e(51696),o.e(41797),o.e(65688)]).then(o.bind(o,797647)))),r=(0,i()._h)(n,(e=>e.FormBlock))},620612:(e,t,o)=>{o.d(t,{n:()=>n});var i=()=>o(263711);function n(){return i().g.state.isOpen}},660197:(e,t,o)=>{o.d(t,{H:()=>F});var i=o(296540),n=()=>o(993905),r=()=>o(23749),s=()=>o(726637),a=()=>o(402014),l=()=>o(484714),c=()=>o(819121),d=()=>o(590526),u=()=>o(401497),p=()=>o(795732),g=()=>o(882722),m=()=>o(677610),S=()=>o(396896),v=()=>o(799954),f=()=>o(651784),h=()=>o(201980),y=()=>o(650829),b=()=>o(715142),x=()=>o(619126),_=()=>o(478726),k=()=>o(747100),C=()=>o(466088),w=()=>o(578872),I=()=>o(712505),P=()=>o(517223),M=()=>o(978598),A=()=>o(589647),T=()=>o(918487),B=()=>o(9768),j=()=>o(817942),V=o(474848);function K({onMouseEnter:e,onMouseLeave:t,headerControls:o}){return(0,V.jsx)("div",{onMouseEnter:e,onMouseLeave:t,children:o})}var E=()=>o(603616),R=()=>o(598067),D=()=>o(441301);const L=0;function F(e){const{store:t,hasCover:o,headerFocusStore:F,headerControls:z,isHeaderHovered:O=!1,isEditable:W,openMenuOnMount:H,openMenuOnMountCallback:N,pageViewBlockStore:U,discussionInputStore:q,handleHeaderMouseEnter:Q,handleHeaderMouseLeave:Y,hideTitleIfEmpty:G,isInPageLayoutModuleEditor:X=!1,layoutModule:$,disabled:J,viewsModuleCollectionContextStore:Z,...ee}=e,te=(0,l().v3)(),{WindowSizeStore:oe}=te,{isAndroid:ie}=(0,l().Y0)(),[ne,re]=(0,i.useState)((()=>!!ie));(0,i.useEffect)((()=>{(async()=>{if((0,C().w)(te)){const e=te.RouterStore.getState();if((0,f().bh)(e.route)){await t.load();const e=(0,w().GN)(t),o=null==e?void 0:e.getSiteStore();await(null==o?void 0:o.load());const i=null==o?void 0:o.getSettings(),n=null==i?void 0:i.embedSettings;return void re(Boolean(!(null!=n&&n.hideTitle)))}}re(!0)})()}),[te,t]);const se=(0,d().K8)((()=>(0,k().cq)(t)),[t]),ae=(0,d().K8)((()=>se&&(I().default.isSidePeekOpen()||I().default.isSidePeekClosingStore.state)),[se]),{context:le}=ee,ce=p().m.has(le),de=s().A.isMobile&&!o,ue=!s().A.isMobile&&ee.isInSidePeek||ce,pe=(0,u().IS)((()=>!ue||ce?{container:{}}:{container:{display:"flex",alignItems:"flex-start"}}),[ue,ce]),ge=(0,d().K8)((()=>t.isExternalObjectInstancePageBlockStore()&&t.hasError()?t:null),[t]),me=(0,d().K8)((()=>t.canEdit()),[t]),Se=(0,d().K8)((()=>oe.getSafePaddingLeftCSS(L)),[oe]),ve=(0,d().K8)((()=>oe.getSafePaddingRightCSS(L)),[oe]),fe=(0,d().K8)((()=>(0,_().NR)(t,te)),[t,te]),he=(0,i.useCallback)((e=>{const t=e.target;void 0!==t&&t instanceof HTMLElement&&(0,c().p)(t)&&F.setState(!0)}),[F]),ye=(0,i.useCallback)((()=>{F.setState(!1)}),[F]),be=(0,V.jsx)("div",{className:se?g().S6D:void 0,style:{display:"flow-root",pointerEvents:"auto",...ce&&{display:"inline-block",verticalAlign:"top"}},children:(0,V.jsx)(E().v,{store:t,isEditable:W,hasCover:o,isInSidePeek:ee.isInSidePeek,openMenuOnMount:H,openMenuOnMountCallback:N,isInPageLayoutModuleEditor:X,isInlinePostTitle:ce},t.id)}),xe=ce?(0,V.jsx)(n().s,{style:{display:"inline-block"},allowSelectionWithin:!1,children:be}):be,_e=(0,d().K8)((()=>{var e;return(0,h().w9s)(null===(e=t.getTitleStore())||void 0===e?void 0:e.getValue())}),[t]),ke=ce?{...e.extraStyles,display:"inline-block",verticalAlign:"top"}:e.extraStyles,Ce=(0,V.jsx)(D().s,{store:t,disabled:J,hideText:G&&_e||!ne,...ee,extraStyles:ke}),we=(0,d().K8)((()=>t.getAssociatedCollectionStore()),[t]),Ie=(0,d().K8)((()=>!(!we||!$)&&(0,T().v)({collectionStore:we,module:$,isMobile:s().A.isMobile})),[we,$]),Pe=(0,M().o)(t,Z),Me=Ie||Pe,Ae=(0,d().K8)((()=>null==we?void 0:we.getSchema()),[we]),Te=Ae&&$?(0,P().LD)({collectionSchema:Ae,module:$}):void 0,Be=(0,m().y)(),[je,Ve]=(0,i.useState)(!1),Ke=(0,i.useMemo)((()=>{const e=Boolean(null==Te?void 0:Te.length)?s().A.isMobile?20:B().Lb:void 0,o=!s().A.isMobile&&(O||je);return(0,V.jsxs)(V.Fragment,{children:[we&&Me?(0,V.jsxs)(S().fI,{gap:4,marginTop:4,paddingBottom:e,children:[Ie?(0,V.jsx)(A().LR,{collectionStore:we,pageViewBlockContext:le}):void 0,(0,V.jsx)(A().Rm,{pageStore:t,viewsModuleCollectionContextStore:Z})]}):void 0,Boolean(null==Te?void 0:Te.length)?(0,V.jsx)("div",{style:{paddingTop:s().A.isMobile&&!Me?B().Lb:void 0,...Be?{paddingInlineStart:v().Gt.paddingInlineStart}:{marginInlineStart:-2}},onMouseEnter:()=>Ve(!0),onMouseLeave:()=>Ve(!1),children:(0,V.jsx)(R().h,{context:le,disabled:J,store:t,variant:"pinned",layoutModule:$,propertyIds:Te,showDescriptionIcons:o,wrapper:e=>(0,V.jsx)(j().vV,{children:e}),customization:{disableContainerPadding:!0,disableLastRowBottomPadding:!0}})}):void 0]})}),[we,$,le,Te,J,t,Be,Me,Z,Ie,O,je,Ve]),Ee=(0,d().K8)((()=>(0,b().Fm)(t)),[t]),Re=(0,d().K8)((()=>Boolean(t.getIcon())),[t]),De=s().A.isMobile&&o&&!Re&&!(z&&i.isValidElement(z)&&i.Children.count(z.props.children)>0);return ae?(0,V.jsxs)(r().A,{name:"PageTitleWithIcon",children:[(0,V.jsxs)(n().s,{allowSelectionWithin:!0,children:[(0,V.jsx)(K,{onMouseEnter:Q,onMouseLeave:Y,headerControls:z}),ne?xe:void 0,Ce]}),Ke]}):(0,V.jsxs)(r().A,{name:"PageTitleWithIcon",children:[(0,V.jsx)("div",{style:fe,onMouseEnter:Q,onMouseLeave:Y,children:(0,V.jsxs)("div",{style:{maxWidth:"100%",paddingInlineStart:Se,width:"100%"},onClick:async e=>{if(Ee){const e=await y().assistantDependency.load();await e.assistantEditActions.saveAssistantCreatedPage(te)}(0,a().SQ)(e,a().y$.Click)},children:[(0,V.jsxs)(n().s,{onFocus:he,onBlur:ye,allowSelectionWithin:!1,style:{pointerEvents:"none"},children:[de?z:void 0,ne&&!ue?xe:void 0,de?void 0:z]}),(0,V.jsx)("div",{style:{paddingInlineEnd:ve,marginTop:De?8:void 0},children:ue?(0,V.jsxs)("div",{style:pe.container,children:[ne?xe:void 0,Ce]}):Ce}),ge?(0,V.jsx)(x().A,{store:ge,canEdit:me}):null]})}),Ke]})}},661344:(e,t,o)=>{o.d(t,{LG:()=>S});var i=o(296540),n=()=>o(993905),r=()=>o(590526),s=()=>o(795732),a=()=>o(543886),l=()=>o(405170),c=()=>o(478726),d=()=>o(457419),u=()=>o(377157),p=()=>o(171018),g=o(474848);function m(e){const{state:t,store:o,disabled:i,blockPropertyValueOverlayStore:n}=e,s=(0,r().K8)((()=>(0,d().S)(o)),[o]);return(0,g.jsx)(u().A,{propertyIds:t.sectionPropertyIds,store:o,collectionStore:t.collectionStore,format:t.format,disabled:i,locked:s,blockPropertyValueOverlayStore:n})}function S(e){const{store:t,context:o,disabled:d,inlinePropertyIDs:u,wrapper:S}=e,v=(0,r().K8)((()=>t.getAssociatedCollectionStore()),[t]),f=(0,i.useMemo)((()=>new(p().YB)),[]),h=function(e){const{collectionStore:t,format:o,sectionPropertyIds:i}=e;if(!(t&&o&&i&&i.length))return{type:"hidden"};return{type:"visible",collectionStore:t,format:o,sectionPropertyIds:i}}({collectionStore:v,format:(0,r().K8)((()=>(0,c().gV)(t)),[t]),sectionPropertyIds:u});if("hidden"===h.type)return null;const y=o===s().R.PeekView;return S((0,g.jsx)(n().s,{allowSelectionWithin:!0,children:(0,g.jsx)(m,{topBorder:!0,state:h,store:t,disabled:d,blockPropertyValueOverlayStore:y?l().A:a().A,isInPeekRenderer:y,pagePropertiesStore:f})}))}},663290:(e,t,o)=>{o.d(t,{I:()=>u});var i=()=>o(908006),n=()=>o(161479),r=()=>o(763824),s=()=>o(878523),a=()=>o(440024),l=()=>o(260850),c=()=>o(404783),d=()=>o(21510);async function u(e){const{environment:t,discussionStore:o,rect:u,blockStore:p,discussionLocation:g,activityId:m,notificationId:S}=e,v=new(c().A)(t,(0,n().e)(p.pointer.spaceId));d().A.setState({open:!0,rect:u,discussionStore:o,discussionInputStore:v,blockStore:p,discussionLocation:g,activityId:m,notificationId:S}),(0,a().I)({environment:t}),await i().default.afterNextFlush(),"feed_item_top_level_discussion"!==g&&(await(0,r().wR)(10),(0,l().z)({store:v.state.textStore})),s().nq({environment:t,from:g,activityId:m,notificationId:S})}},678834:(e,t,o)=>{o.d(t,{y:()=>h});o(296540);var i=()=>o(484714),n=()=>o(590526),r=()=>o(401497),s=()=>o(250910),a=()=>o(546926),l=()=>o(631524),c=()=>o(890492),d=()=>o(607481),u=()=>o(69708),p=()=>o(100622),g=()=>o(900967),m=()=>o(592968),S=()=>o(263711),v=()=>o(352759),f=o(474848);function h(e){const{pageStore:t,backlinksButtonPopupStore:o,numBacklinks:h,isButtonVisible:y,customization:b={}}=e,{buttonStyles:x,..._}=b,k=(0,i().v3)(),{isPhone:C}=(0,i().Y0)(),w=(0,n().K8)((()=>{if(void 0!==h)return h;if(C||y)return(0,g().Ju)(t,k).backlinksCount;return k.LocalBacklinkStore.getBacklinkState({blockId:t.id,currentUserId:k.currentUser.id}).backlinks.length}),[k,t,h,y,C],{debugName:"BacklinksControlButton.useComputedStore"}),I=(0,n().K8)((()=>S().g.getState().isOpen),[]),P=(0,r().IS)((()=>{const e=0===w&&I,t=p().Tj.text.disabled;return{button:e?{color:t}:{}}}),[I,w]),M=({buttonPopupEvents:e={}})=>(0,f.jsx)(l().p,{colorVariant:"tertiary",iconLeading:{icon:d().K,size:"sm",colorVariant:0===w&&I?"disabled":void 0},style:{...x,...P.button},..._,...e,children:(0,f.jsx)(u().sA,{id:"pageViewBlock.show.backlinks",defaultMessage:"{numberOfBacklinks, plural, =0 {No backlinks} one {{numberOfBacklinks} backlink} other {{numberOfBacklinks} backlinks}}",values:{numberOfBacklinks:w}})});if(C){return M({buttonPopupEvents:{onClick:e=>{m().F.setState({isOpen:!0})}}})}return(0,f.jsx)(s().A,{buttonPopupStore:o,popupType:s().z.Popup,renderOrigin:e=>M({buttonPopupEvents:e}),render:()=>{const e={menuType:a().gu.Popup,width:500};return(0,f.jsx)(c().A,{...e,children:w>0?(0,f.jsx)(v().p,{store:t}):null})}},"backlinkspopup")}},689383:(e,t,o)=>{o.d(t,{A:()=>L});o(296540);var i=()=>o(564884),n=()=>o(135168),r=()=>o(59226),s=()=>o(726637),a=()=>o(484714),l=()=>o(590526),c=()=>o(401497),d=()=>o(996332),u=()=>o(396896),p=()=>o(807449),g=()=>o(695115),m=()=>o(124092),S=()=>o(651124),v=()=>o(477336),f=()=>o(132855),h=()=>o(158661),y=()=>o(395546),b=()=>o(462853),x=()=>o(69708),_=()=>o(100622),k=()=>o(284371),C=()=>o(339798),w=()=>o(447453),I=()=>o(198491),P=()=>o(106412),M=()=>o(815585),A=()=>o(493208),T=()=>o(817126),B=()=>o(991249),j=()=>o(324043),V=()=>o(577210),K=()=>o(661075),E=()=>o(351337),R=o(474848);const D=(0,x().YK)({learnMore:{defaultMessage:"Learn more",id:"syncedCollectionIndicators.upsell.learnMore"}});const L=function({collectionStore:e,collectionContextStore:t}){return(0,l().K8)((()=>e.isSyncedCollection()),[e])?(0,R.jsx)(W,{collectionStore:e,collectionContextStore:t}):null};function F(){return{color:_().Tj.text.secondary,fontSize:12,lineHeight:1.2}}function z({collectionStore:e,collectionContextStore:t}){const o=(0,l().K8)((()=>e.getFormatStore().getKeyStore("sync_state").getKeyStore("syncing").getValue()),[e]),i=(0,l().K8)((()=>e.getFormatStore().getKeyStore("sync_state").getKeyStore("last_synced_at").getValue()),[e]),n=(0,l().K8)((()=>null==t?void 0:t.numberChildrenUnfurledStore.state),[t]),r=(0,l().K8)((()=>null==t?void 0:t.numberChildrenReceivedStore.state),[t]),a=n&&r&&n/r<1&&!s().A.isMobile,c=o&&s().A.isMobile;let u;return i&&(u=(0,R.jsx)(x().sA,{defaultMessage:"Synced {lastSyncedAt}",id:"synced.lastSyncedAt.label",values:{lastSyncedAt:(0,M().nl)(i,{useLowercase:!0})}})),"row_limit_exceeded"===o?(0,R.jsx)(d().Q,{style:{display:"inline-flex",...F()},onClick:()=>function(e){e&&((0,w().O)({collectionContextStore:e,collectionSettingsStore:e.settingsStore}),C().a2({collectionSettingsStore:e.settingsStore,item:{type:"source"}}))}(t),children:(0,R.jsxs)("span",{style:{marginInlineStart:5,marginInlineEnd:5,display:"inline-flex",gap:4,alignItems:"center",...F()},children:[(0,R.jsx)(p().I,{icon:h().exclamationMarkTriangleFillSmallIcon,size:"xxs",colorPalette:"orange",colorVariant:"accentPrimary"}),(0,R.jsx)(x().sA,{defaultMessage:"Partial Sync",id:"synced.partial_sync.label"})]})}):a||c?(0,R.jsxs)("span",{style:{marginInlineStart:5,marginInlineEnd:5,display:"inline-flex",gap:4,alignItems:"center",...F()},children:[(0,R.jsx)(x().sA,{defaultMessage:"Syncing",id:"synced.syncing.label"}),(0,R.jsx)(p().I,{icon:v().l,size:"xxs",className:"sync-spinner"})]}):(0,R.jsx)("span",{style:{marginInlineStart:5,marginInlineEnd:5,display:"inline-flex",...F()},children:u})}function O(){const e=(0,a().v3)(),t=(0,c().IS)((()=>({span:{color:_().Tj.text.secondary},linkBox:{fontSize:"14px",lineHeight:1.2,color:_().Tj.blue.text.accentPrimary,marginInlineStart:"5px",marginInlineEnd:"5px"}})),[]);return(0,R.jsxs)(R.Fragment,{children:[(0,R.jsx)("span",{style:t.span,children:"•"}),(0,R.jsx)(d().Q,{inline:!0,onClick:async()=>{await V().j({environment:e,from:"collection_header"});const t=E().Ay.createNewFlowId();(0,i().u)({environment:e,event:{eventName:"external_sync_entry_point",eventProperties:{integration:"jira",from:"database_sync",flowId:t}}})},style:t.linkBox,hoveredStyle:{background:"none",textDecoration:"underline"},children:(0,R.jsx)(x().sA,{defaultMessage:"Improve your Jira sync",id:"synced.improve_jira_sync.label"})})]})}function W({collectionStore:e,collectionContextStore:t}){const o=(0,P().Zp)(),i=(0,l().K8)((()=>e.getFormatStore().getKeyStore("original_url").getValue()),[e]),n=(0,l().K8)((()=>e.getSpaceId()),[e]),r=(0,l().K8)((()=>Boolean(e.getFormatStore().getKeyStore("sync_state").getValue())),[e]),s=(0,l().K8)((()=>i&&(0,A().e)(i,n)),[n,i]),a=(0,l().K8)((()=>(0,K().fH)(i,n)),[n,i]),c=(0,l().K8)((()=>{const t=e.getFormat().uri;return!!t&&(e.getFormat().external_collection_type!==S().uO.Jira&&(0,K().Ip)(t))}),[e]);return(0,R.jsxs)("div",{style:{display:"inline-flex",alignItems:"center",whiteSpace:"nowrap"},children:[s?(0,R.jsx)(d().Q,{href:s,style:{display:"inline-flex"},hoveredStyle:{background:"none",textDecoration:"underline"},innerStyle:{flexShrink:1,width:"none",padding:"2px 0px",marginInlineEnd:5,borderRadius:4,display:"flex",alignItems:"center",alignSelf:"center",...F()},disabled:null==o?void 0:o.disablePageLinks,external:!0,children:a}):void 0,r?(0,R.jsx)("span",{style:{color:_().Tj.text.secondary},children:"•"}):null,r?(0,R.jsx)(z,{collectionStore:e,collectionContextStore:t}):null,c?(0,R.jsx)(O,{}):void 0,(0,R.jsx)(H,{collectionStore:e})]})}function H({collectionStore:e}){const t=(0,l().K8)((()=>{const t=(0,K().cl)(e.getFormat().uri,e.getSpaceId());return(null==t?void 0:t.id)??e.getFormat().integration_id}),[e]),o=(0,b().l)(t);return o?(0,R.jsx)(U,{featureName:o,collectionStore:e}):null}const N="https://www.notion.com/pricing";function U({featureName:e,collectionStore:t}){const o=(0,a().v3)(),i=(0,x().tz)(),s=(0,c().IS)((()=>({upgradeDescription:{fontSize:k().J.UISmall.desktop,lineHeight:k().K_.UISmall.desktop,color:_().Tj.text.secondary,display:"flex",alignItems:"center"}})),[]),l=(0,T().uF)({featureName:e,collectionStore:t}),d=(0,r().X)("upgrade_system_synced_database_insert_actions");if(null==l||!l.upsell)return null;const{upsell:p,upsellTier:S,expirationDate:v}=l;return d?(0,R.jsx)(j().j,{source:"collection_synced_database",upsell:p,featureName:e,display:"text",customMessages:q,size:"small",spaceStore:(0,n().f)(t)}):(0,R.jsxs)(u().fI,{alignItems:"center",marginInlineStart:8,children:[(0,R.jsxs)("div",{style:s.upgradeDescription,children:[(0,R.jsx)(I().A,{expirationDate:v,upsellTier:S}),(0,R.jsx)(g().A,{onClick:()=>window.open(N,"_blank"),colorVariant:"tertiary",size:"sm",icon:y().infoCircleSmallIcon,ariaLabel:i.formatMessage(D.learnMore)})]}),(0,R.jsx)(m().p,{onClick:()=>{B().K(o,{from:"collection_synced_database",upsell:p,spaceStore:(0,n().f)(t)})},iconLeading:f().arrowInCircleUpFillIcon,colorPalette:"blue",size:"xs",children:(0,R.jsx)(x().sA,{defaultMessage:"Upgrade",id:"syncedCollectionIndicators.upsell.upgrade"})})]})}const q=(0,x().YK)({eligible_to_purchase:{id:"SyncedCollectionIndicators.upgrade.eligibleToPurchase",defaultMessage:"<highlight>Upgrade</highlight> to continue using synced database"},eligible_for_trial:{id:"SyncedCollectionIndicators.upgrade.eligibleForTrial",defaultMessage:"<highlight>Try</highlight> to continue using synced database"},sales_eligible:{id:"SyncedCollectionIndicators.upgrade.salesEligible",defaultMessage:"<highlight>Contact sales</highlight> to continue using synced database"},sales_assisted:{id:"SyncedCollectionIndicators.upgrade.salesAssisted",defaultMessage:"<highlight>Contact sales</highlight> to continue using synced database"},eligible_to_request:{id:"SyncedCollectionIndicators.upgrade.eligibleToRequest",defaultMessage:"<highlight>Request upgrade</highlight> to continue using synced database"},request_pending:{id:"SyncedCollectionIndicators.upgrade.requestPending",defaultMessage:"<highlight>Requested</highlight> to continue using synced database"}})},706250:(e,t,o)=>{o.d(t,{D:()=>n});class i extends(()=>o(757695))().Store{getInitialState(){return{startTime:void 0}}}const n=new i},716776:(e,t,o)=>{o.d(t,{T:()=>g,n:()=>p});var i=()=>o(242422),n=()=>o(908006),r=()=>o(301809),s=()=>o(896628),a=()=>o(722101),l=()=>o(384944),c=()=>o(37450),d=()=>o(645266),u=()=>o(518489);function p(e){const{environment:t,store:o,transaction:s,preventTextSelection:p,onTextSelection:g}=e;i().default.checkGate({gateName:"mobile_keep_template_gallery_open"})&&d().A.state.open&&d().A.setState({open:!1});const m=(()=>{const e=o.getContentStores();if(1===e.length&&e[0].isEmptyTextBlock())return e[0];const i=l().Wv({environment:t,type:"text",inMemoryRecordCache:o.inMemoryRecordCache,transaction:s,spaceId:o.pointer.spaceId}),n=a().BC({parentStore:o.getContentStore(),appendStore:i,transaction:s}).childStore;return c().vH(t,{from:"template_picker",type:"text",creating_block_id:i.id,parent_collection_id:i.getParentCollectionIdUpToTwoLevels()}),n})();return p||n().default.afterNextFlush((()=>{(0,u().h)({environment:t,store:m}),(0,r().e)({store:m.getBlockTitleStore()}),null==g||g()})),m}function g(e){const{environment:t,store:o,transaction:i}=e;s().vc({store:o,transaction:i}),p({environment:t,store:o,transaction:i})}},729380:(e,t,o)=>{o.d(t,{u:()=>n});class i extends(()=>o(757695))().Store{getInitialState(){return{discussionsHeight:0}}setDiscussionsHeight(e){this.setState({...this.state,discussionsHeight:e})}resetHeights(){this.setState({discussionsHeight:0})}getTotalHeight(){return this.state.discussionsHeight}}const n=new i},736316:(e,t,o)=>{o.d(t,{f:()=>n});var i=()=>o(449412);function n(e){const{name:t,startTime:o,endTime:n}=e;try{performance.measure(t,{start:o,end:n})}catch(r){i().Fg(r,{extra:{name:t,startTime:o,endTime:n}})}}},741751:(e,t,o)=>{o.d(t,{zs:()=>Kt,mv:()=>Ut,Ay:()=>Nt,uD:()=>Wt,dp:()=>Ot,AP:()=>Et,DX:()=>Dt,JK:()=>Rt,T1:()=>Ft,Y4:()=>Lt,g1:()=>eo,NS:()=>Jt,nu:()=>Zt,rK:()=>to,Wj:()=>qt});o(944114),o(898992),o(672577);var i=o(296540),n=()=>o(907258),r=()=>o(59226),s=()=>o(756117),a=()=>o(993905),l=()=>o(23749),c=()=>o(726637),d=()=>o(484714),u=()=>o(792485),p=()=>o(590526),g=()=>o(721908),m=()=>o(664748),S=()=>o(380745),v=()=>o(757695),f=()=>o(609679),h=()=>o(876338),y=()=>o(795732),b=()=>o(231940),x=()=>o(267956),_=()=>o(118307),k=()=>o(519831),C=()=>o(201980),w=()=>o(711517),I=()=>o(69708),P=()=>o(496603),M=()=>o(821062),A=()=>o(534177),T=()=>o(284371),B=()=>o(934839),j=()=>o(165241),V=()=>o(473227),K=()=>o(561503),E=()=>o(766081),R=()=>o(468882),D=()=>o(543886),L=()=>o(405170),F=()=>o(45105),z=()=>o(819121),O=()=>o(401497),W=()=>o(882722),H=()=>o(631524),N=()=>o(879526),U=()=>o(435644),q=()=>o(485569),Q=()=>o(158574),Y=()=>o(774524),G=()=>o(21178),X=()=>o(478726),$=()=>o(821507),J=()=>o(817942),Z=()=>o(799954),ee=()=>o(761309),te=()=>o(77246),oe=o(474848);const ie=i.memo((function(e){const{descriptionStore:t,disabled:n,toggleStore:r,pageId:s,userSettingsStore:a,collectionStore:l,locked:d,canEdit:u,bottomMargin:g}=e,m=(0,O().IS)((()=>({container:{maxWidth:"100%",borderRadius:4,overflow:"hidden",marginBottom:g??12},textContainer:{display:"flex",cursor:"text"},tooltipContainer:{display:"flex",alignItems:"start"},lockedIconContainer:{paddingTop:4,paddingInlineEnd:6},pageTitleWithIconContainer:{whiteSpace:"nowrap",fontWeight:T().Wy.bold},pageIcon:{marginInlineEnd:4,display:"inline-block"},pageTitle:{display:"inline"}})),[g]),S=(0,p().K8)((()=>l&&l.getIcon()),[l]),v=(0,i.useCallback)((e=>(0,oe.jsx)("div",{children:(0,oe.jsx)("div",{style:m.textContainer,...e,children:(0,oe.jsx)(ne,{descriptionStore:t,toggleStore:r,userSettingsStore:a,pageId:s,disabled:n,hasIcon:Boolean(S)})})})),[t,n,S,s,m.textContainer,r,a]),f=(0,i.useCallback)((()=>(0,oe.jsxs)("div",{style:m.tooltipContainer,children:[(0,oe.jsx)("div",{style:m.lockedIconContainer,children:(0,oe.jsx)(o(807449).I,{icon:o(642557).lockSmallIcon,size:"xs"})}),(0,oe.jsx)("div",{children:(0,oe.jsx)("div",{children:(0,oe.jsx)(I().sA,{defaultMessage:"Please unlock {pageTitleWithIcon} to edit the description.",id:"pageDescription.lockedTooltip.message",values:{pageTitleWithIcon:(0,oe.jsxs)("span",{style:m.pageTitleWithIconContainer,children:[S?(0,oe.jsx)(o(187820).B6,{disabled:!0,icon:S,isEmptyPage:!1,size:12,style:m.pageIcon}):null,l?(0,oe.jsx)(o(16006).A,{store:l,style:m.pageTitle}):null]})}})})})]})),[l,S,m.lockedIconContainer,m.pageIcon,m.pageTitle,m.pageTitleWithIconContainer,m.tooltipContainer]);return(0,oe.jsx)("div",{style:m.container,children:c().A.isMobile?(0,oe.jsx)(ne,{descriptionStore:t,toggleStore:r,userSettingsStore:a,pageId:s,disabled:n,hasIcon:Boolean(S)}):(0,oe.jsx)(o(26697).m,{renderTooltip:f,render:v,disableTooltip:!d||!u})})})),ne=i.memo((function(e){const{descriptionStore:t,disabled:n,toggleStore:r,pageId:s,userSettingsStore:a,hasIcon:l}=e,c=(0,d().v3)(),g=(0,d().Y0)(),m=(0,I().tz)(),S=(0,u().S)(),v=(0,i.useRef)(null),f=(0,p().K8)((()=>r.state.isPageDescriptionExpanded),[r]),h=(0,i.useCallback)((e=>{f||(f||e.preventDefault(),Q().JO({store:r,pageId:s,descriptionStore:t,environment:c,userSettingsStore:a}))}),[t,c,f,s,r,a]),y=(0,i.useCallback)((e=>{var i;if(!function(){const e=S&&S.publicEditModeStore.state,i=(0,o(220719).o9)((0,o(598790).T)(t));return!n&&(!(0,ee().QT)(e)&&("suggest"!==te().Uv.getMode(i)&&t.canEdit()))}())return;if(null===(i=e.preventDefault)||void 0===i||i.call(e),v.current&&v.current.isComposing())return;const r=o(232615).default.state;if("editing"!==r.mode)return;const s=(0,o(465628).H)(r.multiSelection);if(!s)return;const a=null!=S&&S.pageStore?te().Uv.getMode(S.pageStore):"default";o(244828).createAndCommit({userAction:"PageDescription.handleEnter",environment:c,canUndo:!0,perform:e=>{o(295304).$D({environment:c,editorMode:a,store:t,string:"\n",selection:s.selection,disableMentions:!0,disableSlashCommands:!0,disableEmojiCommands:!0,transaction:e})}})}),[t,n,c,S]),b=(0,i.useCallback)((e=>!0),[]),x=(0,i.useCallback)((e=>!0),[]),_=(0,i.useMemo)((()=>({bot:!1,date:!1,page:!1,team:!1,user:!1,group:!1,formulaContextVariable:!0,heading:!0,reminder:!0,createPage:!0,inviteUserToPage:!0,templateVariable:!0,slackSpecialMention:!0,inviteUserToWorkspace:!0,property:!0})),[]),k=(0,O().IS)((()=>({container:{fontSize:14,paddingInlineStart:l?Z().Md+4:Z().Md,paddingBottom:4,paddingTop:3,width:780}})),[l]);return t?(0,oe.jsx)(o(405623).A,{ref:v,store:t,style:k.container,disabled:n,placeholder:m.formatMessage({defaultMessage:"Add a description…",id:"pageDescription.emptyPlaceholder"}),disableSlashCommands:!0,disableEmbedMenu:!0,disabledMentionTypes:_,onTab:b,onUntab:x,onEnter:y,onClick:h,disableStyleAnnotations:g.isMobileBrowser,disableInsertedDeletedAnnotations:g.isMobileBrowser,disableHorizontalEdgeScroll:!0,pasteBehavior:"inline",inPageFind:o(366437).Os.none}):null}));var re=()=>o(598067),se=()=>o(457419),ae=()=>o(440024),le=()=>o(644914),ce=()=>o(260850);const de=i.memo((function(e){const{canEdit:t,collectionContextStore:r,context:s,controlHoverStyle:a,disabled:l,editorContentContainerRef:c,forceLocalQueryCollection:u,handleHeaderMouseEnter:g,handleHeaderMouseLeave:m,hasCover:S,headerFocusStore:v,isEditable:f,isInSidePeek:h,onCollectionViewBlockMount:b,onTitleChange:x,onTitleEditText:_,onTitleEsc:k,onTitleTab:C,onTitleUntab:w,openMenuOnMount:I,openMenuOnMountCallback:P,paddingLeft:M,paddingRight:A,pageCover:T,pageViewBlockStore:B,productUseCase:j,shouldShowTemplatePicker:V,store:K,titlePlaceholder:E,topControls:R}=e,D=(0,d().v3)(),L=(0,d().Y0)(),[F,z]=(0,i.useState)(!!L.isAndroid),O=(0,p().K8)((()=>K.getCollectionViewSourceDescriptionStore()),[K]),W=(0,p().K8)((()=>(0,G().cf)(O)),[O]),H=(0,p().K8)((()=>{var e;if(K.id!==(null===(e=n().default.state.mainEditorCurrentBlockStore)||void 0===e?void 0:e.id))return;const{RouterStore:t}=D,o=t.state.route;return"page"===o.name?o.collectionViewId:void 0}),[K,D]);return(0,i.useEffect)((()=>{(async()=>{if((0,o(466088).w)(D)){const e=D.RouterStore.getState();if((0,o(651784).bh)(e.route)){const e=(0,o(578872).GN)(K),t=null==e?void 0:e.getSiteStore();await(null==t?void 0:t.load());const i=null==t?void 0:t.getSettings(),n=null==i?void 0:i.embedSettings;return void z(Boolean(!(null!=n&&n.hideTitle)))}}z(!0)})()}),[D,K]),(0,oe.jsxs)(oe.Fragment,{children:[F?(0,oe.jsx)(ue,{canEdit:t,collectionContextStore:r,collectionViewDescriptionStore:O,context:s,controlHoverStyle:a,descriptionHasText:W,disabled:l,handleHeaderMouseEnter:g,handleHeaderMouseLeave:m,hasCover:S,headerFocusStore:v,isEditable:f,isInSidePeek:h,onTitleChange:x,onTitleEditText:_,onTitleEsc:k,onTitleTab:C,onTitleUntab:w,openMenuOnMount:I,openMenuOnMountCallback:P,paddingLeft:M,paddingRight:A,pageCover:T,pageViewBlockStore:B,shouldShowTemplatePicker:V,store:K,titlePlaceholder:E,topControls:R}):null,(0,oe.jsx)(q().dN,{editorContentContainerRef:c,overridePaddingLeft:M,overridePaddingRight:A,store:K,isFullScreen:!0,productUseCase:j||"full_page",viewId:H,disabled:l,headerActionsBehavior:s===y().R.InAppTemplatePreview?"hidden":"default",onMount:b,forceLocalQueryCollection:u})]})}),M().A);function ue(e){const{canEdit:t,collectionContextStore:r,collectionViewDescriptionStore:a,context:l,controlHoverStyle:u,descriptionHasText:g,disabled:m,handleHeaderMouseEnter:S,handleHeaderMouseLeave:v,hasCover:f,headerFocusStore:h,isEditable:y,isInSidePeek:b,onTitleChange:x,onTitleEditText:_,onTitleEsc:k,onTitleTab:w,onTitleUntab:I,openMenuOnMount:P,openMenuOnMountCallback:M,paddingLeft:A,paddingRight:T,pageCover:B,pageViewBlockStore:j,shouldShowTemplatePicker:V,store:K,titlePlaceholder:E,topControls:R}=e,D=(0,d().v3)(),L=(0,d().Y0)(),{singleSourceCollectionStore:z,hasExactlyOneSourceAndNoLinkedCollections:W,hasAnySourceCollectionStores:H}=(0,p().K8)((()=>({singleSourceCollectionStore:K.getCollectionStoreIfSingleSource(),hasExactlyOneSourceAndNoLinkedCollections:K.hasSingleSourceAndNoLinkedCollections(),hasAnySourceCollectionStores:K.getOwnedCollectionStores().length>0})),[K]),N=(0,p().K8)((()=>te().Uv.getMode(K)),[K]),U=(0,p().K8)((()=>K.getTitleStore()),[K]),q=(0,p().K8)((()=>C().q4_(null==U?void 0:U.getValue())),[U]),Y=(0,p().K8)((()=>!(0!==K.getCollectionViewStores().length)||(!!W||(!!H||!!U&&(!!q||!!(0,o(142096).j)(U))))),[K,W,H,U,q]),{currentUserSettingsStore:$,userSettings:Z}=(0,p().K8)((()=>{const e=n().AppStoreCurrentUserSettingsStore.state;return{currentUserSettingsStore:e,userSettings:null==e?void 0:e.getSettings()}}),[]),[ee,ne]=(0,i.useState)(!1);(0,i.useEffect)((()=>{const e=!D.currentUser.isLoggedIn();ee||!e&&!(!e&&$&&Z)||void 0===g||(Q().K$({pageId:K.id,store:j,userSettingsStore:$,descriptionHasText:g}),ne(!0))}),[$,Z,g,ee,K.id,j,D]);const ae=(0,p().K8)((()=>{const{isPageDescriptionExpanded:e}=j.state;return D.currentUser.isLoggedIn()?!(!Z||!ee)&&(((0,G().cf)(a)||y)&&e):e}),[a,ee,y,j,Z,D.currentUser]),ce=(0,p().K8)((()=>ae&&a&&j.state.isPageDescriptionExpanded?{type:"visible",descriptionStore:a,currentUserSettingsStore:n().AppStoreCurrentUserSettingsStore.state,collectionStore:z,shouldHideBottomMargin:!K.hasSingleSourceAndNoLinkedCollections()}:{type:"hidden"}),[a,z,j,ae,K]),de=(0,p().K8)((()=>(0,o(635462).s)(K.id)||(0,o(665020).W)(K.id)),[K]),ue=(0,p().K8)((()=>(0,X().NR)(K,D)),[K,D]),ge=(0,p().K8)((()=>(0,X().uf)(K,l,L)),[K,l,L]),me=(0,p().K8)((()=>(0,se().S)(K)),[K]),Se=(0,i.useContext)(F().w),ve=(0,p().K8)((()=>(0,le().Uh)(D)+(0,le().zo)(D,!1)-Se-A),[D,A,Se]),fe=(0,p().K8)((()=>{const{WindowSizeStore:e}=D;return{paddingLeft:e.getSafePaddingLeftCSS(A),paddingRight:e.getSafePaddingRightCSS(T)}}),[D,A,T]),he=(0,O().IS)((()=>{const e="visible"===ce.type&&ce.shouldHideBottomMargin;return{container:{maxWidth:"100%",paddingInlineStart:fe.paddingLeft},titleWrapper:{paddingInlineEnd:fe.paddingRight,marginBottom:c().A.isMobile?e?8:16:e?4:8,width:ve},titleWithIcon:{display:"flex",alignItems:"flex-start",flexDirection:c().A.isMobile?"column":"row"}}}),[ve,fe.paddingLeft,fe.paddingRight,ce]);return(0,oe.jsxs)("div",{style:ue,onMouseEnter:S,onMouseLeave:v,children:[B,(0,oe.jsxs)(s().A,{animate:{width:ge},style:he.container,children:[(0,oe.jsx)(pe,{canEdit:t,context:l,controlHoverStyle:u,store:K,headerFocusStore:h,topControls:R,isEditable:y,isInSidePeek:b,titleStore:U,titleTextValue:q,pageViewBlockStore:j,editorMode:N,shouldShowDescription:ae,collectionViewDescriptionStore:a,descriptionHasText:g}),(0,oe.jsxs)("div",{style:he.titleWrapper,children:[de?null:(0,oe.jsxs)("div",{style:he.titleWithIcon,children:[(0,oe.jsx)(o(603616).v,{store:K,isEditable:y,hasCover:f,isInSidePeek:b,openMenuOnMount:P,openMenuOnMountCallback:M}),Y?(0,oe.jsx)(o(441301).s,{store:K,context:l,disabled:m,isInSidePeek:b,titlePlaceholder:E,collectionContextStore:r,shouldShowTemplatePicker:V,onTitleChange:x,onTitleEditText:_,onTitleEsc:k,onTitleTab:w,onTitleUntab:I}):null]}),"visible"===ce.type?(0,oe.jsx)(ie,{disabled:!y,canEdit:t,locked:me,pageId:K.id,toggleStore:j,descriptionStore:ce.descriptionStore,collectionStore:ce.collectionStore,userSettingsStore:ce.currentUserSettingsStore,bottomMargin:ce.shouldHideBottomMargin?0:void 0}):null,(0,oe.jsx)(re().h,{store:K,context:l,layoutModule:void 0,disabled:m||"suggest"===N,wrapper:e=>(0,oe.jsx)(J().vV,{className:"layout-content-with-divider",style:{marginTop:4,paddingTop:4,marginBottom:12,paddingBottom:12},children:e})},K.id)]})]})]})}function pe(e){const{collectionViewDescriptionStore:t,context:o,controlHoverStyle:n,descriptionHasText:r,editorMode:s,headerFocusStore:a,isEditable:l,isInSidePeek:c,pageViewBlockStore:u,shouldShowDescription:g,store:m,titleStore:S,titleTextValue:v,topControls:f}=e,h=(0,d().Y0)(),y=(0,$().D1)(h),b=(0,p().K8)((()=>Boolean(m.getCollectionViewSourceDescriptionStore())),[m]),x=!y&&b,_=(0,i.useCallback)((e=>{const t=e.target;void 0!==t&&t instanceof HTMLElement&&(0,z().p)(t)&&a.setState(!0)}),[a]),k=(0,i.useCallback)((()=>{a.setState(!1)}),[a]);return(0,oe.jsx)("div",{className:c?W().S6D:void 0,children:(0,oe.jsxs)(Y().A,{store:m,context:o,onFocus:_,onBlur:k,children:[f,(0,oe.jsx)(ge,{controlHoverStyle:n,store:m,isEditable:l,titleStore:S,titleTextValue:v}),x?(0,oe.jsx)(me,{store:m,pageViewBlockStore:u,collectionViewDescriptionStore:t,descriptionHasText:r,controlHoverStyle:n,editorMode:s,shouldShowDescription:g,isEditable:l}):null]})})}function ge(e){const{store:t,isEditable:o,titleTextValue:n,titleStore:r,controlHoverStyle:s}=e,a=(0,d().v3)(),{isSmallPhone:l}=(0,d().Y0)(),c=(0,p().K8)((()=>t.hasSingleSourceAndNoLinkedCollections()),[t]),u=(0,p().K8)((()=>(t.getOwnedCollectionStores()??[]).length>0),[t]),g=(0,i.useCallback)((()=>{r&&((0,ae().I)({environment:a}),(0,ce().z)({store:r}))}),[r,a]);return u||c||!o||n?null:(0,oe.jsx)(H().p,{style:s,colorVariant:"tertiary",onClick:g,iconLeading:U().a,children:l?(0,oe.jsx)(I().sA,{id:"pageViewBlock.add.pageTitleMobile",defaultMessage:"Title"}):(0,oe.jsx)(I().sA,{id:"pageViewBlock.add.pageTitle",defaultMessage:"Add title"})},"add-title")}function me(e){const{collectionViewDescriptionStore:t,descriptionHasText:o,controlHoverStyle:r,editorMode:s,isEditable:a,pageViewBlockStore:l,shouldShowDescription:c,store:u}=e,p=(0,d().v3)(),{isSmallPhone:g}=(0,d().Y0)(),m=(0,i.useCallback)((()=>{Q().KM({environment:p,pageId:u.id,store:l,userSettingsStore:n().AppStoreCurrentUserSettingsStore.state,descriptionStore:t})}),[t,p,l,u.id]),S=(0,i.useCallback)((e=>{Q().JO({environment:p,pageId:u.id,store:l,userSettingsStore:n().AppStoreCurrentUserSettingsStore.state,descriptionStore:t})}),[p,u.id,l,t]),v=(0,i.useCallback)((()=>{S(!0)}),[S]),f=(0,i.useCallback)((()=>{S(!1)}),[S]);return c?(0,oe.jsx)(H().p,{colorVariant:"tertiary",style:r,onClick:f,iconLeading:{icon:N().infoCircleFillIcon,size:"xs",fitToViewBox:"all"},children:(0,oe.jsx)(I().sA,{defaultMessage:"Hide description",id:"pageViewBlock.hideDescription.button"})}):a&&"suggest"!==s&&!o?(0,oe.jsx)(H().p,{colorVariant:"tertiary",style:r,onClick:m,iconLeading:{icon:N().infoCircleFillIcon,size:"xs",fitToViewBox:"all"},children:g?(0,oe.jsx)(I().sA,{defaultMessage:"Description",id:"pageViewBlock.addDescription.mobileButton"}):(0,oe.jsx)(I().sA,{defaultMessage:"Add description",id:"pageViewBlock.addDescription.button"})}):o?(0,oe.jsx)(H().p,{colorVariant:"tertiary",style:r,onClick:v,iconLeading:{icon:N().infoCircleFillIcon,size:"xs",fitToViewBox:"all"},children:g?(0,oe.jsx)(I().sA,{defaultMessage:"Description",id:"pageViewBlock.showDescription.mobileButton"}):(0,oe.jsx)(I().sA,{defaultMessage:"Show description",id:"pageViewBlock.showDescription.button"})}):null}var Se=()=>o(908201),ve=()=>o(577814),fe=()=>o(661075),he=()=>o(477293);var ye=()=>o(79926);const be=new(ye().O2)("GenerateSocialMediaPreviewImageWrapper",(async()=>Promise.all([o.e(75134),o.e(35530),o.e(9773),o.e(36556),o.e(55373),o.e(36192),o.e(40537),o.e(71562),o.e(96346),o.e(44711),o.e(53321),o.e(51220),o.e(16471),o.e(37353),o.e(37571),o.e(29151),o.e(40118),o.e(50397),o.e(62475),o.e(3151),o.e(98629),o.e(22926),o.e(22900),o.e(42838),o.e(85128),o.e(49889),o.e(20108),o.e(46174),o.e(27992),o.e(63452),o.e(66249),o.e(92845),o.e(87249),o.e(79022),o.e(14578),o.e(34877),o.e(46414),o.e(11676),o.e(61165),o.e(47668),o.e(94522),o.e(24587),o.e(44584),o.e(67494),o.e(10522),o.e(38293),o.e(40992),o.e(88455),o.e(63515),o.e(33893),o.e(55162),o.e(91793),o.e(71003),o.e(32370),o.e(26264),o.e(97989),o.e(36437),o.e(93963),o.e(44590),o.e(7914),o.e(55113),o.e(85071),o.e(25588),o.e(6769),o.e(23640),o.e(72252),o.e(93134),o.e(12452),o.e(18825),o.e(52871),o.e(29351),o.e(22370),o.e(93049),o.e(22582),o.e(18636),o.e(87289),o.e(16060),o.e(16529),o.e(34281),o.e(35279),o.e(69785),o.e(77754),o.e(29357),o.e(64242),o.e(39986),o.e(22585),o.e(47160),o.e(76677),o.e(68609),o.e(37384),o.e(15553),o.e(77345),o.e(79340),o.e(72659),o.e(37759),o.e(41423),o.e(42056),o.e(41751),o.e(41714),o.e(5181),o.e(19456),o.e(3261),o.e(23371),o.e(17729),o.e(32116),o.e(65375),o.e(94995),o.e(98339),o.e(51240),o.e(54219),o.e(20029),o.e(68395),o.e(81803),o.e(96654),o.e(68643),o.e(32625),o.e(79231),o.e(63687),o.e(95885),o.e(27083),o.e(11424),o.e(40119),o.e(54742),o.e(88522),o.e(90880),o.e(49175),o.e(69668),o.e(5331),o.e(92924),o.e(71381),o.e(92192),o.e(96385),o.e(80326),o.e(53352),o.e(2373),o.e(73069),o.e(995),o.e(76690),o.e(60713),o.e(31106),o.e(63248),o.e(54719),o.e(48570),o.e(78862),o.e(54234),o.e(85160),o.e(15381),o.e(77149),o.e(86036),o.e(68466),o.e(77651),o.e(51204),o.e(57105),o.e(3759),o.e(44128),o.e(95103),o.e(58071),o.e(75681)]).then(o.bind(o,263814)))),xe=(0,ye()._h)(be,(e=>e.GenerateSocialMediaPreviewImageWrapper));var _e=()=>o(165121),ke=()=>o(964345),Ce=()=>o(135552),we=()=>o(747100),Ie=()=>o(470928),Pe=()=>o(891078),Me=(o(430670),()=>o(849255)),Ae=()=>o(187174),Te=()=>o(68263),Be=()=>o(798880),je=()=>o(763824),Ve=()=>o(381678),Ke=()=>o(271084),Ee=()=>o(482238);const Re=100;var De=()=>o(340498);const Le={viewBox:"0 0 16 16",fittedViewBox:"2.45 2.44 11.1 11.11",svg:(0,oe.jsx)("path",{d:"M3.74 2.45a1.29 1.29 0 0 0-1.29 1.29v8.52c0 .712.578 1.29 1.29 1.29h2.593a1.29 1.29 0 0 0 1.291-1.29V3.74a1.29 1.29 0 0 0-1.29-1.29zm5.927 0a1.29 1.29 0 0 0-1.291 1.29v2.593a1.29 1.29 0 0 0 1.29 1.291h2.593a1.29 1.29 0 0 0 1.29-1.29V3.74a1.29 1.29 0 0 0-1.29-1.291zm0 5.926a1.29 1.29 0 0 0-1.291 1.29v2.593a1.29 1.29 0 0 0 1.29 1.291h2.593a1.29 1.29 0 0 0 1.29-1.29V9.666a1.29 1.29 0 0 0-1.29-1.291z"})},Fe=(0,De().wt)("layoutFillSmall",Le,"fillSmall");function ze(e){const{style:t,onClick:o}=e;return(0,oe.jsx)(H().p,{style:t,colorVariant:"tertiary",onClick:o,iconLeading:{icon:Fe,size:"xs",fitToViewBox:"all"},children:(0,oe.jsx)(I().sA,{id:"pageViewBlock.customizeLayout",defaultMessage:"Customize layout"})},"customize-layout")}var Oe=()=>o(98126),We=()=>o(100622);function He(){const e=(0,O().IS)((()=>({wrapper:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",padding:16,marginTop:"12vh"},message:{fontSize:14,marginTop:8,color:We().Tj.text.secondary}})),[]);return(0,oe.jsxs)("div",{style:e.wrapper,children:[(0,oe.jsx)(Oe().k,{}),(0,oe.jsx)("div",{style:e.message,children:(0,oe.jsx)(I().sA,{defaultMessage:"Importing…",id:"frame.importingMessage"})})]})}o(354520),o(581454);var Ne=()=>o(250910),Ue=()=>o(546926),qe=()=>o(713998),Qe=()=>o(94701);const Ye={viewBox:"0 0 20 20",fittedViewBox:"2.37 3.13 15.25 14.86",svg:(0,oe.jsx)("path",{d:"M17.625 5.255A2.125 2.125 0 0 0 15.5 3.13h-11a2.125 2.125 0 0 0-2.125 2.125v7.5c0 1.173.951 2.125 2.125 2.125h1.188v2.482a.625.625 0 0 0 1.006.496l3.87-2.978H15.5a2.125 2.125 0 0 0 2.125-2.125zM5.95 7.505a.55.55 0 0 1 .55-.55h7a.55.55 0 0 1 0 1.1h-7a.55.55 0 0 1-.55-.55m.55 2.45h5a.55.55 0 0 1 0 1.1h-5a.55.55 0 1 1 0-1.1"})},Ge=(0,De().wt)("commentFilledFill",Ye,"fill");var Xe=()=>o(778781),$e=()=>o(222299),Je=()=>o(774733);const Ze=new(ye().O2)("floatingTableOfContents",(async()=>await o.e(52614).then(o.bind(o,612875)))),et=(0,ye()._h)(Ze,(e=>e.FloatingTableOfContents));var tt=()=>o(449195);o(16280);var ot=()=>o(299545),it=()=>o(25680),nt=()=>o(918487),rt=()=>o(661344),st=()=>o(601726),at=()=>o(257502),lt=()=>o(243991),ct=()=>o(483832),dt=()=>o(660197),ut=()=>o(295633),pt=()=>o(180762),gt=()=>o(712505),mt=()=>o(614949),St=()=>o(154807);function vt({pageStore:e,disabled:t,viewsModule:o,wrapper:n,templatePickerMenuListStore:r,editorContentContainerRef:s,viewsModuleCollectionContextStore:a,setViewsModuleCollectionContextStore:l}){const u=(0,d().v3)(),{collectionViewBlockStore:g,viewsModuleContext:m,isViewsMainModule:S}=(0,p().K8)((()=>{if(!o)return{collectionViewBlockStore:void 0,collectionViewId:void 0,viewsModuleContext:void 0,isViewsMainModule:!1};const t=ut().B.createChildStore(e,o.collection_view_block_pointer);return{collectionViewBlockStore:t,viewsModuleContext:{location:"page",viewsModule:o,currentPageStore:e,collectionViewBlockStore:t},isViewsMainModule:"viewsMain"===o.type}}),[e,o]);!function({isViewsMainModule:e,collectionViewBlockStore:t,environment:o,collectionContextStore:n}){const r=(0,p().K8)((()=>{if(!e||!t)return;const i=o.RouterStore.state.route;if("page"===i.name&&i.scrollToBlockId){var r;const e=t.getCollectionViewStores().find((e=>"page"===e.getType())),o=(null==n||null===(r=n.collectionViewStore())||void 0===r?void 0:r.id)===(null==e?void 0:e.id),i=null==n?void 0:n.isInPeekRendererStore.state,s=gt().default.state.open&&!(0,we().cq)(t);return o||i||s||null==e?void 0:e.id}}),[o,t,e,n]);(0,i.useEffect)((()=>{n&&r&&(0,pt().t)({environment:o,collectionContextStore:n,collectionViewId:r,isFullScreen:n.isFullScreenStore.state,isRootChild:n.isRootChildStore.state,isInPeekRenderer:n.isInPeekRendererStore.state})}),[o,r,t,e,n])}({isViewsMainModule:S,collectionViewBlockStore:g,environment:u,collectionContextStore:a});const v=function(e){const t=(0,d().v3)(),o=(0,i.useContext)(F().w);return(0,p().K8)((()=>{if(!e)return 0;const{device:i}=t,n=t.WindowSizeStore.state.width,r=Boolean(e&&(0,we().cq)(e));if(r){const e=(0,St().eO)({environment:t,isInPeek:!0});return gt().default.getPeekModeWidth(n)-o-e}const s=(0,le().zo)(t,r)-(0,le().Ql)(t);let a=n-o-s;if(!(0,le().tv)(t))return a;const{shouldShowSidebar:l}=(0,mt().X)(t);return c().A.isMobile&&!i.isTablet||!l||(a-=(0,le().kf)(t)),a}),[t,e,o])}(g),f=function({isViewsMainModule:e,collectionViewBlockStore:t,collectionContextStore:o}){return(0,p().K8)((()=>{if(!e||!o)return!1;const i=null==o?void 0:o.collectionViewStore();return 1===(null==t?void 0:t.getCollectionViewStores().length)&&"page"===(null==i?void 0:i.getType())&&!(null!=i&&i.getFormat().page_pointer)}),[e,o,t])}({isViewsMainModule:S,collectionViewBlockStore:g,collectionContextStore:a});return g&&m?n((0,oe.jsx)("div",{style:S?{minHeight:"60vh"}:void 0,children:(0,oe.jsx)(q().dN,{store:g,isFullScreen:!1,productUseCase:"page_views_module",hideViewTabBar:f,headerActionsBehavior:f?"hidden":"always_show",headerAllowedActions:ft,disabled:t,disableHoverMenu:!0,fullWidth:v,showOnlyCurrentView:!S,isUnlistedView:!1,viewsModuleContext:m,setCollectionContextStore:l,templatePickerMenuListStore:r,editorContentContainerRef:s})})):null}const ft=["filter","sort","search","addItem","emptyOrganizeBy","minimize"];var ht=()=>o(996262),yt=()=>o(9768);const bt=new(ye().O2)("PageLayoutModuleErrorFallback",(()=>o.e(98396).then(o.bind(o,100826)))),xt=(0,ye()._h)(bt,(e=>e.PageLayoutModuleErrorFallback));const _t=function(e){const{store:t,context:r,postContext:s,disabled:u,templatePickerMenuListStore:g,styleOverrides:m,onHeaderMouseEnter:S,onHeaderMouseLeave:v,pageCoverHeight:h,isEditable:b,getControlHoverStyle:x,pageViewBlockStores:_,pageViewBlockAccessor:k,onDetailMouseEnter:C,onDetailMouseLeave:w,modules:P,editorContentContainerRef:M,layoutRef:A,isHeaderHovered:B}=e,j=(0,d().v3)(),V=(0,p().K8)((()=>t.getAssociatedCollectionStore()),[t],{debugName:"PageLayoutModules(collectionStore).useComputedStore"}),[K,E]=(0,i.useState)(void 0),R=(0,p().K8)((()=>t.getSchema()),[t],{debugName:"PageLayoutModules(schema).useComputedStore"}),F=(0,p().K8)((()=>(0,ve().A)({environment:j,store:t,pageViewBlockStore:_.pageViewBlockStore})),[j,t,_.pageViewBlockStore]),z=(0,p().K8)((()=>{const e=(0,X().gV)(t);if(!e)return;return(e.collection_page_sections||[]).filter((e=>{const o=R[e.section];if(!o||"relation"!==o.type)return;const i=t.getPropertyValue(e.section),n=(0,qe().bG)({relationValue:(0,qe().n)(i),propertySchema:o,getRecordModel:t.getRecordModel,includeNoAccess:!0}).length;return"inline"===e.visibility&&R[e.section]&&0!==n})).map((e=>e.section))}),[R,t],{debugName:"PageLayoutModules(inlinePropertyIDs).useComputedStore"}),N=(0,O().IS)((()=>({bottomControls:{display:"flex",alignItems:"baseline",justifyContent:"flex-start",flexWrap:"wrap",color:We().Tj.text.tertiary,fontFamily:T().vc(f().locale).sans},detailsButton:{fontWeight:T().Wy.medium,color:We().Tj.text.secondary}})),[]),q=(0,p().K8)((()=>(null==m?void 0:m.paddingX)??(0,X().OU)(r,j)),[r,j,null==m?void 0:m.paddingX],{debugName:"PageLayoutModules(horizontalPadding).useComputedStore"}),Q=(0,p().K8)((()=>(0,ot().qE)(t,{recursivelyLoadAllDiscussions:!1}).comments),[t]),G=(0,p().K8)((()=>{const e=(0,X().gV)(t);if(!e)return;return(e.collection_page_sections||[]).filter((e=>{const o=R[e.section];if(!o||"relation"!==o.type)return;const i=t.getPropertyValue(e.section),n=(0,qe().bG)({relationValue:(0,qe().n)(i),propertySchema:o,getRecordModel:t.getRecordModel,includeNoAccess:!0}).length;return"minimal"===e.visibility&&R[e.section]||"inline"===e.visibility&&R[e.section]&&0===n})).map((e=>e.section))}),[R,t],{debugName:"PageLayoutModules(minimalPropertyIDs).useComputedStore"}),{value:J}=(0,ye().fJ)(Je().commentsDependency),{value:Z}=(0,ye().fJ)(o(650829).assistantDependency),ee=(0,p().K8)((()=>{var e;if(!Z)return!1;const o=Z.clientSkillHelpers.createClientGlobalSkill("fill_title");return 1===Z.assistantSurfaceValidators.filterAssistantSurfaceActionsForContext(Z.assistantSurfaceValidators.clientSkillToAssistantSurfaceAction([o]),{type:"entrypoint",entrypoint:"pageStart",pageStore:t,isMobile:c().A.isMobile,userSettings:null===(e=n().default.state.currentUserSettingsStore)||void 0===e?void 0:e.getSettings()}).length}),[Z,t]),te=(0,o(557198).RR)({pageStore:t}),ie=(0,X().L5)(r),ne=(0,$().D1)(j.device),re=(0,p().K8)((()=>{if(e.context===y().R.DraftPostInInlineComposer||e.context===y().R.WorkflowInstructionsInInlineComposer)return{bottomControls:[]};const n=async()=>{await(0,o(182034).O)({blockStore:t,pageViewBlockStore:_.pageViewBlockStore,environment:j})},r=async()=>{const{assistantDependency:e}=await Promise.resolve().then(o.bind(o,650829)),i=t.getTitleStore();if(!i)return;const n=await e.load();(0,ce().z)({store:i}),n.executeAssistantSkillAction({environment:j,clientSkillWithParameterValues:n.clientSkillHelpers.dangerouslyCreateClientSkillWithParameterValues(n.clientSkillHelpers.createClientGlobalSkill("fill_title")),from:"block_action_menu",assistantSurfaceType:c().A.isMobile?"mobileWriter":"writer"})};try{let s=[],a=[];const l=()=>{if("section_hide"!==(0,tt().Rn)())return Q>0?(0,oe.jsx)(H().p,{colorPalette:"gray",onClick:()=>{"PageDetailsStore"in j&&j.PageDetailsStore.setToggleState({environment:j,type:"discussion",id:t.id},!0)},iconLeading:{icon:Ge,size:"xs",fitToViewBox:"all"},style:N.detailsButton,children:(0,oe.jsx)(I().sA,{id:"pageViewBlock.show.pageComments",defaultMessage:"{numberOfComments, plural, one {{numberOfComments} comment} other {{numberOfComments} comments}}",values:{numberOfComments:Q}})},"showcomments"):void 0},d=()=>{if(!V)return;const e=(0,X().gV)(t),i=(0,se().S)(t);if(!e)return;const n=G;return n&&n.length?(0,oe.jsx)(o(377157).A,{propertyIds:n,store:t,collectionStore:V,disabled:u,locked:i,blockPropertyValueOverlayStore:ie?L().A:D().A,format:e,type:"minimal"}):void 0},p=()=>{const e=(0,ot().hq)(t,{recursivelyLoadAllDiscussions:!1});if(0===e.length)return;const i=(0,oe.jsx)(I().sA,{id:"pageViewBlock.showResolvedComments.button",defaultMessage:"{numberOfResolvedComments, plural, one {{numberOfResolvedComments} resolved comment} other {{numberOfResolvedComments} resolved comments}}",values:{numberOfResolvedComments:e.length}});return(0,le().Nk)(j)?(0,oe.jsx)(H().p,{iconLeading:Qe().checkmarkFillIcon,colorPalette:"gray",style:N.detailsButton,onClick:()=>{o(182641).B4({environment:j,blockStore:t,analyticsFrom:"page_comments",shouldFocusDiscussion:!0,recursivelyLoadAllDiscussions:!1,discussionIds:e.map((e=>e.id))})},children:i}):(0,oe.jsx)(Ne().A,{buttonPopupStore:_.resolvedDiscussionButtonPopupStore,popupType:c().A.isMobile?Ne().z.SlideUp:Ne().z.Popup,renderOrigin:e=>(0,oe.jsx)(H().p,{iconLeading:Qe().checkmarkFillIcon,colorPalette:"gray",style:N.detailsButton,...e,children:i}),render:i=>{let n;return n=c().A.isMobile?{menuType:Ue().gu.Modal,title:(0,oe.jsx)(I().sA,{defaultMessage:"Resolved comments",id:"pageViewBlock.resolvedComments.menuTabTitle"}),right:(0,oe.jsx)(I().sA,{...o(245720).W.done}),onClickRight:i.close,whiteBackground:!0}:{menuType:Ue().gu.Popup,width:500},(0,oe.jsx)(o(890492).A,{...n,children:e.map(((e,n,r)=>(0,oe.jsx)(o(151838).A,{store:e,droppable:!0,render:()=>J?(0,oe.jsx)(Je().PW,{store:e,format:J.discussionHelpers.DiscussionFormat.Menu,isFirst:0===n,isOnly:1===r.length,discussionLocation:"page_discussion",showResolveButtonByDefaultIfPossible:!0,blockStore:t,onDismiss:i.close},e.id):null},e.id)))})}},"resolve-discussions")},g=e=>{const t=[],o="hidden"===e.type,n=o&&l();n&&t.push((0,oe.jsx)(i.Fragment,{children:n},"discussions"));const r=p();r&&!o&&t.unshift((0,oe.jsx)(i.Fragment,{children:r},"resolveddiscussions"));const s=d();return s&&t.push((0,oe.jsx)(i.Fragment,{children:s},"minimalpagesections")),t};s=g(F);return{headerControls:ne?void 0:(()=>{if(a=[...e.topControls],"always"===te||"onHover"===te){const e={isBottomControl:!1,..."always"===te?{forceVisible:!0}:{}};a.unshift((0,oe.jsx)(i.Fragment,{children:(0,oe.jsx)(o(678834).y,{pageStore:t,backlinksButtonPopupStore:_.backlinksButtonPopupStore,isButtonVisible:B||"always"===te,customization:{buttonStyles:x(e)}})},"backlinks"))}var s;return"section_hide"===(0,tt().Rn)(t)||t.isCollectionView()||t.isInsideCollection()||Q>0||!t.canComment()||!j.currentUser.isLoggedIn()||_.pageViewBlockStore.state.forceDiscussionOpen||t.pathIsDead()||t.isTeamPost()||u||a.push((s={isBottomControl:!1},(0,oe.jsx)(H().p,{style:x({isBottomControl:s.isBottomControl}),colorVariant:"tertiary",onClick:n,iconLeading:{icon:Ge,size:"xs",fitToViewBox:"all"},children:j.device.isSmallPhone?(0,oe.jsx)(I().sA,{id:"pageViewBlock.add.pageCommentMobile",defaultMessage:"Comment"}):(0,oe.jsx)(I().sA,{id:"pageViewBlock.add.pageComment",defaultMessage:"Add comment"})},"addcomment"))),ee&&a.push((0,oe.jsx)(H().p,{style:x({isBottomControl:!1}),colorPalette:"blue",onClick:r,iconLeading:U().a,children:(0,oe.jsx)(I().sA,{id:"pageViewBlock.add.fillTitle",defaultMessage:"Fill page title"})},"fill-title")),(0,oe.jsx)("div",{className:ie?W().S6D:void 0,children:(0,oe.jsx)(Y().A,{store:t,context:e.context,children:a})})})(),bottomControls:s}}catch(s){return{bottomControls:[]}}}),[e.context,e.topControls,t,_.pageViewBlockStore,_.resolvedDiscussionButtonPopupStore,_.backlinksButtonPopupStore,j,x,Q,u,ne,F,te,ee,ie,N.detailsButton,V,G,J,B],{debugName:"PageLayoutModules(headerAndBottomControlsStore).useComputedStore",silenceRerenderDefender:!0});return(0,oe.jsxs)(l().A,{name:"PageLayoutModules",children:[(0,oe.jsx)(a().s,{style:{display:"contents"},allowSelectionWithin:!1,children:(0,oe.jsx)(et,{store:t,viewsModuleCollectionContextStore:K})}),P.map((i=>(0,oe.jsx)(o(911396).S,{from:`PageLayout.${i.type}`,fallback:({error:e,errorId:t})=>(0,oe.jsx)(xt,{error:e,errorId:t,type:i.type}),getParentEl:()=>A.current,children:(0,oe.jsx)(kt,{editorContentContainerRef:M,module:i,context:r,postContext:s,pageViewBlockStore:_.pageViewBlockStore,disabled:u,environment:j,bottomControls:re.bottomControls,headerControls:re.headerControls,horizontalPadding:q,inlinePropertyIDs:z,isEditable:b,isInPeek:ie,isHeaderHovered:B,onDetailMouseEnter:C,onDetailMouseLeave:w,onHeaderMouseEnter:S,onHeaderMouseLeave:v,pageCoverHeight:h,pageViewBlockAccessor:k,headerFocusStore:_.headerFocusStore,store:t,collectionStore:V,collectionSchema:R,bottomControlsStyle:N.bottomControls,templatePickerMenuListStore:g,pageTitleWithIconProps:e,modules:P,pageDiscussionsRenderState:F,viewsModuleCollectionContextStore:K,setViewsModuleCollectionContextStore:E})},i.id)))]})};function kt(e){const{module:t,modules:o,context:i,postContext:n,disabled:r,environment:s,bottomControls:d,headerControls:u,horizontalPadding:g,inlinePropertyIDs:m,isEditable:S,isInPeek:v,onDetailMouseEnter:f,onDetailMouseLeave:h,onHeaderMouseEnter:b,onHeaderMouseLeave:x,pageCoverHeight:_,pageViewBlockAccessor:k,headerFocusStore:C,store:w,collectionStore:I,collectionSchema:P,bottomControlsStyle:M,templatePickerMenuListStore:A,pageTitleWithIconProps:T,pageDiscussionsRenderState:B,editorContentContainerRef:j,viewsModuleCollectionContextStore:V,setViewsModuleCollectionContextStore:K}=e,{pageVisitStore:E,presenceStore:R}=(0,it().S)({store:w,environment:s,postContext:n}),D=(0,p().K8)((()=>!!I&&(0,nt().v)({collectionStore:I,module:t,isMobile:c().A.isMobile})),[I,t]),L="page_main",F=(0,yt().Jh)({layoutModule:t,area:L,collectionSchema:P,collectionStore:I,showDetailsPanelToggleButtonBelowTitle:D,modules:o,context:i,postContext:n}),z=(0,yt().Br)({layoutModule:t,area:L,collectionSchema:P,collectionStore:I,pageMainModules:o,showDetailsPanelToggleButtonBelowTitle:D});return(0,oe.jsx)(l().A,{name:"PageLayoutModule",children:(()=>{if((0,Xe().gx)(t))return(0,oe.jsx)(ct().v,{context:i,disabled:r,propertyId:t.propertyId,store:w,pageModule:t,wrapper:F,stackPropertyLabelAndValue:!0});switch(t.type){case"cover":return i===y().R.WorkflowInstructionsInInlineComposer?null:(0,oe.jsx)(st().f,{store:w,isEditable:S,paddingX:g,pageCoverHeight:_,onMouseEnter:b,onMouseLeave:x,isInPeek:v});case"normalizedTitleWithIcon":return i===y().R.WorkflowInstructionsInInlineComposer?null:F((0,oe.jsx)(dt().H,{handleHeaderMouseEnter:b,handleHeaderMouseLeave:x,headerControls:u,headerFocusStore:C,layoutModule:t,viewsModuleCollectionContextStore:V,...T}));case"properties":return(0,oe.jsx)(re().h,{context:i,disabled:r,store:w,layoutModule:t,customization:{neverShowPropertiesElsewhereInLayout:!0,disableContainerPadding:!0},wrapper:F,showDefaultTitle:z});case"inlinePageSections":return(0,oe.jsx)(rt().LG,{context:i,disabled:r,inlinePropertyIDs:m,store:w,wrapper:F});case"expandedBacklinks":case"transcript":case"formTitle":case"formQuestion":case"formSubmit":case"placeholder":case"deleted_property":case"recentActivity":case"collaborators":case"teamspaces":return null;case"discussions":return n===y().R.DraftPostInInlineComposer||n===y().R.DraftPostInFullPageComposer||i===y().R.WorkflowInstructionsInInlineComposer?null:n===y().R.PostInFullPageOrPeek?(0,oe.jsx)(at().d,{store:w,wrapper:F,showDefaultTitle:!1,discussionLocation:"feed_item_top_level_discussion",pageDiscussionsRenderState:B,presenceStore:R,pageVisitStore:E}):(0,oe.jsx)(at().d,{store:w,wrapper:F,showDefaultTitle:z,discussionLocation:"page_discussion",pageDiscussionsRenderState:B});case"bottomControls":return 0===d.length?null:F((0,oe.jsx)(a().s,{allowSelectionWithin:!0,children:(0,oe.jsx)("div",{style:M,className:"notion-page-details-controls",onMouseEnter:f,onMouseLeave:h,children:d})}));case"editor":return(0,oe.jsx)(lt().p,{context:i,disabled:r,handlePlaceholderWrapClick:e=>$e().YB(e,w,s),pageBlockStore:w,pathToBlockId:t.pathToBlockId,templatePickerMenuListStore:A,pageViewBlockAccessor:k,ref:j,editorWrapper:i===y().R.DraftPostInInlineComposer||i===y().R.WorkflowInstructionsInInlineComposer?void 0:F});case"viewsMain":case"views":return(0,oe.jsx)(vt,{pageStore:w,disabled:r,viewsModule:t,wrapper:F,templatePickerMenuListStore:A,editorContentContainerRef:j,viewsModuleCollectionContextStore:V,setViewsModuleCollectionContextStore:K});case"relationsGroup":return(0,oe.jsx)(ht().z,{pageStore:w,wrapper:F,disabled:r,context:i,showDefaultTitle:z})}})()})}var Ct=()=>o(562984);var wt=()=>o(696746),It=()=>o(106628),Pt=()=>o(518489),Mt=()=>o(497597),At=()=>o(206051),Tt=()=>o(746426),Bt=()=>o(67805);var jt=()=>o(150193),Vt=()=>o(612587);const Kt=T().vc(f().locale).sans,Et={serif:T().vc(f().locale).serif,mono:T().vc(f().locale).mono,comic:T().vc(f().locale).comic},Rt={serif:1.6,mono:1.6},Dt={serif:0,mono:.055},Lt={serif:15,mono:14},Ft={serif:17,mono:15},zt={width:"100%",display:"flex",flexDirection:"column",position:"relative",alignItems:"center",flexGrow:1},Ot=14,Wt=16;function Ht(e,t){var f,M;const T=(0,i.useRef)();T.current=performance.now();const{store:D,context:L,disabled:F,onTitleEsc:z,styleOverrides:O,disableTopControls:W}=e,H=(0,p().K8)((()=>{var e;return null===(e=D.getSpaceStore())||void 0===e?void 0:e.getFreezeSettings()}),[D]),N=(0,o(973454).p)(H),U=F||"active"===N,q=(0,d().v3)(),Q=(0,o(664594).T)(),Y=(0,d().Y0)(),G=(0,u().S)(),Z=(0,Pe().bx)(D,U),ie=(0,Pe().HX)(D,U),ne=(0,p().K8)((()=>D.isReady()&&ie&&!(0,se().S)(D)&&!(0,X().sV)(D)&&!(0,X().fc)(D)),[ie,D]),re=(0,p().O$)(o(929219).e),le=(0,p().K8)((()=>D.isCollectionView()),[D]),ue=(0,p().K8)((()=>Boolean((0,o(851941).X2)(D.id))?"v8":"v4"),[D]),pe=(0,p().K8)((()=>"workflow"===D.getType()),[D]),ge=(0,p().K8)((()=>D.isPeopleCollectionViewPage()),[D])?"people_collection":"full_page",me=(0,p().K8)((()=>{const e=D.getAssociatedCollectionStore(),t=null==e?void 0:e.getLayoutStore();return Boolean(t)}),[D]);!function(e,t){const o=(0,r().X)("prefetch_extended_user_profiles"),n=(0,ye().fJ)(Ct().u.extendedUserProfileActions,{disabled:!o});(0,i.useEffect)((()=>{o&&e&&n.value&&n.value.prefetchMentionedUserProfiles(e,t)}),[o,e,t,n.value])}(D,q);const be=(0,o(551619).no)(D),De=(0,i.useMemo)((()=>({layout:{translateX:-be},layoutFull:{translateX:be}})),[be]),Le=(0,p().K8)((()=>v().Store.createValue(!1,{name:"headerFocusStore"})),[]),Fe=(0,p().O$)(Le),{isInPeek:Oe,isInsideSidePeek:We}=(0,p().K8)((()=>({isInPeek:(0,we().cq)(D),isInsideSidePeek:(0,X().mb)(D)})),[D]),Ne=(0,i.useMemo)((()=>new(o(511562).A)),[]),Ue=(0,i.useMemo)((()=>new(_().A)),[]),qe=(0,i.useMemo)((()=>new(_().A)),[]),Qe=(0,i.useMemo)((()=>new(o(452004).$)),[]),Ye=(0,p().K8)((()=>v().Store.createValue(!1,{name:"forceControlHoverVisibleStore"})),[]),Ge=(0,p().O$)(Ye),Xe=(0,i.useMemo)((()=>({headerFocusStore:Le,pageViewBlockStore:Ne,resolvedDiscussionButtonPopupStore:Ue,backlinksButtonPopupStore:qe,templatePickerMenuListStore:Qe,forceControlHoverVisibleStore:Ye})),[Le,Ne,Ue,qe,Qe,Ye]),[$e,Je]=(0,i.useState)(!1),[Ze,et]=(0,i.useState)(!1),[tt,ot]=(0,i.useState)(""),it=(0,i.useCallback)((()=>{Ue.setState({open:!0}),Ne.setState({...Ne.state,forceDiscussionOpen:!0})}),[Ne,Ue]),nt=(0,i.useCallback)((()=>{const e=at.current;if(e){if(function(e){if(!e.isIOS)return!1;return!0}(Y))return{paddingLeft:0,paddingRight:0};const t=getComputedStyle(e),o=parseFloat(t.getPropertyValue("padding-left")),i=parseFloat(t.getPropertyValue("padding-right"));return{paddingLeft:P().yr(o)?0:o,paddingRight:P().yr(i)?0:i}}}),[Y]),rt=(0,i.useCallback)((()=>{const e=at.current;if(e){const t=e.getBoundingClientRect().width,o=nt()??{paddingLeft:0,paddingRight:0};return t-o.paddingLeft-o.paddingRight}}),[nt]),at=(0,i.useRef)(null),lt=(0,i.useRef)(null),ct=(0,i.useRef)(null),dt=(0,i.useCallback)((()=>at.current),[]),ut=(0,i.useCallback)((()=>lt.current),[]),pt=(0,i.useMemo)((()=>new(o(609837).B)(q)),[]);(0,o(790748).b)(o(961232).A,(()=>({store:D,blockContext:L,openResolvedDiscussionPopup:it,getContentInnerWidth:rt,getContentWrapEl:dt,getLayoutEl:ut,collectionContextStore:pt,headerFocusStore:Le,pageViewBlockStore:Ne,resolvedDiscussionButtonPopupStore:Ue,backlinksButtonPopupStore:qe,templatePickerMenuListStore:Qe,forceControlHoverVisibleStore:Ye,headerMouseStore:void 0,renderedType:"page",getBlockStore:()=>D,getNode:()=>ct.current})),[D,L,it,rt,nt,dt,ut,pt,Xe]);const mt=(0,i.useRef)(!1),St=(0,p().K8)((()=>D.getTitleStore()),[D]),vt=(0,p().K8)((()=>D.isInsideFactoryOrDuplicateBlocksAction()),[D]),ft=(0,p().K8)((()=>{var e;const t=n().default.state.sidebarSpaceViewStore,o=null==t||null===(e=t.getSettings())||void 0===e?void 0:e.agent_personalization_settings;return(null==o?void 0:o.context_page_id)===D.id}),[D]),ht=(0,p().K8)((()=>{var e,t;const o=n().default.state.sidebarSpaceViewStore,i=null==o||null===(e=o.getSettings())||void 0===e?void 0:e.agent_personalization_settings;return(null==i||null===(t=i.daily_brief_prompt)||void 0===t?void 0:t.page_id)===D.id}),[D]),yt=(0,p().K8)((()=>{var e,t;if(D.getParentTable()!==o(743246).C0)return!1;const i=D.getParentStore();if(!(i instanceof o(350013).N))return!1;const n=null===(e=i.getData())||void 0===e?void 0:e.instructions,r=null===(t=i.getDraftData())||void 0===t?void 0:t.instructions,s=(0,w().ap)(n)&&n.id===D.id,a=(0,w().ap)(r)&&r.id===D.id;return s||a}),[D]),bt=(0,p().K8)((()=>{const e=x().A.state.publicPageData;return Boolean(null==e?void 0:e.isDLSViewer)}),[]),xt=(0,$().D1)(Y),kt=(0,i.useCallback)((()=>!!St&&(!!e.forceSelectTitleOnMount||!le&&(!(c().A.isMobile&&Y.isPhone&&o(960955).A.hasOpenMobileSlideUps())&&(!C().q4_(St.getValue())||(0,X().In)(D)&&!c().A.isMobile)))),[Y.isPhone,le,e.forceSelectTitleOnMount,D,St]),wt=(0,p().K8)((()=>D.isFormBlock()),[D]),[At,jt]=(0,p().K8)((()=>[Boolean(D.getIcon()),Boolean(D.getCover())]),[D]),Vt=(0,p().K8)((()=>j().i({userId:Q,spaceId:D.getSpaceId(),debugFrom:"PageViewBlockFC"})),[Q,D]);!function(){const e=(0,d().v3)(),t=(0,p().O$)(n().AppStoreSidebarSpaceStore),o=(0,p().K8)((()=>(0,Ve()._)(e)),[e]),i=(0,p().K8)((()=>{const{spaceId:e,userId:i}=Ee().Ay.state.emptyQueryUserRequestStore.state.request??{};return(null==t?void 0:t.id)!==e||(null==o?void 0:o.id)!==i}),[t,o]);(0,Ae().Yb)((async()=>{if(!t||!i)return;if(!j().i({userId:null==o?void 0:o.id,spaceId:null==t?void 0:t.id,debugFrom:"useHydrateUsersMentionMenuEmptyState"}))return;Ee().Ay.state.emptyQueryUserRequestStore.setState({...Ee().Ay.state.emptyQueryUserRequestStore.state,ready:!1,loading:!0}),await Ke().k.waitUntilLoaded();const e=Ke().k.getSortedUserIds(),r=n().default.state.mainEditorCurrentBlockStore,s=r?(0,ee().i0)(r).flatMap((({permissionItem:e})=>(0,Te().B2)(e)?[e.user_id]:[])):[],a=(0,P().sb)([...(0,P().oE)([null==o?void 0:o.id]),...e,...s]),l=(0,je().lX)(a.slice(0,Re),Re,(async e=>{if(e===(null==o?void 0:o.id))return null==o?void 0:o.getValue();const i=Me().L.createChildStore(t,{table:Be().oo,id:e});return await i.load(),i.getValue()})),c=await l;Ee().Ay.state.emptyQueryUserRequestStore.setState({ready:!0,loading:!1,result:(0,P().oE)(c),request:{spaceId:t.id,userId:(null==o?void 0:o.id)??""}})}),[t,o,i])}(),(0,i.useEffect)((()=>{if(async function(e){const{environment:t,shouldUseEdgeCache:o,pageContext:i}=e;o||Ee().Ay.state.emptyQueryUserRequestStore.setState({...Ee().Ay.state.emptyQueryUserRequestStore.state,ready:!1,loading:!0});await n().default.waitUntil((()=>Boolean((0,h().$)(i)&&n().default.state.mainEditorCurrentBlockStore)));const r=await It().T.searchActions.load(),s=await r.searchVisibleSpaceUsers({environment:t,query:"",membersOnly:!1,minFuzzyScore:25,placeSelfFirst:!1});o||Ee().Ay.state.emptyQueryUserRequestStore.setState({ready:!0,loading:!1,result:s})}({environment:q,shouldUseEdgeCache:Vt,pageContext:G}),(0,o(93988).y)(),Y.isPhone&&!xt){const{PageScroller:e}=o(779315).A;if(e){const t=e.getNode();if(t&&Z&&!jt){const e=Zt(L,Y);t.scrollTo({top:e})}}}var e;St&&kt()&&((0,Pt().h)({environment:q,store:D}),(0,ce().z)({store:St}),Y.isAndroid&&Y.isMobileNative&&(null===(e=q.mobileNative)||void 0===e||e.forceKeyboardVisibility(!0)));if(K().updateMetricDataWithIsPushTag(q),L!==y().R.Frame||le||wt||(T.current&&o(606932).A.markPageViewBlockRender(T.current),K().measurePageRenderMetrics({environment:q,isEditable:ne,isHomePage:!1,isWikiHome:!1,isPageWithCustomLayout:me,idSchema:ue}),function(e,t,o){var i;$t(e,t,o)&&(null===(i=t.mobileNative)||void 0===i||i.markTransitionReady({environment:t,type:"new_page",id:e.id,sendImmediately:!0}))}(D,q,Y)),pt){const e=(0,o(390650).kz)(pt);o(711339).default.DO_NOT_USE_measureLegacy("collections.open_item_page_lag",{environment:q,data:{...e,peek_mode:gt().default.getPeekMode()}})}}),[]);const Kt=(0,p().K8)((()=>o(273606).u.state.areAllBlocksRendered),[]),Et=(0,i.useRef)(!1);(0,i.useEffect)((()=>{L!==y().R.Frame||le||wt||Kt&&!Et.current&&(K().measureRenderedBlocks(q,D.id),Et.current=!0)}),[Kt,L,q,le,wt,D.id]);const Rt=(0,p().K8)((()=>D.getFormat()),[D]),Dt=(0,p().K8)((()=>{var e;return null===(e=te().Uv.getStateForBlock(D.id))||void 0===e?void 0:e.mode}),[D.id]),Lt=(0,p().K8)((()=>{var e;const t=ke().ei.state,o=(0,A().O9)(t)&&(null===(e=(0,b().N)(t))||void 0===e?void 0:e.id)===D.id;return ke().gZ.state&&o&&"disconnected"===_e().A.state}),[D.id]),Ft=(0,p().K8)((()=>{var e;const t=ke().ei.state,o=(0,A().O9)(t)&&(null===(e=(0,b().N)(t))||void 0===e?void 0:e.id)===D.id;return ke().gZ.state&&o&&"transcription_service_unavailable"===_e().A.state}),[D.id]),Ot=(0,p().K8)((()=>{var e;return(0,o(688610).z)(D)||Boolean(null===(e=x().A.state.publicPageData)||void 0===e?void 0:e.isDeleted)&&(0,X().jN)(L)}),[D,L]),Wt=(0,p().K8)((()=>null==G?void 0:G.publicEditModeStore.state),[null==G?void 0:G.publicEditModeStore]),Ht="on"===(0,he().r)("better_template_indicators"),Nt=(0,p().K8)((()=>D.isTemplate()?D:Ht?D.getNearestAncestorTemplateStore():void 0),[D,Ht]),qt=Boolean(Nt),oo=(0,p().K8)((()=>D.isDraft()),[D]),io=(0,r().X)("feed_sidebar_item"),no=(0,r().X)("can_create_pages_in_collection_permission"),ro=(0,p().K8)((()=>{const e=to(),t=gt().default.state.mode===o(868840).O&&"posts"===q.RouterStore.state.route.name;return io?t:e}),[q,io]),so=function(e,t){const o=(0,p().K8)((()=>(0,Bt().c)({environment:e,store:t})),[e,t]),n=(0,Tt().J)(e,t,o);return(0,i.useMemo)((()=>{if(o&&"pending"!==n.status)return n.templateListingExists&&n.template?{type:"marketplace_template",template:n.template}:{type:"sites"}}),[o,n])}(q,D),ao=function(e){const t="control"!==(0,he().r)("adoption_custom_workspace_getting_started_page",{disableExposureLogging:!0}),o=(0,p().K8)((()=>{const t=e.getSpaceStore();return null!=t&&t.isDefined()?t:void 0}),[e]),i=(0,p().K8)((()=>{var e;return void 0!==(null===(e=n().default.state.sidebarSpaceViewStore)||void 0===e||null===(e=e.getSettings())||void 0===e?void 0:e.set_custom_getting_started_page_banner_dismissed_at)}),[]),{canAdmin:r,isMultiplayer:s}=(0,p().K8)((()=>o?{canAdmin:o.canAdmin(),isMultiplayer:(o.getMemberCountFromPublicSpaceData()??1)>1}:{canAdmin:!1,isMultiplayer:!1}),[o]),a=(0,p().K8)((()=>{var t;return(null===(t=n().default.state.sidebarSpaceViewStore)||void 0===t||null===(t=t.getSettings())||void 0===t||null===(t=t.getting_started_page_ids)||void 0===t?void 0:t[0])===e.id}),[e]),l=(0,p().K8)((()=>{var e;if(o)return null===(e=o.getSettings())||void 0===e||null===(e=e.getting_started_templates)||void 0===e||null===(e=e.default)||void 0===e||null===(e=e[0])||void 0===e?void 0:e.page_id}),[o]),c=(0,p().K8)((()=>l===e.id),[l,e]);if(!i&&r&&t)return a&&s&&void 0===l?{type:"own_page"}:c?{type:"custom_page"}:void 0}(D),lo=(0,p().K8)((()=>o(242422).default.getConfigKey("collection_size_limits","block_properties_max_size")),[]);(0,i.useEffect)((()=>{if(L===y().R.Frame){const e=Xt(L);null==Wt||!Wt.hasPublicPermission||"edit"!==Wt.permission||qt||(0,o(326589).g)()?B().zA({bannerStore:e,id:"EditingPageBanner"}):B().HQ({bannerStore:e,id:"EditingPageBanner",contentKey:"editing_page",styleKey:Ce().q.White})}if((0,X().Zz)(L)){const e=Xt(L),t=(0,o(309533).G)(D),i=(0,o(494903).C)(D),n=(0,Ie().i1)(D);if((0,o(322769).vW)(t))B().HQ({bannerStore:e,id:"SpaceContentDuplicationPage",contentKey:"space_content_duplication",styleKey:Ce().q.Red,blockStore:D});else if(!Ot||wt||$t(D,q,Y))if(i)B().HQ({bannerStore:e,id:"ArchivedTeamPage",contentKey:"page_in_archived_team",styleKey:Ce().q.Red});else if("archived"===n.type)B().HQ({bannerStore:e,id:"ArchivedPage",contentKey:"archived_page",blockStore:D,styleKey:Ce().q.Yellow});else for(const o of["SpaceContentDuplicationPage","DeletedPage","ArchivedTeamPage","ArchivedPage"])B().zA({bannerStore:e,id:o});else B().HQ({bannerStore:e,id:"DeletedPage",contentKey:"deleted_or_moved_page",blockStore:D,styleKey:Ce().q.Red});oo&&ro?B().HQ({bannerStore:e,id:"DraftPostInExpandedFeedComposerBanner",contentKey:"draft_post_in_expanded_feed_composer",styleKey:Ce().q.Blue,blockStore:D}):B().zA({bannerStore:e,id:"DraftPostInExpandedFeedComposerBanner"}),Lt?B().HQ({bannerStore:e,id:"DictationConnectionBanner",styleKey:Ce().q.Yellow,contentKey:"dictation_connection",blockStore:D}):B().zA({bannerStore:e,id:"DictationConnectionBanner"}),Ft?B().HQ({bannerStore:e,id:"TranscriptionServiceUnavailableBanner",styleKey:Ce().q.Yellow,contentKey:"transcription_service_unavailable",blockStore:D}):B().zA({bannerStore:e,id:"TranscriptionServiceUnavailableBanner"}),Dt&&(0,te().Or)(Dt)?B().HQ({bannerStore:e,id:"TranslateBanner",styleKey:Ce().q.Blue,contentKey:"translate",blockStore:D}):B().zA({bannerStore:e,id:"TranslateBanner"}),bt&&!(0,we().cq)(D)?B().HQ({bannerStore:e,id:"TrustedDomainPageBanner",styleKey:Ce().q.LightGray,contentKey:"trusted_domain_page",blockStore:D}):B().zA({bannerStore:e,id:"TrustedDomainPageBanner"}),Nt?B().HQ({bannerStore:e,id:"CollectionTemplatePage",contentKey:"template_in_page",styleKey:Ce().q.Beige,blockStore:Nt,context:L,disabled:U}):vt?B().HQ({bannerStore:e,id:"CollectionTemplatePage",contentKey:"template_in_button",styleKey:Ce().q.Beige,blockStore:D,context:L,disabled:U}):B().zA({bannerStore:e,id:"CollectionTemplatePage"}),ft?B().HQ({bannerStore:e,id:"AgentProfilePage",contentKey:"agent_profile_page",styleKey:Ce().q.Purple,blockStore:D,context:L,disabled:U}):ht?B().HQ({bannerStore:e,id:"DailyBriefPage",contentKey:"daily_brief_page",styleKey:Ce().q.Purple,blockStore:D,context:L,disabled:U}):(B().zA({bannerStore:e,id:"AgentProfilePage"}),B().zA({bannerStore:e,id:"DailyBriefPage"})),yt&&B().HQ({bannerStore:e,id:"CustomAgentInstructionsPage",contentKey:"custom_agent_instructions_page",styleKey:Ce().q.Purple,blockStore:D,context:L,disabled:U}),(null!=Rt&&Rt.is_asana_imported_project||null!=Rt&&Rt.is_asana_imported_task)&&(null!=Rt&&Rt.dismissed_asana_import_banner?B().zA({bannerStore:e,id:"AsanaImporterBanner"}):B().HQ({bannerStore:e,id:"AsanaImporterBanner",contentKey:"asana_importer_banner",blockStore:D,styleKey:Ce().q.ImportNotification})),"sites"===(null==so?void 0:so.type)?B().HQ({id:"Site",bannerStore:e,styleKey:Ce().q.Blue,contentKey:"site",blockStore:D}):"marketplace_template"===(null==so?void 0:so.type)?B().HQ({id:"MarketplaceTemplateBanner",bannerStore:e,styleKey:Ce().q.Blue,contentKey:"marketplace_template",template:so.template,blockStore:D}):(B().zA({bannerStore:e,id:"Site"}),B().zA({bannerStore:e,id:"MarketplaceTemplateBanner"})),"custom_page"===(null==ao?void 0:ao.type)?B().HQ({id:"CustomGettingStartedPageBanner",bannerStore:e,styleKey:Ce().q.LightGray,contentKey:"custom_getting_started_page_banner",blockStore:D}):"own_page"===(null==ao?void 0:ao.type)?B().HQ({id:"SetCustomGettingStartedPageBanner",bannerStore:e,styleKey:Ce().q.LightGray,contentKey:"set_custom_getting_started_page_banner",blockStore:D}):(B().zA({bannerStore:e,id:"CustomGettingStartedPageBanner"}),B().zA({bannerStore:e,id:"SetCustomGettingStartedPageBanner"}));if((0,X().f1)(D)&&pt){const t=pt.collectionStore();if(!t)return;if((0,fe().fo)({collectionStore:t})&&(0,fe().z9)({collectionStore:t})){const i=(0,o(838434).j)({collectionFormat:t.getFormat()});i.shouldShowBanner&&B().HQ({bannerStore:e,id:i.bannerId,contentKey:i.contentKey,styleKey:i.styleKey,blockStore:D})}}void 0!==lo&&lo>0&&o(551706).xZ(D,q,lo).then((t=>{var i;t&&(o(165358).log({level:"info",type:"collectionLimitsBannerDisplayed",from:"PageViewBlock",data:{miscDataToConvertToString:{blockId:D.id,spaceId:D.getSpaceId(),collectionId:null===(i=D.getCollectionPointerIfSingleSource())||void 0===i?void 0:i.id}}}),B().HQ({bannerStore:e,id:"PagePropertiesLimitExceededBanner",contentKey:"page_properties_limit_exceeded",styleKey:Ce().q.Yellow}))})).catch((()=>{}))}return()=>{(0,X().Zz)(L)&&(B().zA({bannerStore:Xt(L),id:"DeletedPage"}),B().zA({bannerStore:Xt(L),id:"CollectionTemplatePage"}),B().zA({bannerStore:Xt(L),id:"AgentProfilePage"}),B().zA({bannerStore:Xt(L),id:"CustomAgentInstructionsPage"}),B().zA({bannerStore:Xt(L),id:"Site"}),B().zA({bannerStore:Xt(L),id:"MarketplaceTemplateBanner"}),B().zA({bannerStore:Xt(L),id:"CustomGettingStartedPageBanner"}),B().zA({bannerStore:Xt(L),id:"SetCustomGettingStartedPageBanner"}),B().zA({bannerStore:Xt(L),id:"CrdtPage"}),B().zA({bannerStore:Xt(L),id:"TrustedDomainPageBanner"}),B().zA({bannerStore:Xt(L),id:"TranslateBanner"}),B().zA({bannerStore:Xt(L),id:"AsanaImporterBanner"}),B().zA({bannerStore:Xt(L),id:"DraftPostInExpandedFeedComposerBanner"}),B().zA({bannerStore:Xt(L),id:"AuthMissingForJiraSyncedCollectionPageBanner"}),B().zA({bannerStore:Xt(L),id:"JiraTwoWaySyncInfoBanner"}),B().zA({bannerStore:Xt(L),id:"PagePropertiesLimitExceededBanner"}))}}),[q,Wt,L,U,G,D,Z,Ot,wt,vt,null==Rt?void 0:Rt.is_asana_imported_project,null==Rt?void 0:Rt.is_asana_imported_task,null==Rt?void 0:Rt.dismissed_asana_import_banner,Dt,Lt,Ft,bt,qt,oo,ro,Y,so,ao,pt,lo,ft,ht,yt,Nt]);const co=(0,p().K8)((()=>o(805667).A.state.pageMap[D.id]),[D.id]);(0,i.useEffect)((()=>{if(L===y().R.Frame){const e=Xt(L);B().zA({bannerStore:e,id:"ImportingEvernotePage"}),co&&B().HQ({bannerStore:e,id:"ImportingEvernotePage",contentKey:"importing_evernote",styleKey:Ce().q.Blue,blockStore:D})}return()=>{L===y().R.Frame&&B().zA({bannerStore:Xt(L),id:"ImportingEvernotePage"})}}),[L,D,co]),(0,o(852507).w)((()=>{"suggest"===te().Uv.getMode(D,!0)&&V().Nz({environment:q,location:"page_navigation",navigableBlockStore:D})})),(0,o(589895).Bs)({pageId:D.id,isFrameContext:(0,X().jN)(L)}),(0,i.useEffect)((()=>()=>{"suggest"===te().Uv.getMode(D,!0)&&V().eB({environment:q,location:"page_navigation",navigableBlockStore:D})}),[q,D]);const uo=(0,p().K8)((()=>Yt(D)),[D]),po=(0,p().K8)((()=>null==uo?void 0:uo.getParentBlockStore()),[uo]),go=(0,p().K8)((()=>null==pt?void 0:pt.collectionStore()),[pt]);uo&&uo!==go&&pt.setContext({type:"collectionPage",collectionViewBlockStore:po,collectionStore:uo});const mo=(0,p().K8)((()=>{const e=(0,o(110750).Xz)(q.TabbedRouterStore.state);if("web"===e.type){var t,i;if("page"===(null===(t=e.redirectedTo)||void 0===t?void 0:t.route.name))return null===(i=e.redirectedTo)||void 0===i?void 0:i.route.blockId;if("page"===e.route.name)return e.route.blockId}}),[q]),So=(0,i.useRef)(void 0);(0,i.useEffect)((()=>{if(q.mobileNative&&tt===mo){var e;const t=mo!==So.current;null===(e=q.mobileNative)||void 0===e||e.markTransitionReady({environment:q,type:"page",id:D.id,sendImmediately:!0,isNavigationEvent:t}),So.current=mo}}),[q,mo,tt,D.id]),(0,i.useEffect)((()=>{ot(D.id)}),[D]);const vo=(0,i.useCallback)((()=>{Oe||m().A.state.isDragging||Mt().default.state.isActive||Je(!0)}),[Oe]),fo=(0,i.useCallback)((()=>{Oe||m().A.state.isDragging||Mt().default.state.isActive||Je(!1)}),[Oe]),ho=(0,i.useCallback)((()=>{m().A.state.isDragging||Mt().default.state.isActive||et(!0)}),[]),yo=(0,i.useCallback)((()=>{m().A.state.isDragging||Mt().default.state.isActive||et(!1)}),[]),bo=(0,g().d)(ho,100),xo=(0,g().d)(yo,100),_o=(0,i.useCallback)((e=>{St&&((0,Pt().h)({environment:q,store:D}),e.isAtStartOfLine?(0,o(301809).e)({store:St}):(0,ce().z)({store:St}))}),[q,D,St]),ko=(0,i.useCallback)((e=>{(0,o(755125).clear)({environment:q}),(0,ae().I)({environment:q}),z&&z(e)}),[q,z]),Co=(0,i.useCallback)((e=>{if(le)return!0;if(e.preventDefault(),function(e){return Boolean(Yt(e))}(D)){const e=(0,X().gV)(D);if(e&&e.collection_page_properties){const t=e.collection_page_properties.find(((e,t)=>function(e,t){const o=Yt(t);if(!o)return!1;const i=function(e){return e.getSchema()}(t);return(0,R().B2)(i[e])}(e.property,D)));t&&o(908006).default.afterNextFlush((()=>{o(90654).ho({environment:q,blockPropertyValueOverlayStore:Gt(L),collectionContextStore:pt,store:D,property:t.property,surface:"page"})}))}}}),[pt,L,q,le,D]),wo=(0,i.useCallback)((e=>{if(le)return!0;ko(e)}),[ko,le]),Io=(0,i.useCallback)((()=>{Qe.reset()}),[Qe]),Po=(0,i.useCallback)((e=>{e.target===ct.current&&null===e.relatedTarget&&document.hasFocus()&&(0,ae().I)({environment:q})}),[q]),Mo=(0,p().K8)((()=>Jt((0,o(835066).dC)(q,D),D,L,Y)),[q,D,L,Y]),Ao=(0,p().K8)((()=>L===y().R.DraftPostInInlineComposer?y().R.DraftPostInInlineComposer:D.isTeamPost()?D.isPublishedDraft()?y().R.PostInFullPageOrPeek:D.isDraft()?y().R.DraftPostInFullPageComposer:void 0:void 0),[D,L]),To=(0,o(933951).sS)({pageStore:D,postContext:Ao,collectionStore:uo,pageViewBlockStore:Xe.pageViewBlockStore}),Bo=(0,p().K8)((()=>gt().default.state.topHoverAreaEntered),[]),jo=(0,i.useCallback)((e=>{const{isBottomControl:t,forceVisible:o}=e??{},i=Oe?Bo:$e;let n;return n=!!c().A.isMobile||(!!o||(!!Ge||(t?Ze&&!S().A.state.isKeyboardMode:i&&!S().A.state.isKeyboardMode||Fe))),eo(n)}),[Ze,Fe,$e,Oe,Bo,Ge]),Vo=(0,p().K8)((()=>jo({isBottomControl:!1})),[jo]),Ko=(0,p().K8)((()=>"suggest"===te().Uv.getMode(D)),[D]),Eo=(0,p().K8)((()=>(0,Ie().$3)({environment:q,collectionStore:D.getAssociatedCollectionStore()})),[q,D]),Ro=(0,p().K8)((()=>(0,Ie().Wk)({blockStore:D,showUpsell:Eo})),[D,Eo]),Do=(0,o(400851).X)({environment:q,blockStore:D,from:"topControls",blockContext:L}),Lo=(0,i.useCallback)((({from:e})=>{if(le)return;const t=Yt(D);t&&(0,o(447934).nh)({environment:q,blockStore:D,collectionStore:t,from:e})}),[q,le,D]),Fo=(0,i.useMemo)((()=>{if(W||xt)return[];const e=[];return!ne||At||Ko||e.push((0,oe.jsx)(i.Fragment,{children:(0,oe.jsx)(o(790324).A,{store:D,afterOnClick:()=>{mt.current=!0},style:Vo,label:Y.isSmallPhone?(0,oe.jsx)(I().sA,{id:"PageViewBlock.icon.pageIconMobile",defaultMessage:"Icon"}):(0,oe.jsx)(I().sA,{id:"PageViewBlock.icon.pageIcon",defaultMessage:"Add icon"})})},"add-icon")),!re||!ne||jt||Ko||Ao||e.push((0,oe.jsx)(i.Fragment,{children:(0,oe.jsx)(o(588e3).A,{store:D,style:Vo,label:Y.isSmallPhone?(0,oe.jsx)(I().sA,{id:"PageViewBlock.cover.pageCoverMobile",defaultMessage:"Cover"}):(0,oe.jsx)(I().sA,{id:"PageViewBlock.cover.pageCover",defaultMessage:"Add cover"}),from:"page_header"})},"add-cover")),Ro&&e.push((0,oe.jsx)(i.Fragment,{children:(0,oe.jsx)(o(880710).ui,{store:D,style:Vo,showUpsell:Eo})},"verify-page")),Do&&!Ao&&e.push((0,oe.jsx)(ze,{blockStore:D,onClick:()=>Lo({from:"customize_page_button_above_title"}),style:Vo},"customize-layout")),ne&&!c().A.isMobile&&e.push((0,oe.jsx)(i.Fragment,{children:(0,oe.jsx)(xe,{store:D})},"generate-preview-image")),e}),[W,xt,ne,At,Ko,re,jt,Ao,Ro,Do,Y.isSmallPhone,D,Vo,Eo,Lo]),zo=(0,p().K8)((()=>(0,st().E)(D,q)),[D,q]),Oo=(0,p().K8)((()=>{const{WindowSizeStore:e}=q,t=(null==O?void 0:O.paddingX)??(0,X().OU)(L,q);return{paddingLeft:e.getSafePaddingLeftCSS(t),paddingRight:e.getSafePaddingRightCSS(t),proxyWidth:e.state.width}}),[q,null==O?void 0:O.paddingX,L]),Wo=(0,p().K8)((()=>{const e=q.currentUser.isLoggedIn(),t=null==G?void 0:G.publicEditModeStore.state;let i;return L===y().R.Frame?i=n().default.state.currentLoadingContainerStore:L===y().R.PeekView&&gt().default.state.open&&(i=gt().default.state.loadingContainerStore),Boolean(D&&i&&D.isDefined()&&!(0,se().S)(D)&&D.canEdit()&&!D.hasContent()&&e&&(!(null!=t&&t.hasPublicPermission)||"edit"===(null==t?void 0:t.permission))&&!(Boolean(o(569427).A.state.pageMap[D.id])||o(66496).A.state.pages.has(D.id))&&i.state.ready&&!(0,X().sV)(D)&&!(0,X().fc)(D))}),[q.currentUser,null==G?void 0:G.publicEditModeStore,D,L]),Ho=(0,i.useMemo)((()=>({store:D,isEditable:ne,hasCover:jt,isInSidePeek:We,openMenuOnMountCallback:()=>{mt.current=!1}})),[jt,ne,We,D]),No=(0,p().K8)((()=>Boolean(D.getAssociatedCollectionStore())),[D]),Uo=(0,p().K8)((()=>Y.isPhone&&!No&&!le),[Y.isPhone,No,le]),qo=(0,p().K8)((()=>{var t;const o=(null===(t=e.styleOverrides)||void 0===t?void 0:t.paddingX)??(0,X().OU)(L,q);let i=e.titlePlaceholder;return Uo&&(i=""),{store:D,disabled:!no&&!Z,isInSidePeek:We,paddingLeft:o,paddingRight:o,extraStyles:e.titleStyle,titlePlaceholder:i,collectionContextStore:pt,shouldShowTemplatePicker:Wo,onTitleChange:Io,onTitleEditText:_o,onTitleEsc:ko,onTitleUntab:wo,onTitleTab:Co}}),[null===(f=e.styleOverrides)||void 0===f?void 0:f.paddingX,e.titleStyle,e.titlePlaceholder,L,q,D,Z,pt,Wo,Io,_o,ko,wo,Co,We,Uo,no]),Qo=(0,i.useCallback)((e=>{"page"===e&&K().measurePageRenderMetrics({environment:q,isEditable:ne,isHomePage:!1,isWikiHome:!0,isPageWithCustomLayout:!1,idSchema:ue})}),[q,ne,ue]),Yo=(0,p().K8)((()=>{const e=D.getAssociatedLayoutStore(),t=(0,o(860116).I)(e),i="hidden"===(0,ve().A)({environment:q,store:D,pageViewBlockStore:void 0}).type;return L!==y().R.DraftPostInInlineComposer&&L!==y().R.WorkflowInstructionsInInlineComposer&&L!==y().R.Presentation&&(!t||i)}),[L,D,q]),Go=(0,p().K8)((()=>{var t,i;const n=(0,oe.jsx)(o(155129).X.Provider,{value:be,children:(0,oe.jsx)(s().A,{tag:J().Mx,animate:De.layout,type:Mo,withBottomPadding:Yo,ref:lt,children:(0,oe.jsx)(_t,{context:L,postContext:Ao,onHeaderMouseEnter:vo,onHeaderMouseLeave:fo,onDetailMouseEnter:bo,onDetailMouseLeave:xo,pageCoverHeight:(null===(t=e.styleOverrides)||void 0===t?void 0:t.pageCoverHeight)??Ut,modules:(null===(i=e.layoutModulesByArea)||void 0===i?void 0:i.page_main)??To.page_main,styleOverrides:e.styleOverrides,templatePickerMenuListStore:Xe.templatePickerMenuListStore,topControls:Fo,getControlHoverStyle:jo,pageViewBlockStores:Xe,isHeaderHovered:Oe?Bo:$e,...Ho,openMenuOnMount:mt.current,...qo,disabled:U,pageViewBlockAccessor:ut,editorContentContainerRef:at,layoutRef:lt})})});return pt&&pt.contextTypeFromStoreState?(0,oe.jsx)(Se().RI,{value:pt,children:n}):n}),[be,De.layout,Mo,L,Ao,vo,fo,bo,xo,e.styleOverrides,null===(M=e.layoutModulesByArea)||void 0===M?void 0:M.page_main,To.page_main,Xe,Fo,jo,$e,Bo,Oe,Ho,qo,U,ut,pt,Yo]),Xo=(0,p().K8)((()=>{var t;const i=D.getType()===o(700500).xd.copyIndicator,n=((null===(t=D.getFormat())||void 0===t||null===(t=t.duplication_job_ids)||void 0===t?void 0:t.length)||0)>0;if(i&&n)return(0,oe.jsx)(E().R,{store:D,peekMode:void 0,forceShowIcon:!0});if(i&&(D.getParentTable()!==k().Vl||D.getParentTable()===k().Vl&&0===Object.keys(D.getProperties()).length))return(0,oe.jsx)(He,{});if(o(586399).A.state.isDuplicating)return(0,oe.jsx)(E().R,{store:D,peekMode:void 0,forceShowIcon:!0});if(le){const e=(0,oe.jsx)(a().s,{allowSelectionWithin:!1,style:zo,children:(0,oe.jsx)(o(495576).d,{height:"20vh",store:D,disabled:!ne,paddingLeft:Oo.paddingLeft,paddingRight:Oo.paddingRight,proxyWidth:Oo.proxyWidth})});return(0,oe.jsx)(Se().RI,{value:pt,children:(0,oe.jsx)(de,{canEdit:Z,context:y().R.CollectionViewBlockFullScreen,controlHoverStyle:Vo,handleHeaderMouseEnter:vo,handleHeaderMouseLeave:fo,headerFocusStore:Xe.headerFocusStore,pageCover:e,topControls:Fo,...Ho,openMenuOnMount:mt.current,...qo,store:D,productUseCase:ge,onCollectionViewBlockMount:Qo,editorContentContainerRef:at,pageViewBlockStore:Ne,disabled:no&&U})})}return wt?(0,oe.jsx)(o(620137).e,{renderLoading:()=>(0,oe.jsx)(E().R,{store:D,peekMode:void 0}),innerRenderLoading:()=>(0,oe.jsx)(E().R,{store:D,peekMode:void 0}),store:D}):pe?(0,oe.jsx)(o(563615).eN,{store:D}):(0,oe.jsx)(o(314994).c,{displayName:"PageContent",style:{...zt,...e.style},disabled:!Z||(0,se().S)(D),onBlur:Po,shouldSelectOnEnter:Qt,ref:ct,children:(0,oe.jsx)(l().A,{name:"PageContent",children:Go})})}),[D,le,wt,pe,e.style,Z,Po,Go,pt,Vo,vo,fo,Xe.headerFocusStore,Fo,Ho,qo,Qo,Ne,zo,Oo,ne,no,U,ge]);return(0,Pe().NW)(D,t,(0,i.useMemo)((()=>({store:D,blockContext:L,openResolvedDiscussionPopup:it,getContentInnerWidth:rt,getContentWrapEl:dt,getLayoutEl:ut,...Xe,renderedType:"page",getBlockStore:()=>D,getNode:()=>ct.current})),[D,L,rt,dt,ut,it,Xe]),Xo)}const Nt=i.memo(i.forwardRef(Ht),M().A),Ut=c().A.isMobile?200:"30vh";function qt(e,t=0){return e.isTablet?380:e.isIOS?Math.max(350,t):c().A.isMobile?400:"30vh"}function Qt(){return 0===At().default.state.stores.length}function Yt(e){return e.getAssociatedCollectionStore()}function Gt(e){return(0,X().L5)(e)?L().A:D().A}function Xt(e){return(0,X().L5)(e)?Vt().A:(0,X().jN)(e)?jt().A:(0,A().HB)(e)}function $t(e,t,o){const{RouterStore:i}=t,{route:n}=i.state,r=e;return o.isMobileNative&&"page"===n.name&&n.showMoveTo&&r.isEmptyTitle()&&r.isEmptyPage()}function Jt(e,t,o,i){return o===y().R.DraftPostInInlineComposer||o===y().R.WorkflowInstructionsInInlineComposer?"create-post":o===y().R.Presentation?"presentation-mode":i.isPhone?"phone":i.isTablet?(0,X().Ck)(t,o,i)?"wide":"tablet":(0,X().L5)(o)?(0,X().mb)(t)?"side-peek":"center-peek":(0,X().A7)(o)||(0,X().Vi)(o)?"template-preview":(0,X().sL)(o)?(0,X().Ck)(t,o,i)?"wide":"default":(0,X().Ck)(t,o,i)?e?"wide-right-margin-expanded":"wide":"default"}function Zt(e,t){return 28+(0,X().XD)(e)}function eo(e){return{opacity:e?1:0,pointerEvents:e?"auto":"none",transition:"opacity 100ms ease"}}function to(){if(!gt().default.isSidePeekOpen()&&!gt().default.isCenterPeekOpen())return!1;const e=n().default.state.mainEditorCurrentBlockStore;return(0,wt().lU)(e)}},746426:(e,t,o)=>{o.d(t,{J:()=>l});var i=o(296540),n=()=>o(165358),r=()=>o(187174),s=()=>o(753812),a=()=>o(534691);function l(e,t,o){const[{value:l,status:c}]=(0,r().Yb)((async()=>{if(!o)return{templateListingExists:!1};t.getSpaceId()||n().log({level:"error",from:"useGetSiteTemplateStatus",type:"spaceIdNotFound",data:{blockId:t.id}});try{const o=await s().callApi({eventName:"inAppGetBannerByBlockId",environment:e,data:{blockId:t.id}});var i,r,l;if("success"===o.type&&o.data.success)return a().M.setSiteTemplateStatus((null===(i=o.data.template)||void 0===i?void 0:i.root_block_id)??"",{templateListingExists:Boolean(null===(r=o.data.template)||void 0===r?void 0:r.listing_id),template:o.data.template,status:"resolved"}),{templateListingExists:Boolean(null===(l=o.data.template)||void 0===l?void 0:l.listing_id),template:o.data.template}}catch(c){n().log({level:"error",from:"AllPublishedSiteSettings",type:"getTemplateByBlockId",data:{blockId:t.id}})}return a().M.setSiteTemplateStatus(t.id,{templateListingExists:!1,template:void 0,status:"rejected"}),{templateListingExists:!1}}),[e,o,t]);return(0,i.useMemo)((()=>({templateListingExists:(null==l?void 0:l.templateListingExists)??!1,status:c,template:null==l?void 0:l.template})),[l,c])}},766081:(e,t,o)=>{o.d(t,{A:()=>S,R:()=>m});o(296540);var i=()=>o(726637),n=()=>o(484714),r=()=>o(590526),s=()=>o(401497),a=()=>o(991003),l=()=>o(874832),c=()=>o(868840),d=()=>o(175947),u=()=>o(69708),p=()=>o(741751),g=o(474848);function m({store:e,peekMode:t,forceShowIcon:o}){const n=(0,r().K8)((()=>Boolean(e.getCover())),[e]),a=(0,r().K8)((()=>Boolean(e.getIcon())),[e])||o,d=(0,r().K8)((()=>e.isCollectionView()),[e]),u=(0,r().K8)((()=>e.isFullWidth()),[e]),m=t===c().O?"20vh":p().mv,S=(0,s().IS)((()=>{const e=i().A.isMobile?24:t===c().A?48:96,o=(()=>{switch(!0){case i().A.isMobile:return 32;case a:return 96;case t===c().O&&!a:return 54;case!a:return 102}})(),r=(()=>{switch(!0){case i().A.isMobile&&n&&a:return 22;case i().A.isMobile&&n&&!a:return 54;case i().A.isMobile&&!n&&a:return 56;case i().A.isMobile&&!n&&!a:return 4;case!i().A.isMobile&&n&&a:return 50;case!i().A.isMobile&&n&&!a:return 58;case!i().A.isMobile&&!n&&a:return 92;case!i().A.isMobile&&!n&&!a:return 20}})();return{collectionCoverPhoto:{width:"100%",height:"20vh"},collectionTitleContainer:{display:"flex",alignItems:"center",paddingInlineStart:e,paddingInlineEnd:e,width:"100%",paddingTop:(()=>{switch(!0){case i().A.isMobile&&n:return 50;case i().A.isMobile&&!n:return 78;case!i().A.isMobile&&n:return 48;case!i().A.isMobile&&!n:return 36}})()},collectionIcon:{flexGrow:0,flexShrink:0,width:36,height:36,borderRadius:6,marginInlineEnd:10,marginInlineStart:3},collectionTitle:{height:i().A.isMobile?24:30,width:600,marginTop:i().A.isMobile?6:3,borderRadius:15},pageCoverPhoto:{width:"100%",height:m},pageCoverPadding:{width:"100%",height:o},pageIconContainer:{maxWidth:"100%",boxSizing:"border-box",paddingInlineStart:e,paddingInlineEnd:e,width:u?"100%":900,height:36},pageIcon:{position:"relative",top:n?-42:0,width:78,height:78,marginInlineStart:2,borderRadius:16},pageTitleContainer:{display:"flex",boxSizing:"border-box",paddingInlineStart:e,paddingInlineEnd:e,width:u?"100%":900,maxWidth:"100%",paddingTop:r},pageTitle:{marginTop:i().A.isMobile?3:0,height:i().A.isMobile?24:30,width:600,borderRadius:15}}}),[u,n,a,m,t]);return d||t===c().A?(0,g.jsxs)(g.Fragment,{children:[n?(0,g.jsx)(l().P,{style:S.collectionCoverPhoto}):void 0,(0,g.jsxs)("div",{style:S.collectionTitleContainer,children:[a?(0,g.jsx)(l().P,{emphasized:!0,style:S.collectionIcon}):void 0,(0,g.jsx)(l().P,{style:S.collectionTitle})]})]}):(0,g.jsxs)(g.Fragment,{children:[n?(0,g.jsx)(l().P,{style:S.pageCoverPhoto}):(0,g.jsx)("div",{style:S.pageCoverPadding}),a?(0,g.jsx)("div",{style:S.pageIconContainer,children:(0,g.jsx)(l().P,{emphasized:!0,style:S.pageIcon})}):void 0,(0,g.jsx)("div",{style:S.pageTitleContainer,children:(0,g.jsx)(l().P,{style:S.pageTitle})})]})}function S({isVisible:e,peekMode:t,store:o}){const{WindowSizeStore:i}=(0,n().v3)(),l=(0,n().Y0)(),p=(0,u().tz)(),S=l.isPhone,v=l.isMobileNative,f=d().ek(l.isElectronMac),h=(0,r().K8)((()=>{const e=t===c().O||t===c().A||S?f:0;return{top:i.getSafePaddingTopCSS(e),bottom:i.getSafePaddingBottomCSS(0),insetInlineStart:i.getSafePaddingLeftCSS(0),insetInlineEnd:i.getSafePaddingRightCSS(0)}}),[i,t,S,f]),y=(0,s().IS)((()=>({root:{position:"absolute",...h,display:"flex",flexDirection:"column",alignItems:"center",pointerEvents:"none"}})),[h]);return(0,a().A)(e,v?0:10,0)?(0,g.jsx)("div",{role:"progressbar","aria-valuetext":p.formatMessage({id:"frameLoadingState.loading",defaultMessage:"Loading..."}),style:y.root,children:(0,g.jsx)(m,{store:o,peekMode:t})},"shimmer"):null}},774524:(e,t,o)=>{o.d(t,{A:()=>u});o(296540);var i=()=>o(726637),n=()=>o(590526),r=()=>o(401497),s=()=>o(609679),a=()=>o(100622),l=()=>o(284371),c=()=>o(478726),d=o(474848);function u(e){const{store:t,context:o,onFocus:u,onBlur:p,children:g}=e,m=(0,n().K8)((()=>{const e=(0,c().XD)(o);let n,r,s;return i().A.isMobile?t.getCover()?(t.getIcon(),s="block",n=e,r=4):(s="flex",n=e,r=(0,c().$n)()):t.isCollectionView()||(0,c().mb)(t)?(s="flex",t.getCover()?(n=16,r=4):(n=4,r=4)):(s="flex",t.getIcon()?(n=8,r=4):t.getCover()?(n=16,r=4):(n=e,r=(0,c().$n)())),{display:s,paddingTop:n,paddingBottom:r}}),[o,t]),S=(0,r().IS)((()=>({container:{...m,justifyContent:"flex-start",flexWrap:"wrap",marginInlineStart:-1,color:a().Tj.text.tertiary,fontFamily:l().vc(s().locale).sans,pointerEvents:"auto"}})),[m]);return(0,d.jsx)("div",{onFocus:u,onBlur:p,style:S.container,className:"notion-page-controls",children:g})}},790324:(e,t,o)=>{o.d(t,{A:()=>d});var i=o(296540),n=()=>o(484714),r=()=>o(631524),s=()=>o(619207),a=()=>o(896628),l=()=>o(244828),c=o(474848);function d(e){const{store:t,afterOnClick:o,style:d,label:u}=e,p=(0,n().v3)(),g=(0,i.useCallback)((()=>{l().createAndCommit({userAction:"PageAddIconButton.handleAddRandomIconClick",environment:p,canUndo:!0,perform:e=>{a().vc({store:t,transaction:e})}}),o()}),[p,o,t]);return(0,c.jsx)(r().p,{style:d,colorVariant:"tertiary",onClick:g,iconLeading:{icon:s().emojiFaceFillIcon,size:"xs",fitToViewBox:"all"},children:u},"add-icon")}},805667:(e,t,o)=>{o.d(t,{A:()=>n});class i extends(()=>o(757695))().Store{getInitialState(){return{pageMap:{}}}setStatus(e,t){const{pageMap:o}=this.state;t?o[e]=t:delete o[e],this.emit()}}const n=new i},823082:(e,t,o)=>{o.d(t,{H:()=>r});var i=()=>o(778781),n=()=>o(534177);function r(e){const t=e.type;return"properties"===t?"module__properties_"+("pinned"===e.variant?"minimal":"expanded"):"normalizedTitleWithIcon"===t||"titleWithIcon"===t?"module__title_with_icon":"cover"===t?"cover__module":"views"===t?"module__views":"editor"===t?"module__editor":"formTitle"===t?"module__formTitle":"viewsMain"===t?"module__views_main":"transcript"===t?"module__transcript":"formSubmit"===t?"module__form_submit":"discussions"===t?"module__discussion":"placeholder"===t?"module__placeholder":"formQuestion"===t?"module__formQuestion":"bottomControls"===t?"module__bottomControls":"relationsGroup"===t?"module__relationsGroup":"deleted_property"===t?"module__deleted_property":"expandedBacklinks"===t?"module__expandedBacklinks":"inlinePageSections"===t?"module__inlinePageSections":"property"===t?`module__property_${e.id}`:"collectionView"===t?"module__collectionView":"collectionViewV2"===t?"module__collectionViewV2":(0,i().CA)(t)?`module__property_${e.id}`:void(0,n().HB)(t)}},838434:(e,t,o)=>{o.d(t,{W:()=>l,j:()=>a});var i=()=>o(651124),n=()=>o(979340),r=()=>o(135552),s=()=>o(661075);function a(e){const{collectionFormat:t}=e;if(!t)return{shouldShowBanner:!1};const o=t.external_collection_type;return o&&o===i().uO.Jira?{shouldShowBanner:!0,bannerId:"AuthMissingForJiraSyncedCollectionPageBanner",contentKey:"auth_missing_for_jira_user",styleKey:r().q.LightBlue}:{shouldShowBanner:!1}}function l(e){const{collectionFormat:t,userSettings:o,collectionStore:l,collectionContextStore:c}=e;if(!l||!t)return{shouldShowBanner:!1};if(!(0,s().fo)({collectionStore:l}))return{shouldShowBanner:!1};const d=t.external_collection_type;if(!d)return{shouldShowBanner:!1};switch(d){case i().uO.Jira:return function(e){var t,o,i;const{collectionFormat:l,userSettings:c,collectionStore:d,collectionContextStore:u}=e;if(!c||!d)return{shouldShowBanner:!1};if(u){if(!(null==c?void 0:c.seen_auth_missing_for_jira_synced_collection_view_banner)&&(0,s().z9)({collectionStore:d}))return a({collectionFormat:l})}const p=()=>{const e=d.getSpaceStore();return!e||(0,n().OX)(e.getSubscriptionTier())},g=!0===(null===(t=l.sync_state)||void 0===t?void 0:t.enable_two_way_sync)&&p(),m=!0===(null===(o=l.sync_state)||void 0===o?void 0:o.syncing),S=!1===(null===(i=l.sync_state)||void 0===i?void 0:i.syncing)&&l.error,v=null==c?void 0:c.seen_jira_two_way_sync_info_banner;if(g||v||m||S)return{shouldShowBanner:!1};return{shouldShowBanner:!0,bannerId:"JiraTwoWaySyncInfoBanner",contentKey:"jira_two_way_sync_info",styleKey:r().q.Blue}}({collectionFormat:t,userSettings:o,collectionStore:l,collectionContextStore:c});case i().uO.Salesforce:default:return{shouldShowBanner:!1}}}},848565:(e,t,o)=>{o.d(t,{FB:()=>p,JC:()=>m,Ql:()=>g,Wv:()=>r,Yz:()=>a,ds:()=>n,e4:()=>i,eQ:()=>s,im:()=>c,jw:()=>l,k2:()=>u,uG:()=>d});const i=8,n=10,r=8,s=24,a=6,l=1.5,c=(s-l)/2,d=s+a,u=`calc(100% + ${r+(i-a)-d}px)`,p=s+8,g=-16;function m(e,t,o){return t?20:"margin_comments"===e?12:"comment_unfurl"===e&&"start"===o?14:16}},877051:(e,t,o)=>{o.d(t,{V:()=>a});var i=o(296540),n=()=>o(907258),r=()=>o(590526),s=()=>o(391400);function a(){const e=(0,i.useRef)(!1),t=(0,r().K8)((()=>n().default.state.renderPhase),[]),o=(0,r().K8)((()=>s().A.state.initialCollectionPendingRenderCount>0),[]);return"rendered"!==t||o||(e.current=!0),!e.current}},879526:(e,t,o)=>{o.r(t),o.d(t,{iconDefinition:()=>i,infoCircleFillIcon:()=>n});o(296540);const i={viewBox:"0 0 20 20",fittedViewBox:"2.37 2.37 15.26 15.25",svg:(0,o(474848).jsx)("path",{d:"M2.375 10a7.625 7.625 0 1 1 15.25 0 7.625 7.625 0 0 1-15.25 0M8.65 8.25a.625.625 0 1 0 0 1.25h.725v3.25H8.65a.625.625 0 1 0 0 1.25h2.7a.625.625 0 1 0 0-1.25h-.725V8.875A.625.625 0 0 0 10 8.25zM10.7 6.3a.8.8 0 1 0-1.6 0 .8.8 0 0 0 1.6 0"})},n=(0,o(340498).wt)("infoCircleFill",i,"fill")},880710:(e,t,o)=>{o.d(t,{TK:()=>a,YC:()=>s,ui:()=>r});var i=()=>o(79926);const n={pageVerification:new(i().O2)("pageVerification",(()=>Promise.all([o.e(38293),o.e(32370),o.e(27083),o.e(94891)]).then(o.bind(o,204084)))),pageVerificationBadge:new(i().O2)("pageVerificationBadge",(()=>Promise.all([o.e(35530),o.e(36556),o.e(55373),o.e(36192),o.e(27992),o.e(63452),o.e(66249),o.e(87249),o.e(79022),o.e(34877),o.e(11676),o.e(94522),o.e(38293),o.e(63515),o.e(55162),o.e(71003),o.e(32370),o.e(26264),o.e(64242),o.e(47160),o.e(76677),o.e(42056),o.e(3261),o.e(54219),o.e(40507),o.e(41412)]).then(o.bind(o,42990)))),pageVerificationMenuRenderer:new(i().O2)("pageVerificationMenuRenderer",(()=>Promise.all([o.e(35530),o.e(36556),o.e(55373),o.e(36192),o.e(27992),o.e(63452),o.e(66249),o.e(87249),o.e(79022),o.e(34877),o.e(11676),o.e(94522),o.e(38293),o.e(63515),o.e(55162),o.e(71003),o.e(32370),o.e(26264),o.e(64242),o.e(47160),o.e(76677),o.e(42056),o.e(3261),o.e(54219),o.e(27083),o.e(40507),o.e(26207)]).then(o.bind(o,424928))))},r=(0,i()._h)(n.pageVerification,(e=>e.PageAddVerificationButton)),s=(0,i()._h)(n.pageVerificationBadge,(e=>e.PageVerificationBadge)),a=(0,i()._h)(n.pageVerificationMenuRenderer,(e=>e.PageVerificationMenuRenderer))},918487:(e,t,o)=>{o.d(t,{v:()=>n});var i=()=>o(517223);function n(e){const{collectionStore:t,module:o,isMobile:n}=e;if("normalizedTitleWithIcon"!==o.type)return!1;const r=t.getSchema(),s=!!r&&(0,i().LD)({collectionSchema:r,module:o}).length>0,a=(0,i().pm)({collectionStore:t}).count>0;return!(!n||!a)||!s&&a}},933951:(e,t,o)=>{o.d(t,{Qf:()=>y,sS:()=>f,ub:()=>h});o(944114),o(517642),o(658004),o(733853),o(845876),o(432475),o(515024),o(731698),o(898992),o(672577),o(737550);var i=o(296540),n=()=>o(484714),r=()=>o(590526),s=()=>o(795732),a=()=>o(455348),l=()=>o(165358),c=()=>o(691678),d=()=>o(235692),u=()=>o(778781),p=()=>o(33791),g=()=>o(577814),m=()=>o(478726),S=()=>o(240865),v=()=>o(9768);function f(e){const{pageStore:t,pageViewBlockStore:o,postContext:s,collectionStore:a,collectionSchema:l}=e,{collectionStore:d,collectionFormat:m,collectionSchema:S,canConfigureCollection:f}=(0,r().K8)((()=>{const e=a||(null==t?void 0:t.getAssociatedCollectionStore()),o=l||(null==e?void 0:e.getSchema()),i=null==e?void 0:e.getFormat(),n=e&&(0,p().v)({collectionStore:e,collectionViewBlockStore:e.getParentBlockStore(),checkNavigableAncestorLocked:!1});return{collectionStore:e,collectionSchema:o,collectionFormat:i,canConfigureCollection:n}}),[t,a,l]),y=(0,n().v3)(),b=(0,r().K8)((()=>{var e;return null===(e=(0,g().A)({environment:y,store:t,pageViewBlockStore:o}))||void 0===e?void 0:e.type}),[y,t,o]),x=h({collectionFormat:m,collectionSchema:S,layoutStore:(0,r().K8)((()=>null==d?void 0:d.getLayoutStore()),[d]),postContext:s,pageStoreId:null==t?void 0:t.id,pageStore:t}),_=(0,r().K8)((()=>{const e=x.page_main.some((e=>(0,u().i_)(e)))||x.page_details.some((e=>(0,u().i_)(e)));return!(!d||!e)&&(0,v().cu)({modulesByArea:x,collectionStore:d})}),[x,d]),k=(0,i.useMemo)((()=>{const e=new Set;return(!Boolean(d)||!f&&_)&&e.add("properties"),"hidden"===b&&e.add("discussions"),e}),[f,d,b,_]);return(0,i.useMemo)((()=>0===k.size?x:(0,c().KO)(x,(e=>!k.has(e.type)))),[x,k])}function h(e){const{layoutStore:t,collectionSchema:o,collectionFormat:n,postContext:l,pageStoreId:c,pageStore:u}=e,p=(0,i.useRef)(c),g=(0,i.useRef)(null),v=(0,r().K8)((()=>null==u?void 0:u.getSpaceStore()),[u]),f=(0,S().V)(v),h=!f||f>1;return(0,r().K8)((()=>{var e;if(l===s().R.DraftPostInInlineComposer)return d().wC;if(null!=u&&u.isPersonProfile())return b({personProfileStore:u,isMultiplayerWorkspace:h});if((0,m().Mi)(l)){const e=(0,a().aG)(o,"created_time"),t=(0,a().aG)(o,"created_by"),i=[];t&&i.push(t),e&&i.push(e);return{...d()._u,page_main:[{...d()._u.page_main[0],propertyIds:i},...d()._u.page_main.slice(1)]}}let i=null==t?void 0:t.getModules();const r=c&&i&&c===p.current&&0===i.page_main.length&&(null===(e=g.current)||void 0===e?void 0:e.page_main.find((e=>"editor"===e.type)));return i&&!r||(i=(0,d().xN)({collectionSchema:o,collectionFormat:n})),p.current=c,g.current=i,i}),[l,u,t,c,h,o,n],{useDeepEqual:!0})}function y(e){const{personProfileStore:t}=e,o=(0,r().K8)((()=>t.getSpaceStore()),[t]),i=(0,S().V)(o),n=!i||i>1;void 0===i&&(o?l().log({level:"warning",from:"usePersonProfilePageLayoutModulesByArea",type:"SpaceMemberCountUnavailable",data:{miscDataToConvertToString:{spaceId:o.id}}}):l().log({level:"warning",from:"usePersonProfilePageLayoutModulesByArea",type:"SpaceStoreUnavailable",data:{miscDataToConvertToString:{personProfileStoreId:t.id}}}));return(0,r().K8)((()=>b({personProfileStore:t,isMultiplayerWorkspace:n})),[t,n],{useDeepEqual:!0})}function b(e){var t;const{personProfileStore:o,isMultiplayerWorkspace:i}=e,n=o.getAssociatedCollectionStore(),r=Boolean(null===(t=o.getSpaceStore())||void 0===t?void 0:t.getSetting("hide_people_activity"));if(!n)return(0,d().E1)({isMultiplayerWorkspace:i,isActivityHidden:r});const s=n.getLayoutStore();if(!s)return(0,d().E1)({isMultiplayerWorkspace:i,isActivityHidden:r});const a=s.getModules();return!a||0===a.person_profile_page_main.length&&0===a.person_profile_page_details.length?(0,d().E1)({isMultiplayerWorkspace:i,isActivityHidden:r}):a}},973454:(e,t,o)=>{o.d(t,{p:()=>l,A:()=>c});var i=o(296540),n=()=>o(615234);const r=24*n().pT;function s(e){return a(e).status}function a(e){if(null==e||!e.enabled)return{status:"disabled"};const t=e.start_ts?1e3*e.start_ts-Date.now():0;return t<=0?{status:"active"}:t<=r?{status:"warning",nextUpdateInMs:t}:{status:"scheduled",nextUpdateInMs:t-r}}function l(e){const[t,o]=(0,i.useState)((()=>s(e)));return(0,i.useEffect)((()=>{if(null==e||!e.enabled)return;let t;return function i(){t=void 0;const{status:n,nextUpdateInMs:r}=a(e);o(n),r&&(t=setTimeout(i,r))}(),()=>{t&&(clearTimeout(t),t=void 0)}}),[e]),t}function c(e){const[t,o]=(0,i.useState)((()=>Date.now())),r=(null==e?void 0:e.enabled)&&e.start_ts;return(0,i.useEffect)((()=>{if("number"!=typeof r)return;const e=r;let t;return function i(){const r=Date.now();o(r);const s=e*n().TD-r;if(s>0){const e=s%n().Xb,o=0===e?n().Xb:e;t=setTimeout(i,o)}else t=void 0}(),()=>{t&&(clearTimeout(t),t=void 0)}}),[r]),{freezeStatus:s(e),minUntilFreeze:r?Math.floor((r*n().TD-t)/n().Xb):void 0}}},978598:(e,t,o)=>{o.d(t,{o:()=>l});var i=()=>o(590526),n=()=>o(860116),r=()=>o(449195),s=()=>o(299545),a=()=>o(474204);function l(e,t){const o=(0,i().K8)((()=>(0,n().I)(e.getAssociatedLayoutStore())),[e]),l=(0,i().K8)((()=>{var t;const o=null===(t=e.getAssociatedCollectionStore())||void 0===t?void 0:t.getFormat();return"section_hide"!==(0,r().z5)(null==o?void 0:o.page_section_visibility)}),[e]),c=(0,a().M)(t),d=(0,i().K8)((()=>(0,s().oC)(e,{})),[e]),u=(0,i().K8)((()=>e.canComment()),[e]);return o&&l&&!c&&(d>0||u)}},996262:(e,t,o)=>{o.d(t,{z:()=>x});o(898992),o(354520),o(581454);var i=o(296540),n=()=>o(993905),r=()=>o(590526),s=()=>o(401497),a=()=>o(795732),l=()=>o(249046),c=()=>o(487929),d=()=>o(713998),u=()=>o(651124),p=()=>o(390066),g=()=>o(69708),m=()=>o(543886),S=()=>o(405170),v=()=>o(457419),f=()=>o(377157),h=()=>o(9768),y=()=>o(720501),b=o(474848);function x(e){const{pageStore:t,disabled:o,context:x,wrapper:_,showDefaultTitle:k}=e,C=x===a().R.PeekView,w=(0,r().K8)((()=>(0,v().S)(t)),[t]),{collectionStore:I,collectionSchema:P,normalizedCollectionFormat:M}=(0,r().K8)((()=>{const e=t.getAssociatedCollectionStore(),o=null==e?void 0:e.getSchema(),i=null==e?void 0:e.getFormat();return{collectionStore:e,collectionSchema:o,normalizedCollectionFormat:i&&o&&(0,p().L)(i,o,void 0,u().jf.Collection)}}),[t]),A=(0,i.useCallback)((e=>{const o=null==P?void 0:P[e];if("relation"!==(null==o?void 0:o.type))return!1;const i=t.getPropertyValue(e);return 0===(0,d().bG)({relationValue:(0,d().n)(i),propertySchema:o,getRecordModel:t.getRecordModel,includeNoAccess:!0}).length}),[P,t]),T=(0,r().K8)((()=>{if(!P||!M)return[];return(0,c().u)({format:M,schema:P,visibilityLevels:["inline"]}).filter((e=>!A(e)))}),[P,A,M]),B=(0,r().K8)((()=>{if(!P||!M)return[];return(0,c().T)({format:M,schema:P,visibilityLevels:["minimal","inline"]}).filter((e=>"minimal"===e.visibility||!("inline"!==e.visibility||!A(e.section)))).map((e=>e.section))}),[P,A,M]),j=(0,r().K8)((()=>t.canEdit()),[t]),V=(0,s().IS)((()=>({inlinePageSectionsContainer:{...B.length>0?{marginBottom:h().YE+h().Lb+(j?-4:0)}:{}},minimalPropertiesContainer:{display:"flex",flexDirection:"row",flexWrap:"wrap"}})),[B.length,j]);return I&&P&&M&&(0!==T.length||0!==B.length)?_((0,b.jsx)(l().wt,{gap:4,children:(0,b.jsxs)(n().s,{allowSelectionWithin:!0,children:[T.length>0?(0,b.jsx)("div",{style:V.inlinePageSectionsContainer,children:(0,b.jsx)(f().A,{propertyIds:T,store:t,collectionStore:I,disabled:o,locked:w,blockPropertyValueOverlayStore:C?S().A:m().A,format:M,type:"inline"})}):void 0,B.length>0?(0,b.jsxs)(b.Fragment,{children:[k?(0,b.jsx)(y().j,{store:t,style:{marginInlineStart:6},children:(0,b.jsx)(g().sA,{id:"pageLayout.relationsGroup.defaultTitle",defaultMessage:"Relations"})}):void 0,(0,b.jsx)("div",{style:V.minimalPropertiesContainer,children:(0,b.jsx)(f().A,{propertyIds:B,store:t,collectionStore:I,disabled:o,locked:w,blockPropertyValueOverlayStore:C?S().A:m().A,format:M,type:"minimal"})})]}):void 0]})})):null}}}]);