"use strict";(globalThis.webpackChunknotion_next=globalThis.webpackChunknotion_next||[]).push([[2411,21475,32626,71481,90871,99171],{3486:(e,t,o)=>{o.d(t,{P:()=>r,_:()=>i});var n=()=>o(278238);function r(e){const t=(0,n().VA)(e);return"lightgray"===t?"gray":t}function i(e,t){const o=(0,n().VA)(e),r="lightgray"===o?"gray":o;return n().l8[t][r]}},24126:(e,t,o)=>{o.d(t,{c:()=>r});o(296540);const n={viewBox:"0 0 20 20",fittedViewBox:"3.9 2.75 12.18 14.49",svg:(0,o(474848).jsx)("path",{d:"M12.626 2.768a.625.625 0 0 1 0 1.224l-.126.013h-.125v4.794l3.366 5.159c.893 1.369-.03 3.17-1.623 3.281l-.156.006H6.039c-1.688 0-2.703-1.873-1.78-3.287l3.366-5.157V4.005H7.5a.625.625 0 0 1 0-1.25h5zM8.875 9.173l-.102.156-1.567 2.401h5.589l-1.569-2.403-.101-.156V4.005h-2.25z"})},r=(0,o(340498).wt)("beaker",n,"default")},31902:(e,t,o)=>{o.d(t,{A:()=>i});o(296540);var n=()=>o(69708),r=o(474848);const i=function({collectionViewName:e,collectionViewType:t}){return(0,o(59226).X)("allow_empty_view_name")&&""===e?null:e?(0,r.jsx)(o(288722).A,{children:e}):"page"===t?(0,r.jsx)(n().sA,{id:"database.collectionView.untitledName.untitled",defaultMessage:"Untitled"}):(0,r.jsx)(n().sA,{...o(403905).X[t]})}},35091:(e,t,o)=>{o.d(t,{A:()=>r});o(296540);var n=o(474848);const r=function({switcherProps:e,...t}){return(0,n.jsx)(o(497222).A,{right:(0,n.jsx)(o(287188).A,{onClick:t.onClick,disabled:t.disabled,...e}),...t})}},36012:(e,t,o)=>{o.d(t,{i:()=>I});o(581454);var n=o(296540),r=()=>o(484714),i=()=>o(590526),l=()=>o(401497),a=()=>o(807449),c=()=>o(736847),s=()=>o(589407),d=()=>o(69708),u=()=>o(100622),p=()=>o(736982),m=()=>o(908201),f=()=>o(44750),g=()=>o(148307),y=()=>o(632625),v=()=>o(534177),h=()=>o(69267),S=()=>o(339798),_=()=>o(362941),w=()=>o(342288),x=o(474848);function b(e,t,o){const n=t=>{const o={items:"items"};return{title:(0,x.jsx)(d().sA,{...(0,h().mv)({feature:t,databaseType:void 0}),values:o}),caption:e.formatMessage((0,h().I_)({feature:t,databaseType:void 0}),o)}},r=u().Tj.palette.brown,i=e=>(0,x.jsx)("div",{style:{height:28,width:28,borderRadius:4,display:"flex",alignItems:"center",justifyContent:"center",background:o.isInstalled?void 0:r[30]},children:(0,x.jsx)(y().p,{icon:e,themeMode:t,size:16,style:{fill:o.isInstalled?u().Tj.icon.primary:r[400]}})});switch(o.type){case"subitems":return{...n("subitem"),icon:i(g().A.images.appPackages.featureSubtasksSvg)};case"dependencies":return{...n("timeline_arrows_by"),icon:i(g().A.images.appPackages.featureDependenciesSvg)};default:(0,v().HB)(o.type)}}function T(e){const{legacyFeature:t,buttonMenuItemProps:o}=e,n=(0,d().tz)(),r=(0,l().eP)();return(0,x.jsx)(p().I,{buttonMenuItemProps:o,...b(n,r,t),right:t.isInstalled?(0,x.jsx)(_()._,{}):(0,x.jsx)(w().z,{isAdded:!1})})}const k=3;function I({title:e,templates:t,legacyUnpackagedFeatureTemplates:o,isSuggestedSection:g,additionalItems:y=[]}){const h=(0,l().IS)((()=>({title:{color:u().Tj.text.secondary},iconContainer:{height:28,width:28,display:"flex",alignItems:"center",justifyContent:"center"}})),[]),_=(0,m().ET)(),w=(0,r().v3)(),[b,I]=(0,n.useState)(!1),M=(0,i().K8)((()=>t.map((e=>(0,f().Z)({template:e,isInSuggestedSection:g,collectionContextStore:_,environment:w})))),[_,w,g,t]),C=o.map((e=>function({legacyUnpackagedFeatureTemplate:e,collectionContextStore:t}){return{key:e.type,action:()=>{const o=t.settingsStore;switch(e.type){case"subitems":S().a2({collectionSettingsStore:o,item:{type:"subitemV2",from:"customize_menu"}});break;case"dependencies":S().a2({collectionSettingsStore:o,item:{type:"dependencies",from:"customize_menu"}});break;default:(0,v().HB)(e.type)}},render:t=>(0,x.jsx)(T,{legacyFeature:e,buttonMenuItemProps:t})}}({legacyUnpackagedFeatureTemplate:e,collectionContextStore:_}))),A=[...M,...C,...y];if(0===A.length)return;const j={key:`${e}-toggle-truncation`,action:()=>{I(!b)},render:e=>(0,x.jsx)(p().I,{buttonMenuItemProps:e,title:(0,x.jsx)("div",{style:h.title,children:b?(0,x.jsx)(d().sA,{id:"useFeatureTemplatesSection.showLess",defaultMessage:"Show less"}):(0,x.jsx)(d().sA,{id:"useFeatureTemplatesSection.showMore",defaultMessage:"More"})}),icon:(0,x.jsx)("div",{style:h.iconContainer,children:(0,x.jsx)(a().I,{icon:s().ellipsisIcon,size:"lg",colorVariant:"secondary"})})})},V=b?A:A.slice(0,k);return{key:e,render:t=>(0,x.jsx)(c().A,{...t,title:e}),items:[...V,...A.length>k?[j]:[]]}}},44750:(e,t,o)=>{o.d(t,{Z:()=>C,p:()=>A});o(16280),o(581454),o(296540);var n=()=>o(564884),r=()=>o(484714),i=()=>o(590526),l=()=>o(401497),a=()=>o(675133),c=()=>o(663077),s=()=>o(898244),d=()=>o(100622),u=()=>o(534177),p=()=>o(339798),m=()=>o(736982),f=()=>o(403905),g=()=>o(244828),y=()=>o(144825),v=()=>o(101926),h=()=>o(513349),S=()=>o(922952),_=()=>o(913454),w=()=>o(204067),x=()=>o(272752),b=()=>o(362941),T=()=>o(960127),k=()=>o(342288),I=()=>o(902842),M=o(474848);function C({environment:e,template:t,isInSuggestedSection:o,collectionContextStore:n}){return{key:t.templateId,action:()=>{if(o)A({environment:e,template:t,collectionContextStore:n,suggestedFeatureAnalytics:void 0});else{const{collectionStore:o,collectionViewStore:r,collectionSettingsStore:i}=(0,x().i)(n);(0,h().UD)({template:t,environment:e,collectionStore:o,collectionViewStore:r,collectionSettingsStore:i,collectionContextStore:n})}},render:e=>(0,M.jsx)(j,{buttonMenuItemProps:e,template:t,isInSuggestedSection:o})}}function A({environment:e,collectionContextStore:t,template:o,suggestedFeatureAnalytics:r}){const i=t.collectionStore();if(!i)throw new Error("collectionStore not found");const l=i.getWorkflowTemplateId();r&&(0,n().u)({environment:e,event:{eventName:"suggested_feature_template_clicked",eventProperties:{origin:r.origin,selected_index:r.selectedIndex,template_ids_shown:r.shownTemplateIds,template_id_clicked:o.templateId,collection_template_id:l}}});const a=t.settingsStore;if((0,T().isWorkflowTemplateWithConfirmStep)(o))p().a2({collectionSettingsStore:a,item:{type:"confirmAddTemplate",template:o}});else if((0,c().Sz)(o)){const{relatedCollectionTemplateId:t}=o;!function({environment:e,template:t,collectionStore:o,relatedCollectionTemplateId:n}){var r;const i=null===(r=o.getParentBlockStore())||void 0===r?void 0:r.getParentStore();if(!i)throw new Error(`parentStore not found for ${o.id}`);if(!(0,S().u)(i))throw new Error(`Incorrect parent store: ${i.table} ${i.id}`);const l=_().globalWorkflowTemplates.fromIdOfType({templateId:n,type:"collection"});(0,y().openSelectedTemplateOnboardingModalForInAppFlows)({environment:e,template:l,origin:"suggested_feature_template",parentStore:i,navigateToOnFinish:"skip",relationInfos:[{type:"source",collectionStore:o,relationPropertyTemplate:t}],aiPrompt:void 0})}({environment:e,template:o,collectionStore:i,relatedCollectionTemplateId:t})}else g().createAndCommit({userAction:"FeatureTemplateMenuItem.addFeatureTemplateToTarget",environment:e,canUndo:!0,perform:c=>{v().ai({environment:e,transaction:c,collectionStore:i,template:o,logger:new(_().WorkflowTemplateLogger),origin:"suggested_feature"}),r&&(0,n().u)({environment:e,event:{eventName:"suggested_feature_template_added",eventProperties:{origin:r.origin,template_id_added:o.templateId,collection_template_id:l}}});const s=t.collectionViewStore();s&&h().UD({template:o,environment:e,collectionStore:i,collectionViewStore:s,collectionSettingsStore:a,collectionContextStore:t})}})}function j({buttonMenuItemProps:e,template:t,isInSuggestedSection:o}){const n=(0,l().IS)((()=>({iconContainer:{height:28,width:28,display:"flex",alignItems:"center",justifyContent:"center"},icon:{fill:d().Tj.icon.primary}})),[]),{collectionStore:c}=(0,x().V)(),p=(0,r().v3)(),g=(0,i().K8)((()=>(0,w().NU)({environment:p,collectionStore:c,templateId:t.templateId})),[p,c,t.templateId]),y=(0,i().K8)((()=>function({template:e,collectionStore:t}){const{type:o}=e;switch(o){case"property":const{value:n}=e;if((0,s().DQ)(n)){const o=function({templateId:e,propertyTemplateSchema:t,collectionStore:o}){const n=(0,w().S1)({collectionStore:o,templateId:e,instancePointerType:"property"});if(!n)return t.options??[];const r=o.getSchema()[n.id];if(!r||!(0,s().DQ)(r))return[];return r.options??[]}({templateId:e.templateId,propertyTemplateSchema:n,collectionStore:t}).map((e=>e.value));return(0,_().getWorkflowTemplateItemsCaption)(o)}return;case"collection_view":return`${a().A.formatMessage(f().X[e.value.type])} view`;case"compound":return;default:(0,u().HB)(o)}}({template:t,collectionStore:c})),[t,c]),v=(0,_().getWorkflowTemplateName)(t);return o?(0,M.jsx)(m().I,{buttonMenuItemProps:e,title:v,icon:(0,M.jsx)(I().n,{template:t}),right:(0,M.jsx)(k().z,{isAdded:g})}):(0,M.jsx)(m().I,{buttonMenuItemProps:e,title:v,caption:y,icon:(0,M.jsx)("div",{style:n.iconContainer,children:(0,M.jsx)(I().z,{template:t,iconStyle:n.icon})}),right:(0,M.jsx)(b()._,{})})}},62900:(e,t,o)=>{o.r(t),o.d(t,{arrowStraightLeftSmallIcon:()=>r,iconDefinition:()=>n});o(296540);const n={viewBox:"0 0 16 16",fittedViewBox:"2.12 3.05 11.76 9.9",directional:!0,svg:(0,o(474848).jsx)("path",{d:"M2.16 8.206q.046.13.148.236l4.32 4.32a.625.625 0 0 0 .884-.884L4.259 8.625h8.991a.625.625 0 1 0 0-1.25H4.259l3.253-3.253a.625.625 0 1 0-.884-.884l-4.32 4.32a.62.62 0 0 0-.148.648"})},r=(0,o(340498).wt)("arrowStraightLeftSmall",n,"small")},158115:(e,t,o)=>{o.r(t),o.d(t,{arrowChevronSingleRightFillSmallIcon:()=>r,iconDefinition:()=>n});o(296540);const n={viewBox:"0 0 16 16",fittedViewBox:"5.54 2.94 5.81 10.11",directional:!0,svg:(0,o(474848).jsx)("path",{d:"M11.13 8.53a.75.75 0 0 0 0-1.06L6.81 3.15a.75.75 0 0 0-1.06 1.06L9.54 8l-3.79 3.79a.75.75 0 0 0 1.06 1.06z"})},r=(0,o(340498).wt)("arrowChevronSingleRightFillSmall",n,"fillSmall")},167170:(e,t,o)=>{o.d(t,{_:()=>r});o(296540);const n={viewBox:"0 0 20 20",fittedViewBox:"3.29 3.29 13.41 13.41",svg:(0,o(474848).jsx)("path",{d:"M3.3 4.825c0-.842.683-1.525 1.525-1.525h3.15c.842 0 1.525.683 1.525 1.525v10.35c0 .842-.683 1.525-1.525 1.525h-3.15A1.525 1.525 0 0 1 3.3 15.175zm1.525-.275a.275.275 0 0 0-.275.275v10.35c0 .152.123.275.275.275h3.15a.275.275 0 0 0 .275-.275V4.825a.275.275 0 0 0-.275-.275zm5.675.275v3.15c0 .842.683 1.525 1.525 1.525h3.15c.842 0 1.525-.683 1.525-1.525v-3.15c0-.842-.683-1.525-1.525-1.525h-3.15c-.842 0-1.525.683-1.525 1.525m1.525-.275h3.15c.152 0 .275.123.275.275v3.15a.275.275 0 0 1-.275.275h-3.15a.275.275 0 0 1-.275-.275v-3.15c0-.152.123-.275.275-.275m0 5.95c-.842 0-1.525.683-1.525 1.525v3.15c0 .842.683 1.525 1.525 1.525h3.15c.842 0 1.525-.683 1.525-1.525v-3.15c0-.842-.683-1.525-1.525-1.525zm-.275 1.525c0-.152.123-.275.275-.275h3.15c.152 0 .275.123.275.275v3.15a.275.275 0 0 1-.275.275h-3.15a.275.275 0 0 1-.275-.275z"})},r=(0,o(340498).wt)("layout",n,"default")},175213:(e,t,o)=>{o.d(t,{G:()=>r});var n=()=>o(314529);function r(e,t){(0,n().DO_NOT_USE_trackLegacy)(e,"delete_property",t)}},199483:(e,t,o)=>{o.d(t,{o:()=>r});o(296540);const n={viewBox:"0 0 16 16",fittedViewBox:"3.7 1.41 8.6 12.78",svg:(0,o(474848).jsx)("path",{d:"M9.635 1.955a.5.5 0 0 0-.905-.328l-4.935 6.84a.5.5 0 0 0 .405.793h2.478l-.32 4.4a.5.5 0 0 0 .903.33l4.944-6.833a.5.5 0 0 0-.405-.793H9.32z"})},r=(0,o(340498).wt)("lightningFillSmall",n,"fillSmall")},200277:(e,t,o)=>{o.d(t,{$:()=>p,N:()=>d});o(944114),o(517642),o(658004),o(733853),o(845876),o(432475),o(515024),o(731698),o(898992),o(354520),o(430670),o(581454);var n=()=>o(536095),r=()=>o(663077),i=()=>o(496603),l=()=>o(534177),a=()=>o(299545),c=()=>o(913454),s=()=>o(204067);function d(e,t){const o=(0,s().Xg)(e,t),n=new Set(function(e){const t=e.getParentBlockStore();if(null==t||!t.isDefined())return[];return(null==t?void 0:t.getCollectionViewStores().map((e=>e.getName())).filter(l().O9))??[]}(t));return function(e){const t=new Set(e.map((e=>e.templateId))),o=[];for(const n of e)o.push(...u(n).filter((e=>!t.has(e))).map((e=>c().globalWorkflowTemplates.fromId(e))).filter(r().bz).filter((e=>!(0,r().Sz)(e))));return o}(o).filter((e=>"collection_view"!==e.type||!n.has(e.value.name??"")))}function u(e){return"compound"===e.type||"collection"===e.type?e.value.templateItems.filter((e=>"optionalDefaultOn"===e.optionality||"optionalDefaultOff"===e.optionality)).map((e=>e.pointer)):[]}function p({persona:e,parentStore:t}){const o=e?(0,n().Qf)({persona:e}):[],r=c().globalWorkflowTemplates.allOfType({templateIds:o??[],type:"collection"}),l=i().hS(function({collectionTemplates:e,parentStore:t}){if(!t)return e;if((0,a().Yu)(t))return e;const o=(0,a().$R)(t)?t.getTeamPageStores():t.getContentStores(),n=new Set((0,i().oE)(o.flatMap((e=>e.getOwnedAndLinkedCollectionStores().map((e=>e.getWorkflowTemplateId()))??[])))),r=[],l=[];for(const i of e)n.has(i.templateId)?r.push(i):l.push(i);return[...l,...r]}({collectionTemplates:[...r,...c().globalWorkflowTemplates.allOfType({templateIds:(0,n().dj)(),type:"collection"})],parentStore:t}),(e=>e.templateId));return l}},216304:(e,t,o)=>{o.r(t),o.d(t,{WorkflowSettingsViews:()=>A});o(16280),o(898992),o(354520),o(581454),o(296540);var n=()=>o(484714),r=()=>o(590526),i=()=>o(401497),l=()=>o(807449),a=()=>o(663639),c=()=>o(736847),s=()=>o(617668),d=()=>o(69708),u=()=>o(100622),p=()=>o(534177),m=()=>o(154017),f=()=>o(339798),g=()=>o(735695),y=()=>o(736982),v=()=>o(985156),h=()=>o(745266),S=()=>o(31902),_=()=>o(231314),w=()=>o(244828),x=()=>o(513349),b=()=>o(200277),T=()=>o(36012),k=()=>o(272752),I=()=>o(362941),M=()=>o(342288),C=o(474848);function A({collectionSettingsStore:e,collectionContextStore:t}){const o=(0,d().tz)(),n=[j(),R(t)].filter(p().Vq);return(0,C.jsx)(g().A,{collectionSettingsStore:e,title:o.formatMessage({id:"workflowSettingsViews.title",defaultMessage:"Views"}),children:(0,C.jsx)(a().A,{disableInitialScroll:!0,type:a().O.Vertical,initialFocus:void 0,resetFocusOnMouseOut:!0,sections:n})})}function j(){const{collectionContextStore:e}=(0,k().V)(),t=(0,r().K8)((()=>{var t;return(null===(t=e.collectionViewBlockStore())||void 0===t?void 0:t.getCollectionViewStores())||[]}),[e]).map((t=>({key:t.id,action:()=>{},render:o=>(0,C.jsx)(V,{buttonMenuItemProps:o,collectionViewStore:t,collectionContextStore:e})})));return{key:"added_views",render:e=>(0,C.jsx)(c().A,{...e,title:`${t.length} views`}),items:t}}function V({buttonMenuItemProps:e,collectionViewStore:t,collectionContextStore:o}){const i=(0,n().v3)(),{viewName:l,viewType:a,viewIcon:c}=(0,r().K8)((()=>({viewName:t.getName(),viewType:t.getType(),viewIcon:t.getFormat().collection_view_icon})),[t]);if(!a)throw new Error("View type not found for ${collectionViewStore.id}");return(0,C.jsx)(y().I,{buttonMenuItemProps:e,title:(0,C.jsx)(S().A,{collectionViewType:a,collectionViewName:l}),icon:(0,C.jsx)(h().h,{color:"regular",viewType:a,viewIcon:c}),right:(0,C.jsx)(I()._,{}),onClick:()=>{(0,x().Sj)({environment:i,collectionContextStore:o,collectionViewId:t.id})}})}function R(e){const t=(0,d().tz)(),o=(0,n().v3)(),a=(0,r().K8)((()=>{const t=e.collectionStore();if(t)return(0,b().N)(o,t).filter((e=>"collection_view"===e.type))}),[e,o]),c=function(){const{collectionContextStore:e}=(0,k().V)(),t=(0,n().v3)(),o=(0,i().IS)((()=>({iconWithBackground:{backgroundColor:u().Tj.background.secondary}})),[]);return{key:"add_new_view",action:()=>{},render:n=>(0,C.jsx)(y().I,{buttonMenuItemProps:n,title:(0,C.jsx)(d().sA,{id:"workflowTemplates.settings.views.addNewView.title",defaultMessage:"Empty view"}),icon:(0,C.jsx)(_().y,{backgroundColor:o.iconWithBackground.backgroundColor,icon:(0,C.jsx)(l().I,{icon:s().plusIcon,colorVariant:"primary"})}),right:(0,C.jsx)(M().z,{isAdded:!1}),onClick:()=>{const o="table";w().createAndCommit({userAction:"CollectionViewTabBar.createGenericViewType",environment:t,canUndo:!0,perform:n=>{(0,v().Z)({environment:t,collectionContextStore:e,newViewType:o,transaction:n,settingsDestination:"skip"})}}),f().a2({collectionSettingsStore:e.settingsStore,item:{type:"createView",analytics:void 0}}),(0,m().b)({environment:t,collectionContextStore:e,view_type:o,from:"addButton"})}})}}();return(0,T().i)({title:t.formatMessage({id:"workflowTemplates.settings.views.suggestedViews.title",defaultMessage:"New view"}),templates:a??[],isSuggestedSection:!0,legacyUnpackagedFeatureTemplates:[],additionalItems:[c]})}},231314:(e,t,o)=>{o.d(t,{y:()=>l});o(296540);var n=()=>o(401497),r=()=>o(100622),i=o(474848);function l({icon:e,backgroundColor:t,backgroundSize:o}){const l=(0,n().IS)((()=>({iconContainer:{height:o??28,width:o??28,borderRadius:6,display:"flex",alignItems:"center",justifyContent:"center",background:t??r().Tj.background.tertiaryTranslucent}})),[t,o]);return(0,i.jsx)("div",{style:l.iconContainer,children:e})}},235773:(e,t,o)=>{o.r(t),o.d(t,{iconDefinition:()=>r,notionTemplateTintableIcon:()=>i});o(296540);var n=o(474848);const r={viewBox:"0 0 20 20",fittedViewBox:"1.58 3 16.83 14",svg:(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("path",{fillRule:"evenodd",d:"M6.014 16.338a4.43 4.43 0 0 0 4.43-4.48H8.88c-.254 0-.512 0-.732-.018a2.3 2.3 0 0 1-.86-.226 2.24 2.24 0 0 1-.979-.979 2.3 2.3 0 0 1-.226-.86 10 10 0 0 1-.018-.731V7.48a4.44 4.44 0 0 1 2.297.678 4.431 4.431 0 0 0-6.777 3.751 4.43 4.43 0 0 0 4.43 4.43z",clipRule:"evenodd"}),(0,n.jsx)("path",{d:"M12.902 11.044c.463-.802.694-1.203.997-1.338a1.02 1.02 0 0 1 .828 0c.302.135.534.536.996 1.338l2.028 3.512c.463.802.695 1.203.66 1.532-.03.287-.18.548-.414.718-.267.194-.73.194-1.656.194h-4.057c-.925 0-1.388 0-1.656-.194a1.02 1.02 0 0 1-.414-.718c-.035-.329.197-.73.66-1.532z"}),(0,n.jsx)("path",{fillRule:"evenodd",d:"M7.287 4.63c0-.571 0-.856.111-1.074.098-.192.254-.347.445-.445C8.061 3 8.346 3 8.916 3h4.38c.57 0 .854 0 1.072.111.191.098.347.253.445.445.11.218.11.503.11 1.073v3.852a2.24 2.24 0 0 0-1.52.109c-.46.204-.75.56-.94.83q-.318.472-.595.97l-.024.043-.118.203h-2.81c-.57 0-.855 0-1.073-.11a1 1 0 0 1-.445-.445c-.11-.218-.11-.503-.11-1.074z",clipRule:"evenodd"})]})},i=(0,o(340498).wt)("notionTemplateTintable",r,"tintable")},236248:(e,t,o)=>{o.d(t,{b:()=>y,v:()=>v});var n=()=>o(755531),r=()=>o(484714),i=()=>o(590526),l=()=>o(79926),a=()=>o(391400),c=()=>o(732810),s=()=>o(888325),d=()=>o(187174),u=()=>o(96689),p=()=>o(753812);const m=new(l().O2)("loadWorkflowTemplateInstances",(async()=>await Promise.all([o.e(75134),o.e(35530),o.e(9773),o.e(36556),o.e(55373),o.e(36192),o.e(40537),o.e(71562),o.e(96346),o.e(27992),o.e(63452),o.e(66249),o.e(92845),o.e(87249),o.e(79022),o.e(14578),o.e(87017),o.e(46414),o.e(61165),o.e(47668),o.e(24587),o.e(67494),o.e(10522),o.e(48486),o.e(92924),o.e(71481)]).then(o.bind(o,191458))));var f=()=>o(299177);const g=!1;function y(e){var t;const o=null===(t=(0,l().fJ)(m).value)||void 0===t?void 0:t.loadWorkflowTemplateInstances;(0,i().K8)((()=>{if(!o)return;const t=function(e){return!(e instanceof c().m)}(e)?e.collectionStore():e;t&&o(t)}),[o,e])}function v(){const e=(0,r().v3)(),t=(0,i().K8)((()=>{var e;if(function(){const e=a().A.state.initialRenderCompleted;g&&!e&&console.log("Initial page render is not yet completed, delaying refresh of workflow template instances.");return e}())return null===(e=(0,n().S)())||void 0===e?void 0:e.getSpaceId()}),[]);(0,d().Yb)((async()=>{if(!t)return;(f().A.debug||g)&&console.log("Refreshing workflow template instance map for space",t);const o={table:u().NX,id:t,spaceId:t},n=await p().callApi({eventName:"getWorkflowTemplateInstances",environment:e,data:{spaceId:o.spaceId,scopeTable:o.table,scopeId:o.id,enableInstanceRobustness:!0}});if("success"===n.type){const e=(0,s()._)(o);f().A.setState({...f().A.state,[e]:n.data.instanceMap[e]})}}),[e,t])}},241319:(e,t,o)=>{o.d(t,{y:()=>i});o(898992),o(672577);var n=()=>o(534177),r=()=>o(239381);function i(e){var t;const{actionModels:o,id:i}=e,l=(0,r().y5)(i),a="action"===l.source?o.find((e=>e.id===l.action_id)):void 0,c=(0,n().O9)(a)&&a.isType("create_page")?null===(t=a.getConfig())||void 0===t?void 0:t.collection:void 0;return{automationValueInfo:l,collectionPointer:c,actionModel:a}}},245720:(e,t,o)=>{o.d(t,{W:()=>n});const n=(0,o(69708).YK)({done:{id:"modal.doneButton",defaultMessage:"Done"},cancel:{id:"modal.cancelButton",defaultMessage:"Cancel"},back:{id:"modal.backButton",defaultMessage:"Back"}})},253579:(e,t,o)=>{o.d(t,{Rp:()=>l,iX:()=>d,pM:()=>c,rW:()=>a,u2:()=>s});var n=()=>o(338381),r=()=>o(882722),i=()=>o(397526);function l(e){if((0,n().EV)(e,(e=>e.classList&&(e.classList.contains(r().Hfz)||e.classList.contains(r().uMd)||e.classList.contains(r().LvP)||e.classList.contains(r().sux)||e.classList.contains(r().HA4)||e.classList.contains(r().z$c)))))return!1;const t=(0,n().EV)(e,(e=>e.classList&&e.classList.contains(i().hq)));return Boolean(t)}function a(e){const t=(0,n().EV)(e,(e=>e.classList&&e.classList.contains(r().N11)));return Boolean(t)}function c(e){const t=(0,n().EV)(e,(e=>e.classList&&e.classList.contains(r().xeF)));return Boolean(t)}function s(e){const t=(0,n().EV)(e,(e=>e.classList&&e.classList.contains(r().Jnf)));return Boolean(t)}function d(e){const t=(0,n().EV)(e,(e=>e.classList&&e.classList.contains(r().kew)));return Boolean(t)}},255824:(e,t,o)=>{o.d(t,{a:()=>i});var n=()=>o(590526);const r=new(o(140934).ComputedStore)((()=>o(263711).g.state.isOpen),{debugName:"IsInPageViewModeStore"});function i(){return(0,n().O$)(r)}},272752:(e,t,o)=>{o.d(t,{V:()=>l,i:()=>a});var n=()=>o(590526),r=()=>o(220719),i=()=>o(908201);function l(){const e=(0,i().ET)(),{collectionStore:t,collectionViewStore:o,collectionSettingsStore:r}=(0,n().K8)((()=>a(e)),[e]);return{collectionStore:t,collectionViewStore:o,collectionSettingsStore:r,collectionContextStore:e}}function a(e){return{collectionStore:(0,r().o9)(e.collectionStore(),"collectionStore not found"),collectionViewStore:(0,r().o9)(e.collectionViewStore(),"collectionViewStore not found"),collectionSettingsStore:e.settingsStore}}},283163:(e,t,o)=>{o.d(t,{h:()=>l});o(296540);var n=()=>o(473541),r=()=>o(807449),i=o(474848);function l(){return(0,i.jsx)(r().I,{icon:n().w,size:"lg",colorVariant:"primary"})}},299177:(e,t,o)=>{o.d(t,{A:()=>i});class n extends(()=>o(757695))().Store{getInitialState(){return{}}}const r=new n;o(852832).exposeDebugValue("SpaceWorkflowTemplateInstanceMapStore",r);const i=r},326887:(e,t,o)=>{o.d(t,{$X:()=>i,H8:()=>l,x2:()=>r});var n=()=>o(534177);function r(e){return"event"===e||"recurrence"===e}function i(e){const t=e.getTrigger();return(0,n().O9)(t)&&r(t.type)}function l(e){return"event"===e?"event":"recurrence"===e?"recurrence":void(0,n().HB)(e)}},342288:(e,t,o)=>{o.d(t,{z:()=>s});o(296540);var n=()=>o(401497),r=()=>o(807449),i=()=>o(349679),l=()=>o(863330),a=()=>o(100622),c=o(474848);function s({isAdded:e}){const t=(0,n().IS)((()=>({circle:{height:24,width:24,borderRadius:50,display:"flex",alignItems:"center",justifyContent:"center",background:e?a().Tj.blue.background.secondary:a().Tj.gray.background.secondaryTranslucent}})),[e]);return(0,c.jsx)("div",{style:t.circle,children:e?(0,c.jsx)(r().I,{icon:i().checkmarkSmallIcon,size:"sm",colorPalette:"blue",colorVariant:"accentPrimary"}):(0,c.jsx)(r().I,{icon:l().plusSmallIcon,size:"sm",colorVariant:"secondary"})})}},348869:(e,t,o)=>{o.d(t,{g:()=>a});o(944114);var n=()=>o(792057),r=()=>o(785728),i=()=>o(532659),l=()=>o(753812);async function a(e){const{environment:t,onResponse:o,data:a,userId:c,tracking:s,abortSignal:d}=e,u=await l().callStreamApi({eventName:"runInferenceTranscript",environment:t,data:a,userId:c,tracking:s,abortSignal:d,headers:(0,r().WS)({spaceId:a.spaceId})});if("success"!==u.type)return null!=d&&d.aborted?{error:{message:"Aborted",code:0}}:(n().Qg(u),{error:{message:u.error.message,code:u.status}});const p=[];if(i().hS.is(u.data))for await(const n of u.data){if("error"===n.type)return{error:{message:n.message,code:n.errorCode}};null==o||o(n),p.push(n)}return{value:p}}},362941:(e,t,o)=>{o.d(t,{_:()=>a});o(296540);var n=()=>o(401497),r=()=>o(807449),i=()=>o(158115),l=o(474848);function a(){const e=(0,n().IS)((()=>({icon:{marginInlineStart:6}})),[]);return(0,l.jsx)("span",{style:e.icon,children:(0,l.jsx)(r().I,{icon:i().arrowChevronSingleRightFillSmallIcon,size:"xs",colorVariant:"tertiary"})})}},390527:(e,t,o)=>{o.r(t),o.d(t,{DEFAULT_MAX_RECURRENCE_DUPLICATION_PER_TASK:()=>V,MAXIMUM_DAILY_RECURRENCES_IN_PATH:()=>b,MAXIMUM_NESTED_RECURRENCE_LEVEL:()=>x,MAX_RECURRENCE_INTERVAL:()=>v,MAX_RECURRENCE_NUMBER_OF_RUNS:()=>h,RRULE_WEEKDAYS_MAP:()=>y,adjustedStartDateIfPossible:()=>k,areRecurrenceSchedulesEqual:()=>D,convertFromUnpersistedRecurrenceConfig:()=>P,convertToUnpersistedRecurrenceConfig:()=>R,getFormattedEndCondition:()=>j,getFormattedNextRecurrenceTime:()=>A,getNewEndTimestamp:()=>E,getNextDateUtc:()=>C,getRecurrenceAfter:()=>I,isRunningBetweenMidnightAnd3AM:()=>M,isValidRecurrenceInterval:()=>S,isValidRecurrenceNumberOfRuns:()=>_,rruleFromRecurrence:()=>w,templateAncestorsViolateRecurrenceNesting:()=>T});o(898992),o(354520),o(581454);var n=()=>o(906745);o(944114);function r(e,...t){if(0===t.length)return e.map((e=>[e]));const o=[];for(const n of e)o.push(...r(t[0],...t.slice(1)).map((e=>[n,...e])));return o}var i=()=>o(496603),l=()=>o(534177),a=()=>o(720665),c=()=>o(597777),s=()=>o(869190),d=()=>o(416504),u=()=>o(402390);class p extends(()=>o(896346))().p3{constructor(e,t){super(e,t)}after(e,t){return super.after(e,t)}}var m=()=>o(912720);const f=(0,o(69708).YK)({dateAtTime:{id:"automations.recurrenceHelpers.dateAtTime",defaultMessage:"{date} at {time}"},dateBetweenMidnightAnd3AM:{id:"automations.recurrenceHelpers.dateBetweenMidnightAnd3AM",defaultMessage:"{date} between 12â€“3 AM"},numberEndConditionDescription:{id:"automations.recurrenceHelpers.numberEndConditionDescription",defaultMessage:"{number, plural, one {After {number} run} other {After {number} runs}}"},noEndCondition:{id:"automations.recurrenceHelpers.noEndCondition",defaultMessage:"Never"}}),g={hour:p.HOURLY,day:p.DAILY,week:p.WEEKLY,month:p.MONTHLY,year:p.YEARLY},y={MO:p.MO,TU:p.TU,WE:p.WE,TH:p.TH,FR:p.FR,SA:p.SA,SU:p.SU},v=99,h=999;function S(e){return(0,a().Et)(e)&&Number.isInteger(e)&&e>0&&e<=v}function _(e){return(0,a().Et)(e)&&Number.isInteger(e)&&e>0&&e<=h}function w(e){const{start_date:t,frequency:o,interval:n,weekdays:i,timezone:a,hour:s,minute:d}=e,u=(0,c().eU)(t);"hour"===o&&u.setUTCHours(s??0,d??0,0,0);const m="week"===o&&i?i.map((e=>y[e])):void 0,f={};return(0,l().O9)(e.end_condition)&&("date"===e.end_condition.type?f.until=(0,c().eU)(e.end_condition.end_at):"number"===e.end_condition.type?f.count=e.end_condition.number_of_occurrences:(0,l().HB)(e.end_condition)),"month"===e.frequency&&(0,l().O9)(e.monthly_restriction)&&("monthdays"===e.monthly_restriction.type?f.bymonthday=e.monthly_restriction.monthdays:"weekdays_in_month"===e.monthly_restriction.type?f.byweekday=r(e.monthly_restriction.weekdays,e.monthly_restriction.week_numbers).map((([e,t])=>y[e].nth(t))):(0,l().HB)(e.monthly_restriction)),new p({freq:g[o],dtstart:u,interval:n,byweekday:m,tzid:"hour"===o?void 0:a,..."hour"===o?{}:{byhour:s??0,byminute:d??0,bysecond:0},...f})}const x=1,b=1;function T(e){var t;if(0===e.length)return{violatesConstraint:!1,templateNestingExceedsMaxDepth:!1,ancestorHasDailyTemplate:!1,nestedDepthOfAutomationAncestors:void 0,immediateAncestorRecurrenceType:void 0};const o=e.filter((e=>{var t;return"day"===(null===(t=e.getRecurrence())||void 0===t?void 0:t.frequency)})),n=e.length,r=null===(t=e[0].getRecurrence())||void 0===t?void 0:t.frequency,i=n>x,l=o.length>=b;return{violatesConstraint:i||l,templateNestingExceedsMaxDepth:i,ancestorHasDailyTemplate:l,nestedDepthOfAutomationAncestors:n,immediateAncestorRecurrenceType:r}}function k(e){var t;const{recurrence:o,afterDate:r}=e;if("number"===(null===(t=o.end_condition)||void 0===t?void 0:t.type)||o.start_date>=r)return o;let i=n().DateTime.fromMillis(o.start_date,{zone:"utc"});const l=n().DateTime.fromMillis(r,{zone:"utc"});switch(o.frequency){case"hour":{const e=Math.floor(l.diff(i,"hours").hours/o.interval);i=i.plus({hours:e*o.interval});break}case"year":{const e=Math.floor(l.diff(i,"years").years/o.interval);i=i.plus({years:e*o.interval});break}case"month":{const e=Math.floor(l.diff(i,"months").months/o.interval);i=i.plus({months:e*o.interval});break}case"week":{const e=Math.floor(l.diff(i,"weeks").weeks/o.interval);i=i.plus({weeks:e*o.interval});break}case"day":{const e=Math.floor(l.diff(i,"days").days/o.interval);i=i.plus({days:e*o.interval});break}}return{...o,start_date:(0,c().DH)(i.toMillis())}}function I(e){const{recurrence:t,afterDate:o}=e;if((0,m().wt)(t)){const e=(0,c().l1)(o);return t.start_date>=e?new Date(t.start_date):void 0}{const e=w(k({recurrence:t,afterDate:o})).after((0,c().eU)(o));if(!e)return;return(0,c().h1)(e)}}function M(e){return 0===e.hour||1===e.hour||2===e.hour}function C(e){return w(e).after((0,c().eU)((0,c().Rz)()))||void 0}function A(e){const{recurrence:t,intl:o}=e,r=C(P(t));if(!r)return;const i=M(t),l=n().DateTime.fromJSDate(r).toUTC().setZone("local",{keepLocalTime:!0}).setLocale((0,u().H)(o)).setZone(t.timezone),a=(0,s().Yq)({date:l,dateFormat:"relative",allowRelativeDates:!0,intl:o,shortenDate:!0});if(i)return o.formatMessage(f.dateBetweenMidnightAnd3AM,{date:a});{let e=l.toLocaleString(n().DateTime.TIME_SIMPLE);return t.timezone!==(0,d().P)()&&(e+=` ${l.toFormat("ZZZZ")}`),o.formatMessage(f.dateAtTime,{date:a,time:e})}}function j(e,t){return(0,l().O9)(e)?"number"===e.type?t.formatMessage(f.numberEndConditionDescription,{number:e.number_of_occurrences}):"date"===e.type?(0,s().Yq)({date:n().DateTime.fromMillis(e.end_at),dateFormat:"relative",allowRelativeDates:!0,intl:t,shortenDate:!0}):void(0,l().HB)(e):t.formatMessage(f.noEndCondition)}const V=100;function R(e){return{...e,start_date:(0,c().l1)(e.start_date),end_condition:e.end_condition?"number"===e.end_condition.type?e.end_condition:"date"===e.end_condition.type?{type:"date",end_at:(0,c().l1)(e.end_condition.end_at)}:(0,l().HB)(e.end_condition):void 0}}function E(e,t,o){return e.plus(o-t)}function O(e,t){const o=n().DateTime.fromMillis(t.end_at).set({hour:e.hour??0,minute:e.minute??0});return{type:"date",end_at:(0,c().Rz)(o.toJSDate())}}function P(e){return{...e,start_date:(0,c().Rz)(new Date(e.start_date)),end_condition:e.end_condition?"number"===e.end_condition.type?e.end_condition:"date"===e.end_condition.type?O(e,e.end_condition):(0,l().HB)(e.end_condition):void 0}}function D(e,t){const o=i().fN(e,(e=>void 0!==e)),n=i().fN(t,(e=>void 0!==e));return i().n4(o,n)}},399762:(e,t,o)=>{o.d(t,{O:()=>s,q:()=>d});o(296540);var n=()=>o(401497),r=()=>o(100622),i=()=>o(284371),l=()=>o(288722),a=()=>o(881690),c=o(474848);function s(e){const{value:t,color:o,format:s,showEllipsis:d,onClickRemove:u,showRemoveButton:p,isSingle:m,shouldShrink:f,hideTooltip:g,description:y,tooltipPlacement:v,removeBackground:h,...S}=e,_=(0,n().DP)(),w=(0,n().IS)((()=>({token:{...d&&i().RC,...h&&{paddingInlineStart:0,paddingInlineEnd:0}}})),[d,h]),{textColor:x,backgroundColor:b}=(0,r().LD)(_,o),T=h?"transparent":b;return t?(0,c.jsx)(a().A,{format:s,value:(0,c.jsx)(l().A,{children:t}),description:y,onClickRemove:u,showRemoveButton:p,isSingle:m,color:x,backgroundColor:T,shouldShrink:f,tooltipPlacement:v,showTooltip:g?"never":"overflow",style:w.token,...S}):null}function d(e){const{value:t,color:o,format:s,showEllipsis:d,onClickRemove:u,showRemoveButton:p,isSingle:m,shouldShrink:f,groupColor:g,tooltipPlacement:y,description:v,hideTooltip:h,...S}=e,_=(0,n().DP)(),w=(0,n().IS)((()=>({token:{...d&&i().RC}})),[d]);if(!t)return null;const{textColor:x,backgroundColor:b}=(0,r().LD)(_,o??g??"gray");let T;return T=o||(g||"gray"),(0,c.jsx)(a().A,{format:s,value:(0,c.jsx)(l().A,{children:t}),description:v,onClickRemove:u,showRemoveButton:p,isSingle:m,color:x,backgroundColor:b,shouldShrink:f,showTooltip:h?"never":"overflow",style:w.token,isRound:!0,showColoredDot:T,tooltipPlacement:y,...S})}},422540:(e,t,o)=>{o.d(t,{$0:()=>v,Fx:()=>T,Ge:()=>f,I3:()=>p,Kj:()=>x,PP:()=>k,TK:()=>I,Yy:()=>u,aE:()=>M,cQ:()=>b,kH:()=>g,m7:()=>m,nq:()=>_,nv:()=>h,tj:()=>y});o(898992),o(354520),o(737550);var n=()=>o(496603),r=()=>o(534177),i=()=>o(381283),l=()=>o(898244),a=()=>o(651124),c=()=>o(349835),s=()=>o(390066);const d={checkbox:!0,date:!0,email:!0,multi_select:!0,number:!0,person:!0,phone_number:!0,relation:!0,select:!0,status:!0,text:!0,title:!0,url:!0,auto_increment_id:!1,button:!1,created_by:!1,created_time:!1,file:!1,formula:!1,last_edited_by:!1,last_edited_time:!1,last_visited_time:!1,location:!1,rollup:!1,verification:!1,place:!1},u={checkbox:[{type:"checkbox"}],date:[{type:"date"}],email:[{type:"text"}],multi_select:[{type:"text"},{of:{type:"text"},type:"array"}],number:[{type:"number"}],person:[{type:"person"},{of:{type:"person"},type:"array"}],phone_number:[{type:"text"}],relation:[{type:"block"},{of:{type:"block"},type:"array"}],select:[{type:"text"},{of:{type:"text"},type:"array"}],status:[{type:"text"},{of:{type:"text"},type:"array"}],text:void 0,title:void 0,url:[{type:"text"}]};function p(e){return Boolean(d[e.type]&&!(0,l().UU)(e)&&(!(0,l().$M)(e)||void 0===(0,l().om)(e)))}function m(e){const{collectionFormat:t,collectionSchema:o,filter:i,sort:c,sourcePropertyIds:d}=e,u=(d??(0,r().uv)(o)).filter(((t,n,r)=>{const a=o[t];return!(!a||!p(a))&&(("relation"!==a.type||!e.restrictCrossSpace||!(0,l().o2)(e.spaceId,a))&&(!i||i([t,a],n,o)))}));if(0===u.length)return[];if(!t||!1===c)return u;const m=(0,s().L)(t,o,void 0,a().jf.Page).collection_page_properties||[];return n().Ul(u,(e=>m.findIndex((t=>t.property===e))))}function f(e){const{collectionFormat:t,collectionSchema:o,sort:l}=e,c=(0,r().uv)(o).filter(((e,t,n)=>{const r=o[e];return!(!r||!(0,i().J)(r))}));if(0===c.length)return[];if(!t||!1===l)return c;const d=(0,s().L)(t,o,void 0,a().jf.Page).collection_page_properties||[];return n().Ul(c,(e=>d.findIndex((t=>t.property===e))))}function g(e){return e.type===c().M9.InvalidCharacter?{type:e.type,character:e.character}:e.type===c().M9.TokenExpected?{type:e.type,token:e.token}:e.type===c().uW.MissingSchemaPropertyOnThisRow||e.type===c().uW.MissingSchemaPropertyOnCollection?{type:e.type,collectionId:e.collectionId,property:e.property,errorSource:e.errorSource}:e.type===c().uW.ThisRowBlockPropertyMismatchCollection?{type:e.type,thisRowCollection:e.thisRowCollection,errorSource:e.errorSource}:e.type===c().uW.MissingContextVariable?{type:e.type,valueId:e.valueId,errorSource:e.errorSource}:e.type===c().uW.FunctionCallTooFewArguments?{type:e.type,numArguments:e.numArguments,errorSource:e.errorSource}:e.type===c().uW.FunctionCallUnexpectedArgument?{type:e.type,parameterIndex:e.parameterIndex,errorSource:e.errorSource}:e.type===c().uW.FunctionCallArgumentWrongType?{type:e.type,argumentType:e.argumentType,libraryFunctionName:e.libraryFunction.name,parameterIndex:e.parameterIndex,errorSource:e.errorSource}:e.type===c().uW.MissingDataDependencyBlock?{type:e.type,blockPointer:e.blockPointer,node:e.node,errorSource:e.errorSource}:e.type===c().uW.MissingDataDependencyPerson?{type:e.type,personPointer:e.personPointer,errorSource:e.errorSource}:e.type===c().uW.MemberPropertyMismatchCollection?{type:e.type,blockCollection:e.blockCollection,errorSource:e.errorSource}:e.type===c().uW.DownstreamParseFailure?{type:e.type,collectionId:e.collectionId,property:e.property,errorSource:e.errorSource}:e.type===c().uW.ContextVariableWrongType?{type:e.type,valueId:e.valueId,expectedType:e.expectedType,resultType:e.resultType,errorSource:e.errorSource}:e.type===c().uW.DisallowedValueType?{type:e.type,expressionValue:e.expressionValue,allowedValueTypes:e.allowedValueTypes,errorSource:e.errorSource}:e.type===c().uW.LibraryFunctionExecutionError?{type:e.type,error:e.error,libraryFunctionName:e.libraryFunction.name,errorSource:e.errorSource}:"errorSource"in e?{type:e.type,errorSource:e.errorSource}:{type:e.type}}const y={checkbox:!0,date:!0,email:!0,multi_select:!0,number:!0,person:!0,phone_number:!0,relation:!0,select:!0,status:!0,text:!0,title:!0,url:!0,button:!1,file:!1,verification:!1,auto_increment_id:!1,created_by:!1,created_time:!1,formula:!1,last_edited_by:!1,last_edited_time:!1,last_visited_time:!1,location:!1,rollup:!1,place:!1};function v(e){return Boolean(y[e.type])}function h(e){const{collectionFormat:t,collectionSchema:o,filter:i,sort:c}=e,d=(0,r().uv)(o).filter(((e,t,n)=>{var r;const a=o[e];return!(!a||!y[a.type])&&((!(0,l().$M)(a)||null===(r=(0,l().om)(a))||void 0===r||!r.auto_update_on_edit)&&(!i||i([e,a],t,o)))}));if(0===d.length)return[];if(!t||!1===c)return d;const u=(0,s().L)(t,o,void 0,a().jf.Page).collection_page_properties||[];return n().Ul(d,(e=>u.findIndex((t=>t.property===e))))}const S={checkbox:!0,email:!0,multi_select:!0,number:!0,person:!0,phone_number:!0,relation:!0,select:!0,status:!0,text:!0,title:!0,url:!0,auto_increment_id:!1,button:!1,created_by:!1,created_time:!1,date:!1,file:!1,formula:!1,last_edited_by:!1,last_edited_time:!1,last_visited_time:!1,location:!1,rollup:!1,verification:!1,place:!1};function _(e){return S[e.type]}const w={checkbox:!0,created_by:!0,created_time:!0,date:!0,email:!0,multi_select:!0,number:!0,person:!0,phone_number:!0,relation:!0,select:!0,status:!0,text:!0,title:!0,url:!0,last_edited_by:!0,last_edited_time:!0,auto_increment_id:!1,button:!1,file:!1,formula:!1,last_visited_time:!1,location:!1,rollup:!1,verification:!1,place:!1};function x(e){return w[e.type]}function b(e){return 0===e}function T(e){return function(e){return"button_block"===e||"button_property"===e}(e)}function k(e){const{property:t,collectionSchema:o}=e;return!!o&&!o[t]}function I(e){const{collectionSchema:t,property:o,type:n}=e,r=null==t?void 0:t[o];return!r||("action"===n?!p(r):!y[r.type])}function M({automationTrigger:e,collectionSchema:t}){if("event"===(null==e?void 0:e.type)){const{pagesAdded:o,pagePropertiesEdited:n,source:i}=e.event;if(void 0===i)return!1;const l="some"===n.type&&n.some,a="all"===n.type&&n.all;if((l||a||[]).some((e=>k({collectionSchema:t,property:e.property})||I({collectionSchema:t,property:e.property,type:"trigger"}))))return!1;const c="some"===n.type&&(!(0,r().O9)(n.some)||0===n.some.length),s="all"===n.type&&(!(0,r().O9)(n.all)||0===n.all.length);if(!o&&("none"===n.type||c||s))return!1}else{if("recurrence"!==(null==e?void 0:e.type))return!1;if(!e.recurrence)return!1}return!0}},428137:(e,t,o)=>{o.r(t),o.d(t,{WorkflowTemplatesTooltip:()=>d});o(296540);var n=()=>o(401497),r=()=>o(26697),i=()=>o(536095),l=()=>o(100622),a=()=>o(92924),c=()=>o(3486),s=o(474848);function d({collectionTemplate:e,placement:t,render:o}){return e.templateId===i().MH?(0,s.jsx)(s.Fragment,{children:o({})}):(0,s.jsx)(u,{collectionTemplate:e,placement:t,render:o})}function u({collectionTemplate:e,placement:t,render:o}){const i=(0,n().IS)((()=>({tooltip:{whiteSpace:"break-spaces"},tooltipInner:{width:230,marginTop:4,marginBottom:4},imageContainer:{width:"100%",height:100,borderRadius:4,marginBottom:6,overflow:"hidden",color:l().Tj.text.primary},description:{whiteSpace:"normal",lineHeight:1.4}})),[]),d=(0,c().P)(e.value.targetCollection.icon);return(0,s.jsx)(r().m,{placement:t??"left",delayThreshold:0,style:i.tooltip,render:o,renderTooltip:()=>(0,s.jsxs)("div",{style:i.tooltipInner,children:[(0,s.jsx)("div",{style:i.imageContainer,children:(0,s.jsx)(a().i,{template:e,templateColor:d,index:0})}),(0,s.jsx)("div",{style:i.description,children:e.description})]})})}},448801:(e,t,o)=>{o.d(t,{i:()=>r});o(944114),o(517642),o(658004),o(733853),o(845876),o(432475),o(515024),o(731698);var n=()=>o(371562);n();function r(e,t){const o=n().create({arrays:{detectMove:!1,includeValueOnMove:!0}}).diff(e,t);if(!o)return{beforeOps:{},removeOps:new Set};let r=[],i=[];for(const n in o)"_t"!==n&&("_"===n[0]?r.push(parseInt(n.slice(1),10)):1===o[n].length&&i.push({index:parseInt(n,10),value:o[n][0]}));const l={},a=new Set,c=[...e];r=r.sort(((e,t)=>e-t));for(let n=r.length-1;n>=0;n--){const e=r[n],t=c.splice(e,1)[0];a.add(t)}i=i.sort(((e,t)=>e.index-t.index));for(let n=0;n<i.length;n++){const e=i[n];l[e.value]=c[e.index],c.splice(e.index,0,e.value)}return{beforeOps:l,removeOps:a}}},473541:(e,t,o)=>{o.d(t,{w:()=>r});o(296540);const n={viewBox:"0 0 20 20",fittedViewBox:"5.87 3.72 7.16 12.56",directional:!0,svg:(0,o(474848).jsx)("path",{d:"M6.131 9.381a.875.875 0 0 0 0 1.238l5.4 5.4a.875.875 0 1 0 1.238-1.238L7.987 10l4.782-4.781A.875.875 0 0 0 11.53 3.98z"})},r=(0,o(340498).wt)("arrowChevronSingleLeftFill",n,"fill")},482871:(e,t,o)=>{o.d(t,{z:()=>d});o(517642),o(658004),o(733853),o(845876),o(432475),o(515024),o(731698),o(898992),o(430670),o(581454);var n=()=>o(770063),r=()=>o(898244),i=()=>o(448801),l=()=>o(179034),a=()=>o(722101),c=(o(354520),()=>o(496603));function s(e){const{collectionContextStore:t,collectionViewStore:o,transaction:i}=e,s=o.getPageSortStore(),d=s.getValue(),u=t.groupsStore.getAllGroupStates(),p=function(e){const{pageSort:t,currentResults:o}=e;if(!t||t.length<=r().WF)return[];const n=t.filter((e=>!o.has(e)));return c().sb([...n.reverse(),...c().o8(t).reverse()]).slice(0,t.length-r().WF)}({pageSort:d,currentResults:new Set(u.flatMap((e=>e.resultsStore.state.map((e=>e.id)))))});for(const r of p)a().TF({parentStore:s,childToRemoveStore:(0,n().v3)(s,{table:l().ev,id:r}),transaction:i})}function d(e){const{resultIds:t,collectionViewStore:o,collectionContextStore:c,transaction:d}=e,u=o.getPageSortStore(),p=u.getValue()||[],{beforeOps:m}=(0,i().i)(p,t.slice(0,r().WF));for(const[r,i]of Object.entries(m))if(i){const e=(0,n().v3)(o,{table:l().ev,id:i});a().nc({parentStore:u,insertStore:(0,n().v3)(o,{table:l().ev,id:r}),beforeStore:e,transaction:d})}else{const e=t.findIndex((e=>e===r)),i=t[e-1],c=i?(0,n().v3)(o,{table:l().ev,id:i}):void 0;a().WH({parentStore:u,insertStore:(0,n().v3)(o,{table:l().ev,id:r}),afterStore:c,transaction:d})}s({collectionContextStore:c,collectionViewStore:o,transaction:d})}},491848:(e,t,o)=>{o.d(t,{w:()=>r});o(898992),o(672577);var n=()=>o(209866);function r({collectionContextStore:e,transaction:t}){const o="collectionTypedView"===e.contextTypeFromStoreState,r=e.databaseTypeFromStoreState,i=e.collectionStoresStore.state,l=i.find((e=>e.canEdit()||e.canEditCollection()||e.canEditContentOnly()))||i[0];!o&&l&&(0,n().e)({transaction:t,databaseType:r,collectionId:l.id,spaceId:l.getSpaceId()})}},497222:(e,t,o)=>{o.d(t,{A:()=>f});o(296540);var n=()=>o(804773),r=()=>o(726637),i=()=>o(401497),l=()=>o(807449),a=()=>o(81068),c=()=>o(906380),s=()=>o(100622),d=()=>o(284371),u=()=>o(612900),p=()=>o(700251),m=o(474848);function f(e){const{icon:t,iconStyle:o,title:f,caption:g,right:y,rightStyle:v,isRedOnHover:h,isGray:S,isOrange:_,onClick:w,onMouseDown:x,onMouseEnter:b,onMouseLeave:T,disabled:k,showChevron:I,chevronStyle:M,rotateChevron:C,showDragHandle:A,focused:j,textWrapperStyle:V,shouldWrapCaption:R,desktopIconStyle:E,buttonStyle:O,desktopTitleStyle:P,source:D,menuListItemProps:B,isPulsing:F,shouldShowMobileBackground:N}=e,W=(0,p().y$)(),z=(0,i().IS)((()=>({style:{...S?{color:s().Tj.text.secondary,fill:s().Tj.icon.secondary}:_?{color:s().Tj.orange.icon.accentPrimary,fill:s().Tj.orange.icon.accentPrimary}:{color:s().Tj.text.primary,fill:s().Tj.icon.primary},opacity:k?.4:void 0,...O},leftIconStyle:{width:W,height:W,...o},rightStyle:{display:"flex",alignItems:"center",color:k?s().Tj.text.primary:s().Tj.text.tertiary,fill:k?s().Tj.icon.primary:s().Tj.icon.tertiary,flexShrink:0,marginInlineStart:r().A.isMobile?8:void 0,...v},rightChevronStyle:{marginInlineStart:"tableHeaderMenu"===D?0:6,transition:"transform 200ms ease-in-out",...C&&{transform:"rotate(90deg)"},...M}})),[S,_,k,o,M,v,O,W,C,D]),{itemRef:U,isTabbable:H,onKeyDown:L,onFocus:G}=(0,n().e)(),K=(0,m.jsx)(a().A,{ref:U,role:"menuitem",icon:null==t?void 0:t(z.leftIconStyle),focused:j||!1,disabled:k,title:f,caption:g,shouldWrapTitle:!0,shouldWrapCaption:R,desktopTitleStyle:{flexGrow:1,flexShrink:1,...P},onKeyDown:L,onFocus:G,disallowTabbing:!H,showDragHandle:A,buttonStyle:z.style,rightStyle:z.rightStyle,isRedOnHover:h,ignoreLocalHoverState:!!k||void 0,right:(0,m.jsxs)(m.Fragment,{children:[(0,m.jsx)("div",{style:{...d().RC,display:"flex"},children:y}),!k&&I?(0,m.jsx)(l().I,{icon:c().arrowChevronSingleRightSmallIcon,size:"sm",colorVariant:"tableHeaderMenu"===D?"secondary":"tertiary",style:z.rightChevronStyle}):null]}),onClick:w,onMouseDown:x,onMouseEnter:b,onMouseLeave:T,textWrapperStyle:V,desktopIconStyle:E,reducedPadding:e.reducedPadding,shouldShowMobileBackground:N,...B});return F?(0,m.jsx)(u().u,{borderRadius:6,shape:"square",children:K}):K}},513349:(e,t,o)=>{o.d(t,{Sj:()=>c,UD:()=>a});o(16280);var n=()=>o(339798),r=()=>o(180762),i=()=>o(204067);const l={property:function({template:e,collectionStore:t,collectionViewStore:r,collectionSettingsStore:l}){const a=(0,i().S1)({collectionStore:t,templateId:e.templateId,instancePointerType:"property"});if(!a)throw new Error(`No property instance found for property template ${e.templateId}`);const c=r.getType();n().a2({collectionSettingsStore:l,item:{type:"property",property:a.id,formatKey:c?o(651124).u9(c):void 0}})},collection_view:function({template:e,environment:t,collectionStore:o,collectionContextStore:n}){const r=(0,i().S1)({collectionStore:o,templateId:e.templateId,instancePointerType:"collection_view"});if(!r)throw new Error(`No collection view instance found for property template ${e.templateId}`);c({environment:t,collectionContextStore:n,collectionViewId:r.id})},compound:function(e){}};function a(e){l[e.template.type](e)}function c({environment:e,collectionContextStore:t,collectionViewId:o}){var i;(null===(i=t.collectionViewStore())||void 0===i?void 0:i.id)!==o&&(0,r().t)({environment:e,collectionContextStore:t,collectionViewId:o,isFullScreen:t.isFullScreenStore.state,isRootChild:t.isRootChildStore.state,isInPeekRenderer:t.isInPeekRendererStore.state}),n().a2({collectionSettingsStore:t.settingsStore,item:{type:"main"}})}},529099:(e,t,o)=>{o.r(t),o.d(t,{aiFaceIcon:()=>i,iconDefinition:()=>r});o(296540);var n=o(474848);const r={viewBox:"0 0 20 20",fittedViewBox:"4.13 2.52 13.27 14.61",svg:(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("path",{d:"M12.758 9.976a1.178 1.178 0 1 0 .377-2.326 1.178 1.178 0 0 0-.377 2.326M6.547 8.97a1.178 1.178 0 1 0 .377-2.327 1.178 1.178 0 0 0-.377 2.326"}),(0,n.jsx)("path",{d:"M10.573 5.554a3.917 3.917 0 0 1 6.743.035.625.625 0 1 1-1.08.63 2.667 2.667 0 0 0-4.591-.023l-5.398 9.015 4.192.68a.625.625 0 0 1-.2 1.233l-5.102-.827a.625.625 0 0 1-.436-.938zM4.36 3.517a3.92 3.92 0 0 1 5.572.356.625.625 0 1 1-.945.818 2.67 2.67 0 0 0-3.795-.243.625.625 0 1 1-.833-.931"})]})},i=(0,o(340498).wt)("aiFace",r,"default")},546461:(e,t,o)=>{o.d(t,{K4:()=>w,To:()=>k,fi:()=>x,q8:()=>_,u:()=>S});o(16280),o(18107),o(967357);var n=o(296540),r=()=>o(484714),i=()=>o(792485),l=()=>o(590526),a=()=>o(79926),c=()=>o(140934),s=()=>o(322867),d=()=>o(69708),u=()=>o(534177),p=()=>o(813297),m=()=>o(326887),f=()=>o(862292),g=()=>o(190019),y=()=>o(76190),v=o(474848);const h=(0,n.createContext)({ancestors:[]});h.displayName="AutomationContext";h.Consumer;function S(e){const{automationStore:t,children:o,contextType:S,enableExistenceGuarantees:_}=e,w=(0,r().v3)(),x=(0,d().tz)(),{value:k}=(0,a().fJ)(f().T.formulas),{value:I}=(0,a().fJ)(p().QV.automationTypecheck),M=(0,y().n)(t),C=(0,i().S)(),A=(0,l().K8)((()=>{if(!k)return{error:new(s().N9)("Missing formulas dependency")};if(!I)return{error:new(s().N9)("Missing automation dependency")};const e=function(e){const{environment:t,automationStore:o,automationTypecheckModule:n,contextType:r,formulasModule:i,intl:l,isSubscribed:a,pageStore:s,enableExistenceGuarantees:d}=e,p=function(e,t){if(t)return b.get(e);return b.get(e)??T.get(e)}(o,d);if(p)return p;const f=new(c().ComputedStore)((()=>{const e=o.getTriggerType();let c=r;return(0,u().O9)(e)&&(0,m().x2)(e)&&(c=(0,m().H8)(e)),(0,g().Z)({environment:t,automationStore:o,automationTypecheckModule:n,contextType:c,formulasModule:i,intl:l,isSubscribed:a,pageStore:s,enableExistenceGuarantees:d})}),{debugName:"automationContextTypecheckResultCachedStore"});return function(e,t,o){o?(b.set(e,t),T.set(e,t)):T.set(e,t)}(o,f,d),f}({automationStore:t,automationTypecheckModule:I,contextType:S,environment:w,formulasModule:k,intl:x,isSubscribed:M,pageStore:"button_block"===S?null==C?void 0:C.pageStore:void 0,enableExistenceGuarantees:_});return e.state}),[w,t,I,S,k,x,M,null==C?void 0:C.pageStore,_]),j=(0,n.useContext)(h),V=(0,n.useMemo)((()=>0===j.ancestors.length?[{automationStore:t,contextType:S,typecheckResult:A}]:[...j.ancestors,{automationStore:t,contextType:S,typecheckResult:A}]),[j,t,S,A]),R=(0,n.useMemo)((()=>({ancestors:V,enableExistenceGuarantees:_})),[V,_]);return(0,v.jsx)(h.Provider,{value:R,children:o})}function _(){const e=(0,n.useContext)(h).ancestors.at(-1);if(!e)throw new Error("No automation context found!");return e}function w(){return(0,n.useContext)(h).ancestors.at(-1)}function x(){return(0,n.useContext)(h).enableExistenceGuarantees}const b=new WeakMap,T=new WeakMap;function k(e){var t;return null===(t=b.get(e))||void 0===t?void 0:t.state}},589407:(e,t,o)=>{o.r(t),o.d(t,{ellipsisIcon:()=>r,iconDefinition:()=>n});o(296540);const n={viewBox:"0 0 20 20",fittedViewBox:"2.62 8.62 14.76 2.76",svg:(0,o(474848).jsx)("path",{d:"M4 11.375a1.375 1.375 0 1 0 0-2.75 1.375 1.375 0 0 0 0 2.75m6 0a1.375 1.375 0 1 0 0-2.75 1.375 1.375 0 0 0 0 2.75m6 0a1.375 1.375 0 1 0 0-2.75 1.375 1.375 0 0 0 0 2.75"})},r=(0,o(340498).wt)("ellipsis",n,"default")},612900:(e,t,o)=>{o.d(t,{u:()=>i});var n=()=>o(79926);const r=new(n().O2)("PulsingWrapper",(async()=>o.e(45248).then(o.bind(o,673962)))),i=(0,n().jQ)(r,(e=>e.PulsingWrapper),{renderLoading:(e,t)=>t.children})},621594:(e,t,o)=>{o.r(t),o.d(t,{exclamationMarkCircleSmallIcon:()=>i,iconDefinition:()=>r});o(296540);var n=o(474848);const r={viewBox:"0 0 16 16",fittedViewBox:"1.87 1.87 12.25 12.25",svg:(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("path",{d:"M7.9 4.875a.625.625 0 0 0-.625.625V8a.625.625 0 1 0 1.25 0V5.5a.625.625 0 0 0-.625-.625m0 4.7a.725.725 0 1 0 0 1.45.725.725 0 0 0 0-1.45"}),(0,n.jsx)("path",{d:"M8 1.875a6.125 6.125 0 1 0 0 12.25 6.125 6.125 0 0 0 0-12.25M3.125 8a4.875 4.875 0 1 1 9.75 0 4.875 4.875 0 0 1-9.75 0"})]})},i=(0,o(340498).wt)("exclamationMarkCircleSmall",r,"small")},735695:(e,t,o)=>{o.d(t,{A:()=>k});var n=o(296540),r=()=>o(804773),i=()=>o(726637),l=()=>o(590526),a=()=>o(401497),c=()=>o(718827),s=()=>o(695115),d=()=>o(546926),u=()=>o(493552),p=()=>o(890492),m=()=>o(62900),f=()=>o(995847),g=()=>o(69708),y=()=>o(100622),v=()=>o(284371),h=()=>o(253579),S=()=>o(339798),_=()=>o(969318),w=o(474848);const x=(0,g().YK)({back:{defaultMessage:"Back",id:"collectionsSettingsMenu.back"}});function b({backArrowButton:e,topRightButton:t,children:o,title:n,desktopTitleType:r,settingsStackLength:i,handleClose:l,handleBackArrowClick:d,hideDesktopHeader:p,hasBackStack:h,isInPageViewMode:S,isDashboardWidget:_}){const b=(0,g().tz)(),T=(0,a().eP)(),k=(0,a().IS)((()=>{const e=S&&!_;return{hiddenDesktopHeaderDiv:{height:0},nonHiddenDesktopHeaderDiv:{display:"flex",alignItems:e?"top":"center",padding:e?"0px 14px 6px 14px":"14px 16px 6px 16px",height:e?void 0:42},arrowButton:{marginInlineEnd:8,marginInlineStart:-2,height:22},title:{flexGrow:1,fontWeight:e?v().Wy.medium:v().Wy.semibold,fontSize:e?16:14,lineHeight:e?"24px":void 0,whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},closeButton:{borderRadius:"100%",background:y().Tj.gray.background.secondaryTranslucent},closeButtonHovered:{background:(0,c().i)({color:y().Tj.gray.background.secondaryTranslucent,mode:T})}}}),[_,S,T]),I=!S;return(0,w.jsxs)(w.Fragment,{children:[p?(0,w.jsx)("div",{style:k.hiddenDesktopHeaderDiv}):(0,w.jsxs)("div",{style:k.nonHiddenDesktopHeaderDiv,children:[e||(i>1||h?(0,w.jsx)(s().A,{icon:m().arrowStraightLeftSmallIcon,style:k.arrowButton,onClick:d,ariaLabel:b.formatMessage(x.back)}):void 0),"sectionHeader"===r?(0,w.jsx)(u().D,{styleKey:"captionMedium",colorVariant:"secondary",style:{flexGrow:1},children:n}):(0,w.jsx)("span",{style:k.title,children:n}),t||(I?(0,w.jsx)(s().A,{testId:"collection-settings-menu-close-button",onClick:l,style:k.closeButton,hoveredStyle:k.closeButtonHovered,icon:f().xMarkSmallIcon,size:"xs",ariaLabel:b.formatMessage({id:"collectionSettingsMenu.close",defaultMessage:"Close"})}):void 0)]}),o]})}function T({children:e,footer:t,header:a,unconstrainedWidth:c,desktopWidth:s,title:u,desktopTitleType:m,collectionSettingsStore:f,fullHeight:y,hideDesktopHeader:v,menuScrollerStyle:x,innerContentWrapperStyle:T,disableScroller:k,handleBackArrowClick:I,hasBackStack:M,handleClose:C,topRightButton:A,backArrowButton:j},V){const R=(0,o(908201).Ks)(),E=(0,d().Tf)(),O=(0,o(255824).a)(),P=(0,l().K8)((()=>(null==R?void 0:R.isDashboardWidget())??!1),[R]),{currentTab:D,settingsStackLength:B,hideHeader:F}=(0,l().K8)((()=>{const e=f.state;return{currentTab:(0,o(261503).S)(f),settingsStackLength:e.stack.length,hideHeader:e.hideSettingsHeader}}),[f],{useDeepEqual:!0}),N=(0,n.useCallback)((()=>{var e;I?I():S().yl({collectionSettingsStore:f,keepPreviousRef:"form_editor"===(null==R||null===(e=R.collectionViewStore())||void 0===e?void 0:e.getType())})}),[I,f,R]),W=(0,n.useCallback)((e=>{C?C(e):S().os({collectionSettingsStore:f})}),[C,f]),z=(0,n.useCallback)((e=>{(0,h().rW)(e.target)||(0,h().iX)(e.target)||(0,h().u2)(e.target)||o(263711).g.state.isOpen||W(e)}),[W]);if(!D)return null;let U;const H=O&&!P;if(i().A.isMobile)U={disableScroller:k,menuType:d().gu.Modal,title:u,left:B>1?(0,w.jsx)(o(283163).h,{}):void 0,onClickLeft:B>1?N:void 0,scrollerStyle:x,innerRef:V,right:E?void 0:(0,w.jsx)(g().sA,{...o(245720).W.done}),onClickRight:E?void 0:W};else{const e=c||s?void 0:H?_().vg:_().vE;U={disableScroller:k,menuType:d().gu.Popup,minWidth:H?_().vg:_().vE,width:s,maxHeight:y?"100%":"80vh",...e&&{maxWidth:e},onClickOutside:z,scrollerStyle:{flexGrow:0,...x},header:!F&&(0,w.jsx)(b,{settingsStackLength:B,handleClose:W,handleBackArrowClick:N,hasBackStack:M,hideDesktopHeader:v,title:u,desktopTitleType:m,topRightButton:A,backArrowButton:j,isDashboardWidget:P,isInPageViewMode:O,children:a}),paddingTop:F?6:0,footer:t,innerRef:V}}const L=(0,w.jsxs)(w.Fragment,{children:[i().A.isMobile?a:void 0,e,i().A.isMobile?t:void 0]});return y?(0,w.jsx)(r().Y,{direction:"vertical",children:(0,w.jsx)(p().A,{...U,children:L})}):(0,w.jsx)(r().Y,{direction:"vertical",children:(0,w.jsx)(p().A,{...U,children:(0,w.jsx)(o(933922).N,{capture:!0,allowMobileAutoScroll:!0,allowEsc:!0,wrapperTag:"div",children:(0,w.jsx)("div",{style:T,children:L})})})})}const k=(0,n.forwardRef)(T)},736982:(e,t,o)=>{o.d(t,{I:()=>u,h:()=>d});o(296540);var n=()=>o(726637),r=()=>o(401497),i=()=>o(81068),l=()=>o(100622),a=()=>o(284371),c=()=>o(115512),s=o(474848);function d(){return{padding:n().A.isMobile?"12px 2px":"6px",alignItems:"center"}}function u({buttonMenuItemProps:e,title:t,caption:o,icon:n,onClick:u,right:p,isDisabled:m}){const f=(0,r().IS)((()=>({menuItem:{display:"flex",...d(),opacity:m?.4:void 0},title:{fontSize:c().vQ,...a().RC},caption:{fontSize:c().Kw,overflow:"hidden",color:l().Tj.text.secondary,whiteSpace:"nowrap",textOverflow:"ellipsis"}})),[m]),g={};return u&&(g.onClick=u),(0,s.jsx)(i().A,{...e,style:f.menuItem,disabled:m,title:(0,s.jsxs)("div",{children:[(0,s.jsx)("div",{style:f.title,children:t}),o?(0,s.jsx)("div",{style:f.caption,children:o}):void 0]}),icon:n,right:p,...g})}},738508:(e,t,o)=>{o.r(t),o.d(t,{cursorIcon:()=>i,iconDefinition:()=>r});o(296540);var n=o(474848);const r={viewBox:"0 0 20 20",fittedViewBox:"1.25 0 17.5 20",svg:(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)("g",{className:"logo-light-mode",children:[(0,n.jsxs)("g",{clipPath:"url(#clip0_16020_205)",children:[(0,n.jsx)("path",{fill:"#757575",d:"m9.995 9.987 8.658 4.999a.6.6 0 0 1-.226.226l-8.092 4.672a.68.68 0 0 1-.68 0l-8.092-4.672a.6.6 0 0 1-.226-.226z"}),(0,n.jsx)("path",{fill:"#525252",d:"M9.995 0v9.987l-8.658 4.999a.6.6 0 0 1-.082-.309v-9.38c0-.22.117-.424.308-.534L9.655.09a.7.7 0 0 1 .34-.09"}),(0,n.jsx)("path",{fill:"#404040",d:"M18.652 4.989a.6.6 0 0 0-.225-.226L10.334.09A.7.7 0 0 0 9.995 0v9.987l8.658 4.999a.6.6 0 0 0 .083-.309v-9.38c0-.11-.03-.216-.083-.308"}),(0,n.jsx)("path",{fill:"#D9D9D9",d:"M18.047 5.339a.29.29 0 0 1 0 .29l-7.859 13.61c-.053.093-.193.055-.193-.05v-8.97a.4.4 0 0 0-.054-.201z"}),(0,n.jsx)("path",{fill:"#fff",d:"m18.047 5.339-8.106 4.68a.4.4 0 0 0-.147-.147L2.027 5.387c-.092-.053-.054-.193.052-.193h15.717c.111 0 .202.06.25.145"})]}),(0,n.jsx)("defs",{children:(0,n.jsx)("clipPath",{id:"clip0_16020_205",children:(0,n.jsx)("path",{fill:"#fff",d:"M1.255 0h17.49v20H1.256z"})})})]}),(0,n.jsxs)("g",{className:"logo-dark-mode",children:[(0,n.jsxs)("g",{clipPath:"url(#clip0_16020_213)",children:[(0,n.jsx)("path",{fill:"#6E6E6E",d:"m9.995 9.987 8.658 4.999a.6.6 0 0 1-.226.226l-8.092 4.672a.68.68 0 0 1-.68 0l-8.092-4.672a.6.6 0 0 1-.226-.226z"}),(0,n.jsx)("path",{fill:"#4A4A4A",d:"M9.995 0v9.987l-8.658 4.999a.6.6 0 0 1-.082-.309v-9.38c0-.22.117-.424.308-.534L9.655.09a.7.7 0 0 1 .34-.09"}),(0,n.jsx)("path",{fill:"#383838",d:"M18.652 4.989a.6.6 0 0 0-.225-.226L10.334.09A.7.7 0 0 0 9.995 0v9.987l8.658 4.999a.6.6 0 0 0 .083-.309v-9.38c0-.11-.03-.216-.083-.308"}),(0,n.jsx)("path",{fill:"#C9C9C9",d:"M18.047 5.339a.29.29 0 0 1 0 .29l-7.859 13.61c-.053.093-.193.055-.193-.05v-8.97a.4.4 0 0 0-.054-.201z"}),(0,n.jsx)("path",{fill:"#fff",d:"m18.047 5.339-8.106 4.68a.4.4 0 0 0-.147-.147L2.027 5.387c-.092-.053-.054-.193.052-.193h15.717c.111 0 .202.06.25.145"})]}),(0,n.jsx)("defs",{children:(0,n.jsx)("clipPath",{id:"clip0_16020_213",children:(0,n.jsx)("path",{fill:"#fff",d:"M1.255 0h17.49v20H1.256z"})})})]})]})},i=(0,o(340498).wt)("cursor",r,"default")},763765:(e,t,o)=>{o.d(t,{t:()=>r});class n extends(()=>o(757695))().Store{getInitialState(){return{loaded:!1}}USEWITHCAUTION_markStatsigUserFetched(e){const{userId:t,spaceId:o,fetched:n}=e;this.setState({loaded:n,userId:t,spaceId:o})}USEWITHCAUTION_isFetchedForSpaceAndUserId(e){const{spaceId:t,userId:o}=e;return this.state.loaded&&this.state.spaceId===t&&this.state.userId===o}}const r=new n;(0,o(852832).exposeDebugValue)("statsigUserLoadingStatusStore",r)},765556:(e,t,o)=>{o.r(t),o.d(t,{WorkflowSettingsLinkedCollections:()=>y});o(898992),o(354520),o(296540);var n=()=>o(484714),r=()=>o(590526),i=()=>o(663639),l=()=>o(663077),a=()=>o(69708),c=()=>o(534177),s=()=>o(735695),d=()=>o(200277),u=()=>o(204067),p=()=>o(36012),m=()=>o(236248),f=()=>o(272752),g=o(474848);function y(){const e=(0,a().tz)(),{collectionStore:t,collectionSettingsStore:o}=(0,f().V)(),y=(0,n().v3)();(0,m().b)(t);const{instantiatedRelationPropertyTemplates:v,suggestedRelationPropertyTemplates:h}=(0,r().K8)((()=>({instantiatedRelationPropertyTemplates:(0,u().Xg)(y,t).filter(l().Sz),suggestedRelationPropertyTemplates:(0,d().N)(y,t).filter(l().Sz)})),[y,t]),S=[(0,p().i)({title:e.formatMessage({id:"workflowSettingsLinkedCollections.linkedSectionTitle",defaultMessage:"Linked"}),templates:v,isSuggestedSection:!1,legacyUnpackagedFeatureTemplates:[]}),(0,p().i)({title:e.formatMessage({id:"workflowSettingsLinkedCollections.suggestedSectionTitle",defaultMessage:"Suggested"}),templates:h,isSuggestedSection:!0,legacyUnpackagedFeatureTemplates:[]})].filter(c().Vq);return(0,g.jsx)(s().A,{collectionSettingsStore:o,title:e.formatMessage({id:"workflowSettingsLinkedCollections.title",defaultMessage:"Linked workflows"}),children:(0,g.jsx)(i().A,{disableInitialScroll:!0,type:i().O.Vertical,initialFocus:void 0,resetFocusOnMouseOut:!0,sections:S})})}},766854:(e,t,o)=>{o.d(t,{H:()=>x,Q:()=>w});o(898992),o(672577);var n=()=>o(230711),r=()=>o(907258),i=()=>o(135168),l=()=>o(242422),a=()=>o(929219),c=()=>o(711339),s=()=>o(295633),d=()=>o(700500),u=()=>o(179034),p=()=>o(201980),m=()=>o(384944),f=()=>o(649813),g=()=>o(390650),y=()=>o(381678),v=()=>o(622811),h=()=>o(491848),S=()=>o(482871);function _(e,t,o){const r=(0,y()._)(e),i=null==r?void 0:r.id;if(!i||!o)return;if(!l().default.checkGate({gateName:"full_access_for_created_collection_pages"}))return;if(t.canAdmin())return;const a=t.getSpaceStore();return a&&(0,n().dp)(a,i).isMember()?[{role:"editor",type:"user_permission",user_id:i}]:void 0}function w(e){const{collectionContextStore:t,transaction:o}=e;return(0,h().w)({collectionContextStore:t,transaction:o}),x(e)}function x(e){var t,o,n;const{environment:y,collectionContextStore:h,groupsPointer:w,insertAtIndex:x,shouldCoerce:b,templateStore:T,transaction:k,from:I,tracker:M,inMemoryRecordCache:C,isKeyboard:A,title:j}=e,V=c().default.DO_NOT_USE_markLegacy("collections.add_item_lag");c().default.DO_NOT_USE_measureAfterNextFlushLegacy(V,{environment:y,getData:()=>({...g().kz(h),from:I.createBlock})});const R="collectionTypedView"===h.contextTypeFromStoreState,E=h.databaseTypeFromStoreState,O=h.collectionStoresStore.state,P=O.find((e=>e.canEdit()||e.canEditCollection()||e.canEditContentOnly()))||O[0],D=null===(t=(0,i().f)(P))||void 0===t?void 0:t.id,B=r().default.state.currentUserSettingsStore,F=R&&E&&D&&B&&[...B.getAllPreferredCollections(D),...B.getPreferredCollectionsOfType(D,E)]||[];let N;const W=w[0];if("group_header"===I.createBlock&&"location"===W.value.type){const e=W.value.value;if(e){N=O.find((t=>t.id===e.id&&(t.canEdit()||t.canEditCollection()||t.canEditContentOnly())))}}else N=function(e,t){for(const o of e){const e=t.find((e=>e.id===o&&(e.canEdit()||e.canEditCollection()||e.canEditContentOnly())));if(e)return e}}(F,O);const z=N??P,U=null==z?void 0:z.getSpaceId(),H=h.collectionViewStore(),L=h.getViewType(),G=m().Wv({environment:y,type:d().xd.page,inMemoryRecordCache:C,transaction:k,spaceId:U,tracker:M,permissions:_(y,z,U),properties:{title:(0,p().x9d)(j)}});if(!z||!H||!L)return{coercionSucceeded:!0,newStore:G};const K=null===(o=h.groupsStore.getGroupState(w))||void 0===o?void 0:o.groupUiParentStore;if(!K)return{coercionSucceeded:!0,newStore:G};const q=s().B.createChildStore(K,{table:u().ev,id:G.id});T&&a().A.state.online&&f().TB({title:"template",environment:y,store:G,templateStore:T,isKeyboard:A??!1,isCreateIn:!1,transaction:k,from:I.initCollection??"collection_group_actions"});const $=(0,v().j)({environment:y,store:G,collectionStore:z,collectionContextStore:h,groupsPointer:w,shouldCoerce:b,transaction:k}),Y=(null===(n=h.groupsStore.getGroupState(w))||void 0===n||null===(n=n.reducerResultStore.state)||void 0===n?void 0:n.blockIds)||[],X=void 0!==x?x:Y.length,Z=h.permissionScopesStore.state;if((l().default.checkGate({gateName:"can_create_pages_in_collection_permission"})?Z.canCreatePagesInCollection:Z.canEditContent)||R){const e=[...Y.slice(0,X),q.id,...Y.slice(X)];(0,S().z)({resultIds:e,collectionViewStore:H,collectionContextStore:h,transaction:k})}return{coercionSucceeded:$,newStore:q}}},839754:(e,t,o)=>{o.d(t,{Bi:()=>k,My:()=>T,ZM:()=>M,_M:()=>I,navigateToWorkflowTemplateOnboardingModal:()=>C});o(16280),o(944114),o(517642),o(658004),o(733853),o(845876),o(432475),o(515024),o(731698),o(898992),o(354520),o(672577),o(581454);var n=()=>o(907258),r=()=>o(295633),i=()=>o(584262),l=()=>o(663077),a=()=>o(179034),c=()=>o(201980),s=()=>o(896628),d=()=>o(384944),u=()=>o(730969),p=()=>o(840153),m=()=>o(339798),f=()=>o(180762),g=()=>o(799832),y=()=>o(111379),v=()=>o(535960),h=()=>o(31173),S=()=>o(295304),_=()=>o(244828),w=()=>o(373444),x=()=>o(165592),b=()=>o(204067);function T({transaction:e,collectionStore:t,propertyTemplates:o}){var n;const r=(null===(n=t.getParentBlockStore())||void 0===n?void 0:n.getCollectionViewStores().filter((e=>"table"===e.getType())))??[];if(0===r.length)return;const i=[];for(const c of o){const e=(0,b().S1)({collectionStore:t,templateId:c.templateId,instancePointerType:"property"});e&&i.push({property:e.id,visible:!(0,l().Sz)(c),...c.tablePropertyFormat})}if(0!==i.length)for(const l of r){var a;const t=(null===(a=l.getPropertyFormatsStore("table_properties"))||void 0===a?void 0:a.getValue())??[],o=new Set(t.map((e=>e.property))),n=i.filter((e=>!o.has(e.property)));0!==n.length&&s().zA({stores:[l],update:{table_properties:[...t,...n]},transaction:e})}}function k({transaction:e,collectionStore:t,propertyTemplates:o}){const n=[];for(const a of o){const e=(0,b().S1)({collectionStore:t,templateId:a.templateId,instancePointerType:"property"});e&&n.push({property:e.id,visible:!0})}const r=t.getFormat().collection_page_properties??[],i=new Set(r.map((e=>e.property))),l=n.filter((e=>!i.has(e.property)));l.length&&s().zA({stores:[t],update:{collection_page_properties:[...r,...l]},transaction:e})}function I({environment:e,newPageStore:t,result:o}){"accepted_template"!==o.type&&"accepted_empty_collection"!==o.type||_().createAndCommit({environment:e,canUndo:!1,perform:n=>{const i=t.getTitleValue();if(d().zv({store:t,transaction:n,data:{alive:!1}}),"accepted_empty_collection"===o.type&&!(0,c().w9s)(i)){const l=r().B.createChildStore(t,{table:"block",id:o.blockId}).getTitleStore();l&&S().yr({environment:e,transaction:n,tokens:i,index:0,store:l})}const l=t.getParentStore();if((null==l?void 0:l.table)===a().ev){const e=l.getContentIds();d().zv({store:l,transaction:n,data:{content:e.filter((e=>e!==t.id))}})}},userAction:"clean_up_empty_new_page"})}function M({environment:e,userAction:t,result:o,existingCollectionViewBlockStore:n,existingCollectionStore:r}){if("canceled"!==o.type){if("accepted_empty_collection"===o.type&&r){const n=r.getKeyStore("name"),i=(0,c().x9d)(o.newCollectionTitle);n&&_().createAndCommit({userAction:t,environment:e,canUndo:!0,perform:t=>S().R9({environment:e,store:n,transaction:t,value:i})})}if(n){var i;const e=null===(i=(0,g().U)(n))||void 0===i?void 0:i.settingsStore;e&&m().os({collectionSettingsStore:e})}if("accepted_template"===o.type&&null!=n&&n.isCollectionView()&&(null==n||!n.hasSingleSourceAndNoLinkedCollections())){const t=(0,g().U)(n),r=n.getCollectionViewStores().find((e=>{var t;return(null===(t=e.getCollectionStore())||void 0===t?void 0:t.id)===o.collectionId}));if(!t||!r)return;(0,f().t)({environment:e,collectionContextStore:t,collectionViewId:r.id,isFullScreen:t.isFullScreenStore.state,isRootChild:t.isRootChildStore.state,isInPeekRenderer:t.isInPeekRendererStore.state})}}}async function C({environment:e,collectionViewBlockStore:t}){const o=t.id;if(!t.isDefined()){const n=await(0,h().$)({environment:e,blockId:o});if(!n)return;e=await p().T({environment:e,newCurrentUserId:n}),t=new(r().B)(e,{table:a().ev,id:o}),await t.load()}const l=t.getSpaceId();if(!l)throw new Error("Space ID not found for collection block");const c=(0,y().k)(l);if(!c)throw new Error(`Space view not found for space ID: ${l}`);const{sidebarSpaceStore:s}=n().default.state;(null==s?void 0:s.id)!==l&&await(0,u().y)({environment:e,spaceViewStore:c});const d=t.getFormat();if("workflow_template_placeholder"===(null==d?void 0:d.collection_view_sub_type)&&null!=d&&d.placeholder_workflow_template_id&&t.isCollectionView()){const{getCollectionTemplateFromId:o}=await x().t.load(),n=o(d.placeholder_workflow_template_id);if(!n)throw new Error(`Collection template "${d.placeholder_workflow_template_id}" not found`);const{onNavigateToPlaceholderWorkflowTemplateBlock:r}=await w().O.load();r({environment:e,collectionTemplate:n,collectionViewBlockStore:t})}else(0,v().u)({environment:e,store:t,pageVisitSource:i().y8.WorkflowTemplatesDeeplink})}},888325:(e,t,o)=>{function n(e){return`${e.table}:${e.id}`}o.d(t,{_:()=>n})},890409:(e,t,o)=>{o.d(t,{Ah:()=>v,Dk:()=>f,Iv:()=>y,SF:()=>g,YO:()=>_,_f:()=>x,c_:()=>p,dW:()=>S,gW:()=>m,sp:()=>b,vN:()=>h});o(16280),o(944114),o(898992),o(354520),o(803949),o(581454),o(737550);var n=()=>o(496603),r=()=>o(973647),i=()=>o(534177),l=()=>o(842599),a=()=>o(239381),c=()=>o(179034),s=()=>o(798880),d=()=>o(201980),u=()=>o(241319);function p(e,t){e.DO_NOT_USE_commonTrackEvent({eventName:"add_automation_step",properties:t})}function m(e,t){e.DO_NOT_USE_commonTrackEvent({eventName:"delete_automation_step",properties:t})}function f(e,t){e.DO_NOT_USE_commonTrackEvent({eventName:"automation_create",properties:t})}function g(e,t){e.DO_NOT_USE_commonTrackEvent({eventName:"automation_update",properties:t})}function y(e,t){e.DO_NOT_USE_commonTrackEvent({eventName:"automation_delete",properties:t})}function v(e,t){e.DO_NOT_USE_commonTrackEvent({eventName:"automation_enable",properties:t})}function h(e,t){e.DO_NOT_USE_commonTrackEvent({eventName:"automation_disable",properties:t})}function S(e,t){e.DO_NOT_USE_commonTrackEvent({eventName:"automation_action_create",properties:t})}function _(e,t){e.DO_NOT_USE_commonTrackEvent({eventName:"automation_action_delete",properties:t})}function w(e){const{formulaAnalyticsModule:t,formulasModule:o,formulaTypecheckContextValues:n,getRecordModel:l,spaceId:c,value:s,featureGates:d}=e;if("formula"===s.type){if(!(0,i().O9)(s.value))return;const e=r().Q.unwrapOr(o.parseFormulaInputToAst(s.value),void 0);if(e){const r=o.addTypesToFormulaAST(e,{handleDataRequest:(0,a().zg)(l),spaceId:c,valueTypes:n,featureGates:d});return{...t.getFormulaAnalytics(e,{getRecordModel:l,typecheckContextValues:n}),formula_return_type:r.node.type,redacted_formula:t.getRedactedFormulaAsStringSync(e,{getRecordModel:l,typecheckContextValues:n})}}}else{if("simple"===s.type){if(!(0,i().O9)(s.value))return;return t.getSimpleFormulaAnalytics(s.value,{getRecordModel:l,typecheckContextValues:n})}(0,i().HB)(s.type)}}function x(e){const{automationActionModel:t,automationActionModels:o,formulaAnalyticsModule:r,formulasModule:c,formulaTypecheckContextValues:p,getRecordModel:m,featureGates:f,simpleFormulasModule:g}=e;return t.isType("complete_sprint")?{automation_action_id:t.pointer.id,type:"complete_sprint"}:t.isType("create_page")?function(e){const{automationActionModel:t,formulaAnalyticsModule:o,formulasModule:n,formulaTypecheckContextValues:r,getRecordModel:l,featureGates:a}=e,c=t.getConfig();let s,d=[];const u=null==c?void 0:c.collection,p=null==c?void 0:c.properties;if((0,i().O9)(u)&&(0,i().O9)(p)&&p.length>0){const e=l(u),f=null==e?void 0:e.getNormalizedSchema();(0,i().O9)(f)&&(d=p.map((e=>{var t;return(null===(t=f[e])||void 0===t?void 0:t.type)??"unknown"})));const g=null==c?void 0:c.values;if(n&&(0,i().O9)(g)){s=[];for(const e of p){var m;const i=null===(m=g[e])||void 0===m?void 0:m.value;if(!i)continue;const c=w({formulaAnalyticsModule:o,formulasModule:n,getRecordModel:l,formulaTypecheckContextValues:r,spaceId:t.spaceId,value:i,featureGates:a});c&&s.push(c)}}}return{automation_action_id:t.pointer.id,property_formula_stats:s,property_types:d,type:"create_page"}}({automationActionModel:t,formulaAnalyticsModule:r,formulasModule:c,formulaTypecheckContextValues:p,getRecordModel:m,featureGates:f}):t.isType("duplicate_blocks")?{automation_action_id:t.pointer.id,type:"duplicate_blocks"}:t.isType("modal_confirmation")?function(e){const{automationActionModel:t,formulaAnalyticsModule:o,formulasModule:n,formulaTypecheckContextValues:r,getRecordModel:l,featureGates:a}=e,c=t.getConfig(),s=[];if(n&&(0,i().O9)(c)&&c.text){const e=w({formulasModule:n,formulaAnalyticsModule:o,getRecordModel:l,formulaTypecheckContextValues:r,spaceId:t.spaceId,value:c.text,featureGates:a});e&&s.push(e)}return{automation_action_id:t.pointer.id,formula_stats:s,type:"modal_confirmation"}}({automationActionModel:t,formulaAnalyticsModule:r,formulasModule:c,formulaTypecheckContextValues:p,getRecordModel:m,featureGates:f}):t.isType("open_page")?{automation_action_id:t.pointer.id,type:"open_page"}:t.isType("query_collection")?{automation_action_id:t.pointer.id,type:"query_collection"}:t.isType("send_in_app_notification")?function(e){var t;const{automationActionModel:o,formulaAnalyticsModule:n,formulasModule:r,formulaTypecheckContextValues:l,getRecordModel:a,featureGates:c,simpleFormulasModule:s}=e,u={automation_action_id:o.pointer.id,messageCharacterCount:0,type:"send_in_app_notification"},p=o.getConfig();if(!(0,i().O9)(p))return u;if((0,i().O9)(p.target))if("formula"===p.target.type&&(0,i().O9)(p.target.value)){if(u.targetData={type:"formula",numUserFormulaTargets:(0,d().Fbh)(p.target.value.value).length,numFormulaContextTargets:s.getReferencedContextValueIds(p.target.value).length},r){const e=w({formulasModule:r,formulaAnalyticsModule:n,getRecordModel:a,formulaTypecheckContextValues:l,spaceId:o.spaceId,value:p.target.value,featureGates:c});e&&(u.formula_stats??=[],u.formula_stats.push(e))}}else if("property"===p.target.type&&(0,i().O9)(p.target.propertyId)&&(0,i().O9)(p.target.collectionPointer)){const e=a(p.target.collectionPointer),t=null==e?void 0:e.getSchema();var m;(0,i().O9)(t)&&(u.targetData={type:"property",propertyType:null===(m=t[p.target.propertyId])||void 0===m?void 0:m.type})}if((0,i().O9)(null===(t=p.notification_message)||void 0===t?void 0:t.value)&&(u.messageCharacterCount=(0,d().FAw)(p.notification_message.value),r)){const e=w({formulasModule:r,formulaAnalyticsModule:n,getRecordModel:a,formulaTypecheckContextValues:l,spaceId:o.spaceId,value:p.notification_message,featureGates:c});e&&(u.formula_stats??=[],u.formula_stats.push(e))}return u}({automationActionModel:t,formulaAnalyticsModule:r,formulasModule:c,formulaTypecheckContextValues:p,getRecordModel:m,featureGates:f,simpleFormulasModule:g}):t.isType("send_gmail_notification")?function(e){var t,o,r,a,c,u,p;const{automationActionModel:m,formulaAnalyticsModule:f,formulasModule:g,formulaTypecheckContextValues:y,getRecordModel:v,featureGates:h}=e,S=m.getConfig();if(!(0,i().O9)(S))return{automation_action_id:m.pointer.id,fields:{},recipient_domains:{},type:"send_gmail_notification"};const _=Object.fromEntries(Object.entries(S||{}).map((([e,t])=>{var o;return"formula"===(null==t?void 0:t.type)?[e,Boolean(null==t||null===(o=t.value)||void 0===o?void 0:o.value)]:"simple"===(null==t?void 0:t.type)?[e,Boolean(null==t?void 0:t.value)]:[e,Boolean(t)]}))),{to:x,cc:b,bcc:T}=S,k=[...(null==x||null===(t=x.value)||void 0===t?void 0:t.value)||[],...(null==b||null===(o=b.value)||void 0===o?void 0:o.value)||[],...(null==T||null===(r=T.value)||void 0===r?void 0:r.value)||[]],I=[...(0,d().Fbh)(k).map((e=>v({table:s().oo,id:e}))).map((e=>null==e?void 0:e.email)).filter(i().O9),...(0,l().C3)((0,d().k4p)(k))],M=n().Tr(I.map((e=>e.split("@")[1]))),C=[null===(a=S.to)||void 0===a?void 0:a.value,null===(c=S.cc)||void 0===c?void 0:c.value,null===(u=S.bcc)||void 0===u?void 0:u.value,null===(p=S.reply_to)||void 0===p?void 0:p.value,S.from_name,S.email_subject,S.email_body].map((e=>{if(g&&(0,i().O9)(e))return w({formulaAnalyticsModule:f,formulasModule:g,getRecordModel:v,formulaTypecheckContextValues:y,spaceId:m.spaceId,value:e,featureGates:h})})).filter(i().O9);return{automation_action_id:m.pointer.id,fields:_,formula_stats:C,recipient_domains:M,type:"send_gmail_notification"}}({automationActionModel:t,formulaAnalyticsModule:r,formulasModule:c,formulaTypecheckContextValues:p,getRecordModel:m,featureGates:f}):t.isType("slack_notification")?{automation_action_id:t.pointer.id,type:"slack_notification"}:t.isType("update_pages")?function(e){const{automationActionModel:t,automationActionModels:o,formulaAnalyticsModule:n,formulasModule:r,formulaTypecheckContextValues:l,getRecordModel:c,featureGates:s}=e,d=t.getConfig(),p=[],m=[],f=[];if((0,i().O9)(d)&&(0,i().O9)(d.target)&&(0,i().O9)(d.properties)&&d.properties.length>0){let e;if("variable"===d.target.type){const t=(0,a().y5)(d.target.id);if("action"===t.source){const t=(0,u().y)({actionModels:o,id:d.target.id}).collectionPointer;if((0,i().O9)(t)){const o=c(t);e=null==o?void 0:o.getNormalizedSchema()}}else{if("global"!==t.source||"button_page"!==t.global)throw new Error("Failed loading property schema");{const t=(0,a().IV)(l,d.target.id);if("block"===(null==t?void 0:t.type.type)&&(0,i().O9)(t.type.collection)){const o=c(t.type.collection);e=null==o?void 0:o.getNormalizedSchema()}}}}else if("collection"===d.target.type){const t=c(d.target.collection);e=null==t?void 0:t.getNormalizedSchema()}(0,i().O9)(e)&&d.properties.forEach((o=>{const a=e[o];if((0,i().O9)(a)&&(p.push(a.type),r&&(0,i().O9)(d.values))){const e=d.values[o];if((0,i().O9)(e)&&(m.push({type:a.type,operator:e.action}),e.value)){const o=w({formulasModule:r,formulaAnalyticsModule:n,getRecordModel:c,formulaTypecheckContextValues:l,spaceId:t.spaceId,value:e.value,featureGates:s});o&&f.push(o)}}}))}return{automation_action_id:t.pointer.id,property_configs:m,property_formula_stats:f,property_types:p,type:"update_pages"}}({automationActionModel:t,automationActionModels:o,formulaAnalyticsModule:r,formulasModule:c,formulaTypecheckContextValues:p,getRecordModel:m,featureGates:f}):t.isType("define_variables")?function(e){const{automationActionModel:t,formulaAnalyticsModule:o,formulasModule:n,formulaTypecheckContextValues:r,getRecordModel:l,featureGates:a}=e,c=t.getConfig(),s=[];if(n&&(0,i().O9)(c)&&c.values)for(const i of Object.values(c.values))if(i.value){const e=w({formulasModule:n,formulaAnalyticsModule:o,getRecordModel:l,formulaTypecheckContextValues:r,spaceId:t.spaceId,value:i.value,featureGates:a});e&&s.push(e)}return{automation_action_id:t.pointer.id,formula_stats:s,type:"define_variables"}}({automationActionModel:t,formulaAnalyticsModule:r,formulasModule:c,formulaTypecheckContextValues:p,getRecordModel:m,featureGates:f}):t.isType("http_request")?{automation_action_id:t.pointer.id,type:"http_request"}:t.isType("publish_site")?{automation_action_id:t.pointer.id,type:"publish_site"}:t.isType("worker")?{automation_action_id:t.pointer.id,type:"worker"}:void(0,i().HB)(t)}function b(e){const{automationModel:t,builderType:o="sidebar",formulaAnalyticsModule:n,formulasModule:r,formulaTypecheckContextValues:l,getRecordModel:a,featureGates:s,simpleFormulasModule:d,source:u}=e,p=[],m=t.getActionPointers().map((e=>a(e))).filter(i().O9);for(const c of t.getActionPointers()){const e=a(c);(0,i().O9)(e)&&p.push(x({automationActionModel:e,automationActionModels:m,formulaAnalyticsModule:n,formulasModule:r,formulaTypecheckContextValues:l,getRecordModel:a,featureGates:s,simpleFormulasModule:d}))}const f=[];let g,y,v;if(t.isEventType()){var h;const e=t.getEventConfiguration(),o=a(t.getParentPointer());g=t.getParentId();const n=t.getEventConfiguration();if("collection_view"===(null===(h=n.source)||void 0===h?void 0:h.type)){const e=a(n.source.pointer);(null==e?void 0:e.parent_table)===c().ev&&(v=null==e?void 0:e.parent_id),y=null==n?void 0:n.source.pointer.id}const r=null==o?void 0:o.getNormalizedSchema();if((0,i().O9)(r)){const{pagesAdded:t,pagePropertiesEdited:o}=e;if(t&&f.push({type:"page"}),"any"===o.type)f.push({condition:"any",type:"property"});else if("none"===o.type)f.push({condition:"none",type:"property"});else{let e=[];"some"===o.type?e=o.some??[]:"all"===o.type&&(e=o.all??[]);const t=[],n=[];e.forEach((e=>{var o;const l=null===(o=r[e.property])||void 0===o?void 0:o.type;(0,i().O9)(l)&&(t.push({type:l,operator:e.filter.operator}),n.push(l))})),f.push({condition:o.type,property_configs:t,property_types:n,type:"property"})}}}else if(t.isButtonType())f.push({type:"button"});else if(t.isRecurrenceType()){var S;f.push({type:"recurrence",frequency:null===(S=t.getTrigger().recurrence)||void 0===S?void 0:S.frequency})}else(0,i().HB)(t);return{automation_actions:p,automation_id:t.id,automation_triggers:f,collection_id:g,collection_view_id:y,collection_view_block_id:v,builder_type:o,source:u}}},902842:(e,t,o)=>{o.d(t,{n:()=>k,z:()=>b});o(16280),o(296540);var n=()=>o(590526),r=()=>o(401497),i=()=>o(807449),l=()=>o(663077),a=()=>o(632625),c=()=>o(852424),s=()=>o(278238),d=()=>o(529099),u=()=>o(167170),p=()=>o(199483),m=()=>o(235773),f=()=>o(100622),g=()=>o(534177),y=()=>o(745266),v=()=>o(231314),h=()=>o(3486),S=()=>o(913454),_=o(474848);const w=16;function x({icon:e,themeMode:t,size:o,style:n}){const i=(0,r().IS)((()=>({icon:{fill:(0,h()._)(e,t),...n}})),[e,n,t]);return(0,_.jsx)(a().p,{icon:e,themeMode:t,size:o,style:i.icon})}function b({template:e,size:t,iconStyle:o}){var n;const a=t??w,c=(0,r().IS)((()=>({icon:{width:a,height:a,...o}})),[a,o]),f=(0,r().eP)();if((0,l().cB)(e.templateId))return(0,_.jsx)(i().I,{icon:d().aiFaceIcon,style:c.icon});const{type:v}=e;switch(v){case"property":return(0,_.jsx)(T,{template:e,iconSize:a,styles:c});case"collection_view":return(0,_.jsx)(y().h,{viewIcon:null===(n=e.value.format)||void 0===n?void 0:n.collection_view_icon,viewType:e.value.type,color:"lightGray",style:c.icon});case"layout":return(0,_.jsx)(i().I,{style:c.icon,icon:u()._});case"block":return(0,_.jsx)(_.Fragment,{children:(0,m().notionTemplateTintableIcon)(c.icon)});case"collection":case"compound":const t="collection"===e.type?e.value.targetCollection.icon:e.icon;if(!(0,s().T8)(t))throw new Error("Only Notion static icons are allowed for template icons");return(0,_.jsx)(x,{icon:t,themeMode:f,size:a,style:c.icon});case"automation":return(0,_.jsx)(i().I,{icon:p().o,style:c.icon});default:(0,g().HB)(v)}}function T({template:e,iconSize:t,styles:o}){const i=(0,r().DP)(),l=(0,n().K8)((()=>{const{relatedCollectionTemplateId:t}=e;if("relation"===e.value.type&&t){return S().globalWorkflowTemplates.fromIdOfType({templateId:t,type:"collection"}).value.targetCollection.icon}return e.value.icon}),[e]);return(0,_.jsx)(c().zB,{type:e.value.type,icon:l,size:t,style:o.icon,theme:i})}function k({template:e,backgroundSize:t}){const o=(0,r().IS)((()=>({iconContainer:{background:I({template:e})[30]},icon:{fill:I({template:e})[400]}})),[e]);return(0,_.jsx)(v().y,{backgroundColor:o.iconContainer.background,backgroundSize:t,icon:(0,_.jsx)(b,{template:e,iconStyle:o.icon})})}function I({template:e}){const{type:t}=e;switch(t){case"collection_view":case"automation":return f().Tj.palette.blue;case"property":return"relation"===e.value.type?f().Tj.palette.yellow:f().Tj.palette.red;case"layout":return f().Tj.palette.orange;case"block":return f().Tj.palette.purple;case"compound":return f().Tj.palette.green;case"collection":return f().Tj.palette.pink;default:(0,g().HB)(t)}}},922952:(e,t,o)=>{o.d(t,{u:()=>l});var n=()=>o(295633),r=()=>o(302996),i=()=>o(723085);function l(e){return e instanceof i().h||e instanceof r().SpaceStore||e instanceof n().B}},935432:(e,t,o)=>{o.d(t,{A:()=>l});var n=()=>o(416845),r=()=>o(357264),i=()=>o(788579);function l(e,t){if((0,n().pA8)(t)){const o=(0,i().$)(t.clientData);if(o)return"messageValues"in t.clientData?e.formatMessage(o,t.clientData.messageValues):e.formatMessage(o)}return e.formatMessage(r().k.generic_error)}},960127:(e,t,o)=>{o.r(t),o.d(t,{WorkflowSettingsConfirmAddTemplate:()=>A,isWorkflowTemplateWithConfirmStep:()=>R});o(16280);var n=o(296540),r=()=>o(564884),i=()=>o(726637),l=()=>o(484714),a=()=>o(401497),c=()=>o(160432),s=()=>o(424400),d=()=>o(736847),u=()=>o(663077),p=()=>o(69708),m=()=>o(496603),f=()=>o(339798),g=()=>o(735695),y=()=>o(35091),v=()=>o(908201),h=()=>o(244828),S=()=>o(101926),_=()=>o(513349),w=()=>o(913454),x=(o(581454),()=>o(784892)),b=()=>o(100622),T=()=>o(399762),k=o(474848);function I({template:e,style:t}){const o=(0,a().IS)((()=>({container:{...t,padding:12,border:`1px solid ${b().Tj.border.secondaryTranslucent}`,borderRadius:6}})),[t]),n=function(e){if((0,u().Xq)(e,"property")&&(0,u().Io)(e)){const{options:t=[]}=e.value;if(0===t.length)return;return(0,k.jsx)(M,{options:t})}}(e);return n?(0,k.jsx)("div",{style:o.container,children:n}):null}function M({options:e}){const t=(0,a().IS)((()=>({container:{display:"flex",flexDirection:"column",gap:8}})),[]);return(0,k.jsx)("div",{style:t.container,children:e.map((e=>(0,k.jsx)("div",{children:(0,k.jsx)(T().O,{format:x().NY.Medium,isSingle:!0,value:e.value,color:e.color,showRemoveButton:!1})},e.id)))})}var C=()=>o(902842);function A({template:e,collectionSettingsStore:t}){const[o,r]=(0,n.useState)("sample"===e.propertyOptionsType),l=(0,a().IS)((()=>{const e={display:"flex",flexDirection:"column",minHeight:0};return{shrinkableHeight:e,noShrink:{flexShrink:0},featurePreviewWrapper:{...e,width:"-webkit-fill-available"},featurePreviewBody:{...e,gap:16,...i().A.isMobile?{margin:"16px 0"}:{margin:0}},featurePreview:{...e,overflow:"auto"},addButtonContainer:{...i().A.isMobile?{margin:"12px 0"}:{marginBottom:6}}}}),[]),c=(0,w().getWorkflowTemplateName)(e);return(0,k.jsxs)(g().A,{collectionSettingsStore:t,title:(0,k.jsx)(p().sA,{id:"workflowTemplateSettings.confirmAddTemplate.title",defaultMessage:"Turn on {templateName}",values:{templateName:c}}),disableScroller:!0,menuScrollerStyle:l.shrinkableHeight,innerContentWrapperStyle:l.shrinkableHeight,children:[(0,k.jsx)(d().A,{style:l.shrinkableHeight,children:(0,k.jsx)(s().Ay,{style:l.shrinkableHeight,textWrapperStyle:l.featurePreviewWrapper,bodyStyle:l.featurePreviewBody,body:(0,k.jsxs)(k.Fragment,{children:[(0,k.jsx)(j,{template:e,style:l.noShrink}),(0,k.jsx)(I,{template:e,style:l.featurePreview})]})})}),(0,k.jsx)(d().A,{style:l.noShrink,children:e.value.options&&e.value.options.length>0?(0,k.jsx)(y().A,{title:(0,k.jsx)(p().sA,{id:"workflowTemplateSettings.confirmAddTemplate.propertyOptionsToggle",defaultMessage:"Set my own options"}),switcherProps:{on:o,disallowTabbing:!0},onClick:()=>{r(!o)}}):void 0}),(0,k.jsx)(d().A,{style:l.noShrink,children:(0,k.jsx)(s().Ay,{body:(0,k.jsx)(V,{template:e,startEmpty:o}),bodyStyle:l.addButtonContainer})})]})}function j({template:e,style:t}){const o=(0,a().IS)((()=>({container:{...t,display:"flex",alignItems:"center",gap:12},textWrapper:{lineHeight:i().A.isMobile?"20px":"18px"},title:{fontSize:i().A.isMobile?16:13},caption:{fontSize:i().A.isMobile?14:12,overflow:"hidden",color:"gray",whiteSpace:"nowrap",textOverflow:"ellipsis"}})),[t]),n=(0,w().getWorkflowTemplateName)(e),r=(0,u().Uy)(e);return(0,k.jsxs)("div",{style:o.container,children:[(0,k.jsx)(C().n,{template:e,backgroundSize:32}),(0,k.jsxs)("div",{style:o.textWrapper,children:[(0,k.jsx)("div",{style:o.title,children:n}),r?(0,k.jsx)("div",{style:o.caption,children:r}):void 0]})]})}function V({template:e,startEmpty:t}){const o=(0,a().IS)((()=>({button:{width:"100%"}})),[]),n=(0,l().v3)(),i=(0,v().ET)(),s=(0,w().getWorkflowTemplateName)(e),d=m().mg(e);return t&&delete d.value.options,(0,k.jsx)(c().A,{colorPalette:"blue",style:o.button,size:"lg",onClick:()=>{h().createAndCommit({userAction:"WorkflowSettingsConfirmAddTemplate.addFeatureTemplateToTarget",environment:n,canUndo:!0,perform:t=>{const o=i.collectionStore();if(!o)throw new Error("collectionStore not found");S().ai({environment:n,transaction:t,collectionStore:o,template:d,logger:new(w().WorkflowTemplateLogger),origin:"suggested_feature"});const l=i.settingsStore;f().yl({collectionSettingsStore:l});const a=o.getWorkflowTemplateId();(0,r().u)({environment:n,event:{eventName:"suggested_feature_template_added",eventProperties:{origin:"suggested_properties",template_id_added:e.templateId,collection_template_id:a}}});const c=i.collectionViewStore();c&&(0,_().UD)({template:e,environment:n,collectionStore:o,collectionViewStore:c,collectionSettingsStore:l,collectionContextStore:i})}})},children:(0,k.jsx)(p().sA,{id:"workflowTemplateSettings.confirmAddTemplate.button",defaultMessage:"Add {templateName}",values:{templateName:s}})})}function R(e){return"property"===e.type&&("select"===e.value.type||"multi_select"===e.value.type)}},962753:(e,t,o)=>{o.d(t,{EH:()=>h,FO:()=>y,P$:()=>v,VA:()=>f,h0:()=>d,lM:()=>u,mq:()=>g});o(898992),o(581454),o(737550);var n=()=>o(907258),r=()=>o(242422),i=()=>o(763765),l=()=>o(613848),a=()=>o(496603),c=()=>o(534177),s=()=>o(822789);function d(e){const{currentUserRootStore:t}=n().default.state;if(!t)return!1;const o=t.getSpaceViewStores();return(0,a().oE)(null==o?void 0:o.map((e=>e.getSpaceId()))).map((t=>l().A.getData(e,{spaceId:t,userId:e.currentUser.id}))).some((e=>p(e)))}function u(e,t){return p(l().A.getData(e,{spaceId:t,userId:e.currentUser.id}))}function p(e){switch(null==e?void 0:e.membershipType){case void 0:case"none":case"page_guest":return!1;case"restricted_member":case"member":case"membership_admin":case"owner":return!0===e.is_sales_assisted;default:(0,c().HB)(e)}}function m(e,t){if(!t)return"control";if(u(e,t))return"control";const o=r().default.getEligibleGroup({experimentId:"ai_product_retention_simplified_input",defaultGroup:"control"});return"input"===o||"input_and_ask_mode"===o?o:"control"}function f(){switch(r().default.getEligibleGroup({experimentId:"ai_product_retention_agent_follow_ups",defaultGroup:"control"})){case"button_nudge":return["button","nudge"];case"button_control":return["button","default"];case"nudge":return["nudge"];default:return}}function g(e,t){const o=r().default.checkGate({gateName:"agent_deep_find"}),n=void 0!==t&&u(e,t),l=e.currentUser.id,a=!t||!l||i().t.USEWITHCAUTION_isFetchedForSpaceAndUserId({spaceId:t,userId:l}),c=o||!n&&a&&"on"===r().default.getEligibleGroup({experimentId:"ai_product_retention_deepfind",defaultGroup:"control"}),s=v(e,t);return{agentDeepFindEnabled:c,useReadOnlyMode:c&&s}}function y(e,t){if(t?(0,s().vp)(t):(0,s().hw)())return!0;return"control"!==m(e,t)}function v(e,t){return"input_and_ask_mode"===m(e,t)}function h(){return"on"===r().default.getEligibleGroup({experimentId:"ai_product_retention_agent_speculative_search",defaultGroup:"control"})}},966759:(e,t,o)=>{o.d(t,{i:()=>i});var n=()=>o(390650),r=()=>o(175213);function i(e){const{environment:t,collectionContextStore:o,property_type:i,from:l,property:a,...c}=e,s=(0,n().sl)(o)||{};(0,r().G)(t,{property:a,property_type:i,from:l,...c,...s})}},969318:(e,t,o)=>{o.d(t,{iZ:()=>i,vE:()=>n,vg:()=>r});const n=290,r=280,i=400}}]);