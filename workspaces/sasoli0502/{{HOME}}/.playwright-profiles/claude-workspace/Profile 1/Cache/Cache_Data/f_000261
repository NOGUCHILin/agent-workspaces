"use strict";(globalThis.webpackChunknotion_next=globalThis.webpackChunknotion_next||[]).push([[25588],{167334:(e,t,o)=>{o.d(t,{A:()=>l});o(296540);var n=()=>o(726637),i=()=>o(401497),a=()=>o(187820),s=()=>o(205981),r=o(474848);function l(e){const{icon:t,isAlias:o,isEmptyPage:l,iconStyle:d,size:c,iconRecordCategory:u}=e,m=(0,i().IS)((()=>({wrap:{display:"flex",alignItems:"center",justifyContent:"center",flexShrink:0,flexGrow:0,width:n().A.isMobile?28:22,height:n().A.isMobile?24:18,position:"relative"}})),[]);return(0,r.jsxs)("div",{style:m.wrap,children:[(0,r.jsx)(a().B6,{disabled:!0,icon:t,iconRecordCategory:u,isEmptyPage:l,size:c??19,style:d}),o?(0,r.jsx)(s().H,{size:"sm"}):void 0]})}},205160:(e,t,o)=>{o.d(t,{K:()=>a,v:()=>i});var n=()=>o(69708);const i=(0,n().YK)({addAPageInside:{defaultMessage:"Add a page inside",id:"sidebarItem.addAPageInside.tooltip"}}),a=(0,n().YK)({addPageTooltip:{defaultMessage:"Add a page",id:"sidebar.addButton.addPageTooltip"}})},235773:(e,t,o)=>{o.r(t),o.d(t,{iconDefinition:()=>i,notionTemplateTintableIcon:()=>a});o(296540);var n=o(474848);const i={viewBox:"0 0 20 20",fittedViewBox:"1.58 3 16.83 14",svg:(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("path",{fillRule:"evenodd",d:"M6.014 16.338a4.43 4.43 0 0 0 4.43-4.48H8.88c-.254 0-.512 0-.732-.018a2.3 2.3 0 0 1-.86-.226 2.24 2.24 0 0 1-.979-.979 2.3 2.3 0 0 1-.226-.86 10 10 0 0 1-.018-.731V7.48a4.44 4.44 0 0 1 2.297.678 4.431 4.431 0 0 0-6.777 3.751 4.43 4.43 0 0 0 4.43 4.43z",clipRule:"evenodd"}),(0,n.jsx)("path",{d:"M12.902 11.044c.463-.802.694-1.203.997-1.338a1.02 1.02 0 0 1 .828 0c.302.135.534.536.996 1.338l2.028 3.512c.463.802.695 1.203.66 1.532-.03.287-.18.548-.414.718-.267.194-.73.194-1.656.194h-4.057c-.925 0-1.388 0-1.656-.194a1.02 1.02 0 0 1-.414-.718c-.035-.329.197-.73.66-1.532z"}),(0,n.jsx)("path",{fillRule:"evenodd",d:"M7.287 4.63c0-.571 0-.856.111-1.074.098-.192.254-.347.445-.445C8.061 3 8.346 3 8.916 3h4.38c.57 0 .854 0 1.072.111.191.098.347.253.445.445.11.218.11.503.11 1.073v3.852a2.24 2.24 0 0 0-1.52.109c-.46.204-.75.56-.94.83q-.318.472-.595.97l-.024.043-.118.203h-2.81c-.57 0-.855 0-1.073-.11a1 1 0 0 1-.445-.445c-.11-.218-.11-.503-.11-1.074z",clipRule:"evenodd"})]})},a=(0,o(340498).wt)("notionTemplateTintable",i,"tintable")},317705:(e,t,o)=>{o.d(t,{W:()=>d});var n=o(296540),i=()=>o(819121),a=()=>o(590526),s=()=>o(664748),r=()=>o(681748);class l extends(()=>o(757695))().Store{getInitialState(){return{isSidebarItemHovered:!1,isSidebarItemFocused:!1,isActionButtonHovered:!1,isActionButtonFocused:!1,isActionButton2Hovered:!1,isActionButton2Focused:!1}}}function d(){const e=(0,a().uB)(void 0,r().A),t=(0,a().uB)(void 0,l),o=(0,n.useCallback)((e=>{const o=e.target;o instanceof HTMLElement&&(0,i().p)(o)&&t.setState({...t.state,isSidebarItemFocused:!0})}),[t]),d=(0,n.useCallback)((()=>{t.setState({...t.state,isSidebarItemFocused:!1})}),[t]),c=(0,n.useCallback)((()=>{s().A.state.isDragging||t.setState({...t.state,isSidebarItemHovered:!0})}),[t]),u=(0,n.useCallback)((()=>{t.setState({...t.state,isSidebarItemHovered:!1})}),[t]);return{sidebarTooltipStore:e,sidebarItemHoverStore:t,handleFocus:o,handleBlur:d,handleMouseMove:c,handleMouseLeave:u}}},357927:(e,t,o)=>{o.r(t),o.d(t,{iconDefinition:()=>n,templatesIcon:()=>i});o(296540);const n={viewBox:"0 0 20 20",fittedViewBox:"2.08 2.62 15.84 14.75",svg:(0,o(474848).jsx)("path",{d:"M7.682 5.716V4.182c0-.858.7-1.557 1.557-1.557h5.823c.858 0 1.557.7 1.557 1.557v5.59a1.56 1.56 0 0 1-1.093 1.486l2.185 3.786c.589 1.038-.154 2.331-1.354 2.331H9.38c-1.138 0-1.895-1.18-1.421-2.201q-.513.113-1.057.114a4.81 4.81 0 0 1-4.818-4.818 4.812 4.812 0 0 1 5.6-4.754M9.24 3.875a.31.31 0 0 0-.307.307v5.6a.3.3 0 0 0 .298.296h1.66l.622-1.075a.6.6 0 0 1 .073-.103 1.56 1.56 0 0 1 2.638.1l.002.003.62 1.075h.217a.31.31 0 0 0 .307-.306v-5.59a.31.31 0 0 0-.307-.307zm-.01 7.453a1.55 1.55 0 0 1-1.547-1.547V6.99a3.562 3.562 0 0 0-4.35 3.481 3.56 3.56 0 0 0 3.569 3.568 3.54 3.54 0 0 0 2.09-.669l1.178-2.04zm3.914-1.7a.31.31 0 0 0-.54.002 1 1 0 0 1-.057.08L9.11 15.665l-.001.002a.306.306 0 0 0 .27.458h6.978a.31.31 0 0 0 .268-.463z"})},i=(0,o(340498).wt)("templates",n,"default")},362749:(e,t,o)=>{async function n(){return(await Promise.all([o.e(35530),o.e(9773),o.e(36556),o.e(40537),o.e(27992),o.e(63452),o.e(66249),o.e(92845),o.e(14578),o.e(87017),o.e(63137)]).then(o.bind(o,375215))).createPageInTeamSyncImpl}async function i(){return(await o.e(32675).then(o.bind(o,759135))).navigateToLibraryPage}o.d(t,{P:()=>n,p:()=>i})},411471:(e,t,o)=>{o.d(t,{ke:()=>T,xw:()=>P,Ay:()=>B,Oc:()=>C,aQ:()=>M});var n=o(296540),i=()=>o(907258),a=()=>o(590526),s=()=>o(401497),r=()=>o(939453),l=()=>o(996332),d=()=>o(807449),c=()=>o(26697),u=()=>o(133043),m=()=>o(69708),p=()=>o(100622),g=()=>o(35392),h=()=>o(512726),f=()=>o(694874),v=()=>o(696746),S=()=>o(644914),b=()=>o(79926);const y={LazyAiLandingPageExperimentSwitcher:new(b().O2)("LazyAiLandingPageExperimentSwitcher",(()=>Promise.all([o.e(75134),o.e(35530),o.e(9773),o.e(36556),o.e(55373),o.e(36192),o.e(40537),o.e(71562),o.e(96346),o.e(44711),o.e(53321),o.e(51220),o.e(16471),o.e(37353),o.e(37571),o.e(29151),o.e(40118),o.e(50397),o.e(35837),o.e(27992),o.e(63452),o.e(66249),o.e(92845),o.e(87249),o.e(79022),o.e(14578),o.e(87017),o.e(34877),o.e(46414),o.e(11676),o.e(61165),o.e(47668),o.e(94522),o.e(24587),o.e(44584),o.e(67494),o.e(10522),o.e(38293),o.e(40992),o.e(88455),o.e(63515),o.e(33893),o.e(55162),o.e(91793),o.e(71003),o.e(32370),o.e(26264),o.e(97989),o.e(36437),o.e(93963),o.e(44590),o.e(7914),o.e(55113),o.e(85071),o.e(25588),o.e(6769),o.e(23640),o.e(72252),o.e(93134),o.e(12452),o.e(18825),o.e(52871),o.e(29351),o.e(22370),o.e(93049),o.e(22582),o.e(18636),o.e(87289),o.e(16060),o.e(16529),o.e(34281),o.e(35279),o.e(69785),o.e(77754),o.e(29357),o.e(22585),o.e(49021),o.e(19456),o.e(65375),o.e(6039),o.e(60751),o.e(51761),o.e(13023),o.e(51224),o.e(57418),o.e(39005),o.e(19659),o.e(31911),o.e(36902),o.e(48854),o.e(2209)]).then(o.bind(o,981440))))},x=(0,b()._h)(y.LazyAiLandingPageExperimentSwitcher,(e=>e.AiLandingPageExperimentSwitcher));var A=()=>o(804319),I=o(474848);const w=(0,m().YK)({experimentSwitcherTooltip:{id:"aiLandingPageExperimentSwitcherTooltip",defaultMessage:"[dev only] experience switcher"},chatHistoryTooltip:{id:"aiSidebarItem.askNotionAi.history.tooltip",defaultMessage:"Chat history"}});function j(e){const{styles:t}=e,h=(0,o(484714).v3)(),b=(0,a().K8)((()=>{const{sidebarSpaceViewStore:e}=i().default.state;if(e)return v().x$(e)}),[]),y=(0,a().K8)((()=>{const e=i().default.state.mainEditorCurrentBlockStore;return!!e&&v().Nh(e.id)}),[]),j=(0,a().K8)((()=>"home_available"===r().default.getState().type),[]),T=(0,a().K8)((()=>{const e=null==b?void 0:b.getModel();return e&&b&&(0,o(488715).Q)({model:e,getRecordModel:b.getRecordModel,pageVisitSource:o(584262).y8.SidebarHome})}),[b]),B=(0,o(640945).X)(),k=(0,o(59226).X)("feed_sidebar_item"),H=(0,o(38554).U)(),{sidebarTooltipStore:_,sidebarItemHoverStore:L,handleFocus:K,handleBlur:V,handleMouseMove:z,handleMouseLeave:F}=(0,o(317705).W)(),R=(0,n.useCallback)((()=>{(0,f().Wy)(h),(0,f().F$)(h),(0,o(162674).ZL)({environment:h,from:"sidebar"}),j&&(0,f().tL)(h),o(441199).default.isVisible()&&(0,o(770906).VI)({environment:h})}),[h,j]),D=(0,S().ab)(),E=(0,s().IS)((()=>({tooltip:{width:200},shortcutLabel:{color:p().Tj.text.inverseSecondary},linkBoxStyle:{...D.baseSidebarItem,...y&&D.currentSelectedSidebarItem}})),[y,D]),N=(0,a().O$)(L),U=(0,a().K8)((()=>C()),[]),Y=(0,n.useCallback)((()=>{const{isActionButtonFocused:e,isActionButtonHovered:t,isActionButton2Focused:o,isActionButton2Hovered:n}=N;return t?(0,I.jsx)(m().sA,{...w.chatHistoryTooltip}):n?(0,I.jsx)(m().sA,{...w.experimentSwitcherTooltip}):e?(0,I.jsx)(m().sA,{...w.chatHistoryTooltip}):o?(0,I.jsx)(m().sA,{...w.experimentSwitcherTooltip}):(0,I.jsxs)("div",{style:E.tooltip,children:[(0,I.jsx)("div",{children:(0,I.jsx)(m().sA,{...U})}),(0,I.jsx)(g().A,{style:E.shortcutLabel,name:"openHome"})]})}),[N,E.shortcutLabel,E.tooltip,U]);return(0,I.jsx)(c().m,{store:_,renderTooltip:Y,disableTooltip:j,originGap:6,textWrap:!0,placement:"right",render:e=>(0,I.jsx)(l().Q,{...e,style:E.linkBoxStyle,hoveredStyle:null==t?void 0:t.buttonHoveredStyle,href:T,onClick:R,onFocus:t=>{var o;null===(o=e.onFocus)||void 0===o||o.call(e,t),K(t)},onBlur:t=>{var o;null===(o=e.onBlur)||void 0===o||o.call(e,t),V()},"aria-current":y?"page":void 0,children:(0,I.jsx)(A().A,{left:(0,I.jsx)(d().I,{icon:u().P,colorVariant:"secondary",size:"lg"}),disableMobileBorder:!0,right:(0,I.jsxs)("div",{style:{display:"flex",flexDirection:"row",marginInlineEnd:-4,justifyContent:"center",gap:3},children:[(0,I.jsx)(x,{sidebarItemHoverStore:L,sidebarTooltipStore:_}),Boolean(B)&&!k?(0,I.jsx)(P,{}):void 0]}),onMouseMove:z,onMouseLeave:F,children:(0,I.jsx)(m().sA,{...H?M.oldHomeLabel:M.label})})})})}function T(e){const{styles:t}=e,o=(0,a().K8)((()=>"home_available"===r().default.getState().type),[]),n=(0,S().ab)(),i=(0,s().IS)((()=>({tooltip:{width:200},shortcutLabel:{color:p().Tj.text.inverseSecondary}})),[]);return(0,I.jsx)(c().m,{renderTooltip:()=>(0,I.jsxs)("div",{style:i.tooltip,children:[(0,I.jsx)("div",{children:(0,I.jsx)(m().sA,{id:"sidebarPersonalHomeButton.tooltip",defaultMessage:"Notion AI, recent pages, and more"})}),(0,I.jsx)(g().A,{style:i.shortcutLabel,name:"openHome"})]}),disableTooltip:o,originGap:6,textWrap:!0,placement:"right",render:e=>(0,I.jsx)(l().Q,{...e,style:n.baseSidebarItem,hoveredStyle:null==t?void 0:t.buttonHoveredStyle,onClick:()=>{h().A.open()},children:(0,I.jsx)(A().A,{left:(0,I.jsx)(d().I,{icon:u().P,colorVariant:"secondary",size:"lg"}),disableMobileBorder:!0,children:(0,I.jsx)(m().sA,{id:"sidebarPersonalHomeButton.label",defaultMessage:"Home"})})})})}function P(){const e=(0,s().IS)((()=>({wrapper:{display:"flex",justifyContent:"center",alignItems:"center",width:24,height:24},unreadBadge:{backgroundColor:p().Tj.red.icon.accentPrimary,width:8,height:8,borderRadius:5,transform:"scale(0)",position:"relative"},pulseRing:{position:"absolute",width:8,height:8,borderRadius:"50%",transform:"scale(0)",background:p().Tj.red.icon.accentPrimary}})),[]),t=n.useRef(null),o=n.useRef(null);return n.useEffect((()=>{const e=t.current,n=o.current;if(!e||!n)return;const i=n.animate([{transform:"scale(0)"},{transform:"scale(1)"}],{duration:300,easing:"ease-out",fill:"forwards",delay:500}),a=e.animate([{transform:"scale(1)",opacity:.5},{transform:"scale(2.5)",opacity:0}],{duration:2e3,easing:"ease-out",delay:800});return()=>{a.cancel(),i.cancel()}}),[]),(0,I.jsx)("div",{style:e.wrapper,children:(0,I.jsx)("div",{ref:o,style:e.unreadBadge,children:(0,I.jsx)("div",{ref:t,style:e.pulseRing})})})}function C(){return M.tooltipNoAi}const M=(0,m().YK)({tooltipNoAi:{id:"sidebarPersonalHomeButton.tooltipNoAi",defaultMessage:"See recent pages, upcoming tasks & more"},label:{id:"sidebarPersonalHomeButton.label",defaultMessage:"Home"},oldHomeLabel:{id:"sidebarPersonalHomeButton.oldHomeLabel",defaultMessage:"Old home"}}),B=n.memo(j)},640945:(e,t,o)=>{o.d(t,{X:()=>x});o(898992),o(354520),o(672577),o(803949),o(581454);var n=o(296540),i=()=>o(664594),a=()=>o(907258),s=()=>o(755531),r=()=>o(484714),l=()=>o(590526),d=()=>o(852273),c=()=>o(732810),u=()=>o(187174),m=()=>o(921997),p=()=>o(519831),g=()=>o(763824),h=()=>o(753812),f=()=>o(435761),v=()=>o(578136);const S=new(o(299919).Y)((e=>new b(e)));class b extends(()=>o(757695))().Store{constructor(e){super(),this.collectionStore=void 0,this.debouncedRefresh=void 0,this.collectionStore=e,this.debouncedRefresh=(0,o(496603).sg)(this.unthrottledRefresh.bind(this),2e3)}getInitialState(){return{createdTime:-1/0,createdById:void 0}}getLatestPostCreatedTime(){return this.state.createdTime}getLatestPostCreatedById(){return this.state.createdById}async refresh(e){return this.debouncedRefresh(e)}async unthrottledRefresh(e){const{environment:t}=e;if(!t.currentUser.id)return;if(await this.collectionStore.load(),!this.collectionStore.isDefined())return;const o=5e3*Math.random();await new Promise((e=>setTimeout(e,o)));const n=await h().callApi({eventName:"getLatestPostCreated",environment:t,data:{spaceId:this.collectionStore.getSpaceId(),collectionIds:[this.collectionStore.id]}});if("success"===n.type&&n.data){const e=n.data[0];this.setState(e)}}}function y(e){const t=(0,r().v3)(),o=(0,l().K8)((()=>{var t;return null==e||null===(t=e[0])||void 0===t?void 0:t.getSpaceId()}),[e]),i=(0,n.useMemo)((()=>e.filter((e=>!S.has(e)))),[e]);(0,u().Yb)((async()=>{await async function(e){const{environment:t,collectionStores:o}=e,n=await g().dS(o,10,(async e=>(await e.load(),e.isDefined())));if(0===n.length)return;const i=n[0].getSpaceId(),a=await h().callApi({eventName:"getLatestPostCreated",environment:t,data:{spaceId:i,collectionIds:n.map((e=>e.id))}});if("success"===a.type&&a.data)for(let s=0;s<n.length;s++){const e=n[s],t=a.data[s];t.collectionId===e.id&&S.get(e).setState(t)}}({environment:t,collectionStores:i})}),[i,t]);const a=(0,n.useMemo)((()=>e.map((e=>S.get(e)),[])),[e]);return(0,n.useEffect)((()=>{if(!o)return;const e=a.map((e=>d().Ay.addListener((0,m().eG)(e.collectionStore.id),void 0,(0,d().AY)((async()=>await e.refresh({environment:t}))),void 0,t)));return()=>{e.forEach((e=>{e&&d().Ay.removeListener(e,t)}))}}),[a,o,t]),a}function x(){const e=(0,r().v3)(),t=(0,l().K8)((()=>(0,v().D)({isMobileNative:e.device.isMobileNative,disableExposureLogging:!0})),[e]),o=(0,i().T)(),n=(0,l().O$)(a().AppStoreSidebarSpaceStore),{teams:d}=(0,f().hL)({userId:o,spaceStore:n}),u=(0,f().gc)({spaceStore:n,teams:d}),m=y((0,l().K8)((()=>{if(!t)return[];if(!o||!n)return[];return u.map((({store:e})=>e)).map((e=>c().m.createChildStore(e,{table:p().Vl,id:e.id,spaceId:n.id})))}),[t,o,n,u]));return(0,l().K8)((()=>{var e;if(!(0,s().S)())return!1;const t=(null===(e=a().default.state.sidebarSpaceViewStore)||void 0===e?void 0:e.getKeyStore("settings").getKeyStore("last_opened_aggregated_feed").getValue())??0;return m.find((e=>!!e.getLatestPostCreatedById()&&(!(e.getLatestPostCreatedTime()<=t)&&e.getLatestPostCreatedById()!==o)))}),[m,o])}},694874:(e,t,o)=>{o.d(t,{F$:()=>S,Oh:()=>b,Qs:()=>v,Wy:()=>p,aX:()=>h,it:()=>f,tL:()=>g});o(898992),o(354520),o(430670);var n=()=>o(907258),i=()=>o(939453),a=()=>o(994310),s=()=>o(534177),r=()=>o(384944),l=()=>o(680977),d=()=>o(708304),c=()=>o(244828),u=()=>o(696746),m=()=>o(705059);function p(e){const{currentUserSettingsStore:t}=n().default.state;t&&c().createAndCommit({userAction:"SidebarPersonalHomeButton.markAsSeen",environment:e,canUndo:!0,perform:e=>{(0,l().m)({userSettingsStore:t,transaction:e,data:{seen_personal_home:!0}})}})}function g(e){const{currentUserSettingsStore:t}=n().default.state;t&&(i().default.setState({type:"inactive"}),c().createAndCommit({userAction:"SidebarPersonalHomeButton.markHomeTooltipAsSeen",environment:e,canUndo:!0,perform:e=>{(0,l().m)({userSettingsStore:t,transaction:e,data:{personal_home_delayed_tooltip_dismissed_at:Date.now()}})}}))}function h(e){const{environment:t,newSeenWelcomeHomeValue:o}=e,i=n().default.state.sidebarSpaceViewStore;i&&c().createAndCommit({userAction:"SidebarPersonalHomeSettings.markWelcomeAnimationAsSeen",environment:t,canUndo:!0,perform:e=>{const t=i.getSettingsStore().getKeyStore("personal_home").getKeyStore("seen_welcome_animation");r().KY({store:t,transaction:e,value:o})}})}function f(e){const{environment:t,tipType:o,completed:i}=e,{currentUserSettingsStore:a}=n().default.state;if(!a)return;const s=a.getPersonalHomeTipsSettings(),r={...s,progress_data:{...s.progress_data,[o]:{completed:i}}};c().createAndCommit({userAction:"LearnHomePanel.updateProgress",environment:t,canUndo:!0,perform:e=>{(0,l().m)({userSettingsStore:a,transaction:e,data:{personal_home_tips_settings:r}})}})}function v(e){const{environment:t,hide:o}=e,{currentUserSettingsStore:i}=n().default.state;if(!i)return;const a={...i.getPersonalHomeTipsSettings(),hide_completed:o};c().createAndCommit({userAction:"LearnHomePanel.hideCompleted",environment:t,canUndo:!0,perform:e=>{(0,l().m)({userSettingsStore:i,transaction:e,data:{personal_home_tips_settings:a}})}})}function S(e){const{currentUserSettingsStore:t}=n().default.state;t&&c().createAndCommit({environment:e,userAction:"personalHomeActions.markPersonalHomeSidebarItemClicked",canUndo:!0,cellTarget:"main",perform:e=>{(0,l().m)({userSettingsStore:t,transaction:e,data:{personal_home_sidebar_item_clicked_at:Date.now()}})}})}function b(e){const{blockId:t,enabledFeatures:o,userId:n}=e,i=(0,s().WP)(o).flatMap((([e,t])=>{if(!t)return[];switch(e){case"tasks":return[(0,u().NY)("myTasksAssignedToMeCollectionView")];case"customDb":const t=(0,u().NY)("customDb");return[t&&(0,d().cf)({userId:n,viewBlockId:t})];case"similarUsersAndTrending":return[(0,u().NY)("similarUsersCollectionView"),(0,u().NY)("trendingCollectionView")];case"unifiedFeed":return[(0,u().NY)("postsCollectionView")];case"recents":case"templates":case"tips":case"calendar":case"suggested":case"trending":case"shortcuts":case"workspaceDiscovery":return[];default:(0,s().HB)(e)}})).filter(s().O9),{isHomeKey:r,homeCollectionViewIdsKey:l,unifiedFeedEnabledKey:c}=(0,m().h)(t);a().A.set(r,!0),a().A.set(l,i),a().A.set(c,o.unifiedFeed)}},829548:(e,t,o)=>{o.d(t,{y:()=>i});o(296540);const n={viewBox:"0 0 20 20",fittedViewBox:"1.87 3.62 16.25 12.75",svg:(0,o(474848).jsx)("path",{d:"M6.303 3.625c-.71 0-1.374.355-1.768.946L2.232 8.025c-.233.35-.357.76-.357 1.18v5.045c0 1.174.951 2.125 2.125 2.125h12a2.125 2.125 0 0 0 2.125-2.125V9.204c0-.42-.124-.83-.357-1.179l-2.303-3.454a2.13 2.13 0 0 0-1.768-.946zm-.728 1.64a.88.88 0 0 1 .728-.39h7.394c.293 0 .566.146.728.39l2.303 3.454a1 1 0 0 1 .083.156h-4.702a.625.625 0 0 0-.625.625v.476a1.484 1.484 0 0 1-2.968 0V9.5a.625.625 0 0 0-.625-.625H3.189a1 1 0 0 1 .083-.156zm-2.45 4.86H7.27a2.734 2.734 0 0 0 5.46 0h4.145v4.125a.875.875 0 0 1-.875.875H4a.875.875 0 0 1-.875-.875z"})},i=(0,o(340498).wt)("inbox",n,"default")},907893:(e,t,o)=>{o.d(t,{Ay:()=>V,Kd:()=>E});o(18107),o(967357),o(898992),o(354520),o(581454);var n=o(296540),i=()=>o(59226),a=()=>o(726637),s=()=>o(383036),r=()=>o(484714),l=()=>o(590526),d=()=>o(401497),c=()=>o(569797),u=()=>o(74351),m=()=>o(718827),p=()=>o(245720),g=()=>o(250910),h=()=>o(807449),f=()=>o(546926),v=()=>o(26697),S=()=>o(890492),b=()=>o(81068),y=()=>o(663639),x=()=>o(736847),A=()=>o(126617),I=()=>o(863330),w=()=>o(869558),j=()=>o(69708),T=()=>o(901265),P=()=>o(439549),C=()=>o(16006),M=()=>o(167334),B=()=>o(115512),k=()=>o(703397),H=()=>o(970501),_=()=>o(205160),L=o(474848);function K(e){const{store:t,from:n,type:i,canEditItem:s,itemDepth:r,isHovered:c,isFocused:u,onToggle:m}=e,p=a().A.isMobile||c||u,g=(0,l().K8)((()=>{var e;const n=(0,o(388444).s)(t),i=t.isPlaceholderWorkflowTemplateBlock(),a=null===(e=t.getCollectionStoreIfSingleSource())||void 0===e?void 0:e.isSyncedCollection(),r=t.isPersonProfile(),l=t.isPeopleCollectionViewPage();return Boolean(t.getType()&&s&&!n&&!i&&!a&&!r&&!l)}),[t,s]),h=function(e){const{showRightIcons:t}=e;return(0,d().IS)((()=>({iconContainer:{display:"flex",paddingInlineStart:3,...t?{}:{...B().Qg,display:"block"}}})),[t])}({showRightIcons:p});return i===o(946065).yy?null:(0,L.jsx)("div",{style:h.iconContainer,children:"library"===n?null:(0,L.jsxs)(L.Fragment,{children:[(0,L.jsx)(D,{store:t,from:n,type:e.type,itemIndex:e.itemIndex,itemDepth:r}),g?(0,L.jsx)(z,{store:t,onToggle:m,isTopLevelItem:0===r,from:n,type:i}):void 0]})})}const V=n.memo(K);function z(e){const{store:t,onToggle:o,isTopLevelItem:n,from:i,type:d}=e,u=(0,r().v3)(),m=(0,j().tz)(),p=(0,l().K8)((()=>t.isCollectionView()),[t]),h=(0,l().K8)((()=>t.getOwnedAndLinkedCollectionStores()),[t]),f=(0,l().K8)((()=>{var e;const o=null===(e=t.getCollectionViewStores().at(0))||void 0===e?void 0:e.id;if(!o)return;const n=c().p.createChildStore(t,{table:w().Gy,id:o});return null==n?void 0:n.getFormatStore().getValue()}),[t]),S=m.formatMessage(_().v.addAPageInside);return p&&!f&&0===h.length?(0,L.jsx)(F,{disabled:!0}):h.length<=1?(0,L.jsx)(v().m,{renderTooltip:()=>S,placement:"bottom",render:e=>{const a={...e,onClick:e=>{var a;const s=(null===(a=h[0])||void 0===a?void 0:a.getParentBlockStore())??t;P().ru({store:s,shouldNavigateToSource:!1,environment:u,analytics:{from:i,type:d},toggleOptions:{onToggle:o,isTopLevelItem:n}})}};return(0,L.jsx)(F,{events:a})}}):(0,L.jsx)(v().m,{renderTooltip:()=>S,placement:"bottom",render:e=>(0,L.jsx)(g().A,{popupType:a().A.isMobile?g().z.BottomSheet:g().z.Popup,renderOrigin:t=>(0,L.jsx)(F,{events:(0,s().A)(e,t)}),render:e=>(0,L.jsx)(R,{blockStore:t,parent:e,from:i,type:d})})})}function F(e){const t=E(),o=(0,j().tz)();return(0,L.jsx)(m().Ay,{ariaLabel:o.formatMessage(_().v.addAPageInside),style:t.button,disabled:e.disabled,disabledFeedback:e.disabled,...e.events,children:(0,L.jsx)(h().I,{icon:I().plusSmallIcon,size:"sm",colorVariant:a().A.isMobile?"tertiary":"secondary"})})}function R(e){const{blockStore:t,parent:o,from:n,type:s}=e,c=(0,r().v3)(),u=(0,l().K8)((()=>t.getOwnedAndLinkedCollectionStores().filter((e=>!e.isSyncedCollection()))),[t]),m=(0,i().X)("can_create_pages_in_collection_permission"),g=(0,l().K8)((()=>u.map((e=>!!m&&!k().Q.getData(c,{collectionId:e.id,spaceId:e.getSpaceId()})))),[u,c,m]),h=(0,d().IS)((()=>({menuItem:{display:"flex",alignItems:"center",whiteSpace:"pre"}})),[]),v={menuType:a().A.isMobile?f().gu.Modal:f().gu.Popup,right:a().A.isMobile?(0,L.jsx)(j().sA,{...p().W.done}):void 0},A={key:"collections",render:e=>(0,L.jsx)(x().A,{...e,title:(0,L.jsx)(j().sA,{defaultMessage:"Add to",id:"sidebarItem.addAPageInside.popup.addTo"})}),items:u.map(((e,o)=>({key:e.id,render:n=>{var i;return(0,L.jsx)(b().A,{...n,disabled:g[o],disabledFeedback:!0,title:(0,L.jsx)("div",{style:h.menuItem,children:(0,L.jsx)(C().A,{store:e})}),icon:(0,L.jsx)(M().A,{icon:e.getIcon(),size:14,isEmptyPage:!1,isAlias:(null===(i=e.getParentBlockStore())||void 0===i?void 0:i.id)!==t.id,iconRecordCategory:"collection"})})},action:t=>{P().ru({store:e,environment:c,shouldNavigateToSource:!0,analytics:{from:n,type:s}})}})))};return(0,L.jsx)(S().A,{...v,children:(0,L.jsx)(y().A,{type:y().O.Vertical,onAccept:o.close,initialFocus:void 0,sections:[A]})})}function D(e){const{store:t,from:o,type:n,itemDepth:i,itemIndex:s}=e,l=(0,j().tz)(),d=(0,r().v3)(),c=E(),p=e=>{const a=(0,u().U)(t);(0,H().L)({environment:d,store:t}),T().it({environment:d,stores:[t],left:e.clientX,top:e.clientY,showInput:!1,actionSectionGroupKey:"sidebar_outliner",analyticsFrom:"sidebar_more_menu",optionalAnalyticsProperties:{teamStore:a,type:0===i?"top_level":"nested",outliner_type:n,outliner_position:s,outliner_depth:i,outliner_location:"main_sidebar"===o?"sidebar":"library"===o?"library":"pane"}})},g="bookmarks"===n?l.formatMessage({defaultMessage:"Remove, rename, and more…",id:"sidebarItem.favoritedPageMenuButton.tooltip"}):l.formatMessage({defaultMessage:"Delete, duplicate, and more…",id:"sidebarItem.pageMenuButton.tooltip"});return(0,L.jsx)(v().m,{renderTooltip:()=>g,placement:"bottom",render:e=>(0,L.jsx)(m().Ay,{ariaLabel:g,style:c.button,onClick:p,...e,children:(0,L.jsx)(h().I,{icon:A().ellipsisSmallIcon,size:"sm",colorVariant:a().A.isMobile?"tertiary":"secondary"})})})}function E(){return(0,d().IS)((()=>({button:a().A.isMobile?{display:"flex",alignItems:"center",justifyContent:"center",width:32,height:32,borderRadius:4,marginInlineStart:0}:{display:"flex",alignItems:"center",justifyContent:"center",width:20,height:20,borderRadius:4,marginInlineStart:4}})),[])}}}]);