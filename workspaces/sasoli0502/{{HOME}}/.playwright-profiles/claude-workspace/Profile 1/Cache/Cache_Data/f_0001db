"use strict";(globalThis.webpackChunknotion_next=globalThis.webpackChunknotion_next||[]).push([[45277],{12591:(e,t,o)=>{o.d(t,{C:()=>s});var n=()=>o(726637),r=()=>o(401497),i=()=>o(100622),a=()=>o(284371);function s(){return(0,r().IS)((()=>({popup:{...n().A.isMobile&&{borderStartStartRadius:12,borderStartEndRadius:12,overflow:"hidden"}},menuScroller:n().A.isMobile?{background:i().Tj.background.secondary}:{},header:n().A.isMobile?{display:"flex",justifyContent:"center",alignItems:"center",fontSize:16,fontWeight:a().Wy.semibold,background:i().Tj.background.secondary,height:45}:{paddingInlineStart:12,paddingInlineEnd:12,paddingTop:8,fontWeight:a().Wy.medium},subheader:n().A.isMobile?{display:"flex",justifyContent:"start",alignItems:"center",fontSize:15,fontWeight:a().Wy.medium,background:i().Tj.background.secondary,height:45,color:i().Tj.text.secondary,paddingInlineStart:16,paddingInlineEnd:16}:{paddingInlineStart:16,paddingInlineEnd:16,paddingTop:10,fontWeight:a().Wy.semibold},sectionMenuItem:n().A.isMobile?{overflow:"hidden",background:i().Tj.background.elevated,borderRadius:12,marginInlineStart:16,marginInlineEnd:16,marginBottom:16,borderWidth:1,borderStyle:"solid",borderColor:i().Tj.border.secondary,padding:void 0}:{},buttonMenuItem:n().A.isMobile?{backgroundColor:i().Tj.background.elevated,paddingTop:12,paddingBottom:12,borderBottomWidth:1,borderBottomStyle:"solid",borderBottomColor:i().Tj.border.secondary}:{},buttonMenuItemPressed:{background:i().Tj.buttonPressedBackground},transparentButtonMenuItemBorder:{borderBottomColor:"transparent"},title:n().A.isMobile?{fontSize:16}:{},icon:{...n().A.isMobile?{height:24,width:24}:{height:20,width:20}},checkIcon:{...n().A.isMobile?{height:20,width:20}:{height:16,width:16}}})),[])}},77279:(e,t,o)=>{o.r(t),o.d(t,{default:()=>r});class n extends(()=>o(757695))().Store{getInitialState(){return{discussionIdToExpansionStartPointMap:{}}}}const r=new n},89956:(e,t,o)=>{o.d(t,{p:()=>r});o(296540);const n={viewBox:"0 0 16 16",fittedViewBox:"2.46 2.46 11.08 11.08",svg:(0,o(474848).jsx)("path",{d:"M3.088 2.463a.625.625 0 0 0-.625.625v4a.625.625 0 1 0 1.25 0V4.597l3.045 3.045a.625.625 0 0 0 .884-.884L4.597 3.713h2.49a.625.625 0 1 0 0-1.25zM9.244 8.36a.625.625 0 0 0-.883.884l3.042 3.043H8.912a.625.625 0 1 0 0 1.25h4c.345 0 .625-.28.625-.625v-4a.625.625 0 0 0-1.25 0v2.491z"})},r=(0,o(340498).wt)("arrowExpandDiagonalSmall",n,"small")},97059:(e,t,o)=>{o.d(t,{s:()=>r});o(296540);const n={viewBox:"0 0 16 16",fittedViewBox:"1.82 1.82 12.68 12.68",svg:(0,o(474848).jsx)("path",{d:"M8 1.825a.575.575 0 0 0-.575.575V4a.575.575 0 0 0 1.15 0V2.4A.575.575 0 0 0 8 1.825m4.367 1.809a.575.575 0 0 0-.814 0l-1.131 1.131a.575.575 0 1 0 .813.813l1.132-1.131a.575.575 0 0 0 0-.813m-7.92 0a.575.575 0 0 0-.813.813l1.13 1.131a.575.575 0 1 0 .814-.813zm3.248 3.071a.7.7 0 1 0-.99.99l.77.77.99-.99zm4.305.72a.575.575 0 0 0 0 1.15h1.6a.575.575 0 1 0 0-1.15zm-9.6 0a.575.575 0 1 0 0 1.15H4a.575.575 0 0 0 0-1.15zm11.895 5.88-5.37-5.37-.99.99 5.37 5.37a.7.7 0 0 0 .99-.99m-8.717-2.883a.575.575 0 0 0-.813 0l-1.131 1.131a.575.575 0 1 0 .813.813l1.131-1.131a.575.575 0 0 0 0-.813M8 11.425a.575.575 0 0 0-.575.575v1.6a.575.575 0 1 0 1.15 0V12A.575.575 0 0 0 8 11.425"})},r=(0,o(340498).wt)("magicWandSmall",n,"small")},108184:(e,t,o)=>{o.r(t),o.d(t,{COMPLETION_THROTTLE:()=>M,PREVIEW_STEP_DELAY:()=>A,maybeUpdateAIUsageEligibilityStoreV2:()=>I,maybeUpdateAiEligibility:()=>w,postProcessAICreatedStores:()=>k,showCompletionErrorWithCode:()=>T,wrapTemporaryBlocksInList:()=>C});o(18107),o(967357);var n=()=>o(242422),r=()=>o(675133),i=()=>o(128933),a=()=>o(770063),s=()=>o(878126),l=()=>o(165358),c=()=>o(179034),u=()=>o(427419),d=()=>o(720665),p=()=>o(753812),m=()=>o(722101),f=()=>o(384944),g=()=>o(274873),y=()=>o(412669),h=()=>o(556122),v=()=>o(594794),b=()=>o(668721),_=()=>o(685377),S=()=>o(661077),x=()=>o(96563);const M=300,A=250;function T(e){const t=r().A.getIntl();return 451===e?i().D6({label:t.formatMessage({id:"completionActions.moderationError",defaultMessage:"AI does not allow content that is harmful or illegal. Please revise your input and try again. (451)"})}):413===e?i().D6({label:t.formatMessage({id:"completionActions.promptOrAttachmentTooLarge",defaultMessage:"Query or attachment is too large. Please revise your input and try again. (413)"})}):502===e||503===e||504===e?i().D6({label:t.formatMessage({id:"completionActions.providerError",defaultMessage:"We’re experiencing issues with our AI provider. Try again in a few minutes. ({errorCode})"},{errorCode:e})}):void i().D6({label:t.formatMessage({id:"completionActions.genericError",defaultMessage:"AI is temporarily unavailable. Try again in a few minutes. ({errorCode})"},{errorCode:e})})}function k(e,t){for(const o of t)g().In({environment:e,blockStore:o})}async function w(e,t,o){let r;if(n().default.checkGate({gateName:"usage_based_pricing_pfa_checks_purchased_credits_enabled"}))return void(await I(e,t,o));n().default.checkGate({gateName:"usage_based_pricing_alpha_enabled"})&&I(e,t,o).catch((e=>{l().log({level:"error",from:"ai.completionActions",type:"maybeUpdateAIUsageEligibilityStoreV2Error",spaceId:t,error:e})}));const i=h().TI();if(i.debug)r=402!==i.showErrorCode;else{const n=b().o.getState();if(n&&n.isEligible&&"unlimited"===n.type&&!o){const e=n.lastUpdatedAt;if(Date.now()-e<10*d().Xb)return}const i=await p().callCellCompatibleApi({eventName:"getAIUsageEligibility",environment:e,data:{spaceId:t},cellNavigation:{cellId:void 0,spaceId:t}});if("success"===i.type){r=i.data.isEligible,r&&y().K.state&&y().K.setState(!1);const e=!1===(null==n?void 0:n.isEligible)&&(null==n?void 0:n.requestedAccess),t=i.data.researchModeUsage??0;b().o.setState({...i.data,lastUpdatedAt:Date.now(),researchModeUsage:t,...!1===i.data.isEligible&&{requestedAccess:e}})}}void 0!==r&&S().P.setState(r)}async function I(e,t,o){const n=await s().T.awaitData(e,{spaceId:t}),r=_().y.getData(e,{spaceId:t});if(n){if(r&&(0,u().Hg)(n)&&!o){const e=r.lastUpdatedAt;if(Date.now()-e<10*d().Xb)return}await(0,x().y3)(e,t)}}function C(e){var t;const{environment:o,stores:n,listId:r,inMemoryRecordCache:i,transaction:s}=e,l=(null===(t=n.at(0))||void 0===t?void 0:t.getSpaceId())??s.spaceId,u=new(a().pm)({environment:o,pointer:{table:c().ev,id:r||(0,v().Z1)({environment:o,table:c().ev,spaceId:l}),spaceId:l},recordStoreOptions:{inMemoryRecordCache:i,userId:o.currentUser.id},path:["content"]});for(const a of n)m().BC({parentStore:u,appendStore:a,transaction:s}),f().zv({store:a,data:{parent_id:u.id,parent_table:u.table,alive:!0},transaction:s});return u}},170350:(e,t,o)=>{o.r(t),o.d(t,{filterIcon:()=>r,iconDefinition:()=>n});o(296540);const n={viewBox:"0 0 20 20",fittedViewBox:"2.37 4.87 15.25 10.25",svg:(0,o(474848).jsx)("path",{d:"M3 4.875a.625.625 0 1 0 0 1.25h14a.625.625 0 1 0 0-1.25zm2.125 5.742h9.75a.625.625 0 1 0 0-1.25h-9.75a.625.625 0 1 0 0 1.25m1.5 3.883c0-.345.28-.625.625-.625h5.5a.625.625 0 1 1 0 1.25h-5.5a.625.625 0 0 1-.625-.625"})},r=(0,o(340498).wt)("filter",n,"default")},200424:(e,t,o)=>{e.exports=o.p+"9ade71d75a1c0e93.png"},224682:(e,t,o)=>{o.d(t,{m:()=>r});class n extends(()=>o(757695))().Store{getInitialState(){return{type:"uninitialized"}}isWriting(){return"filling"===this.state.type&&!this.state.haveAllBlocksCompletedAutofill&&!this.state.didInterruptStreaming}setIsWriting(e){const{propertySchema:t,stores:n,sessionIdForAnalytics:r,collectionId:i}=e,a=r||o(206267).JW();return this.setState({type:"filling",propertySchema:t,collectionId:i,numBlocksToAutofill:n.length,numBlocksAutofilled:0,sessionId:a,didInterruptStreaming:!1,haveAllBlocksCompletedAutofill:!1}),a}}const r=new n},241319:(e,t,o)=>{o.d(t,{y:()=>i});o(898992),o(672577);var n=()=>o(534177),r=()=>o(239381);function i(e){var t;const{actionModels:o,id:i}=e,a=(0,r().y5)(i),s="action"===a.source?o.find((e=>e.id===a.action_id)):void 0,l=(0,n().O9)(s)&&s.isType("create_page")?null===(t=s.getConfig())||void 0===t?void 0:t.collection:void 0;return{automationValueInfo:a,collectionPointer:l,actionModel:s}}},255043:(e,t,o)=>{o.d(t,{O:()=>S,r:()=>x});o(898992),o(672577),o(581454);var n=o(296540),r=()=>o(401497),i=()=>o(249046),a=()=>o(250910),s=()=>o(807449),l=()=>o(546926),c=()=>o(631524),u=()=>o(302501),d=()=>o(890492),p=()=>o(81068),m=()=>o(663639),f=()=>o(736847),g=()=>o(324254),y=()=>o(676510),h=()=>o(534177),v=()=>o(608346),b=()=>o(419357),_=o(474848);function S(e){return(0,_.jsxs)(i().Ye,{alignItems:"center",style:{gap:4},children:[e.icon,(0,_.jsx)(u().A,{isSmall:e.isSmall,children:e.name})]})}function x(e){const{onSelectOption:t,options:o,currentOption:i,placeHolder:d,initialFocus:m,menuProps:f,iconOnly:v,inputProps:x,searchThreshold:A,selectorButtonStyle:T}=e,[k,w]=(0,n.useState)(""),I=o.find((({key:e})=>e===i)),C=(0,r().IS)((()=>({workspaceSelectorButton:{paddingTop:8,paddingBottom:8,paddingInlineStart:8,paddingInlineEnd:8,opacity:1,width:376,border:`1px solid ${y().$.light.gray[100]}`,justifyContent:"space-between",marginTop:8,marginBottom:8},teamspacePickerButton:{maxWidth:300},menuChevronDownIcon:{marginInlineStart:4}})),[]),E={..."workspace"===T?C.workspaceSelectorButton:{},..."teamspace"===T?C.teamspacePickerButton:{}};return(0,_.jsx)(a().A,{popupType:a().z.Popup,placementToOrigin:"bottom",alignmentToOrigin:e.alignmentToOrigin,originGap:4,renderOrigin:e=>(0,_.jsxs)(c().p,{...e,style:{color:i?void 0:y().$.light.gray[300],...E},children:[(0,_.jsx)(u().A,{style:{textOverflow:"ellipsis",fontSize:"14px",font:"SF Pro Text",color:i?void 0:"#ACABA9",lineHeight:"19.6px"},children:(v?null==I?void 0:I.icon:I&&(0,_.jsx)(S,{...I}))??d}),(0,_.jsx)(s().I,{icon:g().arrowChevronSingleDownSmallIcon,size:"xs",colorVariant:"secondary",style:C.menuChevronDownIcon})]}),render:e=>{const n=(0,_.jsx)(b().Ay,{style:{width:"100%",paddingTop:8,paddingBottom:2},onChange:e=>w(e.target.value),value:k,...x}),r={menuType:l().gu.Popup,width:376,left:50,header:(0,h().O9)(A)&&o.length>A?n:null,...f},a=o.map((({key:o,name:n,icon:r,searchTerm:a})=>({key:o,keywords:a??[],action:()=>{t(o),e.close()},render:e=>(0,_.jsx)(p().A,{...e,title:(0,_.jsx)(S,{name:n,icon:r}),shouldWrapCaption:!0,isChecked:i===o})})));return(0,_.jsx)(M,{menuOptions:r,menuItems:a,filterQuery:k,initialFocus:m})}})}function M({menuOptions:e,menuItems:t,filterQuery:o,initialFocus:n}){const r=(0,v().m)({sections:[{key:"dropdown.menuList",render:e=>(0,_.jsx)(f().A,{...e}),items:t}],filterQuery:o||void 0});return(0,_.jsx)(d().A,{...e,children:(0,_.jsx)(m().A,{type:m().O.Vertical,sections:r,initialFocus:n,style:{position:"relative",alignItems:"flex-end"}})})}},278589:(e,t,o)=>{o.d(t,{N:()=>i});var n=()=>o(534177),r=()=>o(17680);function i(e){return"avatar"===e?r().eQ:"xsmall"===e?18:"xsmall_plus"===e?24:"small"===e?28:"small_plus"===e?32:"medium"===e?36:"medium_plus"===e?44:"medium_large"===e?48:"large"===e?50:"large_plus"===e?64:"xlarge"===e?94:"plans"===e?20:"deep_dive"===e?16:"upsell_banner"===e?74:"personalization_modal"===e?96:(0,n().HB)(e)}},320865:(e,t,o)=>{o.d(t,{A:()=>r});o(296540);var n=o(474848);const r=function(){return(0,n.jsx)(o(424400).Ay,{title:(0,n.jsx)(o(98126).k,{size:"default"}),titleStyle:{display:"flex",justifyContent:"center",alignItems:"center",width:"100%"}})}},326887:(e,t,o)=>{o.d(t,{$X:()=>i,H8:()=>a,x2:()=>r});var n=()=>o(534177);function r(e){return"event"===e||"recurrence"===e}function i(e){const t=e.getTrigger();return(0,n().O9)(t)&&r(t.type)}function a(e){return"event"===e?"event":"recurrence"===e?"recurrence":void(0,n().HB)(e)}},348869:(e,t,o)=>{o.d(t,{g:()=>s});o(944114);var n=()=>o(792057),r=()=>o(785728),i=()=>o(532659),a=()=>o(753812);async function s(e){const{environment:t,onResponse:o,data:s,userId:l,tracking:c,abortSignal:u}=e,d=await a().callStreamApi({eventName:"runInferenceTranscript",environment:t,data:s,userId:l,tracking:c,abortSignal:u,headers:(0,r().WS)({spaceId:s.spaceId})});if("success"!==d.type)return null!=u&&u.aborted?{error:{message:"Aborted",code:0}}:(n().Qg(d),{error:{message:d.error.message,code:d.status}});const p=[];if(i().hS.is(d.data))for await(const n of d.data){if("error"===n.type)return{error:{message:n.message,code:n.errorCode}};null==o||o(n),p.push(n)}return{value:p}}},375555:(e,t,o)=>{function n(e,t){const{device:o}=e;o.isAndroid&&t.focus(),t.select()}o.d(t,{G:()=>n})},390527:(e,t,o)=>{o.r(t),o.d(t,{DEFAULT_MAX_RECURRENCE_DUPLICATION_PER_TASK:()=>O,MAXIMUM_DAILY_RECURRENCES_IN_PATH:()=>M,MAXIMUM_NESTED_RECURRENCE_LEVEL:()=>x,MAX_RECURRENCE_INTERVAL:()=>h,MAX_RECURRENCE_NUMBER_OF_RUNS:()=>v,RRULE_WEEKDAYS_MAP:()=>y,adjustedStartDateIfPossible:()=>T,areRecurrenceSchedulesEqual:()=>F,convertFromUnpersistedRecurrenceConfig:()=>B,convertToUnpersistedRecurrenceConfig:()=>R,getFormattedEndCondition:()=>E,getFormattedNextRecurrenceTime:()=>C,getNewEndTimestamp:()=>j,getNextDateUtc:()=>I,getRecurrenceAfter:()=>k,isRunningBetweenMidnightAnd3AM:()=>w,isValidRecurrenceInterval:()=>b,isValidRecurrenceNumberOfRuns:()=>_,rruleFromRecurrence:()=>S,templateAncestorsViolateRecurrenceNesting:()=>A});o(898992),o(354520),o(581454);var n=()=>o(906745);o(944114);function r(e,...t){if(0===t.length)return e.map((e=>[e]));const o=[];for(const n of e)o.push(...r(t[0],...t.slice(1)).map((e=>[n,...e])));return o}var i=()=>o(496603),a=()=>o(534177),s=()=>o(720665),l=()=>o(597777),c=()=>o(869190),u=()=>o(416504),d=()=>o(402390);class p extends(()=>o(896346))().p3{constructor(e,t){super(e,t)}after(e,t){return super.after(e,t)}}var m=()=>o(912720);const f=(0,o(69708).YK)({dateAtTime:{id:"automations.recurrenceHelpers.dateAtTime",defaultMessage:"{date} at {time}"},dateBetweenMidnightAnd3AM:{id:"automations.recurrenceHelpers.dateBetweenMidnightAnd3AM",defaultMessage:"{date} between 12–3 AM"},numberEndConditionDescription:{id:"automations.recurrenceHelpers.numberEndConditionDescription",defaultMessage:"{number, plural, one {After {number} run} other {After {number} runs}}"},noEndCondition:{id:"automations.recurrenceHelpers.noEndCondition",defaultMessage:"Never"}}),g={hour:p.HOURLY,day:p.DAILY,week:p.WEEKLY,month:p.MONTHLY,year:p.YEARLY},y={MO:p.MO,TU:p.TU,WE:p.WE,TH:p.TH,FR:p.FR,SA:p.SA,SU:p.SU},h=99,v=999;function b(e){return(0,s().Et)(e)&&Number.isInteger(e)&&e>0&&e<=h}function _(e){return(0,s().Et)(e)&&Number.isInteger(e)&&e>0&&e<=v}function S(e){const{start_date:t,frequency:o,interval:n,weekdays:i,timezone:s,hour:c,minute:u}=e,d=(0,l().eU)(t);"hour"===o&&d.setUTCHours(c??0,u??0,0,0);const m="week"===o&&i?i.map((e=>y[e])):void 0,f={};return(0,a().O9)(e.end_condition)&&("date"===e.end_condition.type?f.until=(0,l().eU)(e.end_condition.end_at):"number"===e.end_condition.type?f.count=e.end_condition.number_of_occurrences:(0,a().HB)(e.end_condition)),"month"===e.frequency&&(0,a().O9)(e.monthly_restriction)&&("monthdays"===e.monthly_restriction.type?f.bymonthday=e.monthly_restriction.monthdays:"weekdays_in_month"===e.monthly_restriction.type?f.byweekday=r(e.monthly_restriction.weekdays,e.monthly_restriction.week_numbers).map((([e,t])=>y[e].nth(t))):(0,a().HB)(e.monthly_restriction)),new p({freq:g[o],dtstart:d,interval:n,byweekday:m,tzid:"hour"===o?void 0:s,..."hour"===o?{}:{byhour:c??0,byminute:u??0,bysecond:0},...f})}const x=1,M=1;function A(e){var t;if(0===e.length)return{violatesConstraint:!1,templateNestingExceedsMaxDepth:!1,ancestorHasDailyTemplate:!1,nestedDepthOfAutomationAncestors:void 0,immediateAncestorRecurrenceType:void 0};const o=e.filter((e=>{var t;return"day"===(null===(t=e.getRecurrence())||void 0===t?void 0:t.frequency)})),n=e.length,r=null===(t=e[0].getRecurrence())||void 0===t?void 0:t.frequency,i=n>x,a=o.length>=M;return{violatesConstraint:i||a,templateNestingExceedsMaxDepth:i,ancestorHasDailyTemplate:a,nestedDepthOfAutomationAncestors:n,immediateAncestorRecurrenceType:r}}function T(e){var t;const{recurrence:o,afterDate:r}=e;if("number"===(null===(t=o.end_condition)||void 0===t?void 0:t.type)||o.start_date>=r)return o;let i=n().DateTime.fromMillis(o.start_date,{zone:"utc"});const a=n().DateTime.fromMillis(r,{zone:"utc"});switch(o.frequency){case"hour":{const e=Math.floor(a.diff(i,"hours").hours/o.interval);i=i.plus({hours:e*o.interval});break}case"year":{const e=Math.floor(a.diff(i,"years").years/o.interval);i=i.plus({years:e*o.interval});break}case"month":{const e=Math.floor(a.diff(i,"months").months/o.interval);i=i.plus({months:e*o.interval});break}case"week":{const e=Math.floor(a.diff(i,"weeks").weeks/o.interval);i=i.plus({weeks:e*o.interval});break}case"day":{const e=Math.floor(a.diff(i,"days").days/o.interval);i=i.plus({days:e*o.interval});break}}return{...o,start_date:(0,l().DH)(i.toMillis())}}function k(e){const{recurrence:t,afterDate:o}=e;if((0,m().wt)(t)){const e=(0,l().l1)(o);return t.start_date>=e?new Date(t.start_date):void 0}{const e=S(T({recurrence:t,afterDate:o})).after((0,l().eU)(o));if(!e)return;return(0,l().h1)(e)}}function w(e){return 0===e.hour||1===e.hour||2===e.hour}function I(e){return S(e).after((0,l().eU)((0,l().Rz)()))||void 0}function C(e){const{recurrence:t,intl:o}=e,r=I(B(t));if(!r)return;const i=w(t),a=n().DateTime.fromJSDate(r).toUTC().setZone("local",{keepLocalTime:!0}).setLocale((0,d().H)(o)).setZone(t.timezone),s=(0,c().Yq)({date:a,dateFormat:"relative",allowRelativeDates:!0,intl:o,shortenDate:!0});if(i)return o.formatMessage(f.dateBetweenMidnightAnd3AM,{date:s});{let e=a.toLocaleString(n().DateTime.TIME_SIMPLE);return t.timezone!==(0,u().P)()&&(e+=` ${a.toFormat("ZZZZ")}`),o.formatMessage(f.dateAtTime,{date:s,time:e})}}function E(e,t){return(0,a().O9)(e)?"number"===e.type?t.formatMessage(f.numberEndConditionDescription,{number:e.number_of_occurrences}):"date"===e.type?(0,c().Yq)({date:n().DateTime.fromMillis(e.end_at),dateFormat:"relative",allowRelativeDates:!0,intl:t,shortenDate:!0}):void(0,a().HB)(e):t.formatMessage(f.noEndCondition)}const O=100;function R(e){return{...e,start_date:(0,l().l1)(e.start_date),end_condition:e.end_condition?"number"===e.end_condition.type?e.end_condition:"date"===e.end_condition.type?{type:"date",end_at:(0,l().l1)(e.end_condition.end_at)}:(0,a().HB)(e.end_condition):void 0}}function j(e,t,o){return e.plus(o-t)}function D(e,t){const o=n().DateTime.fromMillis(t.end_at).set({hour:e.hour??0,minute:e.minute??0});return{type:"date",end_at:(0,l().Rz)(o.toJSDate())}}function B(e){return{...e,start_date:(0,l().Rz)(new Date(e.start_date)),end_condition:e.end_condition?"number"===e.end_condition.type?e.end_condition:"date"===e.end_condition.type?D(e,e.end_condition):(0,a().HB)(e.end_condition):void 0}}function F(e,t){const o=i().fN(e,(e=>void 0!==e)),n=i().fN(t,(e=>void 0!==e));return i().n4(o,n)}},419357:(e,t,o)=>{o.d(t,{Ay:()=>_,KF:()=>b,LG:()=>y,Zf:()=>v,yD:()=>h});var n=o(296540),r=()=>o(484714),i=()=>o(401497),a=()=>o(718827),s=()=>o(695115),l=()=>o(31511),c=()=>o(546926),u=()=>o(424400),d=()=>o(340498),p=()=>o(100622),m=()=>o(496603),f=()=>o(284371),g=o(474848);const y=30,h=28;function v(e){const{icon:t}=e;return t({fill:p().Tj.icon.secondary,width:d().Ev.sm,height:d().Ev.sm,flexGrow:0,flexShrink:0})}function b(e){const t=(0,r().WS)(),o=(0,i().eP)(),n=(0,i().IS)((()=>({outlineButton:{...(0,a().qq)({shape:"default",size:"sm",hasIconOnly:!0,isButtonGapEnabled:!0}),fontWeight:f().Wy.medium,lineHeight:1.2,border:`1px solid ${p().Tj.border.primaryTranslucent}`,background:e.hasBackground?p().Tj.background.primary:void 0},outlineButtonHovered:{background:p().Tj.background.secondary},outlineButtonPressed:{background:(0,a().yZ)({color:p().Tj.background.primary,mode:o})}})),[e.hasBackground,o]);return(0,g.jsx)(s().A,{size:"xs",colorVariant:"primary",...e,ariaLabel:e.ariaLabel,style:{...n.outlineButton,...e.style,height:t?y:h,width:t?y:h},hoveredStyle:n.outlineButtonHovered,pressedStyle:n.outlineButtonPressed})}const _=n.forwardRef((function({preventCaptureArrowShortcuts:e,preventCaptureDeleteWhenEmpty:t,preventCaptureClipboardShortcuts:r,preventCaptureSpacebarWhenEmpty:i,...a},s){const{left:l,right:d,inputLeft:p,inputRight:f,inputRightStyle:y,disableInput:h,inputOuterStyle:v,rightMobileEditLabel:b,mobileKeyboardOnDismiss:_,style:S,value:A,onChange:T,autosize:k,autosizeMinHeight:w,autosizeMaxHeight:I,customElementAttributes:C,disabled:E,format:O,id:R,placeholder:j,type:D,autoFocus:B,focus:F,focusInitial:V,focusAfterAnimation:U,forceShowClearButton:N,ignoreKeyboardMode:P,inputElementAttributes:W,inputStyle:z,isRightLastElementOfInput:G,maxlength:L,min:H,max:q,selectAll:$,showClearButton:K,suppressFocusRing:Y,textarea:Q,textareaSubmitOnEnter:X,onBlur:Z,onCancel:J,onClearButtonClick:ee,onClick:te,onFocus:oe,onKeyDown:ne,onSubmit:re,...ie}=a,[ae,se]=(0,n.useState)((()=>Boolean(F||V)));(0,n.useEffect)((()=>{void 0!==F&&se(F)}),[F]);const le=e?void 0:m().D_,ce=!t||A.length>0?m().D_:void 0,ue=r?void 0:m().D_,de=!i||A.length>0?m().D_:void 0,pe=(0,c().Tf)(),me=(0,n.useContext)(c().xu),fe=(0,n.useRef)(null),ge={value:A,onChange:T,autosize:k,autosizeMinHeight:w,autosizeMaxHeight:I,customElementAttributes:C,disabled:E,format:O,id:R,placeholder:j,type:D,autoFocus:B,focus:F,focusInitial:V,focusAfterAnimation:U,forceShowClearButton:N,ignoreKeyboardMode:P,inputElementAttributes:W,inputStyle:z,isRightLastElementOfInput:G,maxlength:L,min:H,max:q,selectAll:$,showClearButton:K,suppressFocusRing:Y,textarea:Q,textareaSubmitOnEnter:X,onBlur:Z,onCancel:J,onClearButtonClick:ee,onClick:te,onFocus:oe,onKeyDown:ne,onSubmit:re};return(0,g.jsx)(o(782482).N,{debugName:"InputMenuItem",capture:!0,onUntab:m().D_,onTab:m().D_,onSelectAll:m().D_,onRedo:m().D_,onUndo:m().D_,onToggleBold:m().D_,onToggleItalics:m().D_,onToggleCode:m().D_,onCut:ue,onCopy:ue,onPaste:ue,onKeypress:m().D_,onLeft:le,onRight:le,onDelete:ce,onBackspace:ce,onSpace:de,children:o(726637).A.isMobile?(0,g.jsxs)(g.Fragment,{children:[(0,g.jsx)(u().Ay,{ref:s,...ie,itemMarginLeft:pe?8:void 0,style:S,title:(0,g.jsx)(M,{ref:fe,left:l,right:d,inputLeft:p,inputRight:f,inputRightStyle:y,disableInput:h,inputOuterStyle:v,rightMobileEditLabel:b,isFocused:ae,setIsFocused:se,...ge})}),(0,g.jsx)(o(797324).A,{show:ae&&me.menuType!==c().gu.ActionSheet,onDismiss:_,inputRef:fe})]}):(0,g.jsx)(u().Ay,{ref:s,...ie,left:l,right:d,isTokenTitle:!0,title:(0,g.jsx)(x,{ref:fe,disableInput:h,inputOuterStyle:v,inputRight:f,inputRightStyle:y,inputLeft:p,...ge}),style:{paddingTop:4,paddingBottom:4,...S}})})}));function S({rightMobileEditLabel:e,inputRef:t}){const i=(0,r().v3)(),s=(0,n.useCallback)((e=>{e.preventDefault();const n=t.current;n&&(0,o(375555).G)(i,n)}),[i,t]);return(0,g.jsx)(a().Ay,{onClick:s,style:{color:p().Tj.text.secondary},children:e})}const x=n.forwardRef((function(e,t){const{disabled:o,disableInput:n,inputOuterStyle:r,inputRight:i,inputRightStyle:a,inputLeft:s,min:c,textarea:u,...d}=e;return(0,g.jsx)(l().A,{...d,ref:t,disabled:o||n,style:{height:u?void 0:28,padding:"3px 6px",...r},left:s,right:i,rightStyle:a,min:c,textarea:u})})),M=n.forwardRef((function(e,t){const{left:r,right:i,inputLeft:a,inputRight:s,inputRightStyle:c,disableInput:u,inputOuterStyle:d,rightMobileEditLabel:p,isFocused:m,setIsFocused:f,disabled:y,showClearButton:h,onBlur:v,onFocus:b,..._}=e,x=(0,n.useCallback)((e=>{f(!1),v&&v(e)}),[v,f]),M=(0,n.useCallback)((e=>{f(!0),b&&b(e)}),[b,f]),A=(0,n.useRef)(null),T=(0,o(93583).A)(A,t),k=p&&!m?(0,g.jsx)(S,{rightMobileEditLabel:p,inputRef:A}):null;return(0,g.jsx)(l().A,{..._,ref:T,format:"transparent",style:{fontSize:16,...d},onFocus:M,onBlur:x,showClearButton:!1!==h,disabled:y||u,left:a||r,right:k||s||i,rightStyle:c})}))},422540:(e,t,o)=>{o.d(t,{$0:()=>h,Fx:()=>A,Ge:()=>f,I3:()=>p,Kj:()=>x,PP:()=>T,TK:()=>k,Yy:()=>d,aE:()=>w,cQ:()=>M,kH:()=>g,m7:()=>m,nq:()=>_,nv:()=>v,tj:()=>y});o(898992),o(354520),o(737550);var n=()=>o(496603),r=()=>o(534177),i=()=>o(381283),a=()=>o(898244),s=()=>o(651124),l=()=>o(349835),c=()=>o(390066);const u={checkbox:!0,date:!0,email:!0,multi_select:!0,number:!0,person:!0,phone_number:!0,relation:!0,select:!0,status:!0,text:!0,title:!0,url:!0,auto_increment_id:!1,button:!1,created_by:!1,created_time:!1,file:!1,formula:!1,last_edited_by:!1,last_edited_time:!1,last_visited_time:!1,location:!1,rollup:!1,verification:!1,place:!1},d={checkbox:[{type:"checkbox"}],date:[{type:"date"}],email:[{type:"text"}],multi_select:[{type:"text"},{of:{type:"text"},type:"array"}],number:[{type:"number"}],person:[{type:"person"},{of:{type:"person"},type:"array"}],phone_number:[{type:"text"}],relation:[{type:"block"},{of:{type:"block"},type:"array"}],select:[{type:"text"},{of:{type:"text"},type:"array"}],status:[{type:"text"},{of:{type:"text"},type:"array"}],text:void 0,title:void 0,url:[{type:"text"}]};function p(e){return Boolean(u[e.type]&&!(0,a().UU)(e)&&(!(0,a().$M)(e)||void 0===(0,a().om)(e)))}function m(e){const{collectionFormat:t,collectionSchema:o,filter:i,sort:l,sourcePropertyIds:u}=e,d=(u??(0,r().uv)(o)).filter(((t,n,r)=>{const s=o[t];return!(!s||!p(s))&&(("relation"!==s.type||!e.restrictCrossSpace||!(0,a().o2)(e.spaceId,s))&&(!i||i([t,s],n,o)))}));if(0===d.length)return[];if(!t||!1===l)return d;const m=(0,c().L)(t,o,void 0,s().jf.Page).collection_page_properties||[];return n().Ul(d,(e=>m.findIndex((t=>t.property===e))))}function f(e){const{collectionFormat:t,collectionSchema:o,sort:a}=e,l=(0,r().uv)(o).filter(((e,t,n)=>{const r=o[e];return!(!r||!(0,i().J)(r))}));if(0===l.length)return[];if(!t||!1===a)return l;const u=(0,c().L)(t,o,void 0,s().jf.Page).collection_page_properties||[];return n().Ul(l,(e=>u.findIndex((t=>t.property===e))))}function g(e){return e.type===l().M9.InvalidCharacter?{type:e.type,character:e.character}:e.type===l().M9.TokenExpected?{type:e.type,token:e.token}:e.type===l().uW.MissingSchemaPropertyOnThisRow||e.type===l().uW.MissingSchemaPropertyOnCollection?{type:e.type,collectionId:e.collectionId,property:e.property,errorSource:e.errorSource}:e.type===l().uW.ThisRowBlockPropertyMismatchCollection?{type:e.type,thisRowCollection:e.thisRowCollection,errorSource:e.errorSource}:e.type===l().uW.MissingContextVariable?{type:e.type,valueId:e.valueId,errorSource:e.errorSource}:e.type===l().uW.FunctionCallTooFewArguments?{type:e.type,numArguments:e.numArguments,errorSource:e.errorSource}:e.type===l().uW.FunctionCallUnexpectedArgument?{type:e.type,parameterIndex:e.parameterIndex,errorSource:e.errorSource}:e.type===l().uW.FunctionCallArgumentWrongType?{type:e.type,argumentType:e.argumentType,libraryFunctionName:e.libraryFunction.name,parameterIndex:e.parameterIndex,errorSource:e.errorSource}:e.type===l().uW.MissingDataDependencyBlock?{type:e.type,blockPointer:e.blockPointer,node:e.node,errorSource:e.errorSource}:e.type===l().uW.MissingDataDependencyPerson?{type:e.type,personPointer:e.personPointer,errorSource:e.errorSource}:e.type===l().uW.MemberPropertyMismatchCollection?{type:e.type,blockCollection:e.blockCollection,errorSource:e.errorSource}:e.type===l().uW.DownstreamParseFailure?{type:e.type,collectionId:e.collectionId,property:e.property,errorSource:e.errorSource}:e.type===l().uW.ContextVariableWrongType?{type:e.type,valueId:e.valueId,expectedType:e.expectedType,resultType:e.resultType,errorSource:e.errorSource}:e.type===l().uW.DisallowedValueType?{type:e.type,expressionValue:e.expressionValue,allowedValueTypes:e.allowedValueTypes,errorSource:e.errorSource}:e.type===l().uW.LibraryFunctionExecutionError?{type:e.type,error:e.error,libraryFunctionName:e.libraryFunction.name,errorSource:e.errorSource}:"errorSource"in e?{type:e.type,errorSource:e.errorSource}:{type:e.type}}const y={checkbox:!0,date:!0,email:!0,multi_select:!0,number:!0,person:!0,phone_number:!0,relation:!0,select:!0,status:!0,text:!0,title:!0,url:!0,button:!1,file:!1,verification:!1,auto_increment_id:!1,created_by:!1,created_time:!1,formula:!1,last_edited_by:!1,last_edited_time:!1,last_visited_time:!1,location:!1,rollup:!1,place:!1};function h(e){return Boolean(y[e.type])}function v(e){const{collectionFormat:t,collectionSchema:o,filter:i,sort:l}=e,u=(0,r().uv)(o).filter(((e,t,n)=>{var r;const s=o[e];return!(!s||!y[s.type])&&((!(0,a().$M)(s)||null===(r=(0,a().om)(s))||void 0===r||!r.auto_update_on_edit)&&(!i||i([e,s],t,o)))}));if(0===u.length)return[];if(!t||!1===l)return u;const d=(0,c().L)(t,o,void 0,s().jf.Page).collection_page_properties||[];return n().Ul(u,(e=>d.findIndex((t=>t.property===e))))}const b={checkbox:!0,email:!0,multi_select:!0,number:!0,person:!0,phone_number:!0,relation:!0,select:!0,status:!0,text:!0,title:!0,url:!0,auto_increment_id:!1,button:!1,created_by:!1,created_time:!1,date:!1,file:!1,formula:!1,last_edited_by:!1,last_edited_time:!1,last_visited_time:!1,location:!1,rollup:!1,verification:!1,place:!1};function _(e){return b[e.type]}const S={checkbox:!0,created_by:!0,created_time:!0,date:!0,email:!0,multi_select:!0,number:!0,person:!0,phone_number:!0,relation:!0,select:!0,status:!0,text:!0,title:!0,url:!0,last_edited_by:!0,last_edited_time:!0,auto_increment_id:!1,button:!1,file:!1,formula:!1,last_visited_time:!1,location:!1,rollup:!1,verification:!1,place:!1};function x(e){return S[e.type]}function M(e){return 0===e}function A(e){return function(e){return"button_block"===e||"button_property"===e}(e)}function T(e){const{property:t,collectionSchema:o}=e;return!!o&&!o[t]}function k(e){const{collectionSchema:t,property:o,type:n}=e,r=null==t?void 0:t[o];return!r||("action"===n?!p(r):!y[r.type])}function w({automationTrigger:e,collectionSchema:t}){if("event"===(null==e?void 0:e.type)){const{pagesAdded:o,pagePropertiesEdited:n,source:i}=e.event;if(void 0===i)return!1;const a="some"===n.type&&n.some,s="all"===n.type&&n.all;if((a||s||[]).some((e=>T({collectionSchema:t,property:e.property})||k({collectionSchema:t,property:e.property,type:"trigger"}))))return!1;const l="some"===n.type&&(!(0,r().O9)(n.some)||0===n.some.length),c="all"===n.type&&(!(0,r().O9)(n.all)||0===n.all.length);if(!o&&("none"===n.type||l||c))return!1}else{if("recurrence"!==(null==e?void 0:e.type))return!1;if(!e.recurrence)return!1}return!0}},448801:(e,t,o)=>{o.d(t,{i:()=>r});o(944114),o(517642),o(658004),o(733853),o(845876),o(432475),o(515024),o(731698);var n=()=>o(371562);n();function r(e,t){const o=n().create({arrays:{detectMove:!1,includeValueOnMove:!0}}).diff(e,t);if(!o)return{beforeOps:{},removeOps:new Set};let r=[],i=[];for(const n in o)"_t"!==n&&("_"===n[0]?r.push(parseInt(n.slice(1),10)):1===o[n].length&&i.push({index:parseInt(n,10),value:o[n][0]}));const a={},s=new Set,l=[...e];r=r.sort(((e,t)=>e-t));for(let n=r.length-1;n>=0;n--){const e=r[n],t=l.splice(e,1)[0];s.add(t)}i=i.sort(((e,t)=>e.index-t.index));for(let n=0;n<i.length;n++){const e=i[n];a[e.value]=l[e.index],l.splice(e.index,0,e.value)}return{beforeOps:a,removeOps:s}}},465031:(e,t,o)=>{o.d(t,{G6:()=>a,nQ:()=>s,sh:()=>l});var n=()=>o(907258),r=()=>o(72234),i=()=>o(244828);function a({environment:e,notionApps:t}){const o=n().default.state.sidebarSpaceViewStore;o&&i().createAndCommit({userAction:"sidebarNotionAppsActions.moveNotionApp",environment:e,canUndo:!0,cellTarget:"main",perform:e=>{r().AG(o,e,{...o.getSettings(),notion_apps:{order:t}})}})}function s(e){const t=n().default.state.sidebarSpaceViewStore;t&&i().createAndCommit({userAction:"sidebarNotionAppsActions.hideNotionAppsSection",environment:e,canUndo:!0,perform:e=>{const o=t.getNotionAppsOrder();r().AG(t,e,{notion_apps:{hidden:!0,order:o}})}})}function l(e){const t=n().default.state.sidebarSpaceViewStore;t&&i().createAndCommit({userAction:"sidebarNotionAppsActions.showNotionAppsSection",environment:e,canUndo:!0,perform:e=>{const o=t.getNotionAppsOrder();r().AG(t,e,{notion_apps:{hidden:!1,order:o}})}})}},541235:(e,t,o)=>{o.d(t,{Ud:()=>a,YD:()=>i,c$:()=>n,q_:()=>r});const n={"sprints-onboarding":{steps:[{id:"current-sprint-view-tooltip"},{id:"sprint-task-tooltip"},{id:"complete-sprint-button-tooltip"}]},"enhanced-qna-onboarding":{steps:[{id:"find-in-tooltip"},{id:"mention-tooltip"}]},"jira-sync-onboarding":{steps:[{id:"all-projects-tooltip"},{id:"all-issues-tooltip"},{id:"database-views-and-filters-tooltip"},{id:"settings-to-setup-projects-and-issues"}]},"project-management-import-onboarding":{steps:[{id:"your-teamspace-tooltip"},{id:"all-projects-tooltip"},{id:"navigate-to-project-tasks-tooltip"},{id:"project-customization-tooltip"},{id:"related-tasks-database-views-tooltip"}]},"ai-comment-onboarding":{steps:[{id:"ai-comment-onboarding-tooltip"}]},database_onboarding:{steps:[{id:"database_onboarding_status_property_tooltip"},{id:"database_onboarding_add_property_tooltip"},{id:"database_onboarding_database_page_tooltip"},{id:"database_onboarding_board_view_tooltip"}]},"new-user-home-workspace-tour":{steps:[{id:"teamspaces"}]}},r="completed",i="dismissed";function a(e,t){return null==t?void 0:t[e]}},546461:(e,t,o)=>{o.d(t,{K4:()=>S,To:()=>T,fi:()=>x,q8:()=>_,u:()=>b});o(16280),o(18107),o(967357);var n=o(296540),r=()=>o(484714),i=()=>o(792485),a=()=>o(590526),s=()=>o(79926),l=()=>o(140934),c=()=>o(322867),u=()=>o(69708),d=()=>o(534177),p=()=>o(813297),m=()=>o(326887),f=()=>o(862292),g=()=>o(190019),y=()=>o(76190),h=o(474848);const v=(0,n.createContext)({ancestors:[]});v.displayName="AutomationContext";v.Consumer;function b(e){const{automationStore:t,children:o,contextType:b,enableExistenceGuarantees:_}=e,S=(0,r().v3)(),x=(0,u().tz)(),{value:T}=(0,s().fJ)(f().T.formulas),{value:k}=(0,s().fJ)(p().QV.automationTypecheck),w=(0,y().n)(t),I=(0,i().S)(),C=(0,a().K8)((()=>{if(!T)return{error:new(c().N9)("Missing formulas dependency")};if(!k)return{error:new(c().N9)("Missing automation dependency")};const e=function(e){const{environment:t,automationStore:o,automationTypecheckModule:n,contextType:r,formulasModule:i,intl:a,isSubscribed:s,pageStore:c,enableExistenceGuarantees:u}=e,p=function(e,t){if(t)return M.get(e);return M.get(e)??A.get(e)}(o,u);if(p)return p;const f=new(l().ComputedStore)((()=>{const e=o.getTriggerType();let l=r;return(0,d().O9)(e)&&(0,m().x2)(e)&&(l=(0,m().H8)(e)),(0,g().Z)({environment:t,automationStore:o,automationTypecheckModule:n,contextType:l,formulasModule:i,intl:a,isSubscribed:s,pageStore:c,enableExistenceGuarantees:u})}),{debugName:"automationContextTypecheckResultCachedStore"});return function(e,t,o){o?(M.set(e,t),A.set(e,t)):A.set(e,t)}(o,f,u),f}({automationStore:t,automationTypecheckModule:k,contextType:b,environment:S,formulasModule:T,intl:x,isSubscribed:w,pageStore:"button_block"===b?null==I?void 0:I.pageStore:void 0,enableExistenceGuarantees:_});return e.state}),[S,t,k,b,T,x,w,null==I?void 0:I.pageStore,_]),E=(0,n.useContext)(v),O=(0,n.useMemo)((()=>0===E.ancestors.length?[{automationStore:t,contextType:b,typecheckResult:C}]:[...E.ancestors,{automationStore:t,contextType:b,typecheckResult:C}]),[E,t,b,C]),R=(0,n.useMemo)((()=>({ancestors:O,enableExistenceGuarantees:_})),[O,_]);return(0,h.jsx)(v.Provider,{value:R,children:o})}function _(){const e=(0,n.useContext)(v).ancestors.at(-1);if(!e)throw new Error("No automation context found!");return e}function S(){return(0,n.useContext)(v).ancestors.at(-1)}function x(){return(0,n.useContext)(v).enableExistenceGuarantees}const M=new WeakMap,A=new WeakMap;function T(e){var t;return null===(t=M.get(e))||void 0===t?void 0:t.state}},556122:(e,t,o)=>{o.d(t,{QJ:()=>m,TI:()=>c});o(944114),o(581454);var n=()=>o(726637),r=()=>o(763824);let i=0;const a="clipboard",s={debug:Boolean(n().A.isDevelopingInAirplaneMode),responseText:a,showErrorCode:!1,delayBetweenChunks:20,chunkSize:5,numLoremIpsums:3},l="Lorem ipsum dolor sit amet, consectetur adipiscing elit. Donec porta auctor sem vel efficitur. Vivamus efficitur eros sed erat efficitur efficitur. Vivamus et augue vel est efficitur efficitur.";function c(){return s}function u(e){return{async*[Symbol.asyncIterator](){for(const t of e)await(0,r().wR)(s.delayBetweenChunks),yield t}}}function d(e,t){const o=Math.ceil(e.length/t),n=new Array(o);for(let r=0,i=0;r<o;++r,i+=t)n[r]=e.substr(i,t);return n}function p(e){return e.map((e=>({type:"success",p:"padding",completion:e,inferenceId:"mock"})))}async function m({environment:e,data:t}){console.log("Retrieving fake completion for data",t);const{context:o}=t,r=o.selectedText,c=[];let{responseText:m}=s;if(m===a&&(m=await async function(){try{return await navigator.clipboard.readText()}catch(e){return}}()??"Unable to retrieve clipboard text."),void 0===m&&(c.push({type:"success",p:"padding",completion:"\n",inferenceId:"mock"},{type:"success",p:"padding",completion:"this is ",inferenceId:"mock"},{type:"success",p:"padding",completion:"fake ",inferenceId:"mock"},{type:"success",p:"padding",completion:`streaming response ${i++}.`,inferenceId:"mock"}),n().A.isDevelopingInAirplaneMode&&c.push({type:"success",p:"padding",completion:"\n\nTo see a real AI response, run the server with `--airplaneMode=false`.",inferenceId:"mock"}),"string"==typeof r)){c.push({type:"success",p:"padding",completion:"\n\nHere is the text you selected:\n\n",inferenceId:"mock"});for(const e of d(r,s.chunkSize))c.push({type:"success",completion:e,p:"padding",inferenceId:"mock"})}if(s.showErrorCode)c.push({type:"error",message:"alas",errorCode:s.showErrorCode,isRetryable:!1});else if(void 0===m)for(let n=0;n<s.numLoremIpsums;n++)c.push(...p([`\n\n${n+1}. `,...d(l,0===s.delayBetweenChunks?l.length:s.chunkSize)]));else if(m.length>0){const e=d(m,s.chunkSize);c.push(...p(e))}return Promise.resolve({type:"success",data:u(c),status:200,headers:{}})}(0,o(852832).exposeDebugValue)("completionDebugSettings",s)},608346:(e,t,o)=>{o.d(t,{m:()=>a});o(898992),o(354520),o(672577),o(581454);var n=o.n(o(844751)),r=o(296540),i=()=>o(534177);function a({sections:e,filterQuery:t}){return(0,r.useMemo)((()=>e.map((e=>function(e,t){const{items:o,...r}=e;if(!t)return e;const i=o.filter((e=>e.keywords.find((e=>n().match(t,e)))));return i.length>0?{...r,items:i}:void 0}(e,t))).filter(i().O9)),[t,e])}},611947:(e,t,o)=>{o.r(t),o.d(t,{checkIsTutorialDone:()=>g,dismissTutorial:()=>u,resetTutorials:()=>d,tutorialAdvanceToStep:()=>p,tutorialAdvanceToStepAfter:()=>m,tutorialGoToNextStep:()=>l,tutorialGoToPrevStep:()=>c,tutorialGoToStep:()=>f});var n=()=>o(907258),r=()=>o(541235),i=()=>o(680977),a=()=>o(244828),s=()=>o(646355);function l(e,t,o){var r;const{currentUserSettingsStore:a}=n().default.state;if(!a)return;const l=null===(r=a.getSettings())||void 0===r?void 0:r.tutorials;o?(0,i().m)({userSettingsStore:a,transaction:o,data:{tutorials:{...l,[t]:(0,s().i9)(a,t)}}}):y({userAction:"TutorialActions.nextStep",environment:e,perform:e=>{(0,i().m)({userSettingsStore:a,transaction:e,data:{tutorials:{...l,[t]:(0,s().i9)(a,t)}}})},userId:a.id})}function c(e,t){var o;const{currentUserSettingsStore:r}=n().default.state;if(!r)return;const a=null===(o=r.getSettings())||void 0===o?void 0:o.tutorials;y({userAction:"TutorialActions.prevStep",environment:e,perform:e=>{(0,i().m)({userSettingsStore:r,transaction:e,data:{tutorials:{...a,[t]:(0,s().KD)(r,t)}}})},userId:r.id})}function u(e,t){var o;const{currentUserSettingsStore:a}=n().default.state;if(!a)return;const s=null===(o=a.getSettings())||void 0===o?void 0:o.tutorials;(null==s?void 0:s[t])!==r().YD&&y({userAction:"TutorialActions.dismissTutorial",environment:e,perform:e=>{(0,i().m)({userSettingsStore:a,transaction:e,data:{tutorials:{...s,[t]:r().YD}}})},userId:a.id})}function d(e){const{currentUserSettingsStore:t}=n().default.state;t&&y({userAction:"TutorialActions.resetTutorialsDebug",environment:e,perform:e=>{(0,i().m)({userSettingsStore:t,transaction:e,data:{tutorials:{}}})},userId:t.id})}function p(e,t,o){var a;const{currentUserSettingsStore:l}=n().default.state;if(!l||(0,s().x$)(l,t))return;const c=(0,s().gt)(l,t);r().c$[t].steps.findIndex((e=>e.id===c))>=r().c$[t].steps.findIndex((e=>e.id===o))||(0,i().m)({userSettingsStore:l,transaction:e,data:{tutorials:{...null===(a=l.getSettings())||void 0===a?void 0:a.tutorials,[t]:o}}})}function m(e,t,o){if((0,s().ll)(o))return;const n=(0,s().tb)(t,o);n&&p(e,t,n)}function f(e,t,o,r){var a;const{currentUserSettingsStore:s}=n().default.state;if(!s)return;const l=null===(a=s.getSettings())||void 0===a?void 0:a.tutorials;r?(0,i().m)({userSettingsStore:s,transaction:r,data:{tutorials:{...l,[t]:o}}}):y({userAction:"TutorialActions.nextStep",environment:e,perform:e=>{(0,i().m)({userSettingsStore:s,transaction:e,data:{tutorials:{...l,[t]:o}}})},userId:s.id})}function g(e){const{currentUserSettingsStore:t}=n().default.state;return!!t&&(0,s().x$)(t,e)}function y(e){return a().createAndCommit({...e,canUndo:!1})}},612900:(e,t,o)=>{o.d(t,{u:()=>i});var n=()=>o(79926);const r=new(n().O2)("PulsingWrapper",(async()=>o.e(45248).then(o.bind(o,673962)))),i=(0,n().jQ)(r,(e=>e.PulsingWrapper),{renderLoading:(e,t)=>t.children})},613016:(e,t,o)=>{o.d(t,{a:()=>r});var n=()=>o(907258);function r(){const{sidebarSpaceStore:e}=n().default.getState();return e?e.id:void 0}},621594:(e,t,o)=>{o.r(t),o.d(t,{exclamationMarkCircleSmallIcon:()=>i,iconDefinition:()=>r});o(296540);var n=o(474848);const r={viewBox:"0 0 16 16",fittedViewBox:"1.87 1.87 12.25 12.25",svg:(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("path",{d:"M7.9 4.875a.625.625 0 0 0-.625.625V8a.625.625 0 1 0 1.25 0V5.5a.625.625 0 0 0-.625-.625m0 4.7a.725.725 0 1 0 0 1.45.725.725 0 0 0 0-1.45"}),(0,n.jsx)("path",{d:"M8 1.875a6.125 6.125 0 1 0 0 12.25 6.125 6.125 0 0 0 0-12.25M3.125 8a4.875 4.875 0 1 1 9.75 0 4.875 4.875 0 0 1-9.75 0"})]})},i=(0,o(340498).wt)("exclamationMarkCircleSmall",r,"small")},627503:(e,t,o)=>{o.d(t,{a:()=>r});o(296540);const n={viewBox:"0 0 16 16",fittedViewBox:"1.37 1.37 13.25 13.25",svg:(0,o(474848).jsx)("path",{d:"M3.25 1.375c-1.036 0-1.875.84-1.875 1.875v6c0 1.036.84 1.875 1.875 1.875h1.625v1.625c0 1.036.84 1.875 1.875 1.875h6c1.036 0 1.875-.84 1.875-1.875v-6c0-1.036-.84-1.875-1.875-1.875h-1.625V3.25c0-1.036-.84-1.875-1.875-1.875zM2.625 3.25c0-.345.28-.625.625-.625h6c.345 0 .625.28.625.625v1.625H6.75c-1.036 0-1.875.84-1.875 1.875v3.125H3.25a.625.625 0 0 1-.625-.625zm3.5 3.5c0-.345.28-.625.625-.625h6c.345 0 .625.28.625.625v6c0 .345-.28.625-.625.625h-6a.625.625 0 0 1-.625-.625z"})},r=(0,o(340498).wt)("duplicateSmall",n,"small")},646355:(e,t,o)=>{o.d(t,{KD:()=>l,gt:()=>c,i9:()=>s,ll:()=>i,tb:()=>a,x$:()=>r});o(18107),o(967357);var n=()=>o(541235);function r(e,t){return i(c(e,t))}function i(e){return void 0!==e&&(e===n().q_||e===n().YD)}function a(e,t){if(i(t))return;const o=n().c$[e],r=o.steps.findIndex((e=>e.id===t));return-1===r?o.steps[0].id:r===o.steps.length-1?n().q_:o.steps[r+1].id}function s(e,t){const o=c(e,t);if(o&&!i(o))return a(t,o)}function l(e,t){const o=c(e,t);if(o)return function(e,t){const o=n().c$[e];var r;if(i(t))return null===(r=o.steps.at(-1))||void 0===r?void 0:r.id;const a=o.steps.findIndex((e=>e.id===t));return-1!==a&&0!==a?o.steps[a-1].id:void 0}(t,o)}function c(e,t){var o;if(!e)return;const r=((null===(o=e.getSettings())||void 0===o?void 0:o.tutorials)||{})[t];return void 0===r?n().c$[t].steps[0].id:r}},730307:(e,t,o)=>{o.d(t,{l:()=>m});var n=()=>o(779315),r=()=>o(292985),i=()=>o(161479),a=()=>o(878523),s=()=>o(129522),l=()=>o(404783),c=()=>o(555776),u=()=>o(116008),d=()=>o(36088),p=()=>o(405981);async function m(e){var t;const{environment:o,blockStore:m,rect:f,property_id:g,from:y}=e;if(u().A.hasContent())return void(0,p()._y)({environment:o,reason:"starting_new"});const h=s().K.getRect(m);if(!h)return;const v=new(l().A)(o,(0,i().e)(m.pointer.spaceId)),b=h.width,_=h.height,S=h.right-b;u().A.setState({open:!0,rect:f||new DOMRect(S,h.top,b,_),type:"block",content:"comment",blockStore:m,blockId:m.id,discussionInputStore:v,property_id:g,lastKnownBlockStore:m,from:y}),(0,r().V)({element:null===(t=n().A.UpdateSidebarCommentScroller)||void 0===t?void 0:t.getNode(),environment:o,options:{top:0,behavior:"smooth"}}),c().A.setActiveWithSource("text_annotation"),await(0,d().M)({discussionInputStore:v,environment:o}),a().j4(o,{from:y})}},736767:(e,t,o)=>{o.d(t,{A:()=>a});var n=o(296540),r=o(474848);function i(e,t){return(0,r.jsx)(o(424400).Ay,{...e,ref:t,style:{background:"none",borderBottom:"none",boxShadow:"",marginTop:2,marginBottom:6,paddingTop:4,paddingBottom:4,minHeight:"none",...e.style}})}const a=(0,n.forwardRef)(i)},748054:(e,t,o)=>{o.d(t,{M:()=>r});o(296540);const n={viewBox:"0 0 20 20",fittedViewBox:"3.97 2.68 12.51 14.37",svg:(0,o(474848).jsx)("path",{d:"M10.282 3.66a5.39 5.39 0 0 0-5.217-.54l-.711.305a.63.63 0 0 0-.38.575v12.425a.625.625 0 1 0 1.25 0v-3.913l.333-.142a4.14 4.14 0 0 1 4.008.414 5.39 5.39 0 0 0 5.504.405l1.06-.53a.63.63 0 0 0 .346-.56V4a.625.625 0 0 0-.905-.558l-1.06.53c-1.36.68-2.983.56-4.228-.312m-5.057 7.495V4.412l.332-.142a4.14 4.14 0 0 1 4.008.413 5.39 5.39 0 0 0 5.504.406l.156-.078v6.703l-.715.357c-1.36.68-2.983.56-4.228-.312a5.4 5.4 0 0 0-5.057-.604"})},r=(0,o(340498).wt)("flag",n,"default")},783793:(e,t,o)=>{o.d(t,{o:()=>c,x:()=>l});o(296540);var n=()=>o(401497),r=()=>o(100622),i=()=>o(278589),a=()=>o(200424),s=o(474848);function l(e){const{variant:t,imgSource:o,tintColor:a,faceStyle:l,shadowVariant:u="strong",style:d,...p}=e,m=(0,n().IS)((()=>{const e=(0,i().N)(t);return{faceImgWrap:{width:e,height:e,borderRadius:"100%",background:r().Tj.assistantCornerButtonBackground,..."strong"===u&&{boxShadow:e>=90?r().Tj.shadowMDThickerOutline:r().Tj.shadowMD},..."light"===u&&{borderRadius:"50%",boxShadow:e>=90?r().Tj.shadowSMThickerOutline:r().Tj.shadowSM},overflow:"hidden",...d}}}),[t,u,d]);return(0,s.jsx)("div",{...p,children:(0,s.jsx)("div",{style:m.faceImgWrap,children:(0,s.jsx)(c,{imgSource:o,variant:t,tintColor:a,style:l})})})}function c(e){const{imgSource:t,variant:o,tintColor:r,style:l,alt:c,...u}=e,d=(0,i().N)(o),p=t??a(),m=c??"Notion AI face",f=(0,n().IS)((()=>({faceImg:{height:d,width:d,transform:"scaleX(var(--direction, 1))",...l},tintedFace:{height:d,width:d,transform:"scaleX(var(--direction, 1))",backgroundColor:r,WebkitMaskImage:`url(${p})`,maskImage:`url(${p})`,WebkitMaskRepeat:"no-repeat",maskRepeat:"no-repeat",WebkitMaskPosition:"center",maskPosition:"center",WebkitMaskSize:"contain",maskSize:"contain",...l}})),[d,l,r,p]);return void 0!==r?(0,s.jsx)("div",{style:f.tintedFace,role:"img","aria-label":m}):(0,s.jsx)("img",{...u,style:f.faceImg,src:p,alt:m})}},791177:(e,t,o)=>{o.d(t,{$:()=>r});var n=o(296540);function r(){const[e,t]=(0,n.useState)({inputElementAttributes:void 0,suppressFocusRing:!1}),[o,r]=(0,n.useState)(!1),[i,a]=(0,n.useState)(!1);(0,n.useEffect)((()=>{if(o){function e(){a(!1)}function t(e){"ArrowDown"!==e.key&&"ArrowUp"!==e.key||a(!0)}return window.addEventListener("pointerdown",e),window.addEventListener("keydown",t),()=>{window.removeEventListener("pointerdown",e),window.removeEventListener("keydown",t)}}}),[o]);return[(0,n.useMemo)((()=>({inputElementAttributes:e.inputElementAttributes,suppressFocusRing:e.suppressFocusRing&&i,onFocus:()=>{r(!0)},onBlur:()=>{r(!1)}})),[e,i]),(0,n.useMemo)((()=>({setComboboxState:t,isFocusVisible:i,isComboboxFocused:o,onItemHover:()=>{a(!1)}})),[i,o])]}},797324:(e,t,o)=>{o.d(t,{A:()=>g});var n=o(296540),r=()=>o(560520),i=()=>o(484714),a=()=>o(790748),s=()=>o(581010),l=()=>o(69708),c=()=>o(100622),u=()=>o(284371),d=()=>o(396406),p=()=>o(718827),m=()=>o(843798),f=o(474848);function g(e){const{onDismiss:t,inputRef:o}=e,g=(0,i().Y0)(),y=(0,n.useRef)(null),h=g.isMobileNative&&g.isIOS,v=h&&e.show;(0,a().b)(s().A,(()=>({getNode:()=>y.current,isShown:()=>v})),[v]);const b=(0,r().n)(),_=(0,n.useCallback)((()=>{var e;null==o||null===(e=o.current)||void 0===e||e.focus(),t&&t();const n=document.activeElement;n instanceof HTMLElement&&n.blur()}),[o,t]);if(!h)return null;const S=v?-(m().j+b):0;return(0,f.jsx)(d().O,{open:!0,children:(0,f.jsx)("div",{style:{position:"fixed",top:"100vh",width:"100%",height:m().j,display:v?"flex":"none",alignItems:"center",justifyContent:"flex-end",backgroundColor:c().Tj.keyboardDoneBarBackground,transform:`translateY(${S}px)`,transition:v?"ease-out":"ease-in",boxShadow:v?`\n\t\t\t\t\t\t\t\t0 -1px 0 ${c().Tj.border.primaryTranslucent}\n\t\t\t\t\t\t\t`:void 0},ref:y,children:(0,f.jsx)(p().Ay,{style:{display:"flex",alignItems:"center",marginInlineEnd:16,color:c().oZ.blue,fontWeight:u().Wy.semibold},onTouchEnd:()=>{_()},children:(0,f.jsx)(l().sA,{defaultMessage:"Done",id:"mobile.dismissKeyboardBar.button.label"})})})})}},803960:(e,t,o)=>{o.r(t),o.d(t,{arrowChevronSingleDownIcon:()=>r,iconDefinition:()=>n});o(296540);const n={viewBox:"0 0 20 20",fittedViewBox:"3.97 6.97 12.06 6.66",svg:(0,o(474848).jsx)("path",{d:"M9.558 13.442c.244.244.64.244.884 0l5.4-5.4a.625.625 0 0 0-.884-.884L10 12.116 5.042 7.158a.625.625 0 1 0-.884.884z"})},r=(0,o(340498).wt)("arrowChevronSingleDown",n,"default")},863522:(e,t,o)=>{o.d(t,{C:()=>i});o(296540);var n=o(474848);const r={viewBox:"0 0 20 20",fittedViewBox:"3.12 1.25 15.63 15.63",svg:(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("path",{d:"M16.25 6.25a2.5 2.5 0 1 0 0-5 2.5 2.5 0 0 0 0 5"}),(0,n.jsx)("path",{d:"M5.25 3.125h7.302a3.8 3.8 0 0 0 0 1.25H5.25a.875.875 0 0 0-.875.875v9.5c0 .483.392.875.875.875h9.5a.875.875 0 0 0 .875-.875V7.448a3.8 3.8 0 0 0 1.25 0v7.302a2.125 2.125 0 0 1-2.125 2.125h-9.5a2.125 2.125 0 0 1-2.125-2.125v-9.5c0-1.174.951-2.125 2.125-2.125"})]})},i=(0,o(340498).wt)("markUnread",r,"default")},888643:(e,t,o)=>{o.d(t,{k:()=>r});var n=()=>o(402014);function r(e){(0,n().SQ)(e,n().y$.Click,(()=>{}))}},890409:(e,t,o)=>{o.d(t,{Ah:()=>h,Dk:()=>f,Iv:()=>y,SF:()=>g,YO:()=>_,_f:()=>x,c_:()=>p,dW:()=>b,gW:()=>m,sp:()=>M,vN:()=>v});o(16280),o(944114),o(898992),o(354520),o(803949),o(581454),o(737550);var n=()=>o(496603),r=()=>o(973647),i=()=>o(534177),a=()=>o(842599),s=()=>o(239381),l=()=>o(179034),c=()=>o(798880),u=()=>o(201980),d=()=>o(241319);function p(e,t){e.DO_NOT_USE_commonTrackEvent({eventName:"add_automation_step",properties:t})}function m(e,t){e.DO_NOT_USE_commonTrackEvent({eventName:"delete_automation_step",properties:t})}function f(e,t){e.DO_NOT_USE_commonTrackEvent({eventName:"automation_create",properties:t})}function g(e,t){e.DO_NOT_USE_commonTrackEvent({eventName:"automation_update",properties:t})}function y(e,t){e.DO_NOT_USE_commonTrackEvent({eventName:"automation_delete",properties:t})}function h(e,t){e.DO_NOT_USE_commonTrackEvent({eventName:"automation_enable",properties:t})}function v(e,t){e.DO_NOT_USE_commonTrackEvent({eventName:"automation_disable",properties:t})}function b(e,t){e.DO_NOT_USE_commonTrackEvent({eventName:"automation_action_create",properties:t})}function _(e,t){e.DO_NOT_USE_commonTrackEvent({eventName:"automation_action_delete",properties:t})}function S(e){const{formulaAnalyticsModule:t,formulasModule:o,formulaTypecheckContextValues:n,getRecordModel:a,spaceId:l,value:c,featureGates:u}=e;if("formula"===c.type){if(!(0,i().O9)(c.value))return;const e=r().Q.unwrapOr(o.parseFormulaInputToAst(c.value),void 0);if(e){const r=o.addTypesToFormulaAST(e,{handleDataRequest:(0,s().zg)(a),spaceId:l,valueTypes:n,featureGates:u});return{...t.getFormulaAnalytics(e,{getRecordModel:a,typecheckContextValues:n}),formula_return_type:r.node.type,redacted_formula:t.getRedactedFormulaAsStringSync(e,{getRecordModel:a,typecheckContextValues:n})}}}else{if("simple"===c.type){if(!(0,i().O9)(c.value))return;return t.getSimpleFormulaAnalytics(c.value,{getRecordModel:a,typecheckContextValues:n})}(0,i().HB)(c.type)}}function x(e){const{automationActionModel:t,automationActionModels:o,formulaAnalyticsModule:r,formulasModule:l,formulaTypecheckContextValues:p,getRecordModel:m,featureGates:f,simpleFormulasModule:g}=e;return t.isType("complete_sprint")?{automation_action_id:t.pointer.id,type:"complete_sprint"}:t.isType("create_page")?function(e){const{automationActionModel:t,formulaAnalyticsModule:o,formulasModule:n,formulaTypecheckContextValues:r,getRecordModel:a,featureGates:s}=e,l=t.getConfig();let c,u=[];const d=null==l?void 0:l.collection,p=null==l?void 0:l.properties;if((0,i().O9)(d)&&(0,i().O9)(p)&&p.length>0){const e=a(d),f=null==e?void 0:e.getNormalizedSchema();(0,i().O9)(f)&&(u=p.map((e=>{var t;return(null===(t=f[e])||void 0===t?void 0:t.type)??"unknown"})));const g=null==l?void 0:l.values;if(n&&(0,i().O9)(g)){c=[];for(const e of p){var m;const i=null===(m=g[e])||void 0===m?void 0:m.value;if(!i)continue;const l=S({formulaAnalyticsModule:o,formulasModule:n,getRecordModel:a,formulaTypecheckContextValues:r,spaceId:t.spaceId,value:i,featureGates:s});l&&c.push(l)}}}return{automation_action_id:t.pointer.id,property_formula_stats:c,property_types:u,type:"create_page"}}({automationActionModel:t,formulaAnalyticsModule:r,formulasModule:l,formulaTypecheckContextValues:p,getRecordModel:m,featureGates:f}):t.isType("duplicate_blocks")?{automation_action_id:t.pointer.id,type:"duplicate_blocks"}:t.isType("modal_confirmation")?function(e){const{automationActionModel:t,formulaAnalyticsModule:o,formulasModule:n,formulaTypecheckContextValues:r,getRecordModel:a,featureGates:s}=e,l=t.getConfig(),c=[];if(n&&(0,i().O9)(l)&&l.text){const e=S({formulasModule:n,formulaAnalyticsModule:o,getRecordModel:a,formulaTypecheckContextValues:r,spaceId:t.spaceId,value:l.text,featureGates:s});e&&c.push(e)}return{automation_action_id:t.pointer.id,formula_stats:c,type:"modal_confirmation"}}({automationActionModel:t,formulaAnalyticsModule:r,formulasModule:l,formulaTypecheckContextValues:p,getRecordModel:m,featureGates:f}):t.isType("open_page")?{automation_action_id:t.pointer.id,type:"open_page"}:t.isType("query_collection")?{automation_action_id:t.pointer.id,type:"query_collection"}:t.isType("send_in_app_notification")?function(e){var t;const{automationActionModel:o,formulaAnalyticsModule:n,formulasModule:r,formulaTypecheckContextValues:a,getRecordModel:s,featureGates:l,simpleFormulasModule:c}=e,d={automation_action_id:o.pointer.id,messageCharacterCount:0,type:"send_in_app_notification"},p=o.getConfig();if(!(0,i().O9)(p))return d;if((0,i().O9)(p.target))if("formula"===p.target.type&&(0,i().O9)(p.target.value)){if(d.targetData={type:"formula",numUserFormulaTargets:(0,u().Fbh)(p.target.value.value).length,numFormulaContextTargets:c.getReferencedContextValueIds(p.target.value).length},r){const e=S({formulasModule:r,formulaAnalyticsModule:n,getRecordModel:s,formulaTypecheckContextValues:a,spaceId:o.spaceId,value:p.target.value,featureGates:l});e&&(d.formula_stats??=[],d.formula_stats.push(e))}}else if("property"===p.target.type&&(0,i().O9)(p.target.propertyId)&&(0,i().O9)(p.target.collectionPointer)){const e=s(p.target.collectionPointer),t=null==e?void 0:e.getSchema();var m;(0,i().O9)(t)&&(d.targetData={type:"property",propertyType:null===(m=t[p.target.propertyId])||void 0===m?void 0:m.type})}if((0,i().O9)(null===(t=p.notification_message)||void 0===t?void 0:t.value)&&(d.messageCharacterCount=(0,u().FAw)(p.notification_message.value),r)){const e=S({formulasModule:r,formulaAnalyticsModule:n,getRecordModel:s,formulaTypecheckContextValues:a,spaceId:o.spaceId,value:p.notification_message,featureGates:l});e&&(d.formula_stats??=[],d.formula_stats.push(e))}return d}({automationActionModel:t,formulaAnalyticsModule:r,formulasModule:l,formulaTypecheckContextValues:p,getRecordModel:m,featureGates:f,simpleFormulasModule:g}):t.isType("send_gmail_notification")?function(e){var t,o,r,s,l,d,p;const{automationActionModel:m,formulaAnalyticsModule:f,formulasModule:g,formulaTypecheckContextValues:y,getRecordModel:h,featureGates:v}=e,b=m.getConfig();if(!(0,i().O9)(b))return{automation_action_id:m.pointer.id,fields:{},recipient_domains:{},type:"send_gmail_notification"};const _=Object.fromEntries(Object.entries(b||{}).map((([e,t])=>{var o;return"formula"===(null==t?void 0:t.type)?[e,Boolean(null==t||null===(o=t.value)||void 0===o?void 0:o.value)]:"simple"===(null==t?void 0:t.type)?[e,Boolean(null==t?void 0:t.value)]:[e,Boolean(t)]}))),{to:x,cc:M,bcc:A}=b,T=[...(null==x||null===(t=x.value)||void 0===t?void 0:t.value)||[],...(null==M||null===(o=M.value)||void 0===o?void 0:o.value)||[],...(null==A||null===(r=A.value)||void 0===r?void 0:r.value)||[]],k=[...(0,u().Fbh)(T).map((e=>h({table:c().oo,id:e}))).map((e=>null==e?void 0:e.email)).filter(i().O9),...(0,a().C3)((0,u().k4p)(T))],w=n().Tr(k.map((e=>e.split("@")[1]))),I=[null===(s=b.to)||void 0===s?void 0:s.value,null===(l=b.cc)||void 0===l?void 0:l.value,null===(d=b.bcc)||void 0===d?void 0:d.value,null===(p=b.reply_to)||void 0===p?void 0:p.value,b.from_name,b.email_subject,b.email_body].map((e=>{if(g&&(0,i().O9)(e))return S({formulaAnalyticsModule:f,formulasModule:g,getRecordModel:h,formulaTypecheckContextValues:y,spaceId:m.spaceId,value:e,featureGates:v})})).filter(i().O9);return{automation_action_id:m.pointer.id,fields:_,formula_stats:I,recipient_domains:w,type:"send_gmail_notification"}}({automationActionModel:t,formulaAnalyticsModule:r,formulasModule:l,formulaTypecheckContextValues:p,getRecordModel:m,featureGates:f}):t.isType("slack_notification")?{automation_action_id:t.pointer.id,type:"slack_notification"}:t.isType("update_pages")?function(e){const{automationActionModel:t,automationActionModels:o,formulaAnalyticsModule:n,formulasModule:r,formulaTypecheckContextValues:a,getRecordModel:l,featureGates:c}=e,u=t.getConfig(),p=[],m=[],f=[];if((0,i().O9)(u)&&(0,i().O9)(u.target)&&(0,i().O9)(u.properties)&&u.properties.length>0){let e;if("variable"===u.target.type){const t=(0,s().y5)(u.target.id);if("action"===t.source){const t=(0,d().y)({actionModels:o,id:u.target.id}).collectionPointer;if((0,i().O9)(t)){const o=l(t);e=null==o?void 0:o.getNormalizedSchema()}}else{if("global"!==t.source||"button_page"!==t.global)throw new Error("Failed loading property schema");{const t=(0,s().IV)(a,u.target.id);if("block"===(null==t?void 0:t.type.type)&&(0,i().O9)(t.type.collection)){const o=l(t.type.collection);e=null==o?void 0:o.getNormalizedSchema()}}}}else if("collection"===u.target.type){const t=l(u.target.collection);e=null==t?void 0:t.getNormalizedSchema()}(0,i().O9)(e)&&u.properties.forEach((o=>{const s=e[o];if((0,i().O9)(s)&&(p.push(s.type),r&&(0,i().O9)(u.values))){const e=u.values[o];if((0,i().O9)(e)&&(m.push({type:s.type,operator:e.action}),e.value)){const o=S({formulasModule:r,formulaAnalyticsModule:n,getRecordModel:l,formulaTypecheckContextValues:a,spaceId:t.spaceId,value:e.value,featureGates:c});o&&f.push(o)}}}))}return{automation_action_id:t.pointer.id,property_configs:m,property_formula_stats:f,property_types:p,type:"update_pages"}}({automationActionModel:t,automationActionModels:o,formulaAnalyticsModule:r,formulasModule:l,formulaTypecheckContextValues:p,getRecordModel:m,featureGates:f}):t.isType("define_variables")?function(e){const{automationActionModel:t,formulaAnalyticsModule:o,formulasModule:n,formulaTypecheckContextValues:r,getRecordModel:a,featureGates:s}=e,l=t.getConfig(),c=[];if(n&&(0,i().O9)(l)&&l.values)for(const i of Object.values(l.values))if(i.value){const e=S({formulasModule:n,formulaAnalyticsModule:o,getRecordModel:a,formulaTypecheckContextValues:r,spaceId:t.spaceId,value:i.value,featureGates:s});e&&c.push(e)}return{automation_action_id:t.pointer.id,formula_stats:c,type:"define_variables"}}({automationActionModel:t,formulaAnalyticsModule:r,formulasModule:l,formulaTypecheckContextValues:p,getRecordModel:m,featureGates:f}):t.isType("http_request")?{automation_action_id:t.pointer.id,type:"http_request"}:t.isType("publish_site")?{automation_action_id:t.pointer.id,type:"publish_site"}:t.isType("worker")?{automation_action_id:t.pointer.id,type:"worker"}:void(0,i().HB)(t)}function M(e){const{automationModel:t,builderType:o="sidebar",formulaAnalyticsModule:n,formulasModule:r,formulaTypecheckContextValues:a,getRecordModel:s,featureGates:c,simpleFormulasModule:u,source:d}=e,p=[],m=t.getActionPointers().map((e=>s(e))).filter(i().O9);for(const l of t.getActionPointers()){const e=s(l);(0,i().O9)(e)&&p.push(x({automationActionModel:e,automationActionModels:m,formulaAnalyticsModule:n,formulasModule:r,formulaTypecheckContextValues:a,getRecordModel:s,featureGates:c,simpleFormulasModule:u}))}const f=[];let g,y,h;if(t.isEventType()){var v;const e=t.getEventConfiguration(),o=s(t.getParentPointer());g=t.getParentId();const n=t.getEventConfiguration();if("collection_view"===(null===(v=n.source)||void 0===v?void 0:v.type)){const e=s(n.source.pointer);(null==e?void 0:e.parent_table)===l().ev&&(h=null==e?void 0:e.parent_id),y=null==n?void 0:n.source.pointer.id}const r=null==o?void 0:o.getNormalizedSchema();if((0,i().O9)(r)){const{pagesAdded:t,pagePropertiesEdited:o}=e;if(t&&f.push({type:"page"}),"any"===o.type)f.push({condition:"any",type:"property"});else if("none"===o.type)f.push({condition:"none",type:"property"});else{let e=[];"some"===o.type?e=o.some??[]:"all"===o.type&&(e=o.all??[]);const t=[],n=[];e.forEach((e=>{var o;const a=null===(o=r[e.property])||void 0===o?void 0:o.type;(0,i().O9)(a)&&(t.push({type:a,operator:e.filter.operator}),n.push(a))})),f.push({condition:o.type,property_configs:t,property_types:n,type:"property"})}}}else if(t.isButtonType())f.push({type:"button"});else if(t.isRecurrenceType()){var b;f.push({type:"recurrence",frequency:null===(b=t.getTrigger().recurrence)||void 0===b?void 0:b.frequency})}else(0,i().HB)(t);return{automation_actions:p,automation_id:t.id,automation_triggers:f,collection_id:g,collection_view_id:y,collection_view_block_id:h,builder_type:o,source:d}}},920546:(e,t,o)=>{o.d(t,{F:()=>F});var n=o(296540),r=()=>o(726637),i=()=>o(590526),a=()=>o(401497),s=()=>o(250910),l=()=>o(695115),c=()=>o(26697),u=()=>o(170350),d=()=>o(112412),p=()=>o(506166),m=()=>o(340498),f=()=>o(69708),g=()=>o(100622),y=()=>o(12591),h=()=>o(900652),v=()=>o(424039),b=(o(581454),()=>o(59226)),_=()=>o(484714),S=()=>o(807449),x=()=>o(546926),M=()=>o(302501),A=()=>o(890492),T=()=>o(81068),k=()=>o(663639),w=()=>o(736847),I=()=>o(934999),C=()=>o(349679),E=()=>o(274570),O=()=>o(829548),R=()=>o(863522),j=()=>o(848259);var D=o(474848);function B(e){const{closePopup:t}=e,o=(0,_().v3)(),s=(0,_().Y0)(),l=(0,i().O$)(v().Iq),c=(0,n.useCallback)((e=>function(e,t){v().Ay.setState({...v().Ay.state,filter:t}),j().DK(e,{tab:t})}(o,e)),[o]),u=(0,a().IS)((()=>({iconContainer:{display:"flex",justifyContent:"center",alignItems:"center",...r().A.isMobile&&{height:20}},icon:{...r().A.isMobile?{height:24,width:24}:{height:20,width:20}}})),[]),d=(0,y().C)(),p=!(0,b().X)("hide_all_workspace_updates")||"all_updates"===l,m=[{type:"unread_and_read",title:(0,D.jsx)(f().sA,{id:"inboxFilterMenu.readAndUnreadOption.label",defaultMessage:"Unread & read"}),icon:O().y},{type:"unread_only",title:(0,D.jsx)(f().sA,{id:"inboxFilterMenu.unreadOption.label",defaultMessage:"Unread"}),icon:R().C},{type:"archived_only",title:(0,D.jsx)(f().sA,{id:"inboxFilterMenu.archivedOption.label",defaultMessage:"Archived"}),icon:I().archiveBoxIcon},...p?[{type:"all_updates",title:(0,D.jsx)(f().sA,{id:"inboxFilterMenu.allUpdatesOption.label",defaultMessage:"All workspace updates"}),icon:E().clockIcon}]:[]];return(0,D.jsx)(A().A,{menuType:x().gu.Popup,height:s.isTablet?"100%":r().A.isMobile?"50vh":void 0,minWidth:250,maxWidth:r().A.isMobile?"100vw":void 0,maxHeight:s.isTablet?"100%":void 0,scrollerStyle:d.menuScroller,header:(0,D.jsx)(M().A,{style:d.header,isSmall:!r().A.isMobile,isSecondaryColor:!r().A.isMobile,children:(0,D.jsx)(f().sA,{id:"inbox.filterOptionsMenu.headerMobile",defaultMessage:"Filter"})}),children:(0,D.jsx)(k().A,{type:k().O.Vertical,sections:[{key:"inbox filters",render:e=>(0,D.jsx)(w().A,{...e,topBorder:0!==e.index,style:d.sectionMenuItem}),items:m.map(((e,o)=>{const n=e.type===l,i=o===m.length-1,a=r().A.isMobile&&i;return{key:e.type,render:t=>(0,D.jsx)(T().A,{...t,style:{...d.buttonMenuItem,...a&&d.transparentButtonMenuItemBorder},pressedStyle:d.buttonMenuItemPressed,title:e.title,titleStyle:d.title,icon:(0,D.jsx)("div",{style:u.iconContainer,children:e.icon(u.icon)}),right:n?(0,D.jsx)(S().I,{icon:C().checkmarkSmallIcon,size:"sm"}):void 0}),action:()=>{t(),c(e.type)}}}))}],initialFocus:void 0,onAccept:()=>t()})})}function F({sizeVariant:e="default"}){const t=(0,f().tz)(),o=(0,i().O$)(v().Iq),n="small"===e?d().filterSmallIcon:u().filterIcon,b=(0,h().zg)(r().A.isMobile?"default":e),_=(0,a().IS)((()=>({button:r().A.isMobile?{height:30,width:30}:b.button,icon:{...b.icon,...r().A.isMobile&&{fill:g().Tj.icon.primary,width:m().lD.default,height:m().lD.default},..."unread_and_read"!==o?{fill:g().Tj.blue.icon.accentPrimary}:{}}})),[o,b]),S=(0,y().C)(),x=t.formatMessage({defaultMessage:"Filter notifications",id:"inbox.filterButton.tooltip"});return(0,D.jsx)(s().A,{style:S.popup,popupType:r().A.isMobile?s().z.SlideUp:s().z.Popup,renderOrigin:({onClick:e})=>(0,D.jsx)(c().m,{renderTooltip:()=>x,placement:"bottom",alignment:"start",delayThreshold:0,originGap:6,render:t=>(0,D.jsx)(l().A,{ariaLabel:x,icon:r().A.isMobile?p().E:n,iconStyle:_.icon,onClick:e,style:_.button,...t})}),render:e=>(0,D.jsx)(B,{closePopup:e.close}),alignmentToOrigin:"start",originGap:2})}},921123:(e,t,o)=>{o.r(t),o.d(t,{archiveBoxFillIcon:()=>r,iconDefinition:()=>n});o(296540);const n={viewBox:"0 0 20 20",fittedViewBox:"3.12 3.12 13.75 13.75",svg:(0,o(474848).jsx)("path",{d:"M3.125 4.25c0-.621.504-1.125 1.125-1.125h11.5c.621 0 1.125.504 1.125 1.125v1.5c0 .621-.504 1.125-1.125 1.125H4.25A1.125 1.125 0 0 1 3.125 5.75zm1 3.875h11.75v7.625c0 .621-.504 1.125-1.125 1.125h-9.5a1.125 1.125 0 0 1-1.125-1.125zM8 9.875a.625.625 0 1 0 0 1.25h4a.625.625 0 1 0 0-1.25z"})},r=(0,o(340498).wt)("archiveBoxFill",n,"fill")},933117:(e,t,o)=>{o.d(t,{A:()=>f});o(944114),o(898992),o(803949),o(581454);var n=o(296540),r=()=>o(245720),i=()=>o(30537),a=()=>o(546926),s=()=>o(890492),l=()=>o(663639),c=()=>o(736847),u=()=>o(69708),d=()=>o(496603),p=()=>o(534177),m=o(474848);const f=function({renderOrigin:e,onClick:t,items:n,getKey:r,renderItem:i,selectedItem:s,onSelect:l,dontCloseParentOnSelect:c,menuTypeOverride:u,menuTitle:d,width:p,minWidth:f,disabled:g,originGap:v,buttonPopupStore:b,sameWidthAsOrigin:_}){const S=(0,o(590526).uB)(b,o(118307).A),x=u??(o(726637).A.isMobile?a().gu.Modal:a().gu.Popup);return(0,m.jsx)(o(250910).A,{popupType:h(x),bottomSheetInitialState:"half",renderOrigin:e,buttonPopupStore:S,placementToOrigin:"bottom",onClick:t,render:e=>(0,m.jsx)(y,{parent:e,items:n,getKey:r,renderItem:i,selectedItem:s,onSelect:l,dontCloseParentOnSelect:c,menuType:x,menuTitle:d,width:p,minWidth:f}),disabled:g,originGap:v,sameWidthAsOrigin:_})};function g(e,t,o,r,i,a,s,l){return{key:0,render:e=>(0,n.createElement)(c().A,{...e,key:t,topBorder:t>0}),items:e.map((e=>({key:r(e),render:t=>i({...t,value:e,key:r(e),selectedItem:a}),action:()=>{!function(e,t,o){t!==e&&o(e)}(e,a,s),l||o.close()}})))}}function y({parent:e,items:t,getKey:o,renderItem:n,selectedItem:i,onSelect:c,dontCloseParentOnSelect:f,menuType:y,menuTitle:h,width:v,minWidth:b}){const _=[];if(function(e){return e.length>0&&e[0]instanceof Array}(t))t.forEach(((t,r)=>{const a=g(t,r,e,o,n,i,c,f);_.push(a)}));else{const r=g(t,0,e,o,n,i,c,f);_.push(r)}const S=(0,m.jsx)(l().A,{type:l().O.Vertical,initialFocus:d().SL(d().Bq(t),(e=>d().n4(e,i))),sections:_});let x;switch(y){case a().gu.ActionSheet:x={menuType:a().gu.ActionSheet};break;case a().gu.Modal:x={menuType:a().gu.Modal,title:h,right:(0,m.jsx)(u().sA,{...r().W.done}),onClickRight:e.close};break;case a().gu.Popup:x={menuType:a().gu.Popup,width:v||160,minWidth:b};break;default:(0,p().HB)(y)}return(0,m.jsx)(s().A,{...x,children:S})}function h(e){switch(e){case a().gu.ActionSheet:return i().n.SlideUp;case a().gu.Modal:return i().n.BottomSheet;case a().gu.Popup:return i().n.Popup}}},961265:(e,t,o)=>{o.d(t,{r:()=>i});o(296540);var n=o(474848);const r={viewBox:"0 0 20 20",fittedViewBox:"3.12 3.12 15.25 15.57",svg:(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("path",{fillRule:"evenodd",d:"M3.125 4.75c0-.897.728-1.625 1.625-1.625h10.5c.898 0 1.625.728 1.625 1.625v1.57c0 .676-.413 1.256-1 1.5v3.904l-1.25 2.084V7.945h-9.25v7.305c0 .207.168.375.375.375h4.329c.05.338.192.667.431.945l.261.305H5.75a1.625 1.625 0 0 1-1.625-1.625V7.82c-.587-.244-1-.824-1-1.5zm12.5 1.57V4.75a.375.375 0 0 0-.375-.375H4.75a.375.375 0 0 0-.375.375v1.57c0 .205.164.372.369.375h10.512a.375.375 0 0 0 .369-.375",clipRule:"evenodd"}),(0,n.jsx)("path",{d:"M8 9.875a.625.625 0 1 0 0 1.25h4a.625.625 0 1 0 0-1.25zm10.282 2.697a.625.625 0 0 0-1.072-.644l-3.041 5.07-1.76-2.055a.625.625 0 1 0-.95.814l2.325 2.712a.625.625 0 0 0 1.01-.085z"})]})},i=(0,o(340498).wt)("archiveBoxCheck",r,"default")},962753:(e,t,o)=>{o.d(t,{EH:()=>v,FO:()=>y,P$:()=>h,VA:()=>f,h0:()=>u,lM:()=>d,mq:()=>g});o(898992),o(581454),o(737550);var n=()=>o(907258),r=()=>o(242422),i=()=>o(763765),a=()=>o(613848),s=()=>o(496603),l=()=>o(534177),c=()=>o(822789);function u(e){const{currentUserRootStore:t}=n().default.state;if(!t)return!1;const o=t.getSpaceViewStores();return(0,s().oE)(null==o?void 0:o.map((e=>e.getSpaceId()))).map((t=>a().A.getData(e,{spaceId:t,userId:e.currentUser.id}))).some((e=>p(e)))}function d(e,t){return p(a().A.getData(e,{spaceId:t,userId:e.currentUser.id}))}function p(e){switch(null==e?void 0:e.membershipType){case void 0:case"none":case"page_guest":return!1;case"restricted_member":case"member":case"membership_admin":case"owner":return!0===e.is_sales_assisted;default:(0,l().HB)(e)}}function m(e,t){if(!t)return"control";if(d(e,t))return"control";const o=r().default.getEligibleGroup({experimentId:"ai_product_retention_simplified_input",defaultGroup:"control"});return"input"===o||"input_and_ask_mode"===o?o:"control"}function f(){switch(r().default.getEligibleGroup({experimentId:"ai_product_retention_agent_follow_ups",defaultGroup:"control"})){case"button_nudge":return["button","nudge"];case"button_control":return["button","default"];case"nudge":return["nudge"];default:return}}function g(e,t){const o=r().default.checkGate({gateName:"agent_deep_find"}),n=void 0!==t&&d(e,t),a=e.currentUser.id,s=!t||!a||i().t.USEWITHCAUTION_isFetchedForSpaceAndUserId({spaceId:t,userId:a}),l=o||!n&&s&&"on"===r().default.getEligibleGroup({experimentId:"ai_product_retention_deepfind",defaultGroup:"control"}),c=h(e,t);return{agentDeepFindEnabled:l,useReadOnlyMode:l&&c}}function y(e,t){if(t?(0,c().vp)(t):(0,c().hw)())return!0;return"control"!==m(e,t)}function h(e,t){return"input_and_ask_mode"===m(e,t)}function v(){return"on"===r().default.getEligibleGroup({experimentId:"ai_product_retention_agent_speculative_search",defaultGroup:"control"})}}}]);