"use strict";(globalThis.webpackChunknotion_next=globalThis.webpackChunknotion_next||[]).push([[14344,32626,48486,59764,92754,99171],{670:(e,t,n)=>{n.d(t,{Lr:()=>a,PM:()=>r,Ur:()=>i});n(517642),n(658004),n(733853),n(845876),n(432475),n(515024),n(731698);class o extends(()=>n(757695))().Store{getInitialState(){return{duplicatingWorkflowIds:new Set,isDuplicating:!1}}}const r=new o;function i(e){r.update((t=>{const n=new Set(t.duplicatingWorkflowIds);return n.add(e),{duplicatingWorkflowIds:n,isDuplicating:n.size>0}}))}function a(e){r.update((t=>{if(!t.duplicatingWorkflowIds.has(e))return t;const n=new Set(t.duplicatingWorkflowIds);return n.delete(e),{duplicatingWorkflowIds:n,isDuplicating:n.size>0}}))}},24126:(e,t,n)=>{n.d(t,{c:()=>r});n(296540);const o={viewBox:"0 0 20 20",fittedViewBox:"3.9 2.75 12.18 14.49",svg:(0,n(474848).jsx)("path",{d:"M12.626 2.768a.625.625 0 0 1 0 1.224l-.126.013h-.125v4.794l3.366 5.159c.893 1.369-.03 3.17-1.623 3.281l-.156.006H6.039c-1.688 0-2.703-1.873-1.78-3.287l3.366-5.157V4.005H7.5a.625.625 0 0 1 0-1.25h5zM8.875 9.173l-.102.156-1.567 2.401h5.589l-1.569-2.403-.101-.156V4.005h-2.25z"})},r=(0,n(340498).wt)("beaker",o,"default")},59110:(e,t,n)=>{n.r(t),n.d(t,{loadLocalSubtree:()=>M});n(944114),n(517642),n(658004),n(733853),n(845876),n(432475),n(515024),n(731698),n(898992),n(354520),n(803949);var o=()=>n(726637),r=()=>n(700500),i=()=>n(175482),a=()=>n(777447),s=()=>n(792071),l=()=>n(976618),d=()=>n(388821),c=()=>n(277153),u=()=>n(912720),p=()=>n(199378),f=()=>n(179034),m=()=>n(519831),g=()=>n(869558),h=()=>n(37165),v=()=>n(144081),y=()=>n(743246),w=()=>n(201980),b=()=>n(534177);function M(e){const{environment:t,blockId:n,inMemoryRecordCache:o,options:r}=e,i=t.currentUser.id,a=d().RecordMap.create(),s=new Set,l=[{pointer:{table:f().ev,id:n},parentId:"doesn't matter"}];for(;l.length>0;){const e=l.shift();if(!e)continue;if(s.has(e.pointer.id))continue;const t=n===e.pointer.id,d=S({pointer:e.pointer,recordMap:a,inMemoryRecordCache:o,currentUserId:i,cursors:l,cursor:e,options:r,isRootRequest:t});if(d)return d;s.add(e.pointer.id)}return{type:"success",recordMap:a}}function S(e){const{pointer:t,recordMap:n,inMemoryRecordCache:d,currentUserId:M,cursors:S,cursor:x,options:I,isRootRequest:k}=e;let _;return(0,c().Yt)(t,f().ev)?_=function(e){var t,n,l,d;const{pointer:c,recordMap:p,inMemoryRecordCache:m,currentUserId:h,cursors:v,cursor:M,options:S,isRootRequest:x}=e,I=m.getRecord({pointer:c,userId:h}),k=null==I?void 0:I.value;if(!k)return S.requireFullSubtree?{type:"error",reason:"missing_record",pointer:c}:void 0;const _=S.excludeCrdtData?i().ir(k):k;if(S.includeLegacyTransclusionBlockValues){if(!x&&_.parent_id!==M.parentId&&!M.isBlockContentChild)return}else if(!x&&_.parent_id!==M.parentId)return;if(_.type===r().xd.externalObjectInstance&&!S.allowCopyExternalObjectInstances)return{type:"error",reason:"encountered_external_object_instance",pointer:c};if(p.setValue(c,_),!S.skipNavigableChildren){const e=s().Bj6.fromBlock(_).getCollectionPointers();for(const t of e){const e=m.getRecord({pointer:t,userId:h});var C,D;if(e)(null===(C=e.value)||void 0===C?void 0:C.parent_table)===f().ev&&(null===(D=e.value)||void 0===D?void 0:D.parent_id)===_.id&&v.push({pointer:t,parentId:_.id});else if(S.requireFullSubtree)return{type:"error",reason:"missing_record",pointer:t}}if(_.view_ids)for(const t of _.view_ids)v.push({pointer:{table:g().Gy,id:t,spaceId:_.space_id},parentId:_.id})}if(!(S.skipBlockContent||S.skipTransclusionContainerChildren&&"transclusion_container"===_.type||S.skipNavigableChildren&&(0,r().$I)(_.type))){const e=s().Bj6.fromBlock(_).getRenderableContentIds();for(const t of e)v.push({pointer:{table:f().ev,id:t},parentId:_.id,isBlockContentChild:!0})}const j=s().Bj6.fromBlock(_).getNonContentChildren();for(const o of j)v.push({pointer:{table:f().ev,id:o},parentId:_.id,isBlockContentChild:!0});if(_.type===r().xd.externalObjectInstance){var T,A;const e=(null===(T=_.format)||void 0===T?void 0:T.related_external_object_uris_to_instance_ids)&&Object.values(null===(A=_.format)||void 0===A?void 0:A.related_external_object_uris_to_instance_ids)||[];for(const t of e)v.push({pointer:{table:f().ev,id:t,spaceId:_.space_id},parentId:_.id})}if(!S.skipNavigableChildren&&_.properties){const e=Object.values(_.properties).filter(b().O9);for(const t of e)for(const e of t)for(const t of w().uPN(e)){if(w().jIt(t)){const e=w().v55(t);v.push({pointer:{table:f().ev,id:e},parentId:_.id})}if(w().sh$(t)){const e=w().cQR(t),n=(0,a().lX)({url:e,baseUrl:o().A.domainBaseUrl,publicDomainName:o().A.publicDomainName});n&&v.push({pointer:{table:f().ev,id:n},parentId:_.id})}if(w().N53(t)){const e=w().T$c(t);e&&v.push({pointer:{table:f().ev,id:e,spaceId:_.space_id},parentId:_.id})}}}"form"===_.type&&null!==(t=_.format)&&void 0!==t&&t.form_layout_pointer&&v.push({pointer:_.format.form_layout_pointer,parentId:_.id});null!==(n=_.format)&&void 0!==n&&n.automation_id&&v.push({pointer:{table:u().yB,id:_.format.automation_id,spaceId:_.space_id},parentId:_.id});null!==(l=_.format)&&void 0!==l&&l.workflow_id&&v.push({pointer:{table:y().C0,id:_.format.workflow_id,spaceId:_.space_id},parentId:_.id});null!==(d=_.format)&&void 0!==d&&d.ai_instructions_page_pointer&&v.push({pointer:_.format.ai_instructions_page_pointer,parentId:_.id})}({pointer:t,recordMap:n,inMemoryRecordCache:d,currentUserId:M,cursors:S,cursor:x,options:I,isRootRequest:k}):(0,c().Yt)(t,m().Vl)?_=function(e){var t,n;const{pointer:o,recordMap:r,inMemoryRecordCache:i,currentUserId:a,cursors:s,cursor:l,options:d}=e;if(!d.allowCopyCollections)return{type:"error",reason:"encountered_collection",pointer:o};const c=i.getRecord({pointer:o,userId:a});if(null==c||!c.value)return d.requireFullSubtree?{type:"error",reason:"missing_record",pointer:o}:void 0;if(c.value.parent_id!==l.parentId)return;const p=c.value;r.setValue(o,p),i.forEachRecord(a,(({model:e})=>{e.table===f().ev&&e&&e.parent_id===o.id&&e.alive&&s.push({pointer:e.pointer,parentId:o.id})}));const m=(null===(t=p.format)||void 0===t?void 0:t.automation_ids)??[];for(const f of m)s.push({pointer:{table:u().yB,id:f,spaceId:p.space_id},parentId:p.id});p.schema&&Object.values(p.schema).forEach((e=>{e&&"button"===e.type&&e.automation_id&&s.push({pointer:{id:e.automation_id,spaceId:p.space_id,table:u().yB},parentId:p.id})}));null!==(n=p.format)&&void 0!==n&&n.layout_pointer&&s.push({pointer:p.format.layout_pointer,parentId:p.id})}({pointer:t,recordMap:n,inMemoryRecordCache:d,currentUserId:M,cursors:S,cursor:x,options:I}):(0,c().Yt)(t,g().Gy)?_=function(e){var t,n;const{pointer:o,recordMap:r,inMemoryRecordCache:i,currentUserId:a,cursors:s,cursor:l,options:d}=e,c=i.getRecord({pointer:o,userId:a});if(null==c||!c.value)return d.requireFullSubtree?{type:"error",reason:"missing_record",pointer:o}:void 0;if(c.value.parent_id!==l.parentId)return;"form_editor"===c.value.type&&null!==(t=c.value.format)&&void 0!==t&&t.form_block_pointer&&s.push({pointer:c.value.format.form_block_pointer,parentId:c.value.id});null!==(n=c.value.format)&&void 0!==n&&n.dashboard_layout_pointer&&s.push({pointer:c.value.format.dashboard_layout_pointer,parentId:c.value.id});r.setValue(o,c.value)}({pointer:t,recordMap:n,inMemoryRecordCache:d,currentUserId:M,cursors:S,cursor:x,options:I}):(0,c().Yt)(t,u().yB)?_=function(e){const{pointer:t,recordMap:n,inMemoryRecordCache:o,currentUserId:r,cursors:i,cursor:a,options:s}=e,l=o.getRecord({pointer:t,userId:r});if(null==l||!l.value)return s.requireFullSubtree?{type:"error",reason:"missing_record",pointer:t}:void 0;if(l.value.parent_id!==a.parentId)return;n.setValue(t,l.value);for(const d of l.value.action_ids??[])i.push({pointer:{table:p().SC,id:d,spaceId:l.value.space_id},parentId:l.value.id})}({pointer:t,recordMap:n,inMemoryRecordCache:d,currentUserId:M,cursors:S,cursor:x,options:I}):(0,c().Yt)(t,p().SC)?_=function(e){const{pointer:t,recordMap:n,inMemoryRecordCache:o,currentUserId:r,cursors:i,cursor:a,options:s}=e,l=o.getRecord({pointer:t,userId:r});if(null==l||!l.value)return s.requireFullSubtree?{type:"error",reason:"missing_record",pointer:a.pointer}:void 0;if(l.value.parent_id!==a.parentId)return;n.setValue(t,l.value);for(const d of l.value.blocks??[])i.push({pointer:{table:f().ev,id:d,spaceId:l.value.space_id},parentId:l.value.id})}({pointer:t,recordMap:n,inMemoryRecordCache:d,currentUserId:M,cursors:S,cursor:x,options:I}):(0,c().Yt)(t,y().C0)?_=function(e){const{pointer:t,recordMap:n,inMemoryRecordCache:o,currentUserId:r,cursor:i,options:a}=e,s=o.getRecord({pointer:t,userId:r});if(null==s||!s.value)return a.requireFullSubtree?{type:"error",reason:"missing_record",pointer:i.pointer}:void 0;if(s.value.parent_id!==i.parentId)return;n.setValue(t,s.value)}({pointer:t,recordMap:n,inMemoryRecordCache:d,currentUserId:M,cursor:x,options:I}):(0,c().Yt)(t,v().zx)?_=function(e){const{pointer:t,recordMap:n,inMemoryRecordCache:o,currentUserId:r,cursors:i,options:a}=e,d=o.getRecord({pointer:t,userId:r}),c=null==d?void 0:d.value;if(!c)return a.requireFullSubtree?{type:"error",reason:"missing_record",pointer:t}:void 0;n.setValue(t,c);const u=s().Bj6.fromValue(v().zx,c);for(const s of u.getBlockChildrenPointers())i.push({pointer:s,parentId:t.id});const p=e=>{const n={id:e.collection_view_id,table:g().Gy,spaceId:c.space_id};return i.push({pointer:n,parentId:t.id}),e};(0,l().E)(c.modules,(e=>{if("formQuestion"===e.type){const n={id:e.formQuestionId,table:h().lo,spaceId:c.space_id};i.push({pointer:n,parentId:t.id})}else if("view"===e.type)p(e);else if("row"===e.type)for(const t of e.modules)"view"===t.type&&p(t)}))}({pointer:t,recordMap:n,inMemoryRecordCache:d,currentUserId:M,cursors:S,cursor:x,options:I}):(0,c().Yt)(t,h().lo)&&(_=function(e){const{pointer:t,recordMap:n,inMemoryRecordCache:o,currentUserId:r,options:i}=e,a=o.getRecord({pointer:t,userId:r});if(null==a||!a.value)return i.requireFullSubtree?{type:"error",reason:"missing_record",pointer:t}:void 0;n.setValue(t,a.value)}({pointer:t,recordMap:n,inMemoryRecordCache:d,currentUserId:M,cursors:S,cursor:x,options:I})),_}},85749:(e,t,n)=>{n.r(t),n.d(t,{AIFillNoseyOverlay:()=>$});var o=n(296540),r=()=>n(920198),i=()=>n(59226),a=()=>n(484714),s=()=>n(590526),l=()=>n(401497),d=()=>n(664748),c=()=>n(350013),u=()=>n(127833),p=()=>n(30537),f=()=>n(807449),m=()=>n(493552),g=()=>n(175882),h=()=>n(743246),v=()=>n(69708),y=()=>n(100622),w=()=>n(384944),b=()=>n(305425),M=()=>n(410282),S=()=>n(898009),x=()=>n(244828),I=()=>n(151241),k=()=>n(396896),_=()=>n(406094),C=()=>n(26697),D=n(474848);const j=(0,v().YK)({viewDetails:{defaultMessage:"View details",id:"AIFillStatusPopup.viewDetails"},paused:{defaultMessage:"Paused",id:"AIFillStatusPopup.paused"},starting:{defaultMessage:"Starting...",id:"AIFillStatusPopup.starting"}});function T(e){const{statusMessage:t,pauseReason:n,runStore:r,onSeeDetails:i}=e,a=(0,v().tz)(),[d,c]=(0,o.useState)(!1),[f,g]=(0,o.useState)(!1),[h,w]=(0,o.useState)(!1),b=(0,o.useRef)(null),M=(0,s().K8)((()=>{var e;return Boolean(null==r||null===(e=r.getData())||void 0===e?void 0:e.thread_id)}),[r]),S=(0,s().K8)((()=>null==r?void 0:r.getCreatedAt()),[r]),[x,I]=(0,o.useState)((()=>S?A(S):void 0));(0,o.useEffect)((()=>{if(!S)return void I(void 0);I(A(S));const e=setInterval((()=>{I(A(S))}),1e3);return()=>clearInterval(e)}),[S]),(0,o.useEffect)((()=>(b.current&&(clearTimeout(b.current),b.current=null),d||f?w(!0):b.current=setTimeout((()=>{w(!1)}),500),()=>{b.current&&clearTimeout(b.current)})),[d,f]);const T=(0,l().IS)((()=>({originContainer:{display:"flex",alignItems:"center",cursor:"pointer",width:"100%",height:"100%"},popupContent:{padding:12,borderRadius:8,backgroundColor:y().Tj.background.elevated,boxShadow:y().Tj.shadow.base.md,display:"flex",flexDirection:"row",alignItems:"center",justifyContent:"space-between",gap:16,minWidth:240}})),[]),R=(0,o.useMemo)((()=>({onMouseEnter:()=>c(!0),onMouseLeave:()=>c(!1)})),[]),E=(0,o.useMemo)((()=>({onMouseEnter:()=>g(!0),onMouseLeave:()=>g(!1)})),[]),B=(0,o.useCallback)((e=>{e.stopPropagation(),e.preventDefault(),i()}),[i]),Y="string"==typeof t?t:(0,D.jsx)(v().sA,{...t.descriptor,values:t.values});return(0,D.jsx)(u().zD,{popupType:p().n.Popup,open:h,originGap:8,placementToOrigin:"top",alignmentToOrigin:"center",disableMouseCapture:!0,preventCaptureEsc:!0,preventScaleTransition:!0,preventOpacityTransition:!0,trapFocus:!1,origin:(0,D.jsx)("div",{...R,style:T.originContainer,children:(0,D.jsx)(m().D,{styleKey:"bodySmRegular",colorVariant:"secondary",children:n?(0,D.jsx)(v().sA,{...j.paused}):Y})}),render:()=>(0,D.jsx)("div",{style:T.popupContent,...E,children:(0,D.jsxs)(k().VP,{width:"100%",gap:8,children:[(0,D.jsxs)(k().fI,{justifyContent:"space-between",children:[(0,D.jsx)(m().D,{styleKey:"bodyMedium",colorVariant:"primary",children:Y}),x?(0,D.jsx)(m().D,{styleKey:"bodySmRegular",colorVariant:"secondary",children:x}):void 0]}),n?(0,D.jsx)(k().fI,{justifyContent:"flex-start",children:(0,D.jsx)(m().D,{styleKey:"bodySmRegular",colorVariant:"secondary",children:n})}):void 0,(0,D.jsx)(k().fI,{justifyContent:"flex-start",children:(0,D.jsx)(C().m,{disableTooltip:M,renderTooltip:()=>a.formatMessage(j.starting),render:e=>(0,D.jsx)(_().A,{...e,size:"sm",disabled:!M,onClick:B,children:(0,D.jsx)(v().sA,{...j.viewDetails})})})})]})})})}function A(e){const t=Date.now()-e,n=Math.floor(t/6e4),o=Math.floor(t%6e4/1e3);return n>0?`${n}m ${o}s`:`${o}s`}var R=()=>n(884780),E=()=>n(394888),B=()=>n(463086),Y=()=>n(98126),L=()=>n(373009),F=()=>n(995847),V=()=>n(234459),P=()=>n(533695),O=()=>n(827368),U=()=>n(600434),N=()=>n(791256),H=()=>n(166442),z=()=>n(631611);const W=(0,v().YK)({modalTitle:{defaultMessage:"Agent activity",id:"AIFillNoseyOverlay.modalTitle"},errorLoadingTranscript:{defaultMessage:"Error loading transcript",id:"AIFillNoseyOverlay.errorLoadingTranscript"},closeModal:{defaultMessage:"Close",id:"AIFillNoseyOverlay.closeModal"}});function K(e){const{isOpen:t,onClose:n,runStore:i}=e,a=(0,r().L)(),d=(0,v().tz)(),c=(0,s().uB)(void 0,H().ClientAIChatStore),u=(0,s().K8)((()=>{var e;return null===(e=i.getData())||void 0===e?void 0:e.thread_id}),[i]),p=(0,s().K8)((()=>{if(u&&a)return B().E.createChildStore(a,{table:V().To,id:u,spaceId:a.id})}),[u,a]),f=(0,s().K8)((()=>{if(p)return(0,N().A3)({clientStore:c,threadStore:p})}),[c,p]),g=(0,o.useMemo)((()=>f?f.steps:[]),[f]),h=(0,s().K8)((()=>(0,N().Ft)({threadStore:p,clientStore:c})),[p,c]),w=(0,U().K7)("custom_agent_activity"),b=(0,o.useCallback)((async()=>{}),[]),M=(0,l().IS)((()=>({modalContainer:{width:600,maxWidth:"90vw",height:"80vh",maxHeight:800,display:"flex",flexDirection:"column",overflow:"hidden"},header:{display:"flex",alignItems:"center",justifyContent:"space-between",padding:16,borderBottom:`1px solid ${y().Tj.border.secondary}`,flexShrink:0},content:{flex:1,overflow:"hidden",display:"flex",flexDirection:"column"},loadingContainer:{display:"flex",alignItems:"center",justifyContent:"center",height:"100%"},errorState:{display:"flex",alignItems:"center",justifyContent:"center",height:"100%",padding:24},transcriptScrollContainer:{flex:1,overflowY:"auto",padding:16},closeButton:{padding:4}})),[]);return t?(0,D.jsx)(E().s,{isOpen:t,onDismiss:n,render:()=>(0,D.jsxs)("div",{style:M.modalContainer,children:[(0,D.jsxs)("div",{style:M.header,children:[(0,D.jsx)(k().fI,{gap:8,alignItems:"center",children:(0,D.jsx)(m().D,{styleKey:"titleSemibold",colorVariant:"primary",children:(0,D.jsx)(v().sA,{...W.modalTitle})})}),(0,D.jsx)(L().E,{ariaLabel:d.formatMessage(W.closeModal),colorPalette:"gray",colorVariant:"secondary",iconLeading:F().xMarkSmallIcon,shape:"pill",size:"sm",onClick:n,style:M.closeButton})]}),(0,D.jsx)("div",{style:M.content,children:(0,D.jsx)(R().K,{from:"AIFillTranscriptModal",fallback:()=>(0,D.jsx)("div",{style:M.errorState,children:(0,D.jsx)(m().D,{colorVariant:"secondary",children:(0,D.jsx)(v().sA,{...W.errorLoadingTranscript})})}),children:p&&f&&a?(0,D.jsx)(z().hP,{surface:z().wy.inferenceTranscriptChatView,children:(0,D.jsx)(O().Wd,{isFullPage:!1,children:(0,D.jsx)("div",{style:M.transcriptScrollContainer,children:(0,D.jsx)(P().Z,{transcript:g,spaceStore:a,threadStore:p,clientStore:c,configType:"workflow",isCustomAgent:!0,runningInference:h,aiChatFeatureController:w,showAttribution:!1,onFollowUpSelect:b})})})}):(0,D.jsx)("div",{style:M.loadingContainer,children:(0,D.jsx)(Y().k,{})})})})]})}):null}const q=(0,v().YK)({creatingTask:{defaultMessage:"Preparing...",id:"AIFillNoseyOverlay.queuing"},waiting:{defaultMessage:"Planning...",id:"AIFillNoseyOverlay.waiting"},queued:{defaultMessage:"Thinking...",id:"AIFillNoseyOverlay.queued"},starting:{defaultMessage:"Noodling...",id:"AIFillNoseyOverlay.starting"},processing:{defaultMessage:"Working...",id:"AIFillNoseyOverlay.processing"},dismiss:{defaultMessage:"Dismiss",id:"AIFillNoseyOverlay.dismiss"}});function $({rowStore:e,property:t,collectionStore:n,insetInlineStart:r}){const u=(0,a().v3)(),p=(0,l().DP)(),f=(0,i().X)("database_agent_hover_progress"),g=(0,s().K8)((()=>d().A.state.isDragging),[]),{status:b,runStore:k}=(0,I().Q)(e,t),[_,C]=(0,o.useState)(!1),j=(0,s().K8)((()=>n.getSchema()),[n]),{background:A}=(0,S().g)(e,t,j)??{},R=(0,s().K8)((()=>{var t;const n=e.getRecordStoreUIAncestor(1),o=(0,M().j)(n);if("default_background"!==o)return null===(t=(0,y().ed)(o,p))||void 0===t?void 0:t.background}),[e,p]),E=(0,o.useMemo)((()=>!!j[t]),[t,j]),B=(0,s().K8)((()=>"creatingTask"===b.type||"waiting"===b.type||"queued"===b.type||"starting"===b.type||"processing"===b.type||"paused"===b.type||"failed"===b.type&&!b.isDismissed),[b]),Y=(0,l().IS)((()=>({overlay:{position:"absolute",top:0,paddingInlineStart:r??8,bottom:0,display:"flex",alignItems:"center",pointerEvents:"auto",zIndex:100,userSelect:"none",width:"100%",backgroundColor:A??R??y().Tj.background.primary,opacity:g?.6:1},progressContainer:{display:"flex",alignItems:"flex-start",paddingBlock:7.5,width:"100%",height:"100%"}})),[r,A,R,g]),L=(0,o.useCallback)((()=>{"failed"===b.type&&!b.isDismissed&&k&&x().createAndCommit({environment:u,userAction:"AIFillNoseyOverlay.dismissError",canUndo:!1,perform:e=>{const t=k.getUserActions()??{};w().zv({store:k,data:{user_actions:{...t,failureNotificationDismissedTime:(new Date).toISOString()}},transaction:e})}})}),[b,k,u]),F=(0,o.useCallback)((e=>{"failed"!==b.type||b.isDismissed?(e.stopPropagation(),e.preventDefault(),e.nativeEvent.stopImmediatePropagation&&e.nativeEvent.stopImmediatePropagation()):L()}),[b,L]),V=(0,s().K8)((()=>{const e=n.getParentStore(),o=n.getSpaceId();if(!e||!o)return!1;const r=null==k?void 0:k.getParentId();if(r){const t=c().N.createChildStore(e,{table:h().C0,id:r,spaceId:o});return t.isDefined()&&!t.getMovedToTrashTime()}const i=e.getFormat();if(!i)return!1;const a="database_agent_ids"in i&&Array.isArray(i.database_agent_ids)?i.database_agent_ids:[];if(0===a.length)return!1;for(const n of a){const r=c().N.createChildStore(e,{table:h().C0,id:n,spaceId:o});if(!r.isDefined()||r.getMovedToTrashTime())continue;const i=r.getData();for(const e of(null==i?void 0:i.modules)??[]){var s;if("notion"===e.type)if(null!==(s=e.state)&&void 0!==s&&null!==(s=s.ownedByDatabasePropertyIds)&&void 0!==s&&s.includes(t))return!0}}return!1}),[n,t,k]),P=f&&k?(0,D.jsx)(K,{isOpen:_,onClose:()=>C(!1),runStore:k},"ai-fill-transcript-modal"):void 0;if(!B||!E||!V)return _&&P?P:null;let O=null;return"creatingTask"===b.type||"waiting"===b.type||"queued"===b.type||"starting"===b.type?O=(0,D.jsx)("div",{style:Y.progressContainer,children:(0,D.jsx)(m().D,{styleKey:"bodySmRegular",colorVariant:"secondary",children:(0,D.jsx)(v().sA,{...q[b.type]})})},"autofill-progress"):"processing"===b.type?O=f?(0,D.jsx)("div",{style:Y.progressContainer,children:(0,D.jsx)(T,{statusMessage:b.message,runStore:k,onSeeDetails:()=>C(!0)})},"autofill-progress"):(0,D.jsx)("div",{style:Y.progressContainer,children:(0,D.jsx)(m().D,{styleKey:"bodySmRegular",colorVariant:"secondary",children:(0,D.jsx)(v().sA,{...q.processing})})},"autofill-progress"):"paused"===b.type?O=f?(0,D.jsx)("div",{style:Y.progressContainer,children:(0,D.jsx)(T,{statusMessage:b.message,pauseReason:b.reason,runStore:k,onSeeDetails:()=>C(!0)})}):(0,D.jsx)("div",{style:Y.progressContainer,children:(0,D.jsx)(m().D,{styleKey:"bodySmRegular",colorVariant:"secondary",children:(0,D.jsx)(v().sA,{...q.processing})})}):"failed"!==b.type||b.isDismissed||(O=(0,D.jsx)("div",{style:Y.progressContainer,children:(0,D.jsx)(X,{error:b.error})})),(0,D.jsxs)(D.Fragment,{children:[(0,D.jsx)("div",{style:Y.overlay,onClick:F,onMouseDown:F,onMouseUp:F,onPointerDown:F,onPointerUp:F,onDoubleClick:F,onContextMenu:F,onDragStart:F,role:"presentation",children:O}),P]})}const G=o.memo((function({markdown:e}){const t=(0,a().v3)(),l=(0,n(664594).T)(),d=(0,r().L)(),c=(0,i().X)("bullets_in_simple_tables_yuh"),u=(0,o.useMemo)((()=>{if(!e||!l||!d)return null;const o=d.id,r=t.idCreator.getSpaceIdCreatorSync(o),i=r.idInSavedSpace(n(179034).ev),a=(0,b().a9)({markdown:e,pageId:i,spaceId:o,idCreator:r,actorPointer:{table:n(798880).oo,id:l},citationFormat:"link",omitBlockTypes:n(145480).W,simpleBulletsEnabled:c}),s=new(n(221844).A)({name:"AIFillNoseyOverlay.MarkdownRenderer",isTemporaryData:!0});return x().createAndCommit({userAction:"AIFillNoseyOverlay.MarkdownRenderer.markdownToBlocks",environment:t,canUndo:!1,perform:e=>{const n=w().Wv({environment:t,type:"page",id:i,inMemoryRecordCache:s,transaction:e,spaceId:o,format:{page_small_text:!0}});return(0,b().HS)({environment:t,transaction:e,rootStore:n,blockOperations:a}),n}}).performResult}),[e,l,d,t,c]),p=(0,s().K8)((()=>null==u?void 0:u.getContentStore()),[u]);return p?(0,D.jsx)(n(314994).c,{displayName:"AIFillNoseyOverlay.MarkdownRenderer",disabled:!0,style:{fontSize:"inherit",lineHeight:1.5},children:(0,D.jsx)(n(217638).A,{store:p,disabled:!0,disableCommentMenu:!0,disableHoverMenu:!0,disableDrag:!0})}):(0,D.jsx)("span",{children:e})}));function X(e){const{error:t}=e,[n,r]=(0,o.useState)(!1),[i,a]=(0,o.useState)(!1),[s,d]=(0,o.useState)(!1),c=(0,o.useRef)(null);(0,o.useEffect)((()=>(c.current&&(clearTimeout(c.current),c.current=null),n||i?d(!0):c.current=setTimeout((()=>{d(!1)}),500),()=>{c.current&&clearTimeout(c.current)})),[n,i]);const m=(0,l().IS)((()=>({iconContainer:{display:"flex",alignItems:"center",justifyContent:"center",cursor:"pointer"},errorPopupContent:{padding:12,borderRadius:8,backgroundColor:y().Tj.background.elevated,boxShadow:y().Tj.shadow.base.md,width:400,maxHeight:300,overflowY:"auto",whiteSpace:"normal",wordWrap:"break-word",overflowWrap:"break-word",fontSize:14,lineHeight:1.5,color:y().Tj.text.primary}})),[]),h=(0,o.useMemo)((()=>({onMouseEnter:()=>r(!0),onMouseLeave:()=>r(!1)})),[]),w=(0,o.useMemo)((()=>({onMouseEnter:()=>a(!0),onMouseLeave:()=>a(!1)})),[]);return t?(0,D.jsx)(u().zD,{popupType:p().n.Popup,open:s,originGap:8,placementToOrigin:"top",alignmentToOrigin:"center",disableMouseCapture:!0,preventCaptureEsc:!0,preventScaleTransition:!0,preventOpacityTransition:!0,trapFocus:!1,origin:(0,D.jsx)("div",{...h,style:m.iconContainer,children:(0,D.jsx)(f().I,{icon:g().exclamationMarkTriangleSmallIcon,size:"sm",colorVariant:"secondary"})}),render:()=>(0,D.jsx)("div",{style:m.errorPopupContent,...w,children:"string"==typeof t?(0,D.jsx)(G,{markdown:t}):(0,D.jsx)(v().sA,{...t.descriptor,values:t.values})})}):null}},108184:(e,t,n)=>{n.r(t),n.d(t,{COMPLETION_THROTTLE:()=>x,PREVIEW_STEP_DELAY:()=>I,maybeUpdateAIUsageEligibilityStoreV2:()=>D,maybeUpdateAiEligibility:()=>C,postProcessAICreatedStores:()=>_,showCompletionErrorWithCode:()=>k,wrapTemporaryBlocksInList:()=>j});n(18107),n(967357);var o=()=>n(242422),r=()=>n(675133),i=()=>n(128933),a=()=>n(770063),s=()=>n(878126),l=()=>n(165358),d=()=>n(179034),c=()=>n(427419),u=()=>n(720665),p=()=>n(753812),f=()=>n(722101),m=()=>n(384944),g=()=>n(274873),h=()=>n(412669),v=()=>n(556122),y=()=>n(594794),w=()=>n(668721),b=()=>n(685377),M=()=>n(661077),S=()=>n(96563);const x=300,I=250;function k(e){const t=r().A.getIntl();return 451===e?i().D6({label:t.formatMessage({id:"completionActions.moderationError",defaultMessage:"AI does not allow content that is harmful or illegal. Please revise your input and try again. (451)"})}):413===e?i().D6({label:t.formatMessage({id:"completionActions.promptOrAttachmentTooLarge",defaultMessage:"Query or attachment is too large. Please revise your input and try again. (413)"})}):502===e||503===e||504===e?i().D6({label:t.formatMessage({id:"completionActions.providerError",defaultMessage:"Weâ€™re experiencing issues with our AI provider. Try again in a few minutes. ({errorCode})"},{errorCode:e})}):void i().D6({label:t.formatMessage({id:"completionActions.genericError",defaultMessage:"AI is temporarily unavailable. Try again in a few minutes. ({errorCode})"},{errorCode:e})})}function _(e,t){for(const n of t)g().In({environment:e,blockStore:n})}async function C(e,t,n){let r;if(o().default.checkGate({gateName:"usage_based_pricing_pfa_checks_purchased_credits_enabled"}))return void(await D(e,t,n));o().default.checkGate({gateName:"usage_based_pricing_alpha_enabled"})&&D(e,t,n).catch((e=>{l().log({level:"error",from:"ai.completionActions",type:"maybeUpdateAIUsageEligibilityStoreV2Error",spaceId:t,error:e})}));const i=v().TI();if(i.debug)r=402!==i.showErrorCode;else{const o=w().o.getState();if(o&&o.isEligible&&"unlimited"===o.type&&!n){const e=o.lastUpdatedAt;if(Date.now()-e<10*u().Xb)return}const i=await p().callCellCompatibleApi({eventName:"getAIUsageEligibility",environment:e,data:{spaceId:t},cellNavigation:{cellId:void 0,spaceId:t}});if("success"===i.type){r=i.data.isEligible,r&&h().K.state&&h().K.setState(!1);const e=!1===(null==o?void 0:o.isEligible)&&(null==o?void 0:o.requestedAccess),t=i.data.researchModeUsage??0;w().o.setState({...i.data,lastUpdatedAt:Date.now(),researchModeUsage:t,...!1===i.data.isEligible&&{requestedAccess:e}})}}void 0!==r&&M().P.setState(r)}async function D(e,t,n){const o=await s().T.awaitData(e,{spaceId:t}),r=b().y.getData(e,{spaceId:t});if(o){if(r&&(0,c().Hg)(o)&&!n){const e=r.lastUpdatedAt;if(Date.now()-e<10*u().Xb)return}await(0,S().y3)(e,t)}}function j(e){var t;const{environment:n,stores:o,listId:r,inMemoryRecordCache:i,transaction:s}=e,l=(null===(t=o.at(0))||void 0===t?void 0:t.getSpaceId())??s.spaceId,c=new(a().pm)({environment:n,pointer:{table:d().ev,id:r||(0,y().Z1)({environment:n,table:d().ev,spaceId:l}),spaceId:l},recordStoreOptions:{inMemoryRecordCache:i,userId:n.currentUser.id},path:["content"]});for(const a of o)f().BC({parentStore:c,appendStore:a,transaction:s}),m().zv({store:a,data:{parent_id:c.id,parent_table:c.table,alive:!0},transaction:s});return c}},132389:(e,t,n)=>{n.d(t,{A:()=>r});n(296540);var o=n(474848);function r(e){const t={display:"inline-block",minWidth:e.size,minHeight:e.size};return"x"===e.axis?t.minHeight=1:"y"===e.axis&&(t.minWidth=1),(0,o.jsx)("div",{style:t})}},147294:(e,t,n)=>{n.d(t,{Ee:()=>g,J1:()=>u,oG:()=>p});n(296540);var o=()=>n(907258),r=()=>n(59226),i=()=>n(590526),a=()=>n(401497),s=()=>n(970236),l=()=>n(69708),d=n(474848);const c={define_variables_automation_action:{launchDateMs:17277408e5,expiryDateMs:1738368e6},passkey_setting:{launchDateMs:1729101727e3,expiryDateMs:1738432882e3},publish_site_settings_embed_page:{launchDateMs:1736208e6,expiryDateMs:1743984e6},generalized_recurrence_automations:{launchDateMs:17365536e5,expiryDateMs:17460576e5},ai_page_translation_topbar_more_action:{launchDateMs:1740451280830,expiryDateMs:17434656e5},verification:{launchDateMs:1740096e6,expiryDateMs:174375e7},notion_ai_workspace_settings:{launchDateMs:17424288e5,expiryDateMs:17550432e5},notion_mail_launch_modal:{launchDateMs:17446752e5,expiryDateMs:17525376e5},notion_mail_launch_modal_2:{launchDateMs:17446752e5,expiryDateMs:17578944e5},ui_doc_example:{launchDateMs:19249056e5,expiryDateMs:19249056e5},collection_property_permissions:{launchDateMs:17433792e5,expiryDateMs:17671392e5},salesforce_sync_unfurling_option:{launchDateMs:17443296e5,expiryDateMs:17538336e5},personal_home_sidebar_item:{launchDateMs:17470944e5,expiryDateMs:175392e7},collection_property_reminder:{launchDateMs:1751958e6,expiryDateMs:17552628e5},get_notified_onboarding_tooltip:{launchDateMs:17520228e5,expiryDateMs:17591904e5},conditional_color_feature:{launchDateMs:17537472e5,expiryDateMs:17563392e5},web_clipper_new_tab_settings:{launchDateMs:17471808e5,expiryDateMs:18149184e5},my_meetings:{launchDateMs:17578944e5,expiryDateMs:17657568e5},workspace_connections_tab:{launchDateMs:17578944e5,expiryDateMs:18149184e5},external_agents_tab:{launchDateMs:17578944e5,expiryDateMs:18149184e5},permissions_tab:{launchDateMs:17578944e5,expiryDateMs:18149184e5}};function u({style:e}){const t=(0,a().IS)((()=>({badge:{letterSpacing:0,whiteSpace:"nowrap",width:"fit-content",...e}})),[e]);return(0,d.jsx)(s().E,{color:"blue",style:t.badge,content:(0,d.jsx)(l().sA,{id:"newBadgeComponent.label",defaultMessage:"New"})})}function p(e){return(0,i().K8)((()=>{const{launchDateMs:t,expiryDateMs:n}=c[e],{currentUserSettingsStore:r}=o().default.state;if(r&&r.isReady()){var i;const e=null===(i=r.getSettings())||void 0===i?void 0:i.signup_time;if(e&&e>t)return!1}return Date.now()<=n}),[e])}function f({style:e,newBadgeKey:t}){return p(t)?(0,d.jsx)(u,{style:e}):null}function m({style:e,newBadgeKey:t}){return(0,r().X)(t)?(0,d.jsx)(u,{style:e}):null}function g(e){return e.didUserEngage?null:"feature_gate"===e.keyType?(0,d.jsx)(m,{...e}):(0,d.jsx)(f,{...e})}},151241:(e,t,n)=>{n.d(t,{Q:()=>d});var o=()=>n(590526),r=()=>n(744947),i=()=>n(145820),a=()=>n(615234),s=()=>n(534177);const l=(0,n(69708).YK)({processingRequest:{id:"AgentWorkflowStatus.processingRequest",defaultMessage:"Processing..."},workflowPaused:{id:"AgentWorkflowStatus.workflowPaused",defaultMessage:"Workflow paused"},pausedWithReason:{id:"AgentWorkflowStatus.pausedWithReason",defaultMessage:"Paused: {reason}"},workflowSkipped:{id:"AgentWorkflowStatus.workflowSkipped",defaultMessage:"Workflow was skipped"},insufficientPermissions:{id:"AgentWorkflowStatus.workflowInsufficientPermissions",defaultMessage:"Workflow was blocked: insufficient permissions"}});function d(e,t){const n=(0,o().K8)((()=>{var n;const o=e.getFormatStore();return null==o||null===(n=o.getKeyStore("agent_workflow_status").getValue())||void 0===n?void 0:n[t]}),[e,t],{useDeepEqual:!0}),d=(0,o().K8)((()=>{if("workflowRunCreated"===(null==n?void 0:n.type)){const t=e.getSpaceId();if(t)return r().t.createChildStore(e,{table:i().QR,id:n.runPointer.id,spaceId:t})}}),[n,e]),c=(0,o().K8)((()=>{if(d)return d.getStatus()}),[d]),u=(0,o().K8)((()=>{if(d)return d.getData()}),[d]);return{status:(0,o().K8)((()=>{var e,t,o,r;if(!n)return{type:"idle"};if("creatingTask"===n.type)return n.createdAtMs<Date.now()-5*a().Xb?{type:"idle"}:{type:"creatingTask"};if("processingInitiated"===n.type)return n.enqueuedAtMs<Date.now()-2*a().pT?{type:"idle"}:{type:"queued",enqueuedAtMs:n.enqueuedAtMs};if("workflowRunCreated"===n.type){if(!c)return{type:"idle"};switch(c){case"pending":return{type:"starting"};case"running":case"retryableFailure":return{type:"processing",message:{descriptor:l.processingRequest}};case"paused":return{type:"paused",reason:null==u?void 0:u.paused_reason,message:null!=u&&u.paused_reason?{descriptor:l.pausedWithReason,values:{reason:u.paused_reason}}:{descriptor:l.workflowPaused}};case"success":case"cancelled":return{type:"completed"};case"failure":return{type:"failed",error:(null==u||null===(e=u.error)||void 0===e?void 0:e.message)??void 0,isDismissed:Boolean(null==d||null===(t=d.getUserActionsStore().getValue())||void 0===t?void 0:t.failureNotificationDismissedTime)};case"skipped":return{type:"failed",error:{descriptor:l.workflowSkipped},isDismissed:Boolean(null==d||null===(o=d.getUserActionsStore().getValue())||void 0===o?void 0:o.failureNotificationDismissedTime)};case"insufficientPermissions":return{type:"failed",error:{descriptor:l.insufficientPermissions},isDismissed:Boolean(null==d||null===(r=d.getUserActionsStore().getValue())||void 0===r?void 0:r.failureNotificationDismissedTime)};default:return(0,s().HB)(c)}}return(0,s().HB)(n)}),[d,n,c,u]),runStore:d}}},158115:(e,t,n)=>{n.r(t),n.d(t,{arrowChevronSingleRightFillSmallIcon:()=>r,iconDefinition:()=>o});n(296540);const o={viewBox:"0 0 16 16",fittedViewBox:"5.54 2.94 5.81 10.11",directional:!0,svg:(0,n(474848).jsx)("path",{d:"M11.13 8.53a.75.75 0 0 0 0-1.06L6.81 3.15a.75.75 0 0 0-1.06 1.06L9.54 8l-3.79 3.79a.75.75 0 0 0 1.06 1.06z"})},r=(0,n(340498).wt)("arrowChevronSingleRightFillSmall",o,"fillSmall")},186348:(e,t,n)=>{n.d(t,{h:()=>u});n(898992),n(672577);var o=()=>n(590526),r=()=>n(401497),i=()=>n(785285),a=()=>n(898244),s=()=>n(713998),l=()=>n(254947),d=()=>n(100622),c=()=>n(534177);function u({conditionalColor:e,store:t,schema:n,viewType:d}){const c=(0,o().K8)((()=>{if(t&&null!=e&&e.background&&(0,i().IY)(e.background))return t.getPropertyValue(e.conditional_filter.property)}),[t,e]),u=(0,r().DP)();return(0,r().IS)((()=>{if(null==e||!e.background)return{conditionalColorStyles:{background:void 0}};let t;var o;(0,i().IY)(e.background)?t=function(e){const{propertyValue:t,propertyId:n,schema:o}=e;if(!o)return;const r=o[n];if(!r)return;if(a().DD(r)){const e=s().RZ(t,r);if(!e)return;const n=s().FE(r.options??[],e);if(n)return f(n);const o=r.options??[],i=r.groups??[],a=o.find((t=>t.value===e)),d=a&&i.find((e=>{var t;return null===(t=e.optionIds)||void 0===t?void 0:t.includes(a.id)}));if(d){const e=d.color??l().ml[d.name];return e?f(e):void 0}return}if(a().P8(r)){const e=s().L3(t,r.options??[]);if(!e)return;const n=s().FE(r.options??[],e);return n?f(n):void 0}if(a().Ou(r)){const e=s().o2(t,r.options??[]);if(!e||0===e.length)return;const n=e[0];if(!n)return;const o=s().FE(r.options??[],n);return o?f(o):void 0}return}({propertyValue:c,propertyId:e.conditional_filter.property,schema:n}):t=null==e||null===(o=e.background)||void 0===o?void 0:o.color;return{conditionalColorStyles:p({blockBackgroundColor:t,theme:u,viewType:d})}}),[e,c,n,d,u]).conditionalColorStyles}function p({blockBackgroundColor:e,theme:t,viewType:n}){if("map"===n&&e){var o;const n=d().Ld[e];if(n&&n in t&&null!==(o=t[n])&&void 0!==o&&null!==(o=o.icon)&&void 0!==o&&o.accentPrimary)return{background:t[n].icon.accentPrimary}}return{background:e?(0,d().k5)(e,t).background:void 0}}function f(e){switch(e){case"default":return"default_background";case"gray":return"gray_background";case"brown":return"brown_background";case"orange":return"orange_background";case"yellow":return"yellow_background";case"green":return"teal_background";case"blue":return"blue_background";case"purple":return"purple_background";case"pink":return"pink_background";case"red":return"red_background";default:(0,c().HB)(e)}}},200424:(e,t,n)=>{e.exports=n.p+"9ade71d75a1c0e93.png"},243331:(e,t,n)=>{n.d(t,{K_:()=>r,Lf:()=>a});var o=()=>n(206267);function r(){return{currentScreen:"none",status:"not_started",isBackendConnected:!1,externalSourceName:void 0,sessionId:o().JW(),analyticsFrom:"unknown",isConnected:!1,isPersonalAuthComplete:!1,isDisconnecting:!1,isLoaded:!1,isNotionMailProhibited:!1}}class i extends(()=>n(757695))().Store{getInitialState(){return r()}}const a=new i;(0,n(852832).exposeDebugValue)("notionMailAIConnectorStore",a)},246679:(e,t,n)=>{n.d(t,{VK:()=>r,gv:()=>a});var o=()=>n(206267);function r(){return{currentScreen:"none",status:"not_started",isBackendConnected:!1,externalSourceName:void 0,sessionId:o().JW(),analyticsFrom:"unknown",isConnected:!1,isPersonalAuthComplete:!1,isDisconnecting:!1,isLoaded:!1,isNotionCalendarProhibited:!1}}class i extends(()=>n(757695))().Store{getInitialState(){return r()}}const a=new i;(0,n(852832).exposeDebugValue)("notionCalendarAIConnectorStore",a)},253447:(e,t,n)=>{n.d(t,{F:()=>r});var o=()=>n(963575);function r(e,t){if(e)return e;switch(t){case"large":return o().A.card.desktop.large.height;case"small":return o().A.card.desktop.small.height;default:return o().A.card.desktop.medium.height}}},271232:(e,t,n)=>{n.d(t,{t:()=>i});var o=n(296540),r=n(474848);const i=o.memo((function(e){const{coverHeight:t,coverSizeFormat:o,emptyGalleryCoverStyle:i}=e,a=(0,n(401497).IS)((()=>({container:{height:(0,n(253447).F)(t,o),...i}})),[t,o,i]);return(0,r.jsx)("div",{style:a.container})}))},278589:(e,t,n)=>{n.d(t,{N:()=>i});var o=()=>n(534177),r=()=>n(17680);function i(e){return"avatar"===e?r().eQ:"xsmall"===e?18:"xsmall_plus"===e?24:"small"===e?28:"small_plus"===e?32:"medium"===e?36:"medium_plus"===e?44:"medium_large"===e?48:"large"===e?50:"large_plus"===e?64:"xlarge"===e?94:"plans"===e?20:"deep_dive"===e?16:"upsell_banner"===e?74:"personalization_modal"===e?96:(0,o().HB)(e)}},299177:(e,t,n)=>{n.d(t,{A:()=>i});class o extends(()=>n(757695))().Store{getInitialState(){return{}}}const r=new o;n(852832).exposeDebugValue("SpaceWorkflowTemplateInstanceMapStore",r);const i=r},301948:(e,t,n)=>{n.d(t,{A:()=>a});n(296540);var o=()=>n(970236),r=()=>n(69708),i=n(474848);function a(e){return(0,i.jsx)(o().E,{color:"blue",style:e.style,content:(0,i.jsx)(r().sA,{id:"AlphaBadgeComponent.label",defaultMessage:"Alpha"})})}},320865:(e,t,n)=>{n.d(t,{A:()=>r});n(296540);var o=n(474848);const r=function(){return(0,o.jsx)(n(424400).Ay,{title:(0,o.jsx)(n(98126).k,{size:"default"}),titleStyle:{display:"flex",justifyContent:"center",alignItems:"center",width:"100%"}})}},344417:(e,t,n)=>{n.r(t),n.d(t,{iconDefinition:()=>o,magnifyingGlassSmallIcon:()=>r});n(296540);const o={viewBox:"0 0 16 16",fittedViewBox:"1.97 1.97 12.46 12.46",svg:(0,n(474848).jsx)("path",{d:"M7.1 1.975a5.125 5.125 0 1 0 3.155 9.164l3.107 3.107a.625.625 0 1 0 .884-.884l-3.107-3.107A5.125 5.125 0 0 0 7.1 1.975M3.225 7.1a3.875 3.875 0 1 1 7.75 0 3.875 3.875 0 0 1-7.75 0"})},r=(0,n(340498).wt)("magnifyingGlassSmall",o,"small")},358006:(e,t,n)=>{n.d(t,{z:()=>a});n(296540);var o=()=>n(79926),r=n(474848);const i=new(o().O2)("CollectionItemCover",(async()=>{const{CollectionItemCover:e}=await n.e(79883).then(n.bind(n,873718));return{CollectionItemCover:e}})),a=(0,o()._h)(i,(e=>e.CollectionItemCover),{renderLoading:(e,t)=>{const{coverHeight:o,coverSizeFormat:i,emptyGalleryCoverStyle:a,showEmptyGalleryCover:s}=t;return s?(0,r.jsx)(n(271232).t,{coverHeight:o,coverSizeFormat:i,emptyGalleryCoverStyle:a}):null}})},375555:(e,t,n)=>{function o(e,t){const{device:n}=e;n.isAndroid&&t.focus(),t.select()}n.d(t,{G:()=>o})},419357:(e,t,n)=>{n.d(t,{Ay:()=>b,KF:()=>w,LG:()=>h,Zf:()=>y,yD:()=>v});var o=n(296540),r=()=>n(484714),i=()=>n(401497),a=()=>n(718827),s=()=>n(695115),l=()=>n(31511),d=()=>n(546926),c=()=>n(424400),u=()=>n(340498),p=()=>n(100622),f=()=>n(496603),m=()=>n(284371),g=n(474848);const h=30,v=28;function y(e){const{icon:t}=e;return t({fill:p().Tj.icon.secondary,width:u().Ev.sm,height:u().Ev.sm,flexGrow:0,flexShrink:0})}function w(e){const t=(0,r().WS)(),n=(0,i().eP)(),o=(0,i().IS)((()=>({outlineButton:{...(0,a().qq)({shape:"default",size:"sm",hasIconOnly:!0,isButtonGapEnabled:!0}),fontWeight:m().Wy.medium,lineHeight:1.2,border:`1px solid ${p().Tj.border.primaryTranslucent}`,background:e.hasBackground?p().Tj.background.primary:void 0},outlineButtonHovered:{background:p().Tj.background.secondary},outlineButtonPressed:{background:(0,a().yZ)({color:p().Tj.background.primary,mode:n})}})),[e.hasBackground,n]);return(0,g.jsx)(s().A,{size:"xs",colorVariant:"primary",...e,ariaLabel:e.ariaLabel,style:{...o.outlineButton,...e.style,height:t?h:v,width:t?h:v},hoveredStyle:o.outlineButtonHovered,pressedStyle:o.outlineButtonPressed})}const b=o.forwardRef((function({preventCaptureArrowShortcuts:e,preventCaptureDeleteWhenEmpty:t,preventCaptureClipboardShortcuts:r,preventCaptureSpacebarWhenEmpty:i,...a},s){const{left:l,right:u,inputLeft:p,inputRight:m,inputRightStyle:h,disableInput:v,inputOuterStyle:y,rightMobileEditLabel:w,mobileKeyboardOnDismiss:b,style:M,value:I,onChange:k,autosize:_,autosizeMinHeight:C,autosizeMaxHeight:D,customElementAttributes:j,disabled:T,format:A,id:R,placeholder:E,type:B,autoFocus:Y,focus:L,focusInitial:F,focusAfterAnimation:V,forceShowClearButton:P,ignoreKeyboardMode:O,inputElementAttributes:U,inputStyle:N,isRightLastElementOfInput:H,maxlength:z,min:W,max:K,selectAll:q,showClearButton:$,suppressFocusRing:G,textarea:X,textareaSubmitOnEnter:Q,onBlur:Z,onCancel:J,onClearButtonClick:ee,onClick:te,onFocus:ne,onKeyDown:oe,onSubmit:re,...ie}=a,[ae,se]=(0,o.useState)((()=>Boolean(L||F)));(0,o.useEffect)((()=>{void 0!==L&&se(L)}),[L]);const le=e?void 0:f().D_,de=!t||I.length>0?f().D_:void 0,ce=r?void 0:f().D_,ue=!i||I.length>0?f().D_:void 0,pe=(0,d().Tf)(),fe=(0,o.useContext)(d().xu),me=(0,o.useRef)(null),ge={value:I,onChange:k,autosize:_,autosizeMinHeight:C,autosizeMaxHeight:D,customElementAttributes:j,disabled:T,format:A,id:R,placeholder:E,type:B,autoFocus:Y,focus:L,focusInitial:F,focusAfterAnimation:V,forceShowClearButton:P,ignoreKeyboardMode:O,inputElementAttributes:U,inputStyle:N,isRightLastElementOfInput:H,maxlength:z,min:W,max:K,selectAll:q,showClearButton:$,suppressFocusRing:G,textarea:X,textareaSubmitOnEnter:Q,onBlur:Z,onCancel:J,onClearButtonClick:ee,onClick:te,onFocus:ne,onKeyDown:oe,onSubmit:re};return(0,g.jsx)(n(782482).N,{debugName:"InputMenuItem",capture:!0,onUntab:f().D_,onTab:f().D_,onSelectAll:f().D_,onRedo:f().D_,onUndo:f().D_,onToggleBold:f().D_,onToggleItalics:f().D_,onToggleCode:f().D_,onCut:ce,onCopy:ce,onPaste:ce,onKeypress:f().D_,onLeft:le,onRight:le,onDelete:de,onBackspace:de,onSpace:ue,children:n(726637).A.isMobile?(0,g.jsxs)(g.Fragment,{children:[(0,g.jsx)(c().Ay,{ref:s,...ie,itemMarginLeft:pe?8:void 0,style:M,title:(0,g.jsx)(x,{ref:me,left:l,right:u,inputLeft:p,inputRight:m,inputRightStyle:h,disableInput:v,inputOuterStyle:y,rightMobileEditLabel:w,isFocused:ae,setIsFocused:se,...ge})}),(0,g.jsx)(n(797324).A,{show:ae&&fe.menuType!==d().gu.ActionSheet,onDismiss:b,inputRef:me})]}):(0,g.jsx)(c().Ay,{ref:s,...ie,left:l,right:u,isTokenTitle:!0,title:(0,g.jsx)(S,{ref:me,disableInput:v,inputOuterStyle:y,inputRight:m,inputRightStyle:h,inputLeft:p,...ge}),style:{paddingTop:4,paddingBottom:4,...M}})})}));function M({rightMobileEditLabel:e,inputRef:t}){const i=(0,r().v3)(),s=(0,o.useCallback)((e=>{e.preventDefault();const o=t.current;o&&(0,n(375555).G)(i,o)}),[i,t]);return(0,g.jsx)(a().Ay,{onClick:s,style:{color:p().Tj.text.secondary},children:e})}const S=o.forwardRef((function(e,t){const{disabled:n,disableInput:o,inputOuterStyle:r,inputRight:i,inputRightStyle:a,inputLeft:s,min:d,textarea:c,...u}=e;return(0,g.jsx)(l().A,{...u,ref:t,disabled:n||o,style:{height:c?void 0:28,padding:"3px 6px",...r},left:s,right:i,rightStyle:a,min:d,textarea:c})})),x=o.forwardRef((function(e,t){const{left:r,right:i,inputLeft:a,inputRight:s,inputRightStyle:d,disableInput:c,inputOuterStyle:u,rightMobileEditLabel:p,isFocused:f,setIsFocused:m,disabled:h,showClearButton:v,onBlur:y,onFocus:w,...b}=e,S=(0,o.useCallback)((e=>{m(!1),y&&y(e)}),[y,m]),x=(0,o.useCallback)((e=>{m(!0),w&&w(e)}),[w,m]),I=(0,o.useRef)(null),k=(0,n(93583).A)(I,t),_=p&&!f?(0,g.jsx)(M,{rightMobileEditLabel:p,inputRef:I}):null;return(0,g.jsx)(l().A,{...b,ref:k,format:"transparent",style:{fontSize:16,...u},onFocus:x,onBlur:S,showClearButton:!1!==v,disabled:h||c,left:a||r,right:_||s||i,rightStyle:d})}))},435386:(e,t,n)=>{n.d(t,{w:()=>r});var o=()=>n(651784);function r({url:e,config:t}){const n=(0,o().parseRoute)({url:e,baseUrl:t.domainBaseUrl,publicDomainName:t.publicDomainName,isMobile:!1,protocol:t.protocol,currentUrl:void 0});return"page"===n.name?n.blockId:"team"===n.name?n.peekViewBlockId:void 0}},443191:(e,t,n)=>{n.d(t,{J:()=>r});n(296540);const o={viewBox:"0 0 20 20",fittedViewBox:"2.37 2.39 15.26 15.21",svg:(0,n(474848).jsx)("path",{d:"m10.775 2.583 2.475 2.475a.625.625 0 0 1 0 .884l-2.475 2.475a.625.625 0 1 1-.884-.884l1.408-1.408H4.8c-.649 0-1.175.526-1.175 1.175v5.975a.625.625 0 1 1-1.25 0V7.3A2.425 2.425 0 0 1 4.8 4.875h6.499L9.891 3.467a.625.625 0 0 1 .884-.884M17 6.1c.345 0 .625.28.625.625V12.7a2.425 2.425 0 0 1-2.425 2.425H8.7l1.408 1.408a.625.625 0 1 1-.884.884L6.75 14.942a.625.625 0 0 1 0-.884l2.475-2.475a.625.625 0 1 1 .884.884l-1.408 1.408H15.2c.649 0 1.175-.526 1.175-1.175V6.725c0-.345.28-.625.625-.625"})},r=(0,n(340498).wt)("arrowSquareLeftRight",o,"default")},445560:(e,t,n)=>{n.d(t,{X:()=>o});const o=n(757695).Store.createValue({shouldReset:!1},{name:"MobileAssistantMenuStore"})},460957:(e,t,n)=>{n.d(t,{E:()=>a});n(581454);var o=()=>n(201980),r=()=>n(718957),i=()=>n(29554);function a(e){const{multiSelection:t}=e;return(0,r().$W)(t).map((({store:e,selection:t})=>{const n=(0,o().RQ)(e.getValue()),r=(0,o().xbM)(n,t),{tokensInsideRange:a}=(0,o().AI5)(n,r.startIndex,r.endIndex);return(0,i().r4)(a,e)})).join("\n\n")}},526278:(e,t,n)=>{n.r(t),n.d(t,{arrowStraightLeftIcon:()=>r,iconDefinition:()=>o});n(296540);const o={viewBox:"0 0 20 20",fittedViewBox:"2.37 3.97 15.26 12.06",directional:!0,svg:(0,n(474848).jsx)("path",{d:"M2.411 9.79a.6.6 0 0 1 .147-.232l5.4-5.4a.625.625 0 1 1 .884.884L4.509 9.375H17a.625.625 0 1 1 0 1.25H4.509l4.333 4.333a.625.625 0 1 1-.884.884l-5.4-5.4a.62.62 0 0 1-.147-.651"})},r=(0,n(340498).wt)("arrowStraightLeft",o,"default")},556122:(e,t,n)=>{n.d(t,{QJ:()=>f,TI:()=>d});n(944114),n(581454);var o=()=>n(726637),r=()=>n(763824);let i=0;const a="clipboard",s={debug:Boolean(o().A.isDevelopingInAirplaneMode),responseText:a,showErrorCode:!1,delayBetweenChunks:20,chunkSize:5,numLoremIpsums:3},l="Lorem ipsum dolor sit amet, consectetur adipiscing elit. Donec porta auctor sem vel efficitur. Vivamus efficitur eros sed erat efficitur efficitur. Vivamus et augue vel est efficitur efficitur.";function d(){return s}function c(e){return{async*[Symbol.asyncIterator](){for(const t of e)await(0,r().wR)(s.delayBetweenChunks),yield t}}}function u(e,t){const n=Math.ceil(e.length/t),o=new Array(n);for(let r=0,i=0;r<n;++r,i+=t)o[r]=e.substr(i,t);return o}function p(e){return e.map((e=>({type:"success",p:"padding",completion:e,inferenceId:"mock"})))}async function f({environment:e,data:t}){console.log("Retrieving fake completion for data",t);const{context:n}=t,r=n.selectedText,d=[];let{responseText:f}=s;if(f===a&&(f=await async function(){try{return await navigator.clipboard.readText()}catch(e){return}}()??"Unable to retrieve clipboard text."),void 0===f&&(d.push({type:"success",p:"padding",completion:"\n",inferenceId:"mock"},{type:"success",p:"padding",completion:"this is ",inferenceId:"mock"},{type:"success",p:"padding",completion:"fake ",inferenceId:"mock"},{type:"success",p:"padding",completion:`streaming response ${i++}.`,inferenceId:"mock"}),o().A.isDevelopingInAirplaneMode&&d.push({type:"success",p:"padding",completion:"\n\nTo see a real AI response, run the server with `--airplaneMode=false`.",inferenceId:"mock"}),"string"==typeof r)){d.push({type:"success",p:"padding",completion:"\n\nHere is the text you selected:\n\n",inferenceId:"mock"});for(const e of u(r,s.chunkSize))d.push({type:"success",completion:e,p:"padding",inferenceId:"mock"})}if(s.showErrorCode)d.push({type:"error",message:"alas",errorCode:s.showErrorCode,isRetryable:!1});else if(void 0===f)for(let o=0;o<s.numLoremIpsums;o++)d.push(...p([`\n\n${o+1}. `,...u(l,0===s.delayBetweenChunks?l.length:s.chunkSize)]));else if(f.length>0){const e=u(f,s.chunkSize);d.push(...p(e))}return Promise.resolve({type:"success",data:c(d),status:200,headers:{}})}(0,n(852832).exposeDebugValue)("completionDebugSettings",s)},563692:(e,t,n)=>{n.r(t),n.d(t,{iconDefinition:()=>o,xMarkFillSmallIcon:()=>r});n(296540);const o={viewBox:"0 0 16 16",fittedViewBox:"3.03 3.03 9.94 9.94",svg:(0,n(474848).jsx)("path",{d:"M12.73 4.33a.75.75 0 1 0-1.06-1.06L8 6.94 4.33 3.27a.75.75 0 1 0-1.06 1.06L6.94 8l-3.67 3.67a.75.75 0 1 0 1.06 1.06L8 9.06l3.67 3.67a.75.75 0 0 0 1.06-1.06L9.06 8z"})},r=(0,n(340498).wt)("xMarkFillSmall",o,"fillSmall")},607567:(e,t,n)=>{n.d(t,{Z:()=>i});n(296540);var o=n(474848);const r={viewBox:"0 0 20 20",fittedViewBox:"2.37 4.12 16.74 14.99",svg:(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)("path",{d:"M4.5 4.125A2.125 2.125 0 0 0 2.375 6.25v7.5c0 1.174.951 2.125 2.125 2.125h5.702a4.7 4.7 0 0 1-.2-1.25H4.5a.875.875 0 0 1-.875-.875V7.5h12.75v2.535a4.7 4.7 0 0 1 1.25.684V6.25A2.125 2.125 0 0 0 15.5 4.125zm.758 1.684a.625.625 0 1 1-1.25 0 .625.625 0 0 1 1.25 0m1.375-.625a.625.625 0 1 1 0 1.25.625.625 0 0 1 0-1.25m2.625.625a.625.625 0 1 1-1.25 0 .625.625 0 0 1 1.25 0"}),(0,o.jsx)("path",{d:"M17.7 16.607a3.625 3.625 0 1 0-.893.878l1.223 1.427a.625.625 0 0 0 .94-.823zM12.375 14.5a2.375 2.375 0 1 1 4.75 0 2.375 2.375 0 0 1-4.75 0"})]})},i=(0,n(340498).wt)("browserMagnifyingGlass",r,"default")},612900:(e,t,n)=>{n.d(t,{u:()=>i});var o=()=>n(79926);const r=new(o().O2)("PulsingWrapper",(async()=>n.e(45248).then(n.bind(n,673962)))),i=(0,o().jQ)(r,(e=>e.PulsingWrapper),{renderLoading:(e,t)=>t.children})},619553:(e,t,n)=>{n.d(t,{B:()=>a});var o=()=>n(459621),r=()=>n(59145),i=()=>n(441748);function a({openInNew:e,url:t,makeTabActive:n,position:a,isNewPage:s,environment:l}){"tab"===e&&n?(0,r().x)(l,{url:t,position:a,makeTabActive:n,isNewPage:s}):"tab"!==e||n?"window"===e&&(0,i().E)(t):(0,o().x)(l,{url:t,position:a})}},662971:(e,t,n)=>{n.d(t,{A:()=>f});var o=n(296540),r=()=>n(30537);const i=function(){const[e,t]=o.useState({x:0,y:0});return o.useEffect((()=>{const e=e=>{t({x:e.clientX,y:e.clientY})};return window.addEventListener("mousemove",e),()=>{window.removeEventListener("mousemove",e)}}),[]),e};var a=n(474848);function s({x:e,mouseX:t}){return t>e?void 0:-Math.max(e-t,10)+"px"}function l({x:e,width:t,mouseX:n}){return n>e?-Math.max(n-(e+t),10)+"px":void 0}function d({x:e,width:t,mouseX:n}){return n>e?`${Math.max(n-(e+t),10)}px`:`${Math.max(e-n,10)}px`}function c({x:e,y:t,height:n,mouseX:o,mouseY:r}){return o>e?`polygon(0% 0%, 0% 100%, 100% ${100*(r-t)/n}%)`:`polygon(100% 0%, 0% ${100*(r-t)/n}%, 100% 100%)`}function u(e){const{x:t=0,y:n=0,height:r=0,width:u=0}=e.el.getBoundingClientRect()||{},{x:p,y:f}=i(),m={x:t,y:n,height:r,width:u,mouseX:p,mouseY:f},g=(0,o.useRef)(null),h=o.useCallback((e=>{if(g.current){g.current.style.pointerEvents="none";const t=document.elementFromPoint(e.clientX,e.clientY);if(g.current.style.pointerEvents="auto",t){const n=new MouseEvent(e.nativeEvent.type,e.nativeEvent);t.dispatchEvent(n)}}}),[]),v={insetInlineEnd:l(m),insetInlineStart:s(m),height:r,width:d(m),clipPath:c(m)};return(0,a.jsx)("div",{ref:g,onClick:h,style:{cursor:"pointer",position:"absolute",pointerEvents:"auto",top:0,...v}})}function p({onClick:e,renderOrigin:t,renderExtension:i,allowOptionalExtensionMenu:s,...l},d){const{disabled:c,disableDefaultClick:p,onFocus:f,focused:m,openOnFocus:g,placementToOrigin:h,alignmentToOrigin:v,disableCloseOnEnter:y,bottomSheetInitialState:w,popupTypeOverride:b}=l,M=(0,n(484714).WS)(),S=(0,n(546926).Tf)(),[x,I]=(0,o.useState)(!1),k=(0,o.useRef)(null),_=(0,o.useRef)(null),C=(0,o.useRef)(null),D=(0,o.useRef)(null),j=(0,o.useCallback)((()=>{C.current&&window.clearTimeout(C.current),D.current&&window.clearTimeout(D.current),C.current=null,D.current=null}),[]),T=(0,o.useCallback)((()=>{j(),c||I(!0)}),[c,j]),A=(0,o.useCallback)((()=>{j(),I(!1)}),[j]),R=(0,o.useCallback)((e=>{j(),x||(e&&e.preventDefault&&e.preventDefault(),C.current=window.setTimeout(T,120))}),[x,j,T]),E=(0,o.useCallback)((()=>{j(),x&&(D.current=window.setTimeout(A,100))}),[x,A,j]),B=(0,o.useCallback)((t=>{f(),T(),s&&(null==e||e(t),A())}),[f,T,s,e,A]),Y=(0,o.useCallback)((()=>{R()}),[R]),L=(0,o.useCallback)((()=>{f(),R()}),[f,R]),F=(0,o.useCallback)((e=>{if(n(726637).A.isMobile)return;const t=k.current;x&&t&&!t.contains(e.target)&&A()}),[x,A]),V=(0,o.useCallback)((e=>{13===e.keyCode&&x&&!y&&A()}),[x,A,y]);(0,o.useEffect)((()=>{if(!Boolean(p))return window.addEventListener("click",F),()=>{window.removeEventListener("click",F)}}),[p,F]),(0,o.useEffect)((()=>(window.addEventListener("keydown",V),()=>{window.removeEventListener("keydown",V)})),[V]);const P=(0,o.useRef)(m);(0,o.useEffect)((()=>{g&&!P.current&&m?R():!m&&P.current&&E(),P.current=m}),[m,g,R,E]);const O=(0,n(401497).IS)((()=>({mobilePopupStyle:{borderRadius:12,backgroundColor:n(100622).Tj.background.secondary}})),[]),U={...(0,n(383036).A)({onMouseEnter:Y,onClick:B},l),showExtensionArrow:!0};let N=r().n.Popup;return b?N=b:M&&(N=S?r().n.BottomSheet:r().n.SlideUp),(0,a.jsx)(n(782482).N,{debugName:"ExtensionMenuItem",capture:m,onEnter:x?void 0:R,onRight:R,onLeft:x?E:void 0,onEsc:x?E:void 0,children:(0,a.jsx)(n(127833).zD,{popupType:N,bottomSheetInitialState:w,open:x,origin:t(U,d),placementToOrigin:h??"right",alignmentToOrigin:v??"center",originGap:0,disableMouseCapture:!0,preventBlockRenderQueueOnEnter:!0,preventScaleTransition:!M,preventCaptureEsc:!0,ref:k,render:()=>(0,a.jsxs)(a.Fragment,{children:[!M&&_.current?(0,a.jsx)(u,{el:_.current}):null,(0,a.jsx)("div",{ref:_,style:{height:"100%"},children:i({onMouseEnter:L},{close:E})})]}),style:{overflow:"visible",...M&&O.mobilePopupStyle},trapFocus:!0,onDismiss:A})})}const f=o.forwardRef(p)},738508:(e,t,n)=>{n.r(t),n.d(t,{cursorIcon:()=>i,iconDefinition:()=>r});n(296540);var o=n(474848);const r={viewBox:"0 0 20 20",fittedViewBox:"1.25 0 17.5 20",svg:(0,o.jsxs)(o.Fragment,{children:[(0,o.jsxs)("g",{className:"logo-light-mode",children:[(0,o.jsxs)("g",{clipPath:"url(#clip0_16020_205)",children:[(0,o.jsx)("path",{fill:"#757575",d:"m9.995 9.987 8.658 4.999a.6.6 0 0 1-.226.226l-8.092 4.672a.68.68 0 0 1-.68 0l-8.092-4.672a.6.6 0 0 1-.226-.226z"}),(0,o.jsx)("path",{fill:"#525252",d:"M9.995 0v9.987l-8.658 4.999a.6.6 0 0 1-.082-.309v-9.38c0-.22.117-.424.308-.534L9.655.09a.7.7 0 0 1 .34-.09"}),(0,o.jsx)("path",{fill:"#404040",d:"M18.652 4.989a.6.6 0 0 0-.225-.226L10.334.09A.7.7 0 0 0 9.995 0v9.987l8.658 4.999a.6.6 0 0 0 .083-.309v-9.38c0-.11-.03-.216-.083-.308"}),(0,o.jsx)("path",{fill:"#D9D9D9",d:"M18.047 5.339a.29.29 0 0 1 0 .29l-7.859 13.61c-.053.093-.193.055-.193-.05v-8.97a.4.4 0 0 0-.054-.201z"}),(0,o.jsx)("path",{fill:"#fff",d:"m18.047 5.339-8.106 4.68a.4.4 0 0 0-.147-.147L2.027 5.387c-.092-.053-.054-.193.052-.193h15.717c.111 0 .202.06.25.145"})]}),(0,o.jsx)("defs",{children:(0,o.jsx)("clipPath",{id:"clip0_16020_205",children:(0,o.jsx)("path",{fill:"#fff",d:"M1.255 0h17.49v20H1.256z"})})})]}),(0,o.jsxs)("g",{className:"logo-dark-mode",children:[(0,o.jsxs)("g",{clipPath:"url(#clip0_16020_213)",children:[(0,o.jsx)("path",{fill:"#6E6E6E",d:"m9.995 9.987 8.658 4.999a.6.6 0 0 1-.226.226l-8.092 4.672a.68.68 0 0 1-.68 0l-8.092-4.672a.6.6 0 0 1-.226-.226z"}),(0,o.jsx)("path",{fill:"#4A4A4A",d:"M9.995 0v9.987l-8.658 4.999a.6.6 0 0 1-.082-.309v-9.38c0-.22.117-.424.308-.534L9.655.09a.7.7 0 0 1 .34-.09"}),(0,o.jsx)("path",{fill:"#383838",d:"M18.652 4.989a.6.6 0 0 0-.225-.226L10.334.09A.7.7 0 0 0 9.995 0v9.987l8.658 4.999a.6.6 0 0 0 .083-.309v-9.38c0-.11-.03-.216-.083-.308"}),(0,o.jsx)("path",{fill:"#C9C9C9",d:"M18.047 5.339a.29.29 0 0 1 0 .29l-7.859 13.61c-.053.093-.193.055-.193-.05v-8.97a.4.4 0 0 0-.054-.201z"}),(0,o.jsx)("path",{fill:"#fff",d:"m18.047 5.339-8.106 4.68a.4.4 0 0 0-.147-.147L2.027 5.387c-.092-.053-.054-.193.052-.193h15.717c.111 0 .202.06.25.145"})]}),(0,o.jsx)("defs",{children:(0,o.jsx)("clipPath",{id:"clip0_16020_213",children:(0,o.jsx)("path",{fill:"#fff",d:"M1.255 0h17.49v20H1.256z"})})})]})]})},i=(0,n(340498).wt)("cursor",r,"default")},740689:(e,t,n)=>{n.d(t,{o:()=>r});n(296540);const o={viewBox:"0 0 16 16",fittedViewBox:"1.77 1.79 12.45 12.42",svg:(0,n(474848).jsx)("path",{d:"M8.708 1.978a.625.625 0 0 0-.884.884l.914.913H3.84c-1.14 0-2.065.925-2.065 2.065v4.78a.625.625 0 0 0 1.25 0V5.84c0-.45.365-.815.815-.815h4.898l-.914.913a.625.625 0 0 0 .884.884l1.98-1.98a.625.625 0 0 0 0-.884zM13.6 4.755a.625.625 0 0 0-.625.625v4.78c0 .45-.365.815-.815.815H7.263l.913-.913a.625.625 0 0 0-.884-.884l-1.98 1.98a.625.625 0 0 0 0 .884l1.98 1.98a.625.625 0 1 0 .884-.884l-.913-.913h4.897c1.14 0 2.065-.924 2.065-2.065V5.38a.625.625 0 0 0-.625-.625"})},r=(0,n(340498).wt)("arrowSquareLeftRightSmall",o,"small")},748054:(e,t,n)=>{n.d(t,{M:()=>r});n(296540);const o={viewBox:"0 0 20 20",fittedViewBox:"3.97 2.68 12.51 14.37",svg:(0,n(474848).jsx)("path",{d:"M10.282 3.66a5.39 5.39 0 0 0-5.217-.54l-.711.305a.63.63 0 0 0-.38.575v12.425a.625.625 0 1 0 1.25 0v-3.913l.333-.142a4.14 4.14 0 0 1 4.008.414 5.39 5.39 0 0 0 5.504.405l1.06-.53a.63.63 0 0 0 .346-.56V4a.625.625 0 0 0-.905-.558l-1.06.53c-1.36.68-2.983.56-4.228-.312m-5.057 7.495V4.412l.332-.142a4.14 4.14 0 0 1 4.008.413 5.39 5.39 0 0 0 5.504.406l.156-.078v6.703l-.715.357c-1.36.68-2.983.56-4.228-.312a5.4 5.4 0 0 0-5.057-.604"})},r=(0,n(340498).wt)("flag",o,"default")},763765:(e,t,n)=>{n.d(t,{t:()=>r});class o extends(()=>n(757695))().Store{getInitialState(){return{loaded:!1}}USEWITHCAUTION_markStatsigUserFetched(e){const{userId:t,spaceId:n,fetched:o}=e;this.setState({loaded:o,userId:t,spaceId:n})}USEWITHCAUTION_isFetchedForSpaceAndUserId(e){const{spaceId:t,userId:n}=e;return this.state.loaded&&this.state.spaceId===t&&this.state.userId===n}}const r=new o;(0,n(852832).exposeDebugValue)("statsigUserLoadingStatusStore",r)},783793:(e,t,n)=>{n.d(t,{o:()=>d,x:()=>l});n(296540);var o=()=>n(401497),r=()=>n(100622),i=()=>n(278589),a=()=>n(200424),s=n(474848);function l(e){const{variant:t,imgSource:n,tintColor:a,faceStyle:l,shadowVariant:c="strong",style:u,...p}=e,f=(0,o().IS)((()=>{const e=(0,i().N)(t);return{faceImgWrap:{width:e,height:e,borderRadius:"100%",background:r().Tj.assistantCornerButtonBackground,..."strong"===c&&{boxShadow:e>=90?r().Tj.shadowMDThickerOutline:r().Tj.shadowMD},..."light"===c&&{borderRadius:"50%",boxShadow:e>=90?r().Tj.shadowSMThickerOutline:r().Tj.shadowSM},overflow:"hidden",...u}}}),[t,c,u]);return(0,s.jsx)("div",{...p,children:(0,s.jsx)("div",{style:f.faceImgWrap,children:(0,s.jsx)(d,{imgSource:n,variant:t,tintColor:a,style:l})})})}function d(e){const{imgSource:t,variant:n,tintColor:r,style:l,alt:d,...c}=e,u=(0,i().N)(n),p=t??a(),f=d??"Notion AI face",m=(0,o().IS)((()=>({faceImg:{height:u,width:u,transform:"scaleX(var(--direction, 1))",...l},tintedFace:{height:u,width:u,transform:"scaleX(var(--direction, 1))",backgroundColor:r,WebkitMaskImage:`url(${p})`,maskImage:`url(${p})`,WebkitMaskRepeat:"no-repeat",maskRepeat:"no-repeat",WebkitMaskPosition:"center",maskPosition:"center",WebkitMaskSize:"contain",maskSize:"contain",...l}})),[u,l,r,p]);return void 0!==r?(0,s.jsx)("div",{style:m.tintedFace,role:"img","aria-label":f}):(0,s.jsx)("img",{...c,style:m.faceImg,src:p,alt:f})}},791177:(e,t,n)=>{n.d(t,{$:()=>r});var o=n(296540);function r(){const[e,t]=(0,o.useState)({inputElementAttributes:void 0,suppressFocusRing:!1}),[n,r]=(0,o.useState)(!1),[i,a]=(0,o.useState)(!1);(0,o.useEffect)((()=>{if(n){function e(){a(!1)}function t(e){"ArrowDown"!==e.key&&"ArrowUp"!==e.key||a(!0)}return window.addEventListener("pointerdown",e),window.addEventListener("keydown",t),()=>{window.removeEventListener("pointerdown",e),window.removeEventListener("keydown",t)}}}),[n]);return[(0,o.useMemo)((()=>({inputElementAttributes:e.inputElementAttributes,suppressFocusRing:e.suppressFocusRing&&i,onFocus:()=>{r(!0)},onBlur:()=>{r(!1)}})),[e,i]),(0,o.useMemo)((()=>({setComboboxState:t,isFocusVisible:i,isComboboxFocused:n,onItemHover:()=>{a(!1)}})),[i,n])]}},797324:(e,t,n)=>{n.d(t,{A:()=>g});var o=n(296540),r=()=>n(560520),i=()=>n(484714),a=()=>n(790748),s=()=>n(581010),l=()=>n(69708),d=()=>n(100622),c=()=>n(284371),u=()=>n(396406),p=()=>n(718827),f=()=>n(843798),m=n(474848);function g(e){const{onDismiss:t,inputRef:n}=e,g=(0,i().Y0)(),h=(0,o.useRef)(null),v=g.isMobileNative&&g.isIOS,y=v&&e.show;(0,a().b)(s().A,(()=>({getNode:()=>h.current,isShown:()=>y})),[y]);const w=(0,r().n)(),b=(0,o.useCallback)((()=>{var e;null==n||null===(e=n.current)||void 0===e||e.focus(),t&&t();const o=document.activeElement;o instanceof HTMLElement&&o.blur()}),[n,t]);if(!v)return null;const M=y?-(f().j+w):0;return(0,m.jsx)(u().O,{open:!0,children:(0,m.jsx)("div",{style:{position:"fixed",top:"100vh",width:"100%",height:f().j,display:y?"flex":"none",alignItems:"center",justifyContent:"flex-end",backgroundColor:d().Tj.keyboardDoneBarBackground,transform:`translateY(${M}px)`,transition:y?"ease-out":"ease-in",boxShadow:y?`\n\t\t\t\t\t\t\t\t0 -1px 0 ${d().Tj.border.primaryTranslucent}\n\t\t\t\t\t\t\t`:void 0},ref:h,children:(0,m.jsx)(p().Ay,{style:{display:"flex",alignItems:"center",marginInlineEnd:16,color:d().oZ.blue,fontWeight:c().Wy.semibold},onTouchEnd:()=>{b()},children:(0,m.jsx)(l().sA,{defaultMessage:"Done",id:"mobile.dismissKeyboardBar.button.label"})})})})}},803960:(e,t,n)=>{n.r(t),n.d(t,{arrowChevronSingleDownIcon:()=>r,iconDefinition:()=>o});n(296540);const o={viewBox:"0 0 20 20",fittedViewBox:"3.97 6.97 12.06 6.66",svg:(0,n(474848).jsx)("path",{d:"M9.558 13.442c.244.244.64.244.884 0l5.4-5.4a.625.625 0 0 0-.884-.884L10 12.116 5.042 7.158a.625.625 0 1 0-.884.884z"})},r=(0,n(340498).wt)("arrowChevronSingleDown",o,"default")},839754:(e,t,n)=>{n.d(t,{Bi:()=>k,My:()=>I,ZM:()=>C,_M:()=>_,navigateToWorkflowTemplateOnboardingModal:()=>D});n(16280),n(944114),n(517642),n(658004),n(733853),n(845876),n(432475),n(515024),n(731698),n(898992),n(354520),n(672577),n(581454);var o=()=>n(907258),r=()=>n(295633),i=()=>n(584262),a=()=>n(663077),s=()=>n(179034),l=()=>n(201980),d=()=>n(896628),c=()=>n(384944),u=()=>n(730969),p=()=>n(840153),f=()=>n(339798),m=()=>n(180762),g=()=>n(799832),h=()=>n(111379),v=()=>n(535960),y=()=>n(31173),w=()=>n(295304),b=()=>n(244828),M=()=>n(373444),S=()=>n(165592),x=()=>n(204067);function I({transaction:e,collectionStore:t,propertyTemplates:n}){var o;const r=(null===(o=t.getParentBlockStore())||void 0===o?void 0:o.getCollectionViewStores().filter((e=>"table"===e.getType())))??[];if(0===r.length)return;const i=[];for(const l of n){const e=(0,x().S1)({collectionStore:t,templateId:l.templateId,instancePointerType:"property"});e&&i.push({property:e.id,visible:!(0,a().Sz)(l),...l.tablePropertyFormat})}if(0!==i.length)for(const a of r){var s;const t=(null===(s=a.getPropertyFormatsStore("table_properties"))||void 0===s?void 0:s.getValue())??[],n=new Set(t.map((e=>e.property))),o=i.filter((e=>!n.has(e.property)));0!==o.length&&d().zA({stores:[a],update:{table_properties:[...t,...o]},transaction:e})}}function k({transaction:e,collectionStore:t,propertyTemplates:n}){const o=[];for(const s of n){const e=(0,x().S1)({collectionStore:t,templateId:s.templateId,instancePointerType:"property"});e&&o.push({property:e.id,visible:!0})}const r=t.getFormat().collection_page_properties??[],i=new Set(r.map((e=>e.property))),a=o.filter((e=>!i.has(e.property)));a.length&&d().zA({stores:[t],update:{collection_page_properties:[...r,...a]},transaction:e})}function _({environment:e,newPageStore:t,result:n}){"accepted_template"!==n.type&&"accepted_empty_collection"!==n.type||b().createAndCommit({environment:e,canUndo:!1,perform:o=>{const i=t.getTitleValue();if(c().zv({store:t,transaction:o,data:{alive:!1}}),"accepted_empty_collection"===n.type&&!(0,l().w9s)(i)){const a=r().B.createChildStore(t,{table:"block",id:n.blockId}).getTitleStore();a&&w().yr({environment:e,transaction:o,tokens:i,index:0,store:a})}const a=t.getParentStore();if((null==a?void 0:a.table)===s().ev){const e=a.getContentIds();c().zv({store:a,transaction:o,data:{content:e.filter((e=>e!==t.id))}})}},userAction:"clean_up_empty_new_page"})}function C({environment:e,userAction:t,result:n,existingCollectionViewBlockStore:o,existingCollectionStore:r}){if("canceled"!==n.type){if("accepted_empty_collection"===n.type&&r){const o=r.getKeyStore("name"),i=(0,l().x9d)(n.newCollectionTitle);o&&b().createAndCommit({userAction:t,environment:e,canUndo:!0,perform:t=>w().R9({environment:e,store:o,transaction:t,value:i})})}if(o){var i;const e=null===(i=(0,g().U)(o))||void 0===i?void 0:i.settingsStore;e&&f().os({collectionSettingsStore:e})}if("accepted_template"===n.type&&null!=o&&o.isCollectionView()&&(null==o||!o.hasSingleSourceAndNoLinkedCollections())){const t=(0,g().U)(o),r=o.getCollectionViewStores().find((e=>{var t;return(null===(t=e.getCollectionStore())||void 0===t?void 0:t.id)===n.collectionId}));if(!t||!r)return;(0,m().t)({environment:e,collectionContextStore:t,collectionViewId:r.id,isFullScreen:t.isFullScreenStore.state,isRootChild:t.isRootChildStore.state,isInPeekRenderer:t.isInPeekRendererStore.state})}}}async function D({environment:e,collectionViewBlockStore:t}){const n=t.id;if(!t.isDefined()){const o=await(0,y().$)({environment:e,blockId:n});if(!o)return;e=await p().T({environment:e,newCurrentUserId:o}),t=new(r().B)(e,{table:s().ev,id:n}),await t.load()}const a=t.getSpaceId();if(!a)throw new Error("Space ID not found for collection block");const l=(0,h().k)(a);if(!l)throw new Error(`Space view not found for space ID: ${a}`);const{sidebarSpaceStore:d}=o().default.state;(null==d?void 0:d.id)!==a&&await(0,u().y)({environment:e,spaceViewStore:l});const c=t.getFormat();if("workflow_template_placeholder"===(null==c?void 0:c.collection_view_sub_type)&&null!=c&&c.placeholder_workflow_template_id&&t.isCollectionView()){const{getCollectionTemplateFromId:n}=await S().t.load(),o=n(c.placeholder_workflow_template_id);if(!o)throw new Error(`Collection template "${c.placeholder_workflow_template_id}" not found`);const{onNavigateToPlaceholderWorkflowTemplateBlock:r}=await M().O.load();r({environment:e,collectionTemplate:o,collectionViewBlockStore:t})}else(0,v().u)({environment:e,store:t,pageVisitSource:i().y8.WorkflowTemplatesDeeplink})}},846523:(e,t,n)=>{n.d(t,{u:()=>o});const o=(0,n(340498).xh)("questionMarkCircle",{default:{loader:()=>n.e(82106).then(n.bind(n,406533))},small:{loader:()=>n.e(82106).then(n.bind(n,721479))},fill:{loader:()=>n.e(82106).then(n.bind(n,299733))},fillSmall:{loader:()=>n.e(82106).then(n.bind(n,182060))}},["question","query","inquiry","uncertain","unknown","help","circle"])},864779:(e,t,n)=>{n.d(t,{Me:()=>s,Vv:()=>r,Z3:()=>i,wI:()=>a});var o=()=>n(906745);function r(e){if("week"===e.frequency&&e.weekdays&&1===e.weekdays.length)return{weekday:e.weekdays[0],duration:e.interval}}function i(e){const{currentSprintEndDate:t,sprintSchedule:n}=e;return l({startDate:c({dateToAdjust:o().DateTime.fromISO(t),weekday:n.weekday,wrapForEqualDays:!0}),duration:n.duration})}function a(e){const{userTimeZone:t,sprintSchedule:n}=e;return l({startDate:o().DateTime.local({zone:t}),duration:n.duration})}function s(e){const{currentSprintStartDate:t,sprintSchedule:n}=e,r=c({dateToAdjust:o().DateTime.fromISO(t),weekday:n.weekday,wrapForEqualDays:!1}),{end_date:i}=l({startDate:r,duration:n.duration});let a=o().DateTime.fromISO(i);const s=o().DateTime.now().startOf("day");for(;a.diff(s,"days").days<0;)a=a.plus({weeks:1});return{type:"daterange",start_date:a.plus({days:1}).minus({weeks:n.duration}).toISODate(),end_date:a.toISODate()}}function l(e){const{startDate:t,duration:n}=e,o=t.plus({weeks:n}).minus({days:1});return{type:"daterange",start_date:t.toISODate(),end_date:o.toISODate()}}const d={SU:0,MO:1,TU:2,WE:3,TH:4,FR:5,SA:6};function c(e){const{dateToAdjust:t,weekday:n,wrapForEqualDays:o}=e,r=function(e){const{currentWeekday:t,nextWeekday:n,wrapForEqualDays:o}=e,r="number"==typeof t?t:d[t],i="number"==typeof n?n:d[n];if(r===i)return o?7:0;let a=r,s=0;for(;a!==i;)a===d.SA?a=0:a+=1,s+=1;return s}({currentWeekday:t.weekday%7,nextWeekday:d[n],wrapForEqualDays:o});return t.plus({days:r})}},888325:(e,t,n)=>{function o(e){return`${e.table}:${e.id}`}n.d(t,{_:()=>o})},898009:(e,t,n)=>{n.d(t,{g:()=>p});var o=()=>n(59226),r=()=>n(484714),i=()=>n(590526),a=()=>n(79926),s=()=>n(89053),l=()=>n(908201),d=()=>n(842076),c=()=>n(862292),u=()=>n(186348);function p(e,t,n){const p=(0,l().Ks)(),f=(0,i().K8)((()=>null==p?void 0:p.getViewType()),[p]),m=(0,o().X)("collection_view_conditional_colors_property_level"),g=(0,r().v3)(),{value:h}=(0,a().fJ)(c().T.formulas),v=(0,i().K8)((()=>{var n,o;if(m&&e&&p)return null===(n=p.conditionalColorStore((0,s().i)()))||void 0===n||null===(n=n.state)||void 0===n?void 0:n.getPropertyConditionalColor({blockStore:e,propertyId:t,propertyMapping:null===(o=p.collectionStore())||void 0===o?void 0:o.getPropertyMapping(),formulasModule:h,getRelationEdgeList:(0,d().Y)({environment:g,spaceId:e.getSpaceId()})})}),[e,p,m,t,h,g]);return(0,u().h)({conditionalColor:v,store:e,schema:n,viewType:f})}},916275:(e,t,n)=>{n.d(t,{P:()=>i});n(16280),n(898992),n(354520),n(672577),n(737550);var o=()=>n(449412);class r extends(()=>n(62175))().U{isModelAvailable(e,t,n){const o=this.getData(e,{spaceId:t});return!!o&&o.some((e=>e.model===n))}isModelDisabled(e,t,n){const o=this.getData(e,{spaceId:t});if(!o)return!1;const r=o.find((e=>e.model===n));return(null==r?void 0:r.isDisabled)??!1}getModelsForMode(e,t,n){const o=this.getData(e,{spaceId:t});if(o)return o.filter((e=>"markdown-chat"===n?void 0!==e.markdownChat:void 0!==e.workflow))}}const i=new r(((e,{spaceId:t})=>`${e.currentUser.id}:${t}`),(async(e,{spaceId:t})=>{const r=e.currentUser.id;try{const i=await e.api.callCellCompatibleApi({eventName:"getAvailableModels",environment:e,cellNavigation:{spaceId:t},data:{spaceId:t}});if("failed"===i.type){const e=(0,n(247584).V4)(i);return void o().O8(new Error(`Failed to fetch available models: ${e}`),{from:"AvailableModelsStore.fetch",type:"api_failed_response",data:{spaceId:t,userId:r,errorMessage:e}})}return 0===i.data.models.length&&o().O8(new Error("Received empty model list from server"),{from:"AvailableModelsStore.fetch",type:"empty_response",data:{spaceId:t,userId:r}}),i.data.models}catch(i){return void o().O8(i,{from:"AvailableModelsStore.fetch",type:"error",data:{spaceId:t,userId:r}})}}),{dontCacheUndefined:!0});(0,n(852832).exposeDebugValue)("availableAiModelsStore",i)},922952:(e,t,n)=>{n.d(t,{u:()=>a});var o=()=>n(295633),r=()=>n(302996),i=()=>n(723085);function a(e){return e instanceof i().h||e instanceof r().SpaceStore||e instanceof o().B}},935432:(e,t,n)=>{n.d(t,{A:()=>a});var o=()=>n(416845),r=()=>n(357264),i=()=>n(788579);function a(e,t){if((0,o().pA8)(t)){const n=(0,i().$)(t.clientData);if(n)return"messageValues"in t.clientData?e.formatMessage(n,t.clientData.messageValues):e.formatMessage(n)}return e.formatMessage(r().k.generic_error)}},950914:(e,t,n)=>{n.d(t,{AL:()=>i,Q6:()=>s,vt:()=>a});n(898992),n(672577);var o=()=>n(433337),r=()=>n(254947);const i={autoCompleteSprints:!1,actionConfig:{complete_sprint_action:"complete_sprint_and_move_incomplete_tasks_to_next_sprint"},recurrenceConfig:{interval:2,weekdays:["MO"]}};function a(e){const{eventTracker:t,properties:n}=e;t.DO_NOT_USE_commonTrackEvent({eventName:"complete_sprint_action",properties:n})}function s(e,t){var n;return null===(n=t.groups)||void 0===n||null===(n=n.find((t=>t.id===o().nl||(null==t?void 0:t.name)===r().P0||(null==t?void 0:t.name)===e.formatMessage(r().oz.statusGroupNameComplete))))||void 0===n?void 0:n.name}},971404:(e,t,n)=>{n.d(t,{V:()=>i,X:()=>a});var o=()=>n(597777);const r={"de-DE":{time:{"12h":"LT","24h":"H:mm",hidden:o().jk},month:"MMMM YYYY"},"da-DK":{time:{"12h":"LT","24h":"H:mm",hidden:o().jk},month:"MMMM YYYY"},"fi-FI":{time:{"12h":"LT","24h":"H:mm",hidden:o().jk},month:"MMMM YYYY"},"nb-NO":{time:{"12h":"LT","24h":"H:mm",hidden:o().jk},month:"MMMM YYYY"},"nl-NL":{time:{"12h":"LT","24h":"H:mm",hidden:o().jk},month:"MMMM YYYY"},"sv-SE":{time:{"12h":"LT","24h":"H:mm",hidden:o().jk},month:"MMMM YYYY"},"en-US":{time:{"12h":"LT","24h":"H:mm",hidden:o().jk},month:"MMMM YYYY"},"es-ES":{time:{"12h":"LT","24h":"H:mm",hidden:o().jk},month:"MMMM YYYY"},"es-LA":{time:{"12h":"LT","24h":"H:mm",hidden:o().jk},month:"MMMM YYYY"},"fr-FR":{time:{"12h":"LT","24h":"H:mm",hidden:o().jk},month:"MMMM YYYY"},"pt-BR":{time:{"12h":"LT","24h":"H:mm",hidden:o().jk},month:"MMMM YYYY"},"ko-KR":{time:{"12h":"LT","24h":"H:mm",hidden:o().jk},month:"YYYY[ë…„] MMMM"},"zh-CN":{time:{"12h":"LT","24h":"H:mm",hidden:o().jk},month:"YYYY[å¹´]MMM"},"zh-TW":{time:{"12h":"LT","24h":"H:mm",hidden:o().jk},month:"YYYY[å¹´]MMM"},"ja-JP":{time:{"12h":"A h:mm","24h":"H:mm",hidden:o().jk},month:"YYYY[å¹´]MMM"},"vi-VN":{time:{"12h":"LT","24h":"H:mm",hidden:o().jk},month:"MMMM YYYY"},"th-TH":{time:{"12h":"LT","24h":"H:mm",hidden:o().jk},month:"MMMM YYYY"},"id-ID":{time:{"12h":"LT","24h":"H:mm",hidden:o().jk},month:"MMMM YYYY"},"en-GB":{time:{"12h":"LT","24h":"H:mm",hidden:o().jk},month:"MMMM YYYY"},"he-IL":{time:{"12h":"LT","24h":"H:mm",hidden:o().jk},month:"MMMM YYYY"},"ar-SA":{time:{"12h":"LT","24h":"H:mm",hidden:o().jk},month:"MMMM YYYY"},pseudo:{time:{"12h":"A h:mm","24h":"H:mm",hidden:o().jk},month:"MMMM YYYY"}},i=["de-DE","fr-FR","he-IL"];function a(e){return r[e]}}}]);