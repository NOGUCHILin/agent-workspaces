"use strict";(globalThis.webpackChunknotion_next=globalThis.webpackChunknotion_next||[]).push([[32626,48486,82690,92754,99171],{24126:(e,t,u)=>{u.d(t,{c:()=>r});u(296540);const o={viewBox:"0 0 20 20",fittedViewBox:"3.9 2.75 12.18 14.49",svg:(0,u(474848).jsx)("path",{d:"M12.626 2.768a.625.625 0 0 1 0 1.224l-.126.013h-.125v4.794l3.366 5.159c.893 1.369-.03 3.17-1.623 3.281l-.156.006H6.039c-1.688 0-2.703-1.873-1.78-3.287l3.366-5.157V4.005H7.5a.625.625 0 0 1 0-1.25h5zM8.875 9.173l-.102.156-1.567 2.401h5.589l-1.569-2.403-.101-.156V4.005h-2.25z"})},r=(0,u(340498).wt)("beaker",o,"default")},43371:e=>{e.exports=function(){return/\uD83C\uDFF4\uDB40\uDC67\uDB40\uDC62(?:\uDB40\uDC77\uDB40\uDC6C\uDB40\uDC73|\uDB40\uDC73\uDB40\uDC63\uDB40\uDC74|\uDB40\uDC65\uDB40\uDC6E\uDB40\uDC67)\uDB40\uDC7F|\uD83D\uDC69\u200D\uD83D\uDC69\u200D(?:\uD83D\uDC66\u200D\uD83D\uDC66|\uD83D\uDC67\u200D(?:\uD83D[\uDC66\uDC67]))|\uD83D\uDC68(?:\uD83C\uDFFF\u200D(?:\uD83E\uDD1D\u200D\uD83D\uDC68(?:\uD83C[\uDFFB-\uDFFE])|\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD])|\uD83C\uDFFE\u200D(?:\uD83E\uDD1D\u200D\uD83D\uDC68(?:\uD83C[\uDFFB-\uDFFD\uDFFF])|\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD])|\uD83C\uDFFD\u200D(?:\uD83E\uDD1D\u200D\uD83D\uDC68(?:\uD83C[\uDFFB\uDFFC\uDFFE\uDFFF])|\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD])|\uD83C\uDFFC\u200D(?:\uD83E\uDD1D\u200D\uD83D\uDC68(?:\uD83C[\uDFFB\uDFFD-\uDFFF])|\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD])|\uD83C\uDFFB\u200D(?:\uD83E\uDD1D\u200D\uD83D\uDC68(?:\uD83C[\uDFFC-\uDFFF])|\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD])|\u200D(?:\u2764\uFE0F\u200D(?:\uD83D\uDC8B\u200D)?\uD83D\uDC68|(?:\uD83D[\uDC68\uDC69])\u200D(?:\uD83D\uDC66\u200D\uD83D\uDC66|\uD83D\uDC67\u200D(?:\uD83D[\uDC66\uDC67]))|\uD83D\uDC66\u200D\uD83D\uDC66|\uD83D\uDC67\u200D(?:\uD83D[\uDC66\uDC67])|(?:\uD83D[\uDC68\uDC69])\u200D(?:\uD83D[\uDC66\uDC67])|[\u2695\u2696\u2708]\uFE0F|\uD83D[\uDC66\uDC67]|\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD])|(?:\uD83C\uDFFF\u200D[\u2695\u2696\u2708]|\uD83C\uDFFE\u200D[\u2695\u2696\u2708]|\uD83C\uDFFD\u200D[\u2695\u2696\u2708]|\uD83C\uDFFC\u200D[\u2695\u2696\u2708]|\uD83C\uDFFB\u200D[\u2695\u2696\u2708])\uFE0F|\uD83C[\uDFFB-\uDFFF])|\uD83E\uDDD1(?:(?:\uD83C[\uDFFB-\uDFFF])\u200D(?:\uD83E\uDD1D\u200D\uD83E\uDDD1(?:\uD83C[\uDFFB-\uDFFF])|\uD83C[\uDF3E\uDF73\uDF7C\uDF84\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD])|\u200D(?:\uD83E\uDD1D\u200D\uD83E\uDDD1|\uD83C[\uDF3E\uDF73\uDF7C\uDF84\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD]))|\uD83D\uDC69(?:\u200D(?:\u2764\uFE0F\u200D(?:\uD83D\uDC8B\u200D(?:\uD83D[\uDC68\uDC69])|\uD83D[\uDC68\uDC69])|\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD])|\uD83C\uDFFF\u200D(?:\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD])|\uD83C\uDFFE\u200D(?:\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD])|\uD83C\uDFFD\u200D(?:\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD])|\uD83C\uDFFC\u200D(?:\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD])|\uD83C\uDFFB\u200D(?:\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD]))|\uD83D\uDC69\uD83C\uDFFF\u200D\uD83E\uDD1D\u200D(?:\uD83D[\uDC68\uDC69])(?:\uD83C[\uDFFB-\uDFFE])|\uD83D\uDC69\uD83C\uDFFE\u200D\uD83E\uDD1D\u200D(?:\uD83D[\uDC68\uDC69])(?:\uD83C[\uDFFB-\uDFFD\uDFFF])|\uD83D\uDC69\uD83C\uDFFD\u200D\uD83E\uDD1D\u200D(?:\uD83D[\uDC68\uDC69])(?:\uD83C[\uDFFB\uDFFC\uDFFE\uDFFF])|\uD83D\uDC69\uD83C\uDFFC\u200D\uD83E\uDD1D\u200D(?:\uD83D[\uDC68\uDC69])(?:\uD83C[\uDFFB\uDFFD-\uDFFF])|\uD83D\uDC69\uD83C\uDFFB\u200D\uD83E\uDD1D\u200D(?:\uD83D[\uDC68\uDC69])(?:\uD83C[\uDFFC-\uDFFF])|\uD83D\uDC69\u200D\uD83D\uDC66\u200D\uD83D\uDC66|\uD83D\uDC69\u200D\uD83D\uDC69\u200D(?:\uD83D[\uDC66\uDC67])|(?:\uD83D\uDC41\uFE0F\u200D\uD83D\uDDE8|\uD83D\uDC69(?:\uD83C\uDFFF\u200D[\u2695\u2696\u2708]|\uD83C\uDFFE\u200D[\u2695\u2696\u2708]|\uD83C\uDFFD\u200D[\u2695\u2696\u2708]|\uD83C\uDFFC\u200D[\u2695\u2696\u2708]|\uD83C\uDFFB\u200D[\u2695\u2696\u2708]|\u200D[\u2695\u2696\u2708])|\uD83C\uDFF3\uFE0F\u200D\u26A7|\uD83E\uDDD1(?:(?:\uD83C[\uDFFB-\uDFFF])\u200D[\u2695\u2696\u2708]|\u200D[\u2695\u2696\u2708])|\uD83D\uDC3B\u200D\u2744|(?:\uD83C[\uDFC3\uDFC4\uDFCA]|\uD83D[\uDC6E\uDC70\uDC71\uDC73\uDC77\uDC81\uDC82\uDC86\uDC87\uDE45-\uDE47\uDE4B\uDE4D\uDE4E\uDEA3\uDEB4-\uDEB6]|\uD83E[\uDD26\uDD35\uDD37-\uDD39\uDD3D\uDD3E\uDDB8\uDDB9\uDDCD-\uDDCF\uDDD6-\uDDDD])(?:\uD83C[\uDFFB-\uDFFF])\u200D[\u2640\u2642]|(?:\u26F9|\uD83C[\uDFCB\uDFCC]|\uD83D\uDD75)(?:\uFE0F\u200D[\u2640\u2642]|(?:\uD83C[\uDFFB-\uDFFF])\u200D[\u2640\u2642])|\uD83C\uDFF4\u200D\u2620|(?:\uD83C[\uDFC3\uDFC4\uDFCA]|\uD83D[\uDC6E-\uDC71\uDC73\uDC77\uDC81\uDC82\uDC86\uDC87\uDE45-\uDE47\uDE4B\uDE4D\uDE4E\uDEA3\uDEB4-\uDEB6]|\uD83E[\uDD26\uDD35\uDD37-\uDD39\uDD3C-\uDD3E\uDDB8\uDDB9\uDDCD-\uDDCF\uDDD6-\uDDDF])\u200D[\u2640\u2642])\uFE0F|\uD83D\uDC69\u200D\uD83D\uDC67\u200D(?:\uD83D[\uDC66\uDC67])|\uD83C\uDFF3\uFE0F\u200D\uD83C\uDF08|\uD83D\uDC69\u200D\uD83D\uDC67|\uD83D\uDC69\u200D\uD83D\uDC66|\uD83D\uDC15\u200D\uD83E\uDDBA|\uD83C\uDDFD\uD83C\uDDF0|\uD83C\uDDF6\uD83C\uDDE6|\uD83C\uDDF4\uD83C\uDDF2|\uD83D\uDC08\u200D\u2B1B|\uD83E\uDDD1(?:\uD83C[\uDFFB-\uDFFF])|\uD83D\uDC69(?:\uD83C[\uDFFB-\uDFFF])|\uD83C\uDDFF(?:\uD83C[\uDDE6\uDDF2\uDDFC])|\uD83C\uDDFE(?:\uD83C[\uDDEA\uDDF9])|\uD83C\uDDFC(?:\uD83C[\uDDEB\uDDF8])|\uD83C\uDDFB(?:\uD83C[\uDDE6\uDDE8\uDDEA\uDDEC\uDDEE\uDDF3\uDDFA])|\uD83C\uDDFA(?:\uD83C[\uDDE6\uDDEC\uDDF2\uDDF3\uDDF8\uDDFE\uDDFF])|\uD83C\uDDF9(?:\uD83C[\uDDE6\uDDE8\uDDE9\uDDEB-\uDDED\uDDEF-\uDDF4\uDDF7\uDDF9\uDDFB\uDDFC\uDDFF])|\uD83C\uDDF8(?:\uD83C[\uDDE6-\uDDEA\uDDEC-\uDDF4\uDDF7-\uDDF9\uDDFB\uDDFD-\uDDFF])|\uD83C\uDDF7(?:\uD83C[\uDDEA\uDDF4\uDDF8\uDDFA\uDDFC])|\uD83C\uDDF5(?:\uD83C[\uDDE6\uDDEA-\uDDED\uDDF0-\uDDF3\uDDF7-\uDDF9\uDDFC\uDDFE])|\uD83C\uDDF3(?:\uD83C[\uDDE6\uDDE8\uDDEA-\uDDEC\uDDEE\uDDF1\uDDF4\uDDF5\uDDF7\uDDFA\uDDFF])|\uD83C\uDDF2(?:\uD83C[\uDDE6\uDDE8-\uDDED\uDDF0-\uDDFF])|\uD83C\uDDF1(?:\uD83C[\uDDE6-\uDDE8\uDDEE\uDDF0\uDDF7-\uDDFB\uDDFE])|\uD83C\uDDF0(?:\uD83C[\uDDEA\uDDEC-\uDDEE\uDDF2\uDDF3\uDDF5\uDDF7\uDDFC\uDDFE\uDDFF])|\uD83C\uDDEF(?:\uD83C[\uDDEA\uDDF2\uDDF4\uDDF5])|\uD83C\uDDEE(?:\uD83C[\uDDE8-\uDDEA\uDDF1-\uDDF4\uDDF6-\uDDF9])|\uD83C\uDDED(?:\uD83C[\uDDF0\uDDF2\uDDF3\uDDF7\uDDF9\uDDFA])|\uD83C\uDDEC(?:\uD83C[\uDDE6\uDDE7\uDDE9-\uDDEE\uDDF1-\uDDF3\uDDF5-\uDDFA\uDDFC\uDDFE])|\uD83C\uDDEB(?:\uD83C[\uDDEE-\uDDF0\uDDF2\uDDF4\uDDF7])|\uD83C\uDDEA(?:\uD83C[\uDDE6\uDDE8\uDDEA\uDDEC\uDDED\uDDF7-\uDDFA])|\uD83C\uDDE9(?:\uD83C[\uDDEA\uDDEC\uDDEF\uDDF0\uDDF2\uDDF4\uDDFF])|\uD83C\uDDE8(?:\uD83C[\uDDE6\uDDE8\uDDE9\uDDEB-\uDDEE\uDDF0-\uDDF5\uDDF7\uDDFA-\uDDFF])|\uD83C\uDDE7(?:\uD83C[\uDDE6\uDDE7\uDDE9-\uDDEF\uDDF1-\uDDF4\uDDF6-\uDDF9\uDDFB\uDDFC\uDDFE\uDDFF])|\uD83C\uDDE6(?:\uD83C[\uDDE8-\uDDEC\uDDEE\uDDF1\uDDF2\uDDF4\uDDF6-\uDDFA\uDDFC\uDDFD\uDDFF])|[#\*0-9]\uFE0F\u20E3|(?:\uD83C[\uDFC3\uDFC4\uDFCA]|\uD83D[\uDC6E\uDC70\uDC71\uDC73\uDC77\uDC81\uDC82\uDC86\uDC87\uDE45-\uDE47\uDE4B\uDE4D\uDE4E\uDEA3\uDEB4-\uDEB6]|\uD83E[\uDD26\uDD35\uDD37-\uDD39\uDD3D\uDD3E\uDDB8\uDDB9\uDDCD-\uDDCF\uDDD6-\uDDDD])(?:\uD83C[\uDFFB-\uDFFF])|(?:\u26F9|\uD83C[\uDFCB\uDFCC]|\uD83D\uDD75)(?:\uD83C[\uDFFB-\uDFFF])|(?:[\u261D\u270A-\u270D]|\uD83C[\uDF85\uDFC2\uDFC7]|\uD83D[\uDC42\uDC43\uDC46-\uDC50\uDC66\uDC67\uDC6B-\uDC6D\uDC72\uDC74-\uDC76\uDC78\uDC7C\uDC83\uDC85\uDCAA\uDD74\uDD7A\uDD90\uDD95\uDD96\uDE4C\uDE4F\uDEC0\uDECC]|\uD83E[\uDD0C\uDD0F\uDD18-\uDD1C\uDD1E\uDD1F\uDD30-\uDD34\uDD36\uDD77\uDDB5\uDDB6\uDDBB\uDDD2-\uDDD5])(?:\uD83C[\uDFFB-\uDFFF])|(?:[\u231A\u231B\u23E9-\u23EC\u23F0\u23F3\u25FD\u25FE\u2614\u2615\u2648-\u2653\u267F\u2693\u26A1\u26AA\u26AB\u26BD\u26BE\u26C4\u26C5\u26CE\u26D4\u26EA\u26F2\u26F3\u26F5\u26FA\u26FD\u2705\u270A\u270B\u2728\u274C\u274E\u2753-\u2755\u2757\u2795-\u2797\u27B0\u27BF\u2B1B\u2B1C\u2B50\u2B55]|\uD83C[\uDC04\uDCCF\uDD8E\uDD91-\uDD9A\uDDE6-\uDDFF\uDE01\uDE1A\uDE2F\uDE32-\uDE36\uDE38-\uDE3A\uDE50\uDE51\uDF00-\uDF20\uDF2D-\uDF35\uDF37-\uDF7C\uDF7E-\uDF93\uDFA0-\uDFCA\uDFCF-\uDFD3\uDFE0-\uDFF0\uDFF4\uDFF8-\uDFFF]|\uD83D[\uDC00-\uDC3E\uDC40\uDC42-\uDCFC\uDCFF-\uDD3D\uDD4B-\uDD4E\uDD50-\uDD67\uDD7A\uDD95\uDD96\uDDA4\uDDFB-\uDE4F\uDE80-\uDEC5\uDECC\uDED0-\uDED2\uDED5-\uDED7\uDEEB\uDEEC\uDEF4-\uDEFC\uDFE0-\uDFEB]|\uD83E[\uDD0C-\uDD3A\uDD3C-\uDD45\uDD47-\uDD78\uDD7A-\uDDCB\uDDCD-\uDDFF\uDE70-\uDE74\uDE78-\uDE7A\uDE80-\uDE86\uDE90-\uDEA8\uDEB0-\uDEB6\uDEC0-\uDEC2\uDED0-\uDED6])|(?:[#\*0-9\xA9\xAE\u203C\u2049\u2122\u2139\u2194-\u2199\u21A9\u21AA\u231A\u231B\u2328\u23CF\u23E9-\u23F3\u23F8-\u23FA\u24C2\u25AA\u25AB\u25B6\u25C0\u25FB-\u25FE\u2600-\u2604\u260E\u2611\u2614\u2615\u2618\u261D\u2620\u2622\u2623\u2626\u262A\u262E\u262F\u2638-\u263A\u2640\u2642\u2648-\u2653\u265F\u2660\u2663\u2665\u2666\u2668\u267B\u267E\u267F\u2692-\u2697\u2699\u269B\u269C\u26A0\u26A1\u26A7\u26AA\u26AB\u26B0\u26B1\u26BD\u26BE\u26C4\u26C5\u26C8\u26CE\u26CF\u26D1\u26D3\u26D4\u26E9\u26EA\u26F0-\u26F5\u26F7-\u26FA\u26FD\u2702\u2705\u2708-\u270D\u270F\u2712\u2714\u2716\u271D\u2721\u2728\u2733\u2734\u2744\u2747\u274C\u274E\u2753-\u2755\u2757\u2763\u2764\u2795-\u2797\u27A1\u27B0\u27BF\u2934\u2935\u2B05-\u2B07\u2B1B\u2B1C\u2B50\u2B55\u3030\u303D\u3297\u3299]|\uD83C[\uDC04\uDCCF\uDD70\uDD71\uDD7E\uDD7F\uDD8E\uDD91-\uDD9A\uDDE6-\uDDFF\uDE01\uDE02\uDE1A\uDE2F\uDE32-\uDE3A\uDE50\uDE51\uDF00-\uDF21\uDF24-\uDF93\uDF96\uDF97\uDF99-\uDF9B\uDF9E-\uDFF0\uDFF3-\uDFF5\uDFF7-\uDFFF]|\uD83D[\uDC00-\uDCFD\uDCFF-\uDD3D\uDD49-\uDD4E\uDD50-\uDD67\uDD6F\uDD70\uDD73-\uDD7A\uDD87\uDD8A-\uDD8D\uDD90\uDD95\uDD96\uDDA4\uDDA5\uDDA8\uDDB1\uDDB2\uDDBC\uDDC2-\uDDC4\uDDD1-\uDDD3\uDDDC-\uDDDE\uDDE1\uDDE3\uDDE8\uDDEF\uDDF3\uDDFA-\uDE4F\uDE80-\uDEC5\uDECB-\uDED2\uDED5-\uDED7\uDEE0-\uDEE5\uDEE9\uDEEB\uDEEC\uDEF0\uDEF3-\uDEFC\uDFE0-\uDFEB]|\uD83E[\uDD0C-\uDD3A\uDD3C-\uDD45\uDD47-\uDD78\uDD7A-\uDDCB\uDDCD-\uDDFF\uDE70-\uDE74\uDE78-\uDE7A\uDE80-\uDE86\uDE90-\uDEA8\uDEB0-\uDEB6\uDEC0-\uDEC2\uDED0-\uDED6])\uFE0F|(?:[\u261D\u26F9\u270A-\u270D]|\uD83C[\uDF85\uDFC2-\uDFC4\uDFC7\uDFCA-\uDFCC]|\uD83D[\uDC42\uDC43\uDC46-\uDC50\uDC66-\uDC78\uDC7C\uDC81-\uDC83\uDC85-\uDC87\uDC8F\uDC91\uDCAA\uDD74\uDD75\uDD7A\uDD90\uDD95\uDD96\uDE45-\uDE47\uDE4B-\uDE4F\uDEA3\uDEB4-\uDEB6\uDEC0\uDECC]|\uD83E[\uDD0C\uDD0F\uDD18-\uDD1F\uDD26\uDD30-\uDD39\uDD3C-\uDD3E\uDD77\uDDB5\uDDB6\uDDB8\uDDB9\uDDBB\uDDCD-\uDDCF\uDDD1-\uDDDD])/g}},59110:(e,t,u)=>{u.r(t),u.d(t,{loadLocalSubtree:()=>_});u(944114),u(517642),u(658004),u(733853),u(845876),u(432475),u(515024),u(731698),u(898992),u(354520),u(803949);var o=()=>u(726637),r=()=>u(700500),n=()=>u(175482),D=()=>u(777447),i=()=>u(792071),a=()=>u(976618),c=()=>u(388821),l=()=>u(277153),s=()=>u(912720),d=()=>u(199378),p=()=>u(179034),f=()=>u(519831),C=()=>u(869558),F=()=>u(37165),m=()=>u(144081),y=()=>u(743246),v=()=>u(201980),E=()=>u(534177);function _(e){const{environment:t,blockId:u,inMemoryRecordCache:o,options:r}=e,n=t.currentUser.id,D=c().RecordMap.create(),i=new Set,a=[{pointer:{table:p().ev,id:u},parentId:"doesn't matter"}];for(;a.length>0;){const e=a.shift();if(!e)continue;if(i.has(e.pointer.id))continue;const t=u===e.pointer.id,c=g({pointer:e.pointer,recordMap:D,inMemoryRecordCache:o,currentUserId:n,cursors:a,cursor:e,options:r,isRootRequest:t});if(c)return c;i.add(e.pointer.id)}return{type:"success",recordMap:D}}function g(e){const{pointer:t,recordMap:u,inMemoryRecordCache:c,currentUserId:_,cursors:g,cursor:h,options:B,isRootRequest:S}=e;let b;return(0,l().Yt)(t,p().ev)?b=function(e){var t,u,a,c;const{pointer:l,recordMap:d,inMemoryRecordCache:f,currentUserId:F,cursors:m,cursor:_,options:g,isRootRequest:h}=e,B=f.getRecord({pointer:l,userId:F}),S=null==B?void 0:B.value;if(!S)return g.requireFullSubtree?{type:"error",reason:"missing_record",pointer:l}:void 0;const b=g.excludeCrdtData?n().ir(S):S;if(g.includeLegacyTransclusionBlockValues){if(!h&&b.parent_id!==_.parentId&&!_.isBlockContentChild)return}else if(!h&&b.parent_id!==_.parentId)return;if(b.type===r().xd.externalObjectInstance&&!g.allowCopyExternalObjectInstances)return{type:"error",reason:"encountered_external_object_instance",pointer:l};if(d.setValue(l,b),!g.skipNavigableChildren){const e=i().Bj6.fromBlock(b).getCollectionPointers();for(const t of e){const e=f.getRecord({pointer:t,userId:F});var A,M;if(e)(null===(A=e.value)||void 0===A?void 0:A.parent_table)===p().ev&&(null===(M=e.value)||void 0===M?void 0:M.parent_id)===b.id&&m.push({pointer:t,parentId:b.id});else if(g.requireFullSubtree)return{type:"error",reason:"missing_record",pointer:t}}if(b.view_ids)for(const t of b.view_ids)m.push({pointer:{table:C().Gy,id:t,spaceId:b.space_id},parentId:b.id})}if(!(g.skipBlockContent||g.skipTransclusionContainerChildren&&"transclusion_container"===b.type||g.skipNavigableChildren&&(0,r().$I)(b.type))){const e=i().Bj6.fromBlock(b).getRenderableContentIds();for(const t of e)m.push({pointer:{table:p().ev,id:t},parentId:b.id,isBlockContentChild:!0})}const I=i().Bj6.fromBlock(b).getNonContentChildren();for(const o of I)m.push({pointer:{table:p().ev,id:o},parentId:b.id,isBlockContentChild:!0});if(b.type===r().xd.externalObjectInstance){var w,x;const e=(null===(w=b.format)||void 0===w?void 0:w.related_external_object_uris_to_instance_ids)&&Object.values(null===(x=b.format)||void 0===x?void 0:x.related_external_object_uris_to_instance_ids)||[];for(const t of e)m.push({pointer:{table:p().ev,id:t,spaceId:b.space_id},parentId:b.id})}if(!g.skipNavigableChildren&&b.properties){const e=Object.values(b.properties).filter(E().O9);for(const t of e)for(const e of t)for(const t of v().uPN(e)){if(v().jIt(t)){const e=v().v55(t);m.push({pointer:{table:p().ev,id:e},parentId:b.id})}if(v().sh$(t)){const e=v().cQR(t),u=(0,D().lX)({url:e,baseUrl:o().A.domainBaseUrl,publicDomainName:o().A.publicDomainName});u&&m.push({pointer:{table:p().ev,id:u},parentId:b.id})}if(v().N53(t)){const e=v().T$c(t);e&&m.push({pointer:{table:p().ev,id:e,spaceId:b.space_id},parentId:b.id})}}}"form"===b.type&&null!==(t=b.format)&&void 0!==t&&t.form_layout_pointer&&m.push({pointer:b.format.form_layout_pointer,parentId:b.id});null!==(u=b.format)&&void 0!==u&&u.automation_id&&m.push({pointer:{table:s().yB,id:b.format.automation_id,spaceId:b.space_id},parentId:b.id});null!==(a=b.format)&&void 0!==a&&a.workflow_id&&m.push({pointer:{table:y().C0,id:b.format.workflow_id,spaceId:b.space_id},parentId:b.id});null!==(c=b.format)&&void 0!==c&&c.ai_instructions_page_pointer&&m.push({pointer:b.format.ai_instructions_page_pointer,parentId:b.id})}({pointer:t,recordMap:u,inMemoryRecordCache:c,currentUserId:_,cursors:g,cursor:h,options:B,isRootRequest:S}):(0,l().Yt)(t,f().Vl)?b=function(e){var t,u;const{pointer:o,recordMap:r,inMemoryRecordCache:n,currentUserId:D,cursors:i,cursor:a,options:c}=e;if(!c.allowCopyCollections)return{type:"error",reason:"encountered_collection",pointer:o};const l=n.getRecord({pointer:o,userId:D});if(null==l||!l.value)return c.requireFullSubtree?{type:"error",reason:"missing_record",pointer:o}:void 0;if(l.value.parent_id!==a.parentId)return;const d=l.value;r.setValue(o,d),n.forEachRecord(D,(({model:e})=>{e.table===p().ev&&e&&e.parent_id===o.id&&e.alive&&i.push({pointer:e.pointer,parentId:o.id})}));const f=(null===(t=d.format)||void 0===t?void 0:t.automation_ids)??[];for(const p of f)i.push({pointer:{table:s().yB,id:p,spaceId:d.space_id},parentId:d.id});d.schema&&Object.values(d.schema).forEach((e=>{e&&"button"===e.type&&e.automation_id&&i.push({pointer:{id:e.automation_id,spaceId:d.space_id,table:s().yB},parentId:d.id})}));null!==(u=d.format)&&void 0!==u&&u.layout_pointer&&i.push({pointer:d.format.layout_pointer,parentId:d.id})}({pointer:t,recordMap:u,inMemoryRecordCache:c,currentUserId:_,cursors:g,cursor:h,options:B}):(0,l().Yt)(t,C().Gy)?b=function(e){var t,u;const{pointer:o,recordMap:r,inMemoryRecordCache:n,currentUserId:D,cursors:i,cursor:a,options:c}=e,l=n.getRecord({pointer:o,userId:D});if(null==l||!l.value)return c.requireFullSubtree?{type:"error",reason:"missing_record",pointer:o}:void 0;if(l.value.parent_id!==a.parentId)return;"form_editor"===l.value.type&&null!==(t=l.value.format)&&void 0!==t&&t.form_block_pointer&&i.push({pointer:l.value.format.form_block_pointer,parentId:l.value.id});null!==(u=l.value.format)&&void 0!==u&&u.dashboard_layout_pointer&&i.push({pointer:l.value.format.dashboard_layout_pointer,parentId:l.value.id});r.setValue(o,l.value)}({pointer:t,recordMap:u,inMemoryRecordCache:c,currentUserId:_,cursors:g,cursor:h,options:B}):(0,l().Yt)(t,s().yB)?b=function(e){const{pointer:t,recordMap:u,inMemoryRecordCache:o,currentUserId:r,cursors:n,cursor:D,options:i}=e,a=o.getRecord({pointer:t,userId:r});if(null==a||!a.value)return i.requireFullSubtree?{type:"error",reason:"missing_record",pointer:t}:void 0;if(a.value.parent_id!==D.parentId)return;u.setValue(t,a.value);for(const c of a.value.action_ids??[])n.push({pointer:{table:d().SC,id:c,spaceId:a.value.space_id},parentId:a.value.id})}({pointer:t,recordMap:u,inMemoryRecordCache:c,currentUserId:_,cursors:g,cursor:h,options:B}):(0,l().Yt)(t,d().SC)?b=function(e){const{pointer:t,recordMap:u,inMemoryRecordCache:o,currentUserId:r,cursors:n,cursor:D,options:i}=e,a=o.getRecord({pointer:t,userId:r});if(null==a||!a.value)return i.requireFullSubtree?{type:"error",reason:"missing_record",pointer:D.pointer}:void 0;if(a.value.parent_id!==D.parentId)return;u.setValue(t,a.value);for(const c of a.value.blocks??[])n.push({pointer:{table:p().ev,id:c,spaceId:a.value.space_id},parentId:a.value.id})}({pointer:t,recordMap:u,inMemoryRecordCache:c,currentUserId:_,cursors:g,cursor:h,options:B}):(0,l().Yt)(t,y().C0)?b=function(e){const{pointer:t,recordMap:u,inMemoryRecordCache:o,currentUserId:r,cursor:n,options:D}=e,i=o.getRecord({pointer:t,userId:r});if(null==i||!i.value)return D.requireFullSubtree?{type:"error",reason:"missing_record",pointer:n.pointer}:void 0;if(i.value.parent_id!==n.parentId)return;u.setValue(t,i.value)}({pointer:t,recordMap:u,inMemoryRecordCache:c,currentUserId:_,cursor:h,options:B}):(0,l().Yt)(t,m().zx)?b=function(e){const{pointer:t,recordMap:u,inMemoryRecordCache:o,currentUserId:r,cursors:n,options:D}=e,c=o.getRecord({pointer:t,userId:r}),l=null==c?void 0:c.value;if(!l)return D.requireFullSubtree?{type:"error",reason:"missing_record",pointer:t}:void 0;u.setValue(t,l);const s=i().Bj6.fromValue(m().zx,l);for(const i of s.getBlockChildrenPointers())n.push({pointer:i,parentId:t.id});const d=e=>{const u={id:e.collection_view_id,table:C().Gy,spaceId:l.space_id};return n.push({pointer:u,parentId:t.id}),e};(0,a().E)(l.modules,(e=>{if("formQuestion"===e.type){const u={id:e.formQuestionId,table:F().lo,spaceId:l.space_id};n.push({pointer:u,parentId:t.id})}else if("view"===e.type)d(e);else if("row"===e.type)for(const t of e.modules)"view"===t.type&&d(t)}))}({pointer:t,recordMap:u,inMemoryRecordCache:c,currentUserId:_,cursors:g,cursor:h,options:B}):(0,l().Yt)(t,F().lo)&&(b=function(e){const{pointer:t,recordMap:u,inMemoryRecordCache:o,currentUserId:r,options:n}=e,D=o.getRecord({pointer:t,userId:r});if(null==D||!D.value)return n.requireFullSubtree?{type:"error",reason:"missing_record",pointer:t}:void 0;u.setValue(t,D.value)}({pointer:t,recordMap:u,inMemoryRecordCache:c,currentUserId:_,cursors:g,cursor:h,options:B})),b}},107620:(e,t,u)=>{u.d(t,{y:()=>r});u(296540);const o={viewBox:"0 0 20 20",fittedViewBox:"1.81 2.89 16.38 15.08",svg:(0,u(474848).jsx)("path",{d:"M16.938 9.853c0-2.97-2.539-5.54-6.545-5.697L10 4.148c-4.232 0-6.938 2.639-6.938 5.705 0 1.438.583 2.752 1.617 3.76a.63.63 0 0 1 .18.546 7.3 7.3 0 0 1-.89 2.528c1.108-.13 2.12-.614 3.01-1.344l.063-.044a.63.63 0 0 1 .505-.073 9 9 0 0 0 2.454.333l.392-.007c4.006-.158 6.545-2.728 6.545-5.699m1.25 0c0 3.803-3.234 6.766-7.747 6.948l-.44.008a10.2 10.2 0 0 1-2.485-.299c-1.349 1.022-2.985 1.62-4.826 1.428a.625.625 0 0 1-.406-1.033c.712-.817 1.096-1.737 1.284-2.642-1.116-1.197-1.756-2.733-1.756-4.41 0-3.925 3.447-6.955 8.189-6.955l.44.009c4.512.181 7.747 3.143 7.747 6.946"})},r=(0,u(340498).wt)("chatBubble",o,"default")},170350:(e,t,u)=>{u.r(t),u.d(t,{filterIcon:()=>r,iconDefinition:()=>o});u(296540);const o={viewBox:"0 0 20 20",fittedViewBox:"2.37 4.87 15.25 10.25",svg:(0,u(474848).jsx)("path",{d:"M3 4.875a.625.625 0 1 0 0 1.25h14a.625.625 0 1 0 0-1.25zm2.125 5.742h9.75a.625.625 0 1 0 0-1.25h-9.75a.625.625 0 1 0 0 1.25m1.5 3.883c0-.345.28-.625.625-.625h5.5a.625.625 0 1 1 0 1.25h-5.5a.625.625 0 0 1-.625-.625"})},r=(0,u(340498).wt)("filter",o,"default")},175213:(e,t,u)=>{u.d(t,{G:()=>r});var o=()=>u(314529);function r(e,t){(0,o().DO_NOT_USE_trackLegacy)(e,"delete_property",t)}},241319:(e,t,u)=>{u.d(t,{y:()=>n});u(898992),u(672577);var o=()=>u(534177),r=()=>u(239381);function n(e){var t;const{actionModels:u,id:n}=e,D=(0,r().y5)(n),i="action"===D.source?u.find((e=>e.id===D.action_id)):void 0,a=(0,o().O9)(i)&&i.isType("create_page")?null===(t=i.getConfig())||void 0===t?void 0:t.collection:void 0;return{automationValueInfo:D,collectionPointer:a,actionModel:i}}},243331:(e,t,u)=>{u.d(t,{K_:()=>r,Lf:()=>D});var o=()=>u(206267);function r(){return{currentScreen:"none",status:"not_started",isBackendConnected:!1,externalSourceName:void 0,sessionId:o().JW(),analyticsFrom:"unknown",isConnected:!1,isPersonalAuthComplete:!1,isDisconnecting:!1,isLoaded:!1,isNotionMailProhibited:!1}}class n extends(()=>u(757695))().Store{getInitialState(){return r()}}const D=new n;(0,u(852832).exposeDebugValue)("notionMailAIConnectorStore",D)},246679:(e,t,u)=>{u.d(t,{VK:()=>r,gv:()=>D});var o=()=>u(206267);function r(){return{currentScreen:"none",status:"not_started",isBackendConnected:!1,externalSourceName:void 0,sessionId:o().JW(),analyticsFrom:"unknown",isConnected:!1,isPersonalAuthComplete:!1,isDisconnecting:!1,isLoaded:!1,isNotionCalendarProhibited:!1}}class n extends(()=>u(757695))().Store{getInitialState(){return r()}}const D=new n;(0,u(852832).exposeDebugValue)("notionCalendarAIConnectorStore",D)},299177:(e,t,u)=>{u.d(t,{A:()=>n});class o extends(()=>u(757695))().Store{getInitialState(){return{}}}const r=new o;u(852832).exposeDebugValue("SpaceWorkflowTemplateInstanceMapStore",r);const n=r},326887:(e,t,u)=>{u.d(t,{$X:()=>n,H8:()=>D,x2:()=>r});var o=()=>u(534177);function r(e){return"event"===e||"recurrence"===e}function n(e){const t=e.getTrigger();return(0,o().O9)(t)&&r(t.type)}function D(e){return"event"===e?"event":"recurrence"===e?"recurrence":void(0,o().HB)(e)}},348869:(e,t,u)=>{u.d(t,{g:()=>i});u(944114);var o=()=>u(792057),r=()=>u(785728),n=()=>u(532659),D=()=>u(753812);async function i(e){const{environment:t,onResponse:u,data:i,userId:a,tracking:c,abortSignal:l}=e,s=await D().callStreamApi({eventName:"runInferenceTranscript",environment:t,data:i,userId:a,tracking:c,abortSignal:l,headers:(0,r().WS)({spaceId:i.spaceId})});if("success"!==s.type)return null!=l&&l.aborted?{error:{message:"Aborted",code:0}}:(o().Qg(s),{error:{message:s.error.message,code:s.status}});const d=[];if(n().hS.is(s.data))for await(const o of s.data){if("error"===o.type)return{error:{message:o.message,code:o.errorCode}};null==u||u(o),d.push(o)}return{value:d}}},383567:(e,t,u)=>{u.d(t,{F:()=>n});u(296540);var o=u(474848);const r={viewBox:"0 0 20 20",fittedViewBox:"3.26 1.98 16.32 17.52",svg:(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)("path",{d:"M15.825 12a3.75 3.75 0 1 1-.001 7.501 3.75 3.75 0 0 1 0-7.501m0 1.325a.55.55 0 0 0-.55.55V15.2H13.95a.55.55 0 0 0-.001 1.1h1.326v1.325a.55.55 0 0 0 1.1 0V16.3h1.324a.55.55 0 0 0 0-1.1h-1.325v-1.325a.55.55 0 0 0-.55-.55M9.702 5.022a3.918 3.918 0 0 1 6.742.036.626.626 0 0 1-1.08.63 2.667 2.667 0 0 0-4.59-.023L5.376 14.68l4.19.678a.626.626 0 0 1-.2 1.235l-5.1-.827a.625.625 0 0 1-.437-.938z"}),(0,o.jsx)("path",{d:"M10.912 8.094a1.178 1.178 0 1 1 2.326.377 1.178 1.178 0 0 1-2.326-.377M4.7 7.087a1.178 1.178 0 1 1 2.327.377A1.178 1.178 0 0 1 4.7 7.087M3.488 2.985a3.92 3.92 0 0 1 5.572.357.625.625 0 0 1-.944.818 2.67 2.67 0 0 0-3.796-.243.625.625 0 1 1-.832-.932"})]})},n=(0,u(340498).wt)("aiFacePlus",r,"default")},388832:(e,t,u)=>{u.d(t,{d_:()=>i,gY:()=>a,so:()=>c});u(944114),u(898992),u(354520),u(803949),u(581454);var o=()=>u(350013),r=()=>u(824862),n=()=>u(743246),D=()=>u(319625);function i(e){var t;const u=e.getDraftData()??e.getData(),o=[];return null==u||null===(t=u.modules)||void 0===t||t.forEach((e=>{var t;"notion"===e.type&&null!==(t=e.state)&&void 0!==t&&t.ownedByDatabasePropertyIds&&o.push(...e.state.ownedByDatabasePropertyIds)})),o}function a(e){const{workflowsData:t,collectionViewBlockStore:u,currentCollectionStore:r,property:D,spaceId:i}=e;if(0===t.length||!r)return[];const a=[];for(const o of t)"none"!==o.access&&o.collectionId===r.id&&a.push(o.workflowId);return a.map((e=>o().N.createChildStore(u,{table:n().C0,id:e,spaceId:i}))).filter((e=>{const t=e.getDraftData()??e.getData(),u=null==t?void 0:t.modules;for(const r of u??[]){var o;if("notion"===r.type)return(null===(o=r.state)||void 0===o||null===(o=o.ownedByDatabasePropertyIds)||void 0===o?void 0:o.includes(D))??!1}return!1}))}function c(e){const{collectionStore:t,spaceId:u}=e,n=t.getParentStore(),i=null==n?void 0:n.getFormat(),a=i&&"database_agent_ids"in i&&Array.isArray(i.database_agent_ids)?i.database_agent_ids:[];if(!n||!i||0===a.length)return{value:[]};const c=a.map((e=>{const t={id:e,table:"workflow",spaceId:u};return o().N.createChildStore(n,t)})).filter((e=>e.isDefined()&&void 0===e.getMovedToTrashTime()));try{return{value:c.map((e=>{const u=e.getData();let o;const D=null==u?void 0:u.runtime_actor_pointer;D&&D.table===r().GP&&(o=D.id);return{...{blockId:n.id,collectionId:t.id,workflowId:e.id,botId:o},access:"write"}}))}}catch(l){return{error:(0,D().A)(l)}}}},390527:(e,t,u)=>{u.r(t),u.d(t,{DEFAULT_MAX_RECURRENCE_DUPLICATION_PER_TASK:()=>x,MAXIMUM_DAILY_RECURRENCES_IN_PATH:()=>h,MAXIMUM_NESTED_RECURRENCE_LEVEL:()=>g,MAX_RECURRENCE_INTERVAL:()=>m,MAX_RECURRENCE_NUMBER_OF_RUNS:()=>y,RRULE_WEEKDAYS_MAP:()=>F,adjustedStartDateIfPossible:()=>S,areRecurrenceSchedulesEqual:()=>V,convertFromUnpersistedRecurrenceConfig:()=>O,convertToUnpersistedRecurrenceConfig:()=>k,getFormattedEndCondition:()=>w,getFormattedNextRecurrenceTime:()=>I,getNewEndTimestamp:()=>T,getNextDateUtc:()=>M,getRecurrenceAfter:()=>b,isRunningBetweenMidnightAnd3AM:()=>A,isValidRecurrenceInterval:()=>v,isValidRecurrenceNumberOfRuns:()=>E,rruleFromRecurrence:()=>_,templateAncestorsViolateRecurrenceNesting:()=>B});u(898992),u(354520),u(581454);var o=()=>u(906745);u(944114);function r(e,...t){if(0===t.length)return e.map((e=>[e]));const u=[];for(const o of e)u.push(...r(t[0],...t.slice(1)).map((e=>[o,...e])));return u}var n=()=>u(496603),D=()=>u(534177),i=()=>u(720665),a=()=>u(597777),c=()=>u(869190),l=()=>u(416504),s=()=>u(402390);class d extends(()=>u(896346))().p3{constructor(e,t){super(e,t)}after(e,t){return super.after(e,t)}}var p=()=>u(912720);const f=(0,u(69708).YK)({dateAtTime:{id:"automations.recurrenceHelpers.dateAtTime",defaultMessage:"{date} at {time}"},dateBetweenMidnightAnd3AM:{id:"automations.recurrenceHelpers.dateBetweenMidnightAnd3AM",defaultMessage:"{date} between 12â€“3 AM"},numberEndConditionDescription:{id:"automations.recurrenceHelpers.numberEndConditionDescription",defaultMessage:"{number, plural, one {After {number} run} other {After {number} runs}}"},noEndCondition:{id:"automations.recurrenceHelpers.noEndCondition",defaultMessage:"Never"}}),C={hour:d.HOURLY,day:d.DAILY,week:d.WEEKLY,month:d.MONTHLY,year:d.YEARLY},F={MO:d.MO,TU:d.TU,WE:d.WE,TH:d.TH,FR:d.FR,SA:d.SA,SU:d.SU},m=99,y=999;function v(e){return(0,i().Et)(e)&&Number.isInteger(e)&&e>0&&e<=m}function E(e){return(0,i().Et)(e)&&Number.isInteger(e)&&e>0&&e<=y}function _(e){const{start_date:t,frequency:u,interval:o,weekdays:n,timezone:i,hour:c,minute:l}=e,s=(0,a().eU)(t);"hour"===u&&s.setUTCHours(c??0,l??0,0,0);const p="week"===u&&n?n.map((e=>F[e])):void 0,f={};return(0,D().O9)(e.end_condition)&&("date"===e.end_condition.type?f.until=(0,a().eU)(e.end_condition.end_at):"number"===e.end_condition.type?f.count=e.end_condition.number_of_occurrences:(0,D().HB)(e.end_condition)),"month"===e.frequency&&(0,D().O9)(e.monthly_restriction)&&("monthdays"===e.monthly_restriction.type?f.bymonthday=e.monthly_restriction.monthdays:"weekdays_in_month"===e.monthly_restriction.type?f.byweekday=r(e.monthly_restriction.weekdays,e.monthly_restriction.week_numbers).map((([e,t])=>F[e].nth(t))):(0,D().HB)(e.monthly_restriction)),new d({freq:C[u],dtstart:s,interval:o,byweekday:p,tzid:"hour"===u?void 0:i,..."hour"===u?{}:{byhour:c??0,byminute:l??0,bysecond:0},...f})}const g=1,h=1;function B(e){var t;if(0===e.length)return{violatesConstraint:!1,templateNestingExceedsMaxDepth:!1,ancestorHasDailyTemplate:!1,nestedDepthOfAutomationAncestors:void 0,immediateAncestorRecurrenceType:void 0};const u=e.filter((e=>{var t;return"day"===(null===(t=e.getRecurrence())||void 0===t?void 0:t.frequency)})),o=e.length,r=null===(t=e[0].getRecurrence())||void 0===t?void 0:t.frequency,n=o>g,D=u.length>=h;return{violatesConstraint:n||D,templateNestingExceedsMaxDepth:n,ancestorHasDailyTemplate:D,nestedDepthOfAutomationAncestors:o,immediateAncestorRecurrenceType:r}}function S(e){var t;const{recurrence:u,afterDate:r}=e;if("number"===(null===(t=u.end_condition)||void 0===t?void 0:t.type)||u.start_date>=r)return u;let n=o().DateTime.fromMillis(u.start_date,{zone:"utc"});const D=o().DateTime.fromMillis(r,{zone:"utc"});switch(u.frequency){case"hour":{const e=Math.floor(D.diff(n,"hours").hours/u.interval);n=n.plus({hours:e*u.interval});break}case"year":{const e=Math.floor(D.diff(n,"years").years/u.interval);n=n.plus({years:e*u.interval});break}case"month":{const e=Math.floor(D.diff(n,"months").months/u.interval);n=n.plus({months:e*u.interval});break}case"week":{const e=Math.floor(D.diff(n,"weeks").weeks/u.interval);n=n.plus({weeks:e*u.interval});break}case"day":{const e=Math.floor(D.diff(n,"days").days/u.interval);n=n.plus({days:e*u.interval});break}}return{...u,start_date:(0,a().DH)(n.toMillis())}}function b(e){const{recurrence:t,afterDate:u}=e;if((0,p().wt)(t)){const e=(0,a().l1)(u);return t.start_date>=e?new Date(t.start_date):void 0}{const e=_(S({recurrence:t,afterDate:u})).after((0,a().eU)(u));if(!e)return;return(0,a().h1)(e)}}function A(e){return 0===e.hour||1===e.hour||2===e.hour}function M(e){return _(e).after((0,a().eU)((0,a().Rz)()))||void 0}function I(e){const{recurrence:t,intl:u}=e,r=M(O(t));if(!r)return;const n=A(t),D=o().DateTime.fromJSDate(r).toUTC().setZone("local",{keepLocalTime:!0}).setLocale((0,s().H)(u)).setZone(t.timezone),i=(0,c().Yq)({date:D,dateFormat:"relative",allowRelativeDates:!0,intl:u,shortenDate:!0});if(n)return u.formatMessage(f.dateBetweenMidnightAnd3AM,{date:i});{let e=D.toLocaleString(o().DateTime.TIME_SIMPLE);return t.timezone!==(0,l().P)()&&(e+=` ${D.toFormat("ZZZZ")}`),u.formatMessage(f.dateAtTime,{date:i,time:e})}}function w(e,t){return(0,D().O9)(e)?"number"===e.type?t.formatMessage(f.numberEndConditionDescription,{number:e.number_of_occurrences}):"date"===e.type?(0,c().Yq)({date:o().DateTime.fromMillis(e.end_at),dateFormat:"relative",allowRelativeDates:!0,intl:t,shortenDate:!0}):void(0,D().HB)(e):t.formatMessage(f.noEndCondition)}const x=100;function k(e){return{...e,start_date:(0,a().l1)(e.start_date),end_condition:e.end_condition?"number"===e.end_condition.type?e.end_condition:"date"===e.end_condition.type?{type:"date",end_at:(0,a().l1)(e.end_condition.end_at)}:(0,D().HB)(e.end_condition):void 0}}function T(e,t,u){return e.plus(u-t)}function R(e,t){const u=o().DateTime.fromMillis(t.end_at).set({hour:e.hour??0,minute:e.minute??0});return{type:"date",end_at:(0,a().Rz)(u.toJSDate())}}function O(e){return{...e,start_date:(0,a().Rz)(new Date(e.start_date)),end_condition:e.end_condition?"number"===e.end_condition.type?e.end_condition:"date"===e.end_condition.type?R(e,e.end_condition):(0,D().HB)(e.end_condition):void 0}}function V(e,t){const u=n().fN(e,(e=>void 0!==e)),o=n().fN(t,(e=>void 0!==e));return n().n4(u,o)}},412237:(e,t,u)=>{u.r(t),u.d(t,{aiFaceSmallIcon:()=>n,iconDefinition:()=>r});u(296540);var o=u(474848);const r={viewBox:"0 0 16 16",fittedViewBox:"2.89 1.43 11.63 12.81",svg:(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)("path",{d:"M7.204 1.93a3.47 3.47 0 0 0-4.097.39.625.625 0 1 0 .834.931 2.22 2.22 0 0 1 3.16.202.625.625 0 0 0 .944-.818 3.5 3.5 0 0 0-.84-.705m6.018.976A3.47 3.47 0 0 0 8.463 4.1l-5.077 8.476a.625.625 0 0 0 .437.938l4.41.715a.625.625 0 0 0 .2-1.234l-3.5-.568 4.602-7.685a2.22 2.22 0 0 1 3.822.02.625.625 0 1 0 1.08-.63 3.46 3.46 0 0 0-1.214-1.226m-7.83 2.105a1.094 1.094 0 1 0-.35 2.159 1.094 1.094 0 0 0 .35-2.159"}),(0,o.jsx)("path",{d:"M10.762 5.881a1.093 1.093 0 1 0-.35 2.159 1.093 1.093 0 0 0 .35-2.159"})]})},n=(0,u(340498).wt)("aiFaceSmall",r,"small")},422540:(e,t,u)=>{u.d(t,{$0:()=>m,Fx:()=>B,Ge:()=>f,I3:()=>d,Kj:()=>g,PP:()=>S,TK:()=>b,Yy:()=>s,aE:()=>A,cQ:()=>h,kH:()=>C,m7:()=>p,nq:()=>E,nv:()=>y,tj:()=>F});u(898992),u(354520),u(737550);var o=()=>u(496603),r=()=>u(534177),n=()=>u(381283),D=()=>u(898244),i=()=>u(651124),a=()=>u(349835),c=()=>u(390066);const l={checkbox:!0,date:!0,email:!0,multi_select:!0,number:!0,person:!0,phone_number:!0,relation:!0,select:!0,status:!0,text:!0,title:!0,url:!0,auto_increment_id:!1,button:!1,created_by:!1,created_time:!1,file:!1,formula:!1,last_edited_by:!1,last_edited_time:!1,last_visited_time:!1,location:!1,rollup:!1,verification:!1,place:!1},s={checkbox:[{type:"checkbox"}],date:[{type:"date"}],email:[{type:"text"}],multi_select:[{type:"text"},{of:{type:"text"},type:"array"}],number:[{type:"number"}],person:[{type:"person"},{of:{type:"person"},type:"array"}],phone_number:[{type:"text"}],relation:[{type:"block"},{of:{type:"block"},type:"array"}],select:[{type:"text"},{of:{type:"text"},type:"array"}],status:[{type:"text"},{of:{type:"text"},type:"array"}],text:void 0,title:void 0,url:[{type:"text"}]};function d(e){return Boolean(l[e.type]&&!(0,D().UU)(e)&&(!(0,D().$M)(e)||void 0===(0,D().om)(e)))}function p(e){const{collectionFormat:t,collectionSchema:u,filter:n,sort:a,sourcePropertyIds:l}=e,s=(l??(0,r().uv)(u)).filter(((t,o,r)=>{const i=u[t];return!(!i||!d(i))&&(("relation"!==i.type||!e.restrictCrossSpace||!(0,D().o2)(e.spaceId,i))&&(!n||n([t,i],o,u)))}));if(0===s.length)return[];if(!t||!1===a)return s;const p=(0,c().L)(t,u,void 0,i().jf.Page).collection_page_properties||[];return o().Ul(s,(e=>p.findIndex((t=>t.property===e))))}function f(e){const{collectionFormat:t,collectionSchema:u,sort:D}=e,a=(0,r().uv)(u).filter(((e,t,o)=>{const r=u[e];return!(!r||!(0,n().J)(r))}));if(0===a.length)return[];if(!t||!1===D)return a;const l=(0,c().L)(t,u,void 0,i().jf.Page).collection_page_properties||[];return o().Ul(a,(e=>l.findIndex((t=>t.property===e))))}function C(e){return e.type===a().M9.InvalidCharacter?{type:e.type,character:e.character}:e.type===a().M9.TokenExpected?{type:e.type,token:e.token}:e.type===a().uW.MissingSchemaPropertyOnThisRow||e.type===a().uW.MissingSchemaPropertyOnCollection?{type:e.type,collectionId:e.collectionId,property:e.property,errorSource:e.errorSource}:e.type===a().uW.ThisRowBlockPropertyMismatchCollection?{type:e.type,thisRowCollection:e.thisRowCollection,errorSource:e.errorSource}:e.type===a().uW.MissingContextVariable?{type:e.type,valueId:e.valueId,errorSource:e.errorSource}:e.type===a().uW.FunctionCallTooFewArguments?{type:e.type,numArguments:e.numArguments,errorSource:e.errorSource}:e.type===a().uW.FunctionCallUnexpectedArgument?{type:e.type,parameterIndex:e.parameterIndex,errorSource:e.errorSource}:e.type===a().uW.FunctionCallArgumentWrongType?{type:e.type,argumentType:e.argumentType,libraryFunctionName:e.libraryFunction.name,parameterIndex:e.parameterIndex,errorSource:e.errorSource}:e.type===a().uW.MissingDataDependencyBlock?{type:e.type,blockPointer:e.blockPointer,node:e.node,errorSource:e.errorSource}:e.type===a().uW.MissingDataDependencyPerson?{type:e.type,personPointer:e.personPointer,errorSource:e.errorSource}:e.type===a().uW.MemberPropertyMismatchCollection?{type:e.type,blockCollection:e.blockCollection,errorSource:e.errorSource}:e.type===a().uW.DownstreamParseFailure?{type:e.type,collectionId:e.collectionId,property:e.property,errorSource:e.errorSource}:e.type===a().uW.ContextVariableWrongType?{type:e.type,valueId:e.valueId,expectedType:e.expectedType,resultType:e.resultType,errorSource:e.errorSource}:e.type===a().uW.DisallowedValueType?{type:e.type,expressionValue:e.expressionValue,allowedValueTypes:e.allowedValueTypes,errorSource:e.errorSource}:e.type===a().uW.LibraryFunctionExecutionError?{type:e.type,error:e.error,libraryFunctionName:e.libraryFunction.name,errorSource:e.errorSource}:"errorSource"in e?{type:e.type,errorSource:e.errorSource}:{type:e.type}}const F={checkbox:!0,date:!0,email:!0,multi_select:!0,number:!0,person:!0,phone_number:!0,relation:!0,select:!0,status:!0,text:!0,title:!0,url:!0,button:!1,file:!1,verification:!1,auto_increment_id:!1,created_by:!1,created_time:!1,formula:!1,last_edited_by:!1,last_edited_time:!1,last_visited_time:!1,location:!1,rollup:!1,place:!1};function m(e){return Boolean(F[e.type])}function y(e){const{collectionFormat:t,collectionSchema:u,filter:n,sort:a}=e,l=(0,r().uv)(u).filter(((e,t,o)=>{var r;const i=u[e];return!(!i||!F[i.type])&&((!(0,D().$M)(i)||null===(r=(0,D().om)(i))||void 0===r||!r.auto_update_on_edit)&&(!n||n([e,i],t,u)))}));if(0===l.length)return[];if(!t||!1===a)return l;const s=(0,c().L)(t,u,void 0,i().jf.Page).collection_page_properties||[];return o().Ul(l,(e=>s.findIndex((t=>t.property===e))))}const v={checkbox:!0,email:!0,multi_select:!0,number:!0,person:!0,phone_number:!0,relation:!0,select:!0,status:!0,text:!0,title:!0,url:!0,auto_increment_id:!1,button:!1,created_by:!1,created_time:!1,date:!1,file:!1,formula:!1,last_edited_by:!1,last_edited_time:!1,last_visited_time:!1,location:!1,rollup:!1,verification:!1,place:!1};function E(e){return v[e.type]}const _={checkbox:!0,created_by:!0,created_time:!0,date:!0,email:!0,multi_select:!0,number:!0,person:!0,phone_number:!0,relation:!0,select:!0,status:!0,text:!0,title:!0,url:!0,last_edited_by:!0,last_edited_time:!0,auto_increment_id:!1,button:!1,file:!1,formula:!1,last_visited_time:!1,location:!1,rollup:!1,verification:!1,place:!1};function g(e){return _[e.type]}function h(e){return 0===e}function B(e){return function(e){return"button_block"===e||"button_property"===e}(e)}function S(e){const{property:t,collectionSchema:u}=e;return!!u&&!u[t]}function b(e){const{collectionSchema:t,property:u,type:o}=e,r=null==t?void 0:t[u];return!r||("action"===o?!d(r):!F[r.type])}function A({automationTrigger:e,collectionSchema:t}){if("event"===(null==e?void 0:e.type)){const{pagesAdded:u,pagePropertiesEdited:o,source:n}=e.event;if(void 0===n)return!1;const D="some"===o.type&&o.some,i="all"===o.type&&o.all;if((D||i||[]).some((e=>S({collectionSchema:t,property:e.property})||b({collectionSchema:t,property:e.property,type:"trigger"}))))return!1;const a="some"===o.type&&(!(0,r().O9)(o.some)||0===o.some.length),c="all"===o.type&&(!(0,r().O9)(o.all)||0===o.all.length);if(!u&&("none"===o.type||a||c))return!1}else{if("recurrence"!==(null==e?void 0:e.type))return!1;if(!e.recurrence)return!1}return!0}},448801:(e,t,u)=>{u.d(t,{i:()=>r});u(944114),u(517642),u(658004),u(733853),u(845876),u(432475),u(515024),u(731698);var o=()=>u(371562);o();function r(e,t){const u=o().create({arrays:{detectMove:!1,includeValueOnMove:!0}}).diff(e,t);if(!u)return{beforeOps:{},removeOps:new Set};let r=[],n=[];for(const o in u)"_t"!==o&&("_"===o[0]?r.push(parseInt(o.slice(1),10)):1===u[o].length&&n.push({index:parseInt(o,10),value:u[o][0]}));const D={},i=new Set,a=[...e];r=r.sort(((e,t)=>e-t));for(let o=r.length-1;o>=0;o--){const e=r[o],t=a.splice(e,1)[0];i.add(t)}n=n.sort(((e,t)=>e.index-t.index));for(let o=0;o<n.length;o++){const e=n[o];D[e.value]=a[e.index],a.splice(e.index,0,e.value)}return{beforeOps:D,removeOps:i}}},460957:(e,t,u)=>{u.d(t,{E:()=>D});u(581454);var o=()=>u(201980),r=()=>u(718957),n=()=>u(29554);function D(e){const{multiSelection:t}=e;return(0,r().$W)(t).map((({store:e,selection:t})=>{const u=(0,o().RQ)(e.getValue()),r=(0,o().xbM)(u,t),{tokensInsideRange:D}=(0,o().AI5)(u,r.startIndex,r.endIndex);return(0,n().r4)(D,e)})).join("\n\n")}},482871:(e,t,u)=>{u.d(t,{z:()=>l});u(517642),u(658004),u(733853),u(845876),u(432475),u(515024),u(731698),u(898992),u(430670),u(581454);var o=()=>u(770063),r=()=>u(898244),n=()=>u(448801),D=()=>u(179034),i=()=>u(722101),a=(u(354520),()=>u(496603));function c(e){const{collectionContextStore:t,collectionViewStore:u,transaction:n}=e,c=u.getPageSortStore(),l=c.getValue(),s=t.groupsStore.getAllGroupStates(),d=function(e){const{pageSort:t,currentResults:u}=e;if(!t||t.length<=r().WF)return[];const o=t.filter((e=>!u.has(e)));return a().sb([...o.reverse(),...a().o8(t).reverse()]).slice(0,t.length-r().WF)}({pageSort:l,currentResults:new Set(s.flatMap((e=>e.resultsStore.state.map((e=>e.id)))))});for(const r of d)i().TF({parentStore:c,childToRemoveStore:(0,o().v3)(c,{table:D().ev,id:r}),transaction:n})}function l(e){const{resultIds:t,collectionViewStore:u,collectionContextStore:a,transaction:l}=e,s=u.getPageSortStore(),d=s.getValue()||[],{beforeOps:p}=(0,n().i)(d,t.slice(0,r().WF));for(const[r,n]of Object.entries(p))if(n){const e=(0,o().v3)(u,{table:D().ev,id:n});i().nc({parentStore:s,insertStore:(0,o().v3)(u,{table:D().ev,id:r}),beforeStore:e,transaction:l})}else{const e=t.findIndex((e=>e===r)),n=t[e-1],a=n?(0,o().v3)(u,{table:D().ev,id:n}):void 0;i().WH({parentStore:s,insertStore:(0,o().v3)(u,{table:D().ev,id:r}),afterStore:a,transaction:l})}c({collectionContextStore:a,collectionViewStore:u,transaction:l})}},490378:(e,t,u)=>{u.r(t),u.d(t,{WorkflowAutofillButton:()=>B});u(898992),u(672577);var o=u(296540),r=()=>u(59226),n=()=>u(484714),D=()=>u(590526),i=()=>u(401497),a=()=>u(350013),c=()=>u(412237),l=()=>u(97059),s=()=>u(179034),d=()=>u(743246),p=()=>u(69708),f=()=>u(100622),C=()=>u(877661),F=()=>u(357625),m=()=>u(815510),y=()=>u(908201),v=()=>u(595917),E=()=>u(22673),_=()=>u(971003),g=()=>u(527257),h=u(474848);function B({store:e,property:t}){const u=(0,n().v3)(),B=(0,p().tz)(),b=(0,y().ET)(),{canEdit:A}=(0,o.useContext)(_().L8),M=(0,D().K8)((()=>null==b?void 0:b.collectionStore()),[b]),I=(0,D().K8)((()=>null==M?void 0:M.getSpaceId()),[M]),w=(0,v().a)(M),x=(0,r().X)("database_agents"),k=(0,D().K8)((()=>{if(!M||!I)return null;if(w.error)return null;const e=M.getSchema()[t];if(null==e||!e.default_workflow_id)return null;const u=M.getParentCollectionViewBlockStore();if(!u)return null;const o=w.value.find((t=>t.workflowId===e.default_workflow_id&&"none"!==t.access));return o?a().N.createChildStore(u,{table:d().C0,id:o.workflowId,spaceId:I}):null}),[M,t,I,w]),T=(0,D().K8)((()=>(null==k?void 0:k.hasBeenPublished())??!1),[k]),R=(0,o.useCallback)((async o=>{if(o.stopPropagation(),o.preventDefault(),!k||!I||!M)return;(0,E().YH)({environment:u,workflowId:k.id,rowCount:1,origin:"cell_hover"}),(0,m().nw)({blockStore:e,property:t,environment:u});const r=(0,F().UT)(u,C().m,{type:"blockFill",workflowPointer:{table:d().C0,id:k.id,spaceId:I},collectionId:M.id,blockIds:[{table:s().ev,id:e.id,spaceId:I}],propertyIds:[t]},{spaceIds:[I]});for await(const e of r){var n;if("failure"===e.taskStatus)break;if("success"===e.taskStatus&&"value"in e&&null!==(n=e.value)&&void 0!==n&&n.success)break}}),[k,I,M,e,t,u]),O=(0,i().IS)((()=>({iconStyle:{color:f().Tj.text.secondary,fill:f().Tj.text.secondary,width:16,height:16}})),[]);return A&&k&&x&&T?(0,h.jsx)(g().A,{icon:x?c().aiFaceSmallIcon:l().s,tooltip:B.formatMessage(x?S.dbAgentAutofill:S.fillCell),onClick:R,iconStyle:O.iconStyle,style:{height:20,width:24,borderRadius:4},hasBackground:!1}):null}const S=(0,p().YK)({fillCell:{defaultMessage:"Fill with AI",id:"workflowAutofillButton.tooltip"},dbAgentAutofill:{defaultMessage:"Auto-fill with agent",id:"workflowAutofillButton.tooltip.dbAgentAutofill"}})},491848:(e,t,u)=>{u.d(t,{w:()=>r});u(898992),u(672577);var o=()=>u(209866);function r({collectionContextStore:e,transaction:t}){const u="collectionTypedView"===e.contextTypeFromStoreState,r=e.databaseTypeFromStoreState,n=e.collectionStoresStore.state,D=n.find((e=>e.canEdit()||e.canEditCollection()||e.canEditContentOnly()))||n[0];!u&&D&&(0,o().e)({transaction:t,databaseType:r,collectionId:D.id,spaceId:D.getSpaceId()})}},546461:(e,t,u)=>{u.d(t,{K4:()=>_,To:()=>S,fi:()=>g,q8:()=>E,u:()=>v});u(16280),u(18107),u(967357);var o=u(296540),r=()=>u(484714),n=()=>u(792485),D=()=>u(590526),i=()=>u(79926),a=()=>u(140934),c=()=>u(322867),l=()=>u(69708),s=()=>u(534177),d=()=>u(813297),p=()=>u(326887),f=()=>u(862292),C=()=>u(190019),F=()=>u(76190),m=u(474848);const y=(0,o.createContext)({ancestors:[]});y.displayName="AutomationContext";y.Consumer;function v(e){const{automationStore:t,children:u,contextType:v,enableExistenceGuarantees:E}=e,_=(0,r().v3)(),g=(0,l().tz)(),{value:S}=(0,i().fJ)(f().T.formulas),{value:b}=(0,i().fJ)(d().QV.automationTypecheck),A=(0,F().n)(t),M=(0,n().S)(),I=(0,D().K8)((()=>{if(!S)return{error:new(c().N9)("Missing formulas dependency")};if(!b)return{error:new(c().N9)("Missing automation dependency")};const e=function(e){const{environment:t,automationStore:u,automationTypecheckModule:o,contextType:r,formulasModule:n,intl:D,isSubscribed:i,pageStore:c,enableExistenceGuarantees:l}=e,d=function(e,t){if(t)return h.get(e);return h.get(e)??B.get(e)}(u,l);if(d)return d;const f=new(a().ComputedStore)((()=>{const e=u.getTriggerType();let a=r;return(0,s().O9)(e)&&(0,p().x2)(e)&&(a=(0,p().H8)(e)),(0,C().Z)({environment:t,automationStore:u,automationTypecheckModule:o,contextType:a,formulasModule:n,intl:D,isSubscribed:i,pageStore:c,enableExistenceGuarantees:l})}),{debugName:"automationContextTypecheckResultCachedStore"});return function(e,t,u){u?(h.set(e,t),B.set(e,t)):B.set(e,t)}(u,f,l),f}({automationStore:t,automationTypecheckModule:b,contextType:v,environment:_,formulasModule:S,intl:g,isSubscribed:A,pageStore:"button_block"===v?null==M?void 0:M.pageStore:void 0,enableExistenceGuarantees:E});return e.state}),[_,t,b,v,S,g,A,null==M?void 0:M.pageStore,E]),w=(0,o.useContext)(y),x=(0,o.useMemo)((()=>0===w.ancestors.length?[{automationStore:t,contextType:v,typecheckResult:I}]:[...w.ancestors,{automationStore:t,contextType:v,typecheckResult:I}]),[w,t,v,I]),k=(0,o.useMemo)((()=>({ancestors:x,enableExistenceGuarantees:E})),[x,E]);return(0,m.jsx)(y.Provider,{value:k,children:u})}function E(){const e=(0,o.useContext)(y).ancestors.at(-1);if(!e)throw new Error("No automation context found!");return e}function _(){return(0,o.useContext)(y).ancestors.at(-1)}function g(){return(0,o.useContext)(y).enableExistenceGuarantees}const h=new WeakMap,B=new WeakMap;function S(e){var t;return null===(t=h.get(e))||void 0===t?void 0:t.state}},595917:(e,t,u)=>{u.d(t,{a:()=>n});var o=()=>u(590526),r=()=>u(388832);function n(e){const t=(0,o().K8)((()=>{if(e)return e.getSpaceId()}),[e]);return(0,o().K8)((()=>e&&t?(0,r().so)({collectionStore:e,spaceId:t}):{value:[]}),[e,t])}},613016:(e,t,u)=>{u.d(t,{a:()=>r});var o=()=>u(907258);function r(){const{sidebarSpaceStore:e}=o().default.getState();return e?e.id:void 0}},626001:(e,t,u)=>{u.d(t,{Af:()=>A,Bw:()=>I,Cs:()=>E,Oq:()=>C,Re:()=>m,X4:()=>F,YJ:()=>S,ZB:()=>b,Zd:()=>M,d2:()=>y,dd:()=>g,in:()=>v,kQ:()=>B});u(944114),u(517642),u(658004),u(733853),u(845876),u(432475),u(515024),u(731698),u(898992),u(354520),u(581454),u(737550);var o=()=>u(68169),r=()=>u(799288),n=()=>u(277153),D=()=>u(179034),i=()=>u(798880),a=()=>u(743246),c=()=>u(201980),l=()=>u(724639),s=()=>u(496603),d=()=>u(534177),p=()=>u(27267),f=()=>u(166442);function C(e,t){const u=f().UserChatPreferenceLocalStorageStore.getState();f().UserChatPreferenceLocalStorageStore.setState({...u,[e]:{...null==u?void 0:u[e],...t}})}function F(e){return e.some((e=>"in_progress"===e.status))}function m(e){return e.some((e=>"complete"===e.status&&"risky"===e.attachmentRisk))}function y(e,t){const u=c().w9s(e),o=((null==t?void 0:t.length)??0)>0;return!u||o}function v(e){const t=E({config:e,includeWeb:!1});return 1===t.length?t[0]:void 0}function E(e){const{config:t,includeWeb:u}=e,o=[];if("search"===t.type)o.push(t.scopeForNextSearch);else if("researcher"===t.type&&t.searchScope)o.push(t.searchScope);else{if("workflow"!==t.type)return[];o.push(...(0,l().n_)({config:t,modules:[]})??[])}return u&&t.useWebSearch&&o.push({type:"web"}),o}function _(e){const{botId:t,spaceStore:u,userStore:o}=e,r=p().R.getCachedWorkflowData(o.id,u.id);if(r)for(const D of r.workflowStores){var n;const e=D.getDraftData();if("bot"===(null==e||null===(n=e.runtime_actor_pointer)||void 0===n?void 0:n.table)&&e.runtime_actor_pointer.id===t)return D.id}}function g(e,t,u){if(!e)return[];const n=c().moK(e),D=c().Fbh(e).map((e=>({table:i().oo,id:e}))),l=c().jgW(e);return[...n,...D,...t&&u?l.map((e=>{if((0,r().ut)(e))return{table:a().C0,id:o().Lj,spaceId:t.id};const n=_({spaceStore:t,botId:e,userStore:u});return n?{table:a().C0,id:n,spaceId:t.id}:void 0})).filter(d().O9):[]]}function h(e,t){const u=new Set(e.map((e=>n().L3.toIdTableKey(e)))),o=new Set(t.map((e=>n().L3.toIdTableKey(e))));return{added:t.filter((e=>!u.has(n().L3.toIdTableKey(e)))),removed:e.filter((e=>!o.has(n().L3.toIdTableKey(e)))),unchanged:e.filter((e=>o.has(n().L3.toIdTableKey(e))))}}function B(e){const{currentTextMentionPointers:t,inputMentionPointers:u,allMentionPointers:o}=e;let r,D;const{added:i}=h(Array.from(o),t),{removed:a,unchanged:c}=h(u,t),l=i.length>0,s=a.length>0;if(l||s){let e=Array.from(o);if(s){const t=new Set(a.map((e=>n().L3.toIdTableKey(e))));e=e.filter((e=>!t.has(n().L3.toIdTableKey(e))))}l&&(e=[...e,...i]),r=e,D=[...c,...i]}return{newMentionPointers:r,newInputMentionPointers:D}}function S(e,t){return(0,s().n4)(e,t)}function b(e){return!!e&&("workspace"===e.type||"teamspace"===e.type||"collection"===e.type||"page"===e.type)}function A(e){const{currentScopes:t,scope:u,isMultiScopeEnabled:o}=e;let r=[];if("everything"===u.type)r=[{type:"everything"}];else if(o){const e=t.filter((e=>"everything"!==e.type));if(e.some((e=>S(e,u))))r=e.filter((e=>!S(e,u)));else if("notion"===u.type){r=[...e.filter((e=>!b(e))),u]}else if(b(u)){r=[...e.filter((e=>"notion"!==e.type)),u]}else r=[...e,u]}else r=[u];return 0===r.length?[{type:"everything"}]:r}function M(e,t){switch(e.type){case"workflow":return{...e,searchScopes:t};case"search":return{...e,scopeForNextSearch:t[0]};case"researcher":return{...e,searchScope:t[0]};default:return e}}function I(e,t,u,n){if(!c().qXl(e))return!1;const l=c().uPN(e);for(const s of l)if(t.table===i().oo&&c().rie(s)){if(c().NcG(s)===t.id)return!0}else if(t.table===D().ev&&c().jIt(s)){const e=c().i$F(s);if(e&&e.id===t.id)return!0}else if(t.table===a().C0&&c().XkZ(s)){const e=c().vjW(s);if(e&&(0,r().ut)(e)&&t.id===o().Lj)return!0;if(e&&u&&n){if(_({spaceStore:u,botId:e,userStore:n})===t.id)return!0}}return!1}},671089:(e,t,u)=>{u.r(t),u.d(t,{checkmarkCircleIcon:()=>n,iconDefinition:()=>r});u(296540);var o=u(474848);const r={viewBox:"0 0 20 20",fittedViewBox:"2.37 2.37 15.25 15.26",svg:(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)("path",{d:"M12.876 7.982a.625.625 0 1 0-1.072-.644L9.25 11.595 7.815 9.92a.625.625 0 0 0-.95.813l2 2.334a.625.625 0 0 0 1.01-.085z"}),(0,o.jsx)("path",{d:"M10 2.375a7.625 7.625 0 1 0 0 15.25 7.625 7.625 0 0 0 0-15.25M3.625 10a6.375 6.375 0 1 1 12.75 0 6.375 6.375 0 0 1-12.75 0"})]})},n=(0,u(340498).wt)("checkmarkCircle",r,"default")},738508:(e,t,u)=>{u.r(t),u.d(t,{cursorIcon:()=>n,iconDefinition:()=>r});u(296540);var o=u(474848);const r={viewBox:"0 0 20 20",fittedViewBox:"1.25 0 17.5 20",svg:(0,o.jsxs)(o.Fragment,{children:[(0,o.jsxs)("g",{className:"logo-light-mode",children:[(0,o.jsxs)("g",{clipPath:"url(#clip0_16020_205)",children:[(0,o.jsx)("path",{fill:"#757575",d:"m9.995 9.987 8.658 4.999a.6.6 0 0 1-.226.226l-8.092 4.672a.68.68 0 0 1-.68 0l-8.092-4.672a.6.6 0 0 1-.226-.226z"}),(0,o.jsx)("path",{fill:"#525252",d:"M9.995 0v9.987l-8.658 4.999a.6.6 0 0 1-.082-.309v-9.38c0-.22.117-.424.308-.534L9.655.09a.7.7 0 0 1 .34-.09"}),(0,o.jsx)("path",{fill:"#404040",d:"M18.652 4.989a.6.6 0 0 0-.225-.226L10.334.09A.7.7 0 0 0 9.995 0v9.987l8.658 4.999a.6.6 0 0 0 .083-.309v-9.38c0-.11-.03-.216-.083-.308"}),(0,o.jsx)("path",{fill:"#D9D9D9",d:"M18.047 5.339a.29.29 0 0 1 0 .29l-7.859 13.61c-.053.093-.193.055-.193-.05v-8.97a.4.4 0 0 0-.054-.201z"}),(0,o.jsx)("path",{fill:"#fff",d:"m18.047 5.339-8.106 4.68a.4.4 0 0 0-.147-.147L2.027 5.387c-.092-.053-.054-.193.052-.193h15.717c.111 0 .202.06.25.145"})]}),(0,o.jsx)("defs",{children:(0,o.jsx)("clipPath",{id:"clip0_16020_205",children:(0,o.jsx)("path",{fill:"#fff",d:"M1.255 0h17.49v20H1.256z"})})})]}),(0,o.jsxs)("g",{className:"logo-dark-mode",children:[(0,o.jsxs)("g",{clipPath:"url(#clip0_16020_213)",children:[(0,o.jsx)("path",{fill:"#6E6E6E",d:"m9.995 9.987 8.658 4.999a.6.6 0 0 1-.226.226l-8.092 4.672a.68.68 0 0 1-.68 0l-8.092-4.672a.6.6 0 0 1-.226-.226z"}),(0,o.jsx)("path",{fill:"#4A4A4A",d:"M9.995 0v9.987l-8.658 4.999a.6.6 0 0 1-.082-.309v-9.38c0-.22.117-.424.308-.534L9.655.09a.7.7 0 0 1 .34-.09"}),(0,o.jsx)("path",{fill:"#383838",d:"M18.652 4.989a.6.6 0 0 0-.225-.226L10.334.09A.7.7 0 0 0 9.995 0v9.987l8.658 4.999a.6.6 0 0 0 .083-.309v-9.38c0-.11-.03-.216-.083-.308"}),(0,o.jsx)("path",{fill:"#C9C9C9",d:"M18.047 5.339a.29.29 0 0 1 0 .29l-7.859 13.61c-.053.093-.193.055-.193-.05v-8.97a.4.4 0 0 0-.054-.201z"}),(0,o.jsx)("path",{fill:"#fff",d:"m18.047 5.339-8.106 4.68a.4.4 0 0 0-.147-.147L2.027 5.387c-.092-.053-.054-.193.052-.193h15.717c.111 0 .202.06.25.145"})]}),(0,o.jsx)("defs",{children:(0,o.jsx)("clipPath",{id:"clip0_16020_213",children:(0,o.jsx)("path",{fill:"#fff",d:"M1.255 0h17.49v20H1.256z"})})})]})]})},n=(0,u(340498).wt)("cursor",r,"default")},763765:(e,t,u)=>{u.d(t,{t:()=>r});class o extends(()=>u(757695))().Store{getInitialState(){return{loaded:!1}}USEWITHCAUTION_markStatsigUserFetched(e){const{userId:t,spaceId:u,fetched:o}=e;this.setState({loaded:o,userId:t,spaceId:u})}USEWITHCAUTION_isFetchedForSpaceAndUserId(e){const{spaceId:t,userId:u}=e;return this.state.loaded&&this.state.spaceId===t&&this.state.userId===u}}const r=new o;(0,u(852832).exposeDebugValue)("statsigUserLoadingStatusStore",r)},766854:(e,t,u)=>{u.d(t,{H:()=>g,Q:()=>_});u(898992),u(672577);var o=()=>u(230711),r=()=>u(907258),n=()=>u(135168),D=()=>u(242422),i=()=>u(929219),a=()=>u(711339),c=()=>u(295633),l=()=>u(700500),s=()=>u(179034),d=()=>u(201980),p=()=>u(384944),f=()=>u(649813),C=()=>u(390650),F=()=>u(381678),m=()=>u(622811),y=()=>u(491848),v=()=>u(482871);function E(e,t,u){const r=(0,F()._)(e),n=null==r?void 0:r.id;if(!n||!u)return;if(!D().default.checkGate({gateName:"full_access_for_created_collection_pages"}))return;if(t.canAdmin())return;const i=t.getSpaceStore();return i&&(0,o().dp)(i,n).isMember()?[{role:"editor",type:"user_permission",user_id:n}]:void 0}function _(e){const{collectionContextStore:t,transaction:u}=e;return(0,y().w)({collectionContextStore:t,transaction:u}),g(e)}function g(e){var t,u,o;const{environment:F,collectionContextStore:y,groupsPointer:_,insertAtIndex:g,shouldCoerce:h,templateStore:B,transaction:S,from:b,tracker:A,inMemoryRecordCache:M,isKeyboard:I,title:w}=e,x=a().default.DO_NOT_USE_markLegacy("collections.add_item_lag");a().default.DO_NOT_USE_measureAfterNextFlushLegacy(x,{environment:F,getData:()=>({...C().kz(y),from:b.createBlock})});const k="collectionTypedView"===y.contextTypeFromStoreState,T=y.databaseTypeFromStoreState,R=y.collectionStoresStore.state,O=R.find((e=>e.canEdit()||e.canEditCollection()||e.canEditContentOnly()))||R[0],V=null===(t=(0,n().f)(O))||void 0===t?void 0:t.id,U=r().default.state.currentUserSettingsStore,N=k&&T&&V&&U&&[...U.getAllPreferredCollections(V),...U.getPreferredCollectionsOfType(V,T)]||[];let P;const j=_[0];if("group_header"===b.createBlock&&"location"===j.value.type){const e=j.value.value;if(e){P=R.find((t=>t.id===e.id&&(t.canEdit()||t.canEditCollection()||t.canEditContentOnly())))}}else P=function(e,t){for(const u of e){const e=t.find((e=>e.id===u&&(e.canEdit()||e.canEditCollection()||e.canEditContentOnly())));if(e)return e}}(N,R);const G=P??O,L=null==G?void 0:G.getSpaceId(),W=y.collectionViewStore(),H=y.getViewType(),z=p().Wv({environment:F,type:l().xd.page,inMemoryRecordCache:M,transaction:S,spaceId:L,tracker:A,permissions:E(F,G,L),properties:{title:(0,d().x9d)(w)}});if(!G||!W||!H)return{coercionSucceeded:!0,newStore:z};const q=null===(u=y.groupsStore.getGroupState(_))||void 0===u?void 0:u.groupUiParentStore;if(!q)return{coercionSucceeded:!0,newStore:z};const K=c().B.createChildStore(q,{table:s().ev,id:z.id});B&&i().A.state.online&&f().TB({title:"template",environment:F,store:z,templateStore:B,isKeyboard:I??!1,isCreateIn:!1,transaction:S,from:b.initCollection??"collection_group_actions"});const Y=(0,m().j)({environment:F,store:z,collectionStore:G,collectionContextStore:y,groupsPointer:_,shouldCoerce:h,transaction:S}),$=(null===(o=y.groupsStore.getGroupState(_))||void 0===o||null===(o=o.reducerResultStore.state)||void 0===o?void 0:o.blockIds)||[],X=void 0!==g?g:$.length,Z=y.permissionScopesStore.state;if((D().default.checkGate({gateName:"can_create_pages_in_collection_permission"})?Z.canCreatePagesInCollection:Z.canEditContent)||k){const e=[...$.slice(0,X),K.id,...$.slice(X)];(0,v().z)({resultIds:e,collectionViewStore:W,collectionContextStore:y,transaction:S})}return{coercionSucceeded:Y,newStore:K}}},839754:(e,t,u)=>{u.d(t,{Bi:()=>S,My:()=>B,ZM:()=>A,_M:()=>b,navigateToWorkflowTemplateOnboardingModal:()=>M});u(16280),u(944114),u(517642),u(658004),u(733853),u(845876),u(432475),u(515024),u(731698),u(898992),u(354520),u(672577),u(581454);var o=()=>u(907258),r=()=>u(295633),n=()=>u(584262),D=()=>u(663077),i=()=>u(179034),a=()=>u(201980),c=()=>u(896628),l=()=>u(384944),s=()=>u(730969),d=()=>u(840153),p=()=>u(339798),f=()=>u(180762),C=()=>u(799832),F=()=>u(111379),m=()=>u(535960),y=()=>u(31173),v=()=>u(295304),E=()=>u(244828),_=()=>u(373444),g=()=>u(165592),h=()=>u(204067);function B({transaction:e,collectionStore:t,propertyTemplates:u}){var o;const r=(null===(o=t.getParentBlockStore())||void 0===o?void 0:o.getCollectionViewStores().filter((e=>"table"===e.getType())))??[];if(0===r.length)return;const n=[];for(const a of u){const e=(0,h().S1)({collectionStore:t,templateId:a.templateId,instancePointerType:"property"});e&&n.push({property:e.id,visible:!(0,D().Sz)(a),...a.tablePropertyFormat})}if(0!==n.length)for(const D of r){var i;const t=(null===(i=D.getPropertyFormatsStore("table_properties"))||void 0===i?void 0:i.getValue())??[],u=new Set(t.map((e=>e.property))),o=n.filter((e=>!u.has(e.property)));0!==o.length&&c().zA({stores:[D],update:{table_properties:[...t,...o]},transaction:e})}}function S({transaction:e,collectionStore:t,propertyTemplates:u}){const o=[];for(const i of u){const e=(0,h().S1)({collectionStore:t,templateId:i.templateId,instancePointerType:"property"});e&&o.push({property:e.id,visible:!0})}const r=t.getFormat().collection_page_properties??[],n=new Set(r.map((e=>e.property))),D=o.filter((e=>!n.has(e.property)));D.length&&c().zA({stores:[t],update:{collection_page_properties:[...r,...D]},transaction:e})}function b({environment:e,newPageStore:t,result:u}){"accepted_template"!==u.type&&"accepted_empty_collection"!==u.type||E().createAndCommit({environment:e,canUndo:!1,perform:o=>{const n=t.getTitleValue();if(l().zv({store:t,transaction:o,data:{alive:!1}}),"accepted_empty_collection"===u.type&&!(0,a().w9s)(n)){const D=r().B.createChildStore(t,{table:"block",id:u.blockId}).getTitleStore();D&&v().yr({environment:e,transaction:o,tokens:n,index:0,store:D})}const D=t.getParentStore();if((null==D?void 0:D.table)===i().ev){const e=D.getContentIds();l().zv({store:D,transaction:o,data:{content:e.filter((e=>e!==t.id))}})}},userAction:"clean_up_empty_new_page"})}function A({environment:e,userAction:t,result:u,existingCollectionViewBlockStore:o,existingCollectionStore:r}){if("canceled"!==u.type){if("accepted_empty_collection"===u.type&&r){const o=r.getKeyStore("name"),n=(0,a().x9d)(u.newCollectionTitle);o&&E().createAndCommit({userAction:t,environment:e,canUndo:!0,perform:t=>v().R9({environment:e,store:o,transaction:t,value:n})})}if(o){var n;const e=null===(n=(0,C().U)(o))||void 0===n?void 0:n.settingsStore;e&&p().os({collectionSettingsStore:e})}if("accepted_template"===u.type&&null!=o&&o.isCollectionView()&&(null==o||!o.hasSingleSourceAndNoLinkedCollections())){const t=(0,C().U)(o),r=o.getCollectionViewStores().find((e=>{var t;return(null===(t=e.getCollectionStore())||void 0===t?void 0:t.id)===u.collectionId}));if(!t||!r)return;(0,f().t)({environment:e,collectionContextStore:t,collectionViewId:r.id,isFullScreen:t.isFullScreenStore.state,isRootChild:t.isRootChildStore.state,isInPeekRenderer:t.isInPeekRendererStore.state})}}}async function M({environment:e,collectionViewBlockStore:t}){const u=t.id;if(!t.isDefined()){const o=await(0,y().$)({environment:e,blockId:u});if(!o)return;e=await d().T({environment:e,newCurrentUserId:o}),t=new(r().B)(e,{table:i().ev,id:u}),await t.load()}const D=t.getSpaceId();if(!D)throw new Error("Space ID not found for collection block");const a=(0,F().k)(D);if(!a)throw new Error(`Space view not found for space ID: ${D}`);const{sidebarSpaceStore:c}=o().default.state;(null==c?void 0:c.id)!==D&&await(0,s().y)({environment:e,spaceViewStore:a});const l=t.getFormat();if("workflow_template_placeholder"===(null==l?void 0:l.collection_view_sub_type)&&null!=l&&l.placeholder_workflow_template_id&&t.isCollectionView()){const{getCollectionTemplateFromId:u}=await g().t.load(),o=u(l.placeholder_workflow_template_id);if(!o)throw new Error(`Collection template "${l.placeholder_workflow_template_id}" not found`);const{onNavigateToPlaceholderWorkflowTemplateBlock:r}=await _().O.load();r({environment:e,collectionTemplate:o,collectionViewBlockStore:t})}else(0,m().u)({environment:e,store:t,pageVisitSource:n().y8.WorkflowTemplatesDeeplink})}},888325:(e,t,u)=>{function o(e){return`${e.table}:${e.id}`}u.d(t,{_:()=>o})},890409:(e,t,u)=>{u.d(t,{Ah:()=>m,Dk:()=>f,Iv:()=>F,SF:()=>C,YO:()=>E,_f:()=>g,c_:()=>d,dW:()=>v,gW:()=>p,sp:()=>h,vN:()=>y});u(16280),u(944114),u(898992),u(354520),u(803949),u(581454),u(737550);var o=()=>u(496603),r=()=>u(973647),n=()=>u(534177),D=()=>u(842599),i=()=>u(239381),a=()=>u(179034),c=()=>u(798880),l=()=>u(201980),s=()=>u(241319);function d(e,t){e.DO_NOT_USE_commonTrackEvent({eventName:"add_automation_step",properties:t})}function p(e,t){e.DO_NOT_USE_commonTrackEvent({eventName:"delete_automation_step",properties:t})}function f(e,t){e.DO_NOT_USE_commonTrackEvent({eventName:"automation_create",properties:t})}function C(e,t){e.DO_NOT_USE_commonTrackEvent({eventName:"automation_update",properties:t})}function F(e,t){e.DO_NOT_USE_commonTrackEvent({eventName:"automation_delete",properties:t})}function m(e,t){e.DO_NOT_USE_commonTrackEvent({eventName:"automation_enable",properties:t})}function y(e,t){e.DO_NOT_USE_commonTrackEvent({eventName:"automation_disable",properties:t})}function v(e,t){e.DO_NOT_USE_commonTrackEvent({eventName:"automation_action_create",properties:t})}function E(e,t){e.DO_NOT_USE_commonTrackEvent({eventName:"automation_action_delete",properties:t})}function _(e){const{formulaAnalyticsModule:t,formulasModule:u,formulaTypecheckContextValues:o,getRecordModel:D,spaceId:a,value:c,featureGates:l}=e;if("formula"===c.type){if(!(0,n().O9)(c.value))return;const e=r().Q.unwrapOr(u.parseFormulaInputToAst(c.value),void 0);if(e){const r=u.addTypesToFormulaAST(e,{handleDataRequest:(0,i().zg)(D),spaceId:a,valueTypes:o,featureGates:l});return{...t.getFormulaAnalytics(e,{getRecordModel:D,typecheckContextValues:o}),formula_return_type:r.node.type,redacted_formula:t.getRedactedFormulaAsStringSync(e,{getRecordModel:D,typecheckContextValues:o})}}}else{if("simple"===c.type){if(!(0,n().O9)(c.value))return;return t.getSimpleFormulaAnalytics(c.value,{getRecordModel:D,typecheckContextValues:o})}(0,n().HB)(c.type)}}function g(e){const{automationActionModel:t,automationActionModels:u,formulaAnalyticsModule:r,formulasModule:a,formulaTypecheckContextValues:d,getRecordModel:p,featureGates:f,simpleFormulasModule:C}=e;return t.isType("complete_sprint")?{automation_action_id:t.pointer.id,type:"complete_sprint"}:t.isType("create_page")?function(e){const{automationActionModel:t,formulaAnalyticsModule:u,formulasModule:o,formulaTypecheckContextValues:r,getRecordModel:D,featureGates:i}=e,a=t.getConfig();let c,l=[];const s=null==a?void 0:a.collection,d=null==a?void 0:a.properties;if((0,n().O9)(s)&&(0,n().O9)(d)&&d.length>0){const e=D(s),f=null==e?void 0:e.getNormalizedSchema();(0,n().O9)(f)&&(l=d.map((e=>{var t;return(null===(t=f[e])||void 0===t?void 0:t.type)??"unknown"})));const C=null==a?void 0:a.values;if(o&&(0,n().O9)(C)){c=[];for(const e of d){var p;const n=null===(p=C[e])||void 0===p?void 0:p.value;if(!n)continue;const a=_({formulaAnalyticsModule:u,formulasModule:o,getRecordModel:D,formulaTypecheckContextValues:r,spaceId:t.spaceId,value:n,featureGates:i});a&&c.push(a)}}}return{automation_action_id:t.pointer.id,property_formula_stats:c,property_types:l,type:"create_page"}}({automationActionModel:t,formulaAnalyticsModule:r,formulasModule:a,formulaTypecheckContextValues:d,getRecordModel:p,featureGates:f}):t.isType("duplicate_blocks")?{automation_action_id:t.pointer.id,type:"duplicate_blocks"}:t.isType("modal_confirmation")?function(e){const{automationActionModel:t,formulaAnalyticsModule:u,formulasModule:o,formulaTypecheckContextValues:r,getRecordModel:D,featureGates:i}=e,a=t.getConfig(),c=[];if(o&&(0,n().O9)(a)&&a.text){const e=_({formulasModule:o,formulaAnalyticsModule:u,getRecordModel:D,formulaTypecheckContextValues:r,spaceId:t.spaceId,value:a.text,featureGates:i});e&&c.push(e)}return{automation_action_id:t.pointer.id,formula_stats:c,type:"modal_confirmation"}}({automationActionModel:t,formulaAnalyticsModule:r,formulasModule:a,formulaTypecheckContextValues:d,getRecordModel:p,featureGates:f}):t.isType("open_page")?{automation_action_id:t.pointer.id,type:"open_page"}:t.isType("query_collection")?{automation_action_id:t.pointer.id,type:"query_collection"}:t.isType("send_in_app_notification")?function(e){var t;const{automationActionModel:u,formulaAnalyticsModule:o,formulasModule:r,formulaTypecheckContextValues:D,getRecordModel:i,featureGates:a,simpleFormulasModule:c}=e,s={automation_action_id:u.pointer.id,messageCharacterCount:0,type:"send_in_app_notification"},d=u.getConfig();if(!(0,n().O9)(d))return s;if((0,n().O9)(d.target))if("formula"===d.target.type&&(0,n().O9)(d.target.value)){if(s.targetData={type:"formula",numUserFormulaTargets:(0,l().Fbh)(d.target.value.value).length,numFormulaContextTargets:c.getReferencedContextValueIds(d.target.value).length},r){const e=_({formulasModule:r,formulaAnalyticsModule:o,getRecordModel:i,formulaTypecheckContextValues:D,spaceId:u.spaceId,value:d.target.value,featureGates:a});e&&(s.formula_stats??=[],s.formula_stats.push(e))}}else if("property"===d.target.type&&(0,n().O9)(d.target.propertyId)&&(0,n().O9)(d.target.collectionPointer)){const e=i(d.target.collectionPointer),t=null==e?void 0:e.getSchema();var p;(0,n().O9)(t)&&(s.targetData={type:"property",propertyType:null===(p=t[d.target.propertyId])||void 0===p?void 0:p.type})}if((0,n().O9)(null===(t=d.notification_message)||void 0===t?void 0:t.value)&&(s.messageCharacterCount=(0,l().FAw)(d.notification_message.value),r)){const e=_({formulasModule:r,formulaAnalyticsModule:o,getRecordModel:i,formulaTypecheckContextValues:D,spaceId:u.spaceId,value:d.notification_message,featureGates:a});e&&(s.formula_stats??=[],s.formula_stats.push(e))}return s}({automationActionModel:t,formulaAnalyticsModule:r,formulasModule:a,formulaTypecheckContextValues:d,getRecordModel:p,featureGates:f,simpleFormulasModule:C}):t.isType("send_gmail_notification")?function(e){var t,u,r,i,a,s,d;const{automationActionModel:p,formulaAnalyticsModule:f,formulasModule:C,formulaTypecheckContextValues:F,getRecordModel:m,featureGates:y}=e,v=p.getConfig();if(!(0,n().O9)(v))return{automation_action_id:p.pointer.id,fields:{},recipient_domains:{},type:"send_gmail_notification"};const E=Object.fromEntries(Object.entries(v||{}).map((([e,t])=>{var u;return"formula"===(null==t?void 0:t.type)?[e,Boolean(null==t||null===(u=t.value)||void 0===u?void 0:u.value)]:"simple"===(null==t?void 0:t.type)?[e,Boolean(null==t?void 0:t.value)]:[e,Boolean(t)]}))),{to:g,cc:h,bcc:B}=v,S=[...(null==g||null===(t=g.value)||void 0===t?void 0:t.value)||[],...(null==h||null===(u=h.value)||void 0===u?void 0:u.value)||[],...(null==B||null===(r=B.value)||void 0===r?void 0:r.value)||[]],b=[...(0,l().Fbh)(S).map((e=>m({table:c().oo,id:e}))).map((e=>null==e?void 0:e.email)).filter(n().O9),...(0,D().C3)((0,l().k4p)(S))],A=o().Tr(b.map((e=>e.split("@")[1]))),M=[null===(i=v.to)||void 0===i?void 0:i.value,null===(a=v.cc)||void 0===a?void 0:a.value,null===(s=v.bcc)||void 0===s?void 0:s.value,null===(d=v.reply_to)||void 0===d?void 0:d.value,v.from_name,v.email_subject,v.email_body].map((e=>{if(C&&(0,n().O9)(e))return _({formulaAnalyticsModule:f,formulasModule:C,getRecordModel:m,formulaTypecheckContextValues:F,spaceId:p.spaceId,value:e,featureGates:y})})).filter(n().O9);return{automation_action_id:p.pointer.id,fields:E,formula_stats:M,recipient_domains:A,type:"send_gmail_notification"}}({automationActionModel:t,formulaAnalyticsModule:r,formulasModule:a,formulaTypecheckContextValues:d,getRecordModel:p,featureGates:f}):t.isType("slack_notification")?{automation_action_id:t.pointer.id,type:"slack_notification"}:t.isType("update_pages")?function(e){const{automationActionModel:t,automationActionModels:u,formulaAnalyticsModule:o,formulasModule:r,formulaTypecheckContextValues:D,getRecordModel:a,featureGates:c}=e,l=t.getConfig(),d=[],p=[],f=[];if((0,n().O9)(l)&&(0,n().O9)(l.target)&&(0,n().O9)(l.properties)&&l.properties.length>0){let e;if("variable"===l.target.type){const t=(0,i().y5)(l.target.id);if("action"===t.source){const t=(0,s().y)({actionModels:u,id:l.target.id}).collectionPointer;if((0,n().O9)(t)){const u=a(t);e=null==u?void 0:u.getNormalizedSchema()}}else{if("global"!==t.source||"button_page"!==t.global)throw new Error("Failed loading property schema");{const t=(0,i().IV)(D,l.target.id);if("block"===(null==t?void 0:t.type.type)&&(0,n().O9)(t.type.collection)){const u=a(t.type.collection);e=null==u?void 0:u.getNormalizedSchema()}}}}else if("collection"===l.target.type){const t=a(l.target.collection);e=null==t?void 0:t.getNormalizedSchema()}(0,n().O9)(e)&&l.properties.forEach((u=>{const i=e[u];if((0,n().O9)(i)&&(d.push(i.type),r&&(0,n().O9)(l.values))){const e=l.values[u];if((0,n().O9)(e)&&(p.push({type:i.type,operator:e.action}),e.value)){const u=_({formulasModule:r,formulaAnalyticsModule:o,getRecordModel:a,formulaTypecheckContextValues:D,spaceId:t.spaceId,value:e.value,featureGates:c});u&&f.push(u)}}}))}return{automation_action_id:t.pointer.id,property_configs:p,property_formula_stats:f,property_types:d,type:"update_pages"}}({automationActionModel:t,automationActionModels:u,formulaAnalyticsModule:r,formulasModule:a,formulaTypecheckContextValues:d,getRecordModel:p,featureGates:f}):t.isType("define_variables")?function(e){const{automationActionModel:t,formulaAnalyticsModule:u,formulasModule:o,formulaTypecheckContextValues:r,getRecordModel:D,featureGates:i}=e,a=t.getConfig(),c=[];if(o&&(0,n().O9)(a)&&a.values)for(const n of Object.values(a.values))if(n.value){const e=_({formulasModule:o,formulaAnalyticsModule:u,getRecordModel:D,formulaTypecheckContextValues:r,spaceId:t.spaceId,value:n.value,featureGates:i});e&&c.push(e)}return{automation_action_id:t.pointer.id,formula_stats:c,type:"define_variables"}}({automationActionModel:t,formulaAnalyticsModule:r,formulasModule:a,formulaTypecheckContextValues:d,getRecordModel:p,featureGates:f}):t.isType("http_request")?{automation_action_id:t.pointer.id,type:"http_request"}:t.isType("publish_site")?{automation_action_id:t.pointer.id,type:"publish_site"}:t.isType("worker")?{automation_action_id:t.pointer.id,type:"worker"}:void(0,n().HB)(t)}function h(e){const{automationModel:t,builderType:u="sidebar",formulaAnalyticsModule:o,formulasModule:r,formulaTypecheckContextValues:D,getRecordModel:i,featureGates:c,simpleFormulasModule:l,source:s}=e,d=[],p=t.getActionPointers().map((e=>i(e))).filter(n().O9);for(const a of t.getActionPointers()){const e=i(a);(0,n().O9)(e)&&d.push(g({automationActionModel:e,automationActionModels:p,formulaAnalyticsModule:o,formulasModule:r,formulaTypecheckContextValues:D,getRecordModel:i,featureGates:c,simpleFormulasModule:l}))}const f=[];let C,F,m;if(t.isEventType()){var y;const e=t.getEventConfiguration(),u=i(t.getParentPointer());C=t.getParentId();const o=t.getEventConfiguration();if("collection_view"===(null===(y=o.source)||void 0===y?void 0:y.type)){const e=i(o.source.pointer);(null==e?void 0:e.parent_table)===a().ev&&(m=null==e?void 0:e.parent_id),F=null==o?void 0:o.source.pointer.id}const r=null==u?void 0:u.getNormalizedSchema();if((0,n().O9)(r)){const{pagesAdded:t,pagePropertiesEdited:u}=e;if(t&&f.push({type:"page"}),"any"===u.type)f.push({condition:"any",type:"property"});else if("none"===u.type)f.push({condition:"none",type:"property"});else{let e=[];"some"===u.type?e=u.some??[]:"all"===u.type&&(e=u.all??[]);const t=[],o=[];e.forEach((e=>{var u;const D=null===(u=r[e.property])||void 0===u?void 0:u.type;(0,n().O9)(D)&&(t.push({type:D,operator:e.filter.operator}),o.push(D))})),f.push({condition:u.type,property_configs:t,property_types:o,type:"property"})}}}else if(t.isButtonType())f.push({type:"button"});else if(t.isRecurrenceType()){var v;f.push({type:"recurrence",frequency:null===(v=t.getTrigger().recurrence)||void 0===v?void 0:v.frequency})}else(0,n().HB)(t);return{automation_actions:d,automation_id:t.id,automation_triggers:f,collection_id:C,collection_view_id:F,collection_view_block_id:m,builder_type:u,source:s}}},922952:(e,t,u)=>{u.d(t,{u:()=>D});var o=()=>u(295633),r=()=>u(302996),n=()=>u(723085);function D(e){return e instanceof n().h||e instanceof r().SpaceStore||e instanceof o().B}},935432:(e,t,u)=>{u.d(t,{A:()=>D});var o=()=>u(416845),r=()=>u(357264),n=()=>u(788579);function D(e,t){if((0,o().pA8)(t)){const u=(0,n().$)(t.clientData);if(u)return"messageValues"in t.clientData?e.formatMessage(u,t.clientData.messageValues):e.formatMessage(u)}return e.formatMessage(r().k.generic_error)}},962753:(e,t,u)=>{u.d(t,{EH:()=>y,FO:()=>F,P$:()=>m,VA:()=>f,h0:()=>l,lM:()=>s,mq:()=>C});u(898992),u(581454),u(737550);var o=()=>u(907258),r=()=>u(242422),n=()=>u(763765),D=()=>u(613848),i=()=>u(496603),a=()=>u(534177),c=()=>u(822789);function l(e){const{currentUserRootStore:t}=o().default.state;if(!t)return!1;const u=t.getSpaceViewStores();return(0,i().oE)(null==u?void 0:u.map((e=>e.getSpaceId()))).map((t=>D().A.getData(e,{spaceId:t,userId:e.currentUser.id}))).some((e=>d(e)))}function s(e,t){return d(D().A.getData(e,{spaceId:t,userId:e.currentUser.id}))}function d(e){switch(null==e?void 0:e.membershipType){case void 0:case"none":case"page_guest":return!1;case"restricted_member":case"member":case"membership_admin":case"owner":return!0===e.is_sales_assisted;default:(0,a().HB)(e)}}function p(e,t){if(!t)return"control";if(s(e,t))return"control";const u=r().default.getEligibleGroup({experimentId:"ai_product_retention_simplified_input",defaultGroup:"control"});return"input"===u||"input_and_ask_mode"===u?u:"control"}function f(){switch(r().default.getEligibleGroup({experimentId:"ai_product_retention_agent_follow_ups",defaultGroup:"control"})){case"button_nudge":return["button","nudge"];case"button_control":return["button","default"];case"nudge":return["nudge"];default:return}}function C(e,t){const u=r().default.checkGate({gateName:"agent_deep_find"}),o=void 0!==t&&s(e,t),D=e.currentUser.id,i=!t||!D||n().t.USEWITHCAUTION_isFetchedForSpaceAndUserId({spaceId:t,userId:D}),a=u||!o&&i&&"on"===r().default.getEligibleGroup({experimentId:"ai_product_retention_deepfind",defaultGroup:"control"}),c=m(e,t);return{agentDeepFindEnabled:a,useReadOnlyMode:a&&c}}function F(e,t){if(t?(0,c().vp)(t):(0,c().hw)())return!0;return"control"!==p(e,t)}function m(e,t){return"input_and_ask_mode"===p(e,t)}function y(){return"on"===r().default.getEligibleGroup({experimentId:"ai_product_retention_agent_speculative_search",defaultGroup:"control"})}},966759:(e,t,u)=>{u.d(t,{i:()=>n});var o=()=>u(390650),r=()=>u(175213);function n(e){const{environment:t,collectionContextStore:u,property_type:n,from:D,property:i,...a}=e,c=(0,o().sl)(u)||{};(0,r().G)(t,{property:i,property_type:n,from:D,...a,...c})}}}]);