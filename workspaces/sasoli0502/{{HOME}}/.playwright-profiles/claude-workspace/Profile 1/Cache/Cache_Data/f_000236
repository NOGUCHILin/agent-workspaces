"use strict";(globalThis.webpackChunknotion_next=globalThis.webpackChunknotion_next||[]).push([[72181,79565],{15386:(e,t,i)=>{i.r(t),i.d(t,{AiSuggestionsLoadingIndicator:()=>l});i(296540);var n=()=>i(807449),r=()=>i(412237),o=()=>i(774952),a=i(474848);function l(){return(0,a.jsxs)("span",{style:{display:"flex",alignItems:"center",marginInlineStart:16,marginInlineEnd:16,width:150},children:[(0,a.jsx)(n().I,{icon:r().aiFaceSmallIcon,size:"sm",colorVariant:"secondary",style:{display:"inline-flex",marginInlineEnd:6}}),(0,a.jsx)(o().c,{styleKey:"captionMedium"})]})}},271611:(e,t,i)=>{i.d(t,{j:()=>m});i(16280),i(517642),i(658004),i(733853),i(845876),i(432475),i(515024),i(731698),i(898992),i(354520);var n=()=>i(242422),r=()=>i(496603),o=()=>i(753812),a=()=>i(383070),l=()=>i(680074),s=()=>i(63636),c=()=>i(909057),u=()=>i(726637),d=()=>i(130382);function g(e){const{collectionStore:t,collectionViewStore:i,collectionNameText:n,device:r,aiPropertySuggestionConfig:o,isAiEnabled:a,isDatabaseNewbie:l,isGhostColumnMode:s,shouldSkipDatabaseNewbieCheck:c=!1}=e;return c||l?a?(g=i.getCreatedTime(),p=o.max_database_age_days,(0,d().Mn)(g)<=p?s||(m=t.getSchema(),h=o.max_non_title_properties,Object.values(m).filter((e=>e&&"title"!==e.type)).length<=h)?function(e){var t;const i=(null==e?void 0:e.property_filters)&&(null==e||null===(t=e.property_filters)||void 0===t?void 0:t.length)>0,n=(null==e?void 0:e.board_columns_by)||(null==e?void 0:e.collection_group_by);return!i&&!n}(i.getFormat())?function(e){const t=e.trim().split(/\s+/);return t.length>0}(n)?function(e){return!u().A.isMobile&&!e.isTablet}(r)?{isEligible:!0}:{isEligible:!1,reason:"Device not eligible"}:{isEligible:!1,reason:"Invalid title"}:{isEligible:!1,reason:"Sort/filter/group actions taken"}:{isEligible:!1,reason:"Too many properties"}:{isEligible:!1,reason:"Database too old"}):{isEligible:!1,reason:"AI is not enabled"}:{isEligible:!1,reason:"User is not a database newbie"};var g,p,m,h}const p={name:"Status",type:"status",options:[{id:"not-started",value:"Not started",color:"gray"},{id:"in-progress",value:"In progress",color:"yellow"},{id:"done",value:"Done",color:"green"}],exampleValues:["Not started","In progress","Done"]};async function m(e){const{collectionContextStore:t,collectionNameText:i,environment:u,device:d,setDatabasePropertySuggestion:m,cancelled:h,aiPropertySuggestionConfig:b,userLifecycleProfileStore:S,recentEventsStore:y}=e,f=t.collectionSuggestionStore;try{var w;const e=n().default;if(h.current)return;if(!e.checkGate({gateName:"adoption_enable_ai_property_suggestion"}))return;const v=t.collectionStore(),x=t.collectionViewStore();if(!v||!x)return;const C=v.id,T=x.id,P=(0,l().R$)(u),V=a().zD.isAiEnabled(),k=(0,s().cz)({userLifecycleProfileStore:S,recentEventsStore:y}),E=S.getProfile(),_=(0,c().k)({environment:u,analyticsEventCounts:k,lifecycleProfile:E}),A=e.getEligibleGroup({experimentId:"adoption_database_newbie_create_property_inline_suggestion",defaultGroup:"control",disableExposureLogging:!1}),M=e.getEligibleGroup({experimentId:"database_newbie_ai_property_preview",defaultGroup:"control",disableExposureLogging:!1});if(t.collectionSuggestionStore.setExperimentVariant(M),"control"===A&&"control"===M)return;const N="control"!==M,I=e.checkGate({gateName:"adoption_database_ai_property_suggestion_skip_newbie_check"});if(!g({collectionStore:v,collectionViewStore:x,collectionNameText:i,userSettingsStore:P,environment:u,device:d,aiPropertySuggestionConfig:b,isAiEnabled:V,isDatabaseNewbie:_,isGhostColumnMode:N,shouldSkipDatabaseNewbieCheck:I}).isEligible)return;f.setLoading(!0),f.setError(void 0);const W="control"!==M?M:A;if(h.current)return;const j=await async function(e){const{environment:t,collectionStore:i,collectionNameText:n,numAiPropertySuggestions:a,includeExampleValues:l}=e;try{var s;const e=i.getSpaceId(),c=i.id;if(!e||!c)throw new Error("Missing spaceId or collectionId");const u=await o().callApi({eventName:"getAiSuggestedProperties",environment:t,data:{spaceId:e,collectionId:c,schema:r().oE(Object.values(i.getSchema())),collectionName:n,numSuggestion:a,propertyTypes:["select","multi_select","status","text","number"],includeExampleValues:l,numExampleValues:1},headers:{"x-notion-space-id":e}});if("success"!==u.type||null===(s=u.data)||void 0===s||null===(s=s.properties)||void 0===s||!s.length)throw new Error("Invalid API response");return u.data.properties}catch(c){return}}({environment:u,collectionStore:v,collectionNameText:i,numAiPropertySuggestions:b.num_ai_property_suggestions,includeExampleValues:N});if(h.current)return;let R=j;N&&j&&(R=j.filter((e=>e.exampleValues&&e.exampleValues.length>0)));const D=[p],F=null!==(w=R)&&void 0!==w&&w.length?R:D;m({suggestionProperty:F[0],suggestionType:W,collectionStoreId:C,collectionViewStoreId:T,allSuggestions:F,usedSuggestionIndices:new Set})}catch(v){f.setError(v instanceof Error?v:new Error("Failed to load suggestions")),f.setLoading(!1),f.setSuggestions([])}finally{f.setLoading(!1)}}},412237:(e,t,i)=>{i.r(t),i.d(t,{aiFaceSmallIcon:()=>o,iconDefinition:()=>r});i(296540);var n=i(474848);const r={viewBox:"0 0 16 16",fittedViewBox:"2.89 1.43 11.63 12.81",svg:(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("path",{d:"M7.204 1.93a3.47 3.47 0 0 0-4.097.39.625.625 0 1 0 .834.931 2.22 2.22 0 0 1 3.16.202.625.625 0 0 0 .944-.818 3.5 3.5 0 0 0-.84-.705m6.018.976A3.47 3.47 0 0 0 8.463 4.1l-5.077 8.476a.625.625 0 0 0 .437.938l4.41.715a.625.625 0 0 0 .2-1.234l-3.5-.568 4.602-7.685a2.22 2.22 0 0 1 3.822.02.625.625 0 1 0 1.08-.63 3.46 3.46 0 0 0-1.214-1.226m-7.83 2.105a1.094 1.094 0 1 0-.35 2.159 1.094 1.094 0 0 0 .35-2.159"}),(0,n.jsx)("path",{d:"M10.762 5.881a1.093 1.093 0 1 0-.35 2.159 1.093 1.093 0 0 0 .35-2.159"})]})},o=(0,i(340498).wt)("aiFaceSmall",r,"small")},452845:(e,t,i)=>{i.d(t,{I:()=>o});var n=()=>i(564884),r=()=>i(390650);function o(e){const{environment:t,collectionContextStore:i,...o}=e,a=(0,r().sl)(e.collectionContextStore);a&&a.view_type&&(0,n().u)({environment:e.environment,event:{eventName:"collection_ai_property_suggestions",eventProperties:{...a,...o}}})}},608145:(e,t,i)=>{i.r(t),i.d(t,{iconDefinition:()=>n,sparklesSmallIcon:()=>r});i(296540);const n={viewBox:"0 0 16 16",fittedViewBox:"1.17 1.53 13.65 12.93",svg:(0,i(474848).jsx)("path",{d:"M4.577 1.536a.7.7 0 0 0-.7.7c0 .362-.236.87-.684 1.317-.448.448-.955.683-1.316.683a.7.7 0 1 0 0 1.4c.36 0 .868.236 1.316.684s.684.955.684 1.316a.7.7 0 1 0 1.4 0c0-.36.235-.868.683-1.316s.955-.684 1.317-.684a.7.7 0 1 0 0-1.4c-.362 0-.87-.235-1.317-.683-.448-.448-.683-.955-.683-1.317a.7.7 0 0 0-.7-.7m-.394 3.007q.208-.208.394-.451a4.4 4.4 0 0 0 .844.844 4.4 4.4 0 0 0-.844.845 4.4 4.4 0 0 0-.845-.845 4 4 0 0 0 .451-.393m5.887.413a.7.7 0 0 0-.7.7c0 .831-.392 1.674-1.036 2.318S6.847 9.01 6.016 9.01a.7.7 0 1 0 0 1.4c.831 0 1.674.392 2.318 1.036s1.036 1.487 1.036 2.318a.7.7 0 1 0 1.4 0c0-.831.392-1.674 1.036-2.318s1.487-1.036 2.318-1.036a.7.7 0 1 0 0-1.4c-.831 0-1.674-.392-2.318-1.036S10.77 6.487 10.77 5.656a.7.7 0 0 0-.7-.7m-.746 4.008a5.2 5.2 0 0 0 .746-.941 5.2 5.2 0 0 0 1.687 1.687 5.2 5.2 0 0 0-1.687 1.687A5.2 5.2 0 0 0 8.383 9.71a5.2 5.2 0 0 0 .94-.746"})},r=(0,i(340498).wt)("sparklesSmall",n,"small")},631611:(e,t,i)=>{i.d(t,{Ui:()=>u,hP:()=>M,jw:()=>N,wy:()=>_});i(16280);var n,r=i(296540),o=i(474848);const a={fullPage:!0,mobileNative:!0,mobileWeb:!0,commandSearch:!0,mobileNativeTab:!0,searchPane:!0,mobileSearch:!1,writer:!1,corner:!1,mobileWriter:!1,workflowEditor:!1,inferenceTranscriptChatView:!1},l={fullPage:!0,mobileNative:!0,mobileWeb:!0,mobileNativeTab:!0,commandSearch:!1,searchPane:!1,mobileSearch:!1,writer:!1,corner:!1,mobileWriter:!1,workflowEditor:!1,inferenceTranscriptChatView:!1},s={mobileNative:!0,mobileWeb:!0,mobileSearch:!0,mobileWriter:!0,mobileNativeTab:!0,fullPage:!1,writer:!1,corner:!1,searchPane:!1,commandSearch:!1,workflowEditor:!1,inferenceTranscriptChatView:!1},c={writer:!0,mobileWriter:!0,mobileWeb:!1,mobileNative:!1,mobileSearch:!1,fullPage:!1,corner:!1,searchPane:!1,commandSearch:!1,workflowEditor:!1,mobileNativeTab:!1,inferenceTranscriptChatView:!1};function u(e){return c[e]}const d={corner:!0,searchPane:!0,fullPage:!1,mobileNative:!1,mobileWeb:!1,mobileSearch:!1,commandSearch:!1,writer:!1,mobileWriter:!1,workflowEditor:!1,mobileNativeTab:!1,inferenceTranscriptChatView:!1},g={corner:!0,searchPane:!0,fullPage:!0,mobileNative:!0,mobileWeb:!0,mobileSearch:!0,commandSearch:!0,mobileNativeTab:!0,writer:!1,mobileWriter:!1,workflowEditor:!1,inferenceTranscriptChatView:!1},p={corner:!0,searchPane:!0,fullPage:!0,mobileNative:!0,mobileNativeTab:!0,commandSearch:!0,mobileWeb:!1,mobileSearch:!1,writer:!1,mobileWriter:!1,workflowEditor:!1,inferenceTranscriptChatView:!0},m={corner:!0,searchPane:!0,fullPage:!0,commandSearch:!0,writer:!0,mobileWriter:!0,workflowEditor:!0,mobileNative:!1,mobileWeb:!1,mobileSearch:!1,mobileNativeTab:!1,inferenceTranscriptChatView:!1},h={corner:!0,searchPane:!0,commandSearch:!0,mobileNative:!0,mobileSearch:!0,mobileWeb:!0,writer:!1,fullPage:!1,mobileWriter:!1,workflowEditor:!1,mobileNativeTab:!1,inferenceTranscriptChatView:!1},b={corner:!0,writer:!0,mobileWriter:!0,fullPage:!1,searchPane:!1,commandSearch:!1,mobileNative:!1,mobileWeb:!1,mobileSearch:!1,workflowEditor:!1,mobileNativeTab:!1,inferenceTranscriptChatView:!1},S={corner:!0,fullPage:!0,searchPane:!0,mobileNative:!0,mobileNativeTab:!0,commandSearch:!0,mobileWeb:!0,mobileSearch:!0,writer:!1,mobileWriter:!1,workflowEditor:!1,inferenceTranscriptChatView:!1},y={corner:!0,fullPage:!0,searchPane:!1,mobileNative:!1,commandSearch:!1,mobileWeb:!1,mobileSearch:!1,writer:!1,mobileWriter:!1,workflowEditor:!1,mobileNativeTab:!1,inferenceTranscriptChatView:!1},f={corner:!0,fullPage:!0,commandSearch:!1,searchPane:!1,mobileNative:!1,mobileWeb:!1,mobileSearch:!1,writer:!1,mobileWriter:!1,workflowEditor:!1,mobileNativeTab:!1,inferenceTranscriptChatView:!1},w={fullPage:!0,writer:!0,corner:!0,commandSearch:!1,searchPane:!1,mobileNative:!1,mobileWeb:!1,mobileSearch:!1,mobileWriter:!1,workflowEditor:!1,mobileNativeTab:!1,inferenceTranscriptChatView:!1},v={corner:!0,fullPage:!1,writer:!1,commandSearch:!1,searchPane:!1,mobileNative:!1,mobileWeb:!1,mobileSearch:!1,mobileWriter:!1,workflowEditor:!1,mobileNativeTab:!1,inferenceTranscriptChatView:!1},x={fullPage:!0,writer:!1,corner:!1,commandSearch:!1,searchPane:!1,mobileNative:!1,mobileWeb:!1,mobileSearch:!1,mobileWriter:!1,workflowEditor:!1,mobileNativeTab:!1,inferenceTranscriptChatView:!1},C={writer:!0,fullPage:!1,corner:!1,commandSearch:!1,searchPane:!1,mobileNative:!1,mobileWeb:!1,mobileSearch:!1,mobileWriter:!1,workflowEditor:!1,mobileNativeTab:!1,inferenceTranscriptChatView:!1},T={corner:!0,fullPage:!1,searchPane:!1,mobileNative:!1,commandSearch:!1,mobileWeb:!1,mobileSearch:!1,writer:!1,mobileWriter:!1,workflowEditor:!1,mobileNativeTab:!1,inferenceTranscriptChatView:!1},P={corner:!0,fullPage:!0,searchPane:!1,mobileNative:!1,commandSearch:!1,mobileWeb:!1,mobileSearch:!1,writer:!1,mobileWriter:!1,workflowEditor:!1,mobileNativeTab:!1,inferenceTranscriptChatView:!1},V={fullPage:!0,corner:!1,searchPane:!1,mobileNative:!1,commandSearch:!1,mobileWeb:!1,mobileSearch:!1,writer:!1,mobileWriter:!1,workflowEditor:!1,mobileNativeTab:!1,inferenceTranscriptChatView:!1},k={fullPage:!0,corner:!1,searchPane:!1,mobileNative:!1,commandSearch:!1,mobileWeb:!1,mobileSearch:!1,writer:!1,mobileWriter:!1,workflowEditor:!1,mobileNativeTab:!1,inferenceTranscriptChatView:!1},E={commandSearch:!1,searchPane:!1,fullPage:!0,writer:!0,corner:!0,mobileNative:!0,mobileWeb:!0,mobileSearch:!0,mobileWriter:!0,workflowEditor:!0,mobileNativeTab:!0,inferenceTranscriptChatView:!0};class _{constructor(e){this.type=e}get renderAsFullPage(){return a[this.type]}get renderChatHistoryAsFullPage(){return l[this.type]}get isCommandSearchOrSearchPane(){return this.isType("commandSearch")||this.isType("searchPane")}get isQuickSearchMode(){return this.isType("commandSearch")}get isMobile(){return s[this.type]}get isWriter(){return c[this.type]}isType(...e){return e.includes(this.type)}get shouldShowExpandToFullPageChat(){return d[this.type]}get isValidSurfaceForAttachmentUploads(){return p[this.type]}get shouldShowChatHistory(){return g[this.type]}get canUseCurrentPageContext(){return m[this.type]}get showCloseButton(){return h[this.type]}get surfaceSupportsContextWithSelection(){return b[this.type]}get surfaceSupportsParameterization(){return S[this.type]}get surfaceSupportsTutorialAction(){return y[this.type]}get surfaceSupportsShareAnswerAction(){return f[this.type]}get canShowNewChonkifiedInput(){return w[this.type]}canShowSessionStarterInContext(e){return _[e.from].isWriter===this.isWriter}get canUseUpdatedSkillDisplayFormat(){return T[this.type]}get canUseGetAiConnectorScopeMenuFooter(){return P[this.type]}get canShowNewFullPageWelcomeState(){return x[this.type]}get canShowNewWriterDesign(){return C[this.type]}get canShowNewCornerChatWelcomeState(){return v[this.type]}get supportsStartingNewChatAsInferenceTranscript(){return V[this.type]}get supportsChatHistoryWithInferenceTranscripts(){return k[this.type]}get shouldOpenAssistantMenuOnRestoreChatSession(){return E[this.type]}}n=_,_.fullPage=new n("fullPage"),_.corner=new n("corner"),_.searchPane=new n("searchPane"),_.commandSearch=new n("commandSearch"),_.mobileNative=new n("mobileNative"),_.mobileNativeTab=new n("mobileNativeTab"),_.writer=new n("writer"),_.mobileWeb=new n("mobileWeb"),_.mobileSearch=new n("mobileSearch"),_.mobileWriter=new n("mobileWriter"),_.workflowEditor=new n("workflowEditor"),_.inferenceTranscriptChatView=new n("inferenceTranscriptChatView");const A=r.createContext(void 0);function M(e){return(0,o.jsx)(A.Provider,{value:e.surface,children:e.children})}function N(){const e=r.useContext(A);return e||_.corner}A.displayName="AssistantSurfaceContext"},685736:(e,t,i)=>{i.r(t),i.d(t,{TableSuggestionToggle:()=>c});var n=i(296540),r=()=>i(726637),o=()=>i(401497),a=()=>i(69708),l=()=>i(358898),s=i(474848);const c=n.memo((function(e){const{isEnabled:t,environment:c,collectionContextStore:d}=e,g=(0,o().DP)(),p=(0,o().IS)((()=>({icon:{fill:t?i(100622).Tj.blue.icon.accentPrimary:(0,i(852424).P0)({theme:g,willShowOnTooltip:!1})},button:{display:"flex",alignItems:"center",justifyContent:"center",borderRadius:6,width:r().A.isMobile?32:28,height:r().A.isMobile?32:28}})),[t,g]),m=(0,n.useCallback)((()=>{const e=d.collectionSuggestionStore,n=!t;e.setEnabled(n),(0,i(452845).I)({environment:c,collectionContextStore:d,action:n?"enable":"disable"})}),[c,t,d]);return(0,s.jsx)(i(26697).m,{renderTooltip:()=>(0,s.jsx)(a().sA,{...u.aiPropertySuggestions}),render:e=>(0,s.jsx)(i(718827).Ay,{...e,style:p.button,onMouseDown:l().tr,onClick:m,className:i(882722).LcC,"aria-label":u.aiPropertySuggestions.defaultMessage,children:(0,s.jsx)("div",{style:l().w6,children:(0,s.jsx)(i(807449).I,{icon:i(608145).sparklesSmallIcon,size:"sm",style:p.icon})})})})})),u=(0,a().YK)({aiPropertySuggestions:{id:"TableSuggestionToggle.enableAiPropertySuggestions",defaultMessage:"AI suggestions"}})},774952:(e,t,i)=>{i.d(t,{U:()=>h,c:()=>b});i(296540);var n=()=>i(401497),r=()=>i(758304),o=()=>i(69708),a=()=>i(100622),l=()=>i(284371),s=()=>i(135221),c=()=>i(115512),u=()=>i(827368),d=()=>i(781317),g=i(474848);const p=(0,o().YK)({brewing:{id:"AgentThinkingStep.brewing",defaultMessage:"Brewing"},pondering:{id:"AgentThinkingStep.pondering",defaultMessage:"Pondering"},crafting:{id:"AgentThinkingStep.crafting",defaultMessage:"Crafting"},processing:{id:"AgentThinkingStep.processing",defaultMessage:"Processing"},computing:{id:"AgentThinkingStep.computing",defaultMessage:"Computing"},generating:{id:"AgentThinkingStep.generating",defaultMessage:"Generating"},working:{id:"AgentThinkingStep.working",defaultMessage:"Working"},exploring:{id:"AgentThinkingStep.exploring",defaultMessage:"Exploring"},organizing:{id:"AgentThinkingStep.organizing",defaultMessage:"Organizing"},preparing:{id:"AgentThinkingStep.preparing",defaultMessage:"Preparing"},focusing:{id:"AgentThinkingStep.focusing",defaultMessage:"Focusing"},discovering:{id:"AgentThinkingStep.discovering",defaultMessage:"Discovering"},noodling:{id:"AgentThinkingStep.noodling",defaultMessage:"Noodling"},vibing:{id:"AgentThinkingStep.vibing",defaultMessage:"Vibing"},cooking:{id:"AgentThinkingStep.cooking",defaultMessage:"Cooking"}}),m=(0,i(534177).uv)(p);function h(e){if(void 0===e)return p.crafting;const t=function(e){let t=0;for(let i=0;i<e.length;i++)t=(t<<5)-t+e.charCodeAt(i),t&=t;return Math.abs(t)}(String(e)),i=t%m.length;return p[m[i]]}function b(e){const{styleKey:t,message:i=p.crafting,animationType:m="loading-dots",children:h}=e,{bodyStyleKey:b}=(0,u().yq)(),S=(0,u().Cd)(b),y=(0,n().IS)((()=>({messageContent:{...S,fontWeight:l().Wy.medium,color:a().Tj.text.secondary,display:"flex",alignItems:"center",gap:8,minWidth:0},messageWrapInner:{display:"flex",whiteSpace:"pre",alignItems:"center",gap:4,minWidth:0},loadingDotsContainer:{width:24,height:24},scrollingSquiggleContainer:{opacity:.3}})),[S]);return(0,g.jsxs)("div",{style:y.messageContent,children:[(0,g.jsx)("div",{role:"status","aria-live":"polite",style:c().Qg,children:"string"==typeof i?i:(0,g.jsx)(o().sA,{...i})}),function(){switch(m){case"scrolling-squiggle":return(0,g.jsx)("div",{style:y.scrollingSquiggleContainer,children:(0,g.jsx)(d().ScrollingSquiggle,{})});case"loading-dots":return(0,g.jsx)(s().A,{isTriColored:!0,styleParentContainer:y.loadingDotsContainer});case"none":return null}}(),(0,g.jsxs)("div",{style:y.messageWrapInner,children:[(0,g.jsx)(r().N,{styleKey:t||b,animate:!0,colorVariant:"secondary",text:"string"==typeof i?i:(0,g.jsx)(o().sA,{...i})}),h]})]})}},781317:(e,t,i)=>{i.r(t),i.d(t,{SCROLLING_SQUIGGLE_DEFAULTS:()=>l,ScrollingSquiggle:()=>s});var n=i(296540),r=()=>i(401497),o=()=>i(100622),a=i(474848);const l={width:24,height:16,tempo:18,minLoopSize:24,maxLoopSize:32,acceleration:.3,tailLength:72,strokeWidth:1.5,loopSpacing:1.3,modulationSpeed:.4,modulationPhaseOffset:2,tempoModulation:10,accelerationModulation:.12};function s(e){const{style:t,width:i=l.width,height:s=l.height,tempo:c=l.tempo,minLoopSize:u=l.minLoopSize,maxLoopSize:d=l.maxLoopSize,acceleration:g=l.acceleration,tailLength:p=l.tailLength,strokeWidth:m=l.strokeWidth,strokeColor:h,loopSpacing:b=l.loopSpacing,modulationSpeed:S=l.modulationSpeed,modulationPhaseOffset:y=l.modulationPhaseOffset,tempoModulation:f=l.tempoModulation,accelerationModulation:w=l.accelerationModulation}=e,v=(0,n.useRef)(null),x=(0,n.useRef)(),C=(0,n.useRef)(!0),T=(0,r().eP)(),P=(0,o().O4)({theme:T}),V=(0,n.useMemo)((()=>{const e=i,t=s,n=t/2,r=c,o=e/200*8*b,a=g,l=Math.min(u/100*t,.45*t),m=Math.min(d/100*t,.45*t);return{W:e,H:t,BASE_Y:n,FRAMES_PER_RAD:r,SUB_STEPS:3,DX_PER_RAD:o,ACC_FACTOR:a,MIN_R:l,MAX_R:m,R_BASE:(l+m)/2,R_VAR:(m-l)/2,R_FREQ1:.2,R_FREQ2:.1,TAIL_RADS:Math.max(3,p*Math.min(1,e/200)),PURGE_PAD_R:5,START_OFFSET:.95*e-m,D_THETA_PER_SECOND:Math.PI/r*60}}),[i,s,c,u,d,g,p,b]),k=(0,n.useMemo)((()=>({modulationSpeed:S,modulationPhaseOffset:y,tempoModulation:f,accelerationModulation:w})),[S,y,f,w]);return(0,n.useEffect)((()=>{const e=()=>{C.current=!document.hidden};return document.addEventListener("visibilitychange",e),()=>{document.removeEventListener("visibilitychange",e)}}),[]),(0,n.useEffect)((()=>{const e=v.current;if(!e)return;const t=e.getContext("2d",{willReadFrequently:!1,alpha:!0,desynchronized:!0});if(!t)return;e.width=2*i,e.height=2*s,t.scale(2,2),t.imageSmoothingEnabled=!1;const{W:n,H:r,BASE_Y:o,SUB_STEPS:a,DX_PER_RAD:l,ACC_FACTOR:u,MIN_R:d,R_BASE:g,R_VAR:p,R_FREQ1:b,R_FREQ2:S,TAIL_RADS:y,PURGE_PAD_R:f,START_OFFSET:w}=V;t.lineCap="round",t.lineJoin="round",t.strokeStyle=h||P.text.primary,t.lineWidth=m;let T=0,E=performance.now();const _=performance.now(),A=1e3,M=new Array(A);let N=0,I=0,W=0,j=0;let R=0;function D(e){const t=function(e){const t=.6*Math.sin(b*e)+.4*Math.sin(S*e+1.1);return Math.max(d,g+p*t)}(e);return{x:e*l+t*Math.cos(e),y:o-t*Math.sin(e),t:e}}function F(e){const t=performance.now(),i=Math.min((t-E)/1e3,.1);E=t;const o=(t-_)/1e3,s=Math.sin(2*Math.PI*k.modulationSpeed*o+k.modulationPhaseOffset),d=c+k.tempoModulation*s,g=u+k.accelerationModulation*s,p=Math.PI/Math.max(1,d)*60,m=j>5?Math.max(1,Math.floor(a/2)):a,h=p*i*(1+g*-Math.sin(T))/m;for(let n=0;n<m;n++)T+=h,M[I]=D(T),I=(I+1)%A,W<A?W++:N=(N+1)%A;const b=T-y;for(;W>0&&M[N].t<b-f;)N=(N+1)%A,W--;const S=T*l-w,v=S-R;R=S,Math.abs(v)<n?(v>0?e.clearRect(0,0,Math.ceil(v)+10,r):v<0&&e.clearRect(n+Math.floor(v)-10,0,10-v,r),e.clearRect(0,0,n,r)):e.clearRect(0,0,n,r),e.save(),e.translate(-S,0);let P,V=N,L=0;for(;L<W&&M[V].t<b;)V=(V+1)%A,L++;if(0===L||0===W)P=M[N];else if(L<W){const e=M[(V-1+A)%A],t=M[V],i=(b-e.t)/(t.t-e.t);P={x:e.x+(t.x-e.x)*i,y:e.y+(t.y-e.y)*i}}if(P&&W>0){e.beginPath(),e.moveTo(P.x,P.y);let t=V;for(let i=L;i<W;i++)e.lineTo(M[t].x,M[t].y),t=(t+1)%A;e.stroke()}e.restore();performance.now()-t>16?j++:j>0&&(j=Math.max(0,j-.1)),C.current?x.current=requestAnimationFrame((()=>F(e))):setTimeout((()=>{C.current&&(x.current=requestAnimationFrame((()=>F(e))))}),100)}return x.current=requestAnimationFrame((()=>F(t))),()=>{x.current&&cancelAnimationFrame(x.current)}}),[V,k,i,s,m,h,P.text.primary,c]),(0,a.jsx)("canvas",{ref:v,style:{width:i,height:s,display:"block",...t}})}},824561:(e,t,i)=>{i.r(t),i.d(t,{SHIMMER_WIDTH:()=>d,TableSuggestionPreviewRow:()=>g});i(581454);var n=i(296540),r=()=>i(590526),o=()=>i(401497),a=()=>i(100622),l=()=>i(236030);const s={status:[{displayValue:"Not Started",rawValue:"not-started"},{displayValue:"In Progress",rawValue:"in-progress"},{displayValue:"Complete",rawValue:"complete"},{displayValue:"On Hold",rawValue:"on-hold"}],select:[{displayValue:"High Priority",rawValue:"high-priority"},{displayValue:"Marketing",rawValue:"marketing"},{displayValue:"Design",rawValue:"design"},{displayValue:"Engineering",rawValue:"engineering"}],multi_select:[{displayValue:"Frontend, Design",rawValue:["frontend","design"]},{displayValue:"Backend",rawValue:["backend"]},{displayValue:"Research, UX",rawValue:["research","ux"]},{displayValue:"Marketing, Sales",rawValue:["marketing","sales"]}],date:[{displayValue:"Dec 15, 2024",rawValue:new Date("2024-12-15")},{displayValue:"Jan 1, 2025",rawValue:new Date("2025-01-01")},{displayValue:"Feb 28, 2025",rawValue:new Date("2025-02-28")},{displayValue:"Mar 15, 2025",rawValue:new Date("2025-03-15")}],text:[{displayValue:"Sample text",rawValue:"Sample text"},{displayValue:"Example description",rawValue:"Example description"},{displayValue:"Notes here",rawValue:"Notes here"},{displayValue:"Additional info",rawValue:"Additional info"}],number:[{displayValue:"42",rawValue:42},{displayValue:"100",rawValue:100},{displayValue:"3.14",rawValue:3.14},{displayValue:"0",rawValue:0}],checkbox:[{displayValue:"âœ“",rawValue:!0},{displayValue:"",rawValue:!1}],person:[{displayValue:"John Doe",rawValue:"user-123"},{displayValue:"Jane Smith",rawValue:"user-456"},{displayValue:"Alex Johnson",rawValue:"user-789"}],relation:[{displayValue:"Related Item",rawValue:"relation-123"},{displayValue:"Connected Task",rawValue:"relation-456"}],rollup:[{displayValue:"5 items",rawValue:5},{displayValue:"$1,200",rawValue:1200},{displayValue:"85%",rawValue:.85}],formula:[{displayValue:"Calculated",rawValue:"Calculated"},{displayValue:"Auto-filled",rawValue:"Auto-filled"}]};function c(e){return e.map((e=>function(e){const t=e.type,i=s[t]??s.text??[];return i[Math.floor(Math.random()*i.length)]}(e)))}var u=i(474848);const d=220;function g(e){const{collectionContextStore:t,suggestions:i,widths:s,titleColumnWidth:g,paddingRight:h,isLoading:b=!1,shimmerColumnCount:S=3}=e,y=t.collectionSuggestionStore,f=(0,r().K8)((()=>y.state.hoveredColumn),[y]),w=(0,n.useCallback)((e=>{y.setHoveredColumn(e)}),[y]),v=(0,o().IS)((()=>({previewRow:{display:"flex",background:a().Tj.background.primary,borderBottom:`1px solid ${a().Tj.border.secondaryTranslucent}`,height:l().sH,alignItems:"flex-start",opacity:.8,position:"relative",overflow:"visible"},previewRowBorder:{height:"100%",width:"1px",marginInlineStart:-1,backgroundColor:a().Tj.background.tertiaryTranslucent}})),[]);if(b){const e=s.length>0?s.slice(0,S):Array.from({length:S},(()=>d));return(0,u.jsxs)("div",{style:{...v.previewRow,paddingInlineStart:g,paddingInlineEnd:h},children:[(0,u.jsx)("div",{style:v.previewRowBorder}),e.map(((e,t)=>(0,u.jsx)(m,{width:e},`shimmer-${t}`)))]})}const x=c(i);return i.length?(0,u.jsxs)("div",{style:{...v.previewRow,paddingInlineStart:g,paddingInlineEnd:h},children:[(0,u.jsx)("div",{style:v.previewRowBorder}),i.map(((e,i)=>(0,u.jsx)(p,{property:e,dummyValue:x[i],width:s[i],isHovered:f===e.name,onHoverChange:w,collectionContextStore:t},e.name)))]}):null}const p=n.memo((function(e){var t;const{property:i,dummyValue:s,width:c,isHovered:d,onHoverChange:g,collectionContextStore:p}=e,m=(0,r().K8)((()=>p.collectionSuggestionStore.state.containerHeight),[p]),h=(0,o().IS)((()=>({previewCell:{zIndex:7,display:"flex",flexDirection:"column",justifyContent:"flex-start",padding:"6px 8px",fontSize:14,color:a().Tj.blue.text.tertiary,borderInlineEnd:`1px solid ${a().Tj.border.secondaryTranslucent}`,width:c,flexShrink:0,boxSizing:"border-box",height:m>0?m:l().sH,position:"relative",backgroundColor:d?a().Tj.blue.background.primaryTranslucent:"transparent"},previewValue:{overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},pillStyle:{backgroundColor:a().Tj.blue.background.secondaryTranslucent,color:a().Tj.blue.text.tertiary,padding:"2px 6px",borderRadius:10,fontSize:14,width:"fit-content"},dotStyle:{width:10,height:10,borderRadius:"50%",backgroundColor:a().Tj.blue.icon.accentPrimary,marginInlineEnd:5,flexShrink:0}})),[c,d,m]),b=i.type,S=i.exampleValues&&i.exampleValues.length>0,y=S?null===(t=i.exampleValues)||void 0===t?void 0:t[0]:s.displayValue,f=(0,n.useCallback)((()=>{g(i.name)}),[g,i.name]),w=(0,n.useCallback)((()=>{g(null)}),[g]);let v=(0,u.jsx)("div",{style:h.previewValue,children:y});if("select"===b||"status"===b||"multi_select"===b){const e=(i.options||[])[0],t=S?y:null==e?void 0:e.value;if(t){const e="status"===b;v=(0,u.jsxs)("div",{style:{...h.pillStyle,display:"flex",alignItems:"center"},children:[e?(0,u.jsx)("div",{style:h.dotStyle}):null,t]})}}return(0,u.jsx)("div",{style:h.previewCell,onMouseEnter:f,onMouseLeave:w,children:v})})),m=n.memo((function(e){const{width:t}=e,i=(0,o().eP)(),n=(0,o().IS)((()=>({previewCell:{zIndex:7,display:"flex",flexDirection:"row",alignItems:"center",padding:"6px 8px",fontSize:14,borderInlineEnd:`1px solid ${a().Tj.border.secondaryTranslucent}`,width:t,flexShrink:0,boxSizing:"border-box",height:l().sH,position:"relative",backgroundColor:"transparent",gap:8},shimmerText:{height:12,borderRadius:3,width:"60%",background:"dark"===i?a().Tj.palette.translucentGray[200]:a().Tj.cardPressedBackground}})),[t,i]);return(0,u.jsx)("div",{style:n.previewCell,children:(0,u.jsx)("div",{className:"notion-shimmer",style:n.shimmerText})})}))},827368:(e,t,i)=>{i.d(t,{Cd:()=>u,Wd:()=>g,yq:()=>p});var n=i(296540),r=()=>i(59226),o=()=>i(829098),a=()=>i(631611),l=i(474848);const s="bodyRegular",c="bodyLgRegular";function u(e){const{fontSize:t,lineHeight:i}=o().U[e];return{fontSize:t,lineHeight:i}}const d=(0,n.createContext)(void 0);function g({children:e,isFullPage:t}){const i=(0,r().X)("agent_larger_font"),o=(0,a().jw)(),u=(0,n.useMemo)((()=>{const e=t??o.isType("fullPage","inferenceTranscriptChatView");return{bodyStyleKey:i&&e?c:s,isLargerFontEnabled:i}}),[i,o,t]);return(0,l.jsx)(d.Provider,{value:u,children:e})}function p(){const e=(0,n.useContext)(d);return e||{bodyStyleKey:s,isLargerFontEnabled:!1}}d.displayName="AgentFontContext"},859185:(e,t,i)=>{i.r(t),i.d(t,{addPropertySuggestion:()=>n().jn,loadSuggestions:()=>n()._X,removePropertySuggestion:()=>n().ac});var n=()=>i(908536)},908536:(e,t,i)=>{i.d(t,{_X:()=>d,ac:()=>p,jn:()=>g});var n=()=>i(242422),r=()=>i(452845),o=()=>i(935664),a=()=>i(155269),l=()=>i(263265),s=()=>i(554657),c=()=>i(244828),u=()=>i(271611);async function d(e){const{collectionContextStore:t,collectionNameText:i,environment:o,device:a,requestId:c,latestRequestIdRef:d,isMountedRef:g}=e,p=t.collectionSuggestionStore;if(!p.state.isEnabled)return;if(!i.trim()||!g.current)return;const m=n().default.getConfigKey("database_newbie_ai_property_preview","ai_property_suggestion");m&&await(0,u().j)({collectionContextStore:t,collectionNameText:i,environment:o,device:a,setDatabasePropertySuggestion:e=>{if(c===d.current&&g.current){const i=e.allSuggestions||[];p.setSuggestions(i),i.length>0&&(0,r().I)({environment:o,collectionContextStore:t,action:"view"})}},cancelled:{current:!g.current},aiPropertySuggestionConfig:m,userLifecycleProfileStore:s().k,recentEventsStore:l().a})}function g(e){const{collectionContextStore:t,environment:i,property:n}=e,r=t.collectionStore();if(!r)return;const l=t.collectionSuggestionStore;let s;c().createAndCommit({userAction:"addPropertySuggestion",environment:i,canUndo:!0,perform:e=>{s=(0,a().createProperty)({environment:i,collectionStore:r,collectionViewArgs:void 0,propertyName:n.name,propertyType:n.type,propertySchema:n,selectOptions:"options"in n?n.options:void 0,transaction:e}),s&&(0,o().Z)({environment:i,collectionContextStore:t,from:"ai_property_suggestion",property_type:n.type,is_suggested_property:!0,property_id:s})}}),l.addRemovedPropertySuggestion(n.name)}function p(e){const{collectionContextStore:t,propertyName:i}=e;t.collectionSuggestionStore.addRemovedPropertySuggestion(i)}},909057:(e,t,i)=>{i.d(t,{X:()=>o,k:()=>r});var n=()=>i(63636);function r(e){return!!e.analyticsEventCounts&&(0,n().H0)({...e,configKey:"databaseNewbie"})}function o(e){return!!e.analyticsEventCounts&&(0,n().H0)({...e,configKey:"databaseViewNewbie"})}},972732:(e,t,i)=>{i.r(t),i.d(t,{TableSuggestionInlineCells:()=>d});i(581454);var n=i(296540),r=()=>i(401497),o=()=>i(695115),a=()=>i(69708),l=()=>i(100622),s=()=>i(452845),c=()=>i(908536),u=i(474848);const d=n.memo((function(e){const{collectionContextStore:t,suggestions:o}=e,a=(0,i(484714).v3)(),l=(0,n.useCallback)((e=>{c().jn({collectionContextStore:t,environment:a,property:e}),(0,s().I)({environment:a,collectionContextStore:t,action:"add_property",property_type:e.type})}),[t,a]),d=(0,n.useCallback)((e=>{c().ac({collectionContextStore:t,environment:a,propertyName:e.name}),(0,s().I)({environment:a,collectionContextStore:t,action:"remove_property",property_type:e.type})}),[t,a]),p=(0,r().IS)((()=>({container:{display:"flex",flexDirection:"row",height:i(236030).sH}})),[]);return o.length?(0,u.jsx)("div",{style:p.container,children:o.map((e=>{const n=(0,i(973411).calculateSuggestionWidth)(e.name);return(0,u.jsx)(g,{collectionContextStore:t,property:e,width:n,onAdd:l,onRemove:d},e.name)}))}):null})),g=n.memo((function(e){const{collectionContextStore:t,property:s,width:c,onAdd:d,onRemove:g}=e,m=t.collectionSuggestionStore,h=(0,i(590526).K8)((()=>m.state.hoveredColumn),[m])===s.name,b=(0,r().DP)(),S=(0,a().tz)(),y=(0,r().IS)((()=>({headerCell:{display:"flex",alignItems:"center",padding:"0px 8px",fontSize:14,fontWeight:400,width:c,flexShrink:0,position:"relative",boxSizing:"border-box",backgroundColor:h?l().Tj.blue.background.primaryTranslucent:"transparent",cursor:"pointer",transition:"background-color 0.15s ease"},iconWrapper:{display:"flex",alignItems:"center",marginInlineEnd:6,flexShrink:0,height:16,width:16},propertyName:{flex:1,marginInlineEnd:8,overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap",color:l().Tj.blue.text.tertiary},actionButtons:{display:"flex",alignItems:"center",gap:4,flexShrink:0,opacity:h?1:0,visibility:h?"visible":"hidden",pointerEvents:h?"auto":"none",transition:"opacity 0.15s ease, visibility 0.15s ease"},iconStyle:{fill:l().Tj.blue.icon.accentPrimary}})),[c,h]),f=(0,n.useCallback)((e=>{e.preventDefault(),e.stopPropagation(),d(s)}),[d,s]),w=(0,n.useCallback)((e=>{e.preventDefault(),e.stopPropagation(),g(s)}),[g,s]),v=(0,n.useCallback)((()=>{m.setHoveredColumn(s.name)}),[m,s.name]),x=(0,n.useCallback)((()=>{m.setHoveredColumn(null)}),[m]);return(0,u.jsxs)("div",{style:y.headerCell,onMouseEnter:v,onMouseLeave:x,children:[(0,u.jsx)("div",{style:y.iconWrapper,children:(0,u.jsx)(i(852424).zB,{type:s.type,icon:s.icon,size:18,theme:b,style:y.iconStyle})}),(0,u.jsx)("div",{style:y.propertyName,children:s.name}),(0,u.jsxs)("div",{style:y.actionButtons,children:[(0,u.jsx)(o().A,{icon:i(349679).checkmarkSmallIcon,onClick:f,colorPalette:"blue",colorVariant:"accentPrimary",size:"sm",style:{width:16,height:16},ariaLabel:S.formatMessage(p.addPropertySuggestion)}),(0,u.jsx)(o().A,{icon:i(995847).xMarkSmallIcon,onClick:w,colorPalette:"gray",colorVariant:"secondary",size:"sm",style:{width:16,height:16},ariaLabel:S.formatMessage(p.removePropertySuggestion)})]})]})})),p=(0,a().YK)({addPropertySuggestion:{id:"TableSuggestionInlineCells.addPropertySuggestion",defaultMessage:"Add AI property suggestion"},removePropertySuggestion:{id:"TableSuggestionInlineCells.removePropertySuggestion",defaultMessage:"Disable AI property suggestions"}})},973411:(e,t,i)=>{function n(e){const t=8*e.length+60;return Math.min(Math.max(t,180),300)}i.r(t),i.d(t,{calculateSuggestionWidth:()=>n})}}]);