"use strict";(globalThis.webpackChunknotion_next=globalThis.webpackChunknotion_next||[]).push([[24754],{173614:(e,t,n)=>{n.d(t,{c:()=>s});n(296540);const o={viewBox:"0 0 20 20",fittedViewBox:"2.12 3.02 15.83 14.41",svg:(0,n(474848).jsx)("path",{d:"M7.663 5.794a2.77 2.77 0 1 1-5.539 0 2.77 2.77 0 0 1 5.539 0m-1.25 0a1.52 1.52 0 1 0-3.039 0 1.52 1.52 0 0 0 3.039 0m2.497-.55a.55.55 0 0 0 0 1.1h.098a.55.55 0 1 0 0-1.1zm2.054 0a.55.55 0 1 0 0 1.1h.098a.55.55 0 0 0 0-1.1zm2.602 4.328a.55.55 0 0 0-.952-.55l-.049.083a.55.55 0 0 0 .952.552zm-6.208-.551a.55.55 0 0 0-.952.551l.049.085a.55.55 0 0 0 .952-.552zm5.182 2.324a.55.55 0 0 0-.952-.552l-.05.085a.55.55 0 1 0 .953.551zm-4.156-.552a.55.55 0 1 0-.951.552l.048.084a.55.55 0 1 0 .952-.551zm6.722-2.23a2.77 2.77 0 1 0 0-5.538 2.77 2.77 0 0 0 0 5.538m0-1.25a1.52 1.52 0 1 1 0-3.038 1.52 1.52 0 0 1 0 3.038m-2.336 7.343a2.77 2.77 0 1 1-5.54 0 2.77 2.77 0 0 1 5.54 0m-1.25 0a1.52 1.52 0 1 0-3.04 0 1.52 1.52 0 0 0 3.04 0"})},s=(0,n(340498).wt)("integration",o,"default")},231704:(e,t,n)=>{n.d(t,{p:()=>p,w:()=>u});n(296540);var o=()=>n(590526),s=()=>n(74351),i=()=>n(970236),r=()=>n(109100),a=()=>n(468006),l=()=>n(69708),c=()=>n(47373),d=n(474848);function u(e){const{labelType:t}=e,n="invited"===t,s=(0,o().K8)((()=>"invited"===t?r().S.invitedLabel:(0,c().Qd)()?"team_level_guest"===t?r().S.teamGuestLabel:r().S.pageGuestLabel:r().S.guestLabel),[t]);return(0,d.jsx)(i().E,{content:(0,d.jsx)(l().sA,{...s}),color:n?"gray":"yellow"})}function p(e){const{store:t,userId:n,spaceUserStore:o}=e,i=(0,s().U)(t),r=null==i?void 0:i.getModel();if(r){if((0,a().CG)({team:r,userId:n}))return"team_level_guest"}if(o&&o.isPageGuest())return"page_guest"}},287414:(e,t,n)=>{n.d(t,{A:()=>M});var o=n(296540),s=()=>n(695115),i=()=>n(26697),r=()=>n(613601),a=()=>n(69708),l=()=>n(284371),c=()=>n(484714),d=()=>n(590526),u=()=>n(401497),p=()=>n(792057),h=()=>n(394888),f=()=>n(128933),g=()=>n(699143),m=()=>n(89002),x=()=>n(396896),y=()=>n(493552),A=()=>n(100622),S=()=>n(753812),j=()=>n(241021),v=()=>n(838239),b=()=>n(453697),w=()=>n(49210),I=n(474848);function T({spaceId:e,userStore:t,onDismiss:n,onSubmit:s}){const i=(0,c().v3)(),r=t.id,l=(0,a().tz)(),h=(0,d().K8)((()=>t.getDisplayName(l)),[t,l]),w=(0,u().IS)((()=>({secondaryIcon:{fill:A().Tj.blue.icon.tertiary},primaryIcon:{fill:A().Tj.blue.icon.accentPrimary},title:{color:A().Tj.text.primary,textAlign:"center",fontSize:17,fontWeight:500,lineHeight:"22px"}})),[]),T=(0,o.useCallback)((async()=>{const t=await S().callApi({eventName:"recoverUserContentInSpace",environment:i,data:{spaceId:e,userId:r}});if("failed"===t.type)throw p().Qg(t),t;s(),n(),f().D6({label:(0,I.jsx)(a().sA,{id:"restoreAccessModal.snackbarMessage",defaultMessage:"Initiated restoration of access for{nbsp}{displayName}",values:{displayName:(0,I.jsx)("b",{children:h}),nbsp:(0,I.jsx)(I.Fragment,{children:" "})}})})}),[i,e,r,h,n,s]);return(0,I.jsx)(m().t,{header:(0,I.jsx)(v().Y,{iconAndTitle:(0,I.jsxs)(g().Y1,{align:"top-center",gap:9,children:[(0,I.jsx)(b().A,{userStore:t,size:40}),(0,I.jsx)("div",{style:w.title,children:(0,I.jsx)(a().sA,{defaultMessage:"Restore access",id:"restoreAccessModal.title"})})]}),description:(0,I.jsx)(a().sA,{id:"restoreAccessModal.subtitle",defaultMessage:"Restore additional access for members who were removed and re-added within the last 30 days"})}),footer:(0,I.jsx)(j().a,{layout:"vertical",primaryButtons:[{buttonType:"primary",label:(0,I.jsx)(a().sA,{defaultMessage:"Restore access",id:"restoreAccessModal.restoreButton"}),onClick:T}],secondaryButtons:[{buttonType:"secondary",label:(0,I.jsx)(a().sA,{defaultMessage:"Cancel",id:"restoreAccessModal.cancelButton"}),onClick:n}]}),children:(0,I.jsxs)(x().VP,{gap:24,children:[(0,I.jsx)(y().D,{styleKey:"bodyRegular",colorVariant:"primary",style:{textAlign:"center"},children:(0,I.jsx)(a().sA,{id:"restoreAccessModal.contextDescription",defaultMessage:"<b>{displayName}</b> already has access to their private pages",values:{b:e=>(0,I.jsx)("b",{children:e}),displayName:h}})}),(0,I.jsx)(y().D,{styleKey:"bodyRegular",colorVariant:"primary",style:{textAlign:"center"},children:(0,I.jsx)(a().sA,{id:"restoreAccessModal.actionDescription",defaultMessage:"Would you like to restore <b>{displayName}</b>’s access to their shared pages, groups, and teamspaces?",values:{b:e=>(0,I.jsx)("b",{children:e}),displayName:h}})})]})})}function M({spaceId:e,userStore:t,onSubmit:n}){const o=(0,a().tz)();return(0,I.jsx)(i().m,{placement:"right",renderTooltip:()=>(0,I.jsx)(C,{}),render:i=>(0,I.jsx)(s().A,{icon:r().arrowUTurnUpLeftSmallIcon,ariaLabel:o.formatMessage({id:"restoreAccessButton.aria",defaultMessage:"Restore access"}),onClick:()=>async function(e,t,n){return await w().T.showAsyncModal((o=>(0,I.jsx)(h().s,{isOpen:o.isOpen,onDismiss:o.onDismiss,onClosed:o.onClosed,areaConstraint:{width:{type:"fixed",length:380}},render:()=>(0,I.jsx)(T,{spaceId:e,userStore:t,onDismiss:o.onDismiss,onSubmit:n})})))}(e,t,n),...i})})}function C(){return(0,I.jsxs)(I.Fragment,{children:[(0,I.jsx)("div",{style:{fontWeight:l().Wy.semibold},children:(0,I.jsx)(a().sA,{id:"userCell.restoreAccessTooltip.label",defaultMessage:"Restore access to teamspaces, groups, and shared pages"})}),(0,I.jsx)("div",{children:(0,I.jsx)(a().sA,{id:"userCell.restoreAccessTooltip.description",defaultMessage:"Only available if a member was removed and re-added in the last 30 days"})})]})}},313171:(e,t,n)=>{n.d(t,{L:()=>r});n(296540);var o=()=>n(970236),s=()=>n(69708),i=n(474848);function r(){return(0,i.jsx)(o().E,{content:(0,i.jsx)(s().sA,{id:"spaceUserMembershipType.restrictedMember",defaultMessage:"Restricted"}),color:"yellow"})}},358075:(e,t,n)=>{n.d(t,{l:()=>r});n(296540);var o=()=>n(970236),s=()=>n(69708),i=n(474848);function r(e){return(0,i.jsx)(o().E,{style:{textWrap:"nowrap"},content:"membership_admin"===e.role?(0,i.jsx)(s().sA,{id:"spacePermissionsSettings.user.membershipAdmin",defaultMessage:"Membership admin"}):(0,i.jsx)(s().sA,{id:"spacePermissionsSettings.user.workspaceOwner",defaultMessage:"Workspace owner"})})}},377114:(e,t,n)=>{n.r(t),n.d(t,{arrowLeftRightIcon:()=>s,iconDefinition:()=>o});n(296540);const o={viewBox:"0 0 20 20",fittedViewBox:"3.26 2.25 13.47 15.5",svg:(0,n(474848).jsx)("path",{d:"M3.45 5.925a.625.625 0 0 0 0 .884l3.499 3.497a.625.625 0 1 0 .884-.883L5.402 6.992h10.705a.625.625 0 0 0 0-1.25H5.402l2.43-2.431a.625.625 0 0 0-.883-.884zm8.717 11.648a.625.625 0 0 1 0-.884l2.431-2.43H3.893a.625.625 0 1 1 0-1.25h10.705l-2.43-2.431a.625.625 0 0 1 .883-.884l3.498 3.497a.625.625 0 0 1 0 .884l-3.498 3.498a.625.625 0 0 1-.884 0"})},s=(0,n(340498).wt)("arrowLeftRight",o,"default")},384100:(e,t,n)=>{n.d(t,{z:()=>i});var o=()=>n(849255),s=()=>n(798880);function i(e){const{userId:t,spaceStore:n}=e;return o().L.createChildStore(n,{table:s().oo,id:t})}},414399:(e,t,n)=>{n.d(t,{Y:()=>i});n(296540);var o=n(474848);const s={viewBox:"0 0 16 16",fittedViewBox:"2.12 2.97 11.75 10.05",svg:(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)("path",{d:"M5.066 4.914a.538.538 0 1 0 0 1.076.538.538 0 0 0 0-1.076m2.162 0a.538.538 0 1 0 0 1.076.538.538 0 0 0 0-1.076M5.066 6.458a.538.538 0 1 0 0 1.077.538.538 0 0 0 0-1.077m2.162 0a.538.538 0 1 0 0 1.077.538.538 0 0 0 0-1.077M5.066 8.002a.538.538 0 1 0 0 1.077.538.538 0 0 0 0-1.077m2.162 0a.538.538 0 1 0 0 1.077.538.538 0 0 0 0-1.077m4.169.618a.538.538 0 1 0 0 1.076.538.538 0 0 0 0-1.076m0 1.544a.538.538 0 1 0 0 1.076.538.538 0 0 0 0-1.076"}),(0,o.jsx)("path",{d:"M4.063 2.977a1.934 1.934 0 0 0-1.935 1.935V12.4c0 .343.279.622.622.622h10.5a.62.62 0 0 0 .622-.622V8.772a1.934 1.934 0 0 0-1.934-1.934h-1.772V4.912a1.934 1.934 0 0 0-1.934-1.935zm-.691 1.935c0-.382.31-.691.69-.691h4.17c.381 0 .69.31.69.69v6.868H7.895v-1.54a.513.513 0 0 0-.512-.513H4.912a.513.513 0 0 0-.513.513v1.54H3.372zm6.794 6.867V8.08h1.772c.381 0 .69.31.69.691v3.007zm-4.742 0V10.75H6.87v1.028z"})]})},i=(0,n(340498).wt)("teamspaceSmall",s,"small")},452745:(e,t,n)=>{n.r(t),n.d(t,{checkmarkShieldFillSmallIcon:()=>s,iconDefinition:()=>o});n(296540);const o={viewBox:"0 0 16 16",fittedViewBox:"2.85 2.2 10.29 11.6",svg:(0,n(474848).jsx)("path",{d:"M7.755 2.26a.55.55 0 0 1 .49 0l.962.482a7.3 7.3 0 0 0 3.277.774h.11c.302 0 .547.244.547.547v4.333a4.92 4.92 0 0 1-2.983 4.524l-1.943.833a.55.55 0 0 1-.43 0l-1.943-.833A4.92 4.92 0 0 1 2.86 8.396V4.062c0-.302.245-.546.547-.546h.11c1.138 0 2.26-.265 3.277-.774zm2.567 4.123a.55.55 0 0 0-.944-.566L7.371 9.163 6.268 7.875a.55.55 0 1 0-.836.716l1.6 1.867a.55.55 0 0 0 .89-.075z"})},s=(0,n(340498).wt)("checkmarkShieldFillSmall",o,"fillSmall")},476178:(e,t,n)=>{n.d(t,{A:()=>g});n(296540);var o=()=>n(590526),s=()=>n(401497),i=()=>n(609679),r=()=>n(730240),a=()=>n(970236),l=()=>n(26697),c=()=>n(302501),d=()=>n(869190),u=()=>n(69708),p=()=>n(100622),h=()=>n(284371),f=n(474848);function g({spaceStore:e,restorationStatus:t,didAttemptRecovery:n}){const o=x();return(0,f.jsx)(l().m,{placement:"bottom",renderTooltip:()=>(0,f.jsx)(m,{spaceStore:e,restorationStatus:t,didAttemptRecovery:n}),render:e=>(0,f.jsx)("div",{...e,children:(0,f.jsx)(a().E,{content:(0,f.jsx)(c().A,{style:o.recentlyReaddedText,children:(0,f.jsx)(u().sA,{id:"userCell.recentlyReadded.label",defaultMessage:"Recently re-added"})}),style:o.recentlyReaddedBadge})})})}function m({spaceStore:e,restorationStatus:t,didAttemptRecovery:n}){const s=x(),{displayName:a,displayTime:l}=function({spaceStore:e,restorationStatus:t}){const n="restored"===t.status?{table:t.restoredByTable,id:t.restoredById,spaceId:e.id}:void 0,s=n?(0,r().JQ)({parentStore:e,pointer:n}):void 0,a=(0,u().tz)(),l=(0,o().K8)((()=>null==s?void 0:s.getDisplayName(a)),[s,a]),c="restored"===t.status?(0,d().W_)(t.restoredTime,"medium_with_time",i().locale):void 0;return{displayName:l,displayTime:c}}({spaceStore:e,restorationStatus:t});return(0,f.jsxs)(f.Fragment,{children:[(0,f.jsx)("div",{style:s.tooltipFirstLine,children:(0,f.jsx)(u().sA,{id:"userCell.recentlyReaddedTooltip.label",defaultMessage:"Member was removed and re-added within the last 30 days"})}),n?(0,f.jsx)("div",{style:s.tooltipSecondLine,children:(0,f.jsx)(u().sA,{id:"userCell.recentlyReaddedTooltip.inProgress.description",defaultMessage:"Restoration of access is in progress",values:{displayName:a,displayTime:l}})}):void 0,!n&&a&&l?(0,f.jsx)("div",{style:s.tooltipSecondLine,children:(0,f.jsx)(u().sA,{id:"userCell.recentlyReaddedTooltip.description",defaultMessage:"{displayName} restored their access on {displayTime}",values:{displayName:a,displayTime:l}})}):void 0]})}function x(){return(0,s().IS)((()=>({recentlyReaddedBadge:{background:p().Tj.blue.background.secondary,marginInlineStart:0,maxWidth:"max-content"},recentlyReaddedText:{color:p().Tj.blue.text.primary,fontSize:h().J.UISmall.desktop,fontStyle:"normal",fontWeight:400,lineHeight:"15px"},tooltipFirstLine:{color:p().Tj.text.inversePrimary,fontWeight:h().Wy.semibold},tooltipSecondLine:{color:p().Tj.text.inverseSecondary}})),[])}},486115:(e,t,n)=>{n.d(t,{P:()=>g});n(898992),n(354520),n(581454);var o=()=>n(664594),s=()=>n(242422),i=()=>n(484714),r=()=>n(590526),a=()=>n(313491),l=()=>n(187174),c=()=>n(848538),d=()=>n(753812),u=()=>n(165241),p=()=>n(384100),h=()=>n(408895),f=()=>n(134217);function g(e){const{spaceStore:t,skip:n=!1}=e,g=(0,i().v3)(),m=(0,o().T)(),[{status:x,value:y}]=(0,l().Yb)((async()=>{const e=null==t?void 0:t.id;if(n||!e)return;if(u().i({userId:m,spaceId:e,debugFrom:"useWorkspaceOwners"})){const e=s().default.getConfigKey("email_alias_migration","mode"),n=await d().callApi({eventName:"listUsers",environment:g,data:{cursor:void 0,membershipFilter:"owners",limit:1e3,query:"",spaceId:t.id,includeAliasSearch:(0,a().K)(e)}});return"success"===n.type?n.data.users.map((e=>e.id)):[]}{const e=(0,h().M)({spaceId:null==t?void 0:t.id,userId:m,enforceIdsCheck:!1,debugFrom:"useWorkspaceOwners"});if(!e)return[];return(0,f().Be)(e).filter((e=>(0,c().Jm)(e.membershipType))).map((e=>e.userId))}}),[g,t,n,m]);return{status:x,workspaceOwners:(0,r().K8)((()=>!n&&y&&t?y.map((e=>(0,p().z)({userId:e,spaceStore:t}))):[]),[y,t,n])}}},491761:(e,t,n)=>{n.d(t,{J:()=>a,z:()=>r});var o=()=>n(79926);const s=new(o().O2)("CollectionSettingsUpsell",(async()=>n.e(9243).then(n.bind(n,263427)))),i=new(o().O2)("CollectionSettingsUpsellMaybe",(async()=>n.e(9243).then(n.bind(n,263427)))),r=(0,o()._h)(s,(e=>e.CollectionSettingsUpsell)),a=(0,o()._h)(i,(e=>e.CollectionSettingsUpsellMaybe))},674582:(e,t,n)=>{n.d(t,{m:()=>d});n(296540);var o=()=>n(401497),s=()=>n(807449),i=()=>n(377114),r=()=>n(558687),a=()=>n(100622),l=()=>n(284371),c=n(474848);function d(e){const{title:t,description:n,integrationIconUrl:d,integrationIcon:u,children:p,styles:h}=e,f=(0,o().IS)((()=>({header:{fontWeight:l().Wy.bold,fontSize:26,textAlign:"center",marginBottom:4,lineHeight:"32px"},iconGroup:{display:"flex",flexDirection:"row",alignItems:"center",justifyContent:"center",gridColumnGap:9,marginBottom:12,height:40},arrowRight:{width:20,height:20,opacity:.4,fontWeight:l().Wy.bold,padding:3},notionLogo:{height:40,width:40,color:a().Tj.icon.primary},icon:{height:32,width:32},description:{textAlign:"center",color:a().Tj.text.secondary,fontWeight:l().Wy.regular,fontSize:14,lineHeight:"20px"}})),[]);return(0,c.jsxs)("div",{style:null==h?void 0:h.wrapper,children:[(0,c.jsxs)("div",{style:{...f.iconGroup,...null==h?void 0:h.iconGroup},children:[(0,r().notionIcon)(f.notionLogo),(0,c.jsx)(s().I,{icon:i().arrowLeftRightIcon,style:{...f.arrowRight,...null==h?void 0:h.arrowRight}}),d?(0,c.jsx)("img",{style:{...f.icon,...null==h?void 0:h.icon},src:d,alt:"Integration Icon"}):u]}),t?(0,c.jsx)("div",{style:{...f.header,...null==h?void 0:h.header},children:t}):void 0,n?(0,c.jsx)("div",{style:{...f.description,...null==h?void 0:h.description},children:n}):void 0,p]})}},695714:(e,t,n)=>{n.r(t),n.d(t,{iconDefinition:()=>o,personKeyFillIcon:()=>s});n(296540);const o={viewBox:"0 0 20 20",fittedViewBox:"3.68 2.37 15.23 17.3",svg:(0,n(474848).jsx)("path",{d:"M10 2.375c-1.137 0-2.054.47-2.674 1.242-.608.757-.9 1.765-.9 2.824s.292 2.066.9 2.824c.62.772 1.537 1.241 2.674 1.241s2.055-.469 2.675-1.241c.608-.758.9-1.766.9-2.824 0-1.059-.292-2.067-.9-2.824-.62-.773-1.538-1.242-2.675-1.242m0 9.255c-2.7 0-5.101 1.315-6.12 3.305-.361.706-.199 1.421.23 1.923.412.48 1.06.767 1.74.767h7.88v-1.79a3.96 3.96 0 0 1-1.439-3.876 8 8 0 0 0-2.291-.33m8.906 1.09a2.72 2.72 0 0 1-1.51 2.436v1.34l-.906 1.057.906 1.057-1.209 1.058-1.208-1.058v-3.454a2.719 2.719 0 1 1 3.927-2.436m-2.02-.604a.698.698 0 1 0-1.396 0 .698.698 0 0 0 1.395 0"})},s=(0,n(340498).wt)("personKeyFill",o,"fill")},707299:(e,t,n)=>{n.r(t),n.d(t,{ConnectionsIntroModals:()=>le});var o=n(296540),s=(n(581454),()=>n(907258)),i=()=>n(484714),r=()=>n(590526),a=()=>n(401497),l=()=>n(394888),c=()=>n(718827),d=()=>n(249046),u=()=>n(807449),p=()=>n(552712),h=()=>n(631524),f=()=>n(160432),g=()=>n(302501),m=()=>n(617871),x=()=>n(452745),y=()=>n(471095),A=()=>n(695714),S=()=>n(721479),j=()=>n(735790),v=()=>n(563692),b=()=>n(558687),w=()=>n(769145),I=()=>n(706021),T=()=>n(69708),M=()=>n(100622),C=()=>n(496603),B=()=>n(284371),k=()=>n(491761),D=()=>n(13898),z=()=>n(674582),_=()=>n(554045),R=()=>n(176983),W=()=>n(817942),N=()=>n(735230),U=()=>n(528093),E=()=>n(486115),P=()=>n(859004),L=(n(898992),n(354520),()=>n(165358)),F=()=>n(388821),O=()=>n(824862),G=()=>n(96689),H=()=>n(229833),K=()=>n(908928);var V=()=>n(983201),Y=()=>n(988536),q=n(474848);const J=(0,T().YK)({headerTitle:{id:"salesforceAuthModal.header.title",defaultMessage:"Connect with Salesforce"},requestAdminAccessTitle:{id:"salesforceAuthModal.requestAdminAccessTitle",defaultMessage:"Salesforce access required"},integrationInfo:{id:"salesforceAuthModal.integrationInfo",defaultMessage:"Allow members to bring Salesforce data in Notion."},integrationInfoUser:{id:"salesforceAuthModal.integrationInfoUser",defaultMessage:"Authenticate with your Salesforce account to start syncing Salesforce objects and reports"},requestAdminReAuth:{id:"salesforceAuthModal.requestAdminReAuth",defaultMessage:"Please contact your admin to re-authenticate Salesforce for this workspace"},requestAdminAccessInfo:{id:"salesforceAuthModal.requestAdminAccessInfo",defaultMessage:"Contact the admins below to request access and have the integration enabled for your workspace"},howToGetStarted:{id:"salesforceAuthModal.howToGetStarted",defaultMessage:"How to get started"},step1:{id:"salesforceAuthModal.step1",defaultMessage:"Create a <link>Salesforce service</link> account"},step2:{id:"salesforceAuthModal.step2",defaultMessage:"Set up <link>access controls</link>. Workspace members will only be able to access data that has access control enabled."},step3:{id:"salesforceAuthModal.step3",defaultMessage:"Authorize Salesforce to connect with Notion"},connectSalesforce:{id:"salesforceAuthModal.connectSalesforce",defaultMessage:"Connect Salesforce"},reAuthSalesforce:{id:"salesforceAuthModal.reAuthSalesforce",defaultMessage:"Re-authenticate Salesforce"},learnMore:{id:"salesforceAuthModal.learnMore",defaultMessage:"Learn more about Salesforce"},salesforceConnected:{id:"salesforceAuthModal.salesforceConnected",defaultMessage:"Salesforce is now connected"},salesforceAdminBotAlreadyConnected:{id:"salesforceAuthModal.salesforceAdminBotAlreadyConnected",defaultMessage:"Salesforce is already connected"},salesforceNotConnected:{id:"salesforceAuthModal.salesforceNotConnected",defaultMessage:"Authentication failed"},fallbackErrorDescription:{id:"salesforceAuthModal.fallbackErrorDescription",defaultMessage:"Something went wrong when connecting Salesforce. Please try again or contact Notion support."},siteChangeErrorDescription:{id:"salesforceAuthModal.siteChangeErrorDescription",defaultMessage:"This requires disconnecting Salesforce for all users in this workspace. Disconnecting will revoke Salesforce access for all users in this workspace."},DisconnectSalesforce:{id:"salesforceAuthModal.DisconnectSalesforce",defaultMessage:"Disconnect Salesforce"},connectedDescription:{id:"salesforceAuthModal.connectedDescription",defaultMessage:"Allow members to bring Salesforce data into Notion"},strictPermissions:{id:"salesforceAuthModal.strictPermissions",defaultMessage:"Strict permissions enforcement"},strictPermissionsDesc:{id:"salesforceAuthModal.strictPermissionsDesc",defaultMessage:"Members can only sync data accessible to the service account."},certifiedSecurity:{id:"salesforceAuthModal.certifiedSecurity",defaultMessage:"Certified to the highest security standards"},certifiedSecurityDesc:{id:"salesforceAuthModal.certifiedSecurityDesc",defaultMessage:"Notion is SOC2 (Type 2), ISO 27001, GDPR, and CCPA certified and compliant."},controlYourData:{id:"salesforceAuthModal.controlYourData",defaultMessage:"You control your data"},controlYourDataDesc:{id:"salesforceAuthModal.controlYourDataDesc",defaultMessage:"You decide what data to bring in. Notion never uses your connected data to train models."},proceedToUserAuth:{id:"salesforceAuthModal.proceedToUserAuth",defaultMessage:"Proceed to user auth"},backToNotion:{id:"salesforceAuthModal.backToNotion",defaultMessage:"Back to Notion"}}),$={accessControls:"https://www.notion.com/help/salesforce",serviceAccount:"https://www.notion.so/notion/How-to-Create-a-Service-Account-in-Salesforce-223efdeead0580afa387d14d9264b4c8",integrationGuide:"https://www.notion.com/help/salesforce"},Q={medium:{width:{type:"fixed",length:500},height:{type:"min",length:400}},large:{width:{type:"fixed",length:520},height:{type:"fixed",length:600}}};function X(){const e=(0,r().O$)(_().A);return"auth"!==e.type&&"auth_error"!==e.type&&"auth_success"!==e.type||!e.open?null:(0,q.jsx)(Z,{salesforceStoreState:e})}function Z({salesforceStoreState:e}){const t=(0,i().v3)(),n=(0,T().tz)(),a=(0,r().O$)(s().AppStoreSidebarSpaceStore),c=(0,R().J)(a),d=(0,r().K8)((()=>_().A.getFlowId()),[]),u=(0,Y().j)({spaceStore:a}),p=(0,r().K8)((()=>{var e,t;const o=u.instanceUrl;let s=null===(e=u.spaceBotStore)||void 0===e?void 0:e.getLastEditedAt();const i=null===(t=u.connectedByStore)||void 0===t?void 0:t.getDisplayName(n);return s&&"number"!=typeof s&&(s=parseInt(String(s),10)),{instanceUrl:o,connectedAtTs:s,connectedBy:i}}),[u.instanceUrl,u.spaceBotStore,u.connectedByStore,n]),h=(0,U()._)({name:"collection_synced_database_salesforce_workspace",spaceId:null==a?void 0:a.id,userId:t.currentUser.id}),f=(0,o.useMemo)((()=>Boolean("connected"===u.status)),[u.status]),g=(0,o.useCallback)((async n=>{a&&e.from&&await P().jI({environment:t,spaceId:a.id,flowId:d,from:e.from,authType:n,isReAuth:f})}),[a,e.from,t,d,f]),x=(0,o.useCallback)((()=>{P().rT({environment:t,from:"connected_apps_settings",flowId:d,authType:"user"})}),[t,d]),y=(0,r().K8)((()=>!!c&&Boolean(u.externalAuthentication&&u.externalAuthentication.integration_id===m().mn&&u.externalAuthentication.user_id===t.currentUser.id)),[t.currentUser.id,c,u.externalAuthentication]),A=(0,o.useCallback)((()=>{_().A.reset()}),[]),{sizeConstraint:S,renderAction:j}=(0,o.useMemo)((()=>{if(Boolean(h&&!(0,I().e2)(h)))return{sizeConstraint:Q.medium,renderAction:()=>(0,q.jsx)(ne,{})};if("auth_error"===e.type||"auth_success"===e.type)return{sizeConstraint:Q.large,renderAction:()=>(0,q.jsx)(ie,{onBackToNotion:A,salesforceStoreState:e,siteInfo:p})};if("not_connected"===u.status)return c?{sizeConstraint:Q.medium,renderAction:()=>(0,q.jsx)(ee,{onConnect:g,siteInfo:p,authType:"admin",isReAuth:f})}:{sizeConstraint:Q.medium,renderAction:()=>(0,q.jsx)(oe,{onBackToNotion:A,isReAuth:f,siteInfo:p})};if("no_user_access"===u.status&&"admin"===e.action&&c&&!y)return{sizeConstraint:Q.large,renderAction:()=>(0,q.jsx)(ie,{isConnectedByAnotherAdmin:!0,proceedToUserAuth:x,siteInfo:p})};if("connected"===u.status){if("user"===e.action&&y)return{sizeConstraint:Q.large,renderAction:()=>(0,q.jsx)(ie,{onBackToNotion:A,isCurrentUserWorkspaceBotOwner:!0,siteInfo:p})};if("admin"===e.action){if(c&&!y)return{sizeConstraint:Q.large,renderAction:()=>(0,q.jsx)(oe,{onBackToNotion:A,isReAuth:f,siteInfo:p})};if(!c)return{sizeConstraint:Q.medium,renderAction:()=>(0,q.jsx)(oe,{onBackToNotion:A,isReAuth:f,siteInfo:p})}}}return{sizeConstraint:Q.medium,renderAction:()=>(0,q.jsx)(ee,{onConnect:g,authType:e.action,isReAuth:f,siteInfo:p})}}),[h,e,u.status,c,y,A,p,g,f,x]);return(0,q.jsx)(l().s,{isOpen:e.open,areaConstraint:S,onDismiss:()=>{_().A.reset()},onClosed:()=>{_().A.reset()},backgroundAppearance:"default",render:j})}function ee({onConnect:e,authType:t,siteInfo:n,isReAuth:s}){const[i,r]=(0,o.useState)(!1),l=(0,a().IS)((()=>({stepsSection:{flexGrow:1,backgroundColor:"rgba(0, 0, 0, 0.05)",paddingTop:16,paddingInlineEnd:16,paddingBottom:0,paddingInlineStart:16,borderRadius:6,gap:16},stepsSectionTitle:{fontSize:12,fontWeight:B().Wy.medium,marginBottom:6,color:M().Tj.text.primary},stepsList:{paddingTop:0,paddingInlineEnd:0,paddingBottom:16,paddingInlineStart:16,gap:16,margin:0},stepText:{padding:"4px 0",flex:1,fontSize:12,lineHeight:1.2,color:M().Tj.text.secondary},buttonsSection:{gap:8,marginTop:"auto"},connectButton:{width:"100%",height:36},link:{color:M().Tj.blue.text.accentPrimary,display:"inline"}})),[]),c=(0,o.useCallback)((async()=>{r(!0),await e(t),r(!1)}),[e,t]),h=(0,q.jsxs)(q.Fragment,{children:[(0,q.jsx)(te,{title:(0,q.jsx)(T().sA,{...J.headerTitle}),subtitle:"admin"===t?(0,q.jsx)(T().sA,{...J.integrationInfo}):(0,q.jsx)(T().sA,{...J.integrationInfoUser}),showBetaBadge:!0}),"admin"===t?(0,q.jsxs)("div",{style:l.stepsSection,children:[(0,q.jsx)(g().A,{style:l.stepsSectionTitle,isMultiline:!0,children:(0,q.jsx)(T().sA,{...J.howToGetStarted})}),(0,q.jsxs)("ol",{style:l.stepsList,children:[(0,q.jsx)("li",{style:l.stepText,children:(0,q.jsx)(g().A,{style:l.stepText,isMultiline:!0,children:(0,q.jsx)(T().sA,{...J.step1,values:{link:e=>(0,q.jsx)(p().N,{href:$.serviceAccount,style:l.link,children:e})}})})}),(0,q.jsx)("li",{style:l.stepText,children:(0,q.jsx)(g().A,{style:l.stepText,isMultiline:!0,children:(0,q.jsx)(T().sA,{...J.step2,values:{link:e=>(0,q.jsx)(p().N,{href:$.accessControls,style:l.link,children:e})}})})}),(0,q.jsx)("li",{style:l.stepText,children:(0,q.jsx)(g().A,{style:l.stepText,isMultiline:!0,children:(0,q.jsx)(T().sA,{...J.step3})})})]})]}):void 0,("user"===t||s)&&n.instanceUrl?(0,q.jsx)(V().z,{integrationIcon:(0,q.jsx)(u().I,{icon:w().salesforceIcon,size:"default"}),primaryText:(0,C().ZH)(n.instanceUrl.split(".")[0]||""),secondaryText:n.instanceUrl||"",tooltipContent:{connectedAt:n.connectedAtTs,connectedBy:n.connectedBy}}):void 0,(0,q.jsxs)(d().wt,{style:l.buttonsSection,children:[(0,q.jsx)(f().A,{colorPalette:"blue",size:"lg",style:l.connectButton,onClick:c,disabled:i,children:s?(0,q.jsx)(T().sA,{...J.reAuthSalesforce}):(0,q.jsx)(T().sA,{...J.connectSalesforce})}),(0,q.jsx)(ae,{})]})]});return(0,q.jsx)(se,{sections:{leftPanel:h}})}function te({title:e,subtitle:t,showBetaBadge:n=!1}){const o=(0,a().IS)((()=>({logoSize:{width:40,height:40},headerContainer:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",paddingBottom:14},title:{fontSize:26,fontWeight:B().Wy.semibold,marginBottom:3,lineHeight:"32px"},subtitle:{fontSize:14,lineHeight:1.5,color:M().Tj.text.secondary,textAlign:"center",maxWidth:"80%"},betaBadgeWrapper:{marginInlineStart:6},betaBadge:{padding:"1px 4px",fontSize:16},arrowRight:{width:17,height:20,padding:0,opacity:1,color:M().Tj.icon.secondary,fontWeight:400}})),[]);return(0,q.jsxs)("div",{style:o.headerContainer,children:[(0,q.jsx)(z().m,{integrationIcon:(0,w().salesforceIcon)(o.logoSize),styles:{iconGroup:{justifyContent:"center"},arrowRight:o.arrowRight}}),(0,q.jsxs)("div",{style:{display:"flex",flexDirection:"row",marginBottom:8},children:[(0,q.jsx)(g().A,{style:o.title,children:e}),n?(0,q.jsx)("span",{style:o.betaBadgeWrapper,children:(0,q.jsx)(D().A,{style:o.betaBadge})}):void 0]}),(0,q.jsx)(g().A,{style:o.subtitle,isMultiline:!0,children:t})]})}function ne(){const e=(0,q.jsxs)(q.Fragment,{children:[(0,q.jsx)(te,{title:(0,q.jsx)(T().sA,{...J.headerTitle}),subtitle:(0,q.jsx)(T().sA,{...J.integrationInfo}),showBetaBadge:!0}),(0,q.jsx)(k().z,{featureName:"collection_synced_database_salesforce_workspace",source:"collection_synced_database",margin:!1,collectionContextStore:void 0}),(0,q.jsx)(ae,{})]});return(0,q.jsx)(se,{sections:{leftPanel:e}})}function oe({onBackToNotion:e,isReAuth:t,siteInfo:n}){const o=(0,a().IS)((()=>({buttonsSection:{gap:8}})),[]),s=(0,q.jsxs)(q.Fragment,{children:[(0,q.jsx)(te,{title:(0,q.jsx)(T().sA,{...J.requestAdminAccessTitle}),subtitle:t?(0,q.jsx)(T().sA,{...J.requestAdminReAuth}):(0,q.jsx)(T().sA,{...J.requestAdminAccessInfo})}),(0,q.jsx)("div",{style:{flexGrow:1},children:(0,q.jsx)(re,{})}),(0,q.jsx)(d().wt,{style:o.buttonsSection,children:(0,q.jsx)(ae,{})})]});return(0,q.jsx)(se,{sections:{leftPanel:s}})}function se({styleOverrides:e={},sections:t}){const n={leftPanel:{...(0,a().IS)((()=>({leftPanel:{minWidth:300,paddingTop:48,paddingInlineEnd:24,paddingBottom:20,paddingInlineStart:24,display:"flex",flex:1,gap:24,flexGrow:1,height:"100%",justifyContent:"space-between",flexDirection:"column"}})),[]).leftPanel,...e.leftPanel}};return(0,q.jsx)("div",{style:n.leftPanel,children:t.leftPanel})}function ie(e){const{onBackToNotion:t,salesforceStoreState:n,isConnectedByAnotherAdmin:o,isCurrentUserWorkspaceBotOwner:l,proceedToUserAuth:p}=e,h=(0,i().v3)(),S=function(e,t){var n,o;if("auth_error"!==(null==t?void 0:t.type))return;const s=null===(n=t.authError)||void 0===n||null===(n=n.errorDescription)||void 0===n?void 0:n.includes("ERROR_CODE: SALESFORCE_SITE_CHANGE");if(s){var i;return{error:"site_change",errorDescription:s?null===(i=t.authError)||void 0===i||null===(i=i.errorDescription)||void 0===i?void 0:i.replace("ERROR_CODE: SALESFORCE_SITE_CHANGE",""):"auth_error"===(null==t?void 0:t.type)?t.authError.errorDescription:void 0}}if("salesforce_no_api_access"===(null===(o=t.authError)||void 0===o?void 0:o.errorDescription))return{error:"salesforce_no_api_access",errorDescription:e.formatMessage({defaultMessage:"Looks like your Salesforce account doesn’t have API access. Please add the 'API Access' permission in Salesforce, or reach out to your Salesforce admin.",id:"salesforceAuthModal.salesforceNoApiAccessDescription"})};return t.authError}((0,T().tz)(),n),I=o||l||"auth_success"===n.type,C=(0,r().O$)(s().AppStoreSidebarSpaceStore),k=null==C?void 0:C.id,D=(0,a().IS)((()=>({wrapper:{maxWidth:520,width:"100%",padding:"76px 20px 20px",textAlign:"center",height:"100%",margin:"0 auto",display:"flex",gap:24,flexDirection:"column",alignItems:"center",justifyContent:"space-around",backgroundColor:M().Tj.background.primary},buttonsSection:{gap:8,marginTop:"auto",width:"100%"},disconnectButton:{width:"100%",height:36},backToNotionButton:{paddingTop:4,paddingBottom:4,paddingInlineStart:12,paddingInlineEnd:12,gap:6,borderRadius:6,borderWidth:1,border:"1px solid rgba(84, 72, 49, 0.15)",textAlign:"center",width:"fit-content"},header:{gap:16,justifyContent:"center",alignItems:"center"},logoSize:{width:48,height:48},titleSection:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",gap:12,marginBottom:24},securityFeatures:{gap:7,textAlign:"start",width:"100%"},securityFeature:{padding:12,gap:16,alignItems:"flex-start"},featureIcon:{width:20,height:20},securityContent:{flex:1},featureTitle:{fontSize:14,fontWeight:B().Wy.semibold,marginBottom:4,color:M().Tj.text.primary},featureDescription:{fontSize:12,lineHeight:1.5,fontWeight:B().Wy.regular,color:M().Tj.text.secondary},connectedTitle:{fontSize:24,fontWeight:B().Wy.semibold,marginBottom:8,color:M().Tj.text.primary},connectedSubtitle:{fontSize:16,lineHeight:1.5,width:"70%",margin:"0 auto",color:M().Tj.text.secondary},proceedToUserAuthButton:{width:"100%",height:36},errorDescription:{textAlign:"start",flexGrow:1,fontSize:16,lineHeight:1.5,paddingInlineStart:16,paddingInlineEnd:16,color:M().Tj.text.secondary}})),[]),z=[{icon:A().personKeyFillIcon,title:J.strictPermissions,description:J.strictPermissionsDesc},{icon:y().lockFillIcon,title:J.certifiedSecurity,description:J.certifiedSecurityDesc},{icon:j().M,title:J.controlYourData,description:J.controlYourDataDesc}];return(0,q.jsxs)("div",{style:D.wrapper,children:[(0,q.jsxs)("div",{style:D.titleSection,children:[(0,q.jsxs)(d().Ye,{style:D.header,children:[(0,q.jsx)(u().I,{icon:b().notionIcon,colorVariant:"primary",style:D.logoSize}),(0,q.jsx)(u().I,{icon:I?x().checkmarkShieldFillSmallIcon:v().xMarkFillSmallIcon,size:"sm",colorPalette:I?"blue":"red",colorVariant:"accentPrimary"}),(0,q.jsx)(u().I,{icon:w().salesforceIcon,colorVariant:"primary",style:D.logoSize})]}),(0,q.jsx)(g().A,{style:D.connectedTitle,isMultiline:!0,children:o||l?(0,q.jsx)(T().sA,{...J.salesforceAdminBotAlreadyConnected}):"auth_success"===n.type?(0,q.jsx)(T().sA,{...J.salesforceConnected}):(0,q.jsx)(T().sA,{...J.salesforceNotConnected})}),(0,q.jsx)(g().A,{style:D.connectedSubtitle,isMultiline:!0,children:(0,q.jsx)(T().sA,{...J.connectedDescription})}),t&&"site_change"!==(null==S?void 0:S.error)?(0,q.jsx)(c().Ay,{style:D.backToNotionButton,onClick:t,children:(0,q.jsx)(T().sA,{...J.backToNotion})}):void 0]}),I?(0,q.jsx)(d().wt,{style:D.securityFeatures,children:z.map(((e,t)=>(0,q.jsxs)(d().Ye,{style:D.securityFeature,children:[(0,q.jsx)(u().I,{icon:e.icon,size:"default",colorVariant:"secondary",style:D.featureIcon}),(0,q.jsxs)("div",{style:D.securityContent,children:[(0,q.jsx)(g().A,{style:D.featureTitle,isMultiline:!0,children:(0,q.jsx)(T().sA,{...e.title})}),(0,q.jsx)(g().A,{style:D.featureDescription,isMultiline:!0,children:(0,q.jsx)(T().sA,{...e.description})})]})]},t)))}):(0,q.jsx)(g().A,{style:D.errorDescription,isMultiline:!0,children:(null==S?void 0:S.errorDescription)||(0,q.jsx)(T().sA,{...J.fallbackErrorDescription})}),"site_change"===(null==S?void 0:S.error)&&k?(0,q.jsx)(g().A,{style:D.errorDescription,isMultiline:!0,children:(0,q.jsx)(T().sA,{...J.siteChangeErrorDescription})}):null,(0,q.jsxs)(d().wt,{style:D.buttonsSection,children:[p?(0,q.jsx)(f().A,{colorPalette:"blue",size:"lg",style:D.proceedToUserAuthButton,onClick:p,disabled:!1,children:(0,q.jsx)(T().sA,{...J.proceedToUserAuth})}):void 0,"site_change"===(null==S?void 0:S.error)&&k?(0,q.jsx)(f().A,{colorPalette:"red",size:"lg",style:D.disconnectButton,onClick:async()=>{_().A.reset(),await async function({environment:e,spaceId:t}){try{L().log({level:"info",from:"salesforceAuthActions",type:"handleDisconnectUsersForSpace",data:{message:"Disconnecting users from Salesforce",spaceId:t}});const{botIds:n,recordMap:o}=await K().Ju({environment:e,table:G().NX,id:t,type:"external"}),s=F().RecordMapWithRole.create(o),i=n.filter((e=>{const n=s.getModel({table:O().GP,id:e,spaceId:t}),o=null==n?void 0:n.integration_id;return o===m().mn||o===m().Iy}));L().log({level:"info",from:"salesforceAuthActions",type:"handleDisconnectUsersForSpace",data:{message:"Disconnecting users from Salesforce",spaceId:t,miscDataToConvertToString:{salesforceBots:i}}}),await K().jw({botIds:i,environment:e})}catch(n){L().log({level:"error",from:"salesforceAuthActions",type:"handleDisconnectUsersError",error:(0,H().convertErrorToLog)(n),data:{message:"Failed to disconnect users from Salesforce",miscDataToConvertToString:{spaceId:t}}})}}({environment:h,spaceId:k})},children:(0,q.jsx)(T().sA,{...J.DisconnectSalesforce})}):void 0,I?void 0:(0,q.jsx)(ae,{})]})]})}function re(){const e=(0,a().IS)((()=>({box:{border:`1px solid ${M().Tj.border.secondary}`,padding:"8px 4px",display:"flex",flexDirection:"column",gap:8,marginBottom:24,borderRadius:10,height:"100%",overflow:"scroll",boxShadow:"0px 1px 2px 0px #00000008, 0px 4px 48px 0px #00000012",backdropFilter:"blur(50px)"},avatar:{borderRadius:6,gap:8,padding:"0px 8px"}})),[]),t=(0,r().O$)(s().AppStoreSidebarSpaceStore),{workspaceOwners:n}=(0,E().P)({spaceStore:t});return(0,q.jsx)("div",{style:e.box,className:W().A5,children:(null==n?void 0:n.map((t=>(0,q.jsx)(N().A,{actorStore:t,containerStyle:e.avatar},t.id))))||null})}function ae(){const e=(0,a().IS)((()=>({learnMoreButton:{display:"inline-flex",alignItems:"center",justifyContent:"center",gap:4,width:"100%",height:36,lineHeight:1.5,textAlign:"center",fontSize:14,color:M().Tj.text.secondary}})),[]);return(0,q.jsx)(p().N,{href:$.integrationGuide,external:!0,children:(0,q.jsx)(h().p,{iconLeading:S().questionMarkCircleSmallIcon,colorPalette:"gray",size:"lg",style:e.learnMoreButton,children:(0,q.jsx)(T().sA,{...J.learnMore})})})}function le(){return(0,q.jsx)(X,{})}},735230:(e,t,n)=>{n.d(t,{A:()=>v});var o=n(296540),s=()=>n(907258),i=()=>n(590526),r=()=>n(401497),a=()=>n(396896),l=()=>n(807449),c=()=>n(302501),d=()=>n(824862),u=()=>n(848538),p=()=>n(798880),h=()=>n(69708),f=()=>n(534177),g=()=>n(256863),m=()=>n(453697),x=()=>n(173614),y=n(474848);function A(e){const{avatar:t,size:n}=e,o=function(e){return(0,r().IS)((()=>({container:{width:e,height:e,display:"flex",alignItems:"center",justifyContent:"center"}})),[e])}(n),s=t.icon??x().c;return(0,y.jsx)("div",{style:o.container,children:(0,y.jsx)(l().I,{icon:s,size:n})})}const S=(0,h().YK)({workspaceOwnerTooltip:{id:"shareMenu.cellMemberAvatar.workspaceOwnerTooltip",defaultMessage:"Workspace owner"}});function j(e){const{actorStore:t,avatar:n,isLarge:o}=e,s=o?32:28;return t?t.table===d().GP?(0,y.jsx)(g().A,{botStore:t,size:s}):t.table===p().oo?(0,y.jsx)(m().A,{userStore:t,size:s}):void(0,f().HB)(t):n?"mcp"===n.type?(0,y.jsx)(A,{avatar:n,size:s}):(0,y.jsx)(m().A,{avatar:n,size:s}):(0,y.jsx)(m().A,{userStore:void 0,size:s})}const v=function(e){const t=(0,h().tz)(),{actorStore:d,avatar:g,containerStyle:m,spaceRole:x,avatarBadge:A,caption:v,isLarge:b,restorationStatus:w,hideRolePill:I}=e,T=(0,i().O$)(s().AppStoreSidebarSpaceStore),M=(0,n(230711).V_)({spaceStore:T,userId:null==d?void 0:d.id}),C=x??M,B=(0,u().kI)(C)&&(0,u().P)(C)||"team_level_guest"===C,k=(0,i().K8)((()=>d?d.getDisplayName(t):null==g?void 0:g.name),[d,g,t]),D=(0,i().K8)((()=>{const{currentUserStore:e}=s().default.state;return!!e&&(!!d&&e.id===d.id)}),[d]),z=(0,r().IS)((()=>({container:{display:"flex",alignItems:"center",maxWidth:b?"unset":300,marginInlineStart:0},avatarWrapper:{position:"relative",...!b&&{height:28,width:28}},textContainer:{minWidth:0,marginInlineStart:b?10:6,marginInlineEnd:b?10:6},titleYouIndicator:{color:n(100622).Tj.text.secondary},detailLabel:{flex:1,minWidth:0},badgeIcon:{display:"inline-flex",flexShrink:0}})),[b]),_=(0,i().K8)((()=>Boolean(v)?v:d?d.getDetail():null==g?void 0:g.email),[v,d,g]),[R,W]=(0,o.useState)(!1);return(0,y.jsxs)("div",{style:{...z.container,...m},children:[(0,y.jsxs)("div",{style:z.avatarWrapper,children:[(0,y.jsx)(j,{actorStore:d,avatar:g,isLarge:b}),A]}),(0,y.jsxs)("div",{style:z.textContainer,children:[(0,y.jsxs)(a().fI,{gap:4,alignItems:"center",children:[(0,y.jsx)(c().A,{children:D?(0,y.jsx)(h().sA,{id:"cellMemberAvatar.displayName.title",defaultMessage:"{userFullDisplayName} <youIndicatorText>(You)</youIndicatorText>",values:{userFullDisplayName:k,youIndicatorText:e=>(0,y.jsx)("span",{style:z.titleYouIndicator,children:e})}}):k}),function(e,t){if(!I)switch(e){case"owner":case"membership_admin":if("mcp"===(null==t?void 0:t.type))return;return(0,y.jsx)(n(358075).l,{role:e});case"member":return;case"restricted_member":return(0,y.jsx)(n(313171).L,{});case"page_guest":case"team_level_guest":return(0,y.jsx)(n(231704).w,{labelType:e});case"none":case void 0:return;default:(0,f().HB)(e)}}(C,g),T&&w?(0,y.jsx)(n(476178).A,{spaceStore:T,restorationStatus:w,didAttemptRecovery:R}):void 0]}),(0,y.jsxs)(a().fI,{gap:6,alignItems:"center",children:[(0,y.jsx)(c().A,{isSmall:!0,style:z.detailLabel,children:_}),function(e,o){if(!I&&void 0!==e&&"mcp"===(null==o?void 0:o.type)&&"team_level_guest"!==e&&(0,u().LF)(e)){const e=t.formatMessage(S.workspaceOwnerTooltip);return(0,y.jsx)(n(26697).m,{placement:"top",renderTooltip:()=>e,render:t=>(0,y.jsx)("span",{...t,"aria-label":e,style:z.badgeIcon,children:(0,y.jsx)(l().I,{icon:n(414399).Y,size:"xs",colorVariant:"secondary"})})})}}(C,g)]})]}),!B&&!R&&T&&(null==d?void 0:d.table)===p().oo&&k&&"canBeRestored"===(null==w?void 0:w.status)?(0,y.jsx)(n(287414).A,{userStore:d,spaceId:T.id,onSubmit:()=>W(!0)}):void 0]})}},983201:(e,t,n)=>{n.d(t,{z:()=>f});var o=n(296540),s=()=>n(401497),i=()=>n(807449),r=()=>n(493552),a=()=>n(26697),l=()=>n(29037),c=()=>n(69708),d=()=>n(100622),u=()=>n(284371),p=()=>n(815585),h=n(474848);function f({integrationIconUrl:e,integrationIcon:t,primaryText:n,secondaryText:f,compact:g=!1,tooltipContent:m}){const x=(0,s().IS)((()=>({tooltipActorName:{fontWeight:u().Wy.medium,color:d().Tj.text.inversePrimary},tooltipText:{color:d().Tj.text.inverseSecondary,fontSize:12},container:{borderRadius:8,border:"1px solid rgba(84, 72, 49, 0.15)",paddingTop:g?8:14,paddingBottom:g?8:14,paddingInline:g?8:14,gap:8,display:"flex",flexGrow:1,minWidth:0,overflow:"hidden"},icon:{width:18,height:18},textWrapper:{overflow:"hidden",minWidth:0,flex:1}})),[g]),y=(0,o.useMemo)((()=>{if(!m)return;const e=m.connectedAt?(0,p().nl)(m.connectedAt,{useCompactFormat:!0,useLowercase:!0}):void 0;return(0,h.jsx)(c().sA,{defaultMessage:"Connected by {connectedBy} {connectedAt}",id:"database.viewSettings.collectionSettingsExternalSource.salesforceConnectedBy",values:{connectedBy:(0,h.jsx)("span",{style:x.tooltipActorName,children:m.connectedBy}),connectedAt:e}})}),[m,x]),A=(0,h.jsx)(a().m,{renderTooltip:e=>(0,h.jsx)("span",{style:x.tooltipText,...e,children:y}),disableTooltip:!m,placement:"top",render:e=>(0,h.jsx)("div",{...e,style:{alignSelf:"center",cursor:"pointer"},children:(0,h.jsx)(i().I,{icon:l().checkmarkIcon,size:"default",colorVariant:"secondary"})})});return(0,h.jsxs)("div",{style:x.container,children:[e?(0,h.jsx)("img",{style:x.icon,src:e,alt:""}):t||void 0,(0,h.jsxs)("div",{style:x.textWrapper,children:[(0,h.jsx)(r().D,{textOverflow:"ellipsis",styleKey:"bodyRegular",colorVariant:"primary",children:n}),(0,h.jsx)(r().D,{textOverflow:"ellipsis",styleKey:"captionRegular",colorVariant:"secondary",children:f})]}),g?void 0:A]})}},988536:(e,t,n)=>{n.d(t,{C:()=>w,j:()=>I});n(898992),n(354520),n(672577);var o=n(296540),s=()=>n(484714),i=()=>n(590526),r=()=>n(401497),a=()=>n(365917),l=()=>n(457205),c=()=>n(849255),d=()=>n(493552),u=()=>n(373009),p=()=>n(484392),h=()=>n(617871),f=()=>n(824862),g=()=>n(798880),m=()=>n(69708),x=()=>n(100622),y=()=>n(284371),A=()=>n(674582),S=()=>n(859004),j=()=>n(254526),v=()=>n(983201),b=n(474848);function w({integrationIconUrl:e,integrationIcon:t,spaceStore:n,flowId:a,renderActions:l,captionText:c,forceReauthForBot:f=!1,from:g}){const j=(0,s().v3)(),w=(0,r().IS)((()=>({connectedByAdminName:{fontWeight:y().Wy.medium,color:x().Tj.text.inversePrimary},borderedContainer:{borderRadius:6,borderStyle:"solid",borderWidth:1,borderColor:x().Tj.border.secondary,display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",padding:"16px 12px"},header:{fontWeight:y().Wy.medium,color:x().Tj.text.primary,fontSize:y().J.UIRegular.desktop,marginTop:0},iconGroup:{marginBottom:4},captionText:{fontSize:y().J.UISmall.desktop,color:x().Tj.text.secondary,fontWeight:y().Wy.regular,textAlign:"center",marginInlineEnd:"auto",marginBottom:4,marginInlineStart:"auto",maxWidth:"80%",lineHeight:"20px"},siteButton:{padding:"4px",borderRadius:6,display:"flex",justifyContent:"space-between",overflow:"hidden",width:"100%"},siteButtonTextContainer:{gap:8,display:"flex",minWidth:0,overflow:"hidden"},siteNameText:{fontSize:y().J.UIRegular.desktop,overflow:"hidden",whiteSpace:"nowrap",textOverflow:"ellipsis"},siteNameSecondaryText:{fontSize:y().J.UISmall.desktop,color:x().Tj.text.secondary,fontWeight:y().Wy.regular,textAlign:"start",whiteSpace:"nowrap"}})),[]),{status:T,instanceUrl:M,connectedByStore:C,spaceBotStore:B}=I({spaceStore:n}),k=(0,m().tz)(),{adminName:D,connectedAtTs:z}=(0,i().K8)((()=>{if(!C||!B)return{adminName:void 0,connectedAtTs:void 0};if(!B.getLastEditedAt())return{adminName:void 0,connectedAtTs:void 0};const e="number"==typeof B.getLastEditedAt()?B.getLastEditedAt():parseInt(String(B.getLastEditedAt()),10);return{adminName:C.getDisplayName(k),connectedAtTs:e}}),[C,k,B]),_=(0,o.useCallback)((()=>{let e="admin";e="no_user_access"===T?"user":"admin","connected"===T&&!1!==f&&(e=f.integration_id===h().mn?"admin":"user"),S().rT({environment:j,from:g,flowId:a,authType:e,isReAuth:Boolean("connected"===T&&f)})}),[j,g,a,T,f]),R=(0,o.useMemo)((()=>"not_connected"===T||"no_user_access"===T||"connected"===T&&f?(0,b.jsx)(A().m,{integrationIconUrl:e,integrationIcon:t,styles:{wrapper:w.borderedContainer,header:w.header,iconGroup:w.iconGroup,arrowRight:{height:24,width:24},icon:{height:36,width:36}},title:(0,b.jsx)(m().sA,{defaultMessage:"Authenticate Salesforce",id:"database.viewSettings.collectionSettingsExternalSource.connectToSalesforce.headline"}),description:(0,b.jsx)("div",{style:w.captionText,children:c}),children:(0,b.jsx)("div",{style:{display:"flex",justifyContent:"center"},children:(0,b.jsx)(u().E,{colorPalette:"blue",style:{marginInlineEnd:"auto",marginBottom:0,marginInlineStart:"auto"},onClick:_,children:(0,b.jsx)(d().D,{styleKey:"bodyRegular",children:f?(0,b.jsx)(m().sA,{defaultMessage:"Re-authenticate Salesforce",id:"database.viewSettings.collectionSettingsExternalSource.reAuthToSalesforce"}):(0,b.jsx)(m().sA,{defaultMessage:"Connect to Salesforce",id:"database.viewSettings.collectionSettingsExternalSource.connectToSalesforce"})})})})}):"connected"===T?(0,b.jsx)(v().z,{integrationIconUrl:e,integrationIcon:t,primaryText:(0,p().A)((null==M?void 0:M.split(".")[0])||""),secondaryText:M||"",compact:!0,tooltipContent:{connectedAt:z,connectedBy:D}}):null),[D,z,T,e,t,M,w,c,_,f]);return(0,b.jsxs)(b.Fragment,{children:[R,null==l?void 0:l(T)]})}function I(e){const{spaceStore:t}=e;return(0,i().K8)((()=>{var e;if(!t)return{status:"not_connected",spaceBotStore:void 0,externalAuthentication:void 0,instanceUrl:void 0,connectedByStore:void 0};const n=a().A.state;if(!n.loaded)return{status:"not_connected",spaceBotStore:void 0,externalAuthentication:void 0,instanceUrl:void 0,connectedByStore:void 0};const o=n.bots.filter((({integration_id:e})=>e===h().mn));if(0===o.length)return{status:"not_connected",spaceBotStore:void 0,externalAuthentication:void 0,instanceUrl:void 0,connectedByStore:void 0};const s=l().v.createChildStore(t,{table:f().GP,id:o[0].id,spaceId:t.id}),i=s.getLastEditedById(),{status:r,externalAuthentication:d}=(0,j().i_)(s),u=null===(e=n.externalEntities.find((e=>e.getBotId()===s.id)))||void 0===e||null===(e=e.getMetainfo())||void 0===e?void 0:e.instanceUrl,p=null==u?void 0:u.replace("https://",""),m=i?c().L.createChildStore(t,{table:g().oo,id:i}):void 0;return{status:r,spaceBotStore:s,externalAuthentication:d,instanceUrl:p,connectedByStore:m}}),[t])}}}]);