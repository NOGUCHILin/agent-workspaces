"use strict";(globalThis.webpackChunknotion_next=globalThis.webpackChunknotion_next||[]).push([[43239,99718],{12956:(e,t,n)=>{n.d(t,{u:()=>y});n(296540);var o=()=>n(383036),a=()=>n(26697),r=()=>n(81068),i=()=>n(575143),s=()=>n(662971),c=()=>n(484714),l=()=>n(590526),d=()=>n(283163),u=()=>n(245720),m=()=>n(546926),p=()=>n(890492),f=()=>n(69708),v=()=>n(636714),S=n(474848);function g(e){const{context:t,extensionMenuParent:n,actionMenuListParent:o,popupEvents:a,displayName:r,width:i,initialFocus:s,subActions:g}=e,{isPhone:h}=(0,c().Y0)(),y=(0,m().Tf)();let b;b=h?y?{menuType:m().gu.Modal,onClickLeft:n.close,left:(0,S.jsx)(d().h,{}),enableMobileRefresh:y,paddingTop:10,title:(0,S.jsx)(f().sA,{...r}),...a}:{menuType:m().gu.Modal,right:(0,S.jsx)(f().sA,{...u().W.done}),onClickRight:n.close,...a}:{menuType:m().gu.Popup,width:i??220,...a};const w=(0,l().K8)((()=>g(t)),[t,g]);return(0,S.jsx)(p().A,{...b,children:(0,S.jsx)(v().A,{initialFocus:s??0,context:t,sections:w,onAccept:o.onAccept})})}var h=()=>n(267271);function y(e){const{key:t,displayName:n,displayNameInterpolatedValues:c,subTitle:l,analyticsName:d,validators:u,subActions:m,collapseSubActionsIntoParent:p,hideSubActions:f,svg:v,icon:y,right:b,rightStyle:w,renderTooltip:T,disableTooltip:I,tooltipPlacement:x,width:A,initialFocus:M,clientSkill:k,fuzzySearchKeywordsArray:C,disabled:j,bottomSheetInitialState:E}=e,P=(0,h().Ls)({clientSkill:k,key:`extension ${t}`,displayName:n,displayNameInterpolatedValues:c,analyticsName:d,validators:u,subActions:m,collapseSubActionsIntoParent:p,hideSubActions:f,fuzzySearchKeywordsArray:C,closeParentMenu:!0,disabled:j,action:()=>{},render:(t,c,d)=>(0,S.jsx)(a().m,{render:a=>{var u;const p=null===(u=e.disabled)||void 0===u?void 0:u.call(e,c);return(0,S.jsx)(s().A,{...t,disabled:p,disabledFeedback:p,renderOrigin:(e,t)=>{const n={...(0,o().A)(e,a),title:l?(0,S.jsx)(h().fh,{subTitle:l(c),children:P.displayName}):P.displayName,right:b,rightStyle:w};return v?(0,S.jsx)(i().A,{...n,svg:v,ref:t}):(0,S.jsx)(r().A,{...n,icon:y,ref:t})},onFocus:d.onFocus,renderExtension:(e,t)=>(0,S.jsx)(g,{context:c,extensionMenuParent:t,actionMenuListParent:d,popupEvents:e,displayName:n,width:A,initialFocus:M,subActions:m}),bottomSheetInitialState:E})},renderTooltip:()=>(0,S.jsx)("div",{style:h().FG,children:null==T?void 0:T({context:c,title:P.displayName})}),disableTooltip:!T||(null==I?void 0:I(c)),placement:x})});return P}},26440:(e,t,n)=>{n.d(t,{w:()=>r});n(296540);var o=n(474848);const a={viewBox:"0 0 20 20",fittedViewBox:"0.12 2.37 17.51 15.26",svg:(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)("path",{d:"M3.442 13.102a.625.625 0 0 1-.884 0L.304 10.848a.625.625 0 0 1 .884-.884l1.187 1.187V10a7.625 7.625 0 1 1 2.303 5.46.625.625 0 1 1 .872-.895A6.375 6.375 0 1 0 3.625 10v1.151l1.187-1.187a.625.625 0 1 1 .884.884z"}),(0,o.jsx)("path",{d:"M9.375 5.725a.625.625 0 0 1 1.25 0v3.65H13.6a.625.625 0 0 1 0 1.25H10A.625.625 0 0 1 9.375 10z"})]})},r=(0,n(340498).wt)("clockArrowBack",a,"default")},35588:(e,t,n)=>{n.d(t,{_:()=>a});n(296540);const o={viewBox:"0 0 20 20",fittedViewBox:"2.19 2.09 15.16 15.62",svg:(0,n(474848).jsx)("path",{d:"M6.7 3.115a1.828 1.828 0 0 0-2.558 2.151 1.828 1.828 0 0 0-.882 2.93l.084.1q-.269.106-.502.301a1.827 1.827 0 0 0-.222 2.575l3.616 4.298a6.291 6.291 0 0 0 10.73-6.193l-1.762-4.868a1.863 1.863 0 0 0-3.612.54L9.737 2.747a1.828 1.828 0 0 0-3.038.369m-1.174 1.2a.58.58 0 0 1 .814.07l2.828 3.362a.625.625 0 1 0 .957-.805L7.897 4.295a.578.578 0 0 1 .884-.744l3.729 4.431a.625.625 0 0 0 1.072-.598l-.71-2.149a.612.612 0 0 1 1.156-.4l1.763 4.867a5.042 5.042 0 0 1-8.598 4.963l-3.617-4.297a.577.577 0 1 1 .885-.744l1.627 1.934a.625.625 0 0 0 .956-.805L4.216 7.392a.578.578 0 0 1 .884-.744l2.228 2.648a.625.625 0 0 0 .956-.805L5.456 5.13a.58.58 0 0 1 .07-.814"})},a=(0,n(340498).wt)("handWave",o,"default")},43450:(e,t,n)=>{n.d(t,{R:()=>r});var o=()=>n(484714),a=()=>n(590526);function r(e){const t=(0,o().v3)();return(0,a().K8)((()=>{const n=t.currentUser.id;return!!(e&&e.isDefined()&&n)&&Boolean(e.canAdmin())}),[t.currentUser.id,e])}},51781:(e,t,n)=>{n.r(t),n.d(t,{FETCHABLE_TEAM_TYPES:()=>d,fetchUnfetchedTeams:()=>m,fetchUnfetchedTeamsFromLocalStorage:()=>f,getActiveTeamsMetadataForUserInSpace:()=>S,getAllTeamsMetadataForUserInSpace:()=>g,getTeamMetadataFromStore:()=>y,getTeamStore:()=>h,refetchTeams:()=>p});n(517642),n(658004),n(733853),n(845876),n(432475),n(515024),n(731698),n(898992),n(354520);var o=()=>n(723085),a=()=>n(383293),r=()=>n(290247),i=()=>n(854150);const s=new(n(29923).R)({key:"localStorageTeams",namespace:n(553737).Bq,important:!1,trackingType:"preference"});var c=()=>n(860048);n(57145);const l=1e3;const d=["Joined","UnjoinedActive","Archived"];async function u(e){const{userId:t,spaceId:n,teamTypesToUpdate:o,teamIdsToUpdate:r,environment:i,canTruncateRecordMap:d,sort:u}=e,m=a().q.getOrCreateUnit(t,n);if(0===o.size||"all"!==r&&0===r.size)return void(await m.pendingUpdates);const p=(0,c().FK)({userId:t,spaceId:n,teamTypes:o,teamIds:r,environment:i,canTruncateRecordMap:d,sort:u});a().q.queueUpdateForSpaceUser({userId:t,spaceId:n,fetchedTeamsPromise:p,fetchedTeamsSource:"server",teamTypesToUpdate:o,teamIdsToUpdate:r}),await m.pendingUpdates,function(e){const{userId:t,spaceId:n,teamsResponse:o}=e;if(!(0,c().HK)())return;const{teams:a}=o,r=a.filter((e=>"Joined"===e.type)),i=a.filter((e=>"UnjoinedActive"===e.type)).toSorted(((e,t)=>{var n,o;return((null===(n=t.membershipSummary)||void 0===n?void 0:n.membersIncludingOwnersCount)??0)-((null===(o=e.membershipSummary)||void 0===o?void 0:o.membersIncludingOwnersCount)??0)})),d=a.filter((e=>"Archived"===e.type)),u=r.concat(i,d).slice(0,l);s.update((e=>({...e??{},[t]:{...(null==e?void 0:e[t])??{},[n]:{...o,teams:u}}})))}({userId:t,spaceId:n,teamsResponse:{teams:Object.values(m.teams),hasUnjoinedActiveTeams:m.hasUnjoinedActiveTeams}})}async function m(e){const{userId:t,spaceId:n,teamTypes:o,environment:r,canTruncateRecordMap:i,sort:s}=e,c=a().q.getOrCreateUnit(t,n),l=new Set(Array.from(o.values()).filter((e=>"server"!==c.lastFetchSourceOfTeamType[e])));await u({userId:t,spaceId:n,teamTypesToUpdate:l,teamIdsToUpdate:"all",environment:r,canTruncateRecordMap:i,sort:s})}async function p(e){const{userId:t,spaceId:n,teamIds:o,environment:r}=e,i=a().q.getOrCreateUnit(t,n),s=new Set(d.filter((e=>"server"===i.lastFetchSourceOfTeamType[e])));await u({userId:t,spaceId:n,teamTypesToUpdate:s,teamIdsToUpdate:o,environment:r})}function f(){const e=s.getState();for(const t in e)for(const n in e[t]){const o=a().q.getOrCreateUnit(t,n),r=new Set(d.filter((e=>"none"===o.lastFetchSourceOfTeamType[e])));0!==r.size&&a().q.queueUpdateForSpaceUser({userId:t,spaceId:n,fetchedTeamsPromise:Promise.resolve(e[t][n]),fetchedTeamsSource:"local",teamTypesToUpdate:r,teamIdsToUpdate:"all"})}}async function v(e){const{userId:t,spaceStore:n,teamTypes:o,environment:r}=e;return await m({userId:t,spaceId:n.id,teamTypes:o,environment:r}),a().q.readTeams(t,n.id,o).teams}async function S(e){const{userId:t,spaceStore:n,environment:o}=e;return await v({userId:t,spaceStore:n,teamTypes:new Set(["Joined","UnjoinedActive"]),environment:o})}async function g(e){const{userId:t,spaceStore:n,environment:o}=e;return await v({userId:t,spaceStore:n,teamTypes:new Set(["Joined","UnjoinedActive","Archived"]),environment:o})}function h(e){const{teamId:t,spaceStore:n}=e;return o().h.createChildStore(n,{table:i().yK,id:t})}function y(e){var t;const{teamStore:n,userId:o,spaceStore:i}=e,s=a().q.readMembershipCount(o,i.id,n.id),c=n.getArchivedBy()?"Archived":n.isMemberOrGuest(o,r()._.getSpacePermissionGroupIds({userId:o,spaceId:i.id}))?"Joined":"UnjoinedActive";return{id:n.id,title:n.getName()??"",icon:null===(t=n.getIcon())||void 0===t?void 0:t.icon,type:c,membershipSummary:s,isDefaultTeam:n.isDefault(),accessLevel:n.getTeamAccessLevel(),description:n.getDescription()}}},57145:(e,t,n)=>{var o=n(746518),a=n(179504),r=n(479306),i=n(225397),s=n(435370),c=n(344124),l=n(206469),d=Array,u=a(c("Array","sort"));o({target:"Array",proto:!0},{toSorted:function(e){void 0!==e&&r(e);var t=i(this),n=s(d,t);return u(n,e)}}),l("toSorted")},97835:(e,t,n)=>{n.r(t),n.d(t,{iconDefinition:()=>a,inviteMemberIcon:()=>r});n(296540);var o=n(474848);const a={viewBox:"0 0 20 20",fittedViewBox:"3.68 2.37 15.82 17.13",svg:(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)("path",{d:"M10 2.375c-1.137 0-2.054.47-2.674 1.242-.608.757-.9 1.765-.9 2.824s.292 2.066.9 2.824c.62.772 1.537 1.241 2.674 1.241s2.055-.469 2.675-1.241c.608-.758.9-1.766.9-2.824 0-1.059-.292-2.067-.9-2.824-.62-.773-1.538-1.242-2.675-1.242M7.676 6.441c0-.842.233-1.554.624-2.042.38-.473.937-.774 1.7-.774s1.32.301 1.7.774c.391.488.624 1.2.624 2.042s-.233 1.554-.624 2.041c-.38.473-.937.774-1.7.774s-1.32-.3-1.7-.774c-.391-.487-.624-1.2-.624-2.041M10 11.63c-2.7 0-5.101 1.315-6.12 3.305-.361.706-.199 1.421.23 1.923.412.48 1.06.767 1.74.767h5.845a4.6 4.6 0 0 1-.28-1.25H5.85c-.342 0-.634-.148-.79-.33-.138-.162-.172-.336-.067-.54.761-1.488 2.672-2.626 5.007-2.626.83 0 1.605.144 2.294.395.269-.364.59-.688.952-.96A7.9 7.9 0 0 0 10 11.63"}),(0,o.jsx)("path",{d:"M16 19.5a3.5 3.5 0 1 1 0-7 3.5 3.5 0 0 1 0 7m2.594-3.469a.625.625 0 0 0-.625-.625h-1.375v-1.375a.625.625 0 0 0-1.25 0v1.375h-1.375a.625.625 0 0 0 0 1.25h1.375v1.375a.625.625 0 1 0 1.25 0v-1.375h1.375c.345 0 .625-.28.625-.625"})]})},r=(0,n(340498).wt)("inviteMember",a,"default")},108414:(e,t,n)=>{n.d(t,{A:()=>a});class o extends(()=>n(757695))().Store{getInitialState(){return{open:!1}}}const a=new o},231536:(e,t,n)=>{n.d(t,{Y:()=>i,G:()=>r});var o=()=>n(534177);const a={clipboardActions:n(884107).R.clipboardActions,duplicationActions:n(855801).VI.duplicateActions,formulasModule:n(862292).T.formulas,markdownLinkifyIt:n(659602).g,tinyMceMicrosoftWordPasteFilter:n(335722).S};function r(...e){for(const t of e)a[t].load()}function i(e){const t=a[e].getLoadingState();if("idle"===t.status)r(e);else if("pending"===t.status||"rejected"===t.status);else{if("resolved"===t.status)return t.value;(0,o().HB)(t)}}},240865:(e,t,n)=>{n.d(t,{V:()=>r});var o=()=>n(755531),a=()=>n(590526);function r(e){return(0,a().K8)((()=>{var t;return e?e.getMemberCountFromPublicSpaceData()??void 0:(null===(t=(0,o().S)())||void 0===t?void 0:t.getMemberCountFromPublicSpaceData())??void 0}),[e])}},245720:(e,t,n)=>{n.d(t,{W:()=>o});const o=(0,n(69708).YK)({done:{id:"modal.doneButton",defaultMessage:"Done"},cancel:{id:"modal.cancelButton",defaultMessage:"Cancel"},back:{id:"modal.backButton",defaultMessage:"Back"}})},283163:(e,t,n)=>{n.d(t,{h:()=>i});n(296540);var o=()=>n(473541),a=()=>n(807449),r=n(474848);function i(){return(0,r.jsx)(a().I,{icon:o().w,size:"lg",colorVariant:"primary"})}},316189:(e,t,n)=>{n.d(t,{o:()=>f});n(16280);var o=()=>n(295633),a=()=>n(165358),r=()=>n(179034),i=()=>n(94830),s=()=>n(973647),c=()=>n(534177),l=()=>n(345913),d=()=>n(213477),u=()=>n(966152),m=()=>n(244828),p=()=>n(16205);async function f(e){const{type:t,spaceStore:n,initializeStore:o,teamStore:r}=e;let i;if("inExistingStore"===t){const t=o.isEmptyPage(),n=o.getParentStore();if(await o.waitUntil((()=>o.isDefined())),t&&n&&n.canEdit()&&("block"===n.table||"space"===n.table||"team"===n.table))return async function(e){const{environment:t,item:n,spaceStore:o,initializeStore:r}=e,i=await v(e);try{return await m().createAndCommit({userAction:"createTemplateInstance.deleteCurrentPageStore",environment:t,canUndo:!0,perform:e=>{l().oD({environment:t,blocks:[r],transaction:e,permanentlyDelete:!0})}}).serverCommitResult,i}catch(s){s instanceof Error&&a().log({level:"error",from:"createTemplateInstance",type:"deleteCurrentPageStoreError",error:s,data:{miscDataToConvertToString:{template_id:n.id,template_block_id:n.rootId,target_space_id:o.id,public_template_name:n.name}}})}}({...e,destination:(0,u().LT)(n)});i=(0,u().LT)(o)}else"inTeam"===t?i=(0,u().LT)(r):"inSpace"===t?i=(0,u().LT)(n):(0,c().HB)(t);return v({...e,destination:i})}async function v(e){const{environment:t,item:n,useRecordCache:l,useMinimalTemplates:u,spaceStore:m,from:f,isEmailShared:v,destination:S}=e,g=l&&!u?n.previewRootId:n.rootId,h={id:g,spaceId:n.spaceId},y=new(o().B)(t,{table:r().ev,id:h.id,spaceId:h.spaceId});let b;"onboarding"===f?b="onboarding":"page_template_modal"===f?b="mobile_app":"homepage_team"===f?b="team_home":(0,c().HB)(f);const w=await async function(e){const{environment:t,templateSource:n,sourceBlockId:o,isEmailShared:a}=e,r=await(0,p().oC)(t,o);return{context:"",source:n,isListedTemplate:Boolean(r),isFirstPartyPaidTemplate:void 0!==r&&(0,i().Z1)(r),isEmailShared:a}}({environment:t,templateSource:b,sourceBlockId:g,isEmailShared:v}),T="onboarding"===b,I="mobile_app"===w.source?await(0,d()._3)({environment:t,sourceTemplateBlockStore:y,destination:S,options:{duplicateOnlyCollectionSchema:!1,deepCopyTransclusionContainers:!0,resolveTemplateVariables:!0},templateInstallationMetadata:{...w,source:"mobile_app"},from:f}):await(0,d().hh)({environment:t,sourceBlocks:[y],destination:S,options:{duplicateOnlyCollectionSchema:!1,deepCopyTransclusionContainers:!0,resolveTemplateVariables:!0},duplicateSubtreeGateName:"duplicate_subtree_template_flows",unlockPage:!0,templateInstallationMetadata:w,shouldUseSynchronousDuplicationAPI:T,from:f,skipUserFacingMessages:!0});if(I&&!s().Q.isFail(I)&&0!==I.value.createdBlocks.length)return I.value.createdBlocks[0];a().log({level:"error",from:"createTemplateInstance",type:"duplicateTemplateError",error:null!=I&&I.error?I.error:new Error("No response"),data:{miscDataToConvertToString:{template_id:n.id,template_block_id:n.rootId,target_space_id:m.id,public_template_name:n.name,from:f}}})}},344124:(e,t,n)=>{var o=n(444576);e.exports=function(e,t){var n=o[e],a=n&&n.prototype;return a&&a[t]}},350648:(e,t,n)=>{n.d(t,{D2:()=>x,Ip:()=>w,Jk:()=>T,YT:()=>I,e2:()=>y,g:()=>b});n(517642),n(658004),n(733853),n(845876),n(432475),n(515024),n(731698),n(898992),n(354520);var o=()=>n(907258),a=()=>n(929219),r=()=>n(675133),i=()=>n(128933),s=()=>n(584262),c=()=>n(798880),l=()=>n(946141),d=()=>n(753812),u=()=>n(384944),m=()=>n(117484),p=()=>n(254600),f=()=>n(406767),v=()=>n(244828),S=()=>n(465960),g=()=>n(51781);const h=(0,n(69708).YK)({joinTeamSuccessMessage:{id:"teamInviteLinkActions.joinTeam.confirmationMessage",defaultMessage:"Joined {teamName}"},requestTeamSuccessMessage:{id:"teamInviteLinkActions.requestAccess.successMessage",defaultMessage:"Successfully requested membership"},requestTeamFailureMessage:{id:"teamInviteLinkActions.requestAccess.failureMessage",defaultMessage:"Failed to request membership"}});async function y({environment:e,userId:t,teamStore:n,user:o}){const a=n.getSpaceId();if(!a)return;await S().rU({environment:e,teamId:n.id,spaceId:a,teamUserInfo:o,isSettingDefaultTeam:!1,inviterId:t})&&(l().vo(e,{store:n,joined_role:"member",from:"team_invite_link"}),await b({environment:e,userId:t,teamStore:n}),i().D6({label:r().A.formatMessage(h.joinTeamSuccessMessage,{teamName:n.getName()})}))}async function b({environment:e,userId:t,teamStore:n}){const r=o().default.state.currentUserRootStore,i=n.getSpaceId();if(!i||!r)return;const c=r.getSpaceViewStores().filter((e=>e.getSpaceId()===i))[0];await(0,p().t)({environment:e,spaceViewStore:c,userSettingsStore:void 0,userRootStore:r,pageVisitSource:s().y8.JoinTeam,navigationType:"switchingToOrLoadingSpace"}),(0,g().fetchUnfetchedTeamsFromLocalStorage)();a().A.state.online&&(0,g().fetchUnfetchedTeams)({userId:t,spaceId:i,teamTypes:new Set(["Joined"]),environment:e}),S().L0({environment:e,teamStore:n,shouldScroll:!0})}async function w({environment:e,teamId:t,message:n}){if(!e.currentUser.id)return;"success"===(await d().callApi({eventName:"requestAccess",environment:e,data:{type:"current-actor-to-team",teamId:t,message:n}})).type?(l().XQ(e,{teamId:t}),await I({environment:e}),new Promise((e=>setTimeout(e,500))).then((()=>{i().D6({label:r().A.formatMessage(h.requestTeamSuccessMessage)})}))):i().D6({label:r().A.formatMessage(h.requestTeamFailureMessage)})}async function T({environment:e,teamStore:t,accessRequestStore:n,status:o}){const a=n.getForActorId();if(!a)return;const r=n.getRecordModel({table:c().oo,id:a});if(r){if("approved"===o){const n=[{type:"member",entity_type:"user",user_id:r.id}];if(!(await S().Zd({environment:e,teamStore:t,teamMemberInfos:n,isSettingDefaultTeam:!1,createNewTeamFlowId:void 0})))return}v().createAndCommit({userAction:"GrantAccessActivityAction.handleGrantAccess",environment:e,canUndo:!0,perform:t=>{u().zv({store:n,transaction:t,data:{resolved_time:Date.now(),resolved_by_table:c().oo,resolved_by_id:e.currentUser.id,status:o}})}}),l().GW(e,{store:t,resolution:o})}}async function I({environment:e}){const{lastVisitedSpaceView:t,userRootStore:n,userSettingsStore:o}=await(0,f().e)({environment:e,disableRedirectUrl:!1});t?await(0,p().t)({environment:e,spaceViewStore:t,userRootStore:n,userSettingsStore:o,pageVisitSource:s().y8.BackForward,navigationType:"switchingToOrLoadingSpace"}):await(0,m().t)({environment:e,userRootStore:n,userSettingsStore:o,pageVisitSource:s().y8.BackForward})}async function x({environment:e,teamId:t}){const n=await d().callApi({eventName:"getTeamAccessRequestMetadata",environment:e,data:{teamId:t}});if("success"===n.type)return n.data}},435761:(e,t,n)=>{n.d(t,{LN:()=>w,Qh:()=>v,Qs:()=>g,gc:()=>T,hL:()=>p,m:()=>b,rV:()=>y});n(57145),n(517642),n(658004),n(733853),n(845876),n(432475),n(515024),n(731698),n(581454);var o=n(296540),a=()=>n(907258),r=()=>n(755531),i=()=>n(484714),s=()=>n(590526),c=()=>n(383293),l=()=>n(821062),d=()=>n(51781);function u(e){const{teamTypes:t}=e,n=(0,i().v3)(),u=(0,s().K8)((()=>{var t;return e.userId??(null===(t=a().default.state.currentUserStore)||void 0===t?void 0:t.id)}),[e.userId]),m=(0,s().K8)((()=>e.spaceStore??(0,r().S)()),[e.spaceStore]);return(0,o.useEffect)((()=>{void 0!==u&&void 0!==m&&(0,d().fetchUnfetchedTeams)({userId:u,spaceId:m.id,teamTypes:t,environment:n,canTruncateRecordMap:null==e?void 0:e.canTruncateRecordMap,sort:null==e?void 0:e.sort})}),[u,m,t,n,null==e?void 0:e.canTruncateRecordMap,null==e?void 0:e.sort]),(0,s().K8)((()=>{if(void 0===u||void 0===m)return{teams:[],isLoading:!0,isError:!1};const{teams:e,isLoading:n,isError:o}=c().q.readTeams(u,m.id,t);return{teams:e,isLoading:n,isError:o}}),[u,m,t],{equalityFn:l().k})}const m=new Set(["Joined"]);function p(e){const{userId:t,spaceStore:n}=e||{};return u({userId:t,spaceStore:n,teamTypes:m})}const f=new Set(["UnjoinedActive"]);function v(e){const{userId:t,spaceStore:n}=e||{};return u({userId:t,spaceStore:n,teamTypes:f,canTruncateRecordMap:null==e?void 0:e.canTruncateRecordMap,sort:null==e?void 0:e.sort})}const S=new Set(["Joined","UnjoinedActive"]);function g(e){const{userId:t,spaceStore:n}=e||{};return u({userId:t,spaceStore:n,teamTypes:S})}const h=new Set(["Joined","UnjoinedActive","Archived"]);function y(e){const{userId:t,spaceStore:n}=e||{};return u({userId:t,spaceStore:n,teamTypes:h})}function b(e){const{userId:t,spaceStore:n}=e,{teams:r,isLoading:i,isError:c}=p({userId:t,spaceStore:n}),l=(0,s().K8)((()=>{var e;return new Map(((null===(e=a().AppStoreSidebarSpaceViewStore.state)||void 0===e?void 0:e.getJoinedTeams())??[]).map(((e,t)=>[e,t])))}),[]);return{teams:(0,o.useMemo)((()=>r.toSorted(((e,t)=>(l.get(e.id)??1/0)-(l.get(t.id)??1/0)))),[r,l]),isLoading:i,isError:c}}function w(e){const{spaceStore:t}=e,{teams:n,isLoading:o,isError:a}=b(e);return{teams:(0,s().K8)((()=>t?n.map((e=>(0,d().getTeamStore)({teamId:e.id,spaceStore:t}))):[]),[n,t]),isLoading:o,isError:a}}function T(e){const{teams:t}=e,n=(0,s().K8)((()=>e.spaceStore??(0,r().S)()),[e.spaceStore]);return n?t.map((({id:e,type:t,membershipSummary:o})=>({store:(0,d().getTeamStore)({teamId:e,spaceStore:n}),type:t,membershipSummary:o}))):[]}},473541:(e,t,n)=>{n.d(t,{w:()=>a});n(296540);const o={viewBox:"0 0 20 20",fittedViewBox:"5.87 3.72 7.16 12.56",directional:!0,svg:(0,n(474848).jsx)("path",{d:"M6.131 9.381a.875.875 0 0 0 0 1.238l5.4 5.4a.875.875 0 1 0 1.238-1.238L7.987 10l4.782-4.781A.875.875 0 0 0 11.53 3.98z"})},a=(0,n(340498).wt)("arrowChevronSingleLeftFill",o,"fill")},475355:(e,t,n)=>{n.d(t,{Vs:()=>F,gj:()=>P,hX:()=>L,oH:()=>B,v4:()=>_});n(16280);var o=()=>n(907258),a=()=>n(675133),r=()=>n(711339),i=()=>n(295633),s=()=>n(732810),c=()=>n(723085),l=()=>n(110192),d=()=>n(165358),u=()=>n(416504),m=()=>n(206267),p=()=>n(737188),f=()=>n(179034),v=()=>n(519831),S=()=>n(854150),g=()=>n(468006),h=()=>n(529316),y=()=>n(797573),b=()=>n(201980),w=()=>n(946141),T=()=>n(753812),I=()=>n(274511),x=()=>n(632709),A=()=>n(316189),M=()=>n(244828),k=()=>n(877398),C=()=>n(860048),j=()=>n(108414),E=()=>n(465960);async function P({environment:e,name:t,description:n,icon:a,accessLevel:l,isDefault:d,flowId:u,createTeamHome:m,teamPermissionRole:g,spacePermissionRole:h,members:y,settings:b}){const{sidebarSpaceStore:I,sidebarSpaceViewStore:x}=o().default.getState();if(!I)throw new Error("currentSpaceStore does not exist");if(!x)throw new Error("currentSpaceViewStore does not exist");const A=r().default.mark("client_create_team_latency"),M=I.id,k=await T().callApi({eventName:"createTeam",environment:e,data:{spaceId:M,name:t,description:n,icon:a,isDefault:d,accessLevel:l,teamPermissionRole:g,spacePermissionRole:h,members:y,settings:b}});if("failed"===k.type)return void(0,E().O)(k);const{teamId:C}=k.data,j=c().h.createChildStore(I,{table:S().yK,id:C,spaceId:M});await j.load();const P=j.getSpaceId(),F=j&&P&&{id:j.id,table:v().Vl,spaceId:P},_=j&&F&&s().m.createChildStore(j,F);await(null==_?void 0:_.load());const B=j&&P&&i().B.createChildStore(j,{id:(0,p().t)(j.id),table:f().ev,spaceId:P});return await(null==B?void 0:B.load()),P&&await T().callApi({eventName:"createCollectionViewBlockForPosts",environment:e,data:{teamId:j.id,spaceId:P}}),m&&R({environment:e,teamStore:j,spaceStore:I,spaceViewStore:x}),w()._P(e,{store:j,flowId:u}),r().default.measure(A,{environment:e}),j}function F({environment:e,page:t}){var n;const o=m().JW(),a=(null===(n=t.getParentPointer())||void 0===n?void 0:n.table)!==S().yK?"page_to_team_nested":"page_to_team";w().H8(e,{from:a,flowId:o}),j().A.setState({open:!0,pageStore:t,flowId:o})}async function _({environment:e,page:t,flowId:n,intl:a}){var r;const{accessLevel:i,spacePermissionRole:s,teamPermissionRole:c,members:l}=await(0,C().sy)(t),d=(t.isDefined()?t.getModel().getRenderTitle({intl:a,userTimeZone:(0,u().P)(),getRecordModel:t.getRecordModel}):void 0)??b().q4_(t.getTitleValue()),m=await P({environment:e,name:d,icon:null===(r=t.getIcon())||void 0===r?void 0:r.icon,accessLevel:i,isDefault:!1,description:"",flowId:n,createTeamHome:!1,teamPermissionRole:c,spacePermissionRole:s,members:l});if(!m)return;const{sidebarSpaceViewStore:p}=o().default.state;if(!p)return;const f=await(0,I().U)();M().createAndCommit({userAction:"teamActions.movePageToCreatedTeam",environment:e,canUndo:!0,perform:n=>{f({environment:e,spaceViewStore:p,transaction:n,teamStore:m,blocksToMove:[t],location:{type:"append"}})}}),(0,E().F2)({environment:e,teamId:m.id,tab:x().p.Members,from:"create_team_from_page"}),await new Promise((t=>setTimeout((()=>(0,E().Mh)({teamStore:m,environment:e})),100)))}async function B({environment:e,name:t,description:n,icon:a,flowId:r,trackCreateTeamComplete:i}){const{sidebarSpaceStore:s,sidebarSpaceViewStore:l}=o().default.getState();if(!s)throw new Error("currentSpaceStore does not exist");if(!l)throw new Error("currentSpaceViewStore does not exist");const d=s.id,u=await T().callApi({eventName:"enableTeams",environment:e,data:{spaceId:d,defaultTeamName:t,defaultTeamIcon:a,defaultTeamDescription:n}});if("failed"===u.type)return void(0,E().O)(u);const{teamId:m}=u.data,p=c().h.createChildStore(s,(0,g().uo)(m,d));return await p.load(),R({environment:e,teamStore:p,spaceStore:s,spaceViewStore:l}),w().b0(e,{spaceId:d,store:p,flowId:r}),i&&m&&w()._P(e,{store:p,flowId:r}),p}async function L({environment:e,teamStore:t,from:n,buttonPopupStore:o}){var a;if(!e.currentUser.id)return!1;const r=m().JW(),i=t.isDefault(),s=t.getTeamAccessLevel();if(i)return!1;const c=t.getName(),d=await P({environment:e,name:(0,l().Q)(c||""),description:"",icon:t.getRawIcon(),accessLevel:s,isDefault:i,createTeamHome:!0,teamPermissionRole:null===(a=t.getTeamPermission())||void 0===a?void 0:a.role,spacePermissionRole:t.getSpacePermissionRole(),members:[],settings:t.getSettings(),flowId:r});return!!d&&(w().KK(e,{store:d,from:n}),(0,E().L0)({environment:e,teamStore:d,shouldScroll:!0}),(0,E().F2)({environment:e,teamId:d.id,tab:x().p.General,from:"duplicate_team",buttonPopupStore:o}),new Promise((e=>setTimeout(e,500))).then((()=>{(0,k().jH)(c)})),!0)}async function R(e){const{environment:t,teamStore:n,spaceStore:o,spaceViewStore:r}=e,i=(s=a().A.getIntl(),(0,y().B)(h().w.teamsHomepage,s));var s;return!!(await(0,A().o)({environment:t,item:i,spaceStore:o,spaceViewStore:r,useMinimalTemplates:!1,type:"inTeam",teamStore:n,from:"homepage_team"}))||(d().log({level:"error",from:"teamActions",type:"createHomepageOnTeamCreation-PageNotCreated"}),!1)}},589407:(e,t,n)=>{n.r(t),n.d(t,{ellipsisIcon:()=>a,iconDefinition:()=>o});n(296540);const o={viewBox:"0 0 20 20",fittedViewBox:"2.62 8.62 14.76 2.76",svg:(0,n(474848).jsx)("path",{d:"M4 11.375a1.375 1.375 0 1 0 0-2.75 1.375 1.375 0 0 0 0 2.75m6 0a1.375 1.375 0 1 0 0-2.75 1.375 1.375 0 0 0 0 2.75m6 0a1.375 1.375 0 1 0 0-2.75 1.375 1.375 0 0 0 0 2.75"})},a=(0,n(340498).wt)("ellipsis",o,"default")},636714:(e,t,n)=>{n.d(t,{A:()=>w});n(898992),n(354520),n(581454);var o=n(296540),a=()=>n(590526),r=()=>n(182412),i=()=>n(683021),s=()=>n(498521),c=()=>n(449279),l=()=>n(663639),d=()=>n(922931),u=()=>n(535393),m=()=>n(736847),p=()=>n(452004),f=()=>n(69708),v=()=>n(231536),S=()=>n(671894),g=n(474848);const h=25,y=200,b=n(757695).Store.createClass(h,{name:"limitStore"});function w({topBorder:e,context:t,onAccept:n,onFocus:w,empty:T,keyboardPriority:I,disableKeyboard:x,initialFocus:A,onEmptyEnter:M,comboboxProps:k,useLimit:C,onFilteredSectionsChange:j,filter:E,sections:P,menuListStore:F,resetInitialFocusOnSectionChangeAlways:_,resetFocusOnMouseOut:B,role:L,showNoResultsMessage:R,onFooterEnter:N,filterSections:O,flattenSectionsOnSearch:U,renderItemStyles:V,shouldShowBlockTypeTitle:D}){const K=(0,a().uB)(void 0,b),q=(0,a().uB)(F,p().$),[z,H,J]=(0,a().K8)((()=>{let e=0;const n=(0,S().js)({sections:E&&O?O:P,context:t,query:E||"",shouldShowBlockTypeTitle:D});for(const t of n)e+=t.actions.length;return[C?(0,S().Le)(n,K.state):n,e,n]}),[P,t,E,C,K,O,D]);(0,o.useEffect)((()=>{i().Ay.state.open&&i().rA.setState(0===J.length)}),[J]),(0,o.useEffect)((()=>{null==j||j(z)}),[j,z]);const G=(0,o.useRef)(E),W=(0,o.useCallback)((e=>{e<y&&K.state<H&&K.setState(K.state+h)}),[K,H]),Y=Boolean(U&&E),$=(0,o.useMemo)((()=>{const e=new Map;for(const t of J)if(t.key!==r().IZ)for(const n of t.actions)e.set(n.key,t.title);return e}),[J]),{menuItemActionMap:X,menuItemSectionKeyMap:Q,menuListSections:Z}=(0,o.useMemo)((()=>{const o=new Map,a=new Map,i=z.map((i=>{const s=i.key.toString();return{key:i.key,render:t=>i.render({...t,topBorder:!Y&&(0!==t.index||Boolean(e)),title:i.title,hideTitle:Y}),items:i.actions.map((e=>{e.lazyDependencyKeys&&(0,v().G)(...e.lazyDependencyKeys);const c={key:e.key,render:(o,a)=>{const c=i.key===r().IZ?$.get(e.key):i.title,l=Y||i.key===r().IZ;return e.render(o,t,{onAccept:(e,t,o)=>{null==n||n(e,t,o,s)},onFocus:a.onFocus,sectionTitle:c,extendItemTitle:l,styles:V})},action:({event:n})=>{e.action(t,n)}};return o.set(c,e),a.set(c,s),c}))}}));return{menuItemActionMap:o,menuItemSectionKeyMap:a,menuListSections:i}}),[z,Y,e,$,t,V,n]);(0,o.useEffect)((()=>{if(E!==G.current&&0===A){G.current=E;if(Boolean(N)&&0===u().i2(Z))return d().rd({store:q});q.setState({...q.state,focus:{section:0,indexLocal:0,indexGlobal:0,footerFocused:!1}})}}),[E,A,Z,q,N]);const ee=(0,o.useCallback)(((e,o)=>{if(n){const r=X.get(e),i=Q.get(e);if(r){var a;if(null!==(a=r.isDisabled)&&void 0!==a&&a.call(r,t))return;n(r,t,o.event,i,o.index)}}}),[n,t,X,Q]),te=(0,o.useCallback)((e=>{let n;var o;(e.indexLocal&&(n=u().SG(e.indexLocal,Z)),e.indexGlobal)&&(n=null===(o=u().e7(e.indexGlobal,Z))||void 0===o?void 0:o.item);if(!n)return;const a=X.get(n),r=Q.get(n);a&&(null==w||w(a,t,r))}),[X,Q,w,Z,t]);return(0,g.jsxs)(g.Fragment,{children:[Boolean(R)&&0===z.length?(0,g.jsx)(m().A,{children:(0,g.jsx)(c().u,{title:T||(0,g.jsx)(f().sA,{id:"action.search.noResults",defaultMessage:"No results"})})}):void 0,(0,g.jsx)(l().A,{type:l().O.Vertical,role:L,priority:I,store:q,disableKeyboard:x,sections:Z,initialFocus:A,onEmptyEnter:M,onAccept:ee,onFocus:te,comboboxProps:k,resetInitialFocusOnSectionChangeAlways:_,resetFocusOnMouseOut:B,onFooterEnter:N}),C?(0,g.jsx)(s().A,{onChange:W}):void 0]})}},662971:(e,t,n)=>{n.d(t,{A:()=>p});var o=n(296540),a=()=>n(30537);const r=function(){const[e,t]=o.useState({x:0,y:0});return o.useEffect((()=>{const e=e=>{t({x:e.clientX,y:e.clientY})};return window.addEventListener("mousemove",e),()=>{window.removeEventListener("mousemove",e)}}),[]),e};var i=n(474848);function s({x:e,mouseX:t}){return t>e?void 0:-Math.max(e-t,10)+"px"}function c({x:e,width:t,mouseX:n}){return n>e?-Math.max(n-(e+t),10)+"px":void 0}function l({x:e,width:t,mouseX:n}){return n>e?`${Math.max(n-(e+t),10)}px`:`${Math.max(e-n,10)}px`}function d({x:e,y:t,height:n,mouseX:o,mouseY:a}){return o>e?`polygon(0% 0%, 0% 100%, 100% ${100*(a-t)/n}%)`:`polygon(100% 0%, 0% ${100*(a-t)/n}%, 100% 100%)`}function u(e){const{x:t=0,y:n=0,height:a=0,width:u=0}=e.el.getBoundingClientRect()||{},{x:m,y:p}=r(),f={x:t,y:n,height:a,width:u,mouseX:m,mouseY:p},v=(0,o.useRef)(null),S=o.useCallback((e=>{if(v.current){v.current.style.pointerEvents="none";const t=document.elementFromPoint(e.clientX,e.clientY);if(v.current.style.pointerEvents="auto",t){const n=new MouseEvent(e.nativeEvent.type,e.nativeEvent);t.dispatchEvent(n)}}}),[]),g={insetInlineEnd:c(f),insetInlineStart:s(f),height:a,width:l(f),clipPath:d(f)};return(0,i.jsx)("div",{ref:v,onClick:S,style:{cursor:"pointer",position:"absolute",pointerEvents:"auto",top:0,...g}})}function m({onClick:e,renderOrigin:t,renderExtension:r,allowOptionalExtensionMenu:s,...c},l){const{disabled:d,disableDefaultClick:m,onFocus:p,focused:f,openOnFocus:v,placementToOrigin:S,alignmentToOrigin:g,disableCloseOnEnter:h,bottomSheetInitialState:y,popupTypeOverride:b}=c,w=(0,n(484714).WS)(),T=(0,n(546926).Tf)(),[I,x]=(0,o.useState)(!1),A=(0,o.useRef)(null),M=(0,o.useRef)(null),k=(0,o.useRef)(null),C=(0,o.useRef)(null),j=(0,o.useCallback)((()=>{k.current&&window.clearTimeout(k.current),C.current&&window.clearTimeout(C.current),k.current=null,C.current=null}),[]),E=(0,o.useCallback)((()=>{j(),d||x(!0)}),[d,j]),P=(0,o.useCallback)((()=>{j(),x(!1)}),[j]),F=(0,o.useCallback)((e=>{j(),I||(e&&e.preventDefault&&e.preventDefault(),k.current=window.setTimeout(E,120))}),[I,j,E]),_=(0,o.useCallback)((()=>{j(),I&&(C.current=window.setTimeout(P,100))}),[I,P,j]),B=(0,o.useCallback)((t=>{p(),E(),s&&(null==e||e(t),P())}),[p,E,s,e,P]),L=(0,o.useCallback)((()=>{F()}),[F]),R=(0,o.useCallback)((()=>{p(),F()}),[p,F]),N=(0,o.useCallback)((e=>{if(n(726637).A.isMobile)return;const t=A.current;I&&t&&!t.contains(e.target)&&P()}),[I,P]),O=(0,o.useCallback)((e=>{13===e.keyCode&&I&&!h&&P()}),[I,P,h]);(0,o.useEffect)((()=>{if(!Boolean(m))return window.addEventListener("click",N),()=>{window.removeEventListener("click",N)}}),[m,N]),(0,o.useEffect)((()=>(window.addEventListener("keydown",O),()=>{window.removeEventListener("keydown",O)})),[O]);const U=(0,o.useRef)(f);(0,o.useEffect)((()=>{v&&!U.current&&f?F():!f&&U.current&&_(),U.current=f}),[f,v,F,_]);const V=(0,n(401497).IS)((()=>({mobilePopupStyle:{borderRadius:12,backgroundColor:n(100622).Tj.background.secondary}})),[]),D={...(0,n(383036).A)({onMouseEnter:L,onClick:B},c),showExtensionArrow:!0};let K=a().n.Popup;return b?K=b:w&&(K=T?a().n.BottomSheet:a().n.SlideUp),(0,i.jsx)(n(782482).N,{debugName:"ExtensionMenuItem",capture:f,onEnter:I?void 0:F,onRight:F,onLeft:I?_:void 0,onEsc:I?_:void 0,children:(0,i.jsx)(n(127833).zD,{popupType:K,bottomSheetInitialState:y,open:I,origin:t(D,l),placementToOrigin:S??"right",alignmentToOrigin:g??"center",originGap:0,disableMouseCapture:!0,preventBlockRenderQueueOnEnter:!0,preventScaleTransition:!w,preventCaptureEsc:!0,ref:A,render:()=>(0,i.jsxs)(i.Fragment,{children:[!w&&M.current?(0,i.jsx)(u,{el:M.current}):null,(0,i.jsx)("div",{ref:M,style:{height:"100%"},children:r({onMouseEnter:R},{close:_})})]}),style:{overflow:"visible",...w&&V.mobilePopupStyle},trapFocus:!0,onDismiss:P})})}const p=o.forwardRef(m)},671894:(e,t,n)=>{n.d(t,{hS:()=>b,o2:()=>w,js:()=>h,Le:()=>y,F6:()=>T});n(944114),n(517642),n(658004),n(733853),n(845876),n(432475),n(515024),n(731698),n(898992),n(823215),n(354520),n(581454);var o=()=>n(675133),a=()=>n(69708),r=()=>n(778078),i=()=>n(496603),s=(n(296540),()=>n(736847)),c=()=>n(589407),l=()=>n(12956),d=n(474848);const u=(0,a().YK)({moreOptions:{id:"action.moreOptions",defaultMessage:"More options"}});var m=()=>n(431404),p=()=>n(680288),f=()=>n(129522);const v=25,S=5,g=(0,a().YK)({mixedBlocks:{id:"actionMenuHelpers.mixedBlocks.title",defaultMessage:"{count, plural, one {{count} block} other {{count} blocks}}"}});function h(e){const t=o().A.getIntl(),{sections:n,context:a,query:h,shouldShowBlockTypeTitle:y}=e;let b=h.trim().toLowerCase();b.startsWith("/")&&(b=b.slice(1));const I=w(n,a).map(((e,n)=>{let{actions:o,title:r}=e;const i=o.length-S;if(e.shouldShowMoreOptions&&i>1){const e=function(e){return(0,l().u)({key:"more options",displayName:u.moreOptions,analyticsName:u.moreOptions.defaultMessage,svg:c().ellipsisIcon,validators:[],subActions:()=>[{key:0,title:void 0,render:e=>(0,d.jsx)(s().A,{...e}),actions:e}]})}(o.slice(S));o=[...o.slice(0,S),e]}const v=a.blocks[0];if(v){const e=v.getType();if(y&&e&&0===n){const n=a.blocks.every((t=>t.getType()===e))?(0,m().Z)(e):g.mixedBlocks;if(n){var h;r=t.formatMessage(n,{count:a.blocks.length});const e=null===(h=f().K.findCollectionViewBlockFromStore(v))||void 0===h?void 0:h.collectionContextStore.getViewType();if(e){const t=p().to[e];t&&(r+=` · ${t}`)}}}}return{...e,actions:o,title:r}}));if(!b)return I;const x=function(e){return e.map((e=>({...e,actions:e.actions.map((t=>{const n=t.searchName||t.displayName||"",o=[n,e.searchTitle||e.title||"",n].join(" ");return{...t,searchName:o}}))})))}(function(e,t){const n=[];for(const o of e){const e={...o,actions:[]};for(const a of o.actions)if(T(a,t))if(a.subActions){const r=w(a.subActions(t),t);if(a.hideSubActions){e.actions.push(a);continue}if(a.collapseSubActionsIntoParent){for(const t of r)for(const n of t.actions)e.actions.push(n);continue}const i=r.map((e=>({...e,key:`${o.key} ${a.key} ${e.key}`,title:e.title||a.displayName,searchTitle:[a.searchName||a.displayName,e.searchTitle||e.title].filter(Boolean).join(" ")})));for(const e of i)n.push(e)}else e.actions.push(a);e.actions.length&&n.push(e)}return n}(n,a)),A=[],M=new Map;for(const o of x)for(const e of o.actions)M.set(e,o),A.push(e);const k=(0,r().Ay)(b,A,(e=>e.searchName||""),{minScore:v,getSortScore:e=>-e.score*(e.original.sortScoreMultiplier??1)}),C=new Set(k),j=A.filter((e=>Boolean(e.alwaysShowInSearch)&&!C.has(e))),E=j.filter((e=>"start"===e.alwaysShowInSearch)),P=j.filter((e=>"end"===e.alwaysShowInSearch)),F=i().$z([...E,...k,...P],(e=>{const t=M.get(e);if(t)return t.title})),_=[];for(const o of Object.keys(F)){const e=F[o],t=M.get(e[0]);t&&_.push({...t,actions:e})}return _}function y(e,t){if(!t)return e;let n=0;const o=[];for(const a of e){if(n>=t)break;const e=a.actions.slice(0,t-n);e.length>0&&(n+=e.length,o.push({...a,actions:e}))}return o}function b(e,t){const n=[];for(const o of e){const e=o.actions.filter(t);e.length>0&&n.push({...o,actions:e})}return n}function w(e,t){return b(e,(e=>T(e,t)))}function T(e,t){if(e.validators){return e.validators.every((e=>e(t)))}return!0}},729986:(e,t,n)=>{n.d(t,{A:()=>a});class o extends(()=>n(757695))().Store{getInitialState(){return{modalOpen:!1,tokenQuery:"",inviteTargets:[],inviteRole:"member",table:n(854150).yK,isFocused:!0,flowId:void 0,inputFocus:"invitee",emailMessage:""}}}const a=o},732777:(e,t,n)=>{n.r(t),n.d(t,{default:()=>R});n(898992),n(354520),n(581454);var o=n(296540),a=()=>n(726637),r=()=>n(381175),i=()=>n(484714),s=()=>n(590526),c=()=>n(401497),l=()=>n(546926),d=()=>n(890492),u=()=>n(81068),m=()=>n(663639),p=()=>n(736847),f=()=>n(584262),v=()=>n(69708),S=()=>n(305390),g=()=>n(312788),h=()=>n(718827),y=()=>n(960955),b=()=>n(26697),w=()=>n(120739),T=()=>n(100622),I=()=>n(284371),x=()=>n(946141),A=()=>n(578136),M=()=>n(569047),k=()=>n(341974),C=()=>n(898808),j=()=>n(192940),E=()=>n(16006),P=n(474848);function F(e){const{navigate:t}=(0,o.useContext)(g().E),{teamStore:n}=e,r=(0,i().v3)(),l=(0,j().h)(n),d=(0,s().K8)((()=>(0,A().D)({isMobileNative:r.device.isMobileNative,disableExposureLogging:!0})),[r.device.isMobileNative]),u=function({teamHomeEnabled:e}){return(0,c().IS)((()=>({headerWrap:{display:"flex",...e?{padding:4,marginInlineStart:8,marginInlineEnd:8,borderRadius:6}:{marginInlineStart:12,marginInlineEnd:12},alignItems:"center",...a().A.isMobile&&{paddingTop:12,paddingBottom:8}},teamNameContainer:{marginInlineEnd:10,flexGrow:1,flexShrink:0,lineHeight:"1em"},teamName:{fontSize:12,fontWeight:I().Wy.semibold,maxWidth:180,marginInlineEnd:4,alignSelf:"center",...I().RC},teamNameAndSettings:{display:"flex"},icon:{marginInlineEnd:10,marginTop:2},memberCount:{fontSize:12,color:T().Tj.text.tertiary}})),[e])}({teamHomeEnabled:d}),m=()=>{y().A.addNamedPopup("team_more_actions"),x().lR(r,{store:n,from:"team_menu_header"})},p=()=>{y().A.removeNamedPopup("team_more_actions")},f=(0,o.useCallback)((e=>{d&&t({environment:r,url:(0,w().a)({teamId:n.id,spaceId:n.getSpaceId()}),openInNew:e.metaKey||e.ctrlKey?"tab":void 0})}),[r,n,d,t]);return(0,P.jsx)(b().m,{renderTooltip:()=>(0,P.jsx)(v().sA,{defaultMessage:"View teamspace home",id:"TeamMenuHeader.tooltip"}),disableTooltip:!d,alignment:"start",render:e=>(0,P.jsxs)(h().Ay,{...e,style:u.headerWrap,onClick:f,disabled:!d,children:[(0,P.jsx)(C().x,{disabled:!0,store:n,size:28,style:u.icon}),(0,P.jsxs)("div",{style:u.teamNameContainer,children:[(0,P.jsxs)("div",{style:u.teamNameAndSettings,children:[(0,P.jsx)(E().A,{store:n,style:u.teamName}),(0,P.jsx)(M().OutlinerTeamOverflow,{teamId:n.id,onPopupClick:m,onPopupClose:p,from:"team_menu_header",hideJoin:!0})]}),(0,P.jsx)("div",{style:u.memberCount,children:(0,P.jsx)(v().sA,{defaultMessage:"{numberOfMembers, plural, one {{numberOfMembers} member} other {{numberOfMembers} members}}",values:{numberOfMembers:l},id:"teamMenuHeader.teamMemberCount"})})]}),(0,P.jsx)(k().TeamJoinLeaveButton,{teamStore:n,from:"team_breadcrumb_popup",navigateToTeamHomeOnJoin:!1})]})})}var _=()=>n(381195),B=()=>n(535960);const L=7;function R(e){const{teamStore:t,parent:n}=e,g=(0,i().v3)(),h=(0,s().K8)((()=>(0,A().D)({isMobileNative:g.device.isMobileNative,disableExposureLogging:!0})),[g.device.isMobileNative]),y=(0,s().K8)((()=>(0,_().O)({teamStore:t}).filter((e=>e.canRead()&&e.isNavigableBlock()))),[t]),[b,w]=(0,o.useState)(!1),T=y.map((e=>({key:e.id,render:t=>(0,P.jsx)(S().A,{store:e,hidePath:!0,...t}),action:t=>{const o=(0,r().V)(t.event);(0,B().u)({environment:g,store:e,openInNew:o,pageVisitSource:f().y8.Breadcrumb}),o||n.close()}}))),I=(0,c().IS)((()=>({morePagesCaption:a().A.isMobile?{}:{marginTop:0,marginBottom:0}})),[]),x=y.length-L,M={key:"more-pages",render:e=>(0,P.jsx)(u().A,{...e,style:I.morePagesCaption,caption:(0,P.jsx)(v().sA,{defaultMessage:"{extraPages} more…",values:{extraPages:x},id:"TeamBreadcrumbPopup.morePages"}),onClick:()=>w((e=>!e)),className:"notranslate"}),action:()=>{}};let k=[];return k=T.length>L&&!b&&x>1?[...T.slice(0,L),M]:T,(0,P.jsx)(d().A,{menuType:a().A.isMobile?l().gu.ActionSheet:l().gu.Popup,minWidth:280,header:(0,P.jsx)(p().A,{extraTopPadding:!0,children:(0,P.jsx)(F,{teamStore:t})}),children:(0,P.jsx)(m().A,{type:m().O.Vertical,initialFocus:void 0,resetFocusOnMouseOut:h,sections:[{key:"pages",items:k,render:e=>(0,P.jsx)(p().A,{...e,children:e.children})}]})})}},934999:(e,t,n)=>{n.r(t),n.d(t,{archiveBoxIcon:()=>r,iconDefinition:()=>a});n(296540);var o=n(474848);const a={viewBox:"0 0 20 20",fittedViewBox:"3.12 3.12 13.75 13.76",svg:(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)("path",{d:"M8 9.875a.625.625 0 1 0 0 1.25h4a.625.625 0 1 0 0-1.25z"}),(0,o.jsx)("path",{d:"M3.125 4.75c0-.897.728-1.625 1.625-1.625h10.5c.898 0 1.625.728 1.625 1.625v1.57c0 .676-.413 1.256-1 1.5v7.43c0 .898-.727 1.625-1.625 1.625h-8.5a1.625 1.625 0 0 1-1.625-1.625V7.82c-.587-.244-1-.824-1-1.5zm11.5 3.195h-9.25v7.305c0 .207.168.375.375.375h8.5a.375.375 0 0 0 .375-.375zm1-1.625V4.75a.375.375 0 0 0-.375-.375H4.75a.375.375 0 0 0-.375.375v1.57c0 .205.164.372.369.375h10.512a.375.375 0 0 0 .369-.375"})]})},r=(0,n(340498).wt)("archiveBox",a,"default")},976519:(e,t,n)=>{n.d(t,{q:()=>r});n(898992),n(354520);var o=()=>n(590526),a=()=>n(435761);function r(e){const{teamId:t,spaceStore:n}=e,{teams:r}=(0,a().Qs)({spaceStore:n});return(0,o().K8)((()=>{if(!t)return!1;const e=r.filter((e=>e.isDefaultTeam));return 1===e.length&&e[0].id===t}),[t,r])}}}]);