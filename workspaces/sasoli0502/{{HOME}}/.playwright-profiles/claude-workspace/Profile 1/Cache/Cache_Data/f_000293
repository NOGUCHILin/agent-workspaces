"use strict";(globalThis.webpackChunknotion_next=globalThis.webpackChunknotion_next||[]).push([[2209,29802,32626,48486,79349,95576,97651],{6313:(e,t,o)=>{o.d(t,{F:()=>E});var n=()=>o(242422),i=()=>o(495106),a=()=>o(795523),r=()=>o(367550),s=()=>o(239575),l=()=>o(28817),c=()=>o(19575),d=()=>o(224701),u=()=>o(931513),p=()=>o(946473),m=(o(296540),()=>o(394888)),g=()=>o(49210),f=()=>o(300474),v=()=>o(484714),b=()=>o(590526),y=()=>o(741615),h=()=>o(699143),S=()=>o(577914),_=()=>o(807449),x=()=>o(493552),w=()=>o(769607),k=()=>o(25729),M=()=>o(166386),I=()=>o(979340),C=()=>o(69708),A=()=>o(534177),T=()=>o(241021),j=()=>o(838239),P=()=>o(227358),D=()=>o(528093),B=o(474848);function R({onDismiss:e}){const t=(0,C().tz)(),o=(0,v().v3)(),n=(0,f().r)(),i=o.currentUser.id,r=(0,D()._)({name:"ai_usage",spaceId:n,userId:i,amount:1}),s=(0,b().K8)((()=>{if(r&&"cumulative"===r.limit.type&&"unlimited"!==r.limit.total)return r.limit.total-r.limit.current}),[r]),l=(0,y()._3)({spaceId:n}),c=(0,a().i5)(l);if(void 0===s||!(0,A().O9)(c))return null;const d=(0,I().u2)({product:(0,a().AI)(l),intl:t});return(0,B.jsxs)(h().Y1,{gap:24,padding:"24px 24px 20px 24px",children:[(0,B.jsx)(j().Y,{iconAndTitle:s>0?(0,B.jsxs)(h().Y1,{align:"top-center",gap:12,children:[(0,B.jsx)(_().I,{icon:w().aiFaceFillIcon,size:"xl",colorVariant:"secondary"}),(0,B.jsx)(x().D,{styleKey:"titleSmSemibold",colorVariant:"primary",style:{textAlign:"center"},children:(0,B.jsx)(C().sA,{id:"ineligibleForAiPurchaseModal.title",defaultMessage:"You still have {responsesLeft, plural, one {{responsesLeft} free AI response} other {{responsesLeft} free AI responses}}",values:{responsesLeft:s}})})]}):(0,B.jsx)(P().Z,{iconGroup:k().k,iconColorVariant:"secondary",title:(0,B.jsx)(C().sA,{id:"ineligibleForAiPurchaseModal.title.outOfResponses",defaultMessage:"You’ll be able to purchase AI in {daysLeft, plural, one {{daysLeft} day} other {{daysLeft} days}}",values:{daysLeft:(0,M().PZ)(c)}})}),description:(0,B.jsx)(x().D,{styleKey:"bodySmRegular",colorVariant:"primary",children:s>0?(0,B.jsx)(C().sA,{id:"ineligibleForAiPurchaseModal.description.responsesLeft",defaultMessage:"You’ll be able to purchase Notion AI after finishing your free {planName} plan trial",values:{planName:d}}):(0,B.jsx)(C().sA,{id:"ineligibleForAiPurchaseModal.description",defaultMessage:"Since you’re on a free {planName} plan trial, you can only purchase Notion AI after the trial ends",values:{planName:d}})})}),(0,B.jsx)(T().a,{layout:"vertical",primaryButtons:[{buttonType:"outline",label:(0,B.jsx)(C().sA,{id:"ineligibleForAiPurchaseModal.primaryAction",defaultMessage:"Got it"}),onClick:e}]}),(0,B.jsx)(S().R,{})]})}const N=354;async function E(e){const{environment:t,spaceStore:o,billingData:f,product:v,from:b,pageSection:y,isTrial:h,dismissMobilePlansModal:S,postUpgradeCallback:_,offer:x}=e;if(!o)return;if((0,a().N8)(f))return void(0,c().cz)();if("ai"===v&&(0,a().TB)(f))return void async function(e){await g().T.showAsyncModal((t=>(0,B.jsx)(m().s,{isOpen:t.isOpen,onDismiss:t.onDismiss,onClosed:t.onClosed,areaConstraint:{width:{type:"min",length:N},height:{type:"unlimited",scroll:"allow"}},render:()=>(0,B.jsx)(R,{onDismiss:t.onDismiss,...e}),animateSizeTransition:!1})))}({environment:t});if("enterprise"===v){const n=await i().T.awaitData(t,{userId:t.currentUser.id||""}),a=f&&{type:"admin",...f};if((0,p().q)(n,o,a))return void(0,c().lK)({initialQuestion:"interest_in_enterprise",openedFrom:e.from})}if(e.isTrial)return void l().e_({openedFrom:e.from});if(n().default.checkGate({gateName:"usage_based_pricing_pfa_checks_purchased_credits_enabled"})&&"ai_credit_pack"===v)(0,s().x9)();else if(null!=f&&f.subscription&&null!=f&&f.paymentMethod)(0,u().o)(t,{desiredProducts:[v],from:b,analyticsArgs:{from:b,pageSection:y},postUpgradeCallback:_,offerCampaign:null==x?void 0:x.campaign});else{const{subscriptionTier:e,addOnFeature:t}=(0,r().Qt)(v)?{subscriptionTier:(0,a().AI)(f),addOnFeature:v}:{subscriptionTier:v,addOnFeature:void 0};await(0,d().qI)({subscriptionTier:e,addOnFeature:t,from:b,offer:x,isTrial:h,dismissMobilePlansModal:S,postUpgradeCallback:_})}}},11756:(e,t,o)=>{o.d(t,{R:()=>g});var n=()=>o(564884),i=()=>o(675133),a=()=>o(128933),r=(o(296540),()=>o(203913)),s=o(474848);var l=()=>o(597755),c=()=>o(112799),d=()=>o(246766),u=()=>o(549721),p=()=>o(288856);const m=(0,o(69708).YK)({notOpeningPrompt:{id:"openInDesktopApp.notOpeningPrompt",defaultMessage:"Not opening?"},downloadDesktopApp:{id:"openInDesktopApp.downloadDesktopApp",defaultMessage:"Downloading Notion for Desktop. Already have the app?"}});async function g(e){const{environment:t,from:o,isRegistered:c,alwaysAttemptOpenNativeApp:d}=e,p=(0,l().PT)(window.location.href);c?((0,n().u)({environment:t,event:{eventName:"open_desktop_app_from_notion",eventProperties:{from:o,always_attempt_open_native_app:d}}}),(0,u().e)({environment:t,url:p}),function(e){const{item:t,downloadDesktopCallback:o}=e;a().D6({...t,right:(0,s.jsx)(r().jj,{downloadDesktopCallback:o})})}({item:{label:i().A.formatMessage(m.notOpeningPrompt),durationMs:1e4},downloadDesktopCallback:()=>{f({environment:t,from:"appSwitcher"})}})):await f({environment:t,from:"appSwitcher"})}async function f(e){const{environment:t,from:o}=e,n=await(0,c().a)(t.device);n&&((0,p().p)({environment:t,from:o}),(0,d().navigate)({environment:t,url:n,openInNew:"tab"}),a().Sy(),function(e){const{item:t,openDesktopCallback:o}=e;a().D6({...t,right:(0,s.jsx)(r().zn,{openDesktopCallback:o})})}({item:{label:i().A.formatMessage(m.downloadDesktopApp),durationMs:1e4},openDesktopCallback:()=>{g({environment:t,from:"appSwitcher",isRegistered:!0})}}))}},12314:(e,t,o)=>{o.d(t,{rD:()=>u,tl:()=>p,qo:()=>v,x2:()=>m,QB:()=>f,gE:()=>g,sf:()=>d,pO:()=>c,vP:()=>l});var n=()=>o(79926),i=()=>o(590526),a=()=>o(131448),r=()=>o(717250),s=()=>o(481411);function l(){return(0,i().K8)((()=>a().default.isVisible(r().l)&&"topbar_more_button"===s().k.state.currentStep),[])}function c(){return(0,i().K8)((()=>a().default.isVisible(r().l)&&"available_offline_item"===s().k.state.currentStep),[])}const d=new(n().O2)("offlineOnboarding",(()=>Promise.all([o.e(75134),o.e(44711),o.e(53321),o.e(38293),o.e(15499)]).then(o.bind(o,674730)))),u=(0,n()._h)(d,(e=>e.MaybeOfflineModeLaunchModal)),p=(0,n()._h)(d,(e=>e.OfflineModeLaunchModal)),m=(0,n()._h)(d,(e=>e.OfflineModeSidebarCallout)),g=(0,n()._h)(d,(e=>e.OfflinePagesListener)),f=(0,n()._h)(d,(e=>e.OfflineModeTopbarTooltip)),v=(0,n()._h)(d,(e=>e.OfflineModeMenuItemTooltip))},12932:(e,t,o)=>{o.r(t),o.d(t,{SidebarCard:()=>m});var n=o(296540),i=()=>o(920198),a=()=>o(590526),r=()=>o(401497),s=()=>o(741615),l=()=>o(38554),c=()=>o(212137),d=()=>o(964831),u=()=>o(354572),p=o(474848);function m(e){const t=(0,r().IS)((()=>({container:{position:"sticky",bottom:0,marginTop:"auto"}})),[]),o=(0,l().U)(),m=(0,i().L)(),g=(0,a().K8)((()=>null==m?void 0:m.id),[m]),f=(0,n.useMemo)((()=>(0,d().nc)()),[]),v=(0,s()._3)({spaceId:g}),b=(0,u().F)({billingData:v,permissionsInviteStore:f,spaceStore:m}),y=(0,n.useMemo)((()=>"card"===(null==b?void 0:b.type)?(null==b?void 0:b.component())??void 0:void 0),[b]);return(0,p.jsx)("div",{style:t.container,children:o?y:(0,p.jsx)(c().MaybeInAppActivityRenderer,{children:y})})}},24126:(e,t,o)=>{o.d(t,{c:()=>i});o(296540);const n={viewBox:"0 0 20 20",fittedViewBox:"3.9 2.75 12.18 14.49",svg:(0,o(474848).jsx)("path",{d:"M12.626 2.768a.625.625 0 0 1 0 1.224l-.126.013h-.125v4.794l3.366 5.159c.893 1.369-.03 3.17-1.623 3.281l-.156.006H6.039c-1.688 0-2.703-1.873-1.78-3.287l3.366-5.157V4.005H7.5a.625.625 0 0 1 0-1.25h5zM8.875 9.173l-.102.156-1.567 2.401h5.589l-1.569-2.403-.101-.156V4.005h-2.25z"})},i=(0,o(340498).wt)("beaker",n,"default")},35889:(e,t,o)=>{o.d(t,{aL:()=>S,T7:()=>h,Hi:()=>_,$4:()=>y});o(296540);var n=()=>o(564884),i=()=>o(792057),a=()=>o(584262),r=()=>o(427704),s=()=>o(69708),l=()=>o(329458),c=()=>o(314529);var d=()=>o(687633),u=()=>o(486674),p=()=>o(492414),m=()=>o(171598),g=()=>o(634165),f=()=>o(619206),v=()=>o(968877),b=o(474848);async function y(e){(0,l().L)(e,{variant:"open_notion"}),(0,d().u)(e,{target:"open_notion"}),await(0,g().VE)(e,{utmContent:"topbar_cta",nextRoute:r().JZ.root})}function h(e,t){const{RouterStore:o}=e,n=o.state.route,l=(0,u().a)();if(function(e){(0,c().DO_NOT_USE_trackLegacy)(e,"public_page_topbar_edit_click",{},{dontWait:!0})}(e),"page"===n.name&&n.requestedOnPublicDomain&&l){const t=(0,p().Ay)({store:l,preferPublicLink:!1,pageVisitSource:a().y8.EditPublicPage,disableSlug:!0,embedded:!1});(0,m().navigateOnBaseUrl)({environment:e,url:t,openInNewTab:n.embedded})}else e.currentUser.isLoggedIn()?i().ui({showCancel:!0,keepFocus:!1,message:(0,b.jsx)(s().sA,{defaultMessage:"When you start editing, your name, email and photo may become visible to anyone who can view the page.",id:"action.startPublicEditDialog.message"}),items:[{label:(0,b.jsx)(s().sA,{defaultMessage:"Continue",id:"action.startPublicEditDialog.continueLabel"}),color:"blue",onAccept(){f().A.setState({editing:!0,commenting:!0})}}]}):(v().iZ({currentUserId:e.currentUser.id,blockId:t}),(0,m().navigateOnBaseUrl)({environment:e,url:r().JZ.login}))}function S(e,t){const{RouterStore:o}=e,n=o.state.route,i=(0,u().a)();if(function(e){(0,c().DO_NOT_USE_trackLegacy)(e,"public_page_topbar_comment_click",{},{dontWait:!0})}(e),"page"===n.name&&n.requestedOnPublicDomain&&i){const t=(0,p().Ay)({store:i,preferPublicLink:!1,pageVisitSource:a().y8.CommentPublicPage,disableSlug:!0,embedded:!1});(0,m().navigateOnBaseUrl)({environment:e,url:t,openInNewTab:n.embedded})}else v().iZ({currentUserId:e.currentUser.id,blockId:t}),(0,m().navigateOnBaseUrl)({environment:e,url:r().JZ.login})}function _(e,t){(0,n().u)({environment:e,event:{eventName:"report_form_clicked",eventProperties:{form_id:t}}}),(0,m().navigateOnBaseUrl)({environment:e,url:r().JZ.reportInappropriateForm})}},59110:(e,t,o)=>{o.r(t),o.d(t,{loadLocalSubtree:()=>_});o(944114),o(517642),o(658004),o(733853),o(845876),o(432475),o(515024),o(731698),o(898992),o(354520),o(803949);var n=()=>o(726637),i=()=>o(700500),a=()=>o(175482),r=()=>o(777447),s=()=>o(792071),l=()=>o(976618),c=()=>o(388821),d=()=>o(277153),u=()=>o(912720),p=()=>o(199378),m=()=>o(179034),g=()=>o(519831),f=()=>o(869558),v=()=>o(37165),b=()=>o(144081),y=()=>o(743246),h=()=>o(201980),S=()=>o(534177);function _(e){const{environment:t,blockId:o,inMemoryRecordCache:n,options:i}=e,a=t.currentUser.id,r=c().RecordMap.create(),s=new Set,l=[{pointer:{table:m().ev,id:o},parentId:"doesn't matter"}];for(;l.length>0;){const e=l.shift();if(!e)continue;if(s.has(e.pointer.id))continue;const t=o===e.pointer.id,c=x({pointer:e.pointer,recordMap:r,inMemoryRecordCache:n,currentUserId:a,cursors:l,cursor:e,options:i,isRootRequest:t});if(c)return c;s.add(e.pointer.id)}return{type:"success",recordMap:r}}function x(e){const{pointer:t,recordMap:o,inMemoryRecordCache:c,currentUserId:_,cursors:x,cursor:w,options:k,isRootRequest:M}=e;let I;return(0,d().Yt)(t,m().ev)?I=function(e){var t,o,l,c;const{pointer:d,recordMap:p,inMemoryRecordCache:g,currentUserId:v,cursors:b,cursor:_,options:x,isRootRequest:w}=e,k=g.getRecord({pointer:d,userId:v}),M=null==k?void 0:k.value;if(!M)return x.requireFullSubtree?{type:"error",reason:"missing_record",pointer:d}:void 0;const I=x.excludeCrdtData?a().ir(M):M;if(x.includeLegacyTransclusionBlockValues){if(!w&&I.parent_id!==_.parentId&&!_.isBlockContentChild)return}else if(!w&&I.parent_id!==_.parentId)return;if(I.type===i().xd.externalObjectInstance&&!x.allowCopyExternalObjectInstances)return{type:"error",reason:"encountered_external_object_instance",pointer:d};if(p.setValue(d,I),!x.skipNavigableChildren){const e=s().Bj6.fromBlock(I).getCollectionPointers();for(const t of e){const e=g.getRecord({pointer:t,userId:v});var C,A;if(e)(null===(C=e.value)||void 0===C?void 0:C.parent_table)===m().ev&&(null===(A=e.value)||void 0===A?void 0:A.parent_id)===I.id&&b.push({pointer:t,parentId:I.id});else if(x.requireFullSubtree)return{type:"error",reason:"missing_record",pointer:t}}if(I.view_ids)for(const t of I.view_ids)b.push({pointer:{table:f().Gy,id:t,spaceId:I.space_id},parentId:I.id})}if(!(x.skipBlockContent||x.skipTransclusionContainerChildren&&"transclusion_container"===I.type||x.skipNavigableChildren&&(0,i().$I)(I.type))){const e=s().Bj6.fromBlock(I).getRenderableContentIds();for(const t of e)b.push({pointer:{table:m().ev,id:t},parentId:I.id,isBlockContentChild:!0})}const T=s().Bj6.fromBlock(I).getNonContentChildren();for(const n of T)b.push({pointer:{table:m().ev,id:n},parentId:I.id,isBlockContentChild:!0});if(I.type===i().xd.externalObjectInstance){var j,P;const e=(null===(j=I.format)||void 0===j?void 0:j.related_external_object_uris_to_instance_ids)&&Object.values(null===(P=I.format)||void 0===P?void 0:P.related_external_object_uris_to_instance_ids)||[];for(const t of e)b.push({pointer:{table:m().ev,id:t,spaceId:I.space_id},parentId:I.id})}if(!x.skipNavigableChildren&&I.properties){const e=Object.values(I.properties).filter(S().O9);for(const t of e)for(const e of t)for(const t of h().uPN(e)){if(h().jIt(t)){const e=h().v55(t);b.push({pointer:{table:m().ev,id:e},parentId:I.id})}if(h().sh$(t)){const e=h().cQR(t),o=(0,r().lX)({url:e,baseUrl:n().A.domainBaseUrl,publicDomainName:n().A.publicDomainName});o&&b.push({pointer:{table:m().ev,id:o},parentId:I.id})}if(h().N53(t)){const e=h().T$c(t);e&&b.push({pointer:{table:m().ev,id:e,spaceId:I.space_id},parentId:I.id})}}}"form"===I.type&&null!==(t=I.format)&&void 0!==t&&t.form_layout_pointer&&b.push({pointer:I.format.form_layout_pointer,parentId:I.id});null!==(o=I.format)&&void 0!==o&&o.automation_id&&b.push({pointer:{table:u().yB,id:I.format.automation_id,spaceId:I.space_id},parentId:I.id});null!==(l=I.format)&&void 0!==l&&l.workflow_id&&b.push({pointer:{table:y().C0,id:I.format.workflow_id,spaceId:I.space_id},parentId:I.id});null!==(c=I.format)&&void 0!==c&&c.ai_instructions_page_pointer&&b.push({pointer:I.format.ai_instructions_page_pointer,parentId:I.id})}({pointer:t,recordMap:o,inMemoryRecordCache:c,currentUserId:_,cursors:x,cursor:w,options:k,isRootRequest:M}):(0,d().Yt)(t,g().Vl)?I=function(e){var t,o;const{pointer:n,recordMap:i,inMemoryRecordCache:a,currentUserId:r,cursors:s,cursor:l,options:c}=e;if(!c.allowCopyCollections)return{type:"error",reason:"encountered_collection",pointer:n};const d=a.getRecord({pointer:n,userId:r});if(null==d||!d.value)return c.requireFullSubtree?{type:"error",reason:"missing_record",pointer:n}:void 0;if(d.value.parent_id!==l.parentId)return;const p=d.value;i.setValue(n,p),a.forEachRecord(r,(({model:e})=>{e.table===m().ev&&e&&e.parent_id===n.id&&e.alive&&s.push({pointer:e.pointer,parentId:n.id})}));const g=(null===(t=p.format)||void 0===t?void 0:t.automation_ids)??[];for(const m of g)s.push({pointer:{table:u().yB,id:m,spaceId:p.space_id},parentId:p.id});p.schema&&Object.values(p.schema).forEach((e=>{e&&"button"===e.type&&e.automation_id&&s.push({pointer:{id:e.automation_id,spaceId:p.space_id,table:u().yB},parentId:p.id})}));null!==(o=p.format)&&void 0!==o&&o.layout_pointer&&s.push({pointer:p.format.layout_pointer,parentId:p.id})}({pointer:t,recordMap:o,inMemoryRecordCache:c,currentUserId:_,cursors:x,cursor:w,options:k}):(0,d().Yt)(t,f().Gy)?I=function(e){var t,o;const{pointer:n,recordMap:i,inMemoryRecordCache:a,currentUserId:r,cursors:s,cursor:l,options:c}=e,d=a.getRecord({pointer:n,userId:r});if(null==d||!d.value)return c.requireFullSubtree?{type:"error",reason:"missing_record",pointer:n}:void 0;if(d.value.parent_id!==l.parentId)return;"form_editor"===d.value.type&&null!==(t=d.value.format)&&void 0!==t&&t.form_block_pointer&&s.push({pointer:d.value.format.form_block_pointer,parentId:d.value.id});null!==(o=d.value.format)&&void 0!==o&&o.dashboard_layout_pointer&&s.push({pointer:d.value.format.dashboard_layout_pointer,parentId:d.value.id});i.setValue(n,d.value)}({pointer:t,recordMap:o,inMemoryRecordCache:c,currentUserId:_,cursors:x,cursor:w,options:k}):(0,d().Yt)(t,u().yB)?I=function(e){const{pointer:t,recordMap:o,inMemoryRecordCache:n,currentUserId:i,cursors:a,cursor:r,options:s}=e,l=n.getRecord({pointer:t,userId:i});if(null==l||!l.value)return s.requireFullSubtree?{type:"error",reason:"missing_record",pointer:t}:void 0;if(l.value.parent_id!==r.parentId)return;o.setValue(t,l.value);for(const c of l.value.action_ids??[])a.push({pointer:{table:p().SC,id:c,spaceId:l.value.space_id},parentId:l.value.id})}({pointer:t,recordMap:o,inMemoryRecordCache:c,currentUserId:_,cursors:x,cursor:w,options:k}):(0,d().Yt)(t,p().SC)?I=function(e){const{pointer:t,recordMap:o,inMemoryRecordCache:n,currentUserId:i,cursors:a,cursor:r,options:s}=e,l=n.getRecord({pointer:t,userId:i});if(null==l||!l.value)return s.requireFullSubtree?{type:"error",reason:"missing_record",pointer:r.pointer}:void 0;if(l.value.parent_id!==r.parentId)return;o.setValue(t,l.value);for(const c of l.value.blocks??[])a.push({pointer:{table:m().ev,id:c,spaceId:l.value.space_id},parentId:l.value.id})}({pointer:t,recordMap:o,inMemoryRecordCache:c,currentUserId:_,cursors:x,cursor:w,options:k}):(0,d().Yt)(t,y().C0)?I=function(e){const{pointer:t,recordMap:o,inMemoryRecordCache:n,currentUserId:i,cursor:a,options:r}=e,s=n.getRecord({pointer:t,userId:i});if(null==s||!s.value)return r.requireFullSubtree?{type:"error",reason:"missing_record",pointer:a.pointer}:void 0;if(s.value.parent_id!==a.parentId)return;o.setValue(t,s.value)}({pointer:t,recordMap:o,inMemoryRecordCache:c,currentUserId:_,cursor:w,options:k}):(0,d().Yt)(t,b().zx)?I=function(e){const{pointer:t,recordMap:o,inMemoryRecordCache:n,currentUserId:i,cursors:a,options:r}=e,c=n.getRecord({pointer:t,userId:i}),d=null==c?void 0:c.value;if(!d)return r.requireFullSubtree?{type:"error",reason:"missing_record",pointer:t}:void 0;o.setValue(t,d);const u=s().Bj6.fromValue(b().zx,d);for(const s of u.getBlockChildrenPointers())a.push({pointer:s,parentId:t.id});const p=e=>{const o={id:e.collection_view_id,table:f().Gy,spaceId:d.space_id};return a.push({pointer:o,parentId:t.id}),e};(0,l().E)(d.modules,(e=>{if("formQuestion"===e.type){const o={id:e.formQuestionId,table:v().lo,spaceId:d.space_id};a.push({pointer:o,parentId:t.id})}else if("view"===e.type)p(e);else if("row"===e.type)for(const t of e.modules)"view"===t.type&&p(t)}))}({pointer:t,recordMap:o,inMemoryRecordCache:c,currentUserId:_,cursors:x,cursor:w,options:k}):(0,d().Yt)(t,v().lo)&&(I=function(e){const{pointer:t,recordMap:o,inMemoryRecordCache:n,currentUserId:i,options:a}=e,r=n.getRecord({pointer:t,userId:i});if(null==r||!r.value)return a.requireFullSubtree?{type:"error",reason:"missing_record",pointer:t}:void 0;o.setValue(t,r.value)}({pointer:t,recordMap:o,inMemoryRecordCache:c,currentUserId:_,cursors:x,cursor:w,options:k})),I}},68913:(e,t,o)=>{o.r(t),o.d(t,{alarmIcon:()=>a,iconDefinition:()=>i});o(296540);var n=o(474848);const i={viewBox:"0 0 20 20",fittedViewBox:"1.91 0.78 16.18 16.85",svg:(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("path",{d:"M5.791 1.886a.625.625 0 1 0-.801-.96L2.138 3.31a.625.625 0 1 0 .802.96zm4.834 3.839a.625.625 0 1 0-1.25 0v3.65H6.4a.625.625 0 0 0 0 1.25H10c.345 0 .625-.28.625-.625z"}),(0,n.jsx)("path",{d:"M10 2.375a7.625 7.625 0 1 0 0 15.25 7.625 7.625 0 0 0 0-15.25M3.625 10a6.375 6.375 0 1 1 12.75 0 6.375 6.375 0 0 1-12.75 0M14.13 1.006a.625.625 0 0 0 .079.88l2.851 2.383a.625.625 0 1 0 .802-.96L15.01.927a.625.625 0 0 0-.88.079"})]})},a=(0,o(340498).wt)("alarm",i,"default")},73337:(e,t,o)=>{o.d(t,{P:()=>a});o(296540);var n=o(474848);const i={viewBox:"0 0 20 20",fittedViewBox:"2.37 4.12 16.79 14.42",svg:(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("path",{d:"M18.507 11.112c.362 0 .655.293.655.656v4.369a.656.656 0 0 1-1.311 0V13.35l-4.997 4.997a.655.655 0 1 1-.927-.928l4.997-4.997h-2.786a.655.655 0 1 1 0-1.31z"}),(0,n.jsx)("path",{d:"M15.5 4.125c1.174 0 2.125.951 2.125 2.125v3.612h-1.25v-.987h-5.75v2.25h1.72a2 2 0 0 0-.103.448l-.01.195.01.195q.024.214.091.412h-1.708v2.25h2.33l-1.25 1.25H4.5a2.125 2.125 0 0 1-2.125-2.125v-7.5c0-1.174.951-2.125 2.125-2.125zM3.625 13.75c0 .483.392.875.875.875h4.875v-2.25h-5.75zm0-2.625h5.75v-2.25h-5.75zm.875-5.75a.875.875 0 0 0-.875.875v1.375h5.75v-2.25zm6.125 2.25h5.75V6.25a.875.875 0 0 0-.875-.875h-4.875z"})]})},a=(0,o(340498).wt)("collectionArrow",i,"default")},77279:(e,t,o)=>{o.r(t),o.d(t,{default:()=>i});class n extends(()=>o(757695))().Store{getInitialState(){return{discussionIdToExpansionStartPointMap:{}}}}const i=new n},89956:(e,t,o)=>{o.d(t,{p:()=>i});o(296540);const n={viewBox:"0 0 16 16",fittedViewBox:"2.46 2.46 11.08 11.08",svg:(0,o(474848).jsx)("path",{d:"M3.088 2.463a.625.625 0 0 0-.625.625v4a.625.625 0 1 0 1.25 0V4.597l3.045 3.045a.625.625 0 0 0 .884-.884L4.597 3.713h2.49a.625.625 0 1 0 0-1.25zM9.244 8.36a.625.625 0 0 0-.883.884l3.042 3.043H8.912a.625.625 0 1 0 0 1.25h4c.345 0 .625-.28.625-.625v-4a.625.625 0 0 0-1.25 0v2.491z"})},i=(0,o(340498).wt)("arrowExpandDiagonalSmall",n,"small")},97059:(e,t,o)=>{o.d(t,{s:()=>i});o(296540);const n={viewBox:"0 0 16 16",fittedViewBox:"1.82 1.82 12.68 12.68",svg:(0,o(474848).jsx)("path",{d:"M8 1.825a.575.575 0 0 0-.575.575V4a.575.575 0 0 0 1.15 0V2.4A.575.575 0 0 0 8 1.825m4.367 1.809a.575.575 0 0 0-.814 0l-1.131 1.131a.575.575 0 1 0 .813.813l1.132-1.131a.575.575 0 0 0 0-.813m-7.92 0a.575.575 0 0 0-.813.813l1.13 1.131a.575.575 0 1 0 .814-.813zm3.248 3.071a.7.7 0 1 0-.99.99l.77.77.99-.99zm4.305.72a.575.575 0 0 0 0 1.15h1.6a.575.575 0 1 0 0-1.15zm-9.6 0a.575.575 0 1 0 0 1.15H4a.575.575 0 0 0 0-1.15zm11.895 5.88-5.37-5.37-.99.99 5.37 5.37a.7.7 0 0 0 .99-.99m-8.717-2.883a.575.575 0 0 0-.813 0l-1.131 1.131a.575.575 0 1 0 .813.813l1.131-1.131a.575.575 0 0 0 0-.813M8 11.425a.575.575 0 0 0-.575.575v1.6a.575.575 0 1 0 1.15 0V12A.575.575 0 0 0 8 11.425"})},i=(0,o(340498).wt)("magicWandSmall",n,"small")},97835:(e,t,o)=>{o.r(t),o.d(t,{iconDefinition:()=>i,inviteMemberIcon:()=>a});o(296540);var n=o(474848);const i={viewBox:"0 0 20 20",fittedViewBox:"3.68 2.37 15.82 17.13",svg:(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("path",{d:"M10 2.375c-1.137 0-2.054.47-2.674 1.242-.608.757-.9 1.765-.9 2.824s.292 2.066.9 2.824c.62.772 1.537 1.241 2.674 1.241s2.055-.469 2.675-1.241c.608-.758.9-1.766.9-2.824 0-1.059-.292-2.067-.9-2.824-.62-.773-1.538-1.242-2.675-1.242M7.676 6.441c0-.842.233-1.554.624-2.042.38-.473.937-.774 1.7-.774s1.32.301 1.7.774c.391.488.624 1.2.624 2.042s-.233 1.554-.624 2.041c-.38.473-.937.774-1.7.774s-1.32-.3-1.7-.774c-.391-.487-.624-1.2-.624-2.041M10 11.63c-2.7 0-5.101 1.315-6.12 3.305-.361.706-.199 1.421.23 1.923.412.48 1.06.767 1.74.767h5.845a4.6 4.6 0 0 1-.28-1.25H5.85c-.342 0-.634-.148-.79-.33-.138-.162-.172-.336-.067-.54.761-1.488 2.672-2.626 5.007-2.626.83 0 1.605.144 2.294.395.269-.364.59-.688.952-.96A7.9 7.9 0 0 0 10 11.63"}),(0,n.jsx)("path",{d:"M16 19.5a3.5 3.5 0 1 1 0-7 3.5 3.5 0 0 1 0 7m2.594-3.469a.625.625 0 0 0-.625-.625h-1.375v-1.375a.625.625 0 0 0-1.25 0v1.375h-1.375a.625.625 0 0 0 0 1.25h1.375v1.375a.625.625 0 1 0 1.25 0v-1.375h1.375c.345 0 .625-.28.625-.625"})]})},a=(0,o(340498).wt)("inviteMember",i,"default")},108184:(e,t,o)=>{o.r(t),o.d(t,{COMPLETION_THROTTLE:()=>w,PREVIEW_STEP_DELAY:()=>k,maybeUpdateAIUsageEligibilityStoreV2:()=>A,maybeUpdateAiEligibility:()=>C,postProcessAICreatedStores:()=>I,showCompletionErrorWithCode:()=>M,wrapTemporaryBlocksInList:()=>T});o(18107),o(967357);var n=()=>o(242422),i=()=>o(675133),a=()=>o(128933),r=()=>o(770063),s=()=>o(878126),l=()=>o(165358),c=()=>o(179034),d=()=>o(427419),u=()=>o(720665),p=()=>o(753812),m=()=>o(722101),g=()=>o(384944),f=()=>o(274873),v=()=>o(412669),b=()=>o(556122),y=()=>o(594794),h=()=>o(668721),S=()=>o(685377),_=()=>o(661077),x=()=>o(96563);const w=300,k=250;function M(e){const t=i().A.getIntl();return 451===e?a().D6({label:t.formatMessage({id:"completionActions.moderationError",defaultMessage:"AI does not allow content that is harmful or illegal. Please revise your input and try again. (451)"})}):413===e?a().D6({label:t.formatMessage({id:"completionActions.promptOrAttachmentTooLarge",defaultMessage:"Query or attachment is too large. Please revise your input and try again. (413)"})}):502===e||503===e||504===e?a().D6({label:t.formatMessage({id:"completionActions.providerError",defaultMessage:"We’re experiencing issues with our AI provider. Try again in a few minutes. ({errorCode})"},{errorCode:e})}):void a().D6({label:t.formatMessage({id:"completionActions.genericError",defaultMessage:"AI is temporarily unavailable. Try again in a few minutes. ({errorCode})"},{errorCode:e})})}function I(e,t){for(const o of t)f().In({environment:e,blockStore:o})}async function C(e,t,o){let i;if(n().default.checkGate({gateName:"usage_based_pricing_pfa_checks_purchased_credits_enabled"}))return void(await A(e,t,o));n().default.checkGate({gateName:"usage_based_pricing_alpha_enabled"})&&A(e,t,o).catch((e=>{l().log({level:"error",from:"ai.completionActions",type:"maybeUpdateAIUsageEligibilityStoreV2Error",spaceId:t,error:e})}));const a=b().TI();if(a.debug)i=402!==a.showErrorCode;else{const n=h().o.getState();if(n&&n.isEligible&&"unlimited"===n.type&&!o){const e=n.lastUpdatedAt;if(Date.now()-e<10*u().Xb)return}const a=await p().callCellCompatibleApi({eventName:"getAIUsageEligibility",environment:e,data:{spaceId:t},cellNavigation:{cellId:void 0,spaceId:t}});if("success"===a.type){i=a.data.isEligible,i&&v().K.state&&v().K.setState(!1);const e=!1===(null==n?void 0:n.isEligible)&&(null==n?void 0:n.requestedAccess),t=a.data.researchModeUsage??0;h().o.setState({...a.data,lastUpdatedAt:Date.now(),researchModeUsage:t,...!1===a.data.isEligible&&{requestedAccess:e}})}}void 0!==i&&_().P.setState(i)}async function A(e,t,o){const n=await s().T.awaitData(e,{spaceId:t}),i=S().y.getData(e,{spaceId:t});if(n){if(i&&(0,d().Hg)(n)&&!o){const e=i.lastUpdatedAt;if(Date.now()-e<10*u().Xb)return}await(0,x().y3)(e,t)}}function T(e){var t;const{environment:o,stores:n,listId:i,inMemoryRecordCache:a,transaction:s}=e,l=(null===(t=n.at(0))||void 0===t?void 0:t.getSpaceId())??s.spaceId,d=new(r().pm)({environment:o,pointer:{table:c().ev,id:i||(0,y().Z1)({environment:o,table:c().ev,spaceId:l}),spaceId:l},recordStoreOptions:{inMemoryRecordCache:a,userId:o.currentUser.id},path:["content"]});for(const r of n)m().BC({parentStore:d,appendStore:r,transaction:s}),g().zv({store:r,data:{parent_id:d.id,parent_table:d.table,alive:!0},transaction:s});return d}},110573:(e,t,o)=>{o.d(t,{E:()=>i});o(898992),o(354520),o(737550);var n=()=>o(365917);const i=new(o(140934).ComputedStore)((()=>{var e;const{sidebarSpaceViewStore:t}=o(907258).default.state;if(!t||!t.isReady())return{loading:!0,botId:void 0,botSpaceId:void 0,botUserId:void 0};const i=t.getSelectedCalendarBotId();if(i&&!n().A.state.loaded)return{loading:!1,botId:i,botSpaceId:t.getSpaceId(),botUserId:t.getUserId()};const{spaceId:a,userId:r}=n().A.state.loaded?n().A.state:{spaceId:void 0,userId:void 0},s=n().A.bots.state.filter((e=>e.integration_id===o(617871).io)),l=null===(e=s[0])||void 0===e?void 0:e.id,c=i&&s.some((e=>e.id===i))?i:l;return{loading:!n().A.state.loaded||n().A.state.loading,botId:c,botSpaceId:a,botUserId:r}}),{debugName:"CalendarBotIdStore"})},112799:(e,t,o)=>{o.d(t,{a:()=>l,E:()=>s});o(16280);var n=o(296540),i=()=>o(484714),a=(o(898992),o(672577),()=>o(427704));a().Ju.downloadMac,a().Ju.downloadMacUniversal,a().Ju.downloadMacIntel,a().Ju.downloadMacAppleSilicon,a().Ju.downloadWindows,a().Ju.downloadWindowsArm;const r=[{route:a().Ju.downloadMac,architecture:"universal",operatingSystem:"mac",target:"macUniversal"},{route:a().Ju.downloadMacIntel,architecture:"x86",operatingSystem:"mac",target:"mac"},{route:a().Ju.downloadMacUniversal,architecture:"universal",operatingSystem:"mac",target:"macUniversal"},{route:a().Ju.downloadMacAppleSilicon,architecture:"arm",operatingSystem:"mac",target:"macArm64"},{route:a().Ju.downloadWindows,architecture:"x86",operatingSystem:"windows",target:"windows"},{route:a().Ju.downloadWindowsArm,architecture:"arm",operatingSystem:"windows",target:"windowsArm64"}];function s(){const e=(0,n.useRef)(null),t=(0,i().Y0)();return(0,n.useEffect)((()=>{l(t).then((t=>{e.current=t??null})).catch((e=>{throw new Error(e)}))}),[t]),e}async function l(e){var t;if(!("userAgentData"in navigator))return e.isMac?a().Ju.downloadMacUniversal:a().Ju.downloadWindows;const o=navigator.userAgentData,n=await(null==o||null===(t=o.getHighEntropyValues)||void 0===t?void 0:t.call(o,["architecture"])),i=function(e,t){const o=function(e=""){const t=e.toLowerCase();return t.startsWith("arm")?"arm":t.startsWith("x86")||"intel"===t?"x86":null}(e);if(!o||"mac"!==t&&"windows"!==t)return null;const n=r.find((e=>e.architecture===o&&e.operatingSystem===t));return(null==n?void 0:n.route)||null}(null==n?void 0:n.architecture,e.os);return i||null}},115240:(e,t,o)=>{o.d(t,{U:()=>a});o(296540);var n=o(474848);const i={viewBox:"0 0 20 20",fittedViewBox:"4.12 2.37 15.02 16.77",svg:(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("path",{d:"M6.25 2.375A2.125 2.125 0 0 0 4.125 4.5v11c0 1.174.951 2.125 2.125 2.125h4.923a4.8 4.8 0 0 1-.789-1.25H6.25a.875.875 0 0 1-.875-.875v-11c0-.483.392-.875.875-.875h7.5c.483 0 .875.392.875.875v5.252a5 5 0 0 1 1.25.132V4.5a2.125 2.125 0 0 0-2.125-2.125z"}),(0,n.jsx)("path",{d:"M7.25 5.2a.55.55 0 0 0 0 1.1h5.5a.55.55 0 0 0 0-1.1zM6.7 8.25a.55.55 0 0 1 .55-.55h5.5a.55.55 0 0 1 0 1.1h-5.5a.55.55 0 0 1-.55-.55m11 8.357a3.625 3.625 0 1 0-.893.878l1.223 1.427a.625.625 0 1 0 .94-.823zM12.376 14.5a2.375 2.375 0 1 1 4.75 0 2.375 2.375 0 0 1-4.75 0"})]})},a=(0,o(340498).wt)("docTextMagnifyingGlass",i,"default")},121510:(e,t,o)=>{o.d(t,{S:()=>a,e:()=>i});o(898992),o(354520),o(430670);var n=()=>o(590526);function i(e){return(0,n().K8)((()=>e?{shared:(e.getSharedPages()??[]).filter((e=>e.isPageBlock())),private:(e.getPrivatePageStores()??[]).filter((e=>e.isPageBlock()))}:{shared:[],private:[]}),[e])}function a(e){return(0,n().K8)((()=>e.flatMap((e=>e.getTeamPageStores())).filter((e=>e.isPageBlock()))),[e])}},132389:(e,t,o)=>{o.d(t,{A:()=>i});o(296540);var n=o(474848);function i(e){const t={display:"inline-block",minWidth:e.size,minHeight:e.size};return"x"===e.axis?t.minHeight=1:"y"===e.axis&&(t.minWidth=1),(0,n.jsx)("div",{style:t})}},139646:(e,t,o)=>{o.d(t,{j:()=>i,z:()=>a});var n=()=>o(69708);const i={calendar:(0,n().YK)({title:{id:"sidebar.appSwitcher.calendar.openTooltip",defaultMessage:"Open Notion Calendar"},subtitle:{id:"sidebar.appSwitcher.calendar.openTooltip.subtitle",defaultMessage:"Manage your personal life and work all in one place"},alt:{id:"sidebar.appSwitcher.calendar.openTooltip.alt",defaultMessage:"Notion Calendar promotional image"}}),mail:(0,n().YK)({title:{id:"sidebar.appSwitcher.mail.tooltip",defaultMessage:"Open Notion Mail"},subtitle:{id:"sidebar.appSwitcher.mail.openTooltip.subtitle",defaultMessage:"The self-organizing inbox, with everything you love about Notion"},alt:{id:"sidebar.appSwitcher.mail.openTooltip.alt",defaultMessage:"Notion Mail promotional image"}}),notionDesktopOpen:(0,n().YK)({title:{id:"sidebar.appSwitcher.desktopOpen.tooltip",defaultMessage:"Open in Notion for Desktop"},subtitle:{id:"sidebar.appSwitcher.desktop.openTooltip.subtitle",defaultMessage:"Load pages 50% faster, offline mode, AI meeting notes, and more"},alt:{id:"sidebar.appSwitcher.desktop.openTooltip.alt",defaultMessage:"Notion Application Icon with a paper airplane behind"}}),notionDesktopDownload:(0,n().YK)({title:{id:"sidebar.appSwitcher.desktopDownload.tooltip",defaultMessage:"Download Notion for Desktop"},subtitle:{id:"sidebar.appSwitcher.desktop.openTooltip.subtitle",defaultMessage:"Load pages 50% faster, offline mode, AI meeting notes, and more"},alt:{id:"sidebar.appSwitcher.desktop.openTooltip.alt",defaultMessage:"Notion Application Icon with a paper airplane behind"}})},a={style:{transformOrigin:"50% bottom"},animationConfig:{duration:50,delay:0,timingFunction:"cubic-bezier(0.6, 0, 0.02, 1)"}}},162342:(e,t,o)=>{o.d(t,{W$:()=>s,fR:()=>a,iv:()=>r});var n=()=>o(228814),i=()=>o(846199);function a(e){i().v.setState({open:!0,...e})}function r(){i().v.setState({open:!1})}function s(e){n().E.setState({open:!0,...e})}},175249:(e,t,o)=>{o.d(t,{a:()=>i});o(296540);const n={viewBox:"0 0 16 16",fittedViewBox:"2.12 3.37 11.75 9.25",svg:(0,o(474848).jsx)("path",{d:"M4 3.375c-1.036 0-1.875.84-1.875 1.875v5.5c0 1.036.84 1.875 1.875 1.875h8c1.036 0 1.875-.84 1.875-1.875v-5.5c0-1.036-.84-1.875-1.875-1.875zM3.375 5.25c0-.345.28-.625.625-.625h3.375v1.417h-4zm5.25.792V4.625H12c.345 0 .625.28.625.625v.792zm0 2.666V7.292h4v1.416zm-5.25 0V7.292h4v1.416zm0 2.042v-.792h4v1.417H4a.625.625 0 0 1-.625-.625m5.25.625V9.958h4v.792c0 .345-.28.625-.625.625z"})},i=(0,o(340498).wt)("viewTableSmall",n,"small")},175882:(e,t,o)=>{o.r(t),o.d(t,{exclamationMarkTriangleSmallIcon:()=>a,iconDefinition:()=>i});o(296540);var n=o(474848);const i={viewBox:"0 0 16 16",fittedViewBox:"1.49 1.87 13.01 11.75",svg:(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("path",{d:"M7.9 5.281a.625.625 0 0 0-.625.625v2.5a.625.625 0 0 0 1.25 0v-2.5a.625.625 0 0 0-.625-.625m0 4.7a.725.725 0 1 0 0 1.45.725.725 0 0 0 0-1.45"}),(0,n.jsx)("path",{d:"M9.58 2.788c-.702-1.217-2.458-1.217-3.16 0l-4.677 8.1c-.702 1.216.176 2.737 1.58 2.737h9.354c1.405 0 2.283-1.52 1.58-2.738zm-2.078.625a.575.575 0 0 1 .996 0l4.677 8.1a.575.575 0 0 1-.498.862H3.324a.575.575 0 0 1-.498-.863z"})]})},a=(0,o(340498).wt)("exclamationMarkTriangleSmall",i,"small")},194617:(e,t,o)=>{o.d(t,{P:()=>l});o(296540);var n=()=>o(401497),i=()=>o(631524),a=()=>o(100622),r=()=>o(709438),s=o(474848);function l({label:e,icon:t,showBadge:o=!1,highlighted:l=!1,style:c,hoveredStyle:d,pressedStyle:u,"aria-label":p,...m}){const g=(0,n().IS)((()=>({wrapper:{position:"relative",display:"inline-flex"},badge:{position:"absolute",top:1,insetInlineEnd:-2,border:`1px solid ${a().Tj.background.secondary}`,borderRadius:"50%"},dot:{color:a().Tj.blue.icon.accentPrimary}})),[]);return(0,s.jsxs)("div",{style:g.wrapper,children:[(0,s.jsx)(i().p,{iconLeading:t,size:"md",colorVariant:l?"accentPrimary":"tertiary",colorPalette:l?"blue":"gray","aria-label":p??e,...m,children:e}),o?(0,s.jsx)(r().m,{color:g.dot.color,size:8,style:g.badge}):null]})}},196207:(e,t,o)=>{o.d(t,{j:()=>i});var n=()=>o(564884);function i(e){(0,n().u)({environment:e,event:{eventName:"click_mail_sidebar_link",eventProperties:{}}})}},196459:(e,t,o)=>{o.d(t,{O:()=>A});o(898992),o(354520),o(581454),o(737550);var n=()=>o(906745),i=o(296540),a=()=>o(664594),r=()=>o(907258),s=()=>o(755531),l=()=>o(484714),c=()=>o(590526),d=()=>o(761940),u=()=>o(604995),p=()=>o(187174),m=()=>o(496603),g=()=>o(534177),f=()=>o(221592),v=()=>o(847109),b=()=>o(488776),y=()=>o(1330);o(823215);function h(e){if(0===e.length)return!0;const t=e[0];return e.every((e=>void 0!==e&&e===t))}var S=()=>o(705295),_=()=>o(743444),x=()=>o(614016),w=()=>o(823115),k=()=>o(377515),M=()=>o(677169),I=()=>o(541808);const C=1e4;function A(e){const t=(0,l().v3)(),o=(0,M().m)(),A=(0,a().T)(),{timeZone:D}=(0,f().mn)(),B=(0,u().lW)(D),R=(0,v().s5)(),{connectedAccounts:N,disconnectedAccounts:E}=(0,I().B)(),[O,V]=i.useState(0),[L,F]=i.useState(!0),U=(0,c().K8)((()=>{var e;const t=null===(e=r().default.state.currentUserStore)||void 0===e?void 0:e.getEmail();return t?(0,d().RM)({currentUserEmail:t,calendars:(0,b().Y)().getCurrentCalendars()??[],accounts:(0,b().Y)().getCurrentAccounts()}).allEligibleCalendars.map((e=>e.id)):[]}),[]),z=(0,i.useMemo)((()=>(0,m().sg)((()=>{V((e=>e+1)),F(!1),setTimeout((()=>F(!0)),C)}),1e3,{leading:!0,trailing:!1})),[]),{sidebarSpaceViewStore:W,sidebarSpaceStore:K}=(0,c().K8)((()=>({sidebarSpaceViewStore:r().default.state.sidebarSpaceViewStore,sidebarSpaceStore:(0,s().S)()})),[]),H=(0,c().K8)((()=>void 0!==(0,b().Y)().getHomeCalendarStateForSpaceView()),[]),Y=(0,c().K8)((()=>{var e;const{botSpaceId:t,botUserId:n}=o,i=null==W?void 0:W.getSpaceId(),a=null==W?void 0:W.getUserId(),s=null==K?void 0:K.id,l=null===(e=r().default.state.currentUserStore)||void 0===e?void 0:e.id;return h([t,i,s])&&h([n,a,l,A])}),[o,null==K?void 0:K.id,W,A]),q=i.useRef(void 0),[G]=(0,p().Yb)((async()=>{const e=o.botId;if(!Y||!W)return"appNotSynced";if(!e)return o.loading||(0,y().F8)(),"noConnectedBot";const n=await(0,y().qq)({environment:t,sidebarSpaceViewStore:W,botId:e,forceRefetch:!1,timeRange:(0,x().M)(),reason:{reason:"foreground_load"}}),i=!q.current,a=q.current&&(q.current.spaceViewId!==W.id||q.current.botId!==e);switch("skipped"===n&&(i||a)&&P({environment:t,sidebarSpaceViewStore:W,botId:e,forceRefetch:!0,timeRange:(0,x().M)(),updateMethod:"replace",reason:{reason:"background_load"}}),q.current={spaceViewId:W.id,botId:e},n){case"success":case"skipped":return"loadCompleted";case"failure":return"loadError";default:(0,g().HB)(n)}}),[Y,o.botId,o.loading,W,t,O]),{days:$,numDaysWithEvents:X}=(0,c().K8)((()=>{var t;const i=o.botId;if(!i||"resolved"!==G.status||!H||!W)return{days:[],numDaysWithEvents:0};const{timeMin:a,timeMax:r}=(0,x().iI)(),s=(0,_().g2)({events:(0,b().Y)().getEvents(),calendars:(null===(t=(0,b().Y)().getState())||void 0===t?void 0:t.calendars)??[],startDate:n().DateTime.fromMillis(a,{zone:B}),endDateInclusive:n().DateTime.fromMillis(r,{zone:B}),getCalendarVisibility:t=>!("upcoming_meetings"!==e||!U.includes(t.id))||(0,k().Pj)({spaceViewStore:W,botId:i,calendar:t}),eventFilters:{all_day_events:(0,S().En)("all_day_events",e),events_without_participants:(0,S().En)("events_without_participants",e),events_without_location:(0,S().En)("events_without_location",e)},timeZone:B});let l=0;return{days:s.filter((e=>{const t=e.allDayEvents.length>0||e.timedEvents.length>0;return t&&l++,t||(0,w().cK)(e.date,R)})),numDaysWithEvents:l}}),[o.botId,G.status,H,W,R,B,e,U]),Z=function({botIdState:e,eventsLoadingState:t,isEventsDataAvailable:o,numDaysWithEvents:n,connectedAccounts:i,disconnectedAccounts:a}){const r=i.filter((e=>T(e)||j(e))),s=a.filter((e=>T(e)||j(e)));return e.loading||"resolved"!==t.status&&"rejected"!==t.status||"resolved"===t.status&&"noConnectedBot"===t.value&&!e.loading&&void 0!==e.botId||"resolved"===t.status&&"loadCompleted"===t.value&&!o||"resolved"===t.status&&"appNotSynced"===t.value?"loading":!e.loading&&!e.botId||0===r.length&&0===s.length?"signedOut":0===i.filter(T).length&&a.filter(T).length>0?a.filter(T).some((e=>"missingScopes"===e.authorizationStatus))?"missingScopes":"disconnectedAccount":"rejected"===t.status||"resolved"===t.status&&"loadError"===t.value?"loadError":0===n?"noEvents":"events"}({botIdState:o,eventsLoadingState:G,isEventsDataAvailable:H,numDaysWithEvents:X,connectedAccounts:N,disconnectedAccounts:E});return{isRetryEventLoadingEnabled:L,retryEventLoading:z,displayState:Z,eventsLoadingState:G,days:$}}function T({provider:e}){return"google"===e}function j({provider:e}){return"icloud"===e}const P=(0,m().sg)(y().qq,1e4,{leading:!0,trailing:!0})},215721:(e,t,o)=>{o.d(t,{b:()=>l,h:()=>c});var n=()=>o(713998),i=()=>o(798880),a=()=>o(931075),r=()=>o(295304),s=()=>o(244828);function l(e){const{environment:t,blockStore:o,verificationValue:l}=e,c=o.getPropertyStore(a()._e.Verification),d=(0,n().j2)(l),u=o.getPropertyStore(a()._e.Owner),p=t.currentUser.id,m=p?{table:i().oo,id:p}:void 0;s().createAndCommit({userAction:"PageAddVerificationButton.verifyPage",environment:t,canUndo:!0,perform:e=>{r().R9({environment:t,store:c,value:d,transaction:e}),m&&s().applyOperation({transaction:e,store:u,operation:{path:u.path,pointer:u.pointer,command:"addPersonAfter",args:{pointer:m}}})}})}function c(e){const{environment:t,blockStore:o,verificationValue:i}=e,l=o.getPropertyStore(a()._e.Verification),c=(0,n().j2)(i);s().createAndCommit({userAction:"PageVerificationBadge.updatePageVerification",environment:t,canUndo:!0,perform:e=>{r().R9({environment:t,store:l,value:c,transaction:e})}})}},224682:(e,t,o)=>{o.d(t,{m:()=>i});class n extends(()=>o(757695))().Store{getInitialState(){return{type:"uninitialized"}}isWriting(){return"filling"===this.state.type&&!this.state.haveAllBlocksCompletedAutofill&&!this.state.didInterruptStreaming}setIsWriting(e){const{propertySchema:t,stores:n,sessionIdForAnalytics:i,collectionId:a}=e,r=i||o(206267).JW();return this.setState({type:"filling",propertySchema:t,collectionId:a,numBlocksToAutofill:n.length,numBlocksAutofilled:0,sessionId:r,didInterruptStreaming:!1,haveAllBlocksCompletedAutofill:!1}),r}}const i=new n},228814:(e,t,o)=>{o.d(t,{E:()=>n});const n=o(757695).Store.createValue({open:!1},{name:"TrialEndModalStore"})},241319:(e,t,o)=>{o.d(t,{y:()=>a});o(898992),o(672577);var n=()=>o(534177),i=()=>o(239381);function a(e){var t;const{actionModels:o,id:a}=e,r=(0,i().y5)(a),s="action"===r.source?o.find((e=>e.id===r.action_id)):void 0,l=(0,n().O9)(s)&&s.isType("create_page")?null===(t=s.getConfig())||void 0===t?void 0:t.collection:void 0;return{automationValueInfo:r,collectionPointer:l,actionModel:s}}},255043:(e,t,o)=>{o.d(t,{O:()=>_,r:()=>x});o(898992),o(672577),o(581454);var n=o(296540),i=()=>o(401497),a=()=>o(249046),r=()=>o(250910),s=()=>o(807449),l=()=>o(546926),c=()=>o(631524),d=()=>o(302501),u=()=>o(890492),p=()=>o(81068),m=()=>o(663639),g=()=>o(736847),f=()=>o(324254),v=()=>o(676510),b=()=>o(534177),y=()=>o(608346),h=()=>o(419357),S=o(474848);function _(e){return(0,S.jsxs)(a().Ye,{alignItems:"center",style:{gap:4},children:[e.icon,(0,S.jsx)(d().A,{isSmall:e.isSmall,children:e.name})]})}function x(e){const{onSelectOption:t,options:o,currentOption:a,placeHolder:u,initialFocus:m,menuProps:g,iconOnly:y,inputProps:x,searchThreshold:k,selectorButtonStyle:M}=e,[I,C]=(0,n.useState)(""),A=o.find((({key:e})=>e===a)),T=(0,i().IS)((()=>({workspaceSelectorButton:{paddingTop:8,paddingBottom:8,paddingInlineStart:8,paddingInlineEnd:8,opacity:1,width:376,border:`1px solid ${v().$.light.gray[100]}`,justifyContent:"space-between",marginTop:8,marginBottom:8},teamspacePickerButton:{maxWidth:300},menuChevronDownIcon:{marginInlineStart:4}})),[]),j={..."workspace"===M?T.workspaceSelectorButton:{},..."teamspace"===M?T.teamspacePickerButton:{}};return(0,S.jsx)(r().A,{popupType:r().z.Popup,placementToOrigin:"bottom",alignmentToOrigin:e.alignmentToOrigin,originGap:4,renderOrigin:e=>(0,S.jsxs)(c().p,{...e,style:{color:a?void 0:v().$.light.gray[300],...j},children:[(0,S.jsx)(d().A,{style:{textOverflow:"ellipsis",fontSize:"14px",font:"SF Pro Text",color:a?void 0:"#ACABA9",lineHeight:"19.6px"},children:(y?null==A?void 0:A.icon:A&&(0,S.jsx)(_,{...A}))??u}),(0,S.jsx)(s().I,{icon:f().arrowChevronSingleDownSmallIcon,size:"xs",colorVariant:"secondary",style:T.menuChevronDownIcon})]}),render:e=>{const n=(0,S.jsx)(h().Ay,{style:{width:"100%",paddingTop:8,paddingBottom:2},onChange:e=>C(e.target.value),value:I,...x}),i={menuType:l().gu.Popup,width:376,left:50,header:(0,b().O9)(k)&&o.length>k?n:null,...g},r=o.map((({key:o,name:n,icon:i,searchTerm:r})=>({key:o,keywords:r??[],action:()=>{t(o),e.close()},render:e=>(0,S.jsx)(p().A,{...e,title:(0,S.jsx)(_,{name:n,icon:i}),shouldWrapCaption:!0,isChecked:a===o})})));return(0,S.jsx)(w,{menuOptions:i,menuItems:r,filterQuery:I,initialFocus:m})}})}function w({menuOptions:e,menuItems:t,filterQuery:o,initialFocus:n}){const i=(0,y().m)({sections:[{key:"dropdown.menuList",render:e=>(0,S.jsx)(g().A,{...e}),items:t}],filterQuery:o||void 0});return(0,S.jsx)(u().A,{...e,children:(0,S.jsx)(m().A,{type:m().O.Vertical,sections:i,initialFocus:n,style:{position:"relative",alignItems:"flex-end"}})})}},255636:(e,t,o)=>{o.d(t,{k:()=>_});var n=o(296540),i=()=>o(560198),a=()=>o(401497),r=()=>o(874832),s=()=>o(718827),l=()=>o(807449),c=()=>o(695115),d=()=>o(493552),u=()=>o(148307),p=()=>o(8741),m=()=>o(995847),g=()=>o(425946),f=()=>o(69708),v=()=>o(100622),b=()=>o(518461),y=()=>o(139646),h=o(474848);const S={calendar:(0,b().j)(u().A.images.connectedApps.accountCreationUpsellTooltip.calendar),mail:(0,b().j)(u().A.images.connectedApps.accountCreationUpsellTooltip.mail),notionDesktopOpen:(0,b().j)(u().A.images.connectedApps.accountCreationUpsellTooltip.notionDesktopOpen),notionDesktopDownload:(0,b().j)(u().A.images.connectedApps.accountCreationUpsellTooltip.notionDesktopDownload)};function _({calendarElement:e,mailElement:t,notionDesktopElement:o,hoveredAppTarget:_,imageFailedToLoad:x,setImageFailedToLoad:w,inAppCalloutHandlers:k,isAppTargetLoading:M,renderCarat:I=!0}){const C=(0,v().O4)({theme:"dark"}),A=(0,f().tz)(),[T,j]=(0,n.useState)(!1),P=Boolean(k);let D,B;switch(_){case"calendar":B=null==e?void 0:e.getBoundingClientRect();break;case"mail":B=null==t?void 0:t.getBoundingClientRect();break;case"notionDesktopOpen":case"notionDesktopDownload":B=null==o?void 0:o.getBoundingClientRect();break;default:B=void 0}B&&(D=B.left+1);const R=(0,a().eP)(),N=(0,a().IS)((()=>({container:{cursor:P?"pointer":"default",display:"flex",flexDirection:"column",padding:"4px",borderRadius:"10px",gap:"4px",background:C.background.accentPrimary,boxShadow:C.shadowMD},closeButton:{position:"absolute",top:"10px",insetInlineEnd:"10px",borderRadius:"12px",background:v().Tj.background.tertiary,backdropFilter:"blur(16px)"},closeButtonHovered:{background:(0,s().i)({color:v().Tj.background.secondary,mode:R})},closeButtonIcon:{fill:v().Tj.icon.primary},img:{borderStartStartRadius:8,borderStartEndRadius:8,borderEndEndRadius:4,borderEndStartRadius:4,width:"218px",height:"146px"},titleWrapper:{display:"flex",gap:"2px",alignItems:"center"},openIcon:{fill:T?C.icon.primary:C.icon.tertiary},text:{padding:"8px 10px",display:"flex",flexDirection:"column",alignSelf:"stretch",gap:"2px"},loadingText:{height:14,borderRadius:4,width:"100%",marginBottom:3},subtitle:{paddingBottom:"3px"},rectangle:void 0===D?{display:"none"}:{background:C.background.accentPrimary,transform:`translateX(${D}px) rotate(-45deg)`,borderRadius:"0px 2px",width:"14px",height:"14px",position:"absolute",bottom:"-7px",insetInlineStart:"0px",transition:"transform 100ms",transitionTimingFunction:y().z.animationConfig.timingFunction,transformOrigin:"center",..."dark"===R?{boxShadow:C.shadowMD,clipPath:"polygon(-1px 1px, -1px 15px, 13px 15px, 13px 1px)"}:{}}})),[D,C,T,P,R]),E=y().j[_],O=x?void 0:S[_],V=x?g().M:(0,b().L)(u().A.images.connectedApps.accountCreationUpsellTooltip[_]["1XPng"]);return(0,h.jsx)(i().wX,{mode:"dark",children:(0,h.jsxs)("div",{style:N.container,onMouseOver:()=>j(!0),onMouseOut:()=>j(!1),onClick:()=>null==k?void 0:k.onClick(),role:"button",tabIndex:-1,children:[(0,h.jsx)("img",{style:N.img,src:V,alt:A.formatMessage(E.alt),srcSet:O,onError:()=>null==w?void 0:w(!0)}),P?(0,h.jsx)(c().A,{style:N.closeButton,hoveredStyle:N.closeButtonHovered,iconStyle:N.closeButtonIcon,ariaLabel:A.formatMessage({id:"dismiss_connected_app_upsell_popover",defaultMessage:"Close promotional tooltip for calendar or mail app buttons"}),icon:m().xMarkSmallIcon,onClick:e=>{e.stopPropagation(),null==k||k.onDismiss()}}):null,(0,h.jsxs)("div",{style:N.text,children:[(0,h.jsxs)("div",{style:N.titleWrapper,children:[M===_?(0,h.jsx)(r().P,{style:{...N.loadingText,width:"80%"}}):(0,h.jsx)(d().D,{styleKey:"bodySmMedium",colorVariant:"primary",children:(0,h.jsx)(f().sA,{...E.title})}),P?(0,h.jsx)(l().I,{icon:p().arrowDiagonalUpRightSmallIcon,size:"sm",style:N.openIcon}):null]}),(0,h.jsx)("div",{style:N.subtitle,children:M===_?(0,h.jsxs)(h.Fragment,{children:[(0,h.jsx)(r().P,{style:N.loadingText}),(0,h.jsx)(r().P,{style:N.loadingText})]}):(0,h.jsx)(d().D,{styleKey:"captionRegular",colorVariant:"secondary",children:(0,h.jsx)(f().sA,{...E.subtitle})})})]}),I?(0,h.jsx)("div",{style:N.rectangle}):null]})})}},266685:(e,t,o)=>{o.d(t,{a:()=>l});o(296540);var n=()=>o(819121),i=()=>o(401497),a=()=>o(451306),r=()=>o(100622),s=o(474848);function l(e){const{disabled:t,checked:o,selectorSize:l}=e,[c,d]=(0,n().A)(),u=function(e){const{checked:t,disabled:o,isFocusVisible:n,selectorSize:a}=e;return(0,i().IS)((()=>({root:{position:"absolute",display:"flex",width:15,height:15,padding:5,margin:1.5,justifyContent:"center",alignItems:"center",gap:8,flexShrink:0,borderRadius:"50%",transition:"background 100ms ease-out",...t?{boxShadow:`0 0 0 1.5px ${o?r().Tj.background.tertiaryTranslucent:r().Tj.blue.background.accentPrimary}`,background:o?r().Tj.background.tertiaryTranslucent:r().Tj.blue.background.accentPrimary}:{boxShadow:`0 0 0 1.5px ${o?r().Tj.background.tertiaryTranslucent:r().Tj.border.strongTranslucent}`,background:r().Tj.background.primary},...n&&{boxShadow:r().Tj.buttonBlueFocusRing}},active:{background:t?r().Tj.blueButtonPressedBackground:r().Tj.buttonHoveredBackground},input:{opacity:0,width:"small"===a?14:18,height:"small"===a?14:18,...o?{pointerEvents:"none"}:{cursor:"pointer"}}})),[t,o,n,a])}({checked:o,disabled:t,isFocusVisible:d,selectorSize:l});return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("input",{ref:c,type:"radio",style:u.input,className:"radio-button",...e}),(0,s.jsx)("span",{...(0,a().ow)("custom-radio-button",u.root,t?{}:{pseudoActive:u.active})})]})}},277201:(e,t,o)=>{o.d(t,{I:()=>_,i:()=>x});var n=o(296540),i=()=>o(756117),a=()=>o(726637),r=()=>o(484714),s=()=>o(590526),l=()=>o(401497),c=()=>o(75435),d=()=>o(882722),u=()=>o(695115),p=()=>o(26697),m=()=>o(387964),g=()=>o(69708),f=()=>o(100622),v=()=>o(180252),b=()=>o(869562),y=()=>o(749687),h=()=>o(35392),S=o(474848);function _(e){const t=(0,r().v3)(),o=(0,r().Y0)(),n=(0,g().tz)(),i=(0,s().O$)(y().sidebarMouseEnteredStore),a=(0,s().O$)(c().b),l=(0,s().O$)((0,v().$o)(t)),d=n.formatMessage({defaultMessage:"Close sidebar",id:"sidebarUnexpandButton.closeSidebar.tooltip"}),u=(!o.isElectronMac||!l)&&!a&&i;return(0,S.jsx)(x,{isVisible:u,icon:m().S,caption:d,onClick:()=>{b().closeSidebarFromTopbarUnexpandButton(t)},keyboardShortcutName:"toggleSidebar",style:e.style,hoveredStyle:e.hoveredStyle})}function x(e){const t=(0,r().Y0)(),o=(0,l().IS)((()=>({keyboardShortcut:{color:f().Tj.text.inverseSecondary},button:{fill:f().Tj.icon.secondary}})),[]),s=(0,n.useMemo)((()=>({position:"relative",marginInlineStart:10,...a().A.isMobile&&{height:"100%"},...o.button,...e.style})),[e.style,o.button]);return e.isVisible?(0,S.jsx)(p().m,{renderTooltip:()=>(0,S.jsxs)("div",{children:[(0,S.jsx)("div",{children:e.caption}),e.keyboardShortcutName?(0,S.jsx)(h().A,{style:o.keyboardShortcut,name:e.keyboardShortcutName}):void 0]}),originGap:6,placement:t.isElectron?"right":"bottom",render:t=>(0,S.jsx)(i().A,{tag:u().A,animate:{opacity:e.isVisible?1:0},ariaLabel:e.caption,disabled:!e.isVisible,icon:{icon:e.icon,size:"lg",style:{fill:"inherit"}},style:s,hoveredStyle:e.hoveredStyle,onClick:e.onClick,className:d().P7S,...t})}):null}},279047:(e,t,o)=>{o.d(t,{A:()=>d});var n=o(296540),i=()=>o(590526),a=()=>o(401497),r=()=>o(100622),s=()=>o(141333),l=o(474848);const c=4;function d({scrollerStore:e,type:t,dividerColor:o,errorMargin:d=c}){const u=(0,i().K8)((()=>e.state.elementRef),[e]),p=(0,s().Xg)(u),m=(0,s().CR)(u),g=(0,s().sj)(u),f=(0,s().yE)(u),v=(0,s().o7)(u),b=(0,s().HJ)(u),y=(0,n.useMemo)((()=>{if(!e)return!1;switch(t){case"top":return Math.round(f)>d;case"bottom":return Math.abs(Math.round(f)-(m-v))>d;case"left":return Math.round(g)>d;case"right":return Math.abs(Math.round(g)-(p-b))>d}}),[e,t,d,p,m,g,f,v,b]),h="left"===t||"right"===t,S=(0,a().IS)((()=>({divider:{flexShrink:0,boxShadow:y?h?`1px 0 0 ${o??r().Tj.border.secondaryTranslucent}`:`0 1px 0 ${o??r().Tj.border.secondaryTranslucent}`:"0 0 0 transparent",transition:"box-shadow 300ms",...h?{width:1,height:"100%",marginInlineStart:-1}:{height:1,width:"100%",marginTop:-1},zIndex:99}})),[h,y,o]);return(0,l.jsx)("div",{style:S.divider})}},281303:(e,t,o)=>{o.d(t,{a:()=>c});o(898992),o(354520);var n=o(296540),i=()=>o(590526),a=()=>o(496603),r=()=>o(470928),s=()=>o(287351),l=()=>o(121510);function c(e){const{shared:t,private:o}=(0,l().e)(e),c=(0,a().hS)([...t,...o],"id"),d=(0,s().U)(),u=(0,l().S)(d),p=(0,n.useMemo)((()=>[...c,...u]),[c,u]);return(0,i().K8)((()=>e?p.filter((e=>"verified"===(0,r().i1)(e).type)):[]),[p,e])}},287351:(e,t,o)=>{o.d(t,{U:()=>i});var n=()=>o(923455);function i(){const e=(0,n().Rx)();return(null==e?void 0:e.userJoinedTeamsStores)??[]}},288856:(e,t,o)=>{o.d(t,{p:()=>i});var n=()=>o(564884);function i(e){const{environment:t,from:o}=e;(0,n().u)({environment:t,event:{eventName:"download_desktop_app_from_notion",eventProperties:{from:o}}})}},295418:(e,t,o)=>{o.d(t,{o:()=>r});var n=o(296540),i=o(474848);function a({icon:e,label:t,tooltipDisabled:n,onClick:a,onMouseEnter:r},s){const l=n=>(0,i.jsx)(o(695115).A,{...n,size:"md",icon:e,ariaLabel:t,colorVariant:"secondary",onClick:a,ref:s,onMouseEnter:e=>{var t;null==r||r(e),null==n||null===(t=n.onMouseEnter)||void 0===t||t.call(n,e)}});return n?l():(0,i.jsx)(o(26697).m,{renderTooltip:()=>t,render:e=>l(e),placement:"top"})}const r=(0,n.forwardRef)(a)},296060:(e,t,o)=>{o.d(t,{H:()=>i,a:()=>a});var n=o(296540);const i={panelState:void 0,view:"notionHomeTile"},a=(0,n.createContext)(i);a.displayName="CalendarAnalyticsContext"},299177:(e,t,o)=>{o.d(t,{A:()=>a});class n extends(()=>o(757695))().Store{getInitialState(){return{}}}const i=new n;o(852832).exposeDebugValue("SpaceWorkflowTemplateInstanceMapStore",i);const a=i},317025:(e,t,o)=>{o.d(t,{$D:()=>d,c3:()=>u,qU:()=>c});o(296540);var n=()=>o(128933),i=()=>o(69708),a=()=>o(134696),r=()=>o(701763),s=()=>o(496414),l=o(474848);function c(e){r().CW(e,{type:"request"}),a().vX(e,{type:"request",from:"settings_modal"})}function d(){const e=(0,i().YK)({invitingMembers:{id:"sidebarFooter.inviteMember.loadingMessage",defaultMessage:"Updating…"}});s().m({message:e.invitingMembers})}function u(e,t){s().V();const o=e?(0,l.jsx)(i().sA,{id:"sidebarFooter.inviteMember.successToastMessage",defaultMessage:"Successfully sent"}):(0,l.jsx)(i().sA,{id:"sidebarFooter.inviteMember.failureToastMessage",defaultMessage:"Failed to send invites"});n().D6({label:o})}},317307:(e,t,o)=>{o.r(t),o.d(t,{LockedTeamspacesSection:()=>h});var n=o(296540),i=()=>o(726637),a=()=>o(401497),r=()=>o(718827),s=()=>o(807449),l=()=>o(631524),c=()=>o(338862),d=()=>o(863330),u=()=>o(69708),p=()=>o(100622),m=()=>o(512726),g=()=>o(159588),f=()=>o(644914),v=()=>o(675540),b=()=>o(804319),y=o(474848);function h(){return(0,y.jsxs)(y.Fragment,{children:[(0,y.jsx)(S,{}),(0,y.jsx)(_,{})]})}function S(){const e=x(),t=(0,n.useCallback)((()=>{m().A.open()}),[]);return(0,y.jsxs)(l().p,{onClick:t,style:e.title,children:[(0,y.jsx)(u().sA,{id:"LockedSidebarSection.label.teamspaces",defaultMessage:"Teamspaces"}),(0,y.jsx)(s().I,{icon:c().lockFillSmallIcon,size:"sm",style:e.icon})]})}function _(){const e=x(),t=(0,f().ab)(),o=(0,n.useCallback)((()=>{m().A.open()}),[]);return(0,y.jsx)(r().Ay,{style:t.baseSidebarItem,hoveredStyle:e.buttonHovered,onClick:o,children:(0,y.jsx)(b().A,{style:e.sidebarItem,left:(0,y.jsx)(s().I,{icon:d().plusSmallIcon,size:"sm",colorVariant:i().A.isMobile?"tertiary":"secondary"}),disableMobileBorder:!0,children:(0,y.jsx)(u().sA,{defaultMessage:"Join teammates",id:"sidebar.lockedTeamspaces.button"})})})}function x(){return(0,a().IS)((()=>({title:{...(0,g().ic)(),...(0,v().uA)(),...(0,v().bH)(),display:"flex",flexDirection:"row",alignItems:"center"},icon:{marginInlineStart:2},sidebarItem:{color:p().Tj.sidebarSecondaryColor},buttonHovered:{background:p().Tj.sidebarItemSelectedBackground}})),[])}},320865:(e,t,o)=>{o.d(t,{A:()=>i});o(296540);var n=o(474848);const i=function(){return(0,n.jsx)(o(424400).Ay,{title:(0,n.jsx)(o(98126).k,{size:"default"}),titleStyle:{display:"flex",justifyContent:"center",alignItems:"center",width:"100%"}})}},321884:(e,t,o)=>{o.r(t),o.d(t,{LoggedOutPublicSharingPageSidebar:()=>T});var n=o(296540),i=()=>o(564884),a=()=>o(242422),r=()=>o(484714),s=()=>o(590526),l=()=>o(401497),c=()=>o(127833),d=()=>o(250910),u=()=>o(807449),p=()=>o(124092),m=()=>o(160432),g=()=>o(148307),f=()=>o(450424),v=()=>o(133043),b=()=>o(829548),y=()=>o(863330),h=()=>o(69708),S=()=>o(100622),_=()=>o(159600),x=()=>o(644914),w=()=>o(607743),k=o(474848);function M({version:e,onClose:t}){const o=(0,r().v3)(),n=(0,_().s)({shouldRedirectForExistingUsersOnly:!0}),a=(0,l().eP)(),s=(0,l().IS)((()=>({content:{padding:20,minWidth:300,display:"flex",gap:8,flexDirection:"column"},title:{fontSize:14,fontWeight:500,color:S().Tj.text.primary},description:{fontSize:14,color:S().Tj.text.secondary,lineHeight:1.4,marginBottom:4},signupButton:{display:"flex",alignItems:"center",justifyContent:"center",width:"fit-content",paddingInline:12,fontSize:13},illustration:{width:120,height:60},illustrationImage:{width:"100%",height:"100%",objectFit:"contain"}})),[]);return(0,k.jsxs)("div",{style:s.content,children:[(0,k.jsx)("div",{style:s.illustration,children:(0,k.jsx)("img",{src:"dark"===a?g().A.images.sidebar.menLyingDownReadingDarkModePng:g().A.images.sidebar.menLyingDownReadingPng,style:s.illustrationImage,alt:"Person reading illustration"})}),(0,k.jsx)("div",{style:s.title,children:"create_new_page"===e?(0,k.jsx)(h().sA,{id:"loggedOutPublicSidebar.signupPopup.title.createNewPage",defaultMessage:"Create your first page"}):(0,k.jsx)(h().sA,{id:"loggedOutPublicSidebar.signupPopup.title.default",defaultMessage:"Ready to explore more?"})}),(0,k.jsx)("div",{style:s.description,children:"create_new_page"===e?(0,k.jsx)(h().sA,{id:"loggedOutPublicSidebar.signupPopup.description.createNewPage",defaultMessage:"Sign up to set up a free workspace and create your first page today"}):(0,k.jsx)(h().sA,{id:"loggedOutPublicSidebar.signupPopup.description.default",defaultMessage:"Sign up to set up a free workspace and start building with Notion today"})}),(0,k.jsx)(m().A,{colorPalette:"blue",style:s.signupButton,onClick:()=>{(0,i().u)({environment:o,event:{eventName:"logged_out_sidebar_click",eventProperties:{sidebar_type:"logged_out_public_sharing",clicked_element:"signup_popup"}}}),n("sidebar"),t()},size:"md",children:(0,k.jsx)(h().sA,{id:"loggedOutPublicSidebar.signupPopup.signupButton",defaultMessage:"Sign up or login →"})})]})}function I({onSignupClick:e}){const t=(0,l().IS)((()=>({container:{position:"absolute",bottom:32,insetInlineStart:16,insetInlineEnd:16,zIndex:100,display:"block"},modal:{background:S().Tj.background.secondary,borderRadius:12,boxShadow:"0px 4px 12px rgba(0, 0, 0, 0.08);",padding:16,display:"flex",alignItems:"flex-start",gap:12,border:`1px solid ${S().Tj.border.secondary}`},iconContainer:{flexShrink:0,marginTop:2},content:{flex:1,minWidth:0},title:{fontSize:14,fontWeight:600,color:S().Tj.text.primary,marginBottom:4,lineHeight:1.3},description:{fontSize:13,color:S().Tj.text.secondary,marginBottom:12,lineHeight:1.4},button:{background:"transparent",border:"none",color:S().Tj.text.primary,fontSize:13,fontWeight:500,cursor:"pointer",display:"flex",alignItems:"center",gap:4,padding:0,lineHeight:1,transition:"opacity 0.15s ease"},arrow:{fontSize:12,transition:"transform 0.15s ease"}})),[]);return(0,k.jsx)("div",{style:t.container,children:(0,k.jsxs)("div",{style:t.modal,children:[(0,k.jsx)("div",{style:t.iconContainer,children:(0,k.jsx)(u().I,{icon:f().checkmarkCircleFillSmallIcon,size:"sm",colorVariant:"primary"})}),(0,k.jsxs)("div",{style:t.content,children:[(0,k.jsx)("div",{style:t.title,children:(0,k.jsx)(h().sA,{id:"loggedOutPublicSidebar.floatingModal.title",defaultMessage:"Ready to explore more?"})}),(0,k.jsx)("div",{style:t.description,children:(0,k.jsx)(h().sA,{id:"loggedOutPublicSidebar.floatingModal.description",defaultMessage:"Sign up or login to start building with Notion today"})}),(0,k.jsxs)("button",{style:t.button,onClick:e,type:"button",children:[(0,k.jsx)(h().sA,{id:"loggedOutPublicSidebar.floatingModal.button",defaultMessage:"Sign up or login"}),(0,k.jsx)("span",{style:t.arrow,children:"→"})]})]})]})})}function C({onClick:e}){const[t,o]=(0,n.useState)(!1),i=(0,l().IS)((()=>({button:{display:"flex",alignItems:"center",justifyContent:"space-between",width:"100%",paddingInline:8,border:"none",background:t?S().Tj.background.tertiaryTranslucent:"transparent",borderRadius:6,cursor:"pointer",fontSize:12,fontWeight:500,lineHeight:1,color:S().Tj.text.secondary,letterSpacing:"0.5px",textAlign:"start",transition:"background-color 0.15s ease",height:30,marginBottom:4}})),[t]);return(0,k.jsxs)(p().p,{style:i.button,onMouseEnter:()=>o(!0),onMouseLeave:()=>o(!1),onClick:e,children:[(0,k.jsx)("span",{children:(0,k.jsx)(h().sA,{id:"loggedOutPublicSidebar.private",defaultMessage:"Private"})}),(0,k.jsx)(u().I,{icon:y().plusSmallIcon,colorVariant:"secondary",size:"sm"})]})}function A({icon:e,content:t,onClick:o}){const[i,a]=(0,n.useState)(!1),r=(0,l().IS)((()=>({button:{display:"flex",alignItems:"center",width:"100%",padding:"4px 8px",border:"none",background:i?S().Tj.background.tertiaryTranslucent:"transparent",borderRadius:6,cursor:"pointer",fontSize:14,color:S().Tj.text.secondary,textAlign:"start",transition:"background-color 0.15s ease"},icon:{marginInlineEnd:8}})),[i]);return(0,k.jsxs)("button",{style:r.button,onMouseEnter:()=>a(!0),onMouseLeave:()=>a(!1),onClick:o,type:"button",children:[e?(0,k.jsx)("div",{style:r.icon,children:e}):void 0,t]})}function T(){const e=(0,r().v3)(),t=(0,_().s)({shouldRedirectForExistingUsersOnly:!0}),o=t=>{(0,i().u)({environment:e,event:{eventName:"logged_out_sidebar_click",eventProperties:{sidebar_type:"logged_out_public_sharing",clicked_element:t}}})},n=(0,s().K8)((()=>a().default.getEligibleGroup({experimentId:"awtl_logged_out_sidebar",defaultGroup:"control"})),[]),p="directly_open_signup_modal"===n,m=(0,l().IS)((()=>({container:{position:"relative",display:"flex",flexDirection:"column",height:"100%",background:S().Tj.background.secondary,boxShadow:S().Tj.sidebarBoxShadow},headerContainer:{marginInlineStart:10},actionsContainer:{flexGrow:0,flexShrink:0,paddingBottom:8,display:"flex",flexDirection:"column",gap:1,marginInlineStart:x().bG,marginInlineEnd:x().bG},outlinerContainer:{flexGrow:0,flexShrink:0,display:"flex",flexDirection:"column",paddingInlineStart:x().bG,paddingInlineEnd:x().bG,marginTop:4}})),[]);return"control"===n?null:(0,k.jsxs)("div",{style:m.container,children:[(0,k.jsx)("div",{style:m.headerContainer,children:(0,k.jsx)(w().e,{onClick:()=>{o("notion_header"),t("sidebar")}})}),(0,k.jsxs)("div",{style:m.actionsContainer,children:[p?(0,k.jsx)(A,{icon:(0,k.jsx)(u().I,{icon:v().P,colorVariant:"secondary",size:"lg"}),content:"Home",onClick:()=>{o("home"),t("sidebar")}}):(0,k.jsx)(d().A,{popupType:c().nl.Popup,placementToOrigin:"bottom",originGap:4,render:({close:e})=>(0,k.jsx)(M,{version:"default",onClose:e}),renderOrigin:e=>(0,k.jsx)(A,{...e,icon:(0,k.jsx)(u().I,{icon:v().P,colorVariant:"secondary",size:"lg"}),content:"Home",onClick:t=>{o("home"),e.onClick(t)}})}),p?(0,k.jsx)(A,{onClick:()=>{o("inbox"),t("sidebar")},icon:(0,k.jsx)(u().I,{icon:b().y,colorVariant:"secondary",size:"lg"}),content:"Inbox"}):(0,k.jsx)(d().A,{popupType:c().nl.Popup,placementToOrigin:"bottom",originGap:4,render:({close:e})=>(0,k.jsx)(M,{version:"default",onClose:e}),renderOrigin:e=>(0,k.jsx)(A,{...e,icon:(0,k.jsx)(u().I,{icon:b().y,colorVariant:"secondary",size:"lg"}),content:"Inbox",onClick:t=>{o("inbox"),e.onClick(t)}})})]}),(0,k.jsxs)("div",{style:m.outlinerContainer,children:[p?(0,k.jsx)(C,{onClick:()=>{o("private_section_toggle"),t("sidebar")}}):(0,k.jsx)(d().A,{popupType:c().nl.Popup,placementToOrigin:"bottom",originGap:4,render:({close:e})=>(0,k.jsx)(M,{version:"create_new_page",onClose:e}),renderOrigin:e=>(0,k.jsx)(C,{...e,onClick:t=>{o("private_section_toggle"),e.onClick(t)}})}),p?(0,k.jsx)(A,{icon:(0,k.jsx)(u().I,{icon:y().plusSmallIcon,colorVariant:"secondary",size:"sm"}),content:"Create new page",onClick:()=>{o("create_new_page"),t("sidebar")}}):(0,k.jsx)(d().A,{popupType:c().nl.Popup,placementToOrigin:"bottom",originGap:4,render:({close:e})=>(0,k.jsx)(M,{version:"create_new_page",onClose:e}),renderOrigin:e=>(0,k.jsx)(A,{...e,icon:(0,k.jsx)(u().I,{icon:y().plusSmallIcon,colorVariant:"secondary",size:"sm"}),content:"Create new page",onClick:t=>{o("create_new_page"),e.onClick(t)}})})]}),(0,k.jsx)(I,{onSignupClick:()=>{o("signup_floating_callout"),t("sidebar")}})]})}},343733:(e,t,o)=>{o.d(t,{Q:()=>i});var n=()=>o(314529);function i(e,t){(0,n().DO_NOT_USE_trackLegacy)(e,"click_upgrade_button",t)}},346527:(e,t,o)=>{o.d(t,{A:()=>i});class n extends(()=>o(757695))().Store{getInitialState(){return{open:!1,focus:"none"}}open(){this.setState({open:!0,focus:"none"})}close(){this.setState({open:!1,focus:"none"})}}const i=new n},348869:(e,t,o)=>{o.d(t,{g:()=>s});o(944114);var n=()=>o(792057),i=()=>o(785728),a=()=>o(532659),r=()=>o(753812);async function s(e){const{environment:t,onResponse:o,data:s,userId:l,tracking:c,abortSignal:d}=e,u=await r().callStreamApi({eventName:"runInferenceTranscript",environment:t,data:s,userId:l,tracking:c,abortSignal:d,headers:(0,i().WS)({spaceId:s.spaceId})});if("success"!==u.type)return null!=d&&d.aborted?{error:{message:"Aborted",code:0}}:(n().Qg(u),{error:{message:u.error.message,code:u.status}});const p=[];if(a().hS.is(u.data))for await(const n of u.data){if("error"===n.type)return{error:{message:n.message,code:n.errorCode}};null==o||o(n),p.push(n)}return{value:p}}},349851:(e,t,o)=>{o.d(t,{q:()=>s,y:()=>l});var n=()=>o(564884),i=()=>o(931075),a=()=>o(534177),r=()=>o(470928);function s(e){const{environment:t,blockStore:o,update:i}=e,r=function(e){switch(e){case"add":return"page_verification_enabled";case"update":return"page_verification_edited";case"remove":return"page_verification_disabled";default:(0,a().HB)(e)}}(i.metadata.action),s=o.id,l=o.getAssociatedCollectionId(),c=o.getSpaceId(),d=i.metadata.entrypoint;let u=l?"db":"non_db";if(l){const e=o.getAssociatedCollectionStore();null!=e&&e.isPageTreeCollection()&&(u="wiki")}switch(r){case"page_verification_enabled":case"page_verification_edited":(0,n().u)({environment:t,event:{eventName:r,eventProperties:{entrypoint:d,page_type:u,verification_type:i.metadata.verification_type,page_id:s,collection_id:l,space_id:c,expiration:i.metadata.expiration??void 0,expiration_date:i.metadata.expiration_date??void 0}}});break;case"page_verification_disabled":(0,n().u)({environment:t,event:{eventName:r,eventProperties:{entrypoint:d,page_type:u,verification_type:i.metadata.verification_type,page_id:s,collection_id:l,space_id:c}}});break;default:(0,a().HB)(r)}}function l(e){const{environment:t,blockStore:o,entrypoint:a,action:s}=e,l=o.id,c=o.getAssociatedCollectionId(),d=o.getSpaceId();let u=c?"db":"non_db";if(c){const e=o.getAssociatedCollectionStore();null!=e&&e.isPageTreeCollection()&&(u="wiki")}const p=(0,r().i1)(o),m="none"===p.type?void 0:(0,i().Ep)(p);(0,n().u)({environment:t,event:{eventName:"page_verification_owner_edited",eventProperties:{entrypoint:a,page_type:u,action:s,verification_type:m,page_id:l,collection_id:c,space_id:d}}})}},354572:(e,t,o)=>{o.d(t,{F:()=>Yn});o(16280);var n=o(296540),i=()=>o(590526),a=()=>o(917629),r=()=>o(650829),s=()=>o(312788),l=()=>o(484714),c=()=>o(807449),d=()=>o(403733),u=()=>o(69708),p=()=>o(112799),m=()=>o(300789),g=()=>o(861243),f=o(474848);const v=(0,u().YK)({title:{id:"ai_meeting_notes_app_download.title",defaultMessage:"AI Meeting Notes, better on the Notion app"},body:{id:"ai_meeting_notes_app_download.body",defaultMessage:"Capture all sides of video calls and get notifications to start transcribing as meetings begin"},cta:{id:"ai_meeting_notes_app_download.cta",defaultMessage:"Download Notion app"}});function b(){const{navigate:e}=(0,n.useContext)(s().E),t=(0,l().v3)(),o=(0,u().tz)(),i=(0,p().E)(),a=(0,n.useCallback)((()=>{i.current&&e({environment:t,url:i.current,openInNew:"tab"})}),[t,i,e]),r=(0,n.useCallback)((()=>{a(),m().a(t,"ai_meeting_notes_browser_summary_app_download")}),[t,a]);return(0,f.jsx)(g().Y,{messageKey:"ai_meeting_notes_browser_summary_app_download",title:o.formatMessage(v.title),body:o.formatMessage(v.body),buttons:[{text:o.formatMessage(v.cta),onClick:r,leftIcon:()=>(0,f.jsx)(c().I,{icon:d().arrowStraightDownSmallIcon,size:"xs",colorVariant:"primary"})}]})}const y=(0,u().YK)({titleWindows:{id:"desktop_download_sidebar.title.windows",defaultMessage:"Try Notion for Windows"},titleMac:{id:"desktop_download_sidebar.title.mac",defaultMessage:"Try Notion for Mac"},titleDefault:{id:"desktop_download_sidebar.title.desktop",defaultMessage:"Try Notion for Desktop"},bodyCopyPerformance:{id:"desktop_download_sidebar.body.copy_performance",defaultMessage:"Get up to 30% faster loading time with the Notion desktop app."},cta:{id:"desktop_download_sidebar.cta",defaultMessage:"Get the app"}});function h(){const{navigate:e}=(0,n.useContext)(s().E),t=(0,l().v3)(),o=(0,l().Y0)(),i=(0,u().tz)(),a=o.isWindows?y.titleWindows:o.isMac?y.titleMac:y.titleDefault,r=y.bodyCopyPerformance,v=(0,p().E)(),b=(0,n.useCallback)((()=>{v.current&&e({environment:t,url:v.current,openInNew:"tab"})}),[t,v,e]),h=(0,n.useCallback)((()=>{b(),m().a(t,"desktop_download_sidebar")}),[t,b]);return(0,f.jsx)(g().Y,{messageKey:"desktop_download_sidebar",title:i.formatMessage(a),body:i.formatMessage(r),buttons:[{text:i.formatMessage(y.cta),onClick:h,leftIcon:()=>(0,f.jsx)(c().I,{icon:d().arrowStraightDownSmallIcon,size:"xs",colorVariant:"primary"})}]})}var S=()=>o(203066),_=()=>o(153321),x=()=>o(401497),w=()=>o(755222),k=()=>o(128933),M=()=>o(699143),I=()=>o(718827),C=()=>o(695115),A=()=>o(493552),T=()=>o(373009),j=()=>o(148307),P=()=>o(165358),D=()=>o(995847),B=()=>o(427704),R=()=>o(100622),N=()=>o(534177),E=()=>o(40970),O=()=>o(59004),V=()=>o(128182),L=(o(898992),o(354520),o(672577),()=>o(907258)),F=()=>o(763824),U=()=>o(946561),z=()=>o(1330),W=()=>o(614016),K=()=>o(63515),H=()=>o(488776),Y=()=>o(645200);var q=()=>o(749687),G=()=>o(391657),$=()=>o(107975),X=()=>o(631524),Z=()=>o(160432);const J=(0,u().YK)({accountMismatchTitle:{id:"calendarOAuthPopups.accountMismatchTitle",defaultMessage:"Connect your Notion account email"},accountMismatchDescription:{id:"calendarOAuthPopups.accountMismatchDescription",defaultMessage:"You’ve connected an email that doesn’t match your current Notion email, {email}. Try again with the right email or switch Notion accounts."},cancel:{id:"calendarOAuthPopups.cancel",defaultMessage:"Cancel"},connectCalendar:{id:"calendarOAuthPopups.connectCalendar",defaultMessage:"Connect calendar"}});function Q({onConnectCalendar:e,onDismiss:t}){const o=(0,u().tz)(),a=(0,l().v3)(),r=(0,i().K8)((()=>{var e;return(null===(e=L().default.state.currentUserStore)||void 0===e?void 0:e.getEmail())??""}),[]),s=(0,n.useCallback)((()=>{E().li(a,{popup_type:"account_mismatch",action:"retry"}),e()}),[a,e]),c=(0,n.useCallback)((()=>{E().li(a,{popup_type:"account_mismatch",action:"dismiss"}),t()}),[a,t]),d=(0,x().IS)((()=>({container:{backgroundColor:R().Tj.background.elevated,borderRadius:16,boxShadow:"0px 0px 0px 1px rgba(42, 28, 0, 0.07), 0px 5px 8px 0px rgba(25, 25, 25, 0.03), 0px 20px 24px 0px rgba(25, 25, 25, 0.05)",display:"flex",flexDirection:"column",gap:16,padding:20,width:480,maxWidth:"calc(100vw - 32px)"},content:{display:"flex",flexDirection:"column",gap:2,paddingInlineEnd:20},buttonRow:{display:"flex",gap:8,justifyContent:"flex-end"},boldEmail:{fontWeight:600}})),[]),p=(0,n.useCallback)((()=>(0,f.jsxs)("div",{style:d.container,children:[(0,f.jsxs)("div",{style:d.content,children:[(0,f.jsx)(A().D,{styleKey:"bodyLgSemibold",colorVariant:"primary",children:(0,f.jsx)(u().sA,{...J.accountMismatchTitle})}),(0,f.jsx)(A().D,{styleKey:"bodyRegular",colorVariant:"secondary",children:(0,f.jsx)(u().sA,{...J.accountMismatchDescription,values:{email:(0,f.jsx)("strong",{style:d.boldEmail,children:r})}})})]}),(0,f.jsxs)("div",{style:d.buttonRow,children:[(0,f.jsx)(X().p,{size:"md",onClick:c,children:(0,f.jsx)(u().sA,{...J.cancel})}),(0,f.jsx)(Z().A,{colorPalette:"blue",size:"md",onClick:s,children:(0,f.jsx)(u().sA,{...J.connectCalendar})})]})]})),[s,c,d,r]);return(0,f.jsx)($().a,{open:!0,preventHideChildrenWhileOpening:!0,onDismiss:c,render:p,ariaLabel:o.formatMessage(J.accountMismatchTitle)})}var ee=()=>o(416783);const te=(0,u().YK)({insufficientScopesTitle:{id:"calendarOAuthPopups.insufficientScopesTitle",defaultMessage:"Grant all necessary permissions to continue"},insufficientScopesDescription:{id:"calendarOAuthPopups.insufficientScopesDescription",defaultMessage:"Select all required permissions to connect your email. We only request what’s needed. "},learnMoreSecurity:{id:"calendarOAuthPopups.learnMoreSecurity",defaultMessage:"Learn more about our security practices."},cancel:{id:"calendarOAuthPopups.cancel",defaultMessage:"Cancel"},connectCalendar:{id:"calendarOAuthPopups.connectCalendar",defaultMessage:"Connect calendar"}}),oe="https://www.notion.so/security";function ne({onConnectCalendar:e,onDismiss:t}){const o=(0,u().tz)(),i=(0,l().v3)(),a=(0,n.useCallback)((()=>{E().li(i,{popup_type:"insufficient_scopes",action:"retry"}),e()}),[i,e]),r=(0,n.useCallback)((()=>{E().li(i,{popup_type:"insufficient_scopes",action:"dismiss"}),t()}),[i,t]),s=(0,x().IS)((()=>({container:{backgroundColor:R().Tj.background.elevated,borderRadius:16,boxShadow:"0px 0px 0px 1px rgba(42, 28, 0, 0.07), 0px 5px 8px 0px rgba(25, 25, 25, 0.03), 0px 20px 24px 0px rgba(25, 25, 25, 0.05)",display:"flex",flexDirection:"column",gap:16,padding:20,width:480,maxWidth:"calc(100vw - 32px)"},content:{display:"flex",flexDirection:"column",gap:2,paddingInlineEnd:20},buttonRow:{display:"flex",gap:8,justifyContent:"flex-end"},link:{color:R().Tj.blue.text.primary}})),[]),c=(0,n.useCallback)((()=>(0,f.jsxs)("div",{style:s.container,children:[(0,f.jsxs)("div",{style:s.content,children:[(0,f.jsx)(A().D,{styleKey:"bodyLgSemibold",colorVariant:"primary",children:(0,f.jsx)(u().sA,{...te.insufficientScopesTitle})}),(0,f.jsxs)(A().D,{styleKey:"bodyRegular",colorVariant:"secondary",children:[(0,f.jsx)(u().sA,{...te.insufficientScopesDescription}),(0,f.jsx)(ee().V,{href:oe,external:!0,hoverColor:"blue",style:s.link,children:(0,f.jsx)(u().sA,{...te.learnMoreSecurity})})]})]}),(0,f.jsxs)("div",{style:s.buttonRow,children:[(0,f.jsx)(X().p,{size:"md",onClick:r,children:(0,f.jsx)(u().sA,{...te.cancel})}),(0,f.jsx)(Z().A,{colorPalette:"blue",size:"md",onClick:a,children:(0,f.jsx)(u().sA,{...te.connectCalendar})})]})]})),[a,r,s]);return(0,f.jsx)($().a,{open:!0,preventHideChildrenWhileOpening:!0,onDismiss:r,render:c,ariaLabel:o.formatMessage(te.insufficientScopesTitle)})}var ie=()=>o(994932),ae=()=>o(340498);const re={viewBox:"0 0 16 16",fittedViewBox:"1.09 2.27 13.46 10.48",svg:(0,f.jsx)("path",{d:"M4.875 8.65c.566 0 1.025.459 1.025 1.025v2.05c0 .566-.459 1.025-1.025 1.025h-2.05A1.025 1.025 0 0 1 1.8 11.725v-2.05c0-.566.459-1.025 1.025-1.025zm8.925 1.3a.75.75 0 0 1 0 1.5h-6a.75.75 0 0 1 0-1.5zM5.206 2.64a.75.75 0 0 1 1.288.77l-2.4 4a.75.75 0 0 1-1.214.103l-1.6-1.867a.75.75 0 0 1 1.14-.975l.922 1.076zM13.8 4.55a.75.75 0 0 1 0 1.5h-6a.75.75 0 0 1 0-1.5z"})},se=(0,ae().wt)("checklistFillSmall",re,"fillSmall"),le={viewBox:"0 0 16 16",fittedViewBox:"2.95 1.95 10.11 12.11",svg:(0,f.jsx)("path",{d:"M2.95 2.5a.55.55 0 0 1 .55-.55h3a.55.55 0 0 1 .55.55v3a.55.55 0 0 1-.55.55h-.95v.495a.45.45 0 0 0 .357.44l4.414.934a1.55 1.55 0 0 1 1.229 1.516v.515h.95a.55.55 0 0 1 .55.55v3a.55.55 0 0 1-.55.55h-3a.55.55 0 0 1-.55-.55v-3a.55.55 0 0 1 .55-.55h.95v-.514a.45.45 0 0 0-.357-.44L5.68 8.06a1.55 1.55 0 0 1-1.23-1.515V6.05H3.5a.55.55 0 0 1-.55-.55z"})},ce=(0,ae().wt)("connectionsFillSmall",le,"fillSmall"),de={viewBox:"0 0 16 16",fittedViewBox:"0.97 3.37 14.21 9.26",svg:(0,f.jsx)("path",{d:"M2.8 3.375A1.825 1.825 0 0 0 .975 5.2v5.6c0 1.008.817 1.825 1.825 1.825H10a1.825 1.825 0 0 0 1.825-1.825v-.645l2.401 1.455a.625.625 0 0 0 .95-.535v-6.15a.625.625 0 0 0-.95-.535l-2.4 1.455V5.2A1.825 1.825 0 0 0 10 3.375zM2.225 5.2c0-.318.258-.575.575-.575H10c.318 0 .575.257.575.575v5.6a.575.575 0 0 1-.575.575H2.8a.575.575 0 0 1-.575-.575zm9.6 3.493V7.307l2.1-1.273v3.932z"})},ue=(0,ae().wt)("videoCameraSmall",de,"small");var pe=()=>o(175249);const me=(0,u().YK)({finishConnectingTitle:{id:"calendarOAuthPopups.finishConnectingTitle",defaultMessage:"Finish connecting to Notion Calendar"},finishConnectingDescription:{id:"calendarOAuthPopups.finishConnectingDescription",defaultMessage:"By connecting your calendar to Notion, you can do so much more:"},featureTranscribe:{id:"calendarOAuthPopups.featureTranscribe",defaultMessage:"Transcribe meetings whether you’re joining them in person or online"},featureActionItems:{id:"calendarOAuthPopups.featureActionItems",defaultMessage:"Automatically generate action items from meeting notes"},featureDatabases:{id:"calendarOAuthPopups.featureDatabases",defaultMessage:"Add databases to your calendar"},connectCalendar:{id:"calendarOAuthPopups.connectCalendar",defaultMessage:"Connect calendar"},closeButton:{id:"calendarOAuthPopups.closeButton",defaultMessage:"Close"}});function ge({onConnectCalendar:e,onDismiss:t}){const o=(0,u().tz)(),i=(0,l().v3)(),a=(0,n.useCallback)((()=>{E().li(i,{popup_type:"oauth_window_closed",action:"retry"}),e()}),[i,e]),r=(0,n.useCallback)((()=>{E().li(i,{popup_type:"oauth_window_closed",action:"dismiss"}),t()}),[i,t]),s=(0,x().IS)((()=>({container:{backgroundColor:R().Tj.background.elevated,borderRadius:12,boxShadow:R().Tj.shadowSM,border:`1px solid ${R().Tj.border.primary}`,display:"flex",flexDirection:"column",gap:24,paddingTop:20,paddingBottom:16,paddingInlineStart:20,paddingInlineEnd:20,position:"relative",width:407,maxWidth:"calc(100vw - 32px)"},header:{display:"flex",flexDirection:"column",gap:7,alignItems:"center"},iconAndTitle:{display:"flex",flexDirection:"column",gap:9,alignItems:"center"},iconWrapper:{display:"flex",alignItems:"center",justifyContent:"center"},title:{textAlign:"center"},description:{textAlign:"center"},closeButton:{position:"absolute",top:10,insetInlineEnd:10,borderRadius:12,background:R().Tj.background.tertiaryTranslucent,backdropFilter:"blur(16px)",height:24,width:24,zIndex:10},closeIcon:{fill:R().Tj.icon.secondary,width:14,height:14},featureList:{backgroundColor:R().Tj.background.secondary,borderRadius:8,padding:16,display:"flex",flexDirection:"column",gap:14},featureItem:{display:"flex",gap:6,alignItems:"flex-start"},featureIcon:{flexShrink:0,marginTop:0},buttonContainer:{display:"flex",flexDirection:"column",gap:4},primaryButton:{width:"100%"},secondaryButton:{width:"100%",justifyContent:"center"}})),[]),c=(0,n.useCallback)((()=>(0,f.jsxs)("div",{style:s.container,children:[(0,f.jsx)(C().A,{style:s.closeButton,iconStyle:s.closeIcon,ariaLabel:o.formatMessage(me.closeButton),icon:D().xMarkSmallIcon,onClick:r}),(0,f.jsxs)("div",{style:s.header,children:[(0,f.jsxs)("div",{style:s.iconAndTitle,children:[(0,f.jsx)("div",{style:s.iconWrapper,children:(0,f.jsx)(ie().I,{icon:ce,size:32,colorVariant:"primary"})}),(0,f.jsx)(A().D,{styleKey:"titleSmSemibold",colorVariant:"primary",style:s.title,children:(0,f.jsx)(u().sA,{...me.finishConnectingTitle})})]}),(0,f.jsx)(A().D,{styleKey:"bodyRegular",colorVariant:"secondary",style:s.description,children:(0,f.jsx)(u().sA,{...me.finishConnectingDescription})})]}),(0,f.jsxs)("div",{style:s.featureList,children:[(0,f.jsxs)("div",{style:s.featureItem,children:[(0,f.jsx)("div",{style:s.featureIcon,children:(0,f.jsx)(ie().I,{icon:ue,size:20,colorVariant:"secondary"})}),(0,f.jsx)(A().D,{styleKey:"bodyRegular",colorVariant:"secondary",children:(0,f.jsx)(u().sA,{...me.featureTranscribe})})]}),(0,f.jsxs)("div",{style:s.featureItem,children:[(0,f.jsx)("div",{style:s.featureIcon,children:(0,f.jsx)(ie().I,{icon:se,size:20,colorVariant:"secondary"})}),(0,f.jsx)(A().D,{styleKey:"bodyRegular",colorVariant:"secondary",children:(0,f.jsx)(u().sA,{...me.featureActionItems})})]}),(0,f.jsxs)("div",{style:s.featureItem,children:[(0,f.jsx)("div",{style:s.featureIcon,children:(0,f.jsx)(ie().I,{icon:pe().a,size:20,colorVariant:"secondary"})}),(0,f.jsx)(A().D,{styleKey:"bodyRegular",colorVariant:"secondary",children:(0,f.jsx)(u().sA,{...me.featureDatabases})})]})]}),(0,f.jsx)("div",{style:s.buttonContainer,children:(0,f.jsx)(Z().A,{colorPalette:"blue",size:"md",style:s.primaryButton,onClick:a,children:(0,f.jsx)(u().sA,{...me.connectCalendar})})})]})),[a,r,o,s]);return(0,f.jsx)($().a,{open:!0,preventHideChildrenWhileOpening:!0,onDismiss:r,render:c,ariaLabel:o.formatMessage(me.finishConnectingTitle)})}const fe=(0,u().YK)({title:{id:"newYearMeetingNotesCallout.title",defaultMessage:"New year, better meetings"},description:{id:"newYearMeetingNotesCallout.description",defaultMessage:"Resolve to take perfect AI notes for every meeting on your calendar"},ctaButton:{id:"newYearMeetingNotesCallout.ctaButton",defaultMessage:"Try now"},meetingTitle:{id:"newYearMeetingNotesCallout.meetingTitle",defaultMessage:"Team Sync"},failedToConnectCalendar:{id:"newYearMeetingNotesCallout.failedToConnectCalendar",defaultMessage:"An internal error occurred. Please try again later."},offline:{id:"newYearMeetingNotesCallout.offline",defaultMessage:"It looks like you’re offline. Please check your internet connection and try again."}});function ve(){const e=(0,u().tz)(),t=(0,l().v3)(),[o,a]=(0,n.useState)(!1),[r,c]=(0,n.useState)(!1),[d,p]=(0,n.useState)(!1),[g,v]=(0,n.useState)(void 0),[b,y]=(0,n.useState)("idle"),h=(0,n.useRef)("idle"),$=(0,i().K8)((()=>w().A.state.isVisible),[]),X=(0,i().O$)(q().sidebarExpandedStore),Z=(0,i().O$)(q().sidebarAnimatingStore),{navigate:J}=(0,n.useContext)(s().E),ee=X&&$,{onClick:te,onDismiss:oe}=(0,G().t)({messageKey:"new_year_meeting_notes_calendar_callout"}),ie=(0,x().eP)(),ae=(0,x().IS)((()=>({closeButton:{position:"absolute",top:"6px",insetInlineEnd:"6px",borderRadius:"12px",background:R().Tj.background.tertiaryTranslucent,backdropFilter:"blur(16px)",height:20,width:20,zIndex:1},closeButtonHovered:{background:(0,I().i)({color:R().Tj.background.tertiaryTranslucent,mode:ie})},closeButtonIcon:{fill:R().Tj.icon.secondary,width:14,height:14},card:{borderRadius:12,boxShadow:`0px 0px 0px 1px ${R().Tj.border.primary}, 0px 2px 4px 0px rgba(0, 0, 0, 0.04)`,backgroundColor:R().Tj.popoverBackground,overflow:"hidden",marginBottom:8,marginInlineEnd:8,marginInlineStart:8,width:"calc(100% - 16px)",display:"flex",flexDirection:"column",gap:12},mediaArea:{height:140,backgroundColor:R().Tj.blue.background.secondary,borderBottom:`1px solid ${R().Tj.border.secondary}`,display:"flex",alignItems:"center",justifyContent:"center",padding:20,paddingTop:28,overflow:"hidden",position:"relative"},transcriptionCardWrapper:{width:200,borderRadius:12,border:`1px solid ${R().Tj.border.secondary}`,boxShadow:"0px 2px 4px 0px rgba(0, 0, 0, 0.04)",background:R().Tj.popoverBackground,overflow:"hidden"},ctaButton:{width:"100%"}})),[ie]),re=ee&&!Z;function se(e){p(e),c(!1)}(0,n.useEffect)((()=>{if(d||!re)return;let e;const t=setTimeout((()=>{c(!0),e=setInterval((()=>{c((e=>!e))}),4e3)}),2e3);return()=>{clearTimeout(t),clearInterval(e),c(!1)}}),[d,re]),(0,n.useEffect)((()=>{h.current=b}),[b]),(0,n.useEffect)((()=>{if("inProgress"===b)return window.addEventListener("focus",e),()=>{window.removeEventListener("focus",e)};function e(){setTimeout((()=>{"inProgress"===h.current&&v("oAuthWindowClosed")}),100)}}),[b]);const le=(0,n.useCallback)((async()=>{y("inProgress");const e=async function*(e){var t;const{environment:o,from:n}=e,i=L().AppStoreSidebarSpaceViewStore.state,a=null===(t=L().default.state.currentUserStore)||void 0===t?void 0:t.getEmail(),r=null==i?void 0:i.getSpaceId();if(!a||!r||!i)return P().log({level:"error",from:"generateNotionCalendarSignup",type:"unableToConnectCalendar - missing email or spaceId",data:{miscDataToConvertToString:{email:a,spaceId:r,source:n}}}),"missingEmailOrSpaceId";const s=await(0,Y().II)({environment:o,email:a});if("dismissedDueToCleanup"===s)return"oAuthWindowClosedDueToCleanup";if(!s)return"oAuthWindowClosedByUser";yield"signupInitiated";const l=await(0,Y().Qz)({environment:o,code:s.code,encryptedToken:s.encryptedToken,spaceId:r,from:n});if(!(0,U().s)())return"wentOffline";if("failed"===l.type)return"signupFailure";yield"signupSuccess",await K().refreshExternalIntegrationStore({environment:o});const c=l.data.botId;let d="failure";async function u(){d=await(0,z().qq)({environment:o,sidebarSpaceViewStore:i,botId:c,forceRefetch:!0,timeRange:(0,W().M)(),reason:{reason:"notion_calendar_oauth"}})}if(await u(),"failure"===d&&(await(0,F().wR)(1e3),await u()),!(0,U().s)())return"wentOffline";if("failure"===d)return"secondaryDataLoadFailure";const p=H().Q.getState().getCurrentAccounts().filter((e=>"google"===e.provider)).find((e=>e.email===a));return p?"authorized"!==p.authorizationStatus?"insufficientScopes":"secondaryDataLoaded":"accountMismatch"}({environment:t,from:"newYearMeetingNotesCallout"});let o=!0;for(;;){const{value:n,done:i}=await e.next();switch(n){case"signupFailure":y("completed"),P().log({level:"error",from:"NewYearMeetingNotesCallout",type:"failedToConnectCalendar",data:{miscDataToConvertToString:{value:n}}}),E().wi(t,{result:"signup_failure"}),k().D6({label:(0,f.jsx)(u().sA,{...fe.failedToConnectCalendar})});break;case"secondaryDataLoadFailure":y("completed"),P().log({level:"error",from:"NewYearMeetingNotesCallout",type:"failedToConnectCalendar",data:{miscDataToConvertToString:{value:n}}}),E().wi(t,{result:"secondary_data_load_failure"}),k().D6({label:(0,f.jsx)(u().sA,{...fe.failedToConnectCalendar})});break;case"missingEmailOrSpaceId":y("completed"),P().log({level:"error",from:"NewYearMeetingNotesCallout",type:"failedToConnectCalendar",data:{miscDataToConvertToString:{value:n}}}),E().wi(t,{result:"missing_email_or_space_id"}),k().D6({label:(0,f.jsx)(u().sA,{...fe.failedToConnectCalendar})});break;case"wentOffline":y("completed"),E().wi(t,{result:"went_offline"}),k().D6({label:(0,f.jsx)(u().sA,{...fe.offline})});break;case"signupSuccess":E().wi(t,{result:"signup_success"}),a(!0);break;case"signupInitiated":y("completed"),a(!0);break;case"secondaryDataLoaded":a(!1),v(void 0),J({environment:t,url:B().JZ.meet}),m().a(t,"new_year_meeting_notes_calendar_callout");break;case"insufficientScopes":E().wi(t,{result:"insufficient_scopes"}),v(n);break;case"accountMismatch":E().wi(t,{result:"account_mismatch"}),v(n);break;case"oAuthWindowClosedDueToCleanup":o=!1;break;case"oAuthWindowClosedByUser":y("completed"),E().wi(t,{result:"oauth_window_closed"});break;default:(0,N().HB)(n)}if(i)break}o&&a(!1)}),[t,J]),ce=(0,n.useCallback)((async()=>{te(),await le()}),[te,le]),de=(0,n.useCallback)((()=>{v(void 0),y("idle")}),[]),ue=(0,n.useCallback)((async()=>{v(void 0),await le()}),[le]);return(0,f.jsxs)(f.Fragment,{children:[(0,f.jsx)(S().N,{mode:"wait",children:X?(0,f.jsxs)(_().P.div,{initial:{opacity:0,y:50},animate:{opacity:1,y:0},exit:{opacity:0,y:50},transition:{duration:.2,type:"spring",bounce:0},style:ae.card,children:[(0,f.jsxs)("div",{style:ae.mediaArea,children:[(0,f.jsx)(C().A,{style:ae.closeButton,hoveredStyle:ae.closeButtonHovered,iconStyle:ae.closeButtonIcon,ariaLabel:e.formatMessage({id:"dismiss_connected_app_upsell_popover",defaultMessage:"Close promotional tooltip for calendar or mail app buttons"}),icon:D().xMarkSmallIcon,onClick:e=>{e.stopPropagation(),oe()}}),(0,f.jsx)(S().N,{mode:"wait",children:re?(0,f.jsx)(_().P.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:20},transition:{duration:.2,type:"spring",bounce:0,delay:.3},onMouseEnter:()=>se(!0),onMouseLeave:()=>se(!1),style:ae.transcriptionCardWrapper,children:(0,f.jsx)(O().n,{title:e.formatMessage(fe.meetingTitle),transcriptionBlockStoreId:"",transcriptionDuration:void 0,transcriberName:void 0,isSelfTranscribing:!0,isHovered:d||r,shouldShowParticipantExpansion:!1,participants:(0,f.jsx)(V().m,{maxRenderedUsers:3,avatarSize:24,avatarImages:[j().A.images.aimnCalendarUpsell.user13XPng,j().A.images.aimnCalendarUpsell.user23XPng,j().A.images.aimnCalendarUpsell.user33XPng]})})}):null})]}),(0,f.jsxs)(M().Y1,{direction:"vertical",gap:12,padding:"0px 16px 16px 16px",children:[(0,f.jsxs)(M().Y1,{direction:"vertical",gap:2,padding:"0px 8px 0px 0px",children:[(0,f.jsx)(A().D,{styleKey:"captionSemibold",colorVariant:"primary",children:(0,f.jsx)(u().sA,{...fe.title})}),(0,f.jsx)(A().D,{styleKey:"captionRegular",colorVariant:"secondary",children:(0,f.jsx)(u().sA,{...fe.description})})]}),(0,f.jsx)(T().E,{colorPalette:"blue",size:"md",style:ae.ctaButton,onClick:ce,isLoading:o,children:(0,f.jsx)(u().sA,{...fe.ctaButton})})]})]}):null}),"oAuthWindowClosed"===g?(0,f.jsx)(ge,{onConnectCalendar:ue,onDismiss:de}):null,"accountMismatch"===g?(0,f.jsx)(Q,{onConnectCalendar:ue,onDismiss:de}):null,"insufficientScopes"===g?(0,f.jsx)(ne,{onConnectCalendar:ue,onDismiss:de}):null]})}var be=()=>o(564884),ye=()=>o(920198),he=()=>o(852507),Se=()=>o(741615),_e=()=>o(123423),xe=()=>o(166386),we=()=>o(6313);const ke=(0,u().YK)({title:{id:"resurrectionOfferSidebarAnnouncement.title",defaultMessage:"Work smarter"},bodyPlus:{id:"resurrectionOfferSidebarAnnouncement.bodyPlus",defaultMessage:"Unlimited content, charts and more. Get Plus at 50% off for 3 months."},bodyBusiness:{id:"resurrectionOfferSidebarAnnouncement.bodyBusiness",defaultMessage:"Notion AI, premium integrations, and more. Get Business at 25% off for 3 months."},cta:{id:"resurrectionOfferSidebarAnnouncement.upgradeAction",defaultMessage:"Redeem now"}});function Me({entrypoint:e}){const t=(0,l().v3)(),o=(0,u().tz)(),i=(0,ye().L)(),a=(0,Se()._3)({spaceId:null==i?void 0:i.id}),r="business_resurrection_offer_sidebar"===e,s=r?"business":"plus",c=r?"business_resurrection_offer":"resurrection_offer",d=r?ke.bodyBusiness:ke.bodyPlus;(0,he().w)((()=>{(0,be().u)({environment:t,event:{eventName:"offer_viewed",eventProperties:{offer_campaign:c,entrypoint:e}}})}));const p=(0,n.useCallback)((()=>{(0,we().F)({environment:t,spaceStore:i,billingData:a,product:s,from:e,offer:(0,xe().Pz)(c)}),m().a(t,e)}),[t,i,a,s,e,c]);return(0,f.jsx)(g().Y,{messageKey:e,title:o.formatMessage(ke.title),body:o.formatMessage(d),imageSources:{light:j().A.images.pricing.light.rocketPng,dark:j().A.images.pricing.dark.rocketPng},buttons:[{text:o.formatMessage(ke.cta),onClick:p,rightIcon:_e().arrowStraightRightFillIcon}]})}o(944114);var Ie=()=>o(782215),Ce=()=>o(832895);function Ae(e){const{message:t}=e,o=(0,l().v3)(),i=(0,n.useCallback)((()=>{t.props.buttonLink?window.open(t.props.buttonLink):t.props.action&&(0,Ie().Wq)({action:t.props.action,environment:o,metadata:t.props.metadata})}),[t,o]),a=[];if(t.props.buttonText){const e=t.props.buttonColor;a.push({text:t.props.buttonText,rightIcon:_e().arrowStraightRightFillIcon,onClick:i,colorPalette:e,colorVariant:"gray"!==e&&e?"accentPrimary":"primary"})}const r=t.props.imageSize??"default",s="small"===r?40:"tall"===r?120:56;return(0,f.jsx)(Ce().Ue,{children:(0,f.jsx)(G().g,{message:t,title:t.props.title,body:t.props.body,buttons:a,imageSources:t.props.imageUrl?{light:t.props.imageUrl,dark:t.props.imageUrlDarkMode??t.props.imageUrl}:void 0,imageHeight:s})})}var Te=()=>o(680209),je=()=>o(944584),Pe=()=>o(72234),De=()=>o(812182),Be=()=>o(229508),Re=()=>o(869562),Ne=()=>o(244828);const Ee=(0,u().YK)({title:{id:"slipperySlopeSidebarAnnouncement.title",defaultMessage:"Preview a new sidebar"},body:{id:"slipperySlopeSidebarAnnouncement.body",defaultMessage:"Keep your pages, meetings, and AI within reach."},buttonText:{id:"slipperySlopeSidebarAnnouncement.buttonText",defaultMessage:"Try it now"},toastDisableInstructions:{id:"slipperySlopeSidebarAnnouncement.toastDisableInstructions",defaultMessage:"Disable the sidebar preview anytime in your Workspace General settings."}});function Oe(){const e=(0,l().v3)(),t=(0,u().tz)(),o=(0,Be().a)(),a=(0,i().O$)(q().sidebarWidthStore),r=(0,n.useCallback)((()=>{if(!o)return;const n=Math.max(a,320);je().trackSlipperySlopePreferenceToggled({environment:e,slipperySlopeEnabled:!0,from:"callout"}),window.setTimeout((()=>{q().sidebarHoverPreviewDisabledStore.setState(!0),q().sidebarOpenStore.setState(!1),Re().close(),Re().setExpand({environment:e,isExpanded:!1,from:"SlipperySlopeEnableSettingsSidebarAnnouncement",saveDetailsSidebarPreference:!1}),Ne().createAndCommit({environment:e,userAction:"SlipperySlopeEnableSettingsSidebarAnnouncement.enableSlipperySlope",canUndo:!0,perform:e=>{Pe().AG(o,e,{slippery_slope_is_enabled:!0})}}),window.setTimeout((()=>{q().sidebarWidthStore.state<n&&Re().setWidth({width:n,environment:e}),Re().setExpand({environment:e,isExpanded:!0,from:"SlipperySlopeEnableSettingsSidebarAnnouncement",saveDetailsSidebarPreference:!0}),window.setTimeout((()=>{De().Iz({id:"slippery_slope_disable_instructions_toast",message:t.formatMessage(Ee.toastDisableInstructions),presentationType:"transient"})}),800),m().a(e,"slippery_slope_enable_settings_callout"),window.setTimeout((()=>{q().sidebarHoverPreviewDisabledStore.setState(!1)}),800)}),800)}),200)}),[e,t,o,a]);return(0,f.jsx)(g().Y,{messageKey:"slippery_slope_enable_settings_callout",title:t.formatMessage(Ee.title),body:t.formatMessage(Ee.body),icon:Te().R,iconColor:"blue",buttons:[{text:t.formatMessage(Ee.buttonText),onClick:r,variant:"outline-fill"}]})}const Ve=(0,u().YK)({title:{defaultMessage:"Startups get up to 6 months free of Plus and AI",id:"callouts.startupSidebarCallout.title"},body:{defaultMessage:"Get access to premium features and add unlimited members in your student org workspace.",id:"callouts.startupSidebarCallout.body"},cta:{defaultMessage:"Apply now",id:"callouts.startupSidebarCallout.cta"}});function Le(){const{navigate:e}=(0,n.useContext)(s().E),t=(0,u().tz)(),o=(0,l().v3)(),i=(0,n.useCallback)((()=>{e({environment:o,url:B().JZ.startupsApplication,openInNew:"tab"})}),[o,e]);return(0,f.jsx)(g().Y,{messageKey:"startup_sidebar_footer",title:t.formatMessage(Ve.title),body:t.formatMessage(Ve.body),buttons:[{text:t.formatMessage(Ve.cta),rightIcon:_e().arrowStraightRightFillIcon,onClick:i}]})}var Fe=()=>o(314529);var Ue=()=>o(680074),ze=()=>o(680977);const We=(0,u().YK)({title:{defaultMessage:"Student orgs get our free Plus plan here",id:"sidebar.studentPlanPrompt.title"},body:{defaultMessage:"Get access to premium features and add unlimited members in your student org workspace.",id:"sidebar.studentPlanPrompt.body"},cta:{defaultMessage:"Apply now",id:"sidebar.studentPlanPrompt.cta"}});function Ke(){const{navigate:e}=(0,n.useContext)(s().E),t=(0,u().tz)(),o=(0,l().v3)(),i=(0,n.useCallback)((()=>{!function(e){(0,Fe().DO_NOT_USE_trackLegacy)(e,"click_sidebar_student_org_promo")}(o),e({environment:o,url:B().JZ.studentGroupSignup,openInNew:"tab"})}),[o,e]),a=(0,n.useCallback)((()=>{!function(e){const t=(0,Ue().R$)(e);t&&Ne().createAndCommit({environment:e,userAction:"userSettingsActions.setDismissStudentOrgPrompt",canUndo:!0,cellTarget:"main",perform:e=>{(0,ze().m)({userSettingsStore:t,transaction:e,data:{dismissed_sidebar_student_org_prompt:!0}})}})}(o)}),[o]);return(0,f.jsx)(g().Y,{messageKey:"student_org_prompt",title:t.formatMessage(We.title),body:t.formatMessage(We.body),buttons:[{text:t.formatMessage(We.cta),rightIcon:_e().arrowStraightRightFillIcon,onClick:i}],onDismiss:a})}var He=()=>o(940563),Ye=()=>o(802149),qe=()=>o(477293),Ge=()=>o(215152);const $e=(0,u().YK)({titleV1:{id:"try_notion_for_work_sidebar_callout_revamped.v1.title",defaultMessage:"Keep work and personal life separate"},contentV1:{id:"try_notion_for_work_sidebar_callout_revamped.v1.content",defaultMessage:"Add your work email to create a space just for work. Switch accounts anytime."},titleV2:{id:"try_notion_for_work_sidebar_callout_revamped.v2.title",defaultMessage:"Using Notion for work is easy"},contentV2:{id:"try_notion_for_work_sidebar_callout_revamped.v2.content",defaultMessage:"Add your work email to create a space just for work. Switch accounts anytime."},titleV3:{id:"try_notion_for_work_sidebar_callout_revamped.v3.title",defaultMessage:"Try a workspace made for work"},contentV3:{id:"try_notion_for_work_sidebar_callout_revamped.v3.content",defaultMessage:"Add your work email to unlock a space with project and meeting tools."},cta:{id:"try_notion_for_work_sidebar_callout_revamped.cta",defaultMessage:"Add your work account"}});function Xe(){const e=(0,l().v3)(),t=(0,u().tz)(),o=(0,qe().r)("b2c2b_sidebar_callout_flow"),i=(0,n.useMemo)((()=>{switch(o){case"copy1":return t.formatMessage($e.titleV1);case"copy2":return t.formatMessage($e.titleV2);case"copy3":return t.formatMessage($e.titleV3);default:return P().log({data:{miscDataToConvertToString:{message:"Control group should not be shown"}},from:"TryNotionForWorkSidebarCallout",level:"error",type:"renderCalloutTitle"}),""}}),[o,t]),a=(0,n.useMemo)((()=>{switch(o){case"copy1":return t.formatMessage($e.contentV1);case"copy2":return t.formatMessage($e.contentV2);case"copy3":return t.formatMessage($e.contentV3);default:return P().log({data:{miscDataToConvertToString:{message:"Control group should not be shown"}},from:"TryNotionForWorkSidebarCallout",level:"error",type:"renderCalloutContent"}),""}}),[o,t]),r=(0,n.useCallback)((()=>{(0,Ye().P1)("notion_for_work"),Ge().B.setState({open:!0,isTryNotionForWork:!0}),m().a(e,"try_notion_for_work_sidebar_callout_revamped")}),[e]);return(0,f.jsx)(g().Y,{messageKey:"try_notion_for_work_sidebar_callout_revamped",imageSources:{light:j().A.images.sidebar.menLyingDownReadingPng,dark:j().A.images.sidebar.menLyingDownReadingDarkModePng},imageHeight:40,imageMarginLeft:8,imageMarginTop:4,title:i,body:a,buttons:[{text:t.formatMessage($e.cta),onClick:r,rightIcon:()=>(0,f.jsx)(c().I,{icon:He().arrowStraightRightIcon,size:"xs",colorVariant:"primary"})}]})}var Ze=()=>o(131448),Je=()=>o(97835),Qe=()=>o(134696),et=()=>o(347930),tt=()=>o(397103),ot=()=>o(317025),nt=()=>o(478873),it=()=>o(346527);const at=(0,u().YK)({title:{defaultMessage:"Invite members",id:"inviteMembersNudge.message"},body:{defaultMessage:"Collaborate with your team.",id:"inviteMembersNudge.body"}});function rt({permissionsInviteStore:e}){const t=(0,u().tz)(),o=(0,l().v3)(),a=(0,ye().L)(),r=(0,tt().h)(a),{canShowInviteMembers:s,canRequestMembers:c}=(0,i().K8)((()=>(0,nt().Y)(a)),[a]),d=(0,n.useCallback)((()=>{a&&s&&e&&(a.canEditMembership()&&(null==e||e.setState({...e.state,modalOpen:!0}),Qe().vX(o,{type:"invite",from:"sidebar_footer"})),c&&(it().A.open(),Qe().vX(o,{type:"request",from:"sidebar_footer"})))}),[o,c,a,e,s]);return(0,f.jsxs)(f.Fragment,{children:[(0,f.jsx)(g().Y,{messageKey:"invite_members_sidebar_callout",icon:Je().inviteMemberIcon,title:t.formatMessage(at.title),body:t.formatMessage(at.body),onClick:d}),a&&e&&r?(0,f.jsx)(et().H,{targetStore:a,spaceStore:a,permissionsInviteStore:e,membersOnly:!0,shouldGrow:!1,disabled:!1,isSubscribed:!1,origin:(0,f.jsx)("div",{}),upgradeButtonName:"space_permission_settings",analyticsFrom:"sidebar_footer_invite_button",onInviteClick:ot().$D,onInviteComplete:ot().c3}):void 0]})}var st=()=>o(686832),lt=()=>o(985867);const ct=(0,u().YK)({title:{id:"setup_sessions_instant_booking_callout.title",defaultMessage:"Need help with Notion?"},body:{id:"setup_sessions_instant_booking_callout.body",defaultMessage:"Talk to a live Notion expert for free."},cta:{id:"setup_sessions_instant_booking_callout.cta",defaultMessage:"Chat now"}});function dt(){const e=(0,u().tz)(),t=(0,n.useCallback)((()=>{lt().w({utm_source:"setup_sessions_instant_booking",utm_campaign:"setup_sessions_instant_booking_callout"})}),[]);return(0,f.jsx)(g().Y,{messageKey:"setup_sessions_instant_booking",title:e.formatMessage(ct.title),body:e.formatMessage(ct.body),icon:st().phoneIcon,buttons:[{text:e.formatMessage(ct.cta),onClick:t,rightIcon:_e().arrowStraightRightFillIcon}]})}var ut=()=>o(12314),pt=()=>o(79926);const mt={WorkspaceDiscoverySidebarCallout:new(pt().O2)("WorkspaceDiscoverySidebarCallout",(async()=>o.e(48792).then(o.bind(o,424547))))},gt=(0,pt()._h)(mt.WorkspaceDiscoverySidebarCallout,(e=>e.WorkspaceDiscoverySidebarCallout));var ft=()=>o(359713),vt=()=>o(209660),bt=()=>o(698415);const yt=(0,u().YK)({title:{id:"collaboration_callout.title",defaultMessage:"Find friends to collaborate with"},body:{id:"collaboration_callout.body",defaultMessage:"Import your contacts to start collaborating with your friends."},cta:{id:"collaboration_callout.ctaImportContacts",defaultMessage:"Import contacts"}});function ht(){const e=(0,u().tz)(),t=(0,n.useCallback)((()=>{vt().Ow({currentTab:"members",subtab:"members"}),bt().F.openImportDropdown({shouldAddMembers:!1})}),[]);return(0,f.jsx)(g().Y,{messageKey:"collaboration_callout",title:e.formatMessage(yt.title),body:e.formatMessage(yt.body),icon:ft().personCropCircleBadgePlusIcon,buttons:[{text:e.formatMessage(yt.cta),onClick:t,rightIcon:_e().arrowStraightRightFillIcon}]})}var St=()=>o(920495),_t=()=>o(755362),xt=()=>o(1130);const wt=(0,u().YK)({title:{id:"sidebar.createPagePanel.title",defaultMessage:"Create a new page"},body:{id:"sidebar.createPagePanel.description",defaultMessage:"Start from scratch with a blank page."},cta:{id:"sidebar.createPagePanel.button",defaultMessage:"New page"}});function kt(){const e=(0,l().v3)(),t=(0,u().tz)(),o=(0,n.useCallback)((async()=>{await async function(e){const{environment:t,panelType:o}=e;(0,_t().e)(t,{panel_type:o,action_type:"create"}),await xt().startOnboarding(t,{type:"create-or-join",source:"public_share_link"})}({environment:e,panelType:"create_page"})}),[e]);return(0,f.jsx)(g().Y,{messageKey:"anyone_with_the_link_sidebar_callout",title:t.formatMessage(wt.title),body:t.formatMessage(wt.body),icon:St().pageIcon,buttons:[{text:t.formatMessage(wt.cta),onClick:o,rightIcon:_e().arrowStraightRightFillIcon}]})}var Mt=()=>o(300474),It=()=>o(755531),Ct=()=>o(604995),At=()=>o(529099),Tt=()=>o(209969),jt=()=>o(51367),Pt=()=>o(991249),Dt=()=>o(382302),Bt=()=>o(807778),Rt=()=>o(528093),Nt=()=>o(270812),Et=()=>o(450930);function Ot(e){const t=(0,l().v3)(),o=(0,u().tz)(),a=t.currentUser.id,r=(0,i().K8)((()=>(0,Bt().up)()),[]),s=(0,Mt().r)(),d=(0,Rt()._)({name:"ai_usage",spaceId:s,userId:a,amount:1}),{canUserRequestUpgrade:p,openModal:v,userHasPendingRequest:b}=(0,Nt().E)({type:"feature",featureAvailability:d,entrypoint:"ai_limit_nudge_sidebar",analyticsEntrypoint:"ai_limit_nudge_sidebar",isOptimisticUpsell:!1});if((0,n.useEffect)((()=>{jt().DL(t,{callout_key:"ai_limit_nudge",placement_key:"SidebarFooter"})}),[t]),!a)return null;const y=r&&p,h=r&&b;if("settings"===e.source)return null;if(void 0===d||"unlimited"===d.limit.total||!d.upsell)return null;const S=d.upsell,_=Number(d.limit.current/d.limit.total);if(_<Dt()._)return null;const x=_>=Dt().G?"limit_reached":"warning",w=function(e,t){return"warning"===e?t.formatMessage({id:"addOnLimitUsage.approachingAiLimitDescription",defaultMessage:"You're actively using AI. Upgrade to get to ideas and answers, faster"}):t.formatMessage({id:"addOnLimitUsage.reachedAiLimitDescription",defaultMessage:"You're out of free responses"})}(x,o),k=function(e){return e?(0,f.jsx)(u().sA,{id:"addOnLimitUsage.requestedAiLimitTooltip",defaultMessage:"You’ve already requested Notion AI to your workspace owner."}):null}(h),M=o.formatMessage({id:"spaceSettings.sidebar.addOnUpgradeLink",defaultMessage:"Notion AI"}),I=function(e,t,o,n){if(n)return t.formatMessage({id:"addOnLimitUsage.hasAlreadyRequested",defaultMessage:"Requested"});if(o)return t.formatMessage({id:"addOnLimitUsage.requestAiCta",defaultMessage:"Request Notion AI"});return"warning"===e?t.formatMessage({id:"addOnLimitUsage.approachingLimitCta",defaultMessage:"Unlock Notion AI"}):t.formatMessage({id:"addOnLimitUsage.reachedLimitCta",defaultMessage:"Upgrade now"})}(x,o,y,h);return(0,f.jsx)(g().Y,{messageKey:"ai_limit_nudge",title:M,body:(0,f.jsxs)(f.Fragment,{children:[w,k?(0,f.jsx)(Et().B,{tooltipMessage:k,tooltipWidth:"250px"}):null]}),icon:At().aiFaceIcon,onDismiss:()=>function(e,t,o){var n;const{currentUserSettingsStore:i}=L().default.state;if(!i)return;const a={addOnLimitNotifications:Vt(t,o,null===(n=i.getSettings())||void 0===n?void 0:n.addOnLimitNotifications)};Ne().createAndCommit({userAction:"addOnLimitNotifications.ai.markNotificationAsDismissed",environment:e,canUndo:!0,perform:e=>{(0,ze().m)({transaction:e,userSettingsStore:i,data:a})}}),m().a(e,"ai_limit_nudge"),jt().Sq(e,{callout_key:"ai_limit_nudge",dismiss_type:"sidebar_dismiss",placement_key:"SidebarFooter"})}(t,e.source,x),buttons:[{text:I,onClick:()=>function(e,t,o,n,i){o?i():Pt().K(e,{from:"sidebar"===t?"ai_limit_sidebar":"ai_limit_settings",upsell:n,spaceStore:(0,It().S)()});jt().Y5(e,{callout_key:"ai_limit_nudge",click_type:"primary_cta",placement_key:"SidebarFooter"})}(t,e.source,y,S,v),rightIcon:h?void 0:_e().arrowStraightRightFillIcon,leftIcon:h?()=>(0,f.jsx)(c().I,{icon:Tt().checkmarkCircleFillIcon,size:"sm",colorVariant:"tertiary"}):void 0,disabled:h}]})}function Vt(e,t,o){if(o){if("warning"===t){if("settings"===e)return{disableWarningNotificationInSettings:!0,disableWarningNotificationInSidebar:o.disableWarningNotificationInSidebar,disableLimitNotificationInSettings:o.disableLimitNotificationInSettings,disableLimitNotificationInSidebar:o.disableLimitNotificationInSidebar,expirationDate:o.expirationDate};if("sidebar"===e)return{disableWarningNotificationInSettings:o.disableWarningNotificationInSettings,disableWarningNotificationInSidebar:!0,disableLimitNotificationInSettings:o.disableLimitNotificationInSettings,disableLimitNotificationInSidebar:o.disableLimitNotificationInSidebar,expirationDate:o.expirationDate}}if("limit_reached"===t){if("settings"===e)return{disableWarningNotificationInSettings:o.disableWarningNotificationInSettings,disableWarningNotificationInSidebar:o.disableWarningNotificationInSidebar,disableLimitNotificationInSettings:!0,disableLimitNotificationInSidebar:o.disableLimitNotificationInSidebar,expirationDate:o.expirationDate};if("sidebar"===e)return{disableWarningNotificationInSettings:o.disableWarningNotificationInSettings,disableWarningNotificationInSidebar:o.disableWarningNotificationInSidebar,disableLimitNotificationInSettings:o.disableLimitNotificationInSettings,disableLimitNotificationInSidebar:!0,expirationDate:o.expirationDate}}}return{disableWarningNotificationInSettings:"warning"===t&&"settings"===e,disableWarningNotificationInSidebar:"warning"===t&&"sidebar"===e,disableLimitNotificationInSettings:"limit_reached"===t&&"settings"===e,disableLimitNotificationInSidebar:"limit_reached"===t&&"sidebar"===e,expirationDate:(0,Ct().K1)({date:Date.now(),daysToAdd:7})}}var Lt=()=>o(349944),Ft=()=>o(983610),Ut=()=>o(26697),zt=()=>o(25729),Wt=()=>o(725340);function Kt(e){return(0,f.jsx)(Ce().Ue,{children:(0,f.jsx)(Ce().wY,{...e})})}var Ht=()=>o(577914),Yt=()=>o(265060),qt=()=>o(406094),Gt=()=>o(78901);function $t(e){const{title:t,description:o,cta:n,onClick:i,onDismiss:a,icon:r,iconStyle:s,progressFilledColor:l,progressPercent:c,isButtonDisabled:d,iconGroup:u,iconColorPalette:p,iconColorVariant:m}=e,g=(0,x().IS)((()=>({button:{width:"100%",border:`1px solid ${R().Tj.border.primary}`,borderRadius:6},buttonContainer:{width:"100%"},cardContainer:{display:"flex",flexDirection:"column",alignItems:"flex-start",paddingTop:12,paddingInlineEnd:14,paddingBottom:20,paddingInlineStart:14,gap:8,borderTop:`1px solid ${R().Tj.state.hover}`},contentWrapper:{display:"flex",padding:"0px 6px",flexDirection:"column",alignItems:"flex-start",gap:12,width:"100%"},cta:{textDecoration:"underline"},dismissButton:{position:"relative",top:0,insetInlineEnd:0,insetInlineStart:4,background:"none"},filledBar:{color:R().Tj.icon.tertiary},icon:{width:16,color:R().Tj.icon.secondary},unfilledBar:{color:R().Tj.background.tertiaryTranslucent}})),[]),v=void 0!==c;return(0,f.jsxs)("div",{style:g.cardContainer,children:[(0,f.jsxs)(M().Y1,{direction:"horizontal",gap:"auto",align:"center",padding:"0px 0px 0px 2px",children:[r?r({...g.icon,...s}):null,u?(0,f.jsx)(Yt().Q,{iconGroup:u,variantName:"default",size:"lg",colorPalette:p,colorVariant:m}):null,void 0!==a?(0,f.jsx)(Ht().R,{onClick:a,style:g.dismissButton}):void 0]}),(0,f.jsxs)("div",{style:g.contentWrapper,children:[(0,f.jsxs)(M().Y1,{gap:v?8:4,children:[(0,f.jsx)(A().D,{styleKey:"bodyMedium",colorVariant:"primary",children:t}),v?(0,f.jsx)(Gt().z,{percentage:100*c,height:6,filledColor:l??g.filledBar.color,unfilledColor:g.unfilledBar.color}):void 0,(0,f.jsx)(A().D,{styleKey:"captionRegular",colorVariant:"secondary",children:o})]}),(0,f.jsx)("div",{style:g.buttonContainer,children:(0,f.jsx)(qt().A,{size:"lg",onClick:i,disabled:d,disabledFeedback:d,style:g.button,children:(0,f.jsx)(A().D,{styleKey:"bodySmMedium",colorVariant:"primary",children:n})})})]})]})}var Xt=()=>o(647621),Zt=()=>o(134217),Jt=()=>o(664594),Qt=()=>o(408895);function eo(e){const{spaceId:t}=e,o=(0,l().v3)(),n=(0,Jt().T)();return(0,i().K8)((()=>{if(!t||!n)return;const e=(0,Qt().M)({spaceId:t,userId:n,enforceIdsCheck:!1,debugFrom:"useBlockUsageDataUsageAndPercentageForSidebarSpace"});return e?{blockUsage:Zt().hr(o,e,t),percentageUsed:Zt().Bl(o,e,t)}:void 0}),[o,t,n])}function to(e){const{spaceId:t}=e,o=(0,l().v3)(),n=(0,Jt().T)();return(0,i().K8)((()=>{if(!t||!n)return!1;const e=(0,Qt().M)({spaceId:t,userId:n,enforceIdsCheck:!1,debugFrom:"useCanShowBlockLimitUpsell"});return!!e&&Zt().z8(o,e,t)}),[o,t,n])}var oo=()=>o(408543);function no(e){const{spaceStore:t}=e,o=(0,l().v3)(),a=(0,u().tz)(),r=(0,x().IS)((()=>({tooltip:{width:"210px"}})),[]),s=(0,i().K8)((()=>(0,Lt().K)(o)),[o]),c=(0,i().K8)((()=>null==t?void 0:t.id),[t]),d=to({spaceId:c}),p=(0,i().K8)((()=>Zt().qc(Ft().subscriptionDataStoreInstance.state)),[]),m=eo({spaceId:c});(0,n.useEffect)((()=>{jt().DL(o,{callout_key:"block_limit_nudge",placement_key:"SidebarFooter"})}),[o]);const{handleClick:g}=(0,oo().C)({upsell:{type:"product",product:"plus",limit:{type:"none"},trialability:"none"},source:"block_limit_sidebar",spaceStore:t}),v=(0,n.useCallback)((()=>{p?(g(),jt().Y5(o,{callout_key:"block_limit_nudge",variant:"approaching_block_limit",click_type:"primary_cta",placement_key:"SidebarFooter"})):vt().Ow({currentTab:"members"})}),[o,p,g]),b=p?a.formatMessage(Xt().XZ.reachedBlockLimitCta):a.formatMessage(Xt().XZ.reachedBlockLimitCtaForMembers);return d?s?(0,f.jsx)(Ut().m,{placement:"right",style:r.tooltip,render:e=>(0,f.jsx)("span",{...e,children:(0,f.jsx)(Kt,{title:a.formatMessage(Xt().xc.approachingBlockLimitTitle),body:a.formatMessage(Xt().xc.approachingBlockLimitDescription),icon:Wt().blockLimitIcon,iconColor:"yellow",buttons:[{text:b,rightIcon:_e().arrowStraightRightFillIcon,onClick:v}]})}),renderTooltip:()=>a.formatMessage(Xt().xc.approachingBlockLimitTooltip),textWrap:!0}):(0,f.jsx)($t,{title:a.formatMessage(Xt().XZ.approachingBlockLimitTitle),description:(0,f.jsxs)(f.Fragment,{children:[a.formatMessage(Xt().XZ.approachingBlockLimitDescription),(0,f.jsx)(Et().B,{tooltipMessage:a.formatMessage(Xt().XZ.approachingBlockLimitTooltip,{percentageUsed:(0,f.jsx)(u().Gr,{value:m.percentageUsed,style:"percent",maximumSignificantDigits:2,maximumFractionDigits:0})})})]}),cta:p?(0,f.jsx)(u().sA,{id:"spaceSettings.sidebar.button.upgrade",defaultMessage:"Upgrade plan"}):(0,f.jsx)(u().sA,{id:"spaceSettings.sidebar.button.contactWorkspaceOwner",defaultMessage:"Contact a workspace owner"}),iconGroup:zt().k,iconColorPalette:"blue",iconColorVariant:"tertiary",onClick:v}):null}var io=()=>o(574359);function ao(){const e=(0,l().v3)(),t=(0,ye().L)(),o=(0,u().tz)(),a=(0,x().IS)((()=>({tooltip:{width:"210px"},tooltipDescription:{color:R().Tj.text.inverseSecondary}})),[]),r=(0,i().K8)((()=>t&&(0,io().G)(e,t)),[e,t]),s=(0,i().K8)((()=>(0,Lt().K)(e)),[e]),c=(0,i().K8)((()=>(0,Bt().Mh)(e)),[e]),d=(0,i().K8)((()=>(0,Bt().PK)()),[]),p=(0,i().K8)((()=>Zt().qc(Ft().subscriptionDataStoreInstance.state)),[]),m=c&&d>0,{handleClick:g}=(0,oo().C)({upsell:{type:"product",product:"plus",limit:{type:"none"},trialability:"none"},source:"block_limit_sidebar",spaceStore:t}),v=(0,n.useCallback)((()=>{p&&!m?g():vt().Ow({currentTab:"members"})}),[p,m,g]);if(!r)return null;const b=p?m?o.formatMessage(Xt().XZ.manageMembersCta):o.formatMessage(Xt().XZ.reachedBlockLimitCta):o.formatMessage(Xt().XZ.reachedBlockLimitCtaForMembers);if(s){const e=m?o.formatMessage(Xt().xc.enteringGracePeriodTooltip):o.formatMessage(Xt().xc.afterGracePeriodTooltip),t=m?o.formatMessage(Xt().xc.enteringGracePeriodTooltipSubtitle):null,{notificationTitle:n,notificationDescription:i}=function(e){const{intl:t,inGracePeriod:o,remainingDays:n,spaceName:i}=e;return{notificationTitle:o?t.formatMessage(Xt().xc.enteringGracePeriodTitle,{dayCount:n}):t.formatMessage(Xt().xc.afterGracePeriodTitle),notificationDescription:o?t.formatMessage(Xt().xc.enteringGracePeriodDescription,{spaceName:i}):t.formatMessage(Xt().xc.afterGracePeriodDescription)}}({intl:o,inGracePeriod:m,remainingDays:d,spaceName:r});return(0,f.jsx)(Ut().m,{placement:"right",style:a.tooltip,render:e=>(0,f.jsx)("span",{...e,children:(0,f.jsx)(Kt,{title:n,body:i,icon:Wt().blockLimitIcon,iconColor:m?"yellow":"red",buttons:[{text:b,rightIcon:_e().arrowStraightRightFillIcon,onClick:v}]})}),renderTooltip:()=>(0,f.jsxs)(f.Fragment,{children:[e,(0,f.jsx)("div",{style:a.tooltipDescription,children:t})]}),textWrap:!0})}return(0,f.jsx)($t,{title:o.formatMessage(Xt().XZ.reachedBlockLimitTitle),description:(0,f.jsxs)(f.Fragment,{children:[o.formatMessage(Xt().XZ.reachedBlockLimitDescription,{spaceName:r}),(0,f.jsx)(Et().B,{tooltipMessage:o.formatMessage(Xt().XZ.reachedBlockLimitTooltip)})]}),cta:p?o.formatMessage(Xt().XZ.reachedBlockLimitCta):(0,f.jsx)(u().sA,{id:"spaceSettings.sidebar.button.contactWorkspaceOwner",defaultMessage:"Contact a workspace owner"}),iconGroup:zt().k,iconColorPalette:"red",iconColorVariant:"tertiary",onClick:v})}var ro=()=>o(68913),so=()=>o(569397),lo=()=>o(795523),co=()=>o(61844),uo=()=>o(979340),po=()=>o(261505),mo=()=>o(848701),go=()=>o(985315);function fo(){const e=(0,l().v3)(),t=(0,u().tz)(),o=(0,Mt().r)(),i=(0,Se()._3)({spaceId:o}),a=(0,go().g)({spaceId:o}),r=(0,co().Jd)(a),s=(0,mo().z2)({billingData:i}),d=s?vo.autoConverting:vo.notAutoConverting,p=(0,uo().u2)({product:(0,lo().AI)(i),intl:t}),g=(0,uo().u2)({product:(0,lo().AW)(i),intl:t});(0,he().w)((()=>{void 0!==v&&void 0!==b&&(0,be().u)({environment:e,event:{eventName:"trial_sidebar_alert_viewed",eventProperties:{trial_length:v,days_remaining:b}}})}));const v=null==r?void 0:r.offer.duration.days,b=(0,mo().UP)(i)??0,y=0===b?t.formatMessage(d.titleLastDay,{plan:p}):t.formatMessage(d.title,{days:b}),h=0===b?t.formatMessage(d.bodyLastDay,{plan:p}):t.formatMessage(d.body,{plan:s?p:g}),S=(0,n.useCallback)((()=>{void 0!==v&&void 0!==b&&(0,be().u)({environment:e,event:{eventName:"trial_sidebar_cta_clicked",eventProperties:{trial_length:v,days_remaining:b}}}),s?vt().Ow({openedFrom:"self_serve_business_trial_ending_soon_nudge",currentTab:"plans"}):(0,po().openBusinessTrialEndingModal)({openedFrom:"self_serve_business_trial_ending_soon_nudge"})}),[b,e,s,v]),_=(0,n.useCallback)((()=>{(0,be().u)({environment:e,event:{eventName:"trial_sidebar_alert_dismissed",eventProperties:{trial_length:v,days_remaining:b}}}),(0,m().a)(e,"business_trial_ending_soon")}),[b,e,v]);return(0,f.jsx)(Kt,{iconColor:"orange",icon:ro().alarmIcon,body:h,title:y,onDismiss:s?_:void 0,buttons:[{text:t.formatMessage(d.cta,{plan:p}),rightIcon:()=>(0,f.jsx)(c().I,{icon:so().arrowStraightRightSmallIcon,size:"xs",colorVariant:"primary"}),onClick:S}]})}const vo={notAutoConverting:(0,u().YK)({title:{id:"selfServeBusinessTrialEndingSoonNudge.title",defaultMessage:"{days, plural, one {# day} other {# days}} left in your free Business trial"},titleLastDay:{id:"selfServeBusinessTrialEndingSoonNudge.titleLastDay",defaultMessage:"Today is the last day of your {plan} trial"},body:{id:"selfServeBusinessTrialEndingSoonNudge.body",defaultMessage:"If you choose not to upgrade, you’ll be on a {plan} plan with limited usage of Notion"},bodyLastDay:{id:"selfServeBusinessTrialEndingSoonNudge.bodyLastDay",defaultMessage:"If you choose not to upgrade, you’ll be on a {plan} plan with limited usage of Notion"},cta:{id:"selfServeBusinessTrialEndingSoonNudge.cta",defaultMessage:"Keep using {plan}"}}),autoConverting:(0,u().YK)({title:{id:"selfServeBusinessTrialEndingSoonNudge.title",defaultMessage:"{days, plural, one {# day} other {# days}} left in your free Business trial"},titleLastDay:{id:"selfServeBusinessTrialEndingSoonNudge.titleLastDay",defaultMessage:"Today is the last day of your {plan} trial"},body:{id:"selfServeBusinessTrialEndingSoonNudge.hasPaymentMethod.body",defaultMessage:"Your workspace will be automatically upgraded to {plan} at the end of the trial. If you’d like to make changes, visit our plans page"},bodyLastDay:{id:"selfServeBusinessTrialEndingSoonNudge.hasPaymentMethod.bodyLastDay",defaultMessage:"You’ll be automatically on the {plan} plan when your trial ends. If you’d like to make changes, visit our plans page"},cta:{id:"selfServeBusinessTrialEndingSoonNudge.hasPaymentMethod.cta",defaultMessage:"Manage plan"}})};var bo=()=>o(82327),yo=()=>o(939453),ho=()=>o(584262),So=()=>o(536095),_o=()=>o(579975),xo=()=>o(90244),wo=()=>o(257545),ko=()=>o(818541),Mo=()=>o(115240),Io=()=>o(546703),Co=()=>o(38679),Ao=()=>o(35588),To=()=>o(173614),jo=()=>o(821983),Po=()=>o(471095),Do=()=>o(229833),Bo=()=>o(939768),Ro=()=>o(222299),No=()=>o(295173),Eo=()=>o(854513),Oo=()=>o(465960),Vo=()=>o(46986),Lo=()=>o(144825),Fo=()=>o(30858),Uo=(o(803949),o(581454),o(440961)),zo=()=>o(416504),Wo=()=>o(911676),Ko=()=>o(798880),Ho=()=>o(44729),Yo=()=>o(384944),qo=()=>o(185544),Go=()=>o(215721),$o=()=>o(349851);const Xo=90;function Zo(){const e=(0,u().tz)(),t=(0,l().v3)(),o=(0,Jt().T)();return(0,n.useCallback)((({spaceStore:n,spaceViewStore:i})=>{const{performResult:a}=Ne().createAndCommit({userAction:"selfServeBusinessTrialsExplorePlanModal.createTestVerifiedPage",environment:t,canUndo:!0,perform:o=>{const a=qo().IT({environment:t,spaceStore:n,spaceViewStore:i,parent:"private",prepend:!0,transaction:o,title:e.formatMessage({id:"selfServeBusinessTrialsExplorePlanModal.testVerifiedPageTitle",defaultMessage:"Try out Page Verification"})}),r=function(e){return[{type:"text",format:{block_color:"gray"},title:e.formatMessage({id:"testVerifiedPage.title",defaultMessage:"👋 This page was created for you to explore Notion’s Page Verification feature."})},{type:"sub_sub_header",title:e.formatMessage({id:"testVerifiedPage.pageVerificationDescription.header",defaultMessage:"What’s Page Verification?"})},{type:"text",title:e.formatMessage({id:"testVerifiedPage.pageVerificationDescription.text",defaultMessage:"Page Verification helps your team identify trusted, up-to-date information by adding a “verified” badge to important pages. This badge is visible in mentions, search, and Q&A, making verified content easy to spot. Admins can track verified pages in Settings for better oversight and compliance⁠⁠. We’ve marked this page as ‘verified’ so that you can see what it would look like."})},{type:"sub_sub_header",title:e.formatMessage({id:"testVerifiedPage.howItWorks.header",defaultMessage:"How does it work?"})},{type:"numbered_list",title:e.formatMessage({id:"testVerifiedPage.howItWorks.step1",defaultMessage:"Open a page for which you have {canEdit} access or {fullAccess}."},{canEdit:(0,f.jsx)("code",{children:(0,f.jsx)(u().sA,{id:"testVerifiedPage.howItWorks.step1.canEditCode",defaultMessage:"Can edit"})}),fullAccess:(0,f.jsx)("code",{children:(0,f.jsx)(u().sA,{id:"testVerifiedPage.howItWorks.step1.fullAccess",defaultMessage:"Full access"})})})},{type:"numbered_list",title:e.formatMessage({id:"testVerifiedPage.howItWorks.step2",defaultMessage:"Hover over the page name."})},{type:"numbered_list",title:e.formatMessage({id:"testVerifiedPage.howItWorks.step3",defaultMessage:"Select {verify}."},{verify:(0,f.jsx)("code",{children:(0,f.jsx)(u().sA,{id:"testVerifiedPage.howItWorks.step3.verify",defaultMessage:"Verify"})})})},{type:"numbered_list",title:e.formatMessage({id:"testVerifiedPage.howItWorks.step4",defaultMessage:"Choose whether you want to verify the page until a specific time or indefinitely."})},{type:"numbered_list",title:e.formatMessage({id:"testVerifiedPage.howItWorks.step5",defaultMessage:"A blue verification icon will appear next to the page name across your workspace."})},{type:"numbered_list",title:e.formatMessage({id:"testVerifiedPage.howItWorks.step6",defaultMessage:"Workspace members will be able to see verified pages in {settings} > {verifiedPages}."},{settings:(0,f.jsx)("code",{children:(0,f.jsx)(u().sA,{id:"testVerifiedPage.howItWorks.step6.settings",defaultMessage:"Settings"})}),verifiedPages:(0,f.jsx)("code",{children:(0,f.jsx)(u().sA,{id:"testVerifiedPage.howItWorks.step6.verifiedPages",defaultMessage:"Verified pages"})})})},{type:"text",title:""},{type:"text",format:{block_color:"gray"},title:e.formatMessage({id:"testVerifiedPage.learnMore",defaultMessage:"👉 You can learn more about verification in the {link}."},{link:(0,f.jsx)("a",{href:"https://www.notion.com/help/wikis-and-verified-pages#:~:text=verify%20the%20page.-,Verify%20individual%20pages%20in%20your%20workspace,-Note%3A%20This",children:(0,f.jsx)(u().sA,{id:"testVerifiedPage.learnMore.link",defaultMessage:"Help Center"})})})}]}(e).map((n=>{const i=document.createElement("div");"string"==typeof n.title?i.setHTMLUnsafe(n.title):i.setHTMLUnsafe(n.title.map((t=>{if("string"==typeof t)return t;const o=document.createElement("div");return Uo.render((0,f.jsx)(u().Dk,{locale:e.locale,children:t}),o),o.innerHTML})).join(""));const r=(0,Wo().Hw)({window,node:i,stripText:!0,stripSurroundingWhitespace:!0,emojiData:{positionalEmojiData:{},emojiByCategory:{},emojiByColorRaw:{},emojiByName:{},emojiToShortname:{}}});return Yo().Wv({environment:t,inMemoryRecordCache:a.inMemoryRecordCache,transaction:o,type:n.type,format:n.format,properties:{title:r}})}));return r.forEach((e=>{Ho().NI({parentStore:a,childStore:e,transaction:o})})),a}}),r=Ct().ah((0,zo().P)()),s={range:{start:r,end:r.plus({days:Xo})},option:`${Xo}d`},{range:l,option:c}=s;if(!o)return;const d={table:Ko().oo,id:o},p=l?Ct().C6.toPersistedDateTimeRange(l):Ct().C6.toPersistedDateTime(r.toMillis());(0,be().u)({environment:t,event:{eventName:"page_verification_edited",eventProperties:{entrypoint:"self_serve_business_trial_explore_modal",verification_type:"verified",page_type:"wiki",page_id:a.id,collection_id:a.getAssociatedCollectionId(),space_id:n.id,expiration:c}}});const m={value:[d,p],metadata:{action:"add",verification_type:"verified",entrypoint:"self_serve_business_trial_explore_modal",expiration:c,expiration_date:l?l.end.toMillis():void 0}};return Go().h({environment:t,blockStore:a,verificationValue:m.value}),(0,$o().q)({environment:t,blockStore:a,update:m}),a}),[t,e,o])}var Jo=()=>o(281303);const Qo={onboardingIntro:(0,u().YK)({title:{id:"selfServeBusinessTrialNudge.onboardingIntro.title",defaultMessage:"Welcome to Notion Business"},description:{id:"selfServeBusinessTrialNudge.onboardingIntro.description",defaultMessage:"Try our most loved team features on the Business plan, free for {days} days"},cta:{id:"selfServeBusinessTrialNudge.intro.cta",defaultMessage:"Learn more"}}),intro:(0,u().YK)({title:{id:"selfServeBusinessTrialNudge.intro.title",defaultMessage:"Get the most out of your {days} day Business trial"},description:{id:"selfServeBusinessTrialNudge.intro.description",defaultMessage:"Access Notion AI to create, ask about, and refine ideas faster — all in Notion"},cta:{id:"selfServeBusinessTrialNudge.intro.cta",defaultMessage:"Learn more"}}),inviteMembers:(0,u().YK)({title:{id:"selfServeBusinessTrialNudge.inviteMembers.title",defaultMessage:"Maximize your creation and collaboration in Notion"},description:{id:"selfServeBusinessTrialNudge.inviteMembers.description",defaultMessage:"Make sure to invite team members to get the most out of Notion Business"},cta:{id:"selfServeBusinessTrialNudge.inviteMembers.cta",defaultMessage:"Invite members"}}),connectWorkspace:(0,u().YK)({title:{id:"selfServeBusinessTrialNudge.connectWorkspace.title",defaultMessage:"Connect your workspace"},description:{id:"selfServeBusinessTrialNudge.connectWorkspace.description",defaultMessage:"Stay in Notion. Link Slack, GitHub & more to ask, create, and refine — all in one place"},cta:{id:"selfServeBusinessTrialNudge.connectWorkspace.cta",defaultMessage:"Set up now"}}),createTeamspaces:(0,u().YK)({title:{id:"selfServeBusinessTrialNudge.createTeamspaces.title",defaultMessage:"Your team, your space"},description:{id:"selfServeBusinessTrialNudge.createTeamspaces.description",defaultMessage:"Use private hubs for confidential collaboration"},cta:{id:"selfServeBusinessTrialNudge.createTeamspaces.cta",defaultMessage:"Create a teamspace"}}),verifyPages:(0,u().YK)({title:{id:"selfServeBusinessTrialNudge.verifyPages.title",defaultMessage:"Create trusted docs"},description:{id:"selfServeBusinessTrialNudge.verifyPages.description",defaultMessage:"Verify your pages and help teammates find accurate content"},cta:{id:"selfServeBusinessTrialNudge.verifyPages.cta",defaultMessage:"Try it out"}}),samlSSO:(0,u().YK)({title:{id:"selfServeBusinessTrialNudge.samlSSO.title",defaultMessage:"Streamline access and security with SAML SSO"},description:{id:"selfServeBusinessTrialNudge.samlSSO.description",defaultMessage:"Use one login across all of your tools. Verify a domain to get started"},cta:{id:"selfServeBusinessTrialNudge.samlSSO.cta",defaultMessage:"Configure now"}}),storeRecords:(0,u().YK)({title:{id:"selfServeBusinessTrialNudge.storeRecords.title",defaultMessage:"Safely store your records"},description:{id:"selfServeBusinessTrialNudge.storeRecords.description",defaultMessage:"Buy the right plan for your org - get easier exports, extended history and more on the Business plan"},cta:{id:"selfServeBusinessTrialNudge.storeRecords.cta",defaultMessage:"More on Notion Business"}}),notionAi:(0,u().YK)({title:{id:"selfServeBusinessTrialNudge.notionAi.title",defaultMessage:"Chat with Notion AI"},description:{id:"selfServeBusinessTrialNudge.notionAi.description",defaultMessage:"Search, draft, or just ask for help - use AI to do what you wanted to, faster"},cta:{id:"selfServeBusinessTrialNudge.notionAi.cta",defaultMessage:"Try Notion AI"}}),aiMeetingNotes:(0,u().YK)({title:{id:"selfServeBusinessTrialNudge.aiMeetingNotes.title",defaultMessage:"Try AI Meeting Notes"},description:{id:"selfServeBusinessTrialNudge.aiMeetingNotes.description",defaultMessage:"Full transcription plus smart summaries and action items for instant follow‑through"},cta:{id:"selfServeBusinessTrialNudge.aiMeetingNotes.cta",defaultMessage:"Try Meeting Notes"}}),aiSearch:(0,u().YK)({title:{id:"selfServeBusinessTrialNudge.aiSearch.title",defaultMessage:"Use Notion AI to search across apps"},description:{id:"selfServeBusinessTrialNudge.aiSearch.description",defaultMessage:"Connect Slack, GitHub & more to get all your answers in one place"},cta:{id:"selfServeBusinessTrialNudge.aiSearch.cta",defaultMessage:"Set up now"}}),aiResearchMode:(0,u().YK)({title:{id:"selfServeBusinessTrialNudge.aiResearchMode.title",defaultMessage:"Use AI Research Mode to run a deep dive for you"},description:{id:"selfServeBusinessTrialNudge.aiResearchMode.description",defaultMessage:"Multi‑step research pulls from pages, databases, and connected tools"},cta:{id:"selfServeBusinessTrialNudge.aiResearchMode.cta",defaultMessage:"Try Research Mode"}}),aiBuildIt:(0,u().YK)({title:{id:"selfServeBusinessTrialNudge.aiBuildIt.title",defaultMessage:"Let AI build it for you"},description:{id:"selfServeBusinessTrialNudge.aiBuildIt.description",defaultMessage:"Describe your perfect setup and Notion AI will build it for you"},cta:{id:"selfServeBusinessTrialNudge.aiBuildIt.cta",defaultMessage:"Try Notion AI"}})};function en({permissionsInviteStore:e}){const{navigate:t}=(0,n.useContext)(s().E),o=(0,u().tz)(),a=(0,l().v3)(),r=(0,ye().L)(),c=(0,i().O$)(L().AppStoreSidebarSpaceViewStore),d=(0,Se()._3)({spaceId:null==r?void 0:r.id}),p=(0,go().g)({spaceId:null==r?void 0:r.id}),g=(0,co().Jd)(p),v=(0,lo().DS)(d),b=(0,mo().J)(p),{trialLength:y,daysElapsed:h,daysRemaining:S,trialCampaign:_}=(0,n.useMemo)((()=>{if(!g)return{trialLength:void 0,daysElapsed:void 0,daysRemaining:void 0,trialCampaign:void 0};const e=(0,Fo().s1)(g.offer),t=(0,xe().Si)(g,v);if(!(0,N().O9)(t))return{trialLength:void 0,daysElapsed:void 0,daysRemaining:void 0,trialCampaign:void 0};return{trialLength:e,daysElapsed:t,daysRemaining:e-t,trialCampaign:g.offer.campaign}}),[g,v]),x=(0,n.useMemo)((()=>({onboardingIntro:{imageSources:{light:j().A.images.pricing.original.businessPng,dark:j().A.images.pricing.original.businessPng}},intro:{icon:Ao()._,iconColor:"orange"},inviteMembers:{icon:Io().r},connectWorkspace:{icon:ko().V},createTeamspaces:{icon:Po().lockFillIcon},verifyPages:{icon:wo().badgeCheckFillIcon,iconColor:"blue"},samlSSO:{icon:jo().keyFillIcon},storeRecords:{icon:Mo().U},notionAi:{icon:At().aiFaceIcon},aiMeetingNotes:{icon:xo().O},aiSearch:{icon:To().c},aiResearchMode:{icon:Co().P},aiBuildIt:{icon:_o().V}})),[]);(0,he().w)((()=>{(0,N().O9)(y)&&(0,N().O9)(S)&&(0,be().u)({environment:a,event:{eventName:"trial_sidebar_alert_viewed",eventProperties:{trial_length:y,days_remaining:S}}})}));const w=(0,n.useMemo)((()=>{if(b&&void 0!==h)return(0,mo().tk)({daysElapsed:h,trialLength:y,trialCampaign:_})}),[b,h,y,_]),k=(0,n.useCallback)((({fireEvent:e=!0}={})=>{if(e&&(0,be().u)({environment:a,event:{eventName:"trial_sidebar_alert_dismissed",eventProperties:{}}}),void 0!==h){const e=`business_trial_nudge_d${h}`;e in bo().z&&m().$Z(a,e)}}),[h,a]),M=(0,Jo().a)(c),I=function(){const e=(0,i().O$)(L().AppStoreCurrentUserSettingsStore),t=(0,i().K8)((()=>{var t;return null==e||null===(t=e.getSettings())||void 0===t?void 0:t.page_verification_tooltip_dismissed_at}),[e]);return Boolean(t)}(),C=Zo(),A=(0,n.useCallback)((()=>{if(!r||!c)return void vt().Ow({currentTab:"verified_pages"});if(void 0!==M&&Boolean(M.length))return void vt().Ow({currentTab:"verified_pages"});const e=C({spaceStore:r,spaceViewStore:c});e&&(Ro().Yf({blocks:[e],environment:a,pageVisitSource:ho().y8.VerifiedPagesSettings}),I||yo().default.setState({type:"verify_page",step:"verify_page"}))}),[C,M,a,I,r,c]),T=(0,Vo().i7)(),D=(0,n.useCallback)((()=>{switch(void 0!==y&&void 0!==S&&(0,be().u)({environment:a,event:{eventName:"trial_sidebar_cta_clicked",eventProperties:{trial_length:y,days_remaining:S}}}),w){case"onboardingIntro":case"intro":(0,po().openBusinessTrialExplorePlanModal)({openedFrom:"self_serve_business_trial_nudge"});break;case"inviteMembers":null==e||e.update((e=>({...e,modalOpen:!0}))),(0,be().u)({environment:a,event:{eventName:"open_invite_members_modal",eventProperties:{from:"trial_sidebar_footer",type:"invite"}}});break;case"connectWorkspace":vt().Ow({currentTab:"ai"});break;case"createTeamspaces":(0,Oo().vn)("self_serve_business_trial_nudge");break;case"verifyPages":A();break;case"samlSSO":vt().Ow({currentTab:"identity_provisioning"});break;case"storeRecords":window.open("https://www.notion.com/pricing","_blank");break;case"notionAi":T&&No().openNewAgentSidebarFromMainBlock({environment:a});break;case"aiMeetingNotes":(async()=>{try{(await Eo().$.load()).createAndNavigateToTranscriptionBlock({environment:a,from:"self_serve_business_trial_nudge",title:"new_page"})}catch(e){P().log({level:"error",from:"BusinessTrialNudge",type:"failed_to_lazy_load_transcription_create_actions",error:(0,Do().convertErrorToLog)(e)})}})();break;case"aiSearch":vt().Ow({currentTab:"connected_apps"});break;case"aiResearchMode":const o=(0,Bo().Gm)({url:"/chat",query:{targetConfig:"researcher",from:"self_serve_business_trial_nudge",origin:"aifw"}});t({environment:a,url:o});break;case"aiBuildIt":(0,Lo().openSelectedTemplateOnboardingModalForInAppFlows)({parentStore:r,template:So().XK,environment:a,aiPrompt:void 0,origin:"self_serve_business_trial_nudge",version:"build_with_ai",autoSubmit:!1})}k({fireEvent:!1})}),[y,S,w,k,a,e,A,T,r,t]);return g&&w?(0,f.jsx)(Kt,{iconColor:x[w].iconColor,icon:x[w].icon,imageSources:x[w].imageSources,imageHeight:36,onDismiss:k,title:o.formatMessage(Qo[w].title,{days:y}),body:o.formatMessage(Qo[w].description,{days:y}),buttons:[{text:o.formatMessage(Qo[w].cta),rightIcon:so().arrowStraightRightSmallIcon,onClick:D}]}):null}var tn=()=>o(343733),on=()=>o(996332),nn=()=>o(804319);function an({upsellVariant:e}){const t=(0,l().v3)(),o=e,i=(0,n.useCallback)((()=>{(0,tn().Q)(t,{from:"sidebar_upgrade_nudge"}),vt().Ow({currentTab:"plans",openedFrom:"upsell",upsellType:"sidebar_upgrade_nudge"})}),[t]),a=(0,x().IS)((()=>({buttonHover:{opacity:1,background:R().Tj.background.secondary,transition:"background 100ms ease-out"},tooltipDescription:{color:R().Tj.text.inverseSecondary},nudgeContainerWithAppSwitcher:{display:"flex",alignItems:"center",padding:"12px 8px",paddingBottom:"0px"},nudgeButton:{alignItems:"center",display:"flex",borderRadius:"6px",width:"100%"}})),[]);return"none"===o?null:(0,f.jsx)("div",{style:a.nudgeContainerWithAppSwitcher,children:(0,f.jsx)(M().Y1,{children:"upgrade"===o?(0,f.jsx)(Ut().m,{renderTooltip:()=>(0,f.jsxs)(f.Fragment,{children:[(0,f.jsx)(u().sA,{id:"upgradeNudge.tooltip.title",defaultMessage:"Do more with Notion"}),(0,f.jsx)("div",{style:a.tooltipDescription,children:(0,f.jsx)(u().sA,{id:"upgradeNudge.tooltip.description",defaultMessage:"Upgrade to access premium features"})})]}),originGap:6,placement:"right",render:e=>(0,f.jsx)(on().Q,{...e,style:a.nudgeButton,hoveredStyle:a.buttonHover,onClick:i,children:(0,f.jsx)(nn().A,{left:(0,f.jsx)(Yt().Q,{iconGroup:zt().k,variantName:"fill",colorVariant:"secondary"}),disableMobileBorder:!0,children:(0,f.jsx)(u().sA,{id:"upgradeNudge.upsellMessage.upgradePlan",defaultMessage:"Upgrade plan"})})})}):null})})}var rn=()=>o(242422),sn=()=>o(249046),ln=()=>o(970236),cn=()=>o(181088),dn=()=>o(404802),un=()=>o(683274),pn=()=>o(523036);const mn="post_business_trial_coupon_callout";function gn(e){const{calloutKey:t}=e,o=(0,u().tz)(),a=(0,l().v3)(),r=(0,ye().L)(),s=(0,Se()._3)({spaceId:null==r?void 0:r.id}),d=(0,pn().R)(mn),p=(0,i().K8)((()=>rn().default.getConfig({configName:"offers_metadata"})),[]),m=(0,i().K8)((()=>d&&r&&(0,dn().$$)(d.campaign)?(0,dn().D9)({offerCampaign:d.campaign,offerMetadata:p,space:r.getModel(),billingData:s}):null),[d,p,r,s]);(0,he().w)((()=>{jt().DL(a,{callout_key:t,placement_key:"SidebarFooter"})}));const g=(0,n.useCallback)((()=>{(0,we().F)({environment:a,spaceStore:r,billingData:s,product:"business",from:mn,offer:(0,xe().Pz)(null==d?void 0:d.campaign)}),jt().Y5(a,{callout_key:t,click_type:"primary_cta",placement_key:"SidebarFooter"})}),[a,r,s,t,d]),v=(0,x().IS)((()=>({badge:{marginInlineStart:0,alignSelf:"flex-start"}})),[]);return(0,f.jsx)(un().l,{messageKey:t,title:o.formatMessage(fn.title),imageUrl:j().A.images.characterAiLaptopPng,body:o.formatMessage(fn.description),badge:(0,f.jsx)(ln().E,{content:(0,f.jsxs)(sn().Ye,{gap:2,children:[(0,f.jsx)(c().I,{size:"xs",icon:cn().clockSmallIcon,colorPalette:"blue",colorVariant:"secondary"}),m?o.formatMessage(fn.badgeWithDaysLeft,{daysLeft:m}):o.formatMessage(fn.badge)]}),color:"blue",style:v.badge}),button:{text:o.formatMessage(fn.buttonText),onClick:g}})}const fn=(0,u().YK)({badgeWithDaysLeft:{id:"postBusinessTrialCouponCallout.badge",defaultMessage:" {daysLeft, plural, one {# day left} other {# days left}}"},badge:{id:"postBusinessTrialCouponCallout.badge_no_days_left",defaultMessage:"Limited time offer"},title:{id:"postBusinessTrialCouponCallout.title",defaultMessage:"Save 50% when you return to Notion Business"},description:{id:"postBusinessTrialCouponCallout.description",defaultMessage:"You still have time to unlock the power of Notion AI to summarize documents, draft content, and automate tasks."},buttonText:{id:"postBusinessTrialCouponCallout.upgradeButton",defaultMessage:"Claim offer"}});var vn=()=>o(124617),bn=()=>o(71805);const yn=(0,u().YK)({title:{id:"SidebarUpgradeNudge.title",defaultMessage:"Do more with Notion"},description:{id:"SidebarUpgradeNudge.description",defaultMessage:"Upgrade for access to premium features."},cta:{id:"SidebarUpgradeNudge.cta",defaultMessage:"View plans"}});function hn(){const e=(0,l().v3)(),t=(0,u().tz)();return(0,n.useEffect)((()=>{jt().DL(e,{callout_key:"sidebar_upgrade_nudge",placement_key:"SidebarFooter"})}),[e]),(0,f.jsx)($t,{title:t.formatMessage(yn.title),description:t.formatMessage(yn.description),cta:t.formatMessage(yn.cta),icon:bn().arrowInCircleUpSmallIcon,onClick:()=>function(e){(0,tn().Q)(e,{from:"sidebar_upgrade_nudge"}),vt().Ow({openedFrom:"upsell",upsellType:"sidebar_upgrade_nudge",currentTab:"plans"}),jt().Y5(e,{callout_key:"sidebar_upgrade_nudge",click_type:"primary_cta",placement_key:"SidebarFooter"})}(e),onDismiss:()=>function(e){(0,vn().u)(e,{name:"sidebar_upgrade_nudge_dismiss"});const{currentUserSettingsStore:t}=L().default.state;if(!t)return;Ne().createAndCommit({userAction:"sidebarUpgradeNudge.markNotificationAsDismissed",environment:e,canUndo:!0,perform:e=>{(0,ze().m)({transaction:e,userSettingsStore:t,data:{dismissed_sidebar_upgrade_nudge:!0}})}}),m().a(e,"sidebar_upgrade_nudge"),jt().Sq(e,{callout_key:"sidebar_upgrade_nudge",dismiss_type:"sidebar_dismiss",placement_key:"SidebarFooter"})}(e)})}var Sn=()=>o(907917),_n=()=>o(775916);var xn=()=>o(97065);var wn=()=>o(821062),kn=()=>o(162342);const Mn=(0,u().YK)({learnMore:{id:"onboardingReverseTrialSidebar.button.learnMore",defaultMessage:"Learn more"},title:{id:"onboardingReverseTrialSidebar.title",defaultMessage:"Your {planName} trial starts today"},titleDaysAgo:{id:"onboardingReverseTrialSidebar.title.daysAgo",defaultMessage:"Your {planName} trial started {daysAgo, plural, one {{daysAgo} day ago} other {{daysAgo} days ago}}"},bodyPlusWithAi:{id:"onboardingReverseTrialSidebar.body.plusWithAi",defaultMessage:"Try our most loved features on the Plus plan with Core AI, free for {trialLength} days"},body:{id:"onboardingReverseTrialSidebar.body",defaultMessage:"Try our most loved team features on the {planName} plan, free for {trialLength} days"},titleMpPlusWithAi:{id:"onboardingReverseTrialSidebar.title.mp.plusWithAi",defaultMessage:"Free {planName}"},bodyMpPlusWithAi:{id:"onboardingReverseTrialSidebar.body.mp.plusWithAi",defaultMessage:"We’ve given you free access to Plus and core Notion AI features"},titleMp:{id:"onboardingReverseTrialSidebar.title.mp",defaultMessage:"Free {planName} for your team"},bodyMp:{id:"onboardingReverseTrialSidebar.body.mp",defaultMessage:"We’ve given you free access to {planName} with all of Notion’s best collaboration features"}});function In(){const e=(0,u().tz)(),t=(0,l().v3)(),o=(0,_n().p)();(0,he().w)((()=>{o&&jt().DL(t,{callout_key:"onboarding_reverse_trial_sidebar",placement_key:"SidebarFooter"})}));const i=(0,n.useCallback)((()=>{(0,kn().fR)({openedFrom:"onboarding_sidebar"}),jt().Y5(t,{callout_key:"onboarding_reverse_trial_sidebar",click_type:"primary_cta",placement_key:"SidebarFooter"})}),[t]);if(!o||"trial"!==o.offer.type||!(0,xe().rM)(o))return null;const a=(0,uo().R$)({products:o.offer.products,intl:e}),{title:r,description:s}=function({claimedTrial:e,planName:t,intl:o}){const n=(0,xe().ER)(e),i=(0,xe().b_)(e.offer).get("days"),a=i-n,r="trial"===e.offer.type?e.offer.products:[],s=(0,wn().A)(r,["plus","ai"]);return["onboarding","admin_tool"].includes(e.entrypoint)?{title:0===a?o.formatMessage(Mn.title,{planName:t}):o.formatMessage(Mn.titleDaysAgo,{planName:t,daysAgo:a}),description:s?o.formatMessage(Mn.bodyPlusWithAi,{trialLength:i}):o.formatMessage(Mn.body,{planName:t,trialLength:i})}:s?{title:o.formatMessage(Mn.titleMpPlusWithAi,{planName:t}),description:o.formatMessage(Mn.bodyMpPlusWithAi)}:{title:o.formatMessage(Mn.titleMp,{planName:t}),description:o.formatMessage(Mn.bodyMp,{planName:t})}}({claimedTrial:o,planName:a,intl:e});return(0,f.jsx)(g().Y,{messageKey:"onboarding_reverse_trial_sidebar",imageSources:{light:j().A.images.pricing.timedTrialGiftboxTransparentPng,dark:j().A.images.pricing.timedTrialGiftboxTransparentPng},title:r,body:s,buttons:[{text:e.formatMessage(Mn.learnMore),rightIcon:_e().arrowStraightRightFillIcon,onClick:i}]})}var Cn=()=>o(274570);function An(){const e=(0,u().tz)(),t=(0,l().v3)(),o=(0,_n().p)(),i=(0,xe().i)(o),a=(0,ye().L)(),r=(0,Se()._3)({spaceId:null==a?void 0:a.id});(0,he().w)((()=>{o&&jt().DL(t,{callout_key:"post_reverse_trial_sidebar",placement_key:"SidebarFooter"})}));const s=(0,n.useCallback)((()=>{(0,we().F)({environment:t,spaceStore:a,billingData:r,from:"post_reverse_trial_sidebar",product:i??"plus"}),jt().Y5(t,{callout_key:"post_reverse_trial_sidebar",click_type:"primary_cta",placement_key:"SidebarFooter"})}),[t,i,r,a]);return(0,f.jsx)(g().Y,{messageKey:"post_reverse_trial_sidebar",title:e.formatMessage({id:"postReverseTrialSidebar.title",defaultMessage:"{hasPlan, select, true {Your free {plan} trial ended} other {Your free trial ended}}"},{hasPlan:Boolean(i),plan:(0,uo().u2)({product:i??"plus",intl:e})}),body:e.formatMessage({id:"postReverseTrialSidebar.body",defaultMessage:"This workspace is now on the free version of Notion"}),buttons:[{text:e.formatMessage({id:"postReverseTrialSidebar.button.upgrade",defaultMessage:"Upgrade"}),rightIcon:_e().arrowStraightRightFillIcon,onClick:s}],icon:Cn().clockIcon,iconColor:"orange"})}const Tn={viewBox:"0 0 20 20",fittedViewBox:"0.07 2.65 19.85 13.34",svg:(0,f.jsxs)(f.Fragment,{children:[(0,f.jsx)("path",{d:"M6.802 3.759a.625.625 0 1 0-.804-.958l-1.49 1.25a.625.625 0 1 0 .804.958zm7.2-.958a.625.625 0 0 0-.804.958l1.49 1.25a.625.625 0 1 0 .804-.958zm3.976 2.255a.55.55 0 0 1 .746.222A9.9 9.9 0 0 1 19.92 10a9.76 9.76 0 0 1-1.155 4.65.55.55 0 0 1-.97-.52A8.66 8.66 0 0 0 18.82 10a8.8 8.8 0 0 0-1.064-4.198.55.55 0 0 1 .222-.746"}),(0,f.jsx)("path",{d:"M17.003 6.208a.55.55 0 1 0-.966.524c.528.973.833 2.094.833 3.268a6.76 6.76 0 0 1-.795 3.211.55.55 0 0 0 .97.518A7.86 7.86 0 0 0 17.97 10a7.95 7.95 0 0 0-.967-3.792M2.022 5.056a.55.55 0 0 1 .222.746A8.8 8.8 0 0 0 1.18 10c0 1.518.367 2.9 1.025 4.13a.55.55 0 0 1-.97.52A9.76 9.76 0 0 1 .08 10c0-1.704.434-3.314 1.196-4.722a.55.55 0 0 1 .746-.222"}),(0,f.jsx)("path",{d:"M3.964 6.732a.55.55 0 1 0-.967-.524A7.95 7.95 0 0 0 2.03 10c0 1.362.333 2.62.925 3.73a.55.55 0 0 0 .97-.519A6.76 6.76 0 0 1 3.13 10c0-1.174.305-2.295.834-3.268m6.661-.072a.625.625 0 0 0-1.25 0v2.715H7.19a.625.625 0 0 0 0 1.25H10c.345 0 .625-.28.625-.625z"}),(0,f.jsx)("path",{d:"M3.905 10A6.096 6.096 0 0 1 10 3.905 6.096 6.096 0 0 1 16.095 10a6.096 6.096 0 0 1-12.19 0M10 5.155A4.846 4.846 0 0 0 5.155 10a4.846 4.846 0 0 0 9.69 0A4.846 4.846 0 0 0 10 5.155"})]})},jn=(0,ae().wt)("alarmVibrating",Tn,"default");var Pn=()=>o(857353);function Dn({claimedTrial:e,billingData:t,permissionsInviteStore:o}){const a=(0,lo().DS)(t),r=(0,xe().ER)(e,a),s=(0,xe().b_)(e.offer).as("days"),c=(0,xe().i)(e),d=n.useMemo((()=>"trial"===e.offer.type?e.offer.products:[]),[e.offer]),p=(0,xe().Kp)(e).includes("ai"),m=s>30,g=(0,u().tz)(),v=(0,l().v3)(),b=(0,ye().L)(),y=(0,Pn().q)("trial_sidebar_footer",o),h=n.useCallback((()=>{(0,Re().toggleAISidebar)(v)}),[v]),S=(0,i().O$)(L().AppStoreCurrentUserSettingsStore);(0,he().w)((()=>{(0,be().u)({environment:v,event:{eventName:"trial_sidebar_alert_viewed",eventProperties:{trial_length:s,days_remaining:r}}})}));const _=(0,i().K8)((()=>{var e;return Boolean(null==S||null===(e=S.getSettings())||void 0===e?void 0:e.reverse_trial_sidebar_alert_dismissed_at)}),[S]),x=n.useCallback((()=>{S&&((0,be().u)({environment:v,event:{eventName:"trial_sidebar_alert_dismissed",eventProperties:{}}}),Ne().createAndCommit({userAction:"ReverseTrialSidebarAlert.handleDismiss",environment:v,canUndo:!0,perform:e=>{(0,ze().m)({transaction:e,userSettingsStore:S,data:{reverse_trial_sidebar_alert_dismissed_at:Date.now()}})}}))}),[S,v]),{handleClick:w}=(0,oo().C)({upsell:{type:"product",product:c,limit:{type:"none"},trialability:"none"},source:"timed_trial_sidebar",spaceStore:b}),k=n.useMemo((()=>{const e=Math.ceil(s/2),t=(0,uo().R$)({products:d,intl:g}),o={title:p?g.formatMessage({id:"reverseTrialSidebarAlert.daysLeft.noTrialName",defaultMessage:"{daysRemaining, plural, one {{daysRemaining} day left in your trial} other {{daysRemaining} days left in your trial}}"},{daysRemaining:r}):g.formatMessage({id:"reverseTrialSidebarAlert.daysLeft",defaultMessage:"{daysRemaining, plural, one {{daysRemaining} day left in your {plan} trial} other {{daysRemaining} days left in your {plan} trial}}"},{daysRemaining:r,plan:t}),body:g.formatMessage({id:"reverseTrialSidebarAlert.freePlan.body",defaultMessage:"If you choose not to upgrade, you'll be on a free plan with limited usage of Notion"}),icon:ro().alarmIcon,iconColor:"orange",buttons:[{text:g.formatMessage({id:"reverseTrialSidebarAlert.upgradeAction",defaultMessage:"Keep using {plan}"},{plan:t}),onClick:()=>w(),rightIcon:_e().arrowStraightRightFillIcon}]};return 0===r?{...o,title:g.formatMessage({id:"reverseTrialSidebarAlert.lastDay",defaultMessage:"Today is the last day of your {plan} plan trial"},{plan:t}),icon:Cn().clockIcon,buttons:[{...o.buttons[0],onClick:()=>(0,kn().W$)({openedFrom:"sidebar",trialPlan:c})}]}:r<=2?{...o,icon:jn,buttons:[{...o.buttons[0],onClick:()=>(0,kn().W$)({openedFrom:"sidebar",trialPlan:c})}]}:r<=4?o:m||r>e?void 0:p?{...o,body:g.formatMessage({id:"reverseTrialSidebarAlert.coreAi.useQna",defaultMessage:"Get instant answers from all your pages, databases, and knowledge"}),onDismiss:x,buttons:[{text:g.formatMessage({id:"reverseTrialSidebarAlert.useQna.action",defaultMessage:"Search with AI"}),onClick:h,rightIcon:_e().arrowStraightRightFillIcon}]}:{...o,body:g.formatMessage({id:"reverseTrialSidebarAlert.inviteMembers.title",defaultMessage:"Make sure to invite team members and get the most out of Notion {plan}"},{plan:t}),onDismiss:x,buttons:[{text:g.formatMessage({id:"reverseTrialSidebarAlert.inviteMembers.action",defaultMessage:"Invite members"}),onClick:y,rightIcon:_e().arrowStraightRightFillIcon}]}}),[r,x,y,w,h,p,g,m,s,c,d]);return!k||_&&r>4?null:(0,f.jsx)(Ce().Ue,{children:(0,f.jsx)(Ce().wY,{...k})})}var Bn=()=>o(559926),Rn=()=>o(191227),Nn=()=>o(160475);const En=(0,u().YK)({title:{id:"import_data_prompt.title",defaultMessage:"Try out data import!"},body:{id:"import_data_prompt.body",defaultMessage:"Use data from another platform to launch your next project in Notion."},buttonText:{id:"import_data_prompt.buttonText",defaultMessage:"Get started"}});function On(){const e=(0,l().v3)(),t=(0,u().tz)();(0,he().w)((()=>{(0,Nn().t)({environment:e,action:"view",from:"import_sidebar_announcement"})}));const o=(0,n.useCallback)((()=>{const t=Rn().A.getOrCreateFlowId();Bn().kY(e,{from:"import_sidebar_announcement",flowId:t}),vt().Ow({currentTab:"imports",openedFrom:"import_sidebar_announcement"}),(0,Nn().t)({environment:e,action:"click",from:"import_sidebar_announcement"}),m().a(e,"import_data_prompt")}),[e]);return(0,f.jsx)(g().Y,{messageKey:"import_data_prompt",title:t.formatMessage(En.title),body:t.formatMessage(En.body),imageHeight:28,imageSources:{light:j().A.images.onboarding.useCaseImportLightPng,dark:j().A.images.onboarding.useCaseImportDarkPng},buttons:[{text:t.formatMessage(En.buttonText),rightIcon:_e().arrowStraightRightFillIcon,onClick:o}],onDismiss:()=>{(0,Nn().t)({environment:e,action:"dismiss",from:"import_sidebar_announcement"})}})}var Vn=()=>o(295633),Ln=()=>o(73337),Fn=()=>o(179034),Un=()=>o(134837),zn=()=>o(165592),Wn=()=>o(373444);const Kn=(0,u().YK)({title:{id:"sidebar.onboardingWorkflowTemplate.title",defaultMessage:"Finish where you left off"},body:{id:"sidebar.onboardingWorkflowTemplate.description",defaultMessage:"Set up your database to stay organized"},cta:{id:"sidebar.onboardingWorkflowTemplate.button",defaultMessage:"Continue building"}});function Hn(){const e=(0,l().v3)(),[t,o]=(0,n.useState)(null),a=(0,u().tz)(),r=(0,Mt().r)(),s=(0,i().K8)((()=>{var e,t;const{currentUserSettingsStore:o}=L().default.state;if(!o)return[];const n=(null===(e=o.getSettings())||void 0===e?void 0:e.onboarding_workflow_template_blocks)||{},i=null===(t=L().AppStoreSidebarSpaceStore.state)||void 0===t?void 0:t.id;return i&&null!=n&&n[i]?n[i]:[]}),[]),c=null==s?void 0:s[0];(0,n.useEffect)((()=>{if(c){const t=new(Vn().B)(e,{table:Fn().ev,id:c,spaceId:r||void 0});o(t),t.load()}}),[e,c,r]);const d=(0,i().K8)((()=>{if(!t)return;const e=t.getFormat();return"workflow_template_placeholder"===e.collection_view_sub_type&&e.placeholder_workflow_template_id&&t.isCollectionView()?{collectionTemplateId:e.placeholder_workflow_template_id,collectionViewBlockStore:t}:void 0}),[t]),p=(0,n.useCallback)((async()=>{if(!d)return;const{collectionTemplateId:t,collectionViewBlockStore:o}=d,{getCollectionTemplateFromId:n}=await zn().t.load(),i=n(t);if(!i)throw new Error("Collection template not found");const{onNavigateToPlaceholderWorkflowTemplateBlock:a}=await Wn().O.load();a({environment:e,collectionTemplate:i,collectionViewBlockStore:o}),m().a(e,"onboarding_workflow_template_callout"),(0,Un().p)(e,{entryPoint:"onboarding_workflow_template_sidebar_announcement"})}),[e,d]);return(0,f.jsx)(g().Y,{messageKey:"onboarding_workflow_template_callout",title:a.formatMessage(Kn.title),body:a.formatMessage(Kn.body),icon:Ln().P,buttons:[{text:a.formatMessage(Kn.cta),onClick:p,rightIcon:_e().arrowStraightRightFillIcon}],onDismiss:()=>{(0,Un().p)(e,{entryPoint:"onboarding_workflow_template_sidebar_announcement"})}})}function Yn({billingData:e,permissionsInviteStore:t,spaceStore:o}){const n=(0,_n().p)(),s=function(e,t){const o=(0,i().K8)((()=>{var e;return Boolean(null===(e=L().default.state.currentUserSettingsStore)||void 0===e||null===(e=e.getSettings())||void 0===e?void 0:e.reverse_trial_sidebar_alert_dismissed_at)}),[]),n=(0,lo().DS)(e),a=(0,lo().i5)(e);if(!t||!a||a<n)return!1;if((0,co().tX)([t]))return!1;if(!(0,xn().DH)(t.offer.campaign)||null!=e&&e.paymentMethod)return!1;const r=(0,xe().ER)(t,n),s=(0,xe().b_)(t.offer).as("days");return!(r>Math.ceil(s/2))&&(o&&r>4?null:!(r<0))}(e,n),c=(0,i().K8)((()=>Ze().default.getMessagesForPlacement("SidebarFooter")),[]),d=(0,i().K8)((()=>null==o?void 0:o.id),[o]),u=(0,Sn().w)(d),p=function(e){const{spaceStore:t}=e,o=(0,l().v3)(),n=(0,i().K8)((()=>null==t?void 0:t.id),[t]),a=to({spaceId:n}),r=eo({spaceId:n}),s=r&&r.blockUsage>0,c=r&&r.percentageUsed>=Zt().eF,d=(0,i().K8)((()=>{var e;return Boolean(null==t||null===(e=t.getSettings())||void 0===e?void 0:e.reach_block_limit_time)}),[t]),u=(0,i().K8)((()=>d&&(0,Lt().K)(o)&&(0,Bt().PK)()<=0),[d,o]);return a&&s&&(c||u)}({spaceStore:o});return(0,i().K8)((()=>s&&n?{type:"footer",component:()=>(0,f.jsx)(Dn,{claimedTrial:n,billingData:e,permissionsInviteStore:t})}:p?{type:"footer",component:()=>(0,f.jsx)(ao,{})}:c.length>0?function(e){const{message:t,permissionsInviteStore:o,spaceStore:n}=e;if("static"===t.type){const e=(0,a().h2)(t.key);if(!e)throw new Error(`Invalid static message key: ${t.key}`);switch(e){case"anyone_with_the_link_sidebar_callout":return{type:"card",component:()=>(0,f.jsx)(kt,{})};case"startup_sidebar_footer":return{type:"card",component:()=>(0,f.jsx)(Le,{})};case"sidebar_upgrade_nudge":return{type:"footer",component:()=>(0,f.jsx)(hn,{})};case"ai_limit_nudge":return{type:"footer",component:()=>(0,f.jsx)(Ot,{source:"sidebar"})};case"resurrection_offer_sidebar":case"business_resurrection_offer_sidebar":return{type:"card",component:()=>(0,f.jsx)(Me,{entrypoint:e})};case"block_limit_nudge":return{type:"footer",component:()=>(0,f.jsx)(no,{spaceStore:n})};case"student_org_prompt":return{type:"card",component:()=>(0,f.jsx)(Ke,{})};case"desktop_download_sidebar":return{type:"card",component:()=>(0,f.jsx)(h,{})};case"ai_meeting_notes_browser_summary_app_download":return{type:"card",component:()=>(0,f.jsx)(b,{})};case"post_reverse_trial_sidebar":return{type:"card",component:()=>(0,f.jsx)(An,{})};case"onboarding_reverse_trial_sidebar":return{type:"card",component:()=>(0,f.jsx)(In,{})};case"ai_connector_outlook_sidebar_notification":return{type:"card",component:()=>(0,f.jsx)(r().LazyAIConnectorSidebarNotification,{connector:"outlook"})};case"ai_connector_google-calendar_sidebar_notification":return{type:"card",component:()=>(0,f.jsx)(r().LazyAIConnectorSidebarNotification,{connector:"google-calendar"})};case"ai_connector_asana_sidebar_notification":return{type:"card",component:()=>(0,f.jsx)(r().LazyAIConnectorSidebarNotification,{connector:"asana"})};case"ai_connector_box_sidebar_notification":return{type:"card",component:()=>(0,f.jsx)(r().LazyAIConnectorSidebarNotification,{connector:"box"})};case"ai_connector_salesforce_sidebar_notification":return{type:"card",component:()=>(0,f.jsx)(r().LazyAIConnectorSidebarNotification,{connector:"salesforce"})};case"import_data_prompt":return{type:"card",component:()=>(0,f.jsx)(On,{})};case"collaboration_callout":return{type:"card",component:()=>(0,f.jsx)(ht,{})};case"business_trial_nudge_d0":case"business_trial_nudge_d1":case"business_trial_nudge_d3":case"business_trial_nudge_d5":case"business_trial_nudge_d8":case"business_trial_nudge_d11":case"business_trial_nudge_d14":case"business_trial_nudge_d17":case"business_trial_nudge_d20":case"business_trial_nudge_d2":case"business_trial_nudge_d6":case"business_trial_nudge_d10":return{type:"footer",component:()=>(0,f.jsx)(en,{permissionsInviteStore:o})};case"business_coupon_eligibility_midpoint_callout":case"business_coupon_eligibility_final_callout":return{type:"card",component:()=>(0,f.jsx)(gn,{calloutKey:e})};case"business_trial_ending_soon":return{type:"card",component:()=>(0,f.jsx)(fo,{})};case"onboarding_workflow_template_callout":return{type:"card",component:()=>(0,f.jsx)(Hn,{})};case"try_notion_for_work_sidebar_callout_revamped":return{type:"card",component:()=>(0,f.jsx)(Xe,{})};case"offline_mode_sidebar_callout":return{type:"card",component:()=>(0,f.jsx)(ut().x2,{})};case"workspace_discovery_sidebar_callout":return{type:"card",component:()=>(0,f.jsx)(gt,{})};case"invite_members_sidebar_callout":return{type:"card",component:()=>(0,f.jsx)(rt,{permissionsInviteStore:o})};case"setup_sessions_instant_booking":return{type:"card",component:()=>(0,f.jsx)(dt,{})};case"slippery_slope_enable_settings_callout":return{type:"card",component:()=>(0,f.jsx)(Oe,{})};case"new_year_meeting_notes_calendar_callout":return{type:"card",component:()=>(0,f.jsx)(ve,{})}}}else if("sidebar"===t.type){const e=t;return{type:"card",component:()=>(0,f.jsx)(Ae,{message:e})}}return}({message:c[0],permissionsInviteStore:t,spaceStore:o}):"upgrade"===u?{type:"footer",component:()=>(0,f.jsx)(an,{upsellVariant:u})}:{type:"footer",component:()=>null}),[s,n,p,c,u,t,e,o])}},359713:(e,t,o)=>{o.r(t),o.d(t,{iconDefinition:()=>i,personCropCircleBadgePlusIcon:()=>a});o(296540);var n=o(474848);const i={viewBox:"0 0 20 20",fittedViewBox:"0.5 2.37 17.12 17.13",svg:(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("path",{d:"M2.375 10a7.625 7.625 0 1 1 5.992 7.45q.197-.587.228-1.23a6.4 6.4 0 0 0 4.454-.62c-.547-1.049-1.697-1.789-3.05-1.789a3.55 3.55 0 0 0-1.739.45q-.241-.587-.626-1.081A4.8 4.8 0 0 1 10 12.561c1.754 0 3.298.934 4.087 2.332A6.375 6.375 0 1 0 3.78 11.406q-.643.032-1.23.227A7.7 7.7 0 0 1 2.375 10"}),(0,n.jsx)("path",{d:"M4 12.5a3.5 3.5 0 0 0-1.137.189A3.502 3.502 0 0 0 4 19.5a3.5 3.5 0 1 0 0-7m-2.594 3.531c0-.345.28-.625.625-.625h1.375v-1.375a.625.625 0 0 1 1.25 0v1.375h1.375a.625.625 0 0 1 0 1.25H4.656v1.375a.625.625 0 1 1-1.25 0v-1.375H2.031a.625.625 0 0 1-.625-.625m6.349-9.862C8.277 5.519 9.05 5.125 10 5.125s1.723.393 2.245 1.044c.51.635.75 1.474.75 2.346s-.24 1.71-.75 2.346c-.522.65-1.294 1.044-2.245 1.044-.95 0-1.723-.394-2.245-1.044-.51-.635-.75-1.474-.75-2.346s.24-1.711.75-2.346m.975.782c-.293.365-.475.909-.475 1.564s.182 1.198.475 1.564c.281.35.694.576 1.27.576s.989-.226 1.27-.576c.294-.366.475-.909.475-1.564s-.181-1.199-.475-1.564c-.281-.35-.693-.576-1.27-.576-.576 0-.989.225-1.27.576"})]})},a=(0,o(340498).wt)("personCropCircleBadgePlus",i,"default")},360088:(e,t,o)=>{o.d(t,{p:()=>m});var n=()=>o(920198),i=()=>o(484714),a=()=>o(590526),r=()=>o(201794),s=()=>o(741615),l=()=>o(795523),c=()=>o(944369),d=()=>o(187623),u=()=>o(176983),p=()=>o(240865);function m(){const e=(0,i().v3)(),t=(0,p().V)(),o=(0,n().L)(),m=(0,u().J)(o),g=(0,s().lh)({spaceId:null==o?void 0:o.id}),f=(0,a().K8)((()=>(0,d().A)()),[]);return(0,a().K8)((()=>!f&&(!!(0,c().m)({environment:e})&&(!(!g||!m||1!==t)&&((0,r().T)("supportsAiIAP")?(0,s().UU)(g)||!(0,l().Fq)(g):!(0,s().UU)(g)&&!(0,l().Fq)(g))))),[e,g,m,t,f])}},377093:(e,t,o)=>{o.d(t,{XO:()=>K,h3:()=>U,nZ:()=>W,pG:()=>z});o(944114),o(898992),o(823215),o(354520),o(803949),o(581454);var n=()=>o(314529),i=()=>o(564884),a=()=>o(907258),r=()=>o(365917),s=()=>o(675133),l=()=>o(295633),c=()=>o(732810),d=()=>o(433337),u=()=>o(716016),p=()=>o(898244),m=()=>o(617871),g=()=>o(165358),f=()=>o(388693),v=()=>o(792071),b=()=>o(179034),y=()=>o(332393),h=()=>o(96689),S=()=>o(854150),_=()=>o(496603),x=()=>o(534177),w=()=>o(935664),k=()=>o(753812),M=()=>o(896628),I=()=>o(799427),C=()=>o(567700),A=()=>o(928213),T=()=>o(339798),j=()=>o(254497),P=()=>o(312296),D=()=>o(999140),B=()=>o(191356),R=()=>o(601734),N=()=>o(395963),E=()=>o(838038),O=()=>o(244828),V=()=>o(155269);const L=(0,o(69708).YK)({aiCustomPromptDefaultPropertyName:{id:"collectionSettingsCreatePropertyActions.createProperty",defaultMessage:"Text"}});function F(e){const{environment:t,collectionContextStore:o,collectionUri:i,feature:a,transaction:r,addFeatureFrom:s,createFeatureStartTime:l}=e;if("dependencies"in a)for(const n of a.dependencies)"property"===n.type&&n.collectionUri===i&&(0,w().Z)({environment:t,collectionContextStore:o,from:"view_settings",property:n.uri,property_type:n.propertySchema.type,is_suggested_property:!0,property_id:n.uri,feature:{id:n.uri,from:s,type:a.uri}});if("dependencies"in a&&a.dependencies.map((e=>e.type)).every((e=>"property"===e))){const e=o.collectionViewStore(),t=o.getPropertyFormatKey(),n=o.normalizedFormatStore.state;if(t&&e){const o=n[t]||[],i=[...o];a.dependencies.forEach((e=>{const t=o.findIndex((t=>t.property===e.uri));-1===t?i.push({visible:!0,property:e.uri}):i[t]={...o[t],visible:!0}})),M().zA({stores:[e],update:{[t]:i},transaction:r})}}if(void 0!==a.propertyIdCollectionSettingToNavigateTo){const e={type:"property",property:a.propertyIdCollectionSettingToNavigateTo,selectNameInitial:!1,formatKey:o.getPropertyFormatKey()};T().a2({collectionSettingsStore:o.settingsStore,item:e})}r.postSubmitCallbacks.push((e=>{(0,n().DO_NOT_USE_trackLegacy)(t,"collection_create_suggested_property_latency",{collection_uri:a.collectionUri,feature_uri:a.uri,time:Date.now()-l,status:Boolean(e)?"fail":"success"})}))}async function U(e){var t;const{appTemplatesSetupActions:o,appTemplatesSprintBoardActions:n,appConfigs:i}=await R().Aw.load(),{environment:s,collectionContextStore:c,feature:p,addFeatureFrom:v,customPropertyName:_}=e,{sidebarSpaceViewStore:x}=a().default.state,w=c.collectionStore(),T=null==w?void 0:w.getParentBlockStore(),j={},P=e=>{(0,g().log)({level:"error",from:"collectionSettingsCreatePropertyActions",type:"handleCreateNewSuggestedProperty",data:{collectionId:null==w?void 0:w.id,miscDataToConvertToString:{featureUri:p.uri,addFeatureFrom:v,...j,...e}}})};if(!w||!T)return void P({hasCollectionStore:Boolean(w),hasCollectionViewBlockStore:Boolean(T)});if((0,C().u)(p))return async function(e){const{environment:t,collectionContextStore:o,feature:n,addFeatureFrom:i}=e,{untypedFeaturesSetupActions:a}=await R().Aw.load(),r=o.collectionStore(),s=null==r?void 0:r.getParentBlockStore();if(!r||!s)return;const l=Date.now();O().createAndCommit({environment:t,userAction:"collectionSettingsCreatePropertyActions.handleCreateNewUntypedFeature",canUndo:!0,perform:e=>{a.applyUntypedFeature({environment:t,collectionStore:r,collectionViewBlockStore:s,feature:n,transaction:e}),F({environment:t,collectionContextStore:o,collectionUri:d().iH,feature:n,transaction:e,addFeatureFrom:i,createFeatureStartTime:l})}})}({environment:s,collectionContextStore:c,feature:p,addFeatureFrom:v});const D=c.collectionViewStore(),N=null==T?void 0:T.getParentStore(),E=null==w||null===(t=w.getFormat())||void 0===t?void 0:t.app_config_uri,V=E&&(0,I().l)(i(),E);if(j.appConfigUri=V&&V.uri,!N||N.table!==h().NX&&N.table!==b().ev&&N.table!==S().yK||!V)return void P({hasAppParentStore:Boolean(N),appParentStoreTable:null==N?void 0:N.table,appConfigUri:V?V.uri:void 0});const L=w.getSchema(),U=T.getFormat().app_id;j.appId=U;const z=U?await k().callApi({eventName:"getCollectionViewBlocksByAppId",environment:s,data:{spaceId:T.getSpaceId(),appId:U}}):void 0,W="success"===(null==z?void 0:z.type)&&z.data.result.length?z.data.result.map((e=>l().B.createChildStore(N,{table:b().ev,id:e.blockId,spaceId:T.getSpaceId()}))):[T],K=p.integrationId;if(K){const e=r().A.getIntegrationsAsRecordMap().getValue({table:y().Li,id:K});if(!e||!(0,f().v_)(e))return void P({hasIntegration:Boolean(e)});await B().C4(s,w,e,Boolean(p.canOnlyAdminAuth))}K===m().ob&&L&&0===(0,u().yP)(L).length&&await A().c({environment:s,collectionStore:w});const H=Date.now();O().createAndCommit({environment:s,userAction:"collectionSettingsCreatePropertyActions.handleCreateNewSuggestedProperty",canUndo:!0,perform:e=>{var t;if(!x)return void P({hasCurrentSpaceViewStore:!1});const i=null===(t=w.getFormat())||void 0===t?void 0:t.app_config_uri;if(!i)return void P({hasCollectionUri:!1});const a=o.applyTypedFeatures({environment:s,spaceViewStore:x,appParentStore:N,appUri:V.uri,features:[{type:"simple",featureUri:p.uri}],transaction:e,createOrModify:"modify",appCollectionViewBlockStores:W,customPropertyName:_});n.createSprintPage({environment:s,spaceViewStore:x,appParentStore:N,transaction:e,blockStores:a,creationEntryPoint:{type:"sprint_relation"}}),"notion://tasks/sub_task_feature"===p.uri&&M().zA({stores:[w],update:{subitem_property:d().yx.SubTaskRelation},transaction:e}),"notion://tasks/task_dependencies_feature"===p.uri&&(M().zA({stores:[w],update:{collection_default_arrows_by:d().yx.BlockingRelation},transaction:e}),D&&M().zA({stores:[D],update:{timeline_arrows_by:{property:d().yx.BlockingRelation}},transaction:e})),F({environment:s,collectionContextStore:c,collectionUri:i,feature:p,transaction:e,addFeatureFrom:v,createFeatureStartTime:H}),e.isEmpty()&&P({isEmptyTransaction:!0})}})}function z({propertyType:e,collectionContextStore:t,propertyId:o}){const n=t.normalizedSchemaStore.state[o];if(n)switch(e){case"ai_custom_prompt":case"ai_summary":case"ai_extract":case"ai_translate":return T().a2({collectionSettingsStore:t.settingsStore,item:{type:"propertyAiAutofill",propertySchema:n,property:o}});case"ai_keywords":return T().a2({collectionSettingsStore:t.settingsStore,item:{type:"property",property:o,formatKey:t.getPropertyFormatKey()}});default:(0,x().HB)(e)}}function W(e){const{environment:t,collectionContextStore:n,propertyType:i,isSuggestedProperty:a,propertyName:r,propertyIcon:l,selectOptions:c,from:d,shouldOpenEditMenu:u=!0,newPropertyFormat:m}=e,g=n.collectionStore(),f=n.collectionViewStore(),v=n.getPropertyFormatKey(),b=n.normalizedFormatStore.state;if(!g)return;if("relation"===i)return void T().a2({collectionSettingsStore:n.settingsStore,item:{type:"selectRelationSource",property:void 0,initialPropertyName:r,formatKey:v,newPropertyFormat:m}});let y=r;"ai_custom_prompt"===i&&(y=s().A.formatMessage(L.aiCustomPromptDefaultPropertyName));const h=m&&v?{...b,[v]:m}:b,{performResult:S}=O().createAndCommit({userAction:"collectionSettingsCreatePropertyActions.handleCreateNewStandardProperty",environment:t,canUndo:!0,perform:e=>(0,V().createProperty)({environment:t,collectionStore:g,collectionViewArgs:f&&v?{collectionViewStore:f,format:h,formatKey:v}:void 0,propertyName:y,propertyIcon:l,propertyType:i,selectOptions:c,transaction:e})});u&&((0,p().hN)(i)?z({propertyType:i,propertyId:S,collectionContextStore:n}):T().n1({collectionSettingsStore:n.settingsStore,property:S,formatKey:v,selectNameInitial:!0}));const _="view_settings"===d?{feature:{id:S,from:"new_property",type:i}}:{};(0,w().Z)({environment:t,collectionContextStore:n,from:d,property_type:(0,p().v2)(i),property:(0,p().hN)(i)?i:void 0,is_suggested_property:a,property_id:S,..._}),a||n.userAddedPropertyStore.update((()=>!0)),S&&!(0,p().hN)(i)&&o.e(52315).then(o.bind(o,830213)).then((e=>{e.maybeTriggerDatabaseViewNudgeOnCreateProperty({environment:t,collectionContextStore:n,propertyId:S,propertyType:(0,p().v2)(i)})}))}async function K(e){const{environment:t,collectionContextStore:o,intl:n,connectedRelationProperty:a,from:r,untypedFeatureArgs:s,propertyGroupId:l,propertyLimit:c,skipDatabaseActions:d,propertyName:f}=e,b=o.collectionStore(),y=o.collectionViewStore(),h=o.getPropertyFormatKey();if(!b||!h)return;const S=a.integration.id;(0,m().XO)(S)||await B().C4(t,b,a.integration,Boolean(a.canOnlyAdminAuth));const k=b.getSchema();let M;S===m().ob&&k&&0===(0,u().yP)(k).length&&(M=await A().c({environment:t,collectionStore:b}));const I=b.getDeletedSchema(),C=(0,x().WP)(I).map((([e,t])=>{if(t&&p().UU(t)&&t.connectedRelation.integration_id===m().ob)return{propertyId:e,propertySchema:t}})).filter(x().O9);let D;if(!_().Im(C)){const e=C[0];D={propertyId:e.propertyId,update:await H({collectionStore:b,property:e})}}O().createAndCommit({environment:t,userAction:"collectionSettingsCreatePropertyActions.handleCreateNewConnectedRelationProperty",canUndo:!0,perform:e=>{const{shouldCreateNewProperty:u,restoredPropertyId:p}=function(e){const{environment:t,generatedPrefix:o,integrationId:n,propertyGroupId:i,collectionStore:a,collectionContextStore:r,collectionViewStore:s,formatKey:l,transaction:c,maybeRestoreDeletedProperty:d}=e;o&&(0,V().createProperty)({environment:t,collectionStore:a,collectionViewArgs:s?{collectionViewStore:s,format:s.getFormat(),formatKey:l}:void 0,propertyType:"auto_increment_id",transaction:c,propertyGroupId:i});if(null!=d&&d.propertyId){if(d.update){i&&(0,N().En)({collectionStore:a,groupId:i,propertyId:d.propertyId,transaction:c}),(0,P().F)({environment:t,collectionStore:a,update:d.update.updateSchema,transaction:c}),(0,j().E)({collectionStore:a,update:d.update.updateDeletedSchema,transaction:c});const e={type:"property",property:d.propertyId,formatKey:l};return T().a2({collectionSettingsStore:r.settingsStore,item:e}),{shouldCreateNewProperty:!1,restoredPropertyId:d.propertyId}}return(0,g().log)({level:"error",from:"collectionSettingsCreatePropertyActions",type:"handleCreateNewConnectedRelationProperty",data:{message:"Invalid property found in deleted_schema",collectionId:null==a?void 0:a.id,miscDataToConvertToString:{integration:n,maybeRestoreDeletedProperty:d}}}),(0,j().E)({collectionStore:a,update:{[d.propertyId]:null},transaction:c}),{shouldCreateNewProperty:!0}}return{shouldCreateNewProperty:!0}}({environment:t,generatedPrefix:M,transaction:e,propertyGroupId:l,collectionStore:b,collectionViewStore:y,collectionContextStore:o,integrationId:S,formatKey:h,maybeRestoreDeletedProperty:D});if(!u&&p)return p;const m=function(e){const{environment:t,transaction:o,collectionStore:n,collectionViewStore:i,collectionContextStore:a,intl:r,connectedRelationProperty:s,untypedFeatureArgs:l,propertyLimit:c,propertyName:d,formatKey:u}=e,p=s.integration.id,m=v().Bj6.fromIntegration(s.integration),g=B().qM({environment:t,pattern:s.pattern,integration:m,parentCollectionStore:n,transaction:o}),f=(0,V().createProperty)({environment:t,collectionStore:n,collectionViewArgs:i&&u?{collectionViewStore:i,format:i.getFormat(),formatKey:u}:void 0,propertyType:"relation",transaction:o,propertyId:null==l?void 0:l.propertyId});return E().cT({environment:t,collectionContextStore:a,collectionStore:n,property:f,propertyName:d&&d.length>0?d:s.name,propertyIcon:s.integration.info.icon,propertyLimit:c??"no_limit",targetCollectionStore:g,hasInverseRelation:!0,autoRelate:void 0,intl:r,connectedRelation:{integration_id:p},transaction:o}),f}({environment:t,transaction:e,collectionStore:b,collectionViewStore:y,collectionContextStore:o,intl:n,connectedRelationProperty:a,untypedFeatureArgs:s,propertyLimit:c,propertyName:f,formatKey:h});if((0,w().Z)({environment:t,collectionContextStore:o,from:"view_settings",property_id:m,property_type:"relation",integration_id:S,feature:{id:m,from:r,type:`notion://feature/connection_${S}`}}),!s)if(d){const e=b.getSchema(),n=null==e?void 0:e[m];T().a2({collectionSettingsStore:o.settingsStore,item:{type:"connectedRelationDatabaseActions",source:"connectedRelationAddProperties",rootPropertyId:m,integrationId:S,rootPropertySchema:n,skipDatabaseActions:!0,eventSource:"first_time_setup"}}),(0,i().u)({environment:t,event:{eventName:"salesforce_actions",eventProperties:{actionType:"add_properties_clicked",details:{source:"first_time_setup"},integrationId:S,collectionId:null==b?void 0:b.id}}})}else{const e={type:"property",property:m,formatKey:h};T().a2({collectionSettingsStore:o.settingsStore,item:e})}return m}})}async function H(e){const{property:{propertyId:t,propertySchema:o},collectionStore:n}=e,i=(0,p().Nv)(o);if((null==i?void 0:i.spaceId)!==n.getSpaceId())return;const a=c().m.createChildStore(n,i);if(await a.load(),null==a||!a.isDefined())return;if(a.getParentId()!==n.id)return;return(0,D().KA)({deletedSchema:n.getDeletedSchema(),property:t})}},382302:(e,t,o)=>{o.d(t,{G:()=>i,_:()=>n});const n=.7,i=1},387964:(e,t,o)=>{o.d(t,{S:()=>a});o(296540);var n=o(474848);const i={viewBox:"0 0 20 20",fittedViewBox:"3.42 3.97 12.16 12.06",directional:!0,svg:(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("path",{d:"M3.608 10.442a.625.625 0 0 1 0-.884l5.4-5.4a.625.625 0 0 1 .884.884L4.934 10l4.958 4.958a.625.625 0 1 1-.884.884z"}),(0,n.jsx)("path",{d:"m14.508 4.158-5.4 5.4a.625.625 0 0 0 0 .884l5.4 5.4a.625.625 0 1 0 .884-.884L10.434 10l4.958-4.958a.625.625 0 1 0-.884-.884"})]})},a=(0,o(340498).wt)("arrowChevronDoubleBackward",i,"default")},390527:(e,t,o)=>{o.r(t),o.d(t,{DEFAULT_MAX_RECURRENCE_DUPLICATION_PER_TASK:()=>P,MAXIMUM_DAILY_RECURRENCES_IN_PATH:()=>w,MAXIMUM_NESTED_RECURRENCE_LEVEL:()=>x,MAX_RECURRENCE_INTERVAL:()=>b,MAX_RECURRENCE_NUMBER_OF_RUNS:()=>y,RRULE_WEEKDAYS_MAP:()=>v,adjustedStartDateIfPossible:()=>M,areRecurrenceSchedulesEqual:()=>E,convertFromUnpersistedRecurrenceConfig:()=>N,convertToUnpersistedRecurrenceConfig:()=>D,getFormattedEndCondition:()=>j,getFormattedNextRecurrenceTime:()=>T,getNewEndTimestamp:()=>B,getNextDateUtc:()=>A,getRecurrenceAfter:()=>I,isRunningBetweenMidnightAnd3AM:()=>C,isValidRecurrenceInterval:()=>h,isValidRecurrenceNumberOfRuns:()=>S,rruleFromRecurrence:()=>_,templateAncestorsViolateRecurrenceNesting:()=>k});o(898992),o(354520),o(581454);var n=()=>o(906745);o(944114);function i(e,...t){if(0===t.length)return e.map((e=>[e]));const o=[];for(const n of e)o.push(...i(t[0],...t.slice(1)).map((e=>[n,...e])));return o}var a=()=>o(496603),r=()=>o(534177),s=()=>o(720665),l=()=>o(597777),c=()=>o(869190),d=()=>o(416504),u=()=>o(402390);class p extends(()=>o(896346))().p3{constructor(e,t){super(e,t)}after(e,t){return super.after(e,t)}}var m=()=>o(912720);const g=(0,o(69708).YK)({dateAtTime:{id:"automations.recurrenceHelpers.dateAtTime",defaultMessage:"{date} at {time}"},dateBetweenMidnightAnd3AM:{id:"automations.recurrenceHelpers.dateBetweenMidnightAnd3AM",defaultMessage:"{date} between 12–3 AM"},numberEndConditionDescription:{id:"automations.recurrenceHelpers.numberEndConditionDescription",defaultMessage:"{number, plural, one {After {number} run} other {After {number} runs}}"},noEndCondition:{id:"automations.recurrenceHelpers.noEndCondition",defaultMessage:"Never"}}),f={hour:p.HOURLY,day:p.DAILY,week:p.WEEKLY,month:p.MONTHLY,year:p.YEARLY},v={MO:p.MO,TU:p.TU,WE:p.WE,TH:p.TH,FR:p.FR,SA:p.SA,SU:p.SU},b=99,y=999;function h(e){return(0,s().Et)(e)&&Number.isInteger(e)&&e>0&&e<=b}function S(e){return(0,s().Et)(e)&&Number.isInteger(e)&&e>0&&e<=y}function _(e){const{start_date:t,frequency:o,interval:n,weekdays:a,timezone:s,hour:c,minute:d}=e,u=(0,l().eU)(t);"hour"===o&&u.setUTCHours(c??0,d??0,0,0);const m="week"===o&&a?a.map((e=>v[e])):void 0,g={};return(0,r().O9)(e.end_condition)&&("date"===e.end_condition.type?g.until=(0,l().eU)(e.end_condition.end_at):"number"===e.end_condition.type?g.count=e.end_condition.number_of_occurrences:(0,r().HB)(e.end_condition)),"month"===e.frequency&&(0,r().O9)(e.monthly_restriction)&&("monthdays"===e.monthly_restriction.type?g.bymonthday=e.monthly_restriction.monthdays:"weekdays_in_month"===e.monthly_restriction.type?g.byweekday=i(e.monthly_restriction.weekdays,e.monthly_restriction.week_numbers).map((([e,t])=>v[e].nth(t))):(0,r().HB)(e.monthly_restriction)),new p({freq:f[o],dtstart:u,interval:n,byweekday:m,tzid:"hour"===o?void 0:s,..."hour"===o?{}:{byhour:c??0,byminute:d??0,bysecond:0},...g})}const x=1,w=1;function k(e){var t;if(0===e.length)return{violatesConstraint:!1,templateNestingExceedsMaxDepth:!1,ancestorHasDailyTemplate:!1,nestedDepthOfAutomationAncestors:void 0,immediateAncestorRecurrenceType:void 0};const o=e.filter((e=>{var t;return"day"===(null===(t=e.getRecurrence())||void 0===t?void 0:t.frequency)})),n=e.length,i=null===(t=e[0].getRecurrence())||void 0===t?void 0:t.frequency,a=n>x,r=o.length>=w;return{violatesConstraint:a||r,templateNestingExceedsMaxDepth:a,ancestorHasDailyTemplate:r,nestedDepthOfAutomationAncestors:n,immediateAncestorRecurrenceType:i}}function M(e){var t;const{recurrence:o,afterDate:i}=e;if("number"===(null===(t=o.end_condition)||void 0===t?void 0:t.type)||o.start_date>=i)return o;let a=n().DateTime.fromMillis(o.start_date,{zone:"utc"});const r=n().DateTime.fromMillis(i,{zone:"utc"});switch(o.frequency){case"hour":{const e=Math.floor(r.diff(a,"hours").hours/o.interval);a=a.plus({hours:e*o.interval});break}case"year":{const e=Math.floor(r.diff(a,"years").years/o.interval);a=a.plus({years:e*o.interval});break}case"month":{const e=Math.floor(r.diff(a,"months").months/o.interval);a=a.plus({months:e*o.interval});break}case"week":{const e=Math.floor(r.diff(a,"weeks").weeks/o.interval);a=a.plus({weeks:e*o.interval});break}case"day":{const e=Math.floor(r.diff(a,"days").days/o.interval);a=a.plus({days:e*o.interval});break}}return{...o,start_date:(0,l().DH)(a.toMillis())}}function I(e){const{recurrence:t,afterDate:o}=e;if((0,m().wt)(t)){const e=(0,l().l1)(o);return t.start_date>=e?new Date(t.start_date):void 0}{const e=_(M({recurrence:t,afterDate:o})).after((0,l().eU)(o));if(!e)return;return(0,l().h1)(e)}}function C(e){return 0===e.hour||1===e.hour||2===e.hour}function A(e){return _(e).after((0,l().eU)((0,l().Rz)()))||void 0}function T(e){const{recurrence:t,intl:o}=e,i=A(N(t));if(!i)return;const a=C(t),r=n().DateTime.fromJSDate(i).toUTC().setZone("local",{keepLocalTime:!0}).setLocale((0,u().H)(o)).setZone(t.timezone),s=(0,c().Yq)({date:r,dateFormat:"relative",allowRelativeDates:!0,intl:o,shortenDate:!0});if(a)return o.formatMessage(g.dateBetweenMidnightAnd3AM,{date:s});{let e=r.toLocaleString(n().DateTime.TIME_SIMPLE);return t.timezone!==(0,d().P)()&&(e+=` ${r.toFormat("ZZZZ")}`),o.formatMessage(g.dateAtTime,{date:s,time:e})}}function j(e,t){return(0,r().O9)(e)?"number"===e.type?t.formatMessage(g.numberEndConditionDescription,{number:e.number_of_occurrences}):"date"===e.type?(0,c().Yq)({date:n().DateTime.fromMillis(e.end_at),dateFormat:"relative",allowRelativeDates:!0,intl:t,shortenDate:!0}):void(0,r().HB)(e):t.formatMessage(g.noEndCondition)}const P=100;function D(e){return{...e,start_date:(0,l().l1)(e.start_date),end_condition:e.end_condition?"number"===e.end_condition.type?e.end_condition:"date"===e.end_condition.type?{type:"date",end_at:(0,l().l1)(e.end_condition.end_at)}:(0,r().HB)(e.end_condition):void 0}}function B(e,t,o){return e.plus(o-t)}function R(e,t){const o=n().DateTime.fromMillis(t.end_at).set({hour:e.hour??0,minute:e.minute??0});return{type:"date",end_at:(0,l().Rz)(o.toJSDate())}}function N(e){return{...e,start_date:(0,l().Rz)(new Date(e.start_date)),end_condition:e.end_condition?"number"===e.end_condition.type?e.end_condition:"date"===e.end_condition.type?R(e,e.end_condition):(0,r().HB)(e.end_condition):void 0}}function E(e,t){const o=a().fN(e,(e=>void 0!==e)),n=a().fN(t,(e=>void 0!==e));return a().n4(o,n)}},397103:(e,t,o)=>{o.d(t,{h:()=>r});var n=()=>o(907258),i=()=>o(590526),a=()=>o(528093);function r(e){var t;const{spaceId:o,currentUserId:r}=(0,i().K8)((()=>{var t;return{spaceId:null==e?void 0:e.id,currentUserId:null===(t=n().default.state.currentUserStore)||void 0===t?void 0:t.id}}),[e]),s=(0,a()._)({name:"members",spaceId:o,userId:r,amount:"unknown"}),l=null==s||null===(t=s.limit)||void 0===t?void 0:t.total;return!!l&&("unlimited"===l||l>1)}},404802:(e,t,o)=>{o.d(t,{$$:()=>r,D9:()=>s});var n=()=>o(534177),i=()=>o(130382),a=()=>o(795523);function r(e){return"business_trial_non_conversion"===e}function s(e){const t=function(e){const{offerCampaign:t,space:o,offerMetadata:r,billingData:s}=e;if("business_trial_non_conversion"===t){const e=null==o?void 0:o.getSetting("biz_offer_aversion_rejected_time");if(!e)return{isEligible:!1,ineligibleReasons:[{reason:"No record of rejecting initial business offer."}]};const t=(0,a().DS)(s).toMillis(),n=(0,i().Mn)(e,t),l=r.post_biz_trial_coupon_eligible_days,c=l-n;return c<=0?{isEligible:!1,ineligibleReasons:[{reason:"Time limit has passed for offer.",extra:{daysSinceOfferStarted:n,totalEligibleDays:l,daysLeft:c}}]}:{isEligible:!0,daysRemaining:c}}(0,n().HB)(t)}(e);return t.isEligible?t.daysRemaining??null:null}},448801:(e,t,o)=>{o.d(t,{i:()=>i});o(944114),o(517642),o(658004),o(733853),o(845876),o(432475),o(515024),o(731698);var n=()=>o(371562);n();function i(e,t){const o=n().create({arrays:{detectMove:!1,includeValueOnMove:!0}}).diff(e,t);if(!o)return{beforeOps:{},removeOps:new Set};let i=[],a=[];for(const n in o)"_t"!==n&&("_"===n[0]?i.push(parseInt(n.slice(1),10)):1===o[n].length&&a.push({index:parseInt(n,10),value:o[n][0]}));const r={},s=new Set,l=[...e];i=i.sort(((e,t)=>e-t));for(let n=i.length-1;n>=0;n--){const e=i[n],t=l.splice(e,1)[0];s.add(t)}a=a.sort(((e,t)=>e.index-t.index));for(let n=0;n<a.length;n++){const e=a[n];r[e.value]=l[e.index],l.splice(e.index,0,e.value)}return{beforeOps:r,removeOps:s}}},450930:(e,t,o)=>{o.d(t,{B:()=>l});o(296540);var n=()=>o(401497),i=()=>o(807449),a=()=>o(26697),r=()=>o(721479),s=o(474848);function l(e){const{tooltipMessage:t,customContainerStyles:o,tooltipWidth:l,overlayContainerZIndex:c}=e,d=function(e){return(0,n().IS)((()=>({tooltip:{width:e??"300px"},tooltipIconContainer:{position:"absolute",marginInlineStart:4,marginTop:2}})),[e])}(l);return(0,s.jsx)(a().m,{placement:"right",style:d.tooltip,render:e=>(0,s.jsx)("span",{...e,style:{...d.tooltipIconContainer,...o},children:(0,s.jsx)(i().I,{icon:r().questionMarkCircleSmallIcon,size:"xs",colorVariant:"tertiary"})}),renderTooltip:()=>t,textWrap:!0,overlayContainerZIndex:c})}},464412:(e,t,o)=>{o.d(t,{X:()=>l});var n=()=>o(755531),i=()=>o(59226),a=()=>o(590526),r=()=>o(365917),s=()=>o(686070);function l(){const e=(0,a().O$)(r().X),t=(0,a().K8)((()=>{const e=(0,n().S)();return e&&(0,s().d)({spaceStore:e})}),[]),o=(0,i().X)("notion_calendar_launch_modal");return e||t||!o}},472150:(e,t,o)=>{o.d(t,{l:()=>s});o(898992),o(354520),o(672577),o(737550);var n=()=>o(907258),i=()=>o(391400),a=()=>o(763824);class r extends(()=>o(769985))().u{constructor(){super({getInitialState:()=>({hasWebLock:!1}),effect:()=>(n().AppStoreSidebarSpaceIdStore.addListener(e),e(),()=>{n().AppStoreSidebarSpaceIdStore.removeListener(e),this.cleanupLastLock()})}),this.abortController=void 0,this.isAcquiringWebLock=!1,this.isAcquiringVisibleTabLock=!1,this.hasVisibleTabLock=!1,this.lockRequestId=0,this.visibilityChangeHandler=void 0;const e=this.setupCalendarBrowserSubscriptionLock.bind(this);this.visibilityChangeHandler=async()=>{document.hasFocus()&&await(0,a().wR)(100),"visible"===document.visibilityState&&(this.requestWebLock({steal:document.hasFocus()}),this.maybeRequestSecondaryVisibleTabLock()),"hidden"===document.visibilityState&&this.maybeRelinquishLock()}}cleanupLastLock(){var e;null===(e=this.abortController)||void 0===e||e.abort("cleanup_last_lock"),document.removeEventListener("visibilitychange",this.visibilityChangeHandler),window.removeEventListener("focus",this.visibilityChangeHandler)}async maybeRelinquishLock(){await(0,a().wR)(100),"visible"===document.visibilityState||document.hasFocus()||this.state.hasWebLock&&this.getSecondaryVisibleTabShouldStealChannel().postMessage("relinquish")}async setupCalendarBrowserSubscriptionLock(){this.cleanupLastLock(),this.requestWebLock({steal:!1}),this.maybeRequestSecondaryVisibleTabLock(),await(0,a().lG)([this.waitUntil((()=>this.state.hasWebLock)),i().A.waitUntil((()=>i().A.state.initialRenderCompleted))]),this.requestWebLock({steal:"visible"===document.visibilityState&&document.hasFocus()}),document.addEventListener("visibilitychange",this.visibilityChangeHandler),window.addEventListener("focus",this.visibilityChangeHandler)}getLockName(){const e=n().AppStoreSidebarSpaceIdStore.getState();return e?`app_level_calendar_event_subscription_leader-${e}`:"app_level_calendar_event_subscription_leader"}getSecondaryVisibleTabLockName(){return`${this.getLockName()}-secondary_visible_tab`}getSecondaryVisibleTabShouldStealChannel(){return new BroadcastChannel(`${this.getSecondaryVisibleTabLockName()}-should_steal`)}async maybeRequestSecondaryVisibleTabLock(){if("visible"!==document.visibilityState)return;if(this.state.hasWebLock)return;if(this.isAcquiringVisibleTabLock||this.hasVisibleTabLock)return;this.isAcquiringVisibleTabLock=!0;const e=new AbortController;document.addEventListener("visibilitychange",(()=>e.abort("became_hidden")),{once:!0,signal:e.signal}),this.waitUntil((()=>this.state.hasWebLock),{signal:e.signal}).then((()=>e.abort("became_leader"))).catch((()=>{}));try{await navigator.locks.request(this.getSecondaryVisibleTabLockName(),{mode:"exclusive",signal:e.signal},(async()=>{this.isAcquiringVisibleTabLock=!1,this.hasVisibleTabLock=!0,e.signal.aborted||await new Promise((t=>{this.getSecondaryVisibleTabShouldStealChannel().addEventListener("message",(()=>{this.requestWebLock({steal:!0}),t()}),{once:!0,signal:e.signal}),e.signal.addEventListener("abort",t,{once:!0})}))}))}catch{}this.isAcquiringVisibleTabLock=!1,this.hasVisibleTabLock=!1,e.signal.aborted||e.abort("cleanup")}async visibleTabAwaitingLockExists(){var e,t;const o=await navigator.locks.query(),n=null===(e=o.held)||void 0===e||null===(e=e.find((e=>e.name===this.getSecondaryVisibleTabLockName())))||void 0===e?void 0:e.clientId,i=null===(t=o.pending)||void 0===t?void 0:t.filter((e=>e.name===this.getLockName()));return n&&(null==i?void 0:i.some((e=>e.clientId===n)))}async requestWebLock(e){var t;const{steal:o}=e;if(!n().AppStoreSidebarSpaceIdStore.getState())return;if(this.state.hasWebLock)return;if(this.isAcquiringWebLock&&!o)return;const i=++this.lockRequestId;this.isAcquiringWebLock=!0,null===(t=this.abortController)||void 0===t||t.abort("new_request");const r=new AbortController;this.abortController=r;try{await navigator.locks.request(this.getLockName(),{mode:"exclusive",steal:o,signal:o?void 0:r.signal},(async()=>{this.isAcquiringWebLock=!1,"visible"!==document.visibilityState&&await this.visibleTabAwaitingLockExists()&&(await(0,a().wR)(100),this.getSecondaryVisibleTabShouldStealChannel().postMessage("should_steal")),r.signal.aborted||(this.setState({hasWebLock:!0}),await new Promise((e=>{r.signal.addEventListener("abort",(()=>e()),{once:!0})})))}))}catch{}i===this.lockRequestId&&(this.setState({hasWebLock:!1}),this.isAcquiringWebLock=!1,r.signal.aborted||this.requestWebLock({steal:!1})),r.signal.aborted||r.abort("cleanup"),this.maybeRequestSecondaryVisibleTabLock()}}const s=new r;(0,o(852832).exposeDebugGetter)("InAppActivitySubscriptionLeaderStore",(()=>s.state))},478873:(e,t,o)=>{o.d(t,{Y:()=>a});var n=()=>o(47373),i=()=>o(272509);function a(e){if(!e||(0,i().I)(e))return{canShowInviteMembers:!1,canRequestMembers:!1};const t=!e.canEditMembership()&&!e.getDisableMembershipRequests()&&(0,n().x3)();return{canShowInviteMembers:e.canEditMembership()||t,canRequestMembers:t}}},479349:(e,t,o)=>{o.d(t,{XA:()=>T,cT:()=>j,Jf:()=>P});o(898992),o(823215);var n=o(296540),i=()=>o(907258),a=()=>o(755531),r=()=>o(484714),s=()=>o(590526),l=()=>o(391400),c=()=>o(757695),d=()=>o(269183),u=(o(517642),o(658004),o(733853),o(845876),o(432475),o(515024),o(731698),o(581454),()=>o(295633)),p=()=>o(723085),m=()=>o(350013),g=()=>o(144948),f=()=>o(150128),v=()=>o(381195),b=()=>o(564884),y=()=>o(553737);const h="1.4.0";class S{constructor(e){this.storageKeyPrefix="notion-sidebar-",this.store=new(y().Ay)({namespace:y().Bq,important:!1,trackingType:"performance"}),this.loggingEnabled=Math.random()<o(242422).default.getConfigKey("sidebar_cache_logging_config","sample_rate"),this.environment=e}async get(e){try{await this.store.waitUntilReady();const t=this.storageKeyPrefix+e,{duration:o,result:n}=_((()=>this.store.get(t)));return n?n.version!==h?(this.logRead({duration:o,status:"stale",result:n}),void this.clear(e)):(this.logRead({duration:o,status:"success",result:n}),n):void this.logRead({duration:o,status:"missing"})}catch(t){return void this.logRead({status:"failure"})}}set(e,t){try{const o=this.storageKeyPrefix+e,{duration:n}=_((()=>this.store.set(o,t)));this.logWrite({duration:n,status:"success",result:t})}catch(o){this.logWrite({status:"failure",result:t})}}clear(e){try{const t=this.storageKeyPrefix+e;this.store.remove(t)}catch(t){}}logRead({duration:e,status:t,result:o}){this.loggingEnabled&&(0,b().u)({environment:this.environment,event:{eventName:"sidebar.cache_access_attempt",eventProperties:{time:e,type:"read",status:t,size_kb:o&&"object"==typeof o?this.calculateSizeKb(o):0,source:"local_storage"}}})}logWrite({duration:e,status:t,result:o}){this.loggingEnabled&&(0,b().u)({environment:this.environment,event:{eventName:"sidebar.cache_access_attempt",eventProperties:{time:e,type:"write",status:t,size_kb:this.calculateSizeKb(o),source:"local_storage"}}})}calculateSizeKb(e){try{const t=JSON.stringify(e),o=new Blob([t]).size;return Math.round(o/1024)}catch{return 0}}}function _(e){const t=performance.now(),o=e();return{duration:Math.round(performance.now()-t),result:o}}function x(e,t){return`sidebar-state-${e}-${t}`}function w(e,t){const o=new(u().B)(t,e.pointer);return void 0!==e.title||void 0!==e.icon?o.createFastRenderBlockStore(e.title??[],e.icon):o}function k(e){const t=e.isDefined()?e.getTitleValue():[],o=e.isDefined()?e.getIcon():void 0,n=null==o?void 0:o.icon;return{pointer:e.pointer,title:t,icon:n}}function M(e){const t=e.isDefined()?e.getName():"",o=e.isDefined()?e.getRawIcon():void 0,n=e.isDefined()?(0,v().O)({teamStore:e}):[];return{pointer:e.pointer,name:t,icon:o,pages:n.map(k)}}function I(e){const t=e.isDefined()?e.getData():void 0,o=null==t?void 0:t.name,n=null==t?void 0:t.icon;return{pointer:e.pointer,title:o,icon:n}}const C=new class{constructor(){this.cache=void 0,this.pendingResults=new Map,this.results=new Map,this.cachedThisSession=new Set,this.disabledCacheKeys=new Set}getCache(e){return this.cache||(this.cache=new S(e)),this.cache}getCachedSidebarStateResult(e,t){const o=`${e}:${t}`;if(!this.disabledCacheKeys.has(o))return this.results.get(o)}async getCachedSidebarState(e,t,o){const n=`${e}:${t}`;if(this.disabledCacheKeys.has(n))return;if(this.results.has(n))return this.results.get(n);if(this.pendingResults.has(n))return this.pendingResults.get(n);const i=this.readFromStorage(e,t,o).then((e=>{if(!this.disabledCacheKeys.has(n))return this.results.set(n,e),e})).catch((()=>{}));return this.pendingResults.set(n,i),i}async readFromStorage(e,t,o){const n=x(e,t),i=await this.getCache(o).get(n);if(i)try{return function(e,t){return{isCached:!0,spaceViewId:e.spaceViewId,spaceId:e.spaceId,spaceName:e.spaceName,userId:e.userId,isMember:e.isMember,isPersonalSpace:e.isPersonalSpace,showBookmarksSection:e.showBookmarksSection,showWorkspaceSection:e.showWorkspaceSection,showSharedSection:e.showSharedSection,showPrivateSection:e.showPrivateSection,showChatsSection:e.showChatsSection,showSharedOverflowButton:e.showSharedOverflowButton,showPrivateOverflowButton:e.showPrivateOverflowButton,showOnlyPrivateSection:e.showOnlyPrivateSection,shownSidebarSectionCount:e.shownSidebarSectionCount,showTeamsOverflowButton:e.showTeamsOverflowButton,stickTemplateItemsToBottom:e.stickTemplateItemsToBottom,showTeamSection:e.showTeamSection,showCrossWorkspaceGuestPagesPrototype:e.showCrossWorkspaceGuestPagesPrototype,showEmptySharedSection:e.showEmptySharedSection,showNotionAppsSection:e.showNotionAppsSection,showMeetingsTodaySection:e.showMeetingsTodaySection,showMeetingsSection:e.showMeetingsSection,showRecentsSection:e.showRecentsSection,allSharedPagesStores:[],allPrivatePagesStores:[],userJoinedTeamsStores:[],visibleNotionApps:e.visibleNotionApps,visibleSharedPagesStores:e.visibleSharedPagesStores.map((e=>w(e,t))),visiblePrivatePagesStores:e.visiblePrivatePagesStores.map((e=>w(e,t))),bookmarkedPagesStores:e.bookmarkedPagesStores.map((e=>w(e,t))),workspacePagesStores:e.workspacePagesStores.map((e=>w(e,t))),visibleTeamsStores:e.visibleTeamsStores.map((e=>function(e,t){const o=new(p().h)(t,e.pointer);if(void 0!==e.name||void 0!==e.icon||e.pages.length>0)return(0,g().x)({store:o,environment:t,name:e.name??"",icon:e.icon,cachedTeamPagesStores:e.pages.map((e=>w(e,t)))});return o}(e,t))),visibleWorkflowStores:e.visibleWorkflowStores.map((e=>function(e,t){const o=new(m().N)(t,e.pointer);if(void 0!==e.title||void 0!==e.icon)return(0,f().J)({store:o,environment:t,name:e.title??"",icon:e.icon});return o}(e,t))),isTeamContentReady:!0,userSharedPagesForSpaceHasLoaded:!0,sidebarOrder:e.sidebarOrder}}(i,o)}catch(a){return void this.getCache(o).clear(n)}}cacheSidebarState({spaceId:e,userId:t,sidebarState:o,environment:n}){const i=x(e,t),a=`${e}:${t}`;var r;if(!this.cachedThisSession.has(a))try{const e={spaceViewId:(r=o).spaceViewId,spaceId:r.spaceId,spaceName:r.spaceName,userId:r.userId,isMember:r.isMember,isPersonalSpace:r.isPersonalSpace,showBookmarksSection:r.showBookmarksSection,showWorkspaceSection:r.showWorkspaceSection,showSharedSection:r.showSharedSection,showPrivateSection:r.showPrivateSection,showChatsSection:r.showChatsSection,showSharedOverflowButton:r.showSharedOverflowButton,showPrivateOverflowButton:r.showPrivateOverflowButton,showOnlyPrivateSection:r.showOnlyPrivateSection,shownSidebarSectionCount:r.shownSidebarSectionCount,showTeamsOverflowButton:r.showTeamsOverflowButton,stickTemplateItemsToBottom:r.stickTemplateItemsToBottom,showTeamSection:r.showTeamSection,showCrossWorkspaceGuestPagesPrototype:r.showCrossWorkspaceGuestPagesPrototype,showEmptySharedSection:r.showEmptySharedSection,showNotionAppsSection:r.showNotionAppsSection,showMeetingsTodaySection:r.showMeetingsTodaySection,showMeetingsSection:r.showMeetingsSection,showRecentsSection:r.showRecentsSection,visibleNotionApps:r.visibleNotionApps,visibleSharedPagesStores:r.visibleSharedPagesStores.map(k),visiblePrivatePagesStores:r.visiblePrivatePagesStores.map(k),bookmarkedPagesStores:r.bookmarkedPagesStores.map(k),workspacePagesStores:r.workspacePagesStores.map(k),visibleTeamsStores:r.visibleTeamsStores.map(M),visibleWorkflowStores:r.visibleWorkflowStores.map(I),sidebarOrder:r.sidebarOrder,cachedAt:Date.now(),version:h};this.getCache(n).set(i,e),this.cachedThisSession.add(a)}catch(s){}}disableCache({spaceId:e,userId:t}){const o=`${e}:${t}`;this.disabledCacheKeys.has(o)||(this.disabledCacheKeys.add(o),this.pendingResults.delete(o),this.results.delete(o))}isCacheDisabled(e,t){const o=`${e}:${t}`;return this.disabledCacheKeys.has(o)}clearCachedSidebarState({spaceId:e,userId:t,environment:o}){const n=x(e,t),i=`${e}:${t}`;this.getCache(o).clear(n),this.pendingResults.delete(i),this.results.delete(i)}};const A=10;function T({sidebarState:e,userId:t,spaceId:o,isInitialPageRenderCompleted:n}){return!!(e&&t&&o&&!e.isCached&&e.visiblePrivatePagesStores.every((e=>{var t;return e.isReady()&&((null===(t=e.getTitleStore())||void 0===t?void 0:t.isReady())??!0)}))&&e.visibleSharedPagesStores.every((e=>{var t;return e.isReady()&&((null===(t=e.getTitleStore())||void 0===t?void 0:t.isReady())??!0)}))&&e.bookmarkedPagesStores.slice(0,A).every((e=>{var t;return e.isReady()&&((null===(t=e.getTitleStore())||void 0===t?void 0:t.isReady())??!0)}))&&e.visibleWorkflowStores.every((e=>e.isReady()))&&e.isTeamContentReady&&n)}function j({isFreshStateReady:e,userId:t,spaceId:o}){const{enableSidebarStateCache:i}=(0,d().b8)(t),[a]=(0,n.useState)((()=>c().Store.createValue(i&&t&&o?C.getCachedSidebarStateResult(o,t):void 0,{name:"cachedSidebarStateStore"})));(0,n.useEffect)((()=>{i&&e&&t&&o&&C.disableCache({spaceId:o,userId:t})}),[i,e,t,o]);const s=(0,r().v3)();return(0,n.useEffect)((()=>{i&&t&&o&&!C.isCacheDisabled(o,t)&&C.getCachedSidebarState(o,t,s).then((e=>a.setState(e)))}),[t,o,s,i,a]),a}function P({sidebarState:e}){const t=(0,r().v3)(),{userId:o,spaceId:c,isInitialPageRenderCompleted:u}=(0,s().K8)((()=>{var e,t;return{userId:null===(e=i().default.state.currentUserStore)||void 0===e?void 0:e.id,spaceId:null===(t=(0,a().S)())||void 0===t?void 0:t.id,isInitialPageRenderCompleted:l().A.state.initialRenderCompleted}}),[]),{enableSidebarStateCache:p}=(0,d().b8)(o);(0,n.useEffect)((()=>{T({sidebarState:e,userId:o,spaceId:c,isInitialPageRenderCompleted:u})&&o&&c&&e&&(p?C.cacheSidebarState({spaceId:c,userId:o,sidebarState:e,environment:t}):C.clearCachedSidebarState({spaceId:c,userId:o,environment:t}))}),[o,c,u,e,p,t])}},481411:(e,t,o)=>{o.d(t,{k:()=>a});const n=["topbar_more_button","available_offline_item"];class i extends(()=>o(757695))().Store{getInitialState(){return{currentStep:n[0],numSteps:n.length}}nextStep(){const e=n.indexOf(this.state.currentStep);e>=this.state.numSteps-1||this.setState({...this.state,currentStep:n[e+1]})}reset(){super.reset()}}const a=new i},495576:(e,t,o)=>{o.d(t,{d:()=>C});var n=o(296540),i=()=>o(968578),a=()=>o(484714),r=()=>o(590526),s=()=>o(69708),l=()=>o(896628),c=()=>o(401497),d=()=>o(534177),u=()=>o(738471),p=o(474848);function m({src:e,placeholderSrc:t,placeholderBehavior:o,imageStyle:i,containerStyle:a,onLoadComplete:r,testId:s}){const[l,m]=(0,n.useState)(!0);let g;switch(o){case"force-show-placeholder":g=!0;break;case"force-show-src":g=!1;break;case"show-placeholder-if-loading-src":g=!!t&&(l||void 0===e);break;default:(0,d().HB)(o)}const f=(0,c().IS)((()=>{const e={gridColumn:1,gridRow:1};return{container:{display:"grid",...a},srcWrapper:{...g&&{display:"none"},...e},placeholderWrapper:{pointerEvents:"none",...e}}}),[a,g]);(0,n.useEffect)((()=>{void 0!==e&&m(!0)}),[e]);const v=(0,n.useCallback)((e=>{m(!1),null==r||r()}),[r]);return(0,p.jsxs)("div",{style:f.container,children:[(0,p.jsx)(u().A,{src:e,onLoad:v,style:i,placeholderStyle:f.srcWrapper,placeholderLoadedStyle:f.srcWrapper,testId:s}),t?(0,p.jsx)(u().A,{src:t,style:i,placeholderStyle:f.placeholderWrapper,placeholderLoadedStyle:f.placeholderWrapper}):void 0]})}var g=()=>o(19771),f=()=>o(360083),v=()=>o(801678),b=()=>o(984007),y=()=>o(504023),h=()=>o(821507),S=()=>o(568365),_=()=>o(77246),x=()=>o(244828),w=()=>o(79926);const k=new(w().O2)("AnimatedCoverImageActionBar",(async()=>Promise.all([o.e(75134),o.e(35530),o.e(36556),o.e(55373),o.e(36192),o.e(27992),o.e(63452),o.e(66249),o.e(87249),o.e(79022),o.e(34877),o.e(59218),o.e(40454)]).then(o.bind(o,166913)))),M=(0,w()._h)(k,(e=>e.AnimatedCoverImageActionBar)),I=280;function C(e){const{store:t,disabled:o,paddingRight:c,paddingLeft:d,height:u,proxyWidth:w}=e,k=(0,s().tz)(),C=(0,a().v3)(),T=(0,a().Y0)(),j=(0,r().uB)(void 0,i().A),P=(0,r().K8)((()=>o||"suggest"===_().Uv.getMode(t)||(0,h().aD)(T)),[o,t,T]),D=(0,r().K8)((()=>t.getCover()),[t]),B=(0,r().O$)(S().M),R=(0,y().x)(t.id),[N,E]=(0,n.useState)(void 0);if(!D)return null;const O=B.loadingMode!==b().pF&&B.loadingMode!==b().Wc;return(0,p.jsx)(v().A,{mouseStore:j,onFlushTemporaryPosition:e=>function(e,t,o){const{imagePosition:n,reset:i}=e;x().createAndCommit({userAction:"PageCover.handleFlushTemporaryPosition",environment:o,canUndo:!0,perform:e=>{l().yY({store:t,coverPosition:n,transaction:e}),i()}})}(e,t,C),renderControl:({handleRepositionClick:e,handleSavePositionClick:o,handleCancelClick:n,isVisible:i,isRepositioning:a})=>P?null:(0,p.jsx)(M,{store:t,mouseStore:j,imageUrl:N,handleRepositionClick:e,handleSavePositionClick:o,handleCancelClick:n,visible:i||R,isRepositioning:a,paddingLeft:d,paddingRight:c}),source:"page",store:t,style:{display:"flex",flexDirection:"column",alignItems:"center",height:u,maxHeight:I,cursor:"default"},preventClickPropagation:!0,render:e=>(0,p.jsxs)(n.Fragment,{children:[(0,p.jsx)(f().A,{url:D.cover,isAuthenticated:!0,permissionRecord:D.pointer,width:w,onFinishedLoadingProxyUrl:E,render:(t,o)=>{const n={width:"100%",height:u,maxHeight:I,objectFit:"cover",opacity:O?.5:1,objectPosition:`center ${100*(1-(e.imagePosition||0))}%`,borderRadius:0},i={width:"100%",height:u,maxHeight:I};return(0,p.jsx)(m,{src:o,placeholderSrc:O?B.dataURL:void 0,placeholderBehavior:O?"force-show-placeholder":"show-placeholder-if-loading-src",containerStyle:i,imageStyle:n,onLoadComplete:A,testId:"pageCover"})}},D.pointer.id),O?(0,p.jsx)(g().X,{variant:"spinner",percentage:B.uploadProgress,text:void 0!==B.uploadProgress?void 0:B.progressText}):R?(0,p.jsx)(g().X,{variant:"dots",text:k.formatMessage({id:"CoverImageActionBar.generatingCover",defaultMessage:"Generating..."})}):void 0]})})}function A(){S().M.reset()}},529099:(e,t,o)=>{o.r(t),o.d(t,{aiFaceIcon:()=>a,iconDefinition:()=>i});o(296540);var n=o(474848);const i={viewBox:"0 0 20 20",fittedViewBox:"4.13 2.52 13.27 14.61",svg:(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("path",{d:"M12.758 9.976a1.178 1.178 0 1 0 .377-2.326 1.178 1.178 0 0 0-.377 2.326M6.547 8.97a1.178 1.178 0 1 0 .377-2.327 1.178 1.178 0 0 0-.377 2.326"}),(0,n.jsx)("path",{d:"M10.573 5.554a3.917 3.917 0 0 1 6.743.035.625.625 0 1 1-1.08.63 2.667 2.667 0 0 0-4.591-.023l-5.398 9.015 4.192.68a.625.625 0 0 1-.2 1.233l-5.102-.827a.625.625 0 0 1-.436-.938zM4.36 3.517a3.92 3.92 0 0 1 5.572.356.625.625 0 1 1-.945.818 2.67 2.67 0 0 0-3.795-.243.625.625 0 1 1-.833-.931"})]})},a=(0,o(340498).wt)("aiFace",i,"default")},541235:(e,t,o)=>{o.d(t,{Ud:()=>r,YD:()=>a,c$:()=>n,q_:()=>i});const n={"sprints-onboarding":{steps:[{id:"current-sprint-view-tooltip"},{id:"sprint-task-tooltip"},{id:"complete-sprint-button-tooltip"}]},"enhanced-qna-onboarding":{steps:[{id:"find-in-tooltip"},{id:"mention-tooltip"}]},"jira-sync-onboarding":{steps:[{id:"all-projects-tooltip"},{id:"all-issues-tooltip"},{id:"database-views-and-filters-tooltip"},{id:"settings-to-setup-projects-and-issues"}]},"project-management-import-onboarding":{steps:[{id:"your-teamspace-tooltip"},{id:"all-projects-tooltip"},{id:"navigate-to-project-tasks-tooltip"},{id:"project-customization-tooltip"},{id:"related-tasks-database-views-tooltip"}]},"ai-comment-onboarding":{steps:[{id:"ai-comment-onboarding-tooltip"}]},database_onboarding:{steps:[{id:"database_onboarding_status_property_tooltip"},{id:"database_onboarding_add_property_tooltip"},{id:"database_onboarding_database_page_tooltip"},{id:"database_onboarding_board_view_tooltip"}]},"new-user-home-workspace-tour":{steps:[{id:"teamspaces"}]}},i="completed",a="dismissed";function r(e,t){return null==t?void 0:t[e]}},541808:(e,t,o)=>{o.d(t,{B:()=>r});var n=()=>o(590526),i=()=>o(496603),a=()=>o(488776);function r(){return(0,n().K8)((()=>{var e;const t=i().$z((null===(e=(0,a().Y)())||void 0===e||null===(e=e.getHomeCalendarStateForSpaceView())||void 0===e?void 0:e.accounts)??[],(({authorized:e})=>String(e)));return{connectedAccounts:t.true??[],disconnectedAccounts:t.false??[]}}),[],{useDeepEqual:!0})}},550368:(e,t,o)=>{o.d(t,{a:()=>u});var n=o(296540),i=()=>o(401497),a=()=>o(100622),r=()=>o(534177),s=()=>o(284371),l=()=>o(699143),c=()=>o(493552),d=o(474848);const u=n.forwardRef((function({additionalContent:e,description:t,isDisabled:o,isSelected:r,label:c,name:u,onChange:g,width:f="fill",selectorSize:v="normal",selectAlignXAxis:b="left",selectAlignYAxis:y="center",selectType:h="checkbox",style:S,supportText:_,value:x,colorVariant:w,alignAdditionalContent:k,...M},I){const C=(0,n.useId)(),A=function(e){const{isSelected:t,isDisabled:o,selectAlignYAxis:n,alignAdditionalContent:r}=e;return(0,i().IS)((()=>{const e=t&&!o?a().Tj.blue.border.accentPrimary:a().Tj.border.primary;return{container:{display:"flex",alignItems:r??"center",gap:12,userSelect:"none",paddingTop:9,paddingInlineEnd:16,paddingBottom:10,paddingInlineStart:10,borderRadius:6,border:`1px solid ${e}`,...!o&&{cursor:"pointer"}},title:{fontWeight:s().Wy.medium,fontSize:14,userSelect:"none",lineHeight:18},additionalContentWrapper:{flexShrink:0},selectorWrapper:{display:"flex",..."top"===n?{marginTop:2}:{}},rightAlignSelectorWrapper:{display:"flex"}}}),[t,o,n,r])}({isSelected:r,isDisabled:o,selectAlignYAxis:y,alignAdditionalContent:k}),T=(0,d.jsxs)(l().Y1,{direction:"horizontal",align:"top"===y?"top-left":"center-left",gap:12,width:f,children:[(0,d.jsx)("div",{style:A.selectorWrapper,children:(0,d.jsx)(m,{id:C,selectType:h,name:u,value:x,onChange:g,isSelected:r,selectorSize:v,isDisabled:o,...M})}),(0,d.jsx)(p,{colorVariant:w,description:t,label:c,selectorSize:v,supportText:_,isDisabled:o})]}),j=(0,d.jsxs)(l().Y1,{direction:"horizontal",align:"top"===y?"top-center":"center",gap:12,children:[(0,d.jsx)(p,{colorVariant:w,description:t,label:c,selectorSize:v,supportText:_,isDisabled:o}),(0,d.jsx)("div",{style:{...A.selectorWrapper,...A.rightAlignSelectorWrapper},children:(0,d.jsx)(m,{id:C,selectType:h,name:u,value:x,onChange:g,selectorSize:v,isSelected:r,isDisabled:o,...M})})]}),P=e?(0,d.jsx)("div",{style:A.additionalContentWrapper,children:e}):null;return(0,d.jsx)("label",{ref:I,style:{...A.container,...S},htmlFor:C,children:"left"===b?(0,d.jsxs)(d.Fragment,{children:[T,P]}):(0,d.jsxs)(d.Fragment,{children:[P,j]})})}));function p(e){const{description:t,label:o,supportText:n,selectorSize:i,isDisabled:a,colorVariant:s}=e;let u;return"large"===i?u="pageContentTextBlock":"normal"===i||void 0===i?u="bodySmMedium":"small"===i?u="captionRegular":(0,r().HB)(i),(0,d.jsxs)(l().Y1,{gap:4,children:[(0,d.jsxs)(l().Y1,{gap:2,children:[(0,d.jsx)(c().D,{styleKey:u,colorVariant:s||(a?"disabled":"primary"),children:o}),t?(0,d.jsx)(c().D,{styleKey:"captionRegular",colorVariant:a?"disabled":"secondary",children:t}):null]}),n?(0,d.jsx)(c().D,{styleKey:"captionMedium",colorVariant:"tertiary",children:n}):null]})}function m(e){const{selectType:t,selectorSize:n="normal",id:a,name:s,value:l,onChange:c,isSelected:u,isDisabled:p,...m}=e,g=(0,i().IS)((()=>({checkboxWrapper:{minWidth:18,display:"flex",justifyContent:"center"}})),[]);switch(t){case"radio":return(0,d.jsx)(o(266685).a,{id:a,name:s,value:l,onChange:c,checked:u,disabled:p,selectorSize:n,...m});case"checkbox":return(0,d.jsx)("div",{style:g.checkboxWrapper,children:(0,d.jsx)(o(665290).W,{id:a,name:s,value:l,onChange:c,checked:u,disabled:p,selectorSize:n,...m})});case"none":return null;default:(0,r().HB)(t)}}},555267:(e,t,o)=>{o.d(t,{A:()=>l});var n=o(296540),i=()=>o(991003),a=()=>o(98126),r=()=>o(100622),s=o(474848);function l({loadingMessage:e}){const t=(0,i().A)(!0,400);return(0,s.jsx)("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",height:"100%"},children:t?(0,s.jsxs)(n.Fragment,{children:[(0,s.jsx)(a().k,{}),e?(0,s.jsx)("div",{style:{marginInlineStart:8,color:r().Tj.text.secondary},children:e}):void 0]}):void 0})}},556122:(e,t,o)=>{o.d(t,{QJ:()=>m,TI:()=>c});o(944114),o(581454);var n=()=>o(726637),i=()=>o(763824);let a=0;const r="clipboard",s={debug:Boolean(n().A.isDevelopingInAirplaneMode),responseText:r,showErrorCode:!1,delayBetweenChunks:20,chunkSize:5,numLoremIpsums:3},l="Lorem ipsum dolor sit amet, consectetur adipiscing elit. Donec porta auctor sem vel efficitur. Vivamus efficitur eros sed erat efficitur efficitur. Vivamus et augue vel est efficitur efficitur.";function c(){return s}function d(e){return{async*[Symbol.asyncIterator](){for(const t of e)await(0,i().wR)(s.delayBetweenChunks),yield t}}}function u(e,t){const o=Math.ceil(e.length/t),n=new Array(o);for(let i=0,a=0;i<o;++i,a+=t)n[i]=e.substr(a,t);return n}function p(e){return e.map((e=>({type:"success",p:"padding",completion:e,inferenceId:"mock"})))}async function m({environment:e,data:t}){console.log("Retrieving fake completion for data",t);const{context:o}=t,i=o.selectedText,c=[];let{responseText:m}=s;if(m===r&&(m=await async function(){try{return await navigator.clipboard.readText()}catch(e){return}}()??"Unable to retrieve clipboard text."),void 0===m&&(c.push({type:"success",p:"padding",completion:"\n",inferenceId:"mock"},{type:"success",p:"padding",completion:"this is ",inferenceId:"mock"},{type:"success",p:"padding",completion:"fake ",inferenceId:"mock"},{type:"success",p:"padding",completion:`streaming response ${a++}.`,inferenceId:"mock"}),n().A.isDevelopingInAirplaneMode&&c.push({type:"success",p:"padding",completion:"\n\nTo see a real AI response, run the server with `--airplaneMode=false`.",inferenceId:"mock"}),"string"==typeof i)){c.push({type:"success",p:"padding",completion:"\n\nHere is the text you selected:\n\n",inferenceId:"mock"});for(const e of u(i,s.chunkSize))c.push({type:"success",completion:e,p:"padding",inferenceId:"mock"})}if(s.showErrorCode)c.push({type:"error",message:"alas",errorCode:s.showErrorCode,isRetryable:!1});else if(void 0===m)for(let n=0;n<s.numLoremIpsums;n++)c.push(...p([`\n\n${n+1}. `,...u(l,0===s.delayBetweenChunks?l.length:s.chunkSize)]));else if(m.length>0){const e=u(m,s.chunkSize);c.push(...p(e))}return Promise.resolve({type:"success",data:d(c),status:200,headers:{}})}(0,o(852832).exposeDebugValue)("completionDebugSettings",s)},561241:(e,t,o)=>{o.d(t,{A:()=>r});o(296540);var n=()=>o(69708),i=()=>o(613016),a=o(474848);const r=function({hasActivePlan:e}){const t=(0,o(484714).v3)(),i=e?(0,a.jsx)(n().sA,{id:"upgradeMobileButton.manageButton.label",defaultMessage:"Manage Plan"}):(0,a.jsx)(n().sA,{id:"upgradeMobileButton.upgradeButton.label",defaultMessage:"Upgrade Plan"});return(0,a.jsx)(o(718827).Ay,{onClick:s(t),children:(0,a.jsx)(o(804319).A,{left:(0,a.jsx)(o(807449).I,{icon:o(694894).arrowInCircleUpFillSmallIcon,size:"sm",colorVariant:"secondary"}),disableMobileBorder:!0,children:i})})};function s(e){return()=>{const{mobileNative:t}=e;t&&t.openUpgradeModal({spaceId:(0,i().a)(),from:"mobile_sidebar",showActivePlan:!0})}}},568365:(e,t,o)=>{o.d(t,{M:()=>n});const n=new(o(984007).Ay)},589407:(e,t,o)=>{o.r(t),o.d(t,{ellipsisIcon:()=>i,iconDefinition:()=>n});o(296540);const n={viewBox:"0 0 20 20",fittedViewBox:"2.62 8.62 14.76 2.76",svg:(0,o(474848).jsx)("path",{d:"M4 11.375a1.375 1.375 0 1 0 0-2.75 1.375 1.375 0 0 0 0 2.75m6 0a1.375 1.375 0 1 0 0-2.75 1.375 1.375 0 0 0 0 2.75m6 0a1.375 1.375 0 1 0 0-2.75 1.375 1.375 0 0 0 0 2.75"})},i=(0,o(340498).wt)("ellipsis",n,"default")},591197:(e,t,o)=>{o.d(t,{VY:()=>s,ZJ:()=>a,u3:()=>r});var n=()=>o(140934);class i extends(()=>o(757695))().Store{getInitialState(){return{popupRenderedInPage:!1,popupRenderedInPeekView:!1}}}const a=new i,r=new(n().ComputedStore)((()=>!1!==a.state.popupRenderedInPage),{debugName:"AssistantWriterRenderedInPageStore"}),s=new(n().ComputedStore)((()=>!1!==a.state.popupRenderedInPeekView),{debugName:"AssistantWriterRenderedInPeekViewStore"})},607743:(e,t,o)=>{o.d(t,{e:()=>f});o(296540);var n=()=>o(484714),i=()=>o(590526),a=()=>o(401497),r=()=>o(631524),s=()=>o(558687),l=()=>o(175947),c=()=>o(284371),d=()=>o(277201),u=()=>o(35889),p=()=>o(559378),m=o(474848);function g(e){return(0,m.jsx)(r().p,{style:e.containerStyle,disabled:!0,iconLeading:s().notionIcon,children:"Notion"})}function f({onClick:e}){const t=(0,n().v3)(),o=(0,i().K8)((()=>p().A.getState().isActive),[]),r=(0,a().IS)((()=>({header:{display:"flex",flexDirection:"row",justifyContent:"space-between",alignItems:"center",height:l().Hi,flexShrink:0,flexGrow:0,paddingInlineStart:8,paddingInlineEnd:16},notionLogoContainer:{fontWeight:c().Wy.semibold,fontSize:15,padding:0,cursor:o?"default":"pointer"}})),[o]);return(0,m.jsxs)("div",{style:r.header,children:[o?(0,m.jsx)(g,{containerStyle:r.notionLogoContainer}):(0,m.jsx)("span",{onClick:async()=>{e?e():await u().$4(t)},children:(0,m.jsx)(g,{containerStyle:r.notionLogoContainer})}),(0,m.jsx)(d().I,{})]})}},608346:(e,t,o)=>{o.d(t,{m:()=>r});o(898992),o(354520),o(672577),o(581454);var n=o.n(o(844751)),i=o(296540),a=()=>o(534177);function r({sections:e,filterQuery:t}){return(0,i.useMemo)((()=>e.map((e=>function(e,t){const{items:o,...i}=e;if(!t)return e;const a=o.filter((e=>e.keywords.find((e=>n().match(t,e)))));return a.length>0?{...i,items:a}:void 0}(e,t))).filter(a().O9)),[t,e])}},611947:(e,t,o)=>{o.r(t),o.d(t,{checkIsTutorialDone:()=>f,dismissTutorial:()=>d,resetTutorials:()=>u,tutorialAdvanceToStep:()=>p,tutorialAdvanceToStepAfter:()=>m,tutorialGoToNextStep:()=>l,tutorialGoToPrevStep:()=>c,tutorialGoToStep:()=>g});var n=()=>o(907258),i=()=>o(541235),a=()=>o(680977),r=()=>o(244828),s=()=>o(646355);function l(e,t,o){var i;const{currentUserSettingsStore:r}=n().default.state;if(!r)return;const l=null===(i=r.getSettings())||void 0===i?void 0:i.tutorials;o?(0,a().m)({userSettingsStore:r,transaction:o,data:{tutorials:{...l,[t]:(0,s().i9)(r,t)}}}):v({userAction:"TutorialActions.nextStep",environment:e,perform:e=>{(0,a().m)({userSettingsStore:r,transaction:e,data:{tutorials:{...l,[t]:(0,s().i9)(r,t)}}})},userId:r.id})}function c(e,t){var o;const{currentUserSettingsStore:i}=n().default.state;if(!i)return;const r=null===(o=i.getSettings())||void 0===o?void 0:o.tutorials;v({userAction:"TutorialActions.prevStep",environment:e,perform:e=>{(0,a().m)({userSettingsStore:i,transaction:e,data:{tutorials:{...r,[t]:(0,s().KD)(i,t)}}})},userId:i.id})}function d(e,t){var o;const{currentUserSettingsStore:r}=n().default.state;if(!r)return;const s=null===(o=r.getSettings())||void 0===o?void 0:o.tutorials;(null==s?void 0:s[t])!==i().YD&&v({userAction:"TutorialActions.dismissTutorial",environment:e,perform:e=>{(0,a().m)({userSettingsStore:r,transaction:e,data:{tutorials:{...s,[t]:i().YD}}})},userId:r.id})}function u(e){const{currentUserSettingsStore:t}=n().default.state;t&&v({userAction:"TutorialActions.resetTutorialsDebug",environment:e,perform:e=>{(0,a().m)({userSettingsStore:t,transaction:e,data:{tutorials:{}}})},userId:t.id})}function p(e,t,o){var r;const{currentUserSettingsStore:l}=n().default.state;if(!l||(0,s().x$)(l,t))return;const c=(0,s().gt)(l,t);i().c$[t].steps.findIndex((e=>e.id===c))>=i().c$[t].steps.findIndex((e=>e.id===o))||(0,a().m)({userSettingsStore:l,transaction:e,data:{tutorials:{...null===(r=l.getSettings())||void 0===r?void 0:r.tutorials,[t]:o}}})}function m(e,t,o){if((0,s().ll)(o))return;const n=(0,s().tb)(t,o);n&&p(e,t,n)}function g(e,t,o,i){var r;const{currentUserSettingsStore:s}=n().default.state;if(!s)return;const l=null===(r=s.getSettings())||void 0===r?void 0:r.tutorials;i?(0,a().m)({userSettingsStore:s,transaction:i,data:{tutorials:{...l,[t]:o}}}):v({userAction:"TutorialActions.nextStep",environment:e,perform:e=>{(0,a().m)({userSettingsStore:s,transaction:e,data:{tutorials:{...l,[t]:o}}})},userId:s.id})}function f(e){const{currentUserSettingsStore:t}=n().default.state;return!!t&&(0,s().x$)(t,e)}function v(e){return r().createAndCommit({...e,canUndo:!1})}},612900:(e,t,o)=>{o.d(t,{u:()=>a});var n=()=>o(79926);const i=new(n().O2)("PulsingWrapper",(async()=>o.e(45248).then(o.bind(o,673962)))),a=(0,n().jQ)(i,(e=>e.PulsingWrapper),{renderLoading:(e,t)=>t.children})},621594:(e,t,o)=>{o.r(t),o.d(t,{exclamationMarkCircleSmallIcon:()=>a,iconDefinition:()=>i});o(296540);var n=o(474848);const i={viewBox:"0 0 16 16",fittedViewBox:"1.87 1.87 12.25 12.25",svg:(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("path",{d:"M7.9 4.875a.625.625 0 0 0-.625.625V8a.625.625 0 1 0 1.25 0V5.5a.625.625 0 0 0-.625-.625m0 4.7a.725.725 0 1 0 0 1.45.725.725 0 0 0 0-1.45"}),(0,n.jsx)("path",{d:"M8 1.875a6.125 6.125 0 1 0 0 12.25 6.125 6.125 0 0 0 0-12.25M3.125 8a4.875 4.875 0 1 1 9.75 0 4.875 4.875 0 0 1-9.75 0"})]})},a=(0,o(340498).wt)("exclamationMarkCircleSmall",i,"small")},627503:(e,t,o)=>{o.d(t,{a:()=>i});o(296540);const n={viewBox:"0 0 16 16",fittedViewBox:"1.37 1.37 13.25 13.25",svg:(0,o(474848).jsx)("path",{d:"M3.25 1.375c-1.036 0-1.875.84-1.875 1.875v6c0 1.036.84 1.875 1.875 1.875h1.625v1.625c0 1.036.84 1.875 1.875 1.875h6c1.036 0 1.875-.84 1.875-1.875v-6c0-1.036-.84-1.875-1.875-1.875h-1.625V3.25c0-1.036-.84-1.875-1.875-1.875zM2.625 3.25c0-.345.28-.625.625-.625h6c.345 0 .625.28.625.625v1.625H6.75c-1.036 0-1.875.84-1.875 1.875v3.125H3.25a.625.625 0 0 1-.625-.625zm3.5 3.5c0-.345.28-.625.625-.625h6c.345 0 .625.28.625.625v6c0 .345-.28.625-.625.625h-6a.625.625 0 0 1-.625-.625z"})},i=(0,o(340498).wt)("duplicateSmall",n,"small")},644837:(e,t,o)=>{o.d(t,{j:()=>i});class n extends(()=>o(757695))().Store{getInitialState(){return{open:!1}}open(e){this.setState({open:!0,...e})}}const i=new n},646355:(e,t,o)=>{o.d(t,{KD:()=>l,gt:()=>c,i9:()=>s,ll:()=>a,tb:()=>r,x$:()=>i});o(18107),o(967357);var n=()=>o(541235);function i(e,t){return a(c(e,t))}function a(e){return void 0!==e&&(e===n().q_||e===n().YD)}function r(e,t){if(a(t))return;const o=n().c$[e],i=o.steps.findIndex((e=>e.id===t));return-1===i?o.steps[0].id:i===o.steps.length-1?n().q_:o.steps[i+1].id}function s(e,t){const o=c(e,t);if(o&&!a(o))return r(t,o)}function l(e,t){const o=c(e,t);if(o)return function(e,t){const o=n().c$[e];var i;if(a(t))return null===(i=o.steps.at(-1))||void 0===i?void 0:i.id;const r=o.steps.findIndex((e=>e.id===t));return-1!==r&&0!==r?o.steps[r-1].id:void 0}(t,o)}function c(e,t){var o;if(!e)return;const i=((null===(o=e.getSettings())||void 0===o?void 0:o.tutorials)||{})[t];return void 0===i?n().c$[t].steps[0].id:i}},687633:(e,t,o)=>{o.d(t,{u:()=>i});var n=()=>o(314529);function i(e,t){(0,n().DO_NOT_USE_trackLegacy)(e,"template_gallery_public_page_topbar_click",t,{dontWait:!0})}},698415:(e,t,o)=>{o.d(t,{F:()=>i});class n extends(()=>o(757695))().Store{getInitialState(){return{forceImportDropdownOpen:!1,shouldAddMembers:!0}}closeImportDropdown(){this.setState({forceImportDropdownOpen:!1,shouldAddMembers:!0})}openImportDropdown(e){this.setState({forceImportDropdownOpen:!0,shouldAddMembers:e.shouldAddMembers})}}const i=new n},717250:(e,t,o)=>{o.d(t,{l:()=>n});const n="offline_mode_education_tooltip"},725340:(e,t,o)=>{o.r(t),o.d(t,{blockLimitIcon:()=>a,iconDefinition:()=>i});o(296540);var n=o(474848);const i={viewBox:"0 0 20 20",fittedViewBox:"2.72 1.77 17.28 16.45",svg:(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("path",{d:"M10.302 1.853a.63.63 0 0 0-.604 0l-6.65 3.669c-.2.11-.323.32-.323.547v7.862c0 .228.124.437.323.547l6.65 3.67a.63.63 0 0 0 .604 0l2.801-1.546a4.6 4.6 0 0 1-.713-1.034l-1.765.973v-6.434l5.4-2.98v1.797a4.7 4.7 0 0 1 1.25.04V6.07a.63.63 0 0 0-.323-.547zM3.975 7.127l5.4 2.98v6.434l-5.4-2.98zM15.356 6.07 10 9.024 4.644 6.069 10 3.114z"}),(0,n.jsx)("path",{d:"M13.592 15.449a3.5 3.5 0 1 1 5.816-3.897 3.5 3.5 0 0 1-5.816 3.897M16.5 11.03a.5.5 0 0 0-.5.5v2.031a.5.5 0 0 0 1 0v-2.03a.5.5 0 0 0-.5-.5m0 5a.625.625 0 1 0 0-1.25.625.625 0 0 0 0 1.25"})]})},a=(0,o(340498).wt)("blockLimit",i,"default")},730307:(e,t,o)=>{o.d(t,{l:()=>m});var n=()=>o(779315),i=()=>o(292985),a=()=>o(161479),r=()=>o(878523),s=()=>o(129522),l=()=>o(404783),c=()=>o(555776),d=()=>o(116008),u=()=>o(36088),p=()=>o(405981);async function m(e){var t;const{environment:o,blockStore:m,rect:g,property_id:f,from:v}=e;if(d().A.hasContent())return void(0,p()._y)({environment:o,reason:"starting_new"});const b=s().K.getRect(m);if(!b)return;const y=new(l().A)(o,(0,a().e)(m.pointer.spaceId)),h=b.width,S=b.height,_=b.right-h;d().A.setState({open:!0,rect:g||new DOMRect(_,b.top,h,S),type:"block",content:"comment",blockStore:m,blockId:m.id,discussionInputStore:y,property_id:f,lastKnownBlockStore:m,from:v}),(0,i().V)({element:null===(t=n().A.UpdateSidebarCommentScroller)||void 0===t?void 0:t.getNode(),environment:o,options:{top:0,behavior:"smooth"}}),c().A.setActiveWithSource("text_annotation"),await(0,u().M)({discussionInputStore:y,environment:o}),r().j4(o,{from:v})}},736767:(e,t,o)=>{o.d(t,{A:()=>r});var n=o(296540),i=o(474848);function a(e,t){return(0,i.jsx)(o(424400).Ay,{...e,ref:t,style:{background:"none",borderBottom:"none",boxShadow:"",marginTop:2,marginBottom:6,paddingTop:4,paddingBottom:4,minHeight:"none",...e.style}})}const r=(0,n.forwardRef)(a)},748054:(e,t,o)=>{o.d(t,{M:()=>i});o(296540);const n={viewBox:"0 0 20 20",fittedViewBox:"3.97 2.68 12.51 14.37",svg:(0,o(474848).jsx)("path",{d:"M10.282 3.66a5.39 5.39 0 0 0-5.217-.54l-.711.305a.63.63 0 0 0-.38.575v12.425a.625.625 0 1 0 1.25 0v-3.913l.333-.142a4.14 4.14 0 0 1 4.008.414 5.39 5.39 0 0 0 5.504.405l1.06-.53a.63.63 0 0 0 .346-.56V4a.625.625 0 0 0-.905-.558l-1.06.53c-1.36.68-2.983.56-4.228-.312m-5.057 7.495V4.412l.332-.142a4.14 4.14 0 0 1 4.008.413 5.39 5.39 0 0 0 5.504.406l.156-.078v6.703l-.715.357c-1.36.68-2.983.56-4.228-.312a5.4 5.4 0 0 0-5.057-.604"})},i=(0,o(340498).wt)("flag",n,"default")},753721:(e,t,o)=>{o.d(t,{X:()=>a});var n=()=>o(590526),i=()=>o(391400);function a(){return(0,n().K8)((()=>i().A.state.initialRenderCompleted),[])}},769607:(e,t,o)=>{o.r(t),o.d(t,{aiFaceFillIcon:()=>a,iconDefinition:()=>i});o(296540);var n=o(474848);const i={viewBox:"0 0 20 20",fittedViewBox:"3.96 2.31 13.64 15.02",svg:(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("path",{d:"M10.401 5.452a4.118 4.118 0 0 1 7.088.036.825.825 0 0 1-1.425.832 2.468 2.468 0 0 0-4.247-.02L6.57 15.062l3.9.631a.825.825 0 1 1-.263 1.628l-5.102-.826a.827.827 0 0 1-.576-1.238z"}),(0,n.jsx)("path",{d:"M11.685 8.61a1.278 1.278 0 1 1 2.524.408 1.278 1.278 0 0 1-2.524-.409M5.474 7.603a1.278 1.278 0 1 1 2.524.408 1.278 1.278 0 0 1-2.524-.408M4.225 3.367a4.12 4.12 0 0 1 5.858.375.826.826 0 0 1-1.246 1.08 2.47 2.47 0 0 0-3.51-.225.826.826 0 0 1-1.102-1.23"})]})},a=(0,o(340498).wt)("aiFaceFill",i,"fill")},780863:(e,t,o)=>{o.d(t,{p:()=>l});var n=o(296540),i=()=>o(40845),a=()=>o(496603),r=()=>o(440024);const s={isRepositioning:!1};function l(e){const{currentPosition:t,imageUrl:o,onSavePosition:l,onPositionChange:c,rootRef:d,environment:u}=e,[p,m]=(0,n.useState)(s),{isRepositioning:g}=p,f=(0,n.useCallback)((()=>{m(s)}),[]),v=(0,n.useMemo)((()=>void 0!==p.temporaryPosition?p.temporaryPosition:t),[p.temporaryPosition,t]);(0,n.useEffect)((()=>{c&&c(v)}),[v,c]);const b=(0,n.useCallback)((e=>{(0,r().I)({environment:u});const t=new Image;t.onload=()=>{m((e=>({...e,isRepositioning:!0,image:t})))};const n=e||o;n&&(t.src=n)}),[u,o]),y=(0,n.useCallback)((()=>{l(v),f()}),[l,v,f]),h=(0,n.useCallback)((()=>{f()}),[f]);(0,n.useEffect)((()=>{const e=e=>{const t=d.current;t&&e.target instanceof Node&&!t.contains(e.target)&&g&&y()};return g&&window.addEventListener("mousedown",e),()=>{window.removeEventListener("mousedown",e)}}),[g,y,d]);const S=(0,n.useCallback)((e=>{const{image:t}=p;if(!t||!g)return;const o=d.current;if(o&&o instanceof Element){const e=o.getBoundingClientRect().width/t.width*t.height;m((t=>({...t,startDragImageScreenHeight:e,startDragRenderedPosition:v})))}}),[p,g,v,d]),_=(0,n.useCallback)((e=>{if(!g)return;const{startDragImageScreenHeight:t,startDragRenderedPosition:o}=p,n=e.diffY/(t||0)+(o||0);m((e=>({...e,temporaryPosition:(0,a().LI)((0,i().A)(n,0,1),4)})))}),[g,p]),x=(0,n.useCallback)((()=>{m((e=>({...e,startDragImageScreenHeight:void 0,startDragRenderedPosition:void 0})))}),[]),w=(0,n.useMemo)((()=>g?"ns-resize":"default"),[g]);return{isRepositioning:g,currentImagePosition:v,handleDragStart:S,handleDragMove:_,handleDragEnd:x,handleStartReposition:b,handleSavePosition:y,handleCancelReposition:h,repositioningCursor:w}}},790100:(e,t,o)=>{o.r(t),o.d(t,{SidebarFooter:()=>Ae,useSidebarFooterStyles:()=>Te});var n=o(296540),i=()=>o(907258),a=()=>o(755531),r=()=>o(248140),s=()=>o(484714),l=()=>o(590526),c=()=>o(401497),d=()=>o(741615),u=()=>o(440375),p=()=>o(100622),m=()=>o(279047),g=()=>o(347930);const f=o(757695).Store.createValue({current:null});function v(e){e!==f.state.current&&f.setState({current:e})}var b=()=>o(300789),y=()=>o(317025),h=()=>o(964831),S=()=>o(79926);const _={BackToWorkspaceCallout:new(S().O2)("BackToWorkspaceCallout",(async()=>o.e(21056).then(o.bind(o,230433))))},x=(0,S()._h)(_.BackToWorkspaceCallout,(e=>e.BackToWorkspaceCallout));var w=()=>o(303742),k=(o(898992),o(354520),o(581454),()=>o(278729)),M=()=>o(848538);var I=()=>o(635219),C=()=>o(382302),A=()=>o(528093);var T=()=>o(664594),j=()=>o(726637),P=()=>o(408895),D=()=>o(134217);var B=()=>o(59226),R=()=>o(249046),N=()=>o(314595),E=()=>o(644914),O=()=>o(69708),V=()=>o(295418),L=o(474848);const F=(0,O().YK)({openTooltip:{id:"sidebar.appSwitcher.calendar.openTooltip",defaultMessage:"Open Notion Calendar"},exploreTooltip:{id:"sidebar.appSwitcher.calendar.exploreTooltip",defaultMessage:"Explore Notion Calendar"}});function U(e,t){const i=(0,O().tz)(),a=(0,n.useRef)(null),r=(0,n.useCallback)((e=>{"function"==typeof t?t(e):t&&(t.current=e),a.current=e}),[t]),c=(0,s().v3)(),d=(0,o(464412).X)(),u=d?F.openTooltip:F.exploreTooltip,{onIconClick:p}=e,m=(0,n.useCallback)((()=>{p(),o(40970).uX(c),d?(0,o(645200).Op)({environment:c,spaceStore:void 0,collectionViewStore:void 0,from:"appSwitcher"}):(o(694498).A.setState({signupCtaAttribution:"appSwitcher"}),b().UW(c,"notion_calendar_launch_promo"))}),[c,d,p]),g=(0,l().O$)(o(365917).X),{eventsLoadingState:f}=(0,o(196459).O)("personal_home"),v=(0,o(205379).N)();return g&&"rejected"!==f.status?(0,L.jsx)(o(991318).s,{canShowCustomPopover:e.canShowCustomPopover,hideUpsellPopover:e.hideUpsellPopover,handleButtonClick:m,ref:r,placementToOrigin:"top",alignmentToOrigin:"center",originGap:6,originContainerHeight:28,originContainerWidth:28,originElement:(0,L.jsx)(o(695115).A,{size:"md",icon:v,ariaLabel:i.formatMessage(u),onClick:m})}):(0,L.jsx)(V().o,{ref:r,icon:v,label:i.formatMessage(u),tooltipDisabled:!g,onClick:m,onMouseEnter:e.showCalendarUpsellPopover})}const z=(0,n.forwardRef)(U);o(16280);var W=()=>o(564884),K=()=>o(242422),H=()=>o(127833),Y=()=>o(30537),q=()=>o(917629),G=()=>o(449412),$=()=>o(391657),X=()=>o(131448),Z=()=>o(749687),J=()=>o(255636),Q=()=>o(139646);const ee="notion_mail_launch_2_callout",te="notion_calendar_existing_user_activation_callout",oe="notion_desktop_app_existing_user_callout";function ne({children:e}){const t=(0,s().v3)(),[o,i]=(0,n.useState)(null),[a,r]=(0,n.useState)(null),[d,u]=(0,n.useState)(null),[p,m]=(0,n.useState)(void 0),[g,f]=(0,n.useState)(!1),[v,y]=(0,n.useState)({current:void 0,previous:void 0});const{forcedCalloutPopover:h,inAppCalloutHandlers:S,onIconClick:_}=function({calendarElement:e,mailElement:t,notionDesktopElement:o}){const i=(0,s().v3)(),{forcedCalloutPopover:a,inAppCalloutMessage:r}=(0,l().K8)((()=>{const e=X().default.state.messages.get(te);if(e)return{forcedCalloutPopover:"calendar",inAppCalloutMessage:e};const t=X().default.state.messages.get(ee);if(t)return{forcedCalloutPopover:"mail",inAppCalloutMessage:t};const o=X().default.state.messages.get(oe);return o?{forcedCalloutPopover:"notionDesktopDownload",inAppCalloutMessage:o}:{forcedCalloutPopover:void 0,inAppCalloutMessage:void 0}}),[]);let c;switch((0,n.useEffect)((()=>{if(!r)return;if(!Z().sidebarExpandedStore.state)return G().Fg(new Error("AppSwitcherUpsellPopoverManager: in-app callout message requested, but sidebar is closed."),{data:{inAppCalloutMessage:r}}),void b().OX(i,r);const e=new AbortController;return Z().sidebarExpandedStore.waitUntil((()=>!Z().sidebarExpandedStore.state),{signal:e.signal}).then((()=>{a&&b().OX(i,r)})).catch((()=>{})),()=>{e.abort()}}),[a,i,r]),a){case"calendar":c=e;break;case"mail":c=t;break;case"notionDesktopDownload":c=o}(0,n.useEffect)((()=>{c?c.focus():a&&(X().default.removeMessage(a),G().Fg(new Error("AppSwitcherUpsellPopoverManager: forced callout popover requested, but no target app element found."),{data:{forcedCalloutPopover:a}}))}),[a,c]);const{onClick:d,onDismiss:u}=(0,$().t)({messageKey:(0,q().h2)(null==r?void 0:r.key)}),p=(0,n.useMemo)((()=>{if(a)return{onClick:()=>{var e;null===(e=c)||void 0===e||e.click(),b().OX(i,r)},onDismiss:u}}),[a,c,u,i,r]),m=(0,n.useCallback)((e=>{e===a&&(d(),b().OX(i,r))}),[a,d,i,r]);return{forcedCalloutPopover:a,inAppCalloutHandlers:p,onIconClick:m}}({calendarElement:o,mailElement:a,notionDesktopElement:d}),x=h??v.current,w=h??v.previous,k=Boolean(o),M=Boolean(a),I=Boolean(d),C={calendar:i,mail:r,notion:u},A=(0,l().K8)((()=>({calendar:k,mail:M&&K().default.checkGate({gateName:"connected_apps_upsell--mail"}),notionDesktopOpen:I,notionDesktopDownload:I})),[k,M,I]),T=(0,c().IS)((()=>({setupUpsell:{display:"flex",flexDirection:"column",width:"226px",overflow:"visible",boxShadow:"none"}})),[]),j=Boolean(x&&A[x]);return(0,n.useEffect)((()=>{if(h)return;const e=setTimeout((()=>{x&&j&&(0,W().u)({environment:t,event:{eventName:"connected_apps_app_switcher_upsell_presented",eventProperties:{app_target:x}}})}),200);return()=>{clearTimeout(e)}}),[x,t,j,h]),(0,L.jsx)(H().zD,{preventCaptureEsc:!0,suppressOriginContext:!0,forceInitialInbound:!0,disableDarkOverlayBackground:!0,disableMouseCapture:!0,trapFocus:!1,preventScaleTransition:!1,preventOpacityTransition:!1,preventSlideUpTransition:!1,open:Boolean(x),popupType:Y().n.Popup,alignmentToOrigin:"start",placementToOrigin:"top",viewportPadding:6,originGap:6,style:Q().z.style,animationConfig:Q().z.animationConfig,popupWrapStyle:T.setupUpsell,render:()=>w&&A[w]&&(0,L.jsx)(J().k,{inAppCalloutHandlers:S,imageFailedToLoad:g,setImageFailedToLoad:f,calendarElement:o,mailElement:a,notionDesktopElement:d,hoveredAppTarget:w,isAppTargetLoading:p}),origin:e({setElement:C,setTargetApplication:function(e){y((t=>({current:e,previous:e??t.current}))),e&&f(!1)},setLoading:m,onIconClick:_,canShowCustomPopover:!Boolean(h)})})}var ie=()=>o(935748),ae=()=>o(778450);const re=(0,O().YK)({tooltip:{id:"desktopAppSwitcher.tooltip",defaultMessage:"Get the desktop app"}});function se(e,t){const{showDesktopUpsellPopover:i}=e,a=(0,s().v3)(),r=(0,l().O$)(o(63728).l),c=(0,n.useRef)(null),d=(0,o(93583).A)(t,c),u=(0,O().tz)(),p=(0,n.useCallback)((async e=>{if(null!==r)i({isRegistered:r});else{i({isRegistered:!1,isLoading:!0});const e=await(0,ae().e)(a);c.current&&c.current.matches(":hover")&&i({isRegistered:e,isLoading:!1})}}),[i,a,r]),m=(0,n.useCallback)((async()=>{let e=r;(0,W().u)({environment:a,event:{eventName:"click_desktop_sidebar_link",eventProperties:{}}}),null===e&&(e=await(0,ae().e)(a)),(0,o(11756).R)({environment:a,from:"appSwitcher",isRegistered:Boolean(e)})}),[a,r]);return(0,L.jsx)(V().o,{label:u.formatMessage(re.tooltip),tooltipDisabled:!e.shouldShowDefaultTooltip,ref:d,icon:{icon:o(182183).notionTintableIcon,size:18},onClick:m,onMouseEnter:p})}const le=(0,n.forwardRef)(se);var ce=()=>o(250910),de=()=>o(406533),ue=()=>o(148024),pe=()=>o(603867),me=()=>o(709438),ge=()=>o(240562),fe=()=>o(732797),ve=()=>o(814020),be=()=>o(194617);const ye=new(o(118307).A);function he({variant:e="tooltip"}){var t;const o=(0,s().v3)(),{isPhone:n,isTablet:i}=(0,s().Y0)(),a=(0,B().X)("adoption_sidebar_footer_revamp"),{buttonLabel:r,changelogFooterUpdatesEnabled:l,latestReleaseDate:d,renderBadge:u,tooltipLabel:p}=(0,ve().s)(),m=(0,c().IS)((()=>({container:{position:"relative",display:"flex",alignItems:"center"}})),[]),g=(null===(t=o.mobileNative)||void 0===t?void 0:t.supportsNativeHomeOnPhone())||!1,f="label"===e,v=p;return(0,L.jsx)(ce().A,{buttonPopupStore:i?fe().r:ye,source:i?"appSwitcher":void 0,hidesMobileNativeBottomBar:g,preventSlideUpTransition:g,popupType:i?ce().z.BottomSheet:n?ce().z.SlideUp:ce().z.Popup,bottomSheetInitialState:i?"half":"full",onClick:()=>{i||fe().r.setState({...fe().r.state,open:!0,source:"appSwitcher"}),ue().VX(o,{from:"appswitcher",badged:u})},onClose:()=>{i||(0,pe().ho)({environment:o,changelogFooterUpdatesEnabled:l,releaseDate:d})},alignmentToOrigin:a?"start":"end",placementToOrigin:"top",originGap:4,renderOrigin:e=>f?(0,L.jsx)(be().P,{icon:de().questionMarkCircleIcon,label:r,showBadge:u,"aria-label":v,...e}):(0,L.jsxs)("div",{style:m.container,children:[(0,L.jsx)(V().o,{icon:de().questionMarkCircleIcon,label:v,...e}),u?(0,L.jsx)(Se,{}):null]}),render:()=>(0,L.jsx)(ge().p,{fromForAnalytics:"appswitcher"})})}function Se(){const e=(0,c().IS)((()=>({badge:{position:"absolute",top:4,insetInlineEnd:4},dot:{color:p().Tj.blue.icon.accentPrimary},dotstyle:{border:`1px solid ${p().Tj.background.secondary}`}})),[]);return(0,L.jsx)("div",{style:e.badge,children:(0,L.jsx)(me().m,{color:e.dot.color,size:8,style:e.dotstyle})})}function _e(e,t){const i=(0,s().v3)(),a=(0,O().tz)(),{onIconClick:r}=e,l=(0,n.useCallback)((()=>{r(),o(196207).j(i),(0,o(838824).Z)({environment:i,from:"appSwitcher"})}),[i,r]);return(0,L.jsx)(V().o,{label:a.formatMessage(Q().j.mail.title),tooltipDisabled:"false"===e.isMailUser,ref:t,icon:o(333461).F,onClick:l,onMouseEnter:"false"===e.isMailUser?e.showMailUpsellPopover:void 0})}const xe=(0,n.forwardRef)(_e),we=new(S().O2)("MWNAppSwitcherItem",(async()=>await o.e(27372).then(o.bind(o,773080)))),ke=(0,S()._h)(we,(e=>e.MWNAppSwitcherItem));function Me({}){const{isTablet:e,desktopTargetPlatform:t,isDesktopBrowser:o}=(0,s().Y0)(),n=(0,s().v3)(),{isMailUser:a,checkMailUser:r}=(0,ie().g)(),d=(0,l().O$)(i().AppStoreSidebarSpaceStore),u="msStore"===t,p=(0,l().K8)((()=>(0,E().mM)(n,d)),[n,d]),m=(0,B().X)("adoption_sidebar_footer_revamp"),{isNotionMailDisabled:g}=(0,N().a)({environment:n}),f=(0,B().X)("mwn_announcement_modal_2025"),v=!g&&!u,b=!!o||void 0,y=(0,c().IS)((()=>({container:{display:"flex",alignItems:"center",justifyContent:"space-between",padding:e?"13px 16px":"10px 12px",boxSizing:"border-box"},appContainer:{display:"flex",alignItems:"center",gap:4}})),[e]);return m?(0,L.jsx)("div",{style:y.container,children:(0,L.jsxs)(R().Ye,{children:[(0,L.jsx)(he,{}),f?(0,L.jsx)(ke,{}):void 0]})}):(0,L.jsx)(ne,{children:({setElement:e,onIconClick:t,setTargetApplication:o,setLoading:n,canShowCustomPopover:i})=>(0,L.jsxs)("div",{style:y.container,onMouseEnter:r,children:[(0,L.jsxs)("div",{style:y.appContainer,onMouseLeave:()=>o(void 0),children:[b?(0,L.jsx)(le,{ref:e.notion,showDesktopUpsellPopover:({isRegistered:e,isLoading:t})=>{o(e?"notionDesktopOpen":"notionDesktopDownload"),n(t?"notionDesktopDownload":void 0)},shouldShowDefaultTooltip:!1}):void 0,p?(0,L.jsx)(z,{ref:e.calendar,showCalendarUpsellPopover:()=>o("calendar"),hideUpsellPopover:()=>o(void 0),onIconClick:()=>t("calendar"),canShowCustomPopover:i}):void 0,v?(0,L.jsx)(xe,{ref:e.mail,isMailUser:a,showMailUpsellPopover:()=>o("mail"),onIconClick:()=>t("mail")}):void 0]}),(0,L.jsxs)(R().Ye,{children:[f?(0,L.jsx)(ke,{}):void 0,(0,L.jsx)(he,{})]})]})})}var Ie=()=>o(775275),Ce=()=>o(354572);function Ae({scrollerStore:e}){const{canEditSpace:t,currentUserRootStore:o,sidebarSpaceId:c,sidebarSpaceStore:p,sidebarSpaceViewStore:f}=(0,l().K8)((()=>{var e,t;return{canEditSpace:(null===(e=(0,a().S)())||void 0===e?void 0:e.canEdit())??!1,sidebarSpaceId:null===(t=(0,a().S)())||void 0===t?void 0:t.id,currentUserRootStore:i().default.state.currentUserRootStore,sidebarSpaceStore:(0,a().S)(),sidebarSpaceViewStore:i().default.state.sidebarSpaceViewStore}}),[]),S=(0,l().K8)((()=>(0,w().o)(f)&&o&&function({userRootStore:e,n:t}){return e.getSpaceViewStores().map((t=>k().V.createChildStore(t,(0,M().i1)({userId:e.id,spaceId:t.getSpaceId()})).isMember())).filter(Boolean).length===t}({userRootStore:o,n:1})),[f,o]),{previousSpaceId:_,previousSpaceViewId:B}=(0,l().K8)((()=>({previousSpaceId:I().o.getState().spaceId,previousSpaceViewId:I().o.getState().spaceViewId})),[]),R=(0,s().v3)(),N=(0,l().O$)(u().l),E=(0,l().K8)((()=>r().A.state.ready),[]),O=(0,n.useMemo)((()=>(0,h().nc)()),[]),V=(0,l().K8)((()=>O.state.modalOpen),[O]);!function(e){const{spaceId:t}=e,o=(0,s().v3)(),i=o.currentUser.id,a=(0,A()._)({name:"ai_usage",spaceId:t,userId:i,amount:1}),r=(0,l().K8)((()=>{if(a&&"available"===a.type&&"cumulative"===a.limit.type&&"unlimited"!==a.limit.total)return a.limit.current/a.limit.total}),[a]);(0,n.useEffect)((()=>{r&&r>=C()._&&b().HH(o,"ai_limit_nudge",{skipDefaultRules:["SeenExpirationRule","MinimumAccountAgeRule"]})}),[o,r])}({spaceId:c}),function(e){const{spaceId:t}=e,o=(0,s().v3)(),i=(0,T().T)(),a=(0,l().K8)((()=>{if(!t||j().A.isMobile)return!1;const e=(0,P().M)({spaceId:t,userId:i,enforceIdsCheck:!1,debugFrom:"useBlockLimitWarningTrigger"});return e&&(0,D().cG)(e)&&(0,D().z8)(o,e,t)}),[o,t,i]);(0,n.useEffect)((()=>{a&&b().HH(o,"block_limit_nudge")}),[o,a])}({spaceId:c}),(0,n.useEffect)((()=>{b().HH(R,"invite_members_sidebar_callout",{skipDefaultRules:["MinimumAccountAgeRule","SeenExpirationRule"]}),b().HH(R,"collaboration_callout"),b().HH(R,"anyone_with_the_link_sidebar_callout",{skipDefaultRules:["MinimumAccountAgeRule"]})}),[R]);const F=(0,d()._3)({spaceId:null==p?void 0:p.id}),U=(0,Ce().F)({billingData:F,permissionsInviteStore:O,spaceStore:p}),z=Te();return E&&o&&!N?t?(0,L.jsxs)("div",{style:z.footer,ref:v,children:[(0,L.jsx)(m().A,{type:"bottom",scrollerStore:e}),"footer"===(null==U?void 0:U.type)?U.component():void 0,(0,L.jsx)(Me,{}),V&&p?(0,L.jsx)(g().H,{targetStore:p,spaceStore:p,permissionsInviteStore:O,origin:(0,L.jsx)(L.Fragment,{}),membersOnly:!0,shouldGrow:!1,disabled:!1,isSubscribed:!1,upgradeButtonName:"space_permission_settings",onInviteClick:y().$D,onInviteComplete:y().c3,analyticsFrom:"sidebar_footer_invite_button"}):null]}):S&&_&&B?(0,L.jsx)(x,{previousSpaceId:_,previousSpaceViewId:B}):(0,L.jsx)(Ie().C,{sidebarSpaceStore:p,sidebarSpaceViewStore:f}):(0,L.jsx)(L.Fragment,{})}function Te(){return(0,c().IS)((()=>{const e={display:"block",flexGrow:0,flexShrink:0,flexBasis:"auto"};return{footer:e,canViewOnlyFooter:{...e,padding:14,boxShadow:`0 -1px 0 ${p().Tj.border.secondaryTranslucent}`},createWorkspaceButton:{marginTop:8,marginInlineStart:-8}}}),[])}},794946:(e,t,o)=>{o.r(t),o.d(t,{OutlinerToggleOpenSetupModalButton:()=>f});o(296540);var n=()=>o(726637),i=()=>o(590526),a=()=>o(401497),r=()=>o(718827),s=()=>o(807449),l=()=>o(26697),c=()=>o(863330),d=()=>o(854150),u=()=>o(69708),p=()=>o(534177),m=()=>o(144825),g=o(474848);function f({origin:e,parentStore:t,onClick:o}){const f=(0,u().tz)(),v=(0,a().IS)((()=>{const e=n().A.isMobile?32:20;return{button:{height:e,width:e,border:"none",borderRadius:3,marginInlineStart:n().A.isMobile?0:4},plusIconContainer:{display:"flex",alignItems:"center",justifyContent:"center",height:e,width:e}}}),[]),b=(0,i().K8)((()=>function({origin:e,parentStore:t,intl:o}){switch(e){case"team":{const e=t.table===d().yK?t.getName():void 0;return e?o.formatMessage({id:"outlinerToggleAddPageOrTemplateButton.team",defaultMessage:"Add to {teamName}"},{teamName:e}):o.formatMessage({id:"outlinerToggleAddPageOrTemplateButton.team.unknownTeamName",defaultMessage:"Add to teamspace pages"})}case"private":return o.formatMessage({id:"outlinerToggleAddPageOrTemplateButton.private",defaultMessage:"Add to private pages"});default:(0,p().HB)(e)}}({origin:e,parentStore:t,intl:f})),[e,t,f]);return(0,g.jsx)(l().m,{textWrap:!1,renderTooltip:()=>b,placement:"top",render:i=>(0,g.jsx)(r().Ay,{style:v.button,ariaLabel:b,onClick:()=>{null==o||o(),(0,m().openTemplateOnboardingModal)({parentStore:t,template:void 0,version:(0,m().getTemplateOnboardingVersion)({template:void 0}),origin:"team"===e?"sidebar_team_new_page":"sidebar_private_new_page"})},...i,children:(0,g.jsx)("div",{style:v.plusIconContainer,children:(0,g.jsx)(s().I,{icon:c().plusSmallIcon,size:"sm",colorVariant:n().A.isMobile?"tertiary":"secondary"})})})})}},801678:(e,t,o)=>{o.d(t,{A:()=>f});var n=o(296540),i=()=>o(756117),a=()=>o(590526),r=()=>o(609679),s=()=>o(69708),l=()=>o(100622),c=()=>o(496603),d=()=>o(806080),u=()=>o(284371),p=()=>o(720665),m=()=>o(46986),g=o(474848);const f=function(e){const t=(0,n.useRef)(null),i=(0,o(484714).v3)(),{renderControl:r,onFlushTemporaryPosition:s,style:l,source:u,store:f}=e,b=(0,a().K8)((()=>0===o(206051).default.state.stores.length),[]),[y,h]=(0,n.useState)(!1),S=(0,a().uB)(e.mouseStore,o(968578).A),_=(0,a().K8)((()=>S.state.mouseEntered),[S]),x=(0,a().K8)((()=>function(e,t){if("gallery"===e||"board"===e){const e=t.getFormat().card_cover_position;if((0,d().Et)(e))return e}const o=.5;var n;if((0,m().V)())return(null===(n=t.getCover())||void 0===n?void 0:n.cover_position)??o;if(t.isCollectionView()){const e=t.getCollectionStoreIfSingleSource();if(e){const t=e.getFormat().collection_cover_position;return(0,p().pN)(t)?o:t}}const i=t.getFormat(),a=i.page_cover_position;if((0,d().Et)(a))return a;return o}(u,f)),[u,f]),{isRepositioning:w,currentImagePosition:k,handleDragStart:M,handleDragMove:I,handleDragEnd:C,handleStartReposition:A,handleSavePosition:T,handleCancelReposition:j,repositioningCursor:P}=(0,o(780863).p)({currentPosition:x,onSavePosition:e=>{s({imagePosition:e,reset:()=>{S.reset()}})},rootRef:t,environment:i}),D=(0,o(401497).IS)((()=>({dragContainer:{width:"100%",cursor:P},container:{position:"relative",width:"100%",zIndex:1}})),[P]);w&&!b&&j();const B=(0,n.useMemo)((()=>(0,c().nF)((e=>{S.setState({...S.state,mouseEntered:!0})}),100)),[S]),R=(0,n.useMemo)((()=>(0,c().sg)((e=>{S.setState({...S.state,mouseEntered:!1})}),100)),[S]),N=(0,n.useCallback)(((e,t)=>{A(t)}),[A]),E=(0,n.useCallback)((e=>{T()}),[T]),O=(0,n.useCallback)((e=>{const t=e.target;void 0!==t&&t instanceof HTMLElement&&(0,o(819121).p)(t)&&h(!0)}),[]),V=(0,n.useCallback)((()=>{h(!0)}),[]),L=(0,a().K8)((()=>r({handleRepositionClick:N,handleSavePositionClick:E,handleCancelClick:j,isVisible:_||y||w,isRepositioning:w})),[N,E,j,y,w,_,r]),F=(0,o(870956).A)(Boolean(e.preventClickPropagation));return(0,g.jsxs)("div",{ref:t,onFocus:O,onBlur:V,onMouseEnter:B,onMouseMove:B,onMouseLeave:R,...F,...(0,o(451306).ow)(D.container,l),children:[(0,g.jsx)(o(222321).A,{onDraggableDragStart:M,onDraggableDragMove:I,onDraggableDragEnd:C,onDraggableDragCancel:C,disabled:!w,render:t=>(0,g.jsx)("div",{style:D.dragContainer,...t,children:e.render({imagePosition:k,isRepositioning:w})})}),(0,g.jsx)(v,{small:e.small,isRepositioning:w}),L]})};function v({small:e,isRepositioning:t}){if(e)return null;const o={background:l().IF.blackWithAlpha(.4),borderRadius:4,color:l().oZ.white,fontSize:12,fontFamily:u().vc(r().locale).sans,width:180,insetInlineStart:"calc(50% - 90px)",padding:"0.3em 1.5em 0.3em",pointerEvents:"none",position:"absolute",top:"calc(50% - 10px)",textAlign:"center"};return(0,g.jsx)(i().A,{visible:t,initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},style:o,children:(0,g.jsx)(s().sA,{defaultMessage:"Drag image to reposition",id:"withImageRepositioning.dragImage.text"})})}},803960:(e,t,o)=>{o.r(t),o.d(t,{arrowChevronSingleDownIcon:()=>i,iconDefinition:()=>n});o(296540);const n={viewBox:"0 0 20 20",fittedViewBox:"3.97 6.97 12.06 6.66",svg:(0,o(474848).jsx)("path",{d:"M9.558 13.442c.244.244.64.244.884 0l5.4-5.4a.625.625 0 0 0-.884-.884L10 12.116 5.042 7.158a.625.625 0 1 0-.884.884z"})},i=(0,o(340498).wt)("arrowChevronSingleDown",n,"default")},821983:(e,t,o)=>{o.r(t),o.d(t,{iconDefinition:()=>n,keyFillIcon:()=>i});o(296540);const n={viewBox:"0 0 20 20",fittedViewBox:"5.31 1.92 9.37 16.15",svg:(0,o(474848).jsx)("path",{d:"M12.02 10.83a.3.3 0 0 0 .062-.023 4.684 4.684 0 1 0-4.164 0q.03.014.062.023v5.225c0 .086.034.169.095.23L9.77 17.98a.325.325 0 0 0 .46 0l1.695-1.695a.325.325 0 0 0 0-.46l-1.465-1.466 1.465-1.465a.33.33 0 0 0 .095-.23zM10 6.67a1 1 0 1 1 0-2 1 1 0 0 1 0 2"})},i=(0,o(340498).wt)("keyFill",n,"fill")},837471:(e,t,o)=>{o.r(t),o.d(t,{SidebarSectionWithPopup:()=>l});o(296540);var n=()=>o(404694),i=()=>o(201941),a=()=>o(964899),r=()=>o(817221),s=o(474848);function l(e){const{type:t,content:o,spacePlan:l}=e,c=(0,n().V)(),d=(0,i().u)();return"team"===l&&"teams"===t?(0,s.jsx)(a().n,{step:"teamspaces",inAppCalloutStore:c,teamIds:d,renderTooltip:e=>(0,s.jsx)(r().f,{...e}),children:o}):"team"===l&&"private"===t?(0,s.jsx)(a().n,{step:"private",inAppCalloutStore:c,teamIds:d,renderTooltip:e=>(0,s.jsx)(r().Ow,{...e}),children:o}):o}},839754:(e,t,o)=>{o.d(t,{Bi:()=>M,My:()=>k,ZM:()=>C,_M:()=>I,navigateToWorkflowTemplateOnboardingModal:()=>A});o(16280),o(944114),o(517642),o(658004),o(733853),o(845876),o(432475),o(515024),o(731698),o(898992),o(354520),o(672577),o(581454);var n=()=>o(907258),i=()=>o(295633),a=()=>o(584262),r=()=>o(663077),s=()=>o(179034),l=()=>o(201980),c=()=>o(896628),d=()=>o(384944),u=()=>o(730969),p=()=>o(840153),m=()=>o(339798),g=()=>o(180762),f=()=>o(799832),v=()=>o(111379),b=()=>o(535960),y=()=>o(31173),h=()=>o(295304),S=()=>o(244828),_=()=>o(373444),x=()=>o(165592),w=()=>o(204067);function k({transaction:e,collectionStore:t,propertyTemplates:o}){var n;const i=(null===(n=t.getParentBlockStore())||void 0===n?void 0:n.getCollectionViewStores().filter((e=>"table"===e.getType())))??[];if(0===i.length)return;const a=[];for(const l of o){const e=(0,w().S1)({collectionStore:t,templateId:l.templateId,instancePointerType:"property"});e&&a.push({property:e.id,visible:!(0,r().Sz)(l),...l.tablePropertyFormat})}if(0!==a.length)for(const r of i){var s;const t=(null===(s=r.getPropertyFormatsStore("table_properties"))||void 0===s?void 0:s.getValue())??[],o=new Set(t.map((e=>e.property))),n=a.filter((e=>!o.has(e.property)));0!==n.length&&c().zA({stores:[r],update:{table_properties:[...t,...n]},transaction:e})}}function M({transaction:e,collectionStore:t,propertyTemplates:o}){const n=[];for(const s of o){const e=(0,w().S1)({collectionStore:t,templateId:s.templateId,instancePointerType:"property"});e&&n.push({property:e.id,visible:!0})}const i=t.getFormat().collection_page_properties??[],a=new Set(i.map((e=>e.property))),r=n.filter((e=>!a.has(e.property)));r.length&&c().zA({stores:[t],update:{collection_page_properties:[...i,...r]},transaction:e})}function I({environment:e,newPageStore:t,result:o}){"accepted_template"!==o.type&&"accepted_empty_collection"!==o.type||S().createAndCommit({environment:e,canUndo:!1,perform:n=>{const a=t.getTitleValue();if(d().zv({store:t,transaction:n,data:{alive:!1}}),"accepted_empty_collection"===o.type&&!(0,l().w9s)(a)){const r=i().B.createChildStore(t,{table:"block",id:o.blockId}).getTitleStore();r&&h().yr({environment:e,transaction:n,tokens:a,index:0,store:r})}const r=t.getParentStore();if((null==r?void 0:r.table)===s().ev){const e=r.getContentIds();d().zv({store:r,transaction:n,data:{content:e.filter((e=>e!==t.id))}})}},userAction:"clean_up_empty_new_page"})}function C({environment:e,userAction:t,result:o,existingCollectionViewBlockStore:n,existingCollectionStore:i}){if("canceled"!==o.type){if("accepted_empty_collection"===o.type&&i){const n=i.getKeyStore("name"),a=(0,l().x9d)(o.newCollectionTitle);n&&S().createAndCommit({userAction:t,environment:e,canUndo:!0,perform:t=>h().R9({environment:e,store:n,transaction:t,value:a})})}if(n){var a;const e=null===(a=(0,f().U)(n))||void 0===a?void 0:a.settingsStore;e&&m().os({collectionSettingsStore:e})}if("accepted_template"===o.type&&null!=n&&n.isCollectionView()&&(null==n||!n.hasSingleSourceAndNoLinkedCollections())){const t=(0,f().U)(n),i=n.getCollectionViewStores().find((e=>{var t;return(null===(t=e.getCollectionStore())||void 0===t?void 0:t.id)===o.collectionId}));if(!t||!i)return;(0,g().t)({environment:e,collectionContextStore:t,collectionViewId:i.id,isFullScreen:t.isFullScreenStore.state,isRootChild:t.isRootChildStore.state,isInPeekRenderer:t.isInPeekRendererStore.state})}}}async function A({environment:e,collectionViewBlockStore:t}){const o=t.id;if(!t.isDefined()){const n=await(0,y().$)({environment:e,blockId:o});if(!n)return;e=await p().T({environment:e,newCurrentUserId:n}),t=new(i().B)(e,{table:s().ev,id:o}),await t.load()}const r=t.getSpaceId();if(!r)throw new Error("Space ID not found for collection block");const l=(0,v().k)(r);if(!l)throw new Error(`Space view not found for space ID: ${r}`);const{sidebarSpaceStore:c}=n().default.state;(null==c?void 0:c.id)!==r&&await(0,u().y)({environment:e,spaceViewStore:l});const d=t.getFormat();if("workflow_template_placeholder"===(null==d?void 0:d.collection_view_sub_type)&&null!=d&&d.placeholder_workflow_template_id&&t.isCollectionView()){const{getCollectionTemplateFromId:o}=await x().t.load(),n=o(d.placeholder_workflow_template_id);if(!n)throw new Error(`Collection template "${d.placeholder_workflow_template_id}" not found`);const{onNavigateToPlaceholderWorkflowTemplateBlock:i}=await _().O.load();i({environment:e,collectionTemplate:n,collectionViewBlockStore:t})}else(0,b().u)({environment:e,store:t,pageVisitSource:a().y8.WorkflowTemplatesDeeplink})}},845899:(e,t,o)=>{o.d(t,{M:()=>i});class n extends(()=>o(757695))().Store{getInitialState(){return{isModalOpen:!1}}}const i=new n},846199:(e,t,o)=>{o.d(t,{v:()=>n});const n=o(757695).Store.createValue({open:!1},{name:"TrialInfoModalStore"})},857353:(e,t,o)=>{o.d(t,{q:()=>u});var n=o(296540),i=()=>o(920198),a=()=>o(484714),r=()=>o(590526),s=()=>o(134696),l=()=>o(47373),c=()=>o(272509),d=()=>o(346527);function u(e,t){const o=(0,a().v3)(),u=(0,i().L)(),{showMembersButton:p,canRequestMembers:m}=(0,r().K8)((()=>{if(!u||(0,c().I)(u)||!t)return{showMembersButton:!1,canRequestMembers:!1};const e=!u.canEditMembership()&&!u.getDisableMembershipRequests()&&(0,l().x3)();return{showMembersButton:u.canEditMembership()||e,canRequestMembers:e}}),[u,t]);return(0,n.useCallback)((()=>{u&&p&&(u.canEditMembership()&&(null==t||t.setState({...t.state,modalOpen:!0}),s().vX(o,{type:"invite",from:e})),m&&(d().A.open(),s().vX(o,{type:"request",from:e})))}),[u,p,m,t,o,e])}},859384:(e,t,o)=>{o.d(t,{M:()=>a});o(296540);var n=o(474848);const i={viewBox:"0 0 20 20",fittedViewBox:"3.12 2.99 13.88 13.88",svg:(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("path",{d:"m16.774 4.341-.59.589-1.109-1.11.596-.594a.784.784 0 0 1 1.103 0c.302.302.302.8 0 1.102zM8.65 12.462l6.816-6.813-1.11-1.11-6.822 6.808a1.1 1.1 0 0 0-.236.393l-.289.932c-.052.196.131.38.315.314l.932-.288a.9.9 0 0 0 .394-.236"}),(0,n.jsx)("path",{d:"M4.375 6.25c0-1.036.84-1.875 1.875-1.875H11a.625.625 0 1 0 0-1.25H6.25A3.125 3.125 0 0 0 3.125 6.25v7.5c0 1.726 1.4 3.125 3.125 3.125h7.5c1.726 0 3.125-1.4 3.125-3.125V9a.625.625 0 1 0-1.25 0v4.75c0 1.036-.84 1.875-1.875 1.875h-7.5a1.875 1.875 0 0 1-1.875-1.875z"})]})},a=(0,o(340498).wt)("compose",i,"default")},888325:(e,t,o)=>{function n(e){return`${e.table}:${e.id}`}o.d(t,{_:()=>n})},888643:(e,t,o)=>{o.d(t,{k:()=>i});var n=()=>o(402014);function i(e){(0,n().SQ)(e,n().y$.Click,(()=>{}))}},890409:(e,t,o)=>{o.d(t,{Ah:()=>b,Dk:()=>g,Iv:()=>v,SF:()=>f,YO:()=>S,_f:()=>x,c_:()=>p,dW:()=>h,gW:()=>m,sp:()=>w,vN:()=>y});o(16280),o(944114),o(898992),o(354520),o(803949),o(581454),o(737550);var n=()=>o(496603),i=()=>o(973647),a=()=>o(534177),r=()=>o(842599),s=()=>o(239381),l=()=>o(179034),c=()=>o(798880),d=()=>o(201980),u=()=>o(241319);function p(e,t){e.DO_NOT_USE_commonTrackEvent({eventName:"add_automation_step",properties:t})}function m(e,t){e.DO_NOT_USE_commonTrackEvent({eventName:"delete_automation_step",properties:t})}function g(e,t){e.DO_NOT_USE_commonTrackEvent({eventName:"automation_create",properties:t})}function f(e,t){e.DO_NOT_USE_commonTrackEvent({eventName:"automation_update",properties:t})}function v(e,t){e.DO_NOT_USE_commonTrackEvent({eventName:"automation_delete",properties:t})}function b(e,t){e.DO_NOT_USE_commonTrackEvent({eventName:"automation_enable",properties:t})}function y(e,t){e.DO_NOT_USE_commonTrackEvent({eventName:"automation_disable",properties:t})}function h(e,t){e.DO_NOT_USE_commonTrackEvent({eventName:"automation_action_create",properties:t})}function S(e,t){e.DO_NOT_USE_commonTrackEvent({eventName:"automation_action_delete",properties:t})}function _(e){const{formulaAnalyticsModule:t,formulasModule:o,formulaTypecheckContextValues:n,getRecordModel:r,spaceId:l,value:c,featureGates:d}=e;if("formula"===c.type){if(!(0,a().O9)(c.value))return;const e=i().Q.unwrapOr(o.parseFormulaInputToAst(c.value),void 0);if(e){const i=o.addTypesToFormulaAST(e,{handleDataRequest:(0,s().zg)(r),spaceId:l,valueTypes:n,featureGates:d});return{...t.getFormulaAnalytics(e,{getRecordModel:r,typecheckContextValues:n}),formula_return_type:i.node.type,redacted_formula:t.getRedactedFormulaAsStringSync(e,{getRecordModel:r,typecheckContextValues:n})}}}else{if("simple"===c.type){if(!(0,a().O9)(c.value))return;return t.getSimpleFormulaAnalytics(c.value,{getRecordModel:r,typecheckContextValues:n})}(0,a().HB)(c.type)}}function x(e){const{automationActionModel:t,automationActionModels:o,formulaAnalyticsModule:i,formulasModule:l,formulaTypecheckContextValues:p,getRecordModel:m,featureGates:g,simpleFormulasModule:f}=e;return t.isType("complete_sprint")?{automation_action_id:t.pointer.id,type:"complete_sprint"}:t.isType("create_page")?function(e){const{automationActionModel:t,formulaAnalyticsModule:o,formulasModule:n,formulaTypecheckContextValues:i,getRecordModel:r,featureGates:s}=e,l=t.getConfig();let c,d=[];const u=null==l?void 0:l.collection,p=null==l?void 0:l.properties;if((0,a().O9)(u)&&(0,a().O9)(p)&&p.length>0){const e=r(u),g=null==e?void 0:e.getNormalizedSchema();(0,a().O9)(g)&&(d=p.map((e=>{var t;return(null===(t=g[e])||void 0===t?void 0:t.type)??"unknown"})));const f=null==l?void 0:l.values;if(n&&(0,a().O9)(f)){c=[];for(const e of p){var m;const a=null===(m=f[e])||void 0===m?void 0:m.value;if(!a)continue;const l=_({formulaAnalyticsModule:o,formulasModule:n,getRecordModel:r,formulaTypecheckContextValues:i,spaceId:t.spaceId,value:a,featureGates:s});l&&c.push(l)}}}return{automation_action_id:t.pointer.id,property_formula_stats:c,property_types:d,type:"create_page"}}({automationActionModel:t,formulaAnalyticsModule:i,formulasModule:l,formulaTypecheckContextValues:p,getRecordModel:m,featureGates:g}):t.isType("duplicate_blocks")?{automation_action_id:t.pointer.id,type:"duplicate_blocks"}:t.isType("modal_confirmation")?function(e){const{automationActionModel:t,formulaAnalyticsModule:o,formulasModule:n,formulaTypecheckContextValues:i,getRecordModel:r,featureGates:s}=e,l=t.getConfig(),c=[];if(n&&(0,a().O9)(l)&&l.text){const e=_({formulasModule:n,formulaAnalyticsModule:o,getRecordModel:r,formulaTypecheckContextValues:i,spaceId:t.spaceId,value:l.text,featureGates:s});e&&c.push(e)}return{automation_action_id:t.pointer.id,formula_stats:c,type:"modal_confirmation"}}({automationActionModel:t,formulaAnalyticsModule:i,formulasModule:l,formulaTypecheckContextValues:p,getRecordModel:m,featureGates:g}):t.isType("open_page")?{automation_action_id:t.pointer.id,type:"open_page"}:t.isType("query_collection")?{automation_action_id:t.pointer.id,type:"query_collection"}:t.isType("send_in_app_notification")?function(e){var t;const{automationActionModel:o,formulaAnalyticsModule:n,formulasModule:i,formulaTypecheckContextValues:r,getRecordModel:s,featureGates:l,simpleFormulasModule:c}=e,u={automation_action_id:o.pointer.id,messageCharacterCount:0,type:"send_in_app_notification"},p=o.getConfig();if(!(0,a().O9)(p))return u;if((0,a().O9)(p.target))if("formula"===p.target.type&&(0,a().O9)(p.target.value)){if(u.targetData={type:"formula",numUserFormulaTargets:(0,d().Fbh)(p.target.value.value).length,numFormulaContextTargets:c.getReferencedContextValueIds(p.target.value).length},i){const e=_({formulasModule:i,formulaAnalyticsModule:n,getRecordModel:s,formulaTypecheckContextValues:r,spaceId:o.spaceId,value:p.target.value,featureGates:l});e&&(u.formula_stats??=[],u.formula_stats.push(e))}}else if("property"===p.target.type&&(0,a().O9)(p.target.propertyId)&&(0,a().O9)(p.target.collectionPointer)){const e=s(p.target.collectionPointer),t=null==e?void 0:e.getSchema();var m;(0,a().O9)(t)&&(u.targetData={type:"property",propertyType:null===(m=t[p.target.propertyId])||void 0===m?void 0:m.type})}if((0,a().O9)(null===(t=p.notification_message)||void 0===t?void 0:t.value)&&(u.messageCharacterCount=(0,d().FAw)(p.notification_message.value),i)){const e=_({formulasModule:i,formulaAnalyticsModule:n,getRecordModel:s,formulaTypecheckContextValues:r,spaceId:o.spaceId,value:p.notification_message,featureGates:l});e&&(u.formula_stats??=[],u.formula_stats.push(e))}return u}({automationActionModel:t,formulaAnalyticsModule:i,formulasModule:l,formulaTypecheckContextValues:p,getRecordModel:m,featureGates:g,simpleFormulasModule:f}):t.isType("send_gmail_notification")?function(e){var t,o,i,s,l,u,p;const{automationActionModel:m,formulaAnalyticsModule:g,formulasModule:f,formulaTypecheckContextValues:v,getRecordModel:b,featureGates:y}=e,h=m.getConfig();if(!(0,a().O9)(h))return{automation_action_id:m.pointer.id,fields:{},recipient_domains:{},type:"send_gmail_notification"};const S=Object.fromEntries(Object.entries(h||{}).map((([e,t])=>{var o;return"formula"===(null==t?void 0:t.type)?[e,Boolean(null==t||null===(o=t.value)||void 0===o?void 0:o.value)]:"simple"===(null==t?void 0:t.type)?[e,Boolean(null==t?void 0:t.value)]:[e,Boolean(t)]}))),{to:x,cc:w,bcc:k}=h,M=[...(null==x||null===(t=x.value)||void 0===t?void 0:t.value)||[],...(null==w||null===(o=w.value)||void 0===o?void 0:o.value)||[],...(null==k||null===(i=k.value)||void 0===i?void 0:i.value)||[]],I=[...(0,d().Fbh)(M).map((e=>b({table:c().oo,id:e}))).map((e=>null==e?void 0:e.email)).filter(a().O9),...(0,r().C3)((0,d().k4p)(M))],C=n().Tr(I.map((e=>e.split("@")[1]))),A=[null===(s=h.to)||void 0===s?void 0:s.value,null===(l=h.cc)||void 0===l?void 0:l.value,null===(u=h.bcc)||void 0===u?void 0:u.value,null===(p=h.reply_to)||void 0===p?void 0:p.value,h.from_name,h.email_subject,h.email_body].map((e=>{if(f&&(0,a().O9)(e))return _({formulaAnalyticsModule:g,formulasModule:f,getRecordModel:b,formulaTypecheckContextValues:v,spaceId:m.spaceId,value:e,featureGates:y})})).filter(a().O9);return{automation_action_id:m.pointer.id,fields:S,formula_stats:A,recipient_domains:C,type:"send_gmail_notification"}}({automationActionModel:t,formulaAnalyticsModule:i,formulasModule:l,formulaTypecheckContextValues:p,getRecordModel:m,featureGates:g}):t.isType("slack_notification")?{automation_action_id:t.pointer.id,type:"slack_notification"}:t.isType("update_pages")?function(e){const{automationActionModel:t,automationActionModels:o,formulaAnalyticsModule:n,formulasModule:i,formulaTypecheckContextValues:r,getRecordModel:l,featureGates:c}=e,d=t.getConfig(),p=[],m=[],g=[];if((0,a().O9)(d)&&(0,a().O9)(d.target)&&(0,a().O9)(d.properties)&&d.properties.length>0){let e;if("variable"===d.target.type){const t=(0,s().y5)(d.target.id);if("action"===t.source){const t=(0,u().y)({actionModels:o,id:d.target.id}).collectionPointer;if((0,a().O9)(t)){const o=l(t);e=null==o?void 0:o.getNormalizedSchema()}}else{if("global"!==t.source||"button_page"!==t.global)throw new Error("Failed loading property schema");{const t=(0,s().IV)(r,d.target.id);if("block"===(null==t?void 0:t.type.type)&&(0,a().O9)(t.type.collection)){const o=l(t.type.collection);e=null==o?void 0:o.getNormalizedSchema()}}}}else if("collection"===d.target.type){const t=l(d.target.collection);e=null==t?void 0:t.getNormalizedSchema()}(0,a().O9)(e)&&d.properties.forEach((o=>{const s=e[o];if((0,a().O9)(s)&&(p.push(s.type),i&&(0,a().O9)(d.values))){const e=d.values[o];if((0,a().O9)(e)&&(m.push({type:s.type,operator:e.action}),e.value)){const o=_({formulasModule:i,formulaAnalyticsModule:n,getRecordModel:l,formulaTypecheckContextValues:r,spaceId:t.spaceId,value:e.value,featureGates:c});o&&g.push(o)}}}))}return{automation_action_id:t.pointer.id,property_configs:m,property_formula_stats:g,property_types:p,type:"update_pages"}}({automationActionModel:t,automationActionModels:o,formulaAnalyticsModule:i,formulasModule:l,formulaTypecheckContextValues:p,getRecordModel:m,featureGates:g}):t.isType("define_variables")?function(e){const{automationActionModel:t,formulaAnalyticsModule:o,formulasModule:n,formulaTypecheckContextValues:i,getRecordModel:r,featureGates:s}=e,l=t.getConfig(),c=[];if(n&&(0,a().O9)(l)&&l.values)for(const a of Object.values(l.values))if(a.value){const e=_({formulasModule:n,formulaAnalyticsModule:o,getRecordModel:r,formulaTypecheckContextValues:i,spaceId:t.spaceId,value:a.value,featureGates:s});e&&c.push(e)}return{automation_action_id:t.pointer.id,formula_stats:c,type:"define_variables"}}({automationActionModel:t,formulaAnalyticsModule:i,formulasModule:l,formulaTypecheckContextValues:p,getRecordModel:m,featureGates:g}):t.isType("http_request")?{automation_action_id:t.pointer.id,type:"http_request"}:t.isType("publish_site")?{automation_action_id:t.pointer.id,type:"publish_site"}:t.isType("worker")?{automation_action_id:t.pointer.id,type:"worker"}:void(0,a().HB)(t)}function w(e){const{automationModel:t,builderType:o="sidebar",formulaAnalyticsModule:n,formulasModule:i,formulaTypecheckContextValues:r,getRecordModel:s,featureGates:c,simpleFormulasModule:d,source:u}=e,p=[],m=t.getActionPointers().map((e=>s(e))).filter(a().O9);for(const l of t.getActionPointers()){const e=s(l);(0,a().O9)(e)&&p.push(x({automationActionModel:e,automationActionModels:m,formulaAnalyticsModule:n,formulasModule:i,formulaTypecheckContextValues:r,getRecordModel:s,featureGates:c,simpleFormulasModule:d}))}const g=[];let f,v,b;if(t.isEventType()){var y;const e=t.getEventConfiguration(),o=s(t.getParentPointer());f=t.getParentId();const n=t.getEventConfiguration();if("collection_view"===(null===(y=n.source)||void 0===y?void 0:y.type)){const e=s(n.source.pointer);(null==e?void 0:e.parent_table)===l().ev&&(b=null==e?void 0:e.parent_id),v=null==n?void 0:n.source.pointer.id}const i=null==o?void 0:o.getNormalizedSchema();if((0,a().O9)(i)){const{pagesAdded:t,pagePropertiesEdited:o}=e;if(t&&g.push({type:"page"}),"any"===o.type)g.push({condition:"any",type:"property"});else if("none"===o.type)g.push({condition:"none",type:"property"});else{let e=[];"some"===o.type?e=o.some??[]:"all"===o.type&&(e=o.all??[]);const t=[],n=[];e.forEach((e=>{var o;const r=null===(o=i[e.property])||void 0===o?void 0:o.type;(0,a().O9)(r)&&(t.push({type:r,operator:e.filter.operator}),n.push(r))})),g.push({condition:o.type,property_configs:t,property_types:n,type:"property"})}}}else if(t.isButtonType())g.push({type:"button"});else if(t.isRecurrenceType()){var h;g.push({type:"recurrence",frequency:null===(h=t.getTrigger().recurrence)||void 0===h?void 0:h.frequency})}else(0,a().HB)(t);return{automation_actions:p,automation_id:t.id,automation_triggers:g,collection_id:f,collection_view_id:v,collection_view_block_id:b,builder_type:o,source:u}}},907917:(e,t,o)=>{o.d(t,{w:()=>l,x:()=>s});var n=()=>o(741615),i=()=>o(795523),a=()=>o(979340),r=()=>o(240865);function s(e){const{billingData:t,memberCount:o}=e,n=(0,i().AI)(t),r=(0,a().dL)(n),s=(0,a().sP)(n);return r&&o<5?"invite":r?"upgrade":o<5&&!s?"invite":"none"}function l(e){const t=(0,n().lh)({spaceId:e}),o=(0,r().V)()??1;return t?s({billingData:t,memberCount:o}):"none"}},920618:(e,t,o)=>{o.r(t),o.d(t,{SidebarBottomActions:()=>k});o(296540);var n=()=>o(404694),i=()=>o(907258),a=()=>o(484714),r=()=>o(590526),s=()=>o(401497),l=()=>o(741615),c=()=>o(201941),d=()=>o(964899),u=()=>o(440375),p=()=>o(26697),m=()=>o(69708),g=()=>o(100622),f=()=>o(159588),v=()=>o(360088),b=()=>o(561241),y=()=>o(434950),h=()=>o(992933),S=()=>o(611458),_=()=>o(649495),x=()=>o(817221),w=o(474848);function k(){const e=(0,a().v3)(),t=(0,r().O$)(i().AppStoreMainEditorCurrentBlockStore),o=(0,n().V)(),k=(0,c().u)(),M=(0,r().O$)(i().AppStoreSidebarSpaceStore),I=(0,l().lh)({spaceId:null==M?void 0:M.id}),C=(0,s().IS)((()=>({container:{display:"flex",flexDirection:"column",gap:1},sidebarItemButtonStyle:f().hG,sidebarItemHoveredStyle:{background:g().Tj.sidebarItemSelectedBackground},sidebarItemActiveStyle:{...f().hG,background:g().Tj.sidebarItemSelectedBackground,color:g().Tj.text.primary}})),[]),{isTablet:A}=(0,a().Y0)(),T=(0,v().p)(),j=!(0,r().O$)(u().l),P=(0,r().K8)((()=>(null==M?void 0:M.canEdit())&&j),[M,j]),D=(0,y().v)({environment:e})&&P,B=P,R=P;return(0,w.jsxs)("div",{style:C.container,children:[T?(0,w.jsx)(b().A,{hasActivePlan:(0,l().UU)(I)}):void 0,R?(0,w.jsx)(h().A,{buttonStyles:{hoveredStyle:C.sidebarItemHoveredStyle}}):void 0,!A&&B?(0,w.jsx)(d().n,{step:"explore_templates",inAppCalloutStore:o,teamIds:k,renderTooltip:e=>(0,w.jsx)(x().L_,{...e}),children:(0,w.jsx)(_().W,{styles:{sidebarItemButtonStyle:C.sidebarItemButtonStyle,buttonHoveredStyle:C.sidebarItemHoveredStyle,sidebarItemActiveStyle:C.sidebarItemActiveStyle}})}):void 0,D?A?(0,w.jsx)(S().h,{store:t,buttonStyles:{hoveredStyle:C.sidebarItemHoveredStyle}}):(0,w.jsx)(p().m,{renderTooltip:()=>(0,w.jsx)(m().sA,{defaultMessage:"Restore deleted pages",id:"sidebar.openTrashModalButton.tooltip"}),originGap:6,placement:"right",render:e=>(0,w.jsx)(S().h,{store:t,buttonStyles:{hoveredStyle:C.sidebarItemHoveredStyle},...e})}):null]})}},921123:(e,t,o)=>{o.r(t),o.d(t,{archiveBoxFillIcon:()=>i,iconDefinition:()=>n});o(296540);const n={viewBox:"0 0 20 20",fittedViewBox:"3.12 3.12 13.75 13.75",svg:(0,o(474848).jsx)("path",{d:"M3.125 4.25c0-.621.504-1.125 1.125-1.125h11.5c.621 0 1.125.504 1.125 1.125v1.5c0 .621-.504 1.125-1.125 1.125H4.25A1.125 1.125 0 0 1 3.125 5.75zm1 3.875h11.75v7.625c0 .621-.504 1.125-1.125 1.125h-9.5a1.125 1.125 0 0 1-1.125-1.125zM8 9.875a.625.625 0 1 0 0 1.25h4a.625.625 0 1 0 0-1.25z"})},i=(0,o(340498).wt)("archiveBoxFill",n,"fill")},922952:(e,t,o)=>{o.d(t,{u:()=>r});var n=()=>o(295633),i=()=>o(302996),a=()=>o(723085);function r(e){return e instanceof a().h||e instanceof i().SpaceStore||e instanceof n().B}},923455:(e,t,o)=>{o.d(t,{Lp:()=>S,Rx:()=>x,a$:()=>_});var n=o(296540),i=()=>o(907258),a=()=>o(755531),r=()=>o(59226),s=()=>o(484714),l=()=>o(590526),c=()=>o(391400),d=()=>o(269183),u=()=>o(753721),p=()=>o(877051),m=()=>o(644914),g=()=>o(82648),f=()=>o(840247),v=()=>o(479349),b=o(474848);const y=(0,n.createContext)(null);y.displayName="SidebarStateContext";const h=2e4;function S({children:e}){const t=(0,s().v3)(),o=(0,f().r)(t),S=(0,p().V)(),{deferSidebarLoadingWhenCollapsed:_}=(0,d().b8)(t.currentUser.id),x=!(0,l().K8)((()=>(0,m().KB)(t)),[t])&&_&&S,[w,k]=(0,n.useState)(!1);(0,n.useEffect)((()=>{const e=setTimeout((()=>{k(!0)}),h);return()=>{clearTimeout(e)}}),[]);const{currentUserId:M,spaceId:I,isFreshStateReady:C}=(0,l().K8)((()=>{var e,t,n,r;null!==(e=i().default.state.currentUserStore)&&void 0!==e&&e.id&&null!==(t=(0,a().S)())&&void 0!==t&&t.id&&(0,g().yd)("user_and_space_stores_loaded");const s=null===(n=i().default.state.currentUserStore)||void 0===n?void 0:n.id,l=null===(r=(0,a().S)())||void 0===r?void 0:r.id;if(x)return{currentUserId:s,spaceId:l,isFreshStateReady:!1};const d=o.state,u=c().A.state.initialRenderCompleted;return{currentUserId:s,spaceId:l,isFreshStateReady:(0,v().XA)({sidebarState:d,userId:s,spaceId:l,isInitialPageRenderCompleted:u})}}),[o,x]),A=(0,r().X)("enable_greedy_sidebar_initial_render"),T=(0,u().X)(),j=(0,v().cT)({isFreshStateReady:C,userId:M,spaceId:I}),P=(0,l().K8)((()=>{const e=null==j?void 0:j.state;return Boolean(M===(null==e?void 0:e.userId)&&I===(null==e?void 0:e.spaceId))}),[j,M,I]),D=Boolean(P&&(T||A)&&!C&&!w);return(0,b.jsx)(y.Provider,{value:D?j:o,children:e})}function _(){const e=(0,n.useContext)(y),t=(0,s().v3)(),o=(0,f().r)(t);return e??o}function x(){return(0,l().O$)(_())}},929680:(e,t,o)=>{o.r(t),o.d(t,{PublicPageSidebarContent:()=>w});o(296540);var n=()=>o(907258),i=()=>o(590526),a=()=>o(302996),r=()=>o(267956),s=()=>o(96689),l=()=>o(607743),c=()=>o(484714),d=()=>o(401497),u=()=>o(611648),p=()=>o(150669),m=()=>o(295633),g=()=>o(946065),f=()=>o(179034),v=()=>o(69708),b=()=>o(279047),y=()=>o(376254),h=()=>o(675540),S=()=>o(994269),_=o(474848);function x(e){const t=(0,i().uB)(void 0,p().A),o=(0,c().Y0)(),{spaceStore:a,sectionLabel:s=(0,_.jsx)(v().sA,{id:"publicPageSidebarScrollableOutliner.templateSectionLabel",defaultMessage:"Template includes"}),rootBlockId:l}=e,x=(0,i().K8)((()=>{var e;return null===(e=r().A.state.publicPageData)||void 0===e?void 0:e.spaceId}),[]),w=(0,i().O$)(n().AppStoreMainEditorCurrentBlockStore),k=(0,i().K8)((()=>w&&l&&x?[m().B.createChildStore(w,{table:f().ev,id:l,spaceId:x})]:[]),[w,l,x]),M=(0,d().IS)((()=>({scroller:{height:"100%"},outliner:{display:"block"},scrollBorderContainer:{width:o.isPhone?void 0:"calc(100% - 1px)"}})),[o.isPhone]);return(0,_.jsxs)(_.Fragment,{children:[(0,_.jsx)("div",{style:M.scrollBorderContainer,children:(0,_.jsx)(b().A,{scrollerStore:t,type:"top"})}),(0,_.jsx)(y().H,{type:u().A.Y,store:t,style:M.scroller,children:(0,_.jsx)(h().Ay,{type:g().yy,from:"main_sidebar",sectionLabel:s,shouldPersistToggleState:!0,spaceStore:a,spaceViewStore:void 0,showAddButton:!1,labelTooltip:null,renderSidebar:()=>(0,_.jsx)(S().T,{id:g().yy,type:g().yy,childStores:k,parentStore:void 0,disabled:!0,style:M.outliner,itemDepth:0,itemOpenByDefault:!0,"aria-labelledby":"template-includes",isHeaderless:!1,from:"main_sidebar"})})},g().yy)]})}function w(e){var t;const o=(0,i().O$)(n().AppStoreMainEditorCurrentBlockStore),c=(0,i().K8)((()=>r().A.state.publicPageData),[]),d=(0,i().K8)((()=>{if(o&&null!=c&&c.spaceId)return a().SpaceStore.createChildStore(o,{table:s().NX,id:c.spaceId})}),[o,c]);return d?(0,_.jsxs)(_.Fragment,{children:[(0,_.jsx)(l().e,{}),(0,_.jsx)(x,{spaceStore:d,rootBlockId:null==c||null===(t=c.template)||void 0===t?void 0:t.blockId})]}):null}},931513:(e,t,o)=>{o.d(t,{A:()=>l,o:()=>s});var n=()=>o(314529);var i=()=>o(206267),a=()=>o(981046),r=()=>o(644837);function s(e,t){const o=i().JW();!function(e,t){(0,n().DO_NOT_USE_trackLegacy)(e,"subscription_update_modal_open",t)}(e,{modal_id:o,currency_code:a().H.selectedCurrencyCode,...t.analyticsArgs,desiredProducts:t.desiredProducts,desiredInterval:t.desiredInterval}),r().j.open({modalId:o,...t})}function l(e,t){!function(e,t){(0,n().DO_NOT_USE_trackLegacy)(e,"subscription_update_modal_exit",{modal_id:t.modalId})}(e,{modalId:t}),r().j.setState({open:!1})}},946561:(e,t,o)=>{o.d(t,{s:()=>i});var n=()=>o(929219);function i(){return n().A.state.online}},962753:(e,t,o)=>{o.d(t,{EH:()=>y,FO:()=>v,P$:()=>b,VA:()=>g,h0:()=>d,lM:()=>u,mq:()=>f});o(898992),o(581454),o(737550);var n=()=>o(907258),i=()=>o(242422),a=()=>o(763765),r=()=>o(613848),s=()=>o(496603),l=()=>o(534177),c=()=>o(822789);function d(e){const{currentUserRootStore:t}=n().default.state;if(!t)return!1;const o=t.getSpaceViewStores();return(0,s().oE)(null==o?void 0:o.map((e=>e.getSpaceId()))).map((t=>r().A.getData(e,{spaceId:t,userId:e.currentUser.id}))).some((e=>p(e)))}function u(e,t){return p(r().A.getData(e,{spaceId:t,userId:e.currentUser.id}))}function p(e){switch(null==e?void 0:e.membershipType){case void 0:case"none":case"page_guest":return!1;case"restricted_member":case"member":case"membership_admin":case"owner":return!0===e.is_sales_assisted;default:(0,l().HB)(e)}}function m(e,t){if(!t)return"control";if(u(e,t))return"control";const o=i().default.getEligibleGroup({experimentId:"ai_product_retention_simplified_input",defaultGroup:"control"});return"input"===o||"input_and_ask_mode"===o?o:"control"}function g(){switch(i().default.getEligibleGroup({experimentId:"ai_product_retention_agent_follow_ups",defaultGroup:"control"})){case"button_nudge":return["button","nudge"];case"button_control":return["button","default"];case"nudge":return["nudge"];default:return}}function f(e,t){const o=i().default.checkGate({gateName:"agent_deep_find"}),n=void 0!==t&&u(e,t),r=e.currentUser.id,s=!t||!r||a().t.USEWITHCAUTION_isFetchedForSpaceAndUserId({spaceId:t,userId:r}),l=o||!n&&s&&"on"===i().default.getEligibleGroup({experimentId:"ai_product_retention_deepfind",defaultGroup:"control"}),c=b(e,t);return{agentDeepFindEnabled:l,useReadOnlyMode:l&&c}}function v(e,t){if(t?(0,c().vp)(t):(0,c().hw)())return!0;return"control"!==m(e,t)}function b(e,t){return"input_and_ask_mode"===m(e,t)}function y(){return"on"===i().default.getEligibleGroup({experimentId:"ai_product_retention_agent_speculative_search",defaultGroup:"control"})}},981440:(e,t,o)=>{o.r(t),o.d(t,{AiLandingPageExperimentSwitcher:()=>I});var n=o(296540),i=()=>o(59226),a=()=>o(248140),r=()=>o(819121),s=()=>o(590526),l=()=>o(401497),c=()=>o(127833),d=()=>o(250910),u=()=>o(695115),p=()=>o(546926),m=()=>o(890492),g=()=>o(81068),f=()=>o(663639),v=()=>o(736847),b=()=>o(212727),y=()=>o(69708),h=()=>o(534177),S=()=>o(477293),_=()=>o(554283),x=()=>o(46986),w=()=>o(907893),k=o(474848);const M=(0,y().YK)({aiLandingPageExperimentSwitcher:{id:"aiLandingPageExperimentSwitcher",defaultMessage:"AI Landing Page Experiment Switcher"}});function I(e){const t=e.sidebarItemHoverStore,o=e.sidebarTooltipStore,i=(0,y().tz)(),a=(0,s().O$)(t),p=(0,n.useMemo)((()=>!1),[]),m=a.isSidebarItemHovered||a.isSidebarItemFocused,g=(0,w().Kd)(),f=(0,l().IS)((()=>({button:{...g.button,height:24,width:24,margin:0},iconContainer:{pointerEvents:m?"auto":"none",opacity:m?1:0,transition:"opacity 0.1s ease-in-out"}})),[g.button,m]),[v,h]=(0,_().B)();(0,n.useEffect)((()=>{t.setState({...t.state,isActionButton2Hovered:h})}),[h,t]);const S=(0,n.useCallback)((e=>{const o=e.target;o instanceof HTMLElement&&(0,r().p)(o)&&t.setState({...t.state,isActionButton2Focused:!0})}),[t]),x=(0,n.useCallback)((()=>{t.setState({...t.state,isActionButton2Focused:!1})}),[t]);return p?(0,k.jsx)(d().A,{popupType:c().nl.Popup,renderOrigin:e=>(0,k.jsx)("div",{ref:v,style:f.iconContainer,children:(0,k.jsx)(u().A,{onFocus:S,onBlur:x,...e,style:f.button,icon:{icon:b().gearIcon,size:"default"},onClick:()=>{o.reset(),e.onClick()},ariaLabel:i.formatMessage(M.aiLandingPageExperimentSwitcher)})}),render:e=>(0,k.jsx)(T,{onSelect:()=>{e.close(),o.reset()}})}):null}const C=["prod_mwn","custom_agents"],A={prod_mwn:{ai_sidebar_v2:"unified_home",ai_home_rollout:!0,posts_prototype:"control",agent_enabled:!0,custom_agents:!1,agent_model_picker:!1},custom_agents:{ai_sidebar_v2:"unified_home",ai_home_rollout:!0,posts_prototype:"control",agent_enabled:!0,custom_agents:!0,agent_model_picker:!0}};function T(e){const{onSelect:t}=e,o=(0,S().r)("ai_sidebar_v2"),r=(0,i().X)("ai_home_rollout"),s=(0,S().r)("posts_prototype"),l=(0,x().i7)(),c=(0,i().X)("agent_model_picker"),d=(0,i().X)("custom_agents"),u=(0,n.useMemo)((()=>{for(const e of C){const{ai_sidebar_v2:t,ai_home_rollout:n,posts_prototype:i,agent_enabled:a,custom_agents:u,agent_model_picker:p}=A[e];if(t===o&&n===r&&i===s&&a===l&&u===d&&p===c)return e}}),[o,r,s,l,d,c]),b=(0,n.useCallback)((e=>{const{ai_sidebar_v2:t,ai_home_rollout:o,posts_prototype:n,custom_agents:i,agent_model_picker:r}=A[e];a().A.updateLocalOverrideConfig("ai_sidebar_v2",t),a().A.updateLocalOverrideGate("ai_home_rollout",o),a().A.updateLocalOverrideConfig("posts_prototype",n),a().A.updateLocalOverrideGate("custom_agents",i),a().A.updateLocalOverrideGate("agent_model_picker",r)}),[]);return(0,k.jsx)(m().A,{menuType:p().gu.Popup,width:320,children:(0,k.jsx)(f().A,{type:f().O.Vertical,initialFocus:void 0,sections:[{key:"sidebar_variants",render:e=>(0,k.jsx)(v().A,{...e}),items:C.map((e=>({key:e,render:t=>(0,k.jsx)(g().A,{...t,title:j(e),caption:P(e),isChecked:u===e}),action:()=>{b(e),t()}})))}]})})}function j(e){return"prod_mwn"===e?(0,k.jsx)(y().sA,{id:"aiLandingPageExperimentSwitcher.separateAiLandingPageProdMWN",defaultMessage:"✨ Prod MWN"}):"custom_agents"===e?(0,k.jsx)(y().sA,{id:"aiLandingPageExperimentSwitcher.customAgents",defaultMessage:"🔧 Custom Agents"}):void(0,h().HB)(e)}function P(e){return"prod_mwn"===e?(0,k.jsx)(y().sA,{id:"aiLandingPageExperimentSwitcher.controlDescription",defaultMessage:"Prod experience (Agent, Personalization)."}):"custom_agents"===e?(0,k.jsx)(y().sA,{id:"aiLandingPageExperimentSwitcher.customAgentsDescription",defaultMessage:"Agents and custom agents enabled, AI still on home."}):void(0,h().HB)(e)}},984007:(e,t,o)=>{o.d(t,{Ay:()=>l,Gi:()=>a,Wc:()=>n,pF:()=>r,vS:()=>i});const n="loadingLocalImage",i="uploading",a="downloading",r="loaded";class s extends(()=>o(757695))().Store{getInitialState(){return{loadingMode:r}}}const l=s},985867:(e,t,o)=>{o.d(t,{M:()=>c,w:()=>l});o(814603),o(147566),o(198721);var n=()=>o(907258),i=()=>o(755531),a=()=>o(675133),r=()=>o(246766),s=()=>o(845899);function l(e={}){var t;const{utm_source:o,utm_campaign:r,utm_medium:l,utm_content:c,utm_term:d}=e,u=n().default.state.currentUserStore,p=null==u?void 0:u.id,m=null==u?void 0:u.getEmail(),g=(null==u||null===(t=u.getFullName(a().A.intl))||void 0===t?void 0:t.trim())||"";let f=g,v="";const b=g.indexOf(" ");-1!==b&&(f=g.slice(0,b),v=g.slice(b+1));const y=(0,i().S)(),h=null==y?void 0:y.getSubscriptionTier();s().M.setState({...s().M.state,isModalOpen:!0,userId:p,email:m,firstName:f,lastName:v,plan:h,utm_source:o,utm_campaign:r,utm_medium:l,utm_content:c,utm_term:d})}function c(e){const{environment:t}=e;s().M.setState({...s().M.state,isModalOpen:!1});const o=new URL(window.location.href);o.searchParams.delete("setupSessions"),o.searchParams.delete("User-ID"),o.searchParams.delete("email"),o.searchParams.delete("firstName"),o.searchParams.delete("lastName"),o.searchParams.delete("utm_source"),o.searchParams.delete("utm_campaign"),o.searchParams.delete("utm_medium"),o.searchParams.delete("utm_content"),o.searchParams.delete("utm_term"),(0,r().navigate)({environment:t,url:o.toString()})}},991318:(e,t,o)=>{o.d(t,{s:()=>d});var n=o(296540),i=()=>o(481887),a=()=>o(139646),r=()=>o(79926);const s=new(r().O2)("CalendarAgendaView",(async()=>await Promise.all([o.e(71003),o.e(43288),o.e(50462)]).then(o.bind(o,388594)))),l=(0,r()._h)(s,(e=>e.CalendarAgendaView));var c=o(474848);const d=(0,n.forwardRef)((function(e,t){const r=(0,o(590526).O$)(o(749687).sidebarWidthStore),s=(0,n.useRef)(),d=(0,n.useRef)(),u=(0,o(484714).v3)(),[p,m]=(0,n.useState)(!1),[g,f]=(0,n.useState)(!1),v=(0,n.useRef)(null),b=(0,n.useCallback)((e=>{"function"==typeof t?t(e):t&&(t.current=e),v.current=e}),[t]);(0,n.useEffect)((()=>()=>{s.current&&(cancelAnimationFrame(s.current),s.current=void 0)}),[]);const y=(0,o(401497).IS)((()=>({popup:{display:"flex",flexDirection:"column",width:r-24+"px",maxHeight:"276px",minWidth:"376px",overflow:"visible",marginBottom:"10px"},originContainer:{height:e.originContainerHeight??"initial",width:e.originContainerWidth??"initial"}})),[r,e.originContainerHeight,e.originContainerWidth]),{days:h,eventsLoadingState:S,displayState:_}=(0,o(196459).O)("personal_home"),x={panelState:(0,o(658082).oM)(_),view:"notionAgendaView"};function w(){if(e.canShowCustomPopover){if(s.current&&(cancelAnimationFrame(s.current),s.current=void 0),e.hideUpsellPopover(),!d.current){const{panelState:e}=x;"connected_with_events"!==e&&"connected_no_events"!==e||(d.current=setTimeout((()=>(0,i().qL)({environment:u,calendarPanelContext:(0,i().sp)(x)})),200))}m(!0)}}function k(){d.current&&(clearTimeout(d.current),d.current=void 0),s.current=requestAnimationFrame((()=>{m(!1),f(!1)}))}return(0,c.jsx)(o(296060).a.Provider,{value:x,children:(0,c.jsx)(o(127833).zD,{preventCaptureEsc:!0,forceInitialInbound:!0,disableDarkOverlayBackground:!0,trapFocus:!1,preventScaleTransition:!1,preventOpacityTransition:!1,popupWrapStyle:y.popup,disableMouseCapture:!0,open:p,popupType:o(30537).n.Popup,onAnimationEnd:()=>f(p),alignmentToOrigin:e.alignmentToOrigin,placementToOrigin:e.placementToOrigin,viewportPadding:6,originGap:e.originGap,style:a().z.style,animationConfig:a().z.animationConfig,render:()=>(0,c.jsx)(l,{iconRef:v,openAnimationEnded:g,isLoading:"resolved"!==S.status,days:h,onMouseOver:w,onMouseLeave:k,placement:e.placementToOrigin}),origin:(0,c.jsx)("div",{ref:b,onMouseEnter:w,onMouseLeave:k,style:y.originContainer,children:e.originElement})})})}))}}]);