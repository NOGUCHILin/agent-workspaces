"use strict";(globalThis.webpackChunknotion_next=globalThis.webpackChunknotion_next||[]).push([[23730],{8633:(e,t,o)=>{o.d(t,{b:()=>l});o(898992),o(354520),o(672577),o(581454),o(296540);var r=()=>o(69708),i=()=>o(284371),n=()=>o(764880),s=()=>o(268809),a=o(474848);function l(e){const{intl:t,authors:o,currentUserId:l,isCondensedFormat:d=!1,fontWeightForAuthorNames:c="semibold",precomputedActorNames:u}=e,p=o.find((e=>e.id===l)),h={fontWeight:c?i().Wy[c]:i().Wy.semibold},f=u??o.filter((e=>e!==p)).map((e=>(0,n().lR)(t,e)));if(l&&p){if(0===f.length)return(0,a.jsx)("span",{children:(0,a.jsx)(r().sA,{...s().U.forOneAuthorCurrentUser})});if(1===f.length)return(0,a.jsx)("span",{children:(0,a.jsx)(r().sA,{...s().U.forTwoAuthorsCurrentUser,values:{firstAuthor:f[0],b:e=>(0,a.jsx)("span",{style:h,children:e})}})});if(2===f.length)return(0,a.jsx)("span",{children:(0,a.jsx)(r().sA,{...s().U.forThreeAuthorsCurrentUser,values:{firstAuthor:f[0],secondAuthor:f[1],b:e=>(0,a.jsx)("span",{style:h,children:e})}})});if(f.length>2){const e=(0,a.jsx)(r().sA,{...s().U.forMoreThanThreeAuthorsCurrentUser,values:{numberOfOtherAuthors:f.length-1,firstAuthor:f[0],b:e=>(0,a.jsx)("span",{style:h,children:e})}});return(0,a.jsx)("span",{children:e})}}else{if(1===f.length)return(0,a.jsx)("span",{children:(0,a.jsx)(r().sA,{...s().U.forOneAuthor,values:{author:f[0],b:e=>(0,a.jsx)("span",{style:h,children:e})}})});if(2===f.length)return d?(0,a.jsx)("span",{children:(0,a.jsx)(r().sA,{...s().U.forTwoAuthorsCondensed,values:{firstAuthor:f[0],secondAuthor:f[1],b:e=>(0,a.jsx)("span",{style:h,children:e})}})}):(0,a.jsx)("span",{children:(0,a.jsx)(r().sA,{...s().U.forTwoAuthors,values:{firstAuthor:f[0],secondAuthor:f[1],b:e=>(0,a.jsx)("span",{style:h,children:e})}})});if(f.length>2){if(d){const e=(0,a.jsx)(r().sA,{...s().U.forMoreThanTwoAuthorsCondensed,values:{numberOfOtherAuthors:f.length-1,firstAuthor:f[0],b:e=>(0,a.jsx)("span",{style:h,children:e})}});return(0,a.jsx)("span",{children:e})}{const e=(0,a.jsx)(r().sA,{...s().U.forMoreThanTwoAuthors,values:{numberOfOtherAuthors:f.length-2,firstAuthor:f[0],secondAuthor:f[1],b:e=>(0,a.jsx)("span",{style:h,children:e})}});return(0,a.jsx)("span",{children:e})}}}return(0,a.jsx)("span",{children:(0,a.jsx)(r().sA,{...s().U.someone})})}},110886:(e,t,o)=>{o.d(t,{X:()=>l,r:()=>d});o(18107),o(967357),o(581454);var r=()=>o(604995),i=()=>o(161479),n=()=>o(753812);const s=20,a=20;async function l(e,t){const{store:o,activityIds:r,spaceId:l,filterActivityTypes:d,filterDateRange:u,navigableBlockId:p,collectionIds:h,authorId:f,source:g}=t,m=r[0],y="person_profile"===g&&f?await n().callApi({eventName:"getRecentActivityFeed",environment:e,data:{spaceId:l,authorId:f,limit:a}}):await n().callApi({eventName:"getActivityLog",environment:e,data:{spaceId:l,navigableBlock:p?{id:p,spaceId:(0,i().e)(void 0)}:void 0,collections:h?h.map((e=>({id:e,spaceId:(0,i().e)(void 0)}))):void 0,endingBeforeId:m,limit:s,activityTypes:d,...c(u),authorId:f}});if("failed"===y.type)throw y.error;const v=y.data.activityIds;o.update((e=>({...e,shouldLoadNewerActivities:!1,activityIds:v.concat(r)})))}async function d(e,t){const{store:o,activityIds:r,spaceId:l,filterActivityTypes:d,filterDateRange:u,navigableBlockId:p,collectionIds:h,authorId:f,source:g}=t,m=r.at(-1),y="person_profile"===g&&f?await n().callApi({eventName:"getRecentActivityFeed",environment:e,data:{spaceId:l,startingAfterId:m,authorId:f,limit:a}}):await n().callApi({eventName:"getActivityLog",environment:e,data:{spaceId:l,navigableBlock:p?{id:p,spaceId:(0,i().e)(void 0)}:void 0,collections:h?h.map((e=>({id:e,spaceId:(0,i().e)(void 0)}))):void 0,startingAfterId:m,limit:s,activityTypes:d,...c(u),authorId:f}});if("failed"===y.type)throw y.error;const v=y.data.activityIds;o.update((e=>({...e,shouldLoadOlderActivities:!1,activityIds:r.concat(v),hasOlderActivities:v.length>0})))}function c(e){var t,o;const i=null!==(t=e.ending)&&void 0!==t&&t.start_date?r().C6.isoToUnixMs(e.ending.start_date):void 0;return{startingAfterTimeMs:null!==(o=e.starting)&&void 0!==o&&o.start_date?r().C6.isoToUnixMs(e.starting.start_date):void 0,endingBeforeTimeMs:i?r().K1({date:i,daysToAdd:1}):void 0}}},132533:(e,t,o)=>{o.d(t,{X:()=>a,l:()=>s});var r=o(296540),i=o(474848);const n={hoveredIndex:null,setHoveredIndex:()=>{}},s=(0,r.createContext)(n);function a(e){const{children:t}=e,[o,n]=(0,r.useState)(null),a=(0,r.useMemo)((()=>({hoveredIndex:o,setHoveredIndex:n})),[o]);return(0,i.jsx)(s.Provider,{value:a,children:t})}s.displayName="InboxNotificationHoverContext"},268809:(e,t,o)=>{o.d(t,{U:()=>r});const r=(0,o(69708).YK)({forOneAuthorCurrentUser:{id:"authorPhrase.forOneAuthorCurrentUser.label",defaultMessage:"You"},forTwoAuthorsCurrentUser:{id:"authorPhrase.forTwoAuthorsCurrentUser.label",defaultMessage:"<b>{firstAuthor}</b> and you"},forThreeAuthorsCurrentUser:{id:"authorPhrase.forThreeAuthorsCurrentUser.label",defaultMessage:"<b>{firstAuthor}</b>, <b>{secondAuthor}</b>, and you"},forMoreThanThreeAuthorsCurrentUser:{id:"authorPhrase.forMoreThanThreeAuthorsCurrentUser.label",defaultMessage:"{numberOfOtherAuthors, plural, one {<b>{firstAuthor}</b>, you, and {numberOfOtherAuthors} other} other {<b>{firstAuthor}</b>, you, and {numberOfOtherAuthors} others}}"},forOneAuthor:{id:"authorPhrase.forOneAuthor.label",defaultMessage:"<b>{author}</b>"},forTwoAuthorsCondensed:{id:"authorPhrase.forTwoAuthorsCondensed.label",defaultMessage:"<b>{firstAuthor}</b>, <b>{secondAuthor}</b>"},forTwoAuthorsPushNotification:{id:"authorPhrase.forTwoAuthorsPushNotification.label",defaultMessage:"{firstAuthor} and {secondAuthor}"},forTwoAuthors:{id:"authorPhrase.forTwoAuthors.label",defaultMessage:"<b>{firstAuthor}</b> and <b>{secondAuthor}</b>"},forMoreThanTwoAuthorsCondensed:{id:"authorPhrase.forMoreThanTwoAuthorsCondensed.label",defaultMessage:"{numberOfOtherAuthors, plural, one {<b>{firstAuthor}</b>, {numberOfOtherAuthors} other} other {<b>{firstAuthor}</b>, {numberOfOtherAuthors} others}}"},forMoreThanTwoAuthorsPushNotification:{id:"authorPhrase.forMoreThanTwoAuthorsPushNotification.label",defaultMessage:"{numberOfOtherAuthors, plural, one {{firstAuthor} and {numberOfOtherAuthors} other} other {{firstAuthor}, {numberOfOtherAuthors} others}}"},forMoreThanTwoAuthors:{id:"authorPhrase.forMoreThanTwoAuthors.label",defaultMessage:"{numberOfOtherAuthors, plural, =0 {<b>{firstAuthor}</b>, <b>{secondAuthor}</b>} one {<b>{firstAuthor}</b>, <b>{secondAuthor}</b>, and {numberOfOtherAuthors} other} other {<b>{firstAuthor}</b>, <b>{secondAuthor}</b>, and {numberOfOtherAuthors} others}}"},someone:{id:"authorPhrase.someone.label",defaultMessage:"Someone"}})},268933:(e,t,o)=>{o.d(t,{DU:()=>w,G7:()=>j,Ln:()=>A,T9:()=>C,U6:()=>M,bD:()=>I,pN:()=>T});o(18107),o(967357),o(898992),o(430670),o(581454),o(737550);var r=()=>o(907258),i=()=>o(675133),n=()=>o(770063),s=()=>o(295633),a=()=>o(732810),l=()=>o(849255),d=()=>o(764880),c=()=>o(8633),u=()=>o(601813),p=()=>o(179034),h=()=>o(824862),f=()=>o(519831),g=()=>o(197959),m=()=>o(798880),y=()=>o(201980),v=()=>o(220719),x=()=>o(496603),b=()=>o(534177),S=()=>o(761309);function j({actor:e,environment:t}){return e.isBot()?2:t.currentUser.id===e.id?1:0}function A(e){const{edits:t,rootStore:o}=e,r=x().Mp(t.flatMap((e=>e.authors||[])),x().n4),i=x().oE(r.map((e=>C(e,o))));return i.sort(((e,t)=>j({actor:e,environment:o.environment})-j({actor:t,environment:o.environment}))),i}function I(e,t){const{currentUserStore:o}=r().default.state,n=null==o?void 0:o.id;return(0,c().b)({intl:i().A.getIntl(),authors:e,currentUserId:n,fontWeightForAuthorNames:t})}function C(e,t){if(e.table===m().oo){const o=function(e,t){const o=l().L.createChildStore(t,{table:m().oo,id:e});return o.getValue()}(e.id,t);if(o)return(0,d().A7)(o)}else{const o=function(e,t){const o=(0,n().v3)(t,{table:h().GP,id:e});return o.getValue()}(e.id,t);if(o)return(0,d().qt)(o)}}function w(e){const{tab:t,recordId:o,recordType:r,rootStore:i,environment:n}=e;if("all"===t||"personProfile"===t){if(!o)return!1;let e;return"block"===r?e=s().B.createChildStore(i,{table:p().ev,id:o}):"collection"===r?e=a().m.createChildStore(i,{table:f().Vl,id:o}):(0,b().HB)(r),(0,S().X9)(n,e)}return!1}function M(e){const{activity:t,rootStore:o}=e;if("commented"!==t.type)return;const r=o.getRecordModel({table:g().$Y,id:t.discussion_id,spaceId:t.space_id});if(!r)return;const i=T(r);return i?{id:r.id,context:i}:void 0}function T(e){const t=e.getPersistedContext(),o=t?(0,u().l8)({discussionContextData:t,discussionType:(0,v().o9)(e.getType()),discussionId:e.id,intl:i().A.getIntl()}):void 0;if(o)return(0,y().JJ$)(o,(t=>!(0,y().iQL)(t)||(0,y().Orm)(t)===e.id))}},344417:(e,t,o)=>{o.r(t),o.d(t,{iconDefinition:()=>r,magnifyingGlassSmallIcon:()=>i});o(296540);const r={viewBox:"0 0 16 16",fittedViewBox:"1.97 1.97 12.46 12.46",svg:(0,o(474848).jsx)("path",{d:"M7.1 1.975a5.125 5.125 0 1 0 3.155 9.164l3.107 3.107a.625.625 0 1 0 .884-.884l-3.107-3.107A5.125 5.125 0 0 0 7.1 1.975M3.225 7.1a3.875 3.875 0 1 1 7.75 0 3.875 3.875 0 0 1-7.75 0"})},i=(0,o(340498).wt)("magnifyingGlassSmall",r,"small")},375555:(e,t,o)=>{function r(e,t){const{device:o}=e;o.isAndroid&&t.focus(),t.select()}o.d(t,{G:()=>r})},419357:(e,t,o)=>{o.d(t,{Ay:()=>b,KF:()=>x,LG:()=>m,Zf:()=>v,yD:()=>y});var r=o(296540),i=()=>o(484714),n=()=>o(401497),s=()=>o(718827),a=()=>o(695115),l=()=>o(31511),d=()=>o(546926),c=()=>o(424400),u=()=>o(340498),p=()=>o(100622),h=()=>o(496603),f=()=>o(284371),g=o(474848);const m=30,y=28;function v(e){const{icon:t}=e;return t({fill:p().Tj.icon.secondary,width:u().Ev.sm,height:u().Ev.sm,flexGrow:0,flexShrink:0})}function x(e){const t=(0,i().WS)(),o=(0,n().eP)(),r=(0,n().IS)((()=>({outlineButton:{...(0,s().qq)({shape:"default",size:"sm",hasIconOnly:!0,isButtonGapEnabled:!0}),fontWeight:f().Wy.medium,lineHeight:1.2,border:`1px solid ${p().Tj.border.primaryTranslucent}`,background:e.hasBackground?p().Tj.background.primary:void 0},outlineButtonHovered:{background:p().Tj.background.secondary},outlineButtonPressed:{background:(0,s().yZ)({color:p().Tj.background.primary,mode:o})}})),[e.hasBackground,o]);return(0,g.jsx)(a().A,{size:"xs",colorVariant:"primary",...e,ariaLabel:e.ariaLabel,style:{...r.outlineButton,...e.style,height:t?m:y,width:t?m:y},hoveredStyle:r.outlineButtonHovered,pressedStyle:r.outlineButtonPressed})}const b=r.forwardRef((function({preventCaptureArrowShortcuts:e,preventCaptureDeleteWhenEmpty:t,preventCaptureClipboardShortcuts:i,preventCaptureSpacebarWhenEmpty:n,...s},a){const{left:l,right:u,inputLeft:p,inputRight:f,inputRightStyle:m,disableInput:y,inputOuterStyle:v,rightMobileEditLabel:x,mobileKeyboardOnDismiss:b,style:S,value:I,onChange:C,autosize:w,autosizeMinHeight:M,autosizeMaxHeight:T,customElementAttributes:P,disabled:k,format:R,id:L,placeholder:B,type:D,autoFocus:E,focus:U,focusInitial:O,focusAfterAnimation:N,forceShowClearButton:_,ignoreKeyboardMode:K,inputElementAttributes:F,inputStyle:W,isRightLastElementOfInput:V,maxlength:z,min:H,max:$,selectAll:G,showClearButton:Y,suppressFocusRing:X,textarea:Q,textareaSubmitOnEnter:J,onBlur:Z,onCancel:q,onClearButtonClick:ee,onClick:te,onFocus:oe,onKeyDown:re,onSubmit:ie,...ne}=s,[se,ae]=(0,r.useState)((()=>Boolean(U||O)));(0,r.useEffect)((()=>{void 0!==U&&ae(U)}),[U]);const le=e?void 0:h().D_,de=!t||I.length>0?h().D_:void 0,ce=i?void 0:h().D_,ue=!n||I.length>0?h().D_:void 0,pe=(0,d().Tf)(),he=(0,r.useContext)(d().xu),fe=(0,r.useRef)(null),ge={value:I,onChange:C,autosize:w,autosizeMinHeight:M,autosizeMaxHeight:T,customElementAttributes:P,disabled:k,format:R,id:L,placeholder:B,type:D,autoFocus:E,focus:U,focusInitial:O,focusAfterAnimation:N,forceShowClearButton:_,ignoreKeyboardMode:K,inputElementAttributes:F,inputStyle:W,isRightLastElementOfInput:V,maxlength:z,min:H,max:$,selectAll:G,showClearButton:Y,suppressFocusRing:X,textarea:Q,textareaSubmitOnEnter:J,onBlur:Z,onCancel:q,onClearButtonClick:ee,onClick:te,onFocus:oe,onKeyDown:re,onSubmit:ie};return(0,g.jsx)(o(782482).N,{debugName:"InputMenuItem",capture:!0,onUntab:h().D_,onTab:h().D_,onSelectAll:h().D_,onRedo:h().D_,onUndo:h().D_,onToggleBold:h().D_,onToggleItalics:h().D_,onToggleCode:h().D_,onCut:ce,onCopy:ce,onPaste:ce,onKeypress:h().D_,onLeft:le,onRight:le,onDelete:de,onBackspace:de,onSpace:ue,children:o(726637).A.isMobile?(0,g.jsxs)(g.Fragment,{children:[(0,g.jsx)(c().Ay,{ref:a,...ne,itemMarginLeft:pe?8:void 0,style:S,title:(0,g.jsx)(A,{ref:fe,left:l,right:u,inputLeft:p,inputRight:f,inputRightStyle:m,disableInput:y,inputOuterStyle:v,rightMobileEditLabel:x,isFocused:se,setIsFocused:ae,...ge})}),(0,g.jsx)(o(797324).A,{show:se&&he.menuType!==d().gu.ActionSheet,onDismiss:b,inputRef:fe})]}):(0,g.jsx)(c().Ay,{ref:a,...ne,left:l,right:u,isTokenTitle:!0,title:(0,g.jsx)(j,{ref:fe,disableInput:y,inputOuterStyle:v,inputRight:f,inputRightStyle:m,inputLeft:p,...ge}),style:{paddingTop:4,paddingBottom:4,...S}})})}));function S({rightMobileEditLabel:e,inputRef:t}){const n=(0,i().v3)(),a=(0,r.useCallback)((e=>{e.preventDefault();const r=t.current;r&&(0,o(375555).G)(n,r)}),[n,t]);return(0,g.jsx)(s().Ay,{onClick:a,style:{color:p().Tj.text.secondary},children:e})}const j=r.forwardRef((function(e,t){const{disabled:o,disableInput:r,inputOuterStyle:i,inputRight:n,inputRightStyle:s,inputLeft:a,min:d,textarea:c,...u}=e;return(0,g.jsx)(l().A,{...u,ref:t,disabled:o||r,style:{height:c?void 0:28,padding:"3px 6px",...i},left:a,right:n,rightStyle:s,min:d,textarea:c})})),A=r.forwardRef((function(e,t){const{left:i,right:n,inputLeft:s,inputRight:a,inputRightStyle:d,disableInput:c,inputOuterStyle:u,rightMobileEditLabel:p,isFocused:h,setIsFocused:f,disabled:m,showClearButton:y,onBlur:v,onFocus:x,...b}=e,j=(0,r.useCallback)((e=>{f(!1),v&&v(e)}),[v,f]),A=(0,r.useCallback)((e=>{f(!0),x&&x(e)}),[x,f]),I=(0,r.useRef)(null),C=(0,o(93583).A)(I,t),w=p&&!h?(0,g.jsx)(S,{rightMobileEditLabel:p,inputRef:I}):null;return(0,g.jsx)(l().A,{...b,ref:C,format:"transparent",style:{fontSize:16,...u},onFocus:A,onBlur:j,showClearButton:!1!==y,disabled:m||c,left:s||i,right:w||a||n,rightStyle:d})}))},423817:(e,t,o)=>{o.d(t,{J:()=>a});o(581454),o(296540);var r=()=>o(401497),i=()=>o(874832),n=()=>o(100622),s=o(474848);function a(e){let t=Math.floor(e.areaHeight/124);0===t&&(t=1);const o=(0,r().IS)((()=>({skeletonRect:{height:8,borderRadius:4,margin:10,backgroundColor:n().Tj.background.tertiaryTranslucent},skeletonCircle:{display:"flex",width:28,height:28,marginInlineEnd:8,backgroundColor:n().Tj.background.tertiaryTranslucent,borderRadius:20},skeletonSection:{display:"flex",width:"100%",margin:20,flexDirection:"row"}})),[8,10,20]),a=[...Array(t)].map(((e,t)=>(0,s.jsxs)("div",{style:o.skeletonSection,children:[(0,s.jsx)(i().P,{style:o.skeletonCircle}),(0,s.jsxs)("div",{style:{width:"80%"},children:[(0,s.jsx)(i().P,{style:{width:"80%",...o.skeletonRect,marginTop:0}}),(0,s.jsx)(i().P,{style:{width:"50%",...o.skeletonRect}}),(0,s.jsx)(i().P,{style:{width:"60%",...o.skeletonRect}}),(0,s.jsx)(i().P,{style:{width:"50%",...o.skeletonRect}})]})]},t)));return(0,s.jsx)("div",{children:a})}},539174:(e,t,o)=>{o.d(t,{h:()=>i});o(296540);const r={viewBox:"0 0 20 20",fittedViewBox:"3.97 6.37 12.06 6.66",svg:(0,o(474848).jsx)("path",{d:"M10.442 6.558a.625.625 0 0 0-.884 0l-5.4 5.4a.625.625 0 1 0 .884.884L10 7.884l4.958 4.958a.625.625 0 1 0 .884-.884z"})},i=(0,o(340498).wt)("arrowChevronSingleUp",r,"default")},549169:(e,t,o)=>{o.d(t,{Z:()=>a});o(517642),o(658004),o(733853),o(845876),o(432475),o(515024),o(731698),o(898992),o(354520),o(581454);var r=()=>o(230711),i=()=>o(590526),n=()=>o(435761),s=()=>o(981342);function a(e){const{environment:t,spaceStore:o,userId:a,userPermissionGroupIds:l}=e,d=(0,i().K8)((()=>null==o?void 0:o.isReady()),[o]),{spaceUserStore:c,isSpaceUserStoreReady:u}=(0,i().K8)((()=>{const e=(0,r().sE)(o,a);return{spaceUserStore:e,isSpaceUserStoreReady:null==e?void 0:e.isReady()}}),[o,a]),{teams:p,isLoading:h}=function({environment:e,spaceStore:t,spaceUserStore:o,userId:r,userPermissionGroupIds:a}){const{teams:l,isLoading:d}=(0,n().Qs)({spaceStore:t}),c=(0,n().gc)({spaceStore:t,teams:l}),u=(0,i().K8)((()=>{const e=c.filter((e=>e.store.isMemberOrGuest(r,a||new Set,null==o?void 0:o.getModel())));return(0,s().M9)(e).map((e=>e.store))}),[c,a,r,o]);return{teams:u,isLoading:d}}({environment:t,spaceStore:o,spaceUserStore:c,userId:a,userPermissionGroupIds:l});return{teams:p,isLoading:!d||!u||h}}},554413:(e,t,o)=>{o.d(t,{Cn:()=>i,oV:()=>a,tK:()=>s});o(581454);var r=()=>o(534177);let i=function(e){return e[e.Sidebar=0]="Sidebar",e[e.SidebarMobile=1]="SidebarMobile",e[e.TopbarMobile=2]="TopbarMobile",e[e.RenderAsPage=3]="RenderAsPage",e}({});const n=new Map;function s(e,t){n.set(l(e),t)}function a(e){return n.get(l(e))??[]}function l(e){return(0,r().uv)(e).sort().map((t=>{const o=e[t];return JSON.stringify(o)})).join("-")}},568317:(e,t,o)=>{o.d(t,{_:()=>n,p:()=>s});var r=()=>o(401497),i=()=>o(284371);function n(){return(0,r().IS)((()=>({listModule:{display:"flex",flexDirection:"column",gap:4},truncationButton:{display:"flex",gap:6,alignItems:"center",padding:4,marginInlineStart:-4,flexDirection:"row",flexGrow:0,alignSelf:"flex-start"},truncationLabel:{fontWeight:400},rowContainer:{display:"flex",gap:6,alignItems:"center",padding:4,marginInlineStart:-4,flexGrow:0,alignSelf:"flex-start",maxWidth:"100%"},rowLabel:{fontWeight:400},hoveredStyle:{borderRadius:"6px"},avatarAndName:{display:"flex",gap:6,alignItems:"center"}})),[])}function s(){return(0,r().IS)((()=>({card:{maxWidth:400,minWidth:280,padding:12},bio:{display:"flex",alignItems:"center",gap:12,overflow:"hidden"},bioLink:{overflow:"hidden"},bioRight:{overflow:"hidden",width:"100%"},actionButton:{width:"100%",height:28,fontWeight:i().Wy.medium},profileTitle:{fontWeight:i().Wy.semibold},profileSubtitle:{...i().RC},loadingShimmer:{height:16,borderRadius:6,animation:"500ms ease-in fadein"}})),[])}},635686:(e,t,o)=>{o.r(t),o.d(t,{PersonProfileContainer:()=>Kt});o(944114),o(898992),o(581454),o(737550);var r=o(296540),i=()=>o(564884),n=()=>o(907258),s=()=>o(884780),a=()=>o(701720),l=()=>o(726637),d=()=>o(484714),c=()=>o(943101),u=()=>o(590526),p=()=>o(401497),h=()=>o(611648),f=()=>o(150669),g=()=>o(757695),m=()=>o(795732),y=()=>o(849255),v=()=>o(677610),x=()=>o(493552),b=()=>o(302501),S=()=>o(799954),j=()=>o(571595),A=()=>o(109100),I=()=>o(798880),C=()=>o(69708),w=()=>o(100622),M=()=>o(496603),T=()=>o(806080),P=()=>o(284371),k=()=>o(741751),R=()=>o(376254),L=()=>o(774524),B=()=>o(588e3),D=()=>o(9768),E=()=>o(817942),U=()=>o(601726),O=()=>o(660197),N=()=>o(933951),_=()=>o(712505),K=(o(16280),()=>o(106702)),F=()=>o(792057),W=()=>o(874832),V=()=>o(807449),z=()=>o(406094),H=()=>o(584262),$=()=>o(165358),G=()=>o(925695),Y=()=>o(229833),X=()=>o(411618),Q=()=>o(462134),J=()=>o(535960),Z=()=>o(599412),q=()=>o(244828),ee=o(474848);function te(e){return e?(0,ee.jsx)(C().sA,{id:"PersonProfile.recentActivity.empty.primary.deactivated",defaultMessage:"No activity available"}):(0,ee.jsx)(C().sA,{id:"PersonProfile.recentActivity.empty.primary.self",defaultMessage:"No activity yet"})}function oe({viewedUserStore:e,isViewedUserDeactivated:t}){const o=(0,C().tz)(),i=(0,d().v3)(),n=(0,K().$)(),{viewedUserName:s,isViewingSelf:a}=(0,u().K8)((()=>({viewedUserName:(null==e?void 0:e.getDisplayName(o))??"",isViewingSelf:(null==n?void 0:n.id)===(null==e?void 0:e.id)})),[e,o,n]),l=!t,c=(0,u().K8)((()=>!Boolean(e)||!Boolean(n)||!Boolean(null==e?void 0:e.isReady())||void 0===t),[e,n,t]),h=(0,r.useCallback)((async()=>{const t=await(0,Z().M)({environment:i,from:"person_profile_recent_activity_empty_state",navigateOnCreate:!1,pageVisitSource:H().y8.PersonProfileRecentActivity});if(!t)return F().f1(o.formatMessage({defaultMessage:"Failed to create page. Please try again or contact support if the issue persists",id:"people.profile.createPage.failed"})),void $().log({error:(0,Y().convertErrorToLog)(new Error("Failed to create page from people profile empty state")),from:"ActivityFeedEmptyState",type:"ClientError",level:"error"});!a&&e&&q().createAndCommit({userAction:"PersonProfile.addCollaboratorToSharedDocument",environment:i,canUndo:!0,perform:o=>{X().wd({environment:i,store:t,permissionItems:[{type:"user_permission",user_id:e.id,role:"read_and_write"}],transaction:o})}}),(0,Q()._U)(t),(0,J().u)({environment:i,store:t,showMoveTo:!0,saveParent:!0,pageVisitSource:H().y8.PersonProfileRecentActivity})}),[i,e,a,o]),f=(0,p().IS)((()=>({container:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",height:"100%",gap:10,paddingTop:20},textContainer:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",gap:2},descriptionContainer:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",gap:12,maxWidth:300},button:{width:"fit-content"}})),[]);return c?(0,ee.jsxs)("div",{style:f.container,children:[(0,ee.jsx)(V().I,{size:"xl",icon:G().N,colorPalette:"gray",colorVariant:"tertiary"}),(0,ee.jsx)(W().P,{style:{height:12,width:120,borderRadius:6}})]}):(0,ee.jsxs)("div",{style:f.container,children:[(0,ee.jsx)(V().I,{size:"xl",icon:G().N,colorPalette:"gray",colorVariant:"tertiary"}),(0,ee.jsxs)("div",{style:f.textContainer,children:[(0,ee.jsx)(x().D,{styleKey:"bodyMedium",children:te(t??!1)}),l?(0,ee.jsxs)("div",{style:f.descriptionContainer,children:[(0,ee.jsx)(x().D,{styleKey:"bodyRegular",colorVariant:"secondary",children:a?(0,ee.jsx)(C().sA,{id:"PersonProfile.recentActivity.empty.description.self",defaultMessage:"Create your first document"}):(0,ee.jsx)(C().sA,{id:"PersonProfile.recentActivity.empty.description.other",defaultMessage:"Start collaborating with {personName} by creating your first document together",values:{personName:s}})}),(0,ee.jsx)(z().A,{onClick:h,style:f.button,children:(0,ee.jsx)(b().A,{children:a?(0,ee.jsx)(C().sA,{id:"PersonProfile.recentActivity.empty.button.self",defaultMessage:"Create a new document"}):(0,ee.jsx)(C().sA,{id:"PersonProfile.recentActivity.empty.button.other",defaultMessage:"Create a shared document"})})})]}):null]})]})}o(823215);var re=()=>o(920198),ie=()=>o(450104),ne=()=>o(295633),se=()=>o(718827),ae=()=>o(488715),le=()=>o(187174),de=()=>o(179034),ce=()=>o(534177),ue=()=>o(268933),pe=()=>o(187820),he=()=>o(16006),fe=()=>o(365136),ge=()=>o(815585);function me(e){const{spaceId:t,actorId:o}=e,r=(0,d().v3)(),i=(0,C().tz)(),[{value:n,status:s,error:a}]=(0,le().Yb)((async()=>{const e=await r.api.callCellCompatibleApi({eventName:"getActorActivities",environment:r,data:{spaceId:t,actorId:o},cellNavigation:{spaceId:t}});if("success"===e.type)return e.data;if("failed"===e.type)throw e.error;(0,ce().HB)(e)}),[r,t,o]),l=(0,re().L)(),c=null==n?void 0:n.actorActivities,h=(0,u().K8)((()=>!c||0===c.length||!!l&&c.every((e=>{const t=ne().B.createChildStore(l,{table:de().ev,id:e.navigableBlockId,spaceId:l.id});return!!t&&t.isReady()}))),[c,l]),f=(0,p().IS)((()=>({container:{fontSize:14,color:w().Tj.text.secondary,backgroundColor:w().Tj.background.primary,borderRadius:12,borderWidth:1,borderStyle:"solid",borderColor:w().Tj.border.secondary,padding:16,boxShadow:w().Tj.shadow.base.diffuse,display:"flex",flexDirection:"column",gap:2},emptyState:{color:w().Tj.text.secondary,fontSize:14,paddingBlock:20,paddingInline:12,textAlign:"center"}})),[]);return"pending"===s||"idle"===s?(0,ee.jsx)(xe,{}):a?(0,ee.jsx)(ie().LargeSurfaceRenderError,{}):null!=n&&n.hidden?(0,ee.jsx)("div",{style:f.emptyState,children:i.formatMessage(be.emptyState)}):c&&0!==c.length?h?(0,ee.jsx)("div",{style:f.container,children:c.map((e=>(0,ee.jsx)(ye,{activity:e},e.id)))}):(0,ee.jsx)(xe,{}):(0,ee.jsx)("div",{style:f.emptyState,children:i.formatMessage(be.emptyState)})}function ye(e){const{activity:t}=e,o=(0,C().tz)(),r=(0,re().L)(),i=(0,u().K8)((()=>{if(!r)return;const e=ne().B.createChildStore(r,{table:de().ev,id:t.navigableBlockId,spaceId:r.id});return e&&e.isReady()&&e.isNavigableBlock()?e:void 0}),[t.navigableBlockId,r]),n=(0,u().K8)((()=>{if(!i)return;const e=i.getModel();return e?(0,ae().Q)({model:e,getRecordModel:i.getRecordModel,pageVisitSource:H().y8.PersonProfileRecentActivity}):void 0}),[i]),s=(0,ge().nl)(t.latestTime,{useUltraCompactFormat:!0}),a=(0,p().IS)((()=>({activityItem:{paddingBlock:4,paddingInline:8,borderRadius:6,display:"flex",alignItems:"center",justifyContent:"space-between"},activityText:{color:w().Tj.text.primary,display:"flex",alignItems:"center",gap:4,flex:1,minWidth:0},actionText:{color:w().Tj.text.secondary,flexShrink:0},timestamp:{fontSize:12,color:w().Tj.text.tertiary,marginInlineStart:8,flexShrink:0}})),[]);return(0,ee.jsxs)(se().Ay,{href:n,style:a.activityItem,children:[(0,ee.jsxs)("div",{style:a.activityText,children:[(0,ee.jsx)("span",{style:a.actionText,children:Se(t.actionTypes,o)}),i?(0,ee.jsx)(ve,{blockStore:i,sidebarSpaceStore:r}):null]}),(0,ee.jsx)("div",{style:a.timestamp,children:s})]})}function ve(e){const{blockStore:t,sidebarSpaceStore:o}=e,r=(0,d().v3)(),i=(0,u().K8)((()=>{var e;return null==t||null===(e=t.getModel())||void 0===e?void 0:e.getRenderIcon({getRecordModel:t.getRecordModel})}),[t]),n=(0,u().K8)((()=>!!t&&t.isEmptyPage()),[t]),s=(0,u().K8)((()=>(0,pe().Te)(t)),[t]),a=(0,u().K8)((()=>!(!t||!o)&&(0,ue().DU)({recordId:t.id,recordType:"block",tab:"personProfile",rootStore:o,environment:r})),[t,o,r]),l=(0,p().IS)((()=>({container:{display:"flex",alignItems:"center",gap:4,minWidth:0},recordIcon:{flexShrink:0},recordTitle:{color:w().Tj.text.primary,fontWeight:P().Wy.medium,minWidth:0}})),[]);return(0,ee.jsxs)("span",{style:l.container,children:[(0,ee.jsx)(pe().B6,{disabled:!0,icon:i,iconRecordCategory:s,isEmptyPage:n,size:16,style:l.recordIcon}),(0,ee.jsx)(he().A,{store:t,style:l.recordTitle,underline:!0}),a?(0,ee.jsx)(fe().Y,{}):null]})}function xe(){const e=(0,p().IS)((()=>({container:{backgroundColor:w().Tj.background.primary,borderRadius:12,borderWidth:1,borderStyle:"solid",borderColor:w().Tj.border.secondary,padding:16,boxShadow:w().Tj.shadow.base.diffuse,display:"flex",flexDirection:"column",gap:2},row:{display:"flex",justifyContent:"space-between",alignItems:"center",gap:8,height:29},content:{height:10,borderRadius:4},timestamp:{width:35,height:10,borderRadius:4,flexShrink:0}})),[]);return(0,ee.jsx)("div",{style:e.container,children:["55%","45%","65%","50%","60%"].map(((t,o)=>(0,ee.jsxs)("div",{style:e.row,children:[(0,ee.jsx)(W().P,{style:{...e.content,width:t}}),(0,ee.jsx)(W().P,{style:e.timestamp})]},o)))})}const be=(0,C().YK)({created:{id:"ActorActivityFeed.action.created",defaultMessage:"Created"},edited:{id:"ActorActivityFeed.action.edited",defaultMessage:"Edited"},commented:{id:"ActorActivityFeed.action.commented",defaultMessage:"Commented on"},createdAndEdited:{id:"ActorActivityFeed.action.createdAndEdited",defaultMessage:"Created and edited"},createdAndCommented:{id:"ActorActivityFeed.action.createdAndCommented",defaultMessage:"Created and commented on"},editedAndCommented:{id:"ActorActivityFeed.action.editedAndCommented",defaultMessage:"Edited and commented on"},createdEditedAndCommented:{id:"ActorActivityFeed.action.createdEditedAndCommented",defaultMessage:"Created, edited, and commented on"},emptyState:{id:"ActorActivityFeed.emptyState",defaultMessage:"No activity in the past 30 days"}});function Se(e,t){const o=e.includes("created"),r=e.includes("edited"),i=e.includes("commented");return o&&r&&i?t.formatMessage(be.createdEditedAndCommented):o&&r?t.formatMessage(be.createdAndEdited):o&&i?t.formatMessage(be.createdAndCommented):r&&i?t.formatMessage(be.editedAndCommented):o?t.formatMessage(be.created):r?t.formatMessage(be.edited):i?t.formatMessage(be.commented):""}var je=()=>o(388926),Ae=()=>o(936802),Ie=()=>o(908201),Ce=()=>o(609837),we=()=>o(598067);function Me(e){const{module:t,personProfileStore:o,showBottomDivider:i}=e,n=(0,d().v3)(),s=(0,p().IS)((()=>({loadingBoxTitle:{width:70,height:24,borderRadius:4},loadingBoxValue:{width:160,height:24,borderRadius:4},loadingBoxContainer:{display:"flex",flexDirection:"column",gap:8,paddingInlineStart:6}})),[]),a=(0,r.useMemo)((()=>new(Ce().B)(n)),[n]),{peopleCollectionStore:l,peopleCollectionBlockStore:c,isPeopleCollectionReady:h}=(0,u().K8)((()=>{const e=o.getAssociatedCollectionStore(),t=null==e?void 0:e.getParentBlockStore();return{peopleCollectionStore:e,peopleCollectionBlockStore:t,isPeopleCollectionReady:null==e?void 0:e.isReady()}}),[o]);return(0,r.useEffect)((()=>{l&&c&&c.isCollectionView()&&a.setContext({type:"collectionPage",collectionStore:l,collectionViewBlockStore:c})}),[l,c,a]),h?(0,ee.jsxs)(ee.Fragment,{children:[(0,ee.jsx)(Ie().RI,{value:a,children:(0,ee.jsx)(we().h,{context:m().R.Frame,disabled:!1,store:o,wrapper:e=>(0,ee.jsx)("div",{children:e}),layoutModule:t,customization:{neverShowPropertiesElsewhereInLayout:!0,stackPropertyLabelAndValue:!0,disableLastRowBottomPadding:!1,hideEmptyProperties:!1,sortNonEmptyPropertiesFirst:!1,propertyIdsToExclude:(0,Ae().fD)(),hideAddPropertyButton:!0,disableContainerPadding:!0,disableTopPadding:!0},showDefaultTitle:!1})}),i?(0,ee.jsx)(je().A,{size:1,colorVariant:"secondaryTranslucent"}):null]}):(0,ee.jsxs)("div",{style:s.loadingBoxContainer,children:[(0,ee.jsx)(W().P,{style:s.loadingBoxTitle,emphasized:!0}),(0,ee.jsx)(W().P,{style:s.loadingBoxValue,emphasized:!0})]})}o(517642),o(658004),o(733853),o(845876),o(432475),o(515024),o(731698);var Te=()=>o(247584),Pe=()=>o(250910),ke=()=>o(803960),Re=()=>o(539174),Le=()=>o(753812),Be=()=>o(196539),De=()=>o(898808),Ee=()=>o(981342),Ue=()=>o(549169),Oe=()=>o(568317);function Ne({isIconCircular:e=!1}){const t=(0,Oe()._)(),o=(0,p().IS)((()=>({skeletonIcon:{width:20,height:20,borderRadius:e?"50%":4},skeletonLabel:{width:120,height:16,borderRadius:4}})),[e]);return(0,ee.jsxs)("div",{style:t.rowContainer,children:[(0,ee.jsx)(W().P,{style:{...o.skeletonIcon}}),(0,ee.jsx)(W().P,{style:{...t.rowLabel,...o.skeletonLabel}})]})}function _e(e){const{icon:t,totalCount:o,message:r,onToggleTruncation:i,maxRowsShownWhenTruncated:n=Ee().rX}=e,s=(0,C().tz)(),a=Math.max(o-n,0),l=(0,Oe()._)();return(0,ee.jsxs)(se().Ay,{onClick:i,style:l.truncationButton,hoveredStyle:l.hoveredStyle,children:[t,(0,ee.jsx)(b().A,{style:l.truncationLabel,isSecondaryColor:!0,children:s.formatMessage(r,{numHidden:a})})]})}const Ke=Ee().rX+1,Fe=(0,C().YK)({teamspacesModuleShowMore:{id:"PersonProfile.teamspacesModule.showMore",defaultMessage:"{numHidden} more teamspaces"},teamspacesModuleShowLess:{id:"PersonProfile.teamspacesModule.showLess",defaultMessage:"Hide {numHidden} teamspaces"}});function We(e,t,o){const[{value:r,status:i,error:n}]=(0,le().Yb)((async()=>async function(e,t,o){if(!o)return;const r=await Le().callApi({eventName:"getSpacePermissionGroupIdsContainingMembers",environment:e,data:{spaceId:o,userIds:[t]}});var i;if("success"===r.type)return new Set((null===(i=r.data)||void 0===i||null===(i=i.userToGroupMap)||void 0===i||null===(i=i[t])||void 0===i?void 0:i.map((e=>e.toString())))||[]);throw $().log({level:"error",from:"personProfile.teamspacesModule",type:"getSpacePermissionGroupIdsContainingMembersError",error:{message:(0,Te().V4)(r)||"Error fetching user permission group ids"}}),r.error}(e,t,o)),[e,t,o],{debugName:"personProfile.userToPermissionGroupIds"});return{value:{userPermissionGroupIds:r},isLoading:"resolved"!==i&&"rejected"!==i,error:n}}function Ve(){const e=(0,Oe()._)();return(0,ee.jsx)("div",{style:e.listModule,children:[0,1,2].map((e=>(0,ee.jsx)(Ne,{isIconCircular:!1},e)))})}function ze(){const e=(0,Oe()._)();return(0,ee.jsx)("div",{style:e.listModule,children:(0,ee.jsx)(b().A,{isSecondaryColor:!0,isMultiline:!0,children:(0,ee.jsx)(C().sA,{id:"PersonProfile.teamspaces.empty",defaultMessage:"None"})})})}function He(e){const{teamStore:t}=e,o=(0,u().K8)((()=>t.isReady()),[t]),r=(0,u().K8)((()=>t.getName()),[t]),i=(0,Oe()._)();return o?(0,ee.jsx)(Pe().A,{popupType:l().A.isMobile?Pe().z.BottomSheet:Pe().z.Popup,render:e=>(0,ee.jsx)(Be().dX,{teamStore:t,parent:e}),renderOrigin:e=>(0,ee.jsxs)(se().Ay,{style:i.rowContainer,hoveredStyle:i.hoveredStyle,...e,children:[(0,ee.jsx)(De().x,{store:t,disabled:!0,size:20}),(0,ee.jsx)(b().A,{showTooltipWhenTruncated:!0,style:i.rowLabel,children:r})]})}):(0,ee.jsx)(Ne,{isIconCircular:!1})}function $e(e){const{userId:t}=e,o=(0,d().v3)(),i=(0,u().O$)(n().AppStoreSidebarSpaceStore),{teams:s,isLoading:a}=function({environment:e,spaceStore:t,userId:o}){const{value:{userPermissionGroupIds:r},isLoading:i}=We(e,o,null==t?void 0:t.id),{teams:n,isLoading:s}=(0,Ue().Z)({environment:e,spaceStore:t,userId:o,userPermissionGroupIds:r});return{teams:n,isLoading:s||i}}({environment:o,spaceStore:i,userId:t}),l=(0,r.useMemo)((()=>s.length>Ke),[s]),[c,p]=(0,r.useState)(!0),h=(0,Oe()._)(),f=(0,r.useCallback)((()=>{p(!c)}),[c]);return a?(0,ee.jsx)(Ve,{}):0===s.length?(0,ee.jsx)(ze,{}):(0,ee.jsxs)("div",{style:h.listModule,children:[s.map(((e,t)=>c&&l&&t>=Ee().rX?null:(0,ee.jsx)(He,{teamStore:e},e.id))),l?(0,ee.jsx)(_e,{icon:c?(0,ee.jsx)(V().I,{icon:ke().arrowChevronSingleDownIcon,colorVariant:"secondary"}):(0,ee.jsx)(V().I,{icon:Re().h,colorVariant:"secondary"}),totalCount:s.length,message:c?Fe.teamspacesModuleShowMore:Fe.teamspacesModuleShowLess,maxRowsShownWhenTruncated:Ee().rX,onToggleTruncation:f}):void 0]})}var Ge=()=>o(756117),Ye=()=>o(695115),Xe=()=>o(31511),Qe=()=>o(98126),Je=()=>o(631524),Ze=()=>o(591779),qe=()=>o(536583),et=()=>o(589407),tt=()=>o(344417),ot=()=>o(888643);const rt=9500;var it=()=>o(245241),nt=()=>o(615234);const st=12;var at=()=>o(824862),lt=()=>o(751735),dt=()=>o(256863),ct=()=>o(453697),ut=()=>o(495576),pt=()=>o(613735);const ht=168,ft=44,gt=28;function mt(e){const{store:t,onClick:o}=e,r=(0,u().K8)((()=>null!=t&&t.isDefined()?t:void 0),[t]),i=(0,p().IS)((()=>({container:{position:"relative",display:"flex",flexDirection:"column",height:ht,overflow:"hidden",contain:"strict",borderRadius:16,backgroundColor:w().Tj.background.primary,border:`1px solid ${w().Tj.border.secondary}`,boxShadow:w().Tj.shadow.base.diffuse}})),[]),n=!r;return(0,ee.jsx)(se().Ay,{style:i.container,onClick:o,disabled:n,children:n?(0,ee.jsx)(yt,{}):(0,ee.jsx)(vt,{store:r})})}function yt(){const e=(0,p().IS)((()=>({loadingTile:{position:"absolute",inset:0}})),[]);return(0,ee.jsx)(W().P,{style:e.loadingTile})}function vt(e){const{store:t}=e,{icon:o,isEmptyPage:r,iconRecordCategory:i}=(0,u().K8)((()=>({icon:t.getIcon(),isEmptyPage:t.isEmptyPage(),iconRecordCategory:(0,pe().Te)(t)})),[t]),n=(0,p().IS)((()=>({icon:{position:"relative",marginTop:32,marginInlineStart:20}})),[]);return(0,ee.jsxs)(ee.Fragment,{children:[(0,ee.jsx)(xt,{store:t}),(0,ee.jsx)(pe().B6,{disabled:!0,icon:o,iconRecordCategory:i,isEmptyPage:r,size:gt,style:n.icon}),(0,ee.jsx)(bt,{store:t}),(0,ee.jsx)(St,{store:t})]})}function xt(e){const{store:t}=e,o=(0,p().eP)(),r=(0,u().K8)((()=>{var e;return(0,pt().b)({icon:null===(e=t.getIconStore())||void 0===e?void 0:e.getValue(),themeMode:o})}),[t,o]),i=(0,p().IS)((()=>({container:{position:"absolute",top:0,insetInline:0,height:ft,overflow:"hidden",pointerEvents:"none",backgroundColor:r?(0,lt().X4)(r,.1):w().Tj.background.secondaryTranslucent}})),[r]);return(0,ee.jsx)("div",{style:i.container,children:(0,ee.jsx)(ut().d,{store:t,disabled:!0,paddingLeft:0,paddingRight:0,height:ft,proxyWidth:300})})}function bt(e){const{store:t}=e,o=(0,d().v3)(),r=(0,re().L)(),i=(0,u().K8)((()=>!(!t||!r)&&(0,ue().DU)({recordId:t.id,recordType:"block",tab:"personProfile",rootStore:r,environment:o})),[t,r,o]),n=(0,p().IS)((()=>({container:{display:"flex",alignItems:"baseline",gap:4,marginTop:12,marginInline:20,flex:"1"},title:{fontWeight:P().Wy.semibold,fontSize:"16px",color:w().Tj.text.primary,lineHeight:"24px"}})),[]);return(0,ee.jsxs)("div",{style:n.container,children:[(0,ee.jsx)(he().A,{shouldWrap:!0,maxLines:2,store:t,style:n.title}),i?(0,ee.jsx)(fe().Y,{}):null]})}function St(e){const{store:t}=e,o=(0,p().IS)((()=>({container:{display:"flex",alignItems:"center",gap:6,marginTop:8,marginInline:20,paddingBottom:16},text:{fontSize:12,lineHeight:"16px",color:w().Tj.text.tertiary}})),[]),{lastEditedTime:r,lastEditedByStore:i}=(0,u().K8)((()=>({lastEditedTime:t.getLastEditedTime(),lastEditedByStore:t.getLastEditedByStore()})),[t]);let n;switch(null==i?void 0:i.table){case I().oo:n=(0,ee.jsx)(ct().A,{userStore:i,size:20});break;case at().GP:n=(0,ee.jsx)(dt().A,{botStore:i,size:20});break;default:n=(0,ee.jsx)(ct().A,{userStore:void 0,size:20})}return r<=0||!n?null:(0,ee.jsxs)("div",{style:o.container,children:[n,(0,ee.jsx)("span",{style:o.text,children:(0,ge().nl)(r,{useCompactFormat:!0,useWeeks:!0})})]})}const jt=(0,C().YK)({title:{id:"PersonProfile.theirPages.title",defaultMessage:"{userName}’s pages"},emptyState:{id:"PersonProfile.theirPages.emptyState",defaultMessage:"Pages created by {userName} will appear here"},noSearchResults:{id:"PersonProfile.theirPages.noSearchResults",defaultMessage:"No pages found"},offlineState:{id:"PersonProfile.theirPages.offlineState",defaultMessage:"Go online to see pages created by {userName}"},searchLabel:{id:"PersonProfile.theirPages.searchButton.tooltip",defaultMessage:"Search"},searchInputPlaceholder:{id:"PersonProfile.theirPages.searchInputPlaceholder",defaultMessage:"Type to search…"},seeMore:{id:"PersonProfile.theirPages.seeMore",defaultMessage:"See more"}});function At(e){const{userStore:t,spaceStore:o}=e,i=(0,d().v3)(),[n,s]=(0,r.useState)(""),[a,l]=(0,r.useState)(!1),c=(0,u().K8)((()=>(null==t?void 0:t.getName())??""),[t]),h=(0,Ze().lW)(n,300,((e,t)=>e===t)),f=function({userStore:e,spaceStore:t,searchQuery:o=""}){const i=(0,d().v3)(),[n,s]=(0,r.useState)(1),[a,l]=(0,u().K8)((()=>null!=e&&e.isDefined()&&null!=t&&t.isDefined()?[e,t]:[]),[e,t]),[c]=(0,le().Yb)((async()=>{if(!a||!l)return{state:"loading",pageStores:[]};const e=Math.min(n*st,rt),t=await i.api.callCellCompatibleApi({eventName:"search",environment:i,cellNavigation:{spaceId:l.id},data:{type:it().Vz.BlocksInSpace,query:o,spaceId:l.id,filters:(0,it().N2)({createdBy:[a.id]}),sort:{field:"lastEdited",direction:"desc"},limit:e,source:"people_profile_their_pages"}});return"failed"===t.type?t.offline?{state:"offline",pageStores:[],total:0}:{state:"failed",pageStores:[],total:0,error:t.error}:{state:"succeeded",pageStores:t.data.results.map((e=>ne().B.createChildStore(a,{id:e.id,table:de().ev,spaceId:l.id}))),total:t.data.total}}),[i,a,l,o,n],{throttle:nt().TD,debugName:"useFetchUserPages"}),p=(0,r.useCallback)((()=>{s((e=>e+1))}),[]),h="pending"===c.status||"idle"===c.status,f=c.value;if(h&&!f)return{state:"loading",pageStores:[],hasMore:!1,isLoadingMore:!1,loadMore:p};if("rejected"===c.status)return{state:"failed",pageStores:[],error:c.error,hasMore:!1,isLoadingMore:!1,loadMore:p};if(!f)return{state:"loading",pageStores:[],hasMore:!1,isLoadingMore:!1,loadMore:p};const g=void 0!==f.total&&f.pageStores.length<f.total&&n*st<rt;return{state:f.state,pageStores:f.pageStores,error:f.error,hasMore:g,isLoadingMore:h,loadMore:p}}({userStore:t,spaceStore:o,searchQuery:h});(0,r.useEffect)((()=>{"succeeded"===f.state&&f.pageStores.length>0&&!h&&l(!0)}),[f,h]);const g=(0,r.useCallback)((e=>{(0,J().u)({environment:i,store:e,openInCenterPeek:!0,pageVisitSource:H().y8.PersonProfileRecentActivity})}),[i]),m=(0,p().IS)((()=>({header:{display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:12},title:{marginBottom:0}})),[]),y=f.pageStores.length>0;let v;return v="loading"===f.state&&!y?(0,ee.jsx)(Ct,{children:Array.from({length:12},((e,t)=>(0,ee.jsx)(mt,{store:void 0,onClick:T().lQ},t)))}):y?(0,ee.jsxs)(ee.Fragment,{children:[(0,ee.jsx)(Ct,{children:f.pageStores.map((e=>(0,ee.jsx)(mt,{store:e,onClick:()=>g(e)},e.id)))}),f.hasMore||f.isLoadingMore?(0,ee.jsx)(kt,{isLoading:f.isLoadingMore,onClick:f.loadMore}):void 0]}):"offline"===f.state?(0,ee.jsx)(Pt,{userName:c}):"failed"===f.state?(0,ee.jsx)(ie().LargeSurfaceRenderError,{error:f.error}):h&&a?(0,ee.jsx)(Tt,{}):(0,ee.jsx)(Mt,{userName:c}),(0,ee.jsxs)("div",{children:[(0,ee.jsxs)("div",{style:m.header,children:[(0,ee.jsx)(b().A,{isSecondaryColor:!0,style:m.title,children:(0,ee.jsx)(C().sA,{...jt.title,values:{userName:c}})}),(0,ee.jsx)(It,{value:n,onChange:s})]}),v]})}function It(e){const{value:t,onChange:o}=e,i=(0,C().tz)(),[n,s]=(0,r.useState)(!1),a=(0,r.useRef)(null),l=(0,r.useCallback)((()=>{s((e=>!e))}),[]),d=(0,r.useCallback)((()=>{o(""),s(!1)}),[o]),c=(0,r.useCallback)((e=>{o(e.target.value)}),[o]),u=(0,r.useCallback)((e=>{"Escape"===e.key&&d()}),[d]),h=(0,r.useCallback)((e=>{var o;e.relatedTarget instanceof Node&&(null===(o=a.current)||void 0===o?void 0:o.contains(e.relatedTarget))||t||s(!1)}),[t]),f=(0,p().IS)((()=>({container:{display:"flex"},inputWrapper:{display:"flex",alignItems:"center",overflow:"hidden"},input:{fontSize:14,lineHeight:1,paddingInlineEnd:4,color:w().Tj.text.primary}})),[]);return(0,ee.jsxs)("div",{style:f.container,ref:a,children:[(0,ee.jsx)(Ye().A,{icon:tt().magnifyingGlassSmallIcon,onClick:l,ariaLabel:i.formatMessage(jt.searchLabel)}),(0,ee.jsx)(Ge().A,{visible:n,animate:{width:150,opacity:1},initial:{width:0,opacity:0},exit:{width:0,opacity:0},style:f.inputWrapper,children:(0,ee.jsx)(Xe().A,{style:f.input,format:"transparent",value:t,onChange:c,placeholder:i.formatMessage(jt.searchInputPlaceholder),focusInitial:n,showClearButton:!0,onBlur:h,onCancel:d,onClick:ot().k,onClearButtonClick:d,onKeyDown:u})})]})}function Ct(e){const t=(0,r.useRef)(null),o=(0,c().wY)(t),i=Boolean(o&&o.width<600)?3:4,n=(0,p().IS)((()=>({grid:{display:"grid",gridTemplateColumns:`repeat(${i}, 1fr)`,gridTemplateRows:`repeat(auto-fill, ${ht}px)`,gap:20}})),[i]);return(0,ee.jsx)("div",{ref:t,style:n.grid,children:e.children})}function wt(e){const t=(0,p().IS)((()=>({container:{width:"100%",height:220,display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",gap:8,border:`1px solid ${w().Tj.border.secondary}`,borderRadius:16},label:{fontSize:14}})),[]);return(0,ee.jsxs)("div",{style:t.container,children:[(0,ee.jsx)(V().I,{icon:qe().d,colorVariant:"tertiary",size:"xl"}),(0,ee.jsx)(b().A,{isSecondaryColor:!0,isMultiline:!0,style:t.label,children:e.children})]})}function Mt(e){const{userName:t}=e;return(0,ee.jsx)(wt,{children:(0,ee.jsx)(C().sA,{...jt.emptyState,values:{userName:t}})})}function Tt(){return(0,ee.jsx)(wt,{children:(0,ee.jsx)(C().sA,{...jt.noSearchResults})})}function Pt(e){const{userName:t}=e;return(0,ee.jsx)(wt,{children:(0,ee.jsx)(C().sA,{...jt.offlineState,values:{userName:t}})})}function kt(e){const{isLoading:t,onClick:o}=e,r=(0,C().tz)(),i=(0,p().IS)((()=>({container:{marginTop:12,display:"flex",alignItems:"center"},spinnerWrapper:{height:28,flex:1,display:"flex",justifyContent:"center",alignItems:"center"}})),[]);return(0,ee.jsx)("div",{style:i.container,children:t?(0,ee.jsx)("div",{style:i.spinnerWrapper,children:(0,ee.jsx)(Qe().k,{})}):(0,ee.jsx)(Je().p,{size:"md",iconLeading:et().ellipsisIcon,onClick:o,colorVariant:"secondary",children:r.formatMessage(jt.seeMore)})})}var Rt=()=>o(617711),Lt=()=>o(272509);var Bt=()=>o(436525);const Dt=Ee().rX+1,Et=(0,C().YK)({topCollaboratorsModuleShowMore:{id:"PersonProfile.collaboratorsModule.showMore",defaultMessage:"{numHidden} more collaborators"},topCollaboratorsModuleShowLess:{id:"PersonProfile.collaboratorsModule.showLess",defaultMessage:"Hide {numHidden} collaborators"}});function Ut(e){const{userStore:t,spaceStore:o}=e,r=(0,d().v3)(),i=(0,u().K8)((()=>t.isReady()),[t]),n=(0,u().K8)((()=>t.getName()||t.getEmail()),[t]),s=(0,u().K8)((()=>{if(!o)return;const e=r.idCreator.getSpaceIdCreatorSync(o.id);return(0,Rt().o4)({userId:t.id,spaceIdCreator:e,pageVisitSource:H().y8.PersonProfileTopCollaborators})}),[t,r,o]),a=(0,Oe()._)();if(!i)return(0,ee.jsx)(Ne,{isIconCircular:!0});const l=(0,ee.jsxs)("div",{style:a.avatarAndName,children:[(0,ee.jsx)(ct().A,{hasPersonHoverCard:!1,userStore:t,size:20}),(0,ee.jsx)(b().A,{showTooltipWhenTruncated:!0,style:a.rowLabel,children:n})]});return(0,ee.jsx)(se().Ay,{style:a.rowContainer,hoveredStyle:a.hoveredStyle,href:s,children:(0,ee.jsx)(Bt().D,{userStore:t,spaceStore:o,children:l})})}function Ot(){const e=(0,Oe()._)();return(0,ee.jsx)("div",{style:e.listModule,children:[0,1,2].map((e=>(0,ee.jsx)(Ne,{isIconCircular:!0},e)))})}function Nt(e){const{userId:t,spaceStore:o}=e,{value:i,isLoading:s}=function({userId:e}){const t=(0,d().v3)(),o=(0,u().O$)(n().AppStoreSidebarSpaceStore),[{status:r,error:i,value:s}]=(0,le().Yb)((async()=>{if(!o)return[];if((0,Lt().I)(o))return[];const r=await Le().callApi({eventName:"getSimilarUsers",environment:t,data:{userId:e,spaceId:o.id}});if("failed"===r.type)throw r.error;if(r){const e=r.data.userSimilarity??[];return Object.entries(e).map((([e,t])=>({userStore:y().L.createChildStore(o,{table:I().oo,id:e}),id:e})))}}),[t,e,o]);return void 0===o?{isLoading:!0,error:void 0,value:[]}:{isLoading:"pending"===r||"idle"===r,error:i,value:s}}({userId:t}),a=i&&i.length>Dt,[l,c]=(0,r.useState)(!0),p=(0,r.useCallback)((()=>{c(!l)}),[l]),h=(0,Oe()._)();return s?(0,ee.jsx)(Ot,{}):i&&0!==i.length?(0,ee.jsxs)("div",{style:h.listModule,children:[i.map(((e,t)=>l&&a&&t>=Ee().rX?null:(0,ee.jsx)(Ut,{userStore:e.userStore,spaceStore:o},e.id))),a?(0,ee.jsx)(_e,{icon:l?(0,ee.jsx)(V().I,{icon:ke().arrowChevronSingleDownIcon,colorVariant:"secondary"}):(0,ee.jsx)(V().I,{icon:Re().h,colorVariant:"secondary"}),totalCount:i.length,message:l?Et.topCollaboratorsModuleShowMore:Et.topCollaboratorsModuleShowLess,maxRowsShownWhenTruncated:Ee().rX,onToggleTruncation:p}):void 0]}):(0,ee.jsx)("div",{style:h.listModule,children:(0,ee.jsx)(b().A,{isSecondaryColor:!0,isMultiline:!0,children:(0,ee.jsx)(C().sA,{id:"TopCollaboratorsModule.emptyState.message",defaultMessage:"No collaborators yet!"})})})}const _t={paddingLeft:6};function Kt(e){const{personProfileStore:t}=e,o=(0,u().uB)(void 0,f().A),s=(0,u().K8)((()=>null==t?void 0:t.getSpaceStore()),[t]),a=(0,u().K8)((()=>t.getPersonProfileUserId()),[t]),g=(0,u().O$)(n().AppStoreSidebarSpaceStore),m=(0,u().K8)((()=>{if(g&&a)return y().L.createChildStore(g,{table:I().oo,id:a})}),[g,a]),x=(0,u().K8)((()=>{if(!t.isReady())return;const e=t.getModel();return e?(0,j().dY)({personProfileBlock:e}):void 0}),[t]),b=(0,r.useRef)(null),A=(0,c().wY)(b),C=(0,d().v3)(),T=!l().A.isMobile;(0,r.useEffect)((()=>{"rendered"!==n().default.state.renderPhase&&n().default.setPageRendered()}),[]),(0,r.useEffect)((()=>{(0,i().u)({environment:C,event:{eventName:"person_profile_viewed",eventProperties:{is_own_profile:a===C.currentUser.id}}})}),[C,a]);const P=Boolean(A&&A.width<=_().SIDEPEEK_MIN_WIDTH),{person_profile_page_main:k,person_profile_page_details:L}=(0,N().Qf)({personProfileStore:t}),B=(0,v().y)(),D=k.some((e=>"recentActivity"===e.type)),U=(0,p().IS)((()=>({container:{width:"100%",height:"100%",cursor:"default",backgroundColor:w().Tj.background.primary},left:{display:"flex",flexDirection:"column",gap:"24px",flex:1,maxWidth:"752px",minWidth:_().SIDEPEEK_MIN_WIDTH-96+"px",alignSelf:"flex-start"},right:{width:"252px",minWidth:"252px",height:"min-content",display:"flex",flexDirection:"column",gap:D||P?24:40},content:{display:"flex",flexDirection:P?"column-reverse":"row",gap:P?40:60,marginTop:20,...B?(0,M().Up)(S().dE,"paddingInlineStart","paddingInlineEnd"):{}}})),[D,P,B]);return a&&s?(0,ee.jsx)(R().H,{type:h().A.Y,style:U.container,className:"person-profile-content",store:o,children:(0,ee.jsxs)(E().Mx,{type:"person-profile",withBottomPadding:!0,children:[(0,ee.jsx)($t,{store:t,modules:k,isViewedUserDeactivated:x}),(0,ee.jsxs)(E().vV,{ref:b,style:U.content,children:[T?(0,ee.jsx)("div",{style:U.left,children:(0,ee.jsx)(Ft,{modules:k,spaceStore:s,userId:a,viewedUserStore:m,isViewedUserDeactivated:x,personProfileStore:t})}):void 0,(0,ee.jsx)("div",{style:U.right,children:(0,ee.jsx)(Vt,{modules:L,userId:a,spaceStore:s,personProfileStore:t})})]},"main")]})}):null}const Ft=r.memo(Wt);function Wt(e){const{spaceStore:t,userId:r,modules:i,viewedUserStore:n,isViewedUserDeactivated:l,personProfileStore:d}=e,c=(0,o(59226).X)("people_activity_feed_redesign");return(0,ee.jsx)(ee.Fragment,{children:i.map((e=>{switch(e.type){case"recentActivity":return(0,ee.jsxs)("div",{children:[(0,ee.jsx)(Ht,{children:(0,ee.jsx)(C().sA,{id:"PersonProfile.recentActivity.title",defaultMessage:"Recent activity"})}),(0,ee.jsx)(s().K,{from:"PersonProfileContainer.LeftColumnContent.ActivityUpdates",fallback:e=>(0,ee.jsx)(a().d,{...e}),children:c?(0,ee.jsx)(me,{spaceId:t.id,actorId:r}):(0,ee.jsx)(o(914795).A,{spaceId:t.id,source:"person_profile",authorId:r,empty:()=>(0,ee.jsx)(oe,{viewedUserStore:n,isViewedUserDeactivated:l})})})]},`${e.id}-${r}`);case"properties":return(0,ee.jsx)("div",{children:(0,ee.jsx)(s().K,{from:"PersonProfileContainer.LeftColumnContent.PropertiesModule",fallback:e=>(0,ee.jsx)(a().d,{...e}),children:(0,ee.jsx)(Me,{userId:r,module:e,personProfileStore:d,showBottomDivider:!1})})},`${e.id}-${r}`);case"theirPages":return c?(0,ee.jsx)("div",{children:(0,ee.jsx)(s().K,{from:"PersonProfileContainer.LeftColumnContent.TheirPagesModule",fallback:e=>(0,ee.jsx)(a().d,{...e}),children:(0,ee.jsx)(At,{userStore:n,spaceStore:t})})},`${e.id}-${r}`):null;default:return null}}))})}const Vt=r.memo(zt);function zt(e){const{userId:t,modules:o,spaceStore:r,personProfileStore:i}=e;return(0,ee.jsx)(ee.Fragment,{children:o.map((e=>{switch(e.type){case"collaborators":return(0,ee.jsx)("div",{style:_t,children:(0,ee.jsxs)(s().K,{from:"PersonProfileContainer.RightColumnContent.TopCollaboratorsModule",fallback:e=>(0,ee.jsx)(a().d,{...e}),children:[(0,ee.jsx)(Ht,{children:(0,ee.jsx)(C().sA,{id:"PersonProfile.topCollaborators.title",defaultMessage:"Top collaborators"})}),(0,ee.jsx)(Nt,{userId:t,spaceStore:r})]})},`${e.id}-${t}`);case"teamspaces":return(0,ee.jsx)("div",{style:_t,children:(0,ee.jsxs)(s().K,{from:"PersonProfileContainer.RightColumnContent.TeamspacesModule",fallback:e=>(0,ee.jsx)(a().d,{...e}),children:[(0,ee.jsx)(Ht,{children:(0,ee.jsx)(C().sA,{id:"PersonProfile.teamspaces.title",defaultMessage:"Teamspaces"})}),(0,ee.jsx)($e,{userId:t})]})},`${e.id}-${t}`);case"properties":return(0,ee.jsx)("div",{children:(0,ee.jsx)(s().K,{from:"PersonProfileContainer.RightColumnContent.PropertiesModule",fallback:e=>(0,ee.jsx)(a().d,{...e}),children:(0,ee.jsx)(Me,{userId:t,module:e,personProfileStore:i,showBottomDivider:!0})})},`${e.id}-${t}`);default:return null}}))})}function Ht(e){const t=(0,p().IS)((()=>({title:{paddingBottom:8,fontWeight:P().Wy.regular}})),[]);return(0,ee.jsx)(b().A,{isSecondaryColor:!0,style:t.title,children:e.children})}function $t(e){const{store:t,modules:o,isViewedUserDeactivated:r}=e,i=(0,u().K8)((()=>t.isReady()&&t.canEdit()),[t]);return(0,ee.jsx)(ee.Fragment,{children:o.map((e=>{switch(e.type){case"normalizedTitleWithIcon":return(0,ee.jsx)(E().vV,{children:(0,ee.jsx)(Gt,{module:e,personProfileStore:t,modules:o,isEditable:i,isViewedUserDeactivated:r})},e.id);case"cover":return(0,ee.jsx)(U().f,{store:t,isEditable:i,paddingX:0,pageCoverHeight:k().mv,onMouseEnter:T().lQ,onMouseLeave:T().lQ},e.id);default:return null}}))})}function Gt(e){const{module:t,personProfileStore:o,modules:i,isEditable:n,isViewedUserDeactivated:s}=e,a=(0,D().Jh)({layoutModule:t,area:"page_main",collectionSchema:void 0,collectionStore:void 0,showDetailsPanelToggleButtonBelowTitle:!1,modules:i,context:m().R.Frame}),l=(0,u().K8)((()=>Boolean(null==o?void 0:o.getCover())),[o]),d=g().Store.createValue(!1,{name:"headerFocusStore"}),c=(0,r.useMemo)((()=>{const e=[];return n&&!l&&e.push((0,ee.jsx)(B().A,{store:o,style:(0,k().g1)(!0),label:(0,ee.jsx)(C().sA,{id:"PageViewBlock.cover.pageCover",defaultMessage:"Add cover"}),from:"person_page_header"},"add-cover")),e}),[n,l,o]),h=(0,v().y)(),f=(0,p().IS)((()=>({subtitle:{marginTop:-12,marginBottom:24,...h?(0,M().Up)(S().dE,"paddingInlineStart","paddingInlineEnd"):{}}})),[h]),y=a((0,ee.jsx)(O().H,{store:o,context:m().R.Frame,isEditable:!1,headerControls:(0,ee.jsx)(L().A,{store:o,context:m().R.Frame,children:c}),hasCover:l,isInSidePeek:!1,headerFocusStore:d,openMenuOnMount:!1,openMenuOnMountCallback:T().lQ,disabled:!0,collectionContextStore:void 0,shouldShowTemplatePicker:!1,onTitleChange:T().lQ,onTitleEditText:T().lQ,onTitleEsc:T().lQ,onTitleUntab:T().lQ,onTitleTab:T().lQ,handleHeaderMouseEnter:T().lQ,handleHeaderMouseLeave:T().lQ,layoutModule:t}));return s?(0,ee.jsxs)(ee.Fragment,{children:[y,(0,ee.jsx)("div",{style:f.subtitle,children:(0,ee.jsx)(x().D,{styleKey:"titleSemibold",colorVariant:"tertiary",children:(0,ee.jsx)(C().sA,{...A().S.deactivatedLabel})})})]}):y}},722267:(e,t,o)=>{o.d(t,{L:()=>r});class r extends(()=>o(757695))().Store{getInitialState(){return{activityIds:[],shouldLoadNewerActivities:!1,shouldLoadOlderActivities:!0,hasOlderActivities:!0,filterActivityTypes:[],filterDateRange:{starting:void 0,ending:void 0}}}}},791177:(e,t,o)=>{o.d(t,{$:()=>i});var r=o(296540);function i(){const[e,t]=(0,r.useState)({inputElementAttributes:void 0,suppressFocusRing:!1}),[o,i]=(0,r.useState)(!1),[n,s]=(0,r.useState)(!1);(0,r.useEffect)((()=>{if(o){function e(){s(!1)}function t(e){"ArrowDown"!==e.key&&"ArrowUp"!==e.key||s(!0)}return window.addEventListener("pointerdown",e),window.addEventListener("keydown",t),()=>{window.removeEventListener("pointerdown",e),window.removeEventListener("keydown",t)}}}),[o]);return[(0,r.useMemo)((()=>({inputElementAttributes:e.inputElementAttributes,suppressFocusRing:e.suppressFocusRing&&n,onFocus:()=>{i(!0)},onBlur:()=>{i(!1)}})),[e,n]),(0,r.useMemo)((()=>({setComboboxState:t,isFocusVisible:n,isComboboxFocused:o,onItemHover:()=>{s(!1)}})),[n,o])]}},797324:(e,t,o)=>{o.d(t,{A:()=>g});var r=o(296540),i=()=>o(560520),n=()=>o(484714),s=()=>o(790748),a=()=>o(581010),l=()=>o(69708),d=()=>o(100622),c=()=>o(284371),u=()=>o(396406),p=()=>o(718827),h=()=>o(843798),f=o(474848);function g(e){const{onDismiss:t,inputRef:o}=e,g=(0,n().Y0)(),m=(0,r.useRef)(null),y=g.isMobileNative&&g.isIOS,v=y&&e.show;(0,s().b)(a().A,(()=>({getNode:()=>m.current,isShown:()=>v})),[v]);const x=(0,i().n)(),b=(0,r.useCallback)((()=>{var e;null==o||null===(e=o.current)||void 0===e||e.focus(),t&&t();const r=document.activeElement;r instanceof HTMLElement&&r.blur()}),[o,t]);if(!y)return null;const S=v?-(h().j+x):0;return(0,f.jsx)(u().O,{open:!0,children:(0,f.jsx)("div",{style:{position:"fixed",top:"100vh",width:"100%",height:h().j,display:v?"flex":"none",alignItems:"center",justifyContent:"flex-end",backgroundColor:d().Tj.keyboardDoneBarBackground,transform:`translateY(${S}px)`,transition:v?"ease-out":"ease-in",boxShadow:v?`\n\t\t\t\t\t\t\t\t0 -1px 0 ${d().Tj.border.primaryTranslucent}\n\t\t\t\t\t\t\t`:void 0},ref:m,children:(0,f.jsx)(p().Ay,{style:{display:"flex",alignItems:"center",marginInlineEnd:16,color:d().oZ.blue,fontWeight:c().Wy.semibold},onTouchEnd:()=>{b()},children:(0,f.jsx)(l().sA,{defaultMessage:"Done",id:"mobile.dismissKeyboardBar.button.label"})})})})}},803960:(e,t,o)=>{o.r(t),o.d(t,{arrowChevronSingleDownIcon:()=>i,iconDefinition:()=>r});o(296540);const r={viewBox:"0 0 20 20",fittedViewBox:"3.97 6.97 12.06 6.66",svg:(0,o(474848).jsx)("path",{d:"M9.558 13.442c.244.244.64.244.884 0l5.4-5.4a.625.625 0 0 0-.884-.884L10 12.116 5.042 7.158a.625.625 0 1 0-.884.884z"})},i=(0,o(340498).wt)("arrowChevronSingleDown",r,"default")},914795:(e,t,o)=>{o.d(t,{A:()=>X});o(898992),o(354520),o(581454);var r=o(296540),i=()=>o(907258),n=()=>o(726637),s=()=>o(484714),a=()=>o(590526),l=()=>o(401497),d=()=>o(79926),c=()=>o(929219),u=()=>o(852273),p=()=>o(201794),h=()=>o(498521),f=()=>o(118307),g=()=>o(98126),m=()=>o(187174),y=()=>o(202017),v=()=>o(42583),x=()=>o(921997),b=()=>o(801634),S=()=>o(69708),j=()=>o(100622),A=()=>o(496603),I=()=>o(534177),C=()=>o(720665),w=()=>o(848259);const M=new(d().O2)("activityUpdate",(async()=>await Promise.all([o.e(93963),o.e(5181),o.e(83149),o.e(13319)]).then(o.bind(o,275056))));(0,d()._h)(M,(e=>e.ActivityUpdate));var T=()=>o(299545),P=()=>o(423817),k=()=>o(554413),R=()=>o(402267),L=()=>o(81068),B=()=>o(297401);class D extends(()=>o(757695))().Store{getInitialState(){return{selectedItems:[]}}}const E=D;var U=()=>o(322976),O=o(474848);const N=function({mode:e,title:t,onChange:o,disabled:i,focused:n,onMenuDismiss:s,items:l,addItemLabel:d,tokenInputPlaceholder:c,resultSectionTitle:u,componentDebugName:p,icon:h,getItemLabel:f,options:g,store:m}){const y=(0,a().uB)(m,E),v=(0,a().O$)(y);return(0,r.useEffect)((()=>{y.setState({selectedItems:l})}),[l,y]),(0,O.jsx)(U().A,{mode:e,hasItemsSelected:v.selectedItems.length>0,title:t,icon:h,items:l,onChange:e=>{o(e)},disabled:i,focused:n,renderFilter:(e,t)=>(0,O.jsx)(F,{getItemLabel:f,item:e,args:t}),renderToken:e=>(0,O.jsx)(K,{item:e}),renderItemForSummary:e=>(0,O.jsx)(_,{item:e}),addItemLabel:d,labelText:{title:t,tokenInputPlaceholder:c,resultSectionTitle:u,componentDebugName:p},performRequest:e=>function({query:e},t){return Promise.resolve(t.filter((t=>t.includes(e))))}(e,g),renderResultMenuItem:(t,o)=>(0,O.jsx)(W,{getItemLabel:f,mode:e,store:y,item:t,props:o}),onMenuDismiss:s})};function _({item:e}){return(0,O.jsx)(O.Fragment,{children:`hello${e}`})}function K({item:e}){return(0,O.jsx)(O.Fragment,{children:e})}function F({item:e,args:t,getItemLabel:o}){const{disabled:r,onRemove:i,onClick:s}=t,a={menuItem:{minHeight:void 0,paddingTop:n().A.isMobile?12:4,paddingBottom:n().A.isMobile?12:4},menuItemTitle:{width:"100%"},labeledMenuItemTitle:{display:"inline-flex",alignItems:"center"},menuItemLabel:{marginInlineEnd:12},recordIcon:{marginInlineEnd:4}},l=(0,O.jsx)(B().A,{disabled:r,onClick:i});return(0,O.jsx)(L().A,{title:(null==o?void 0:o(e))||e,disabled:r,focused:!1,right:l,style:a.menuItem,desktopTitleStyle:a.menuItemTitle,onClick:s})}function W({item:e,props:t,getItemLabel:o,mode:i,store:n}){const s=(0,a().uB)(n,E),l=(0,a().K8)((()=>s.state.selectedItems),[s]);return(0,r.createElement)(L().A,{...t,key:e,title:(null==o?void 0:o(e))||e,isChecked:i===U().C.Pill&&l.includes(e)})}var V=()=>o(860048),z=()=>o(110886),H=()=>o(132533),$=()=>o(988591),G=()=>o(722267),Y=()=>o(279922);function X(e){var t;const{spaceId:o,navigableBlockStore:n,collectionIds:g,authorId:y,source:v}=e,b=null==n?void 0:n.id,j=(0,s().v3)(),w=(0,a().uB)(void 0,G().L),R=(0,a().uB)(void 0,f().A),L=(0,l().IS)((()=>({placeholderContent:q()})),[]),B=(0,r.useMemo)((()=>A().nF((e=>function(e,t){t.update((e=>({...e,shouldLoadNewerActivities:!0})))}(0,w)),1e3)),[w]),D=(0,r.useMemo)((()=>C().Hg(B)),[B]);(0,r.useEffect)((()=>{let e,t,o;if(b){const t=(0,x().O$)(b);e=u().Ay.addListener(t,void 0,D,void 0,j)}if(g&&(t=g.map((e=>{const t=(0,x().zB)(e);return u().Ay.addListener(t,void 0,D,void 0,j)})).filter(I().O9)),y){const e=(0,x().Ii)(y);o=u().Ay.addListener(e,void 0,D,void 0,j)}return()=>{if(e&&u().Ay.removeListener(e,j),t)for(const e of t)u().Ay.removeListener(e,j);o&&u().Ay.removeListener(o,j)}}),[g,j,D,b,y]);const E=(0,a().O$)(c().e),U=(0,a().K8)((()=>{const e=w.state;return 0===e.filterActivityTypes.length&&void 0===e.filterDateRange.ending&&void 0===e.filterDateRange.starting}),[w]),N=(0,a().K8)(V().XL,[]),{currentUserStore:_,currentSpaceStore:K}=(0,a().K8)((()=>{const{currentUserStore:e,sidebarSpaceStore:t}=i().default.state;return{currentUserStore:e,currentSpaceStore:t}}),[]),{shouldLoadOlderActivities:F,shouldLoadNewerActivities:W,filterActivityTypes:X,filterDateRange:J,activityIds:oe,hasOlderActivities:re}=(0,a().O$)(w),ie=(0,d().fJ)(M),[ne]=(0,m().Yb)((async()=>{if(!E||!_||!K)return;const e=Y().Ay.startLoading();W?await z().X(j,{store:w,activityIds:oe,spaceId:o,filterActivityTypes:X,filterDateRange:J,navigableBlockId:b,collectionIds:g,authorId:y,source:v}):F&&re&&await z().r(j,{store:w,activityIds:oe,spaceId:o,filterActivityTypes:X,filterDateRange:J,navigableBlockId:b,collectionIds:g,authorId:y,source:v}),Y().Ay.endLoading(e)}),[oe,w,g,K,_,j,X,J,re,E,b,W,F,o,v,y]),se=ne.error,ae="resolved"===ne.status,le=(0,a().K8)((()=>{if(!_)return[];const e=_.id,t=(0,p().T)("supportsNativeHome"),r={spaceId:o,userId:e,navigableBlockId:b,collectionIds:g,filterDateRange:J,filterActivityTypes:X,authorId:y},n=t&&0===oe.length&&!ae?k().oV(r):oe;return t&&ae&&k().tK(r,oe),function(e){return A().oE(e.map((e=>function(e){const{currentUserStore:t,sidebarSpaceStore:o}=i().default.state;if(!t||!o)return;const r=(0,T().jA)(o,e,o.id),n=r.getModel();return n&&!n.invalid?n:null}(e))))}(n)}),[oe,g,_,X,J,y,b,ae,o]);if(!E)return(0,O.jsx)(ee,{});if(!_||!K)return null;const de=0===le.length&&!re&&ae,ce=K;if(se||"rejected"===ie.status)return(0,O.jsx)("div",{style:L.placeholderContent,children:(0,O.jsx)(S().sA,{defaultMessage:"Something went wrong.",id:"activityUpdate.unknownErrorLoadingActivities.message"})});const ue=Boolean(g&&g.length>0);if("resolved"!==ie.status||0===le.length&&!ae)return(0,O.jsxs)("div",{children:[N?(0,O.jsx)(Q,{hasCollection:ue,source:v,activityUpdatesStore:w,filterPopupStore:R}):void 0,(0,O.jsx)(P().J,{areaHeight:window.innerHeight})]});const{ActivityUpdate:pe}=ie.value;return(0,O.jsxs)("div",{children:[N?(0,O.jsx)(Q,{hasCollection:ue,source:v,activityUpdatesStore:w,filterPopupStore:R}):void 0,(0,O.jsxs)("div",{style:de?L.placeholderContent:Z(),className:de?"":"notranslate",children:[de?null===(t=e.empty)||void 0===t?void 0:t.call(e,{hasFiltersOn:!U}):null,(0,O.jsx)(H().X,{children:(0,O.jsx)("section",{role:"feed",children:le.map(((e,t,o)=>{const r=o.length-1===t,i="notifications_tab"===v?{tab:"all",source:v}:"updates_sidebar"===v?{tab:"pageUpdatesSidebar",source:v}:"person_profile"===v?{tab:"personProfile",source:v}:{tab:"homeTile",source:v};return(0,O.jsx)($().Z,{index:t,children:(0,O.jsx)(pe,{activity:e,rootStore:ce,isLast:r,tabArgs:i})},e.id)}))})}),(0,O.jsx)(h().A,{onChange:e=>{e<200&&ae&&!F&&re&&(U||le.length>0)&&w.update((e=>({...e,shouldLoadOlderActivities:!0})))},children:!ae&&re?(0,O.jsx)(te,{isPaginated:!0}):null})]})]})}function Q(e){const{hasCollection:t,source:o,activityUpdatesStore:r,filterPopupStore:n}=e,{currentUserStore:s,currentSpaceStore:l}=(0,a().K8)((()=>{const{currentUserStore:e,sidebarSpaceStore:t}=i().default.state;return{currentUserStore:e,currentSpaceStore:t}}),[]),d=(0,a().K8)((()=>r.state.filterActivityTypes.length>0||r.state.filterDateRange.ending||r.state.filterDateRange.starting),[r]);return s&&l?(0,O.jsxs)("div",{style:{display:"flex",flexDirection:"row",padding:"12px 10px",width:"100%",gap:6},children:[(0,O.jsx)(J,{hasCollection:t,source:o,filterPopupStore:n,activityUpdatesStore:r}),(0,O.jsx)(se,{source:e.source,activityUpdatesStore:r,filterPopupStore:n}),d?(0,O.jsx)(ne,{source:e.source,activityUpdatesStore:r}):void 0]}):null}function J(e){const{hasCollection:t,source:o,activityUpdatesStore:i,filterPopupStore:n}=e,l=(0,S().tz)(),d=(0,s().v3)(),c=t?b().Fv:b().IP,u=(0,a().uB)(void 0,E),p=(0,a().K8)((()=>i.state.filterActivityTypes),[i]),h=(0,r.useCallback)((()=>{re(n)}),[n]);return(0,O.jsx)(N,{store:u,focused:!1,icon:y().n,options:[...c].sort(),items:p,mode:U().C.Pill,title:(0,O.jsx)(S().sA,{id:"activityUpdates.filterMenu.byType.title",defaultMessage:"Activity type"}),tokenInputPlaceholder:l.formatMessage({id:"activityUpdates.filterMenu.byType.search",defaultMessage:"Search for a type"}),resultSectionTitle:l.formatMessage({id:"activityUpdates.filterMenu.byType.resultSectionTitle",defaultMessage:"Activity Types"}),addItemLabel:l.formatMessage({id:"activityUpdates.filterMenu.byType.addItemLabel",defaultMessage:"Add an activity type"}),componentDebugName:"ActivityUpdatesSearchEditTypesFilter",onChange:e=>ie((()=>i.update((t=>({...t,filterActivityTypes:e,activityIds:[],hasOlderActivities:!0,shouldLoadOlderActivities:!0,shouldLoadNewerActivities:!1})))),d,o,i),onMenuDismiss:h,getItemLabel:e=>e.split("-").map((e=>e.replace(/(^.)/,(e=>e.toUpperCase())))).join(" ")})}function Z(){return{minHeight:n().A.isMobile?void 0:"75vh"}}function q(){return{...Z(),paddingTop:n().A.isMobile?32:void 0,paddingBottom:n().A.isMobile?32:void 0,minHeight:n().A.isMobile?void 0:220,display:"flex",textAlign:"center",alignItems:"center",justifyContent:"center",fontSize:14,color:j().Tj.text.secondary,flexDirection:"column",flex:"1 1 0%"}}function ee(){const e=(0,l().IS)((()=>({offlineMessage:q()})),[]);return(0,O.jsx)("div",{style:e.offlineMessage,children:(0,O.jsx)(S().sA,{defaultMessage:"Please go online to view updates.",id:"activityUpdates.offlineMessage"})})}function te({isPaginated:e}){const t=(0,l().IS)((()=>({spinner:{...q(),minHeight:e?64:220}})),[e]);return(0,O.jsx)("div",{style:t.spinner,children:(0,O.jsx)(g().k,{})})}function oe(e){var t,o;const{filterActivityTypes:r,filterDateRange:i}=e.state;return{activityTypes:r,dateRange:{start:null===(t=i.starting)||void 0===t?void 0:t.start_date,end:null===(o=i.ending)||void 0===o?void 0:o.start_date}}}function re(e){e.setState({...e.state,open:!1})}function ie(e,t,o,r){const i=oe(r);e();const n=oe(r);w().Xl({environment:t,activityUpdatesSource:o,filters:n,prevFilters:i})}function ne({source:e,activityUpdatesStore:t}){const o=(0,s().v3)(),r=(0,l().IS)((()=>({clearButton:{flexGrow:1,textAlign:"end",cursor:"pointer",fontSize:14,color:j().Tj.text.secondary,marginInlineEnd:8}})),[]);return(0,O.jsx)("div",{style:r.clearButton,onClick:()=>ie((()=>t.reset()),o,e,t),children:(0,O.jsx)(S().sA,{defaultMessage:"Clear",id:"activityUpdates.clearFilters"})})}function se({source:e,activityUpdatesStore:t,filterPopupStore:o}){const i=(0,s().v3)(),n=(0,r.useCallback)((()=>re(o)),[o]),l=(0,a().K8)((()=>t.state.filterDateRange),[t]);return(0,O.jsx)(R().A,{mode:U().C.Pill,focused:!1,showButtons:!0,title:(0,O.jsx)(S().sA,{id:"activityUpdates.filterMenu.byDate",defaultMessage:"Date Range"}),icon:v().D,value:l,onMenuDismiss:n,onChange:o=>ie((()=>t.update((e=>({...e,filterDateRange:o,activityIds:[],hasOlderActivities:!0,shouldLoadOlderActivities:!0})))),i,e,t)})}},988591:(e,t,o)=>{o.d(t,{Z:()=>a,v:()=>s});var r=o(296540),i=o(474848);const n=(0,r.createContext)(void 0);function s(){return(0,r.useContext)(n)}function a(e){const{index:t,children:o}=e;return(0,i.jsx)(n.Provider,{value:t,children:o})}n.displayName="NotificationIndexContext"}}]);