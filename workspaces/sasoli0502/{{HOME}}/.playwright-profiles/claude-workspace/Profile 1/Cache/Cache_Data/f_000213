"use strict";(globalThis.webpackChunknotion_next=globalThis.webpackChunknotion_next||[]).push([[14344,16866,17680,53697,77093,95576,99171],{6697:(e,t,o)=>{o.d(t,{h:()=>i});var n=()=>o(79926);const r=new(n().O2)("DictationAvatar",(async()=>await Promise.all([o.e(75134),o.e(35530),o.e(9773),o.e(36556),o.e(55373),o.e(36192),o.e(40537),o.e(27992),o.e(63452),o.e(66249),o.e(92845),o.e(87249),o.e(79022),o.e(14578),o.e(87017),o.e(34877),o.e(46414),o.e(11676),o.e(61165),o.e(94522),o.e(44584),o.e(38293),o.e(40992),o.e(88455),o.e(52871),o.e(47160),o.e(49021),o.e(53697),o.e(17680),o.e(6039),o.e(71136),o.e(86341),o.e(29316),o.e(3101)]).then(o.bind(o,310947)))),i=(0,n()._h)(r,(e=>e.DictationAvatar))},17680:(e,t,o)=>{o.d(t,{eQ:()=>q,hJ:()=>le,Ay:()=>G,Uo:()=>Q,XE:()=>ae});o(944114),o(898992),o(823215),o(354520),o(672577),o(581454);var n=o(296540),r=()=>o(59226),i=()=>o(484714),a=()=>o(590526),s=()=>o(401497),l=()=>o(929219),c=()=>o(75435),d=()=>o(609679),u=()=>o(849255),p=()=>o(56268),m=()=>o(718827),g=()=>o(631524),h=()=>o(26697),v=()=>o(302501),f=()=>o(869190),y=()=>o(641007),S=()=>o(187174),w=()=>o(798880),b=()=>o(695608),x=()=>o(69708),I=()=>o(100622),C=()=>o(496603),_=()=>o(23420),M=()=>o(488923),A=()=>o(102172),k=()=>o(130119),j=()=>o(6697),P=()=>o(673657),D=()=>o(64790),T=()=>o(852273);const E=function(e){const t=(0,i().v3)(),r=(0,n.useRef)(),a=(0,o(336811).T)(),s=(0,n.useCallback)((async()=>{if(await o(129286).transactionQueue.awaitRecordTransaction(e.blockStore.pointer),!a.current)return;const n=(0,o(921997).Ws)(e.blockStore.id);r.current=T().Ay.addListener(n,void 0,C().nF((()=>o(466721).updatePageVisits(t,{blockStore:e.blockStore,pageVisitStore:e.pageVisitStore,incremental:!0,limit:e.limit})),1e3),void 0,t)}),[t,a,e.blockStore,e.limit,e.pageVisitStore]),l=(0,n.useCallback)((()=>{r.current&&(T().Ay.removeListener(r.current,t),r.current=void 0)}),[t]);return(0,n.useEffect)((()=>(s(),l)),[s,l]),null};var U=()=>o(869562),R=()=>o(737230),V=()=>o(994006),F=()=>o(453697),N=()=>o(79926);const B=new(N().O2)("AvatarHoverCard",(async()=>await Promise.all([o.e(86036),o.e(6608)]).then(o.bind(o,356221)))),L=(0,N()._h)(B,(e=>e.AvatarHoverCard)),O=new(N().O2)("LastViewedByHoverCard",(async()=>await o.e(1930).then(o.bind(o,652429)))),K=(0,N()._h)(O,(e=>e.LastViewedByHoverCard));var z=o(474848);const W=5,H=25,$=6,q=22;const G=function({pageVisitStore:e,presenceStore:t,rootStore:n,maxUsers:r}){return(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(o(912474).a,{rootStore:n}),(0,z.jsx)(le,{rootStore:n,pageVisitStore:e,presenceStore:t,maxUsers:r,isShowingInFeed:!1}),(0,z.jsx)(E,{blockStore:n,pageVisitStore:e,limit:1+Y(r)+H})]})};function X(e){return C().Ul(e,(e=>e.activityTimestampNearestMinuteMs))}function Y(e){return e??W}function Z(e,t){return u().L.createChildStore(t,{table:w().oo,id:e})}function Q(e){const{environment:t,isShowingTabBar:o,isShowingInFeed:n}=e;return{...(0,k().g)({noDrag:t.device.isElectron&&!o}),display:"flex",alignItems:"center",position:"relative",flexDirection:"row-reverse",marginInlineStart:8,paddingInlineEnd:$,transform:"translateZ(0)",...n&&{maxHeight:54,paddingBottom:12}}}function J(){return{color:I().Tj.text.inverseSecondary,fontSize:10,textTransform:"uppercase",letterSpacing:"0.015em"}}function ee({userData:e,isPresent:t,rootStore:o,isShowingInFeed:n}){const r=(0,i().v3)(),s=(0,x().tz)(),l=r.currentUser.id,c=(0,a().K8)((()=>Z(e.userId,o)),[e,o]),u=(0,a().K8)((()=>c.isDefined()),[c]),p=(0,a().K8)((()=>(0,b().c6)(s,c.getModel())),[s,c]),m=(0,a().K8)((()=>c.getEmail()),[c]);if(!u)return null;let g;return t?l!==c.id&&(g=e.blockId&&!n?(0,z.jsx)(x().sA,{defaultMessage:"Viewing now. Click to see where they are.",id:"topbar.presenceIndicator.viewingNowWithLocation.tooltip"}):(0,z.jsx)(x().sA,{defaultMessage:"Viewing now",id:"topbar.presenceIndicator.viewingNow.tooltip"})):l!==c.id&&e.activityTimestampNearestMinuteMs&&(g=(0,z.jsx)(x().sA,{defaultMessage:"Last viewed {timeFromNow}",id:"topbar.presenceIndicator.lastViewedTime.tooltip",values:{timeFromNow:(0,f().v9)(Math.min(e.activityTimestampNearestMinuteMs,Date.now()),d().locale)}})),(0,z.jsxs)("div",{children:[(0,z.jsx)("div",{className:"notranslate",children:p}),(0,z.jsx)("div",{style:{fontWeight:400},children:m}),g?(0,z.jsx)("div",{style:{color:I().Tj.text.inverseSecondary,minWidth:150,paddingTop:2,paddingBottom:2,lineHeight:1.3},children:g}):void 0]})}function te({userData:e,index:t,rootStore:o}){const n=(0,i().v3)(),r=(0,D().dp)(n,e),s=(0,a().K8)((()=>Z(e.userId,o)),[e,o]);if(!(0,a().K8)((()=>s.isDefined()),[s]))return null;let l;!r&&e.activityTimestampNearestMinuteMs&&(l=(0,f().v9)(e.activityTimestampNearestMinuteMs,d().locale));const c=(0,z.jsxs)("div",{style:{display:"flex",alignContent:"flex-end",minWidth:140,width:"100%",marginTop:4},children:[(0,z.jsx)(V().A,{userStore:s,avatarSize:18,style:{flexGrow:1},hasPersonHoverCard:!1}),(0,z.jsx)("div",{style:{marginInlineStart:"auto",paddingInlineStart:12,textAlign:"end",flexShrink:1,color:I().Tj.text.inverseSecondary},children:l})]});if(r&&e.blockId){const t=e.blockId;return(0,z.jsx)(m().Ay,{onClick:()=>(0,_().B)([t],!0,n),style:{display:"flex",alignItems:"center"},children:c})}return(0,z.jsx)("div",{style:{display:"flex",alignItems:"center"},children:c})}function oe({hiddenUsers:e,hiddenUsersCount:t,hasMore:o,rootStore:n,environment:i}){if(!(0,r().X)("use_topbar_person_hovercards"))return(0,z.jsx)(h().m,{allowHover:!0,originGap:7,renderTooltip:r=>(0,z.jsx)(ne,{hiddenUsers:e,hiddenUsersCount:t,hasMore:o,rootStore:n,events:r}),render:e=>(0,z.jsx)(re,{hiddenUsersCount:t,events:e,environment:i,rootStore:n})});const a=e.filter((e=>!(0,D().dp)(i,e))),s=e.filter((e=>(0,D().dp)(i,e))).length,l=t-s;return(0,z.jsx)(K,{trigger:(0,z.jsx)(re,{hiddenUsersCount:t,environment:i,rootStore:n}),viewers:a,totalCount:l,rootStore:n})}function ne({hiddenUsers:e,hiddenUsersCount:t,hasMore:o,rootStore:n,events:r}){const a=(0,i().v3)(),s=[],l=[];for(const i of e)(0,D().dp)(a,i)?s.push(i):l.push(i);const c=l.slice(0,H-s.length),d=t-(s.length+c.length);return(0,z.jsxs)("div",{...r,children:[s.length>0?(0,z.jsxs)("div",{style:{marginBottom:4},children:[(0,z.jsx)(v().A,{style:J(),children:(0,z.jsx)(x().sA,{defaultMessage:"Viewing now",id:"topbar.presenceIndicator.hiddenUsers.viewingNow.tooltip"})}),s.map(((e,t)=>(0,z.jsx)(te,{userData:e,index:t,rootStore:n},t)))]}):void 0,c.length>0?(0,z.jsxs)("div",{style:{marginBottom:4},children:[(0,z.jsx)(v().A,{style:{...J()},children:(0,z.jsx)(x().sA,{defaultMessage:"Last viewed by",id:"topbar.presenceIndicator.hiddenUsers.lastViewedBy.tooltip"})}),c.map(((e,t)=>(0,z.jsx)(te,{userData:e,index:t,rootStore:n},t)))]}):void 0,(0,z.jsx)(ie,{remainingHiddenUsersCount:d,hasMore:o})]})}function re({hiddenUsersCount:e,events:t,environment:o,rootStore:r}){const i=(0,s().IS)((()=>({origin:{paddingInline:8,marginInlineStart:4,marginInlineEnd:-$-4}})),[]),a=(0,n.useCallback)((()=>{U().handleSidebarButtonClick(o,r,R().tF.Updates,"more_menu"),R().Ay.setState({...R().Ay.state,updatesSubTab:R().VE.Analytics})}),[o,r]);return(0,z.jsx)(g().p,{style:i.origin,size:"sm",shape:"pill",colorPalette:"gray",onClick:a,...t,children:(0,z.jsx)(x().sA,{defaultMessage:"{hiddenUsersCount, plural, one {+{hiddenUsersCount}} other {+{hiddenUsersCount}}}",id:"topbar.presenceIndicator.hiddenUsers.otherCount.message",values:{hiddenUsersCount:e}})})}function ie({hasMore:e,remainingHiddenUsersCount:t}){const o=(0,s().IS)((()=>({message:{marginInlineStart:2,marginTop:2,color:I().Tj.text.inverseSecondary}})),[]);return t>0?(0,z.jsx)("div",{style:o.message,children:e?(0,z.jsx)(x().sA,{defaultMessage:"{remainingVisitorsCount}+ more…",id:"topbarPresence.presenceIndicator.hiddenUsers.evenMoreUsersNotViewing.tooltip",values:{remainingVisitorsCount:t}}):(0,z.jsx)(x().sA,{defaultMessage:"{remainingVisitorsCount} more…",id:"topbarPresence.presenceIndicator.hiddenUsers.moreUsersNotViewing.tooltip",values:{remainingVisitorsCount:t}})}):null}function ae(e,t){const o=(0,s().DP)();return(0,s().IS)((()=>{const n={width:q,height:q,borderRadius:q},r=e(o);return{button:{transition:"all 0.2s ease",transform:"scale(1)"},buttonHovered:{transform:"scale(1.15)",background:"none"},buttonPressed:{transform:"scale(0.9)",background:"none"},uiUserAvatarStyles:{...n},avatarInnerOutline:{...n,outlineStyle:"solid",outlineColor:I().Tj.UIUserAvatarInnerOutline,outlineWidth:.5,outlineOffset:-.5},avatarBorder:t?{...n,outlineStyle:"solid",outlineColor:r,outlineWidth:1.5,outlineOffset:-.5}:{},avatarOuterOutline:{...n,outlineStyle:"solid",outlineColor:t?I().Tj.background.primary:I().Tj.UIUserAvatarIdleOutline,outlineWidth:.5,outlineOffset:t?1:0,backgroundColor:I().Tj.background.primary,marginInlineEnd:-6,position:"relative"},initialColor:{color:t?r:I().Tj.icon.secondary}}}),[e,t,o])}function se(e){const{userData:t,rootStore:o,isShowingInFeed:s=!1}=e,l=(0,i().v3)(),{userId:c}=t,u=(0,D().dp)(l,t),p=(0,w().MF)(c),g=(0,r().X)("use_topbar_person_hovercards"),{userStore:v,showAvatar:S}=(0,a().K8)((()=>{const e=Z(c,o);return{userStore:e,showAvatar:(e.isDefined()||p)&&!e.getIsSuspended()}}),[c,o,p]),b=ae((0,n.useCallback)((e=>(0,w().MF)(c)?I().Tj.icon.secondary:c===l.currentUser.id?I().Tj.border.accentPrimary:(0,I().Nq)(c,e)),[l.currentUser.id,c]),u);if(!S)return null;const C=(0,z.jsx)("div",{style:b.avatarOuterOutline,children:(0,z.jsx)("div",{style:b.avatarBorder,children:(0,z.jsx)(F().A,{iconStyle:b.avatarInnerOutline,userStore:p?y().px:v,style:b.uiUserAvatarStyles,isOffline:!u,size:q,avatarShouldShowShadow:!s,initialOverrideStyle:b.initialColor})})}),M=u&&t.blockId?(0,z.jsx)(m().Ay,{onClick:()=>(0,_().B)([t.blockId??""],!0,l),style:b.button,hoveredStyle:b.buttonHovered,pressedStyle:b.buttonPressed,children:C}):C;if(s||!l.currentUser.id)return M;if(g){const e=function({userData:e,isPresent:t,currentUserId:o,userId:n,isShowingInFeed:r}){if(o!==n)return t?e.blockId&&!r?(0,z.jsx)(x().sA,{defaultMessage:"Viewing now. Click to see where they are.",id:"topbar.presenceIndicator.viewingNowWithLocation.tooltip"}):(0,z.jsx)(x().sA,{defaultMessage:"Viewing now",id:"topbar.presenceIndicator.viewingNow.tooltip"}):e.activityTimestampNearestMinuteMs?(0,z.jsx)(x().sA,{defaultMessage:"Last viewed {timeFromNow}",id:"topbar.presenceIndicator.lastViewedTime.tooltip",values:{timeFromNow:(0,f().v9)(Math.min(e.activityTimestampNearestMinuteMs,Date.now()),d().locale)}}):void 0}({userData:t,isPresent:u,currentUserId:l.currentUser.id,userId:c,isShowingInFeed:s});return(0,z.jsx)(L,{trigger:M,userStore:v,header:e})}return(0,z.jsx)(h().m,{disableTooltip:s,textWrap:!0,renderTooltip:()=>(0,z.jsx)(ee,{rootStore:o,userData:t,isPresent:u,isShowingInFeed:s}),render:e=>(0,z.jsx)("div",{...e,children:M})})}function le(e){const{rootStore:t,pageVisitStore:o,presenceStore:n,maxUsers:r,isShowingInFeed:s}=e,d=(0,i().v3)(),u=d.currentUser.id,[{status:m,value:g}]=(0,S().Yb)((async()=>(0,M().$g)()),[]),h=(0,a().K8)((()=>{var e;if("resolved"===m)return null==g||null===(e=g.getPresencesForBlock(t.id))||void 0===e?void 0:e.find((e=>e.blockId===t.id))}),[g,m,t.id]),v=(0,a().K8)((()=>{const e=d.currentUser.id;if(!e)return;const i=s||(0,D().xm)(n)?(0,D().PZ)({pageVisitStore:o,presenceStore:n}):[];let a=(null==o?void 0:o.state.totalCount)??i.length;const l=[],c=[];for(const t of i)t.userId!==e?(0,D().dp)(d,t)?l.push(t):c.push(t):a--;!(0,p().r)({environment:d,store:t})&&t.isNavigableBlock()&&(0,A().BP)(t,d,d.device)&&"resolved"===m&&null!=h&&h.present&&l.push(h);const u=[...X(l).reverse(),...X(c).reverse()],g=Y(r)-1;return{visibleUsers:u.slice(0,g),hiddenUsers:u.slice(g),totalCount:a,hasMore:Boolean(null==o?void 0:o.state.hasMore)}}),[o,n,d,s,r,t,m,h],{useDeepEqual:!0}),{visibleUsers:f,hiddenUsers:y,hiddenUsersCount:b,hasMoreHiddenUsers:x,isEveryUserStoreReady:I}=(0,a().K8)((()=>{if(!u)return{};const{visibleUsers:e=[],hiddenUsers:o=[]}=v??{},n=[u,...e.map((e=>e.userId)),...o.map((e=>e.userId))].map((e=>Z(e,t)));return{visibleUsers:e,hiddenUsers:o,hiddenUsersCount:Number(null==v?void 0:v.totalCount)-e.length,hasMoreHiddenUsers:Boolean(null==v?void 0:v.hasMore),isEveryUserStoreReady:n.every((e=>e.isReady()||(0,w().MF)(e.id)))}}),[u,v,t]),C=(0,a().O$)(c().b),_=(0,P().n)(t),k=!(0,a().O$)(l().e);if(!u||!v||!I||k)return null;if(u!==t.userId)return null;if(0===f.length&&0===y.length)return _?(0,z.jsx)("div",{style:Q({environment:d,isShowingTabBar:C,isShowingInFeed:s}),children:(0,z.jsx)(j().h,{enableClickToScroll:!0,rootStore:t})}):null;{const e=[...f];return e.reverse(),(0,z.jsxs)("div",{style:Q({environment:d,isShowingTabBar:C,isShowingInFeed:s}),children:[b>0?(0,z.jsx)(oe,{rootStore:t,hiddenUsers:y,hiddenUsersCount:b,hasMore:x,environment:d}):void 0,e.map((e=>(0,z.jsx)(se,{userData:e,rootStore:t},e.userId))),s?void 0:(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(se,{rootStore:t,userData:{userId:u,present:!0}}),(0,z.jsx)(j().h,{enableClickToScroll:!0,rootStore:t})]})]})}}},24126:(e,t,o)=>{o.d(t,{c:()=>r});o(296540);const n={viewBox:"0 0 20 20",fittedViewBox:"3.9 2.75 12.18 14.49",svg:(0,o(474848).jsx)("path",{d:"M12.626 2.768a.625.625 0 0 1 0 1.224l-.126.013h-.125v4.794l3.366 5.159c.893 1.369-.03 3.17-1.623 3.281l-.156.006H6.039c-1.688 0-2.703-1.873-1.78-3.287l3.366-5.157V4.005H7.5a.625.625 0 0 1 0-1.25h5zM8.875 9.173l-.102.156-1.567 2.401h5.589l-1.569-2.403-.101-.156V4.005h-2.25z"})},r=(0,o(340498).wt)("beaker",n,"default")},64790:(e,t,o)=>{o.d(t,{$L:()=>u,EV:()=>s,PZ:()=>d,dp:()=>l,xm:()=>c});o(944114);var n=()=>o(798880),r=()=>o(100622),i=()=>o(496603),a=()=>o(720665);function s(e){if(null!=e&&e.blockId)return e.blockId}function l(e,t){const o=e.currentUser.id;return t.userId===o||t.present}function c(e){var t;return(null===(t=e.state.rootStore)||void 0===t?void 0:t.canEdit())??!1}function d(e){const{pageVisitStore:t,presenceStore:o}=e,{remotePresenceData:n}=o.state;let r=[];n&&i().uk(n,(e=>{null!=e&&e.userId&&r.push(e)}));const{pageId:s,lastViewTime:l,lastExitTime:c,totalCount:d,hasMore:u,...p}=t.state;return i().uk(p,(e=>{e.isDefined()&&r.push({userId:e.getUserId(),activityTimestampNearestMinuteMs:(0,a().WY)(e.getVisitedAt()),present:!1})})),r=i().hS(r,(e=>e.userId)),i().Ul(r,(({activityTimestampNearestMinuteMs:e})=>e?-e:0))}function u(e){const{userId:t,theme:o}=e;return(0,n().MF)(t)?r().Tj.icon.secondary:(0,r().Nq)(t,o)}},108184:(e,t,o)=>{o.r(t),o.d(t,{COMPLETION_THROTTLE:()=>I,PREVIEW_STEP_DELAY:()=>C,maybeUpdateAIUsageEligibilityStoreV2:()=>k,maybeUpdateAiEligibility:()=>A,postProcessAICreatedStores:()=>M,showCompletionErrorWithCode:()=>_,wrapTemporaryBlocksInList:()=>j});o(18107),o(967357);var n=()=>o(242422),r=()=>o(675133),i=()=>o(128933),a=()=>o(770063),s=()=>o(878126),l=()=>o(165358),c=()=>o(179034),d=()=>o(427419),u=()=>o(720665),p=()=>o(753812),m=()=>o(722101),g=()=>o(384944),h=()=>o(274873),v=()=>o(412669),f=()=>o(556122),y=()=>o(594794),S=()=>o(668721),w=()=>o(685377),b=()=>o(661077),x=()=>o(96563);const I=300,C=250;function _(e){const t=r().A.getIntl();return 451===e?i().D6({label:t.formatMessage({id:"completionActions.moderationError",defaultMessage:"AI does not allow content that is harmful or illegal. Please revise your input and try again. (451)"})}):413===e?i().D6({label:t.formatMessage({id:"completionActions.promptOrAttachmentTooLarge",defaultMessage:"Query or attachment is too large. Please revise your input and try again. (413)"})}):502===e||503===e||504===e?i().D6({label:t.formatMessage({id:"completionActions.providerError",defaultMessage:"We’re experiencing issues with our AI provider. Try again in a few minutes. ({errorCode})"},{errorCode:e})}):void i().D6({label:t.formatMessage({id:"completionActions.genericError",defaultMessage:"AI is temporarily unavailable. Try again in a few minutes. ({errorCode})"},{errorCode:e})})}function M(e,t){for(const o of t)h().In({environment:e,blockStore:o})}async function A(e,t,o){let r;if(n().default.checkGate({gateName:"usage_based_pricing_pfa_checks_purchased_credits_enabled"}))return void(await k(e,t,o));n().default.checkGate({gateName:"usage_based_pricing_alpha_enabled"})&&k(e,t,o).catch((e=>{l().log({level:"error",from:"ai.completionActions",type:"maybeUpdateAIUsageEligibilityStoreV2Error",spaceId:t,error:e})}));const i=f().TI();if(i.debug)r=402!==i.showErrorCode;else{const n=S().o.getState();if(n&&n.isEligible&&"unlimited"===n.type&&!o){const e=n.lastUpdatedAt;if(Date.now()-e<10*u().Xb)return}const i=await p().callCellCompatibleApi({eventName:"getAIUsageEligibility",environment:e,data:{spaceId:t},cellNavigation:{cellId:void 0,spaceId:t}});if("success"===i.type){r=i.data.isEligible,r&&v().K.state&&v().K.setState(!1);const e=!1===(null==n?void 0:n.isEligible)&&(null==n?void 0:n.requestedAccess),t=i.data.researchModeUsage??0;S().o.setState({...i.data,lastUpdatedAt:Date.now(),researchModeUsage:t,...!1===i.data.isEligible&&{requestedAccess:e}})}}void 0!==r&&b().P.setState(r)}async function k(e,t,o){const n=await s().T.awaitData(e,{spaceId:t}),r=w().y.getData(e,{spaceId:t});if(n){if(r&&(0,d().Hg)(n)&&!o){const e=r.lastUpdatedAt;if(Date.now()-e<10*u().Xb)return}await(0,x().y3)(e,t)}}function j(e){var t;const{environment:o,stores:n,listId:r,inMemoryRecordCache:i,transaction:s}=e,l=(null===(t=n.at(0))||void 0===t?void 0:t.getSpaceId())??s.spaceId,d=new(a().pm)({environment:o,pointer:{table:c().ev,id:r||(0,y().Z1)({environment:o,table:c().ev,spaceId:l}),spaceId:l},recordStoreOptions:{inMemoryRecordCache:i,userId:o.currentUser.id},path:["content"]});for(const a of n)m().BC({parentStore:d,appendStore:a,transaction:s}),g().zv({store:a,data:{parent_id:d.id,parent_table:d.table,alive:!0},transaction:s});return d}},130119:(e,t,o)=>{function n(e){return"drag"in e&&e.drag?{WebkitAppRegion:"drag"}:"noDrag"in e&&e.noDrag?{WebkitAppRegion:"no-drag"}:{}}o.d(t,{g:()=>n})},132389:(e,t,o)=>{o.d(t,{A:()=>r});o(296540);var n=o(474848);function r(e){const t={display:"inline-block",minWidth:e.size,minHeight:e.size};return"x"===e.axis?t.minHeight=1:"y"===e.axis&&(t.minWidth=1),(0,n.jsx)("div",{style:t})}},132855:(e,t,o)=>{o.r(t),o.d(t,{arrowInCircleUpFillIcon:()=>r,iconDefinition:()=>n});o(296540);const n={viewBox:"0 0 20 20",fittedViewBox:"2.37 2.37 15.25 15.26",svg:(0,o(474848).jsx)("path",{d:"M10 17.625a7.625 7.625 0 1 0 0-15.25 7.625 7.625 0 0 0 0 15.25m3.042-8.07a.625.625 0 0 1-.884 0L10.625 8.02v5.466a.625.625 0 1 1-1.25 0V8.021L7.842 9.554a.625.625 0 1 1-.884-.883l2.6-2.6a.625.625 0 0 1 .884 0l2.6 2.6a.625.625 0 0 1 0 .883"})},r=(0,o(340498).wt)("arrowInCircleUpFill",n,"fill")},147294:(e,t,o)=>{o.d(t,{Ee:()=>h,J1:()=>u,oG:()=>p});o(296540);var n=()=>o(907258),r=()=>o(59226),i=()=>o(590526),a=()=>o(401497),s=()=>o(970236),l=()=>o(69708),c=o(474848);const d={define_variables_automation_action:{launchDateMs:17277408e5,expiryDateMs:1738368e6},passkey_setting:{launchDateMs:1729101727e3,expiryDateMs:1738432882e3},publish_site_settings_embed_page:{launchDateMs:1736208e6,expiryDateMs:1743984e6},generalized_recurrence_automations:{launchDateMs:17365536e5,expiryDateMs:17460576e5},ai_page_translation_topbar_more_action:{launchDateMs:1740451280830,expiryDateMs:17434656e5},verification:{launchDateMs:1740096e6,expiryDateMs:174375e7},notion_ai_workspace_settings:{launchDateMs:17424288e5,expiryDateMs:17550432e5},notion_mail_launch_modal:{launchDateMs:17446752e5,expiryDateMs:17525376e5},notion_mail_launch_modal_2:{launchDateMs:17446752e5,expiryDateMs:17578944e5},ui_doc_example:{launchDateMs:19249056e5,expiryDateMs:19249056e5},collection_property_permissions:{launchDateMs:17433792e5,expiryDateMs:17671392e5},salesforce_sync_unfurling_option:{launchDateMs:17443296e5,expiryDateMs:17538336e5},personal_home_sidebar_item:{launchDateMs:17470944e5,expiryDateMs:175392e7},collection_property_reminder:{launchDateMs:1751958e6,expiryDateMs:17552628e5},get_notified_onboarding_tooltip:{launchDateMs:17520228e5,expiryDateMs:17591904e5},conditional_color_feature:{launchDateMs:17537472e5,expiryDateMs:17563392e5},web_clipper_new_tab_settings:{launchDateMs:17471808e5,expiryDateMs:18149184e5},my_meetings:{launchDateMs:17578944e5,expiryDateMs:17657568e5},workspace_connections_tab:{launchDateMs:17578944e5,expiryDateMs:18149184e5},external_agents_tab:{launchDateMs:17578944e5,expiryDateMs:18149184e5},permissions_tab:{launchDateMs:17578944e5,expiryDateMs:18149184e5}};function u({style:e}){const t=(0,a().IS)((()=>({badge:{letterSpacing:0,whiteSpace:"nowrap",width:"fit-content",...e}})),[e]);return(0,c.jsx)(s().E,{color:"blue",style:t.badge,content:(0,c.jsx)(l().sA,{id:"newBadgeComponent.label",defaultMessage:"New"})})}function p(e){return(0,i().K8)((()=>{const{launchDateMs:t,expiryDateMs:o}=d[e],{currentUserSettingsStore:r}=n().default.state;if(r&&r.isReady()){var i;const e=null===(i=r.getSettings())||void 0===i?void 0:i.signup_time;if(e&&e>t)return!1}return Date.now()<=o}),[e])}function m({style:e,newBadgeKey:t}){return p(t)?(0,c.jsx)(u,{style:e}):null}function g({style:e,newBadgeKey:t}){return(0,r().X)(t)?(0,c.jsx)(u,{style:e}):null}function h(e){return e.didUserEngage?null:"feature_gate"===e.keyType?(0,c.jsx)(g,{...e}):(0,c.jsx)(m,{...e})}},158115:(e,t,o)=>{o.r(t),o.d(t,{arrowChevronSingleRightFillSmallIcon:()=>r,iconDefinition:()=>n});o(296540);const n={viewBox:"0 0 16 16",fittedViewBox:"5.54 2.94 5.81 10.11",directional:!0,svg:(0,o(474848).jsx)("path",{d:"M11.13 8.53a.75.75 0 0 0 0-1.06L6.81 3.15a.75.75 0 0 0-1.06 1.06L9.54 8l-3.79 3.79a.75.75 0 0 0 1.06 1.06z"})},r=(0,o(340498).wt)("arrowChevronSingleRightFillSmall",n,"fillSmall")},191356:(e,t,o)=>{o.d(t,{C4:()=>S,Nf:()=>b,qM:()=>w});o(16280),o(944114),o(898992),o(430670),o(581454);var n=()=>o(726637),r=()=>o(675133),i=()=>o(792057),a=()=>o(732810),s=()=>o(617871),l=()=>o(388693),c=()=>o(519831),d=()=>o(161479),u=()=>o(534177),p=()=>o(753812),m=()=>o(457583),g=()=>o(384944),h=()=>o(594794),v=()=>o(620791),f=()=>o(661075);const y=(0,o(69708).YK)({authError:{defaultMessage:"Auth failed. Please try again or contact Notion support.",id:"database.viewSettings.propertyTypeSection.connected.authFail"},mobileAdminError:{defaultMessage:"Ask your workspace admin to configure the GitHub (Workspace) app in settings to use this feature.",id:"database.viewSettings.propertyTypeSection.connected.mobileAdminError"},mobileError:{defaultMessage:"Please authorize this integration on the desktop app or a browser.",id:"database.viewSettings.propertyTypeSection.connected.mobileError"}});async function S(e,t,o,a){const s=null==t?void 0:t.getSpaceStore();if(!s)return;const l=(0,v().jw)(o.id).length;if(n().A.isMobile&&a&&!l){const e=r().A.formatMessage(y.mobileAdminError);throw i().f1(e),new Error(e)}if(n().A.isMobile&&!a&&!l){const e=r().A.formatMessage(y.mobileError);throw i().f1(e),new Error(e)}if(!l&&a&&s.canAdmin()||!l&&!a)try{await m().Jq({environment:e,integration:o,spaceId:s.id,from:"collection_settings_property_type"})}catch(c){const e=r().A.formatMessage(y.authError);throw i().f1(e),new Error(e)}if(!(0,v().jw)(o.id).length){const e=r().A.formatMessage(y.authError);throw i().f1(e),new Error(e)}}function w(e){const{environment:t,pattern:o,integration:n,parentCollectionStore:r,transaction:i}=e;if(!o.connected_relation_properties)throw new Error("Cannot create a connected relation collection without properties");const s=new(a().m)(t,(0,h().zP)({environment:t,table:c().Vl,spaceId:r.pointer.spaceId})),l={};o.connected_relation_sub_schemas&&(0,u().WP)(o.connected_relation_sub_schemas).map((([e,o])=>{const n=new(a().m)(t,(0,h().zP)({environment:t,table:c().Vl,spaceId:r.pointer.spaceId})),u={bot_id:void 0,external_object_id:void 0,uri:e,integration_id:void 0,is_placeholder:void 0,original_url:void 0,domain:void 0,external_schema:o,sync_state:void 0,pattern_name:void 0},p={id:n.id,version:0,space_id:(0,d().e)(r.pointer.spaceId),parent_table:c().Vl,parent_id:s.id,alive:!0,format:u,schema:{}};l[e]=n.id,g().zv({store:n,data:p,transaction:i})}));const p={id:s.id,version:0,space_id:(0,d().e)(r.pointer.spaceId),parent_table:c().Vl,parent_id:r.id,alive:!0,format:{attributes:[{id:"title",name:"title",type:"inline",format:{type:"title",section:"title"},values:[(0,f().Fe)({pattern:o,integration:n})]}],bot_id:void 0,external_object_id:void 0,uri:`notion://user-defined-collection/${n.id}/${o.name}`,integration_id:n.id,is_placeholder:void 0,original_url:void 0,domain:void 0,external_schema:o.connected_relation_properties,sync_state:void 0,pattern_name:o.name,related_external_object_uris_to_instance_ids:l},schema:{}};return g().zv({store:s,data:p,transaction:i}),s}async function b(e){const{bot:t,connected_relation_properties:o}=e;if(t.integration_id===s().Iy||t.integration_id===s().mn)return await async function(e){var t,o,n;const{environment:r,objectName:i,spaceId:a,bot:s}=e,c=await p().callApi({eventName:"describeSalesforceObject",environment:r,data:{spaceId:a,objectName:i,botId:s.id}});if("success"!==(null==c?void 0:c.type))return{error:l().qh.FAILED_TO_FETCH_SALESFORCE_PROPERTIES};var d,u;if((null===(t=c.data)||void 0===t?void 0:t.responseStatus)===l().qh.REAUTHENTICATION_REQUIRED||(null===(o=c.data)||void 0===o?void 0:o.responseStatus)===l().qh.NO_USER_API_ACCESS)return{error:`${null===(d=c.data)||void 0===d?void 0:d.responseStatus}:${null===(u=c.data)||void 0===u?void 0:u.userType}`};const m=null==c||null===(n=c.data)||void 0===n?void 0:n.properties;if(m){return{value:m.flatMap((e=>{const t=e.custom?e.label:e.relationshipName||e.label;return"User"===e.referenceTo||"Group"===e.referenceTo?[{id:e.name,name:t,isSelected:!1,type:e.type,metadata:e,isAlreadySynced:e.isAlreadySynced,isAdminNotAccessible:e.isAdminNotAccessible},{id:`mapped_${e.name}`,name:`${t} (Notion User)`,isSelected:!1,type:"person",metadata:e,isAlreadySynced:e.isAlreadySynced,isAdminNotAccessible:e.isAdminNotAccessible}]:[{id:"Name"===e.name?"title":e.name,name:"relation"===e.type?t:e.label,isSelected:!1,type:e.type,metadata:e,isAlreadySynced:e.isAlreadySynced,isAdminNotAccessible:e.isAdminNotAccessible}]}))}}return{error:l().qh.NO_PROPERTIES_FOUND}}(e);const n=[],r=o;for(const i in r){const e=r[i];null!=e&&e.name&&null!=e&&e.type&&n.push({id:i,name:e.name,isSelected:!1,type:e.type,metadata:{name:e.name,label:e.name,type:e.type,custom:!1},isAlreadySynced:!1})}return{value:n}}},200424:(e,t,o)=>{e.exports=o.p+"9ade71d75a1c0e93.png"},240865:(e,t,o)=>{o.d(t,{V:()=>i});var n=()=>o(755531),r=()=>o(590526);function i(e){return(0,r().K8)((()=>{var t;return e?e.getMemberCountFromPublicSpaceData()??void 0:(null===(t=(0,n().S)())||void 0===t?void 0:t.getMemberCountFromPublicSpaceData())??void 0}),[e])}},245720:(e,t,o)=>{o.d(t,{W:()=>n});const n=(0,o(69708).YK)({done:{id:"modal.doneButton",defaultMessage:"Done"},cancel:{id:"modal.cancelButton",defaultMessage:"Cancel"},back:{id:"modal.backButton",defaultMessage:"Back"}})},253447:(e,t,o)=>{o.d(t,{F:()=>r});var n=()=>o(963575);function r(e,t){if(e)return e;switch(t){case"large":return n().A.card.desktop.large.height;case"small":return n().A.card.desktop.small.height;default:return n().A.card.desktop.medium.height}}},271232:(e,t,o)=>{o.d(t,{t:()=>i});var n=o(296540),r=o(474848);const i=n.memo((function(e){const{coverHeight:t,coverSizeFormat:n,emptyGalleryCoverStyle:i}=e,a=(0,o(401497).IS)((()=>({container:{height:(0,o(253447).F)(t,n),...i}})),[t,n,i]);return(0,r.jsx)("div",{style:a.container})}))},278589:(e,t,o)=>{o.d(t,{N:()=>i});var n=()=>o(534177),r=()=>o(17680);function i(e){return"avatar"===e?r().eQ:"xsmall"===e?18:"xsmall_plus"===e?24:"small"===e?28:"small_plus"===e?32:"medium"===e?36:"medium_plus"===e?44:"medium_large"===e?48:"large"===e?50:"large_plus"===e?64:"xlarge"===e?94:"plans"===e?20:"deep_dive"===e?16:"upsell_banner"===e?74:"personalization_modal"===e?96:(0,n().HB)(e)}},299177:(e,t,o)=>{o.d(t,{A:()=>i});class n extends(()=>o(757695))().Store{getInitialState(){return{}}}const r=new n;o(852832).exposeDebugValue("SpaceWorkflowTemplateInstanceMapStore",r);const i=r},313171:(e,t,o)=>{o.d(t,{L:()=>a});o(296540);var n=()=>o(970236),r=()=>o(69708),i=o(474848);function a(){return(0,i.jsx)(n().E,{content:(0,i.jsx)(r().sA,{id:"spaceUserMembershipType.restrictedMember",defaultMessage:"Restricted"}),color:"yellow"})}},320865:(e,t,o)=>{o.d(t,{A:()=>r});o(296540);var n=o(474848);const r=function(){return(0,n.jsx)(o(424400).Ay,{title:(0,n.jsx)(o(98126).k,{size:"default"}),titleStyle:{display:"flex",justifyContent:"center",alignItems:"center",width:"100%"}})}},344417:(e,t,o)=>{o.r(t),o.d(t,{iconDefinition:()=>n,magnifyingGlassSmallIcon:()=>r});o(296540);const n={viewBox:"0 0 16 16",fittedViewBox:"1.97 1.97 12.46 12.46",svg:(0,o(474848).jsx)("path",{d:"M7.1 1.975a5.125 5.125 0 1 0 3.155 9.164l3.107 3.107a.625.625 0 1 0 .884-.884l-3.107-3.107A5.125 5.125 0 0 0 7.1 1.975M3.225 7.1a3.875 3.875 0 1 1 7.75 0 3.875 3.875 0 0 1-7.75 0"})},r=(0,o(340498).wt)("magnifyingGlassSmall",n,"small")},358006:(e,t,o)=>{o.d(t,{z:()=>a});o(296540);var n=()=>o(79926),r=o(474848);const i=new(n().O2)("CollectionItemCover",(async()=>{const{CollectionItemCover:e}=await o.e(79883).then(o.bind(o,873718));return{CollectionItemCover:e}})),a=(0,n()._h)(i,(e=>e.CollectionItemCover),{renderLoading:(e,t)=>{const{coverHeight:n,coverSizeFormat:i,emptyGalleryCoverStyle:a,showEmptyGalleryCover:s}=t;return s?(0,r.jsx)(o(271232).t,{coverHeight:n,coverSizeFormat:i,emptyGalleryCoverStyle:a}):null}})},360576:(e,t,o)=>{o.r(t),o.d(t,{iconDefinition:()=>n,personFillSmallIcon:()=>r});o(296540);const n={viewBox:"0 0 16 16",fittedViewBox:"2.89 1.85 10.22 12.3",svg:(0,o(474848).jsx)("path",{d:"M8 1.85c-.925 0-1.673.382-2.179 1.012-.495.617-.73 1.435-.73 2.29 0 .856.235 1.674.73 2.291.506.63 1.255 1.012 2.18 1.012.924 0 1.672-.382 2.178-1.012.495-.617.73-1.435.73-2.29 0-.856-.235-1.674-.73-2.291C9.673 2.232 8.925 1.85 8 1.85m0 7.403c-2.175 0-4.115 1.06-4.94 2.672-.3.585-.165 1.179.19 1.594.34.396.873.63 1.43.63h6.64c.557 0 1.09-.234 1.43-.63.355-.415.49-1.01.19-1.594-.825-1.612-2.765-2.672-4.94-2.672"})},r=(0,o(340498).wt)("personFillSmall",n,"fillSmall")},377093:(e,t,o)=>{o.d(t,{XO:()=>W,h3:()=>O,nZ:()=>z,pG:()=>K});o(944114),o(898992),o(823215),o(354520),o(803949),o(581454);var n=()=>o(314529),r=()=>o(564884),i=()=>o(907258),a=()=>o(365917),s=()=>o(675133),l=()=>o(295633),c=()=>o(732810),d=()=>o(433337),u=()=>o(716016),p=()=>o(898244),m=()=>o(617871),g=()=>o(165358),h=()=>o(388693),v=()=>o(792071),f=()=>o(179034),y=()=>o(332393),S=()=>o(96689),w=()=>o(854150),b=()=>o(496603),x=()=>o(534177),I=()=>o(935664),C=()=>o(753812),_=()=>o(896628),M=()=>o(799427),A=()=>o(567700),k=()=>o(928213),j=()=>o(339798),P=()=>o(254497),D=()=>o(312296),T=()=>o(999140),E=()=>o(191356),U=()=>o(601734),R=()=>o(395963),V=()=>o(838038),F=()=>o(244828),N=()=>o(155269);const B=(0,o(69708).YK)({aiCustomPromptDefaultPropertyName:{id:"collectionSettingsCreatePropertyActions.createProperty",defaultMessage:"Text"}});function L(e){const{environment:t,collectionContextStore:o,collectionUri:r,feature:i,transaction:a,addFeatureFrom:s,createFeatureStartTime:l}=e;if("dependencies"in i)for(const n of i.dependencies)"property"===n.type&&n.collectionUri===r&&(0,I().Z)({environment:t,collectionContextStore:o,from:"view_settings",property:n.uri,property_type:n.propertySchema.type,is_suggested_property:!0,property_id:n.uri,feature:{id:n.uri,from:s,type:i.uri}});if("dependencies"in i&&i.dependencies.map((e=>e.type)).every((e=>"property"===e))){const e=o.collectionViewStore(),t=o.getPropertyFormatKey(),n=o.normalizedFormatStore.state;if(t&&e){const o=n[t]||[],r=[...o];i.dependencies.forEach((e=>{const t=o.findIndex((t=>t.property===e.uri));-1===t?r.push({visible:!0,property:e.uri}):r[t]={...o[t],visible:!0}})),_().zA({stores:[e],update:{[t]:r},transaction:a})}}if(void 0!==i.propertyIdCollectionSettingToNavigateTo){const e={type:"property",property:i.propertyIdCollectionSettingToNavigateTo,selectNameInitial:!1,formatKey:o.getPropertyFormatKey()};j().a2({collectionSettingsStore:o.settingsStore,item:e})}a.postSubmitCallbacks.push((e=>{(0,n().DO_NOT_USE_trackLegacy)(t,"collection_create_suggested_property_latency",{collection_uri:i.collectionUri,feature_uri:i.uri,time:Date.now()-l,status:Boolean(e)?"fail":"success"})}))}async function O(e){var t;const{appTemplatesSetupActions:o,appTemplatesSprintBoardActions:n,appConfigs:r}=await U().Aw.load(),{environment:s,collectionContextStore:c,feature:p,addFeatureFrom:v,customPropertyName:b}=e,{sidebarSpaceViewStore:x}=i().default.state,I=c.collectionStore(),j=null==I?void 0:I.getParentBlockStore(),P={},D=e=>{(0,g().log)({level:"error",from:"collectionSettingsCreatePropertyActions",type:"handleCreateNewSuggestedProperty",data:{collectionId:null==I?void 0:I.id,miscDataToConvertToString:{featureUri:p.uri,addFeatureFrom:v,...P,...e}}})};if(!I||!j)return void D({hasCollectionStore:Boolean(I),hasCollectionViewBlockStore:Boolean(j)});if((0,A().u)(p))return async function(e){const{environment:t,collectionContextStore:o,feature:n,addFeatureFrom:r}=e,{untypedFeaturesSetupActions:i}=await U().Aw.load(),a=o.collectionStore(),s=null==a?void 0:a.getParentBlockStore();if(!a||!s)return;const l=Date.now();F().createAndCommit({environment:t,userAction:"collectionSettingsCreatePropertyActions.handleCreateNewUntypedFeature",canUndo:!0,perform:e=>{i.applyUntypedFeature({environment:t,collectionStore:a,collectionViewBlockStore:s,feature:n,transaction:e}),L({environment:t,collectionContextStore:o,collectionUri:d().iH,feature:n,transaction:e,addFeatureFrom:r,createFeatureStartTime:l})}})}({environment:s,collectionContextStore:c,feature:p,addFeatureFrom:v});const T=c.collectionViewStore(),R=null==j?void 0:j.getParentStore(),V=null==I||null===(t=I.getFormat())||void 0===t?void 0:t.app_config_uri,N=V&&(0,M().l)(r(),V);if(P.appConfigUri=N&&N.uri,!R||R.table!==S().NX&&R.table!==f().ev&&R.table!==w().yK||!N)return void D({hasAppParentStore:Boolean(R),appParentStoreTable:null==R?void 0:R.table,appConfigUri:N?N.uri:void 0});const B=I.getSchema(),O=j.getFormat().app_id;P.appId=O;const K=O?await C().callApi({eventName:"getCollectionViewBlocksByAppId",environment:s,data:{spaceId:j.getSpaceId(),appId:O}}):void 0,z="success"===(null==K?void 0:K.type)&&K.data.result.length?K.data.result.map((e=>l().B.createChildStore(R,{table:f().ev,id:e.blockId,spaceId:j.getSpaceId()}))):[j],W=p.integrationId;if(W){const e=a().A.getIntegrationsAsRecordMap().getValue({table:y().Li,id:W});if(!e||!(0,h().v_)(e))return void D({hasIntegration:Boolean(e)});await E().C4(s,I,e,Boolean(p.canOnlyAdminAuth))}W===m().ob&&B&&0===(0,u().yP)(B).length&&await k().c({environment:s,collectionStore:I});const H=Date.now();F().createAndCommit({environment:s,userAction:"collectionSettingsCreatePropertyActions.handleCreateNewSuggestedProperty",canUndo:!0,perform:e=>{var t;if(!x)return void D({hasCurrentSpaceViewStore:!1});const r=null===(t=I.getFormat())||void 0===t?void 0:t.app_config_uri;if(!r)return void D({hasCollectionUri:!1});const i=o.applyTypedFeatures({environment:s,spaceViewStore:x,appParentStore:R,appUri:N.uri,features:[{type:"simple",featureUri:p.uri}],transaction:e,createOrModify:"modify",appCollectionViewBlockStores:z,customPropertyName:b});n.createSprintPage({environment:s,spaceViewStore:x,appParentStore:R,transaction:e,blockStores:i,creationEntryPoint:{type:"sprint_relation"}}),"notion://tasks/sub_task_feature"===p.uri&&_().zA({stores:[I],update:{subitem_property:d().yx.SubTaskRelation},transaction:e}),"notion://tasks/task_dependencies_feature"===p.uri&&(_().zA({stores:[I],update:{collection_default_arrows_by:d().yx.BlockingRelation},transaction:e}),T&&_().zA({stores:[T],update:{timeline_arrows_by:{property:d().yx.BlockingRelation}},transaction:e})),L({environment:s,collectionContextStore:c,collectionUri:r,feature:p,transaction:e,addFeatureFrom:v,createFeatureStartTime:H}),e.isEmpty()&&D({isEmptyTransaction:!0})}})}function K({propertyType:e,collectionContextStore:t,propertyId:o}){const n=t.normalizedSchemaStore.state[o];if(n)switch(e){case"ai_custom_prompt":case"ai_summary":case"ai_extract":case"ai_translate":return j().a2({collectionSettingsStore:t.settingsStore,item:{type:"propertyAiAutofill",propertySchema:n,property:o}});case"ai_keywords":return j().a2({collectionSettingsStore:t.settingsStore,item:{type:"property",property:o,formatKey:t.getPropertyFormatKey()}});default:(0,x().HB)(e)}}function z(e){const{environment:t,collectionContextStore:n,propertyType:r,isSuggestedProperty:i,propertyName:a,propertyIcon:l,selectOptions:c,from:d,shouldOpenEditMenu:u=!0,newPropertyFormat:m}=e,g=n.collectionStore(),h=n.collectionViewStore(),v=n.getPropertyFormatKey(),f=n.normalizedFormatStore.state;if(!g)return;if("relation"===r)return void j().a2({collectionSettingsStore:n.settingsStore,item:{type:"selectRelationSource",property:void 0,initialPropertyName:a,formatKey:v,newPropertyFormat:m}});let y=a;"ai_custom_prompt"===r&&(y=s().A.formatMessage(B.aiCustomPromptDefaultPropertyName));const S=m&&v?{...f,[v]:m}:f,{performResult:w}=F().createAndCommit({userAction:"collectionSettingsCreatePropertyActions.handleCreateNewStandardProperty",environment:t,canUndo:!0,perform:e=>(0,N().createProperty)({environment:t,collectionStore:g,collectionViewArgs:h&&v?{collectionViewStore:h,format:S,formatKey:v}:void 0,propertyName:y,propertyIcon:l,propertyType:r,selectOptions:c,transaction:e})});u&&((0,p().hN)(r)?K({propertyType:r,propertyId:w,collectionContextStore:n}):j().n1({collectionSettingsStore:n.settingsStore,property:w,formatKey:v,selectNameInitial:!0}));const b="view_settings"===d?{feature:{id:w,from:"new_property",type:r}}:{};(0,I().Z)({environment:t,collectionContextStore:n,from:d,property_type:(0,p().v2)(r),property:(0,p().hN)(r)?r:void 0,is_suggested_property:i,property_id:w,...b}),i||n.userAddedPropertyStore.update((()=>!0)),w&&!(0,p().hN)(r)&&o.e(52315).then(o.bind(o,830213)).then((e=>{e.maybeTriggerDatabaseViewNudgeOnCreateProperty({environment:t,collectionContextStore:n,propertyId:w,propertyType:(0,p().v2)(r)})}))}async function W(e){const{environment:t,collectionContextStore:o,intl:n,connectedRelationProperty:i,from:a,untypedFeatureArgs:s,propertyGroupId:l,propertyLimit:c,skipDatabaseActions:d,propertyName:h}=e,f=o.collectionStore(),y=o.collectionViewStore(),S=o.getPropertyFormatKey();if(!f||!S)return;const w=i.integration.id;(0,m().XO)(w)||await E().C4(t,f,i.integration,Boolean(i.canOnlyAdminAuth));const C=f.getSchema();let _;w===m().ob&&C&&0===(0,u().yP)(C).length&&(_=await k().c({environment:t,collectionStore:f}));const M=f.getDeletedSchema(),A=(0,x().WP)(M).map((([e,t])=>{if(t&&p().UU(t)&&t.connectedRelation.integration_id===m().ob)return{propertyId:e,propertySchema:t}})).filter(x().O9);let T;if(!b().Im(A)){const e=A[0];T={propertyId:e.propertyId,update:await H({collectionStore:f,property:e})}}F().createAndCommit({environment:t,userAction:"collectionSettingsCreatePropertyActions.handleCreateNewConnectedRelationProperty",canUndo:!0,perform:e=>{const{shouldCreateNewProperty:u,restoredPropertyId:p}=function(e){const{environment:t,generatedPrefix:o,integrationId:n,propertyGroupId:r,collectionStore:i,collectionContextStore:a,collectionViewStore:s,formatKey:l,transaction:c,maybeRestoreDeletedProperty:d}=e;o&&(0,N().createProperty)({environment:t,collectionStore:i,collectionViewArgs:s?{collectionViewStore:s,format:s.getFormat(),formatKey:l}:void 0,propertyType:"auto_increment_id",transaction:c,propertyGroupId:r});if(null!=d&&d.propertyId){if(d.update){r&&(0,R().En)({collectionStore:i,groupId:r,propertyId:d.propertyId,transaction:c}),(0,D().F)({environment:t,collectionStore:i,update:d.update.updateSchema,transaction:c}),(0,P().E)({collectionStore:i,update:d.update.updateDeletedSchema,transaction:c});const e={type:"property",property:d.propertyId,formatKey:l};return j().a2({collectionSettingsStore:a.settingsStore,item:e}),{shouldCreateNewProperty:!1,restoredPropertyId:d.propertyId}}return(0,g().log)({level:"error",from:"collectionSettingsCreatePropertyActions",type:"handleCreateNewConnectedRelationProperty",data:{message:"Invalid property found in deleted_schema",collectionId:null==i?void 0:i.id,miscDataToConvertToString:{integration:n,maybeRestoreDeletedProperty:d}}}),(0,P().E)({collectionStore:i,update:{[d.propertyId]:null},transaction:c}),{shouldCreateNewProperty:!0}}return{shouldCreateNewProperty:!0}}({environment:t,generatedPrefix:_,transaction:e,propertyGroupId:l,collectionStore:f,collectionViewStore:y,collectionContextStore:o,integrationId:w,formatKey:S,maybeRestoreDeletedProperty:T});if(!u&&p)return p;const m=function(e){const{environment:t,transaction:o,collectionStore:n,collectionViewStore:r,collectionContextStore:i,intl:a,connectedRelationProperty:s,untypedFeatureArgs:l,propertyLimit:c,propertyName:d,formatKey:u}=e,p=s.integration.id,m=v().Bj6.fromIntegration(s.integration),g=E().qM({environment:t,pattern:s.pattern,integration:m,parentCollectionStore:n,transaction:o}),h=(0,N().createProperty)({environment:t,collectionStore:n,collectionViewArgs:r&&u?{collectionViewStore:r,format:r.getFormat(),formatKey:u}:void 0,propertyType:"relation",transaction:o,propertyId:null==l?void 0:l.propertyId});return V().cT({environment:t,collectionContextStore:i,collectionStore:n,property:h,propertyName:d&&d.length>0?d:s.name,propertyIcon:s.integration.info.icon,propertyLimit:c??"no_limit",targetCollectionStore:g,hasInverseRelation:!0,autoRelate:void 0,intl:a,connectedRelation:{integration_id:p},transaction:o}),h}({environment:t,transaction:e,collectionStore:f,collectionViewStore:y,collectionContextStore:o,intl:n,connectedRelationProperty:i,untypedFeatureArgs:s,propertyLimit:c,propertyName:h,formatKey:S});if((0,I().Z)({environment:t,collectionContextStore:o,from:"view_settings",property_id:m,property_type:"relation",integration_id:w,feature:{id:m,from:a,type:`notion://feature/connection_${w}`}}),!s)if(d){const e=f.getSchema(),n=null==e?void 0:e[m];j().a2({collectionSettingsStore:o.settingsStore,item:{type:"connectedRelationDatabaseActions",source:"connectedRelationAddProperties",rootPropertyId:m,integrationId:w,rootPropertySchema:n,skipDatabaseActions:!0,eventSource:"first_time_setup"}}),(0,r().u)({environment:t,event:{eventName:"salesforce_actions",eventProperties:{actionType:"add_properties_clicked",details:{source:"first_time_setup"},integrationId:w,collectionId:null==f?void 0:f.id}}})}else{const e={type:"property",property:m,formatKey:S};j().a2({collectionSettingsStore:o.settingsStore,item:e})}return m}})}async function H(e){const{property:{propertyId:t,propertySchema:o},collectionStore:n}=e,r=(0,p().Nv)(o);if((null==r?void 0:r.spaceId)!==n.getSpaceId())return;const i=c().m.createChildStore(n,r);if(await i.load(),null==i||!i.isDefined())return;if(i.getParentId()!==n.id)return;return(0,T().KA)({deletedSchema:n.getDeletedSchema(),property:t})}},436525:(e,t,o)=>{o.d(t,{D:()=>u});var n=o(296540),r=()=>o(59226),i=()=>o(484714),a=()=>o(79926),s=()=>o(562984),l=()=>o(742734),c=()=>o(141465),d=o(474848);function u({userStore:e,suppressMouse:t,children:o,spaceStore:u}){const p=(0,n.useRef)(null),m=(0,l().E)({spaceStore:u,viewedUserId:null==e?void 0:e.id}),g=(0,r().X)("prefetch_extended_user_profiles"),h=m&&g,v=(0,a().fJ)(s().u.extendedUserProfileActions,{disabled:!h}),f=(0,i().v3)();(0,n.useEffect)((()=>{h&&"resolved"===v.status&&null!=e&&e.id&&u&&null!=u&&u.userId&&v.value.prefetchExtendedUserProfiles({spaceStore:u,actorUserId:u.userId,viewedUserIds:[e.id]},f)}),[h,null==e?void 0:e.id,u,m,f,v]);const y=(0,n.useCallback)((()=>{p.current&&e&&u&&!t&&c().A.setState({type:"user",store:e,domRect:p.current.getBoundingClientRect(),spaceStore:u})}),[e,u,t]),S=(0,n.useCallback)((()=>{c().A.setState(void 0)}),[]);return e&&m?(0,d.jsx)("div",{ref:p,onMouseEnter:m?y:void 0,onMouseLeave:m?S:void 0,children:o}):o}},453697:(e,t,o)=>{o.d(t,{A:()=>p,n:()=>u});var n=o(296540),r=()=>o(590526),i=()=>o(401497),a=()=>o(849255),s=()=>o(807449),l=()=>o(798880),c=()=>o(100622),d=o(474848);function u(e){return(0,i().IS)((()=>({tooltipTextStyle:{color:c().Tj.text.inverseSecondary},tooltipAvatarContainer:{display:"flex",alignItems:"center",marginInlineEnd:8},tooltipContainer:{display:"flex",flexDirection:"row",padding:"4px 6px",alignItems:"center",...e},tooltipUserInfoContainer:{overflow:"hidden",textOverflow:"ellipsis"}})),[e])}const p=function(e){const{hasTooltip:t,showAvatarInTooltip:p,tooltipHeader:m,style:g,iconStyle:h,isOffline:v,borderStyle:f,avatarShouldShowShadow:y,initialOverrideStyle:S,tooltipOverrideStyle:w,userValue:b,userStore:x,avatar:I,type:C="avatar",delayThreshold:_,hasPersonHoverCard:M,avatarOutlineOffset:A}=e,k=(0,o(69708).tz)(),j=(0,r().O$)(o(907258).AppStoreSidebarSpaceStore),P=(0,o(792485).S)(),D=(0,r().K8)((()=>(0,o(876338).$)(P)??j),[P,j]),T=e.size??18,{initialStyle:E,avatarWrapStyle:U,avatarStyle:R,proxiedImageStyle:V,suspendedUserStyle:F}=(0,i().IS)((()=>({initialStyle:{boxSizing:"content-box",borderRadius:"100%",lineHeight:`${T}px`,width:T,height:T,overflow:"hidden",textAlign:"center",fontSize:Math.max(.4375*T,11),background:c().Tj.popoverBackground,userSelect:"none",WebkitUserSelect:"none",color:c().Tj.icon.secondary,opacity:v?.3:1,isolation:"auto",...h,...S},avatarWrapStyle:{background:c().Tj.background.primary,borderRadius:"100%",boxShadow:y?c().Tj.avatarBoxShadow:"none",outlineWidth:1,outlineStyle:f??"solid",outlineColor:c().Tj.border.secondaryTranslucent,outlineOffset:A??-1,...h},avatarStyle:{borderRadius:"100%",width:T,height:T,display:"flex",alignItems:"center",justifyContent:"center",userSelect:"none",WebkitUserSelect:"none",opacity:v?.3:1,...h},proxiedImageStyle:{width:T,height:T,...h},suspendedUserStyle:{boxSizing:"content-box",borderRadius:"100%",width:T-2,height:T-2,overflow:"hidden",background:c().Tj.suspendedUIUserAvatarBackground,userSelect:"none",WebkitUserSelect:"none",color:c().Tj.text.primary,opacity:v?.3:1,display:"flex",justifyContent:"center",alignItems:"center",...h}})),[S,y,f,v,T,h,A]),{tooltipTextStyle:N,tooltipAvatarContainer:B,tooltipContainer:L,tooltipUserInfoContainer:O}=u(w),K=(0,n.useMemo)((()=>x??(b?o(792071).Bj6.fromValue(l().oo,b):void 0)),[x,b]),z=(0,n.useMemo)((()=>K instanceof a().L?K:D&&K?a().L.createChildStore(D,{id:K.id,table:l().oo}):void 0),[K,D]),W=(0,r().K8)((()=>null==K?void 0:K.getFullName(k)),[K,k]),H=(0,r().K8)((()=>null==K?void 0:K.getDisplayName(k)),[K,k]),$=(0,r().K8)((()=>null==K?void 0:K.getEmail()),[K]),q=(0,r().K8)((()=>null==K?void 0:K.getProfilePhoto()),[K]),G=(0,r().K8)((()=>null==K?void 0:K.getIsSuspended()),[K]),X=(0,o(742734).E)({spaceStore:D,viewedUserId:null==K?void 0:K.id})&&M,Y=()=>e.defaultAvatar??(0,d.jsx)(s().I,{icon:o(360576).personFillSmallIcon,size:"sm",colorVariant:"primary"}),Z=(e,t,n)=>{if(!e)return Y();const r={width:"100%",height:"100%",borderRadius:"100%",...n};return(0,d.jsx)(o(738471).A,{alt:t,src:e,enableLoadingShimmer:!0,style:r,placeholderStyle:r})},Q=e=>(0,d.jsxs)("div",{style:L,children:[(0,d.jsx)("div",{style:B,children:te()}),(0,d.jsxs)("div",{style:O,children:[K?H:null==I?void 0:I.name,e?void 0:(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)("br",{}),K?(0,d.jsx)("span",{style:N,children:$}):null!=I&&I.email?(0,d.jsx)("span",{style:N,children:null==I?void 0:I.email}):null]})]})]}),J=()=>p?Q():(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)("div",{children:m}),H,(0,d.jsx)("br",{}),K?(0,d.jsx)("span",{style:N,children:$}):void 0]}),ee=e=>{const t=o(634201).PE(e)[0].toUpperCase();return(0,d.jsx)("div",{style:U,children:(0,d.jsx)("div",{style:E,children:(0,d.jsx)("div",{children:t})})})},te=()=>{if(K){if(G)return(0,d.jsx)("div",{style:U,children:(0,d.jsx)("div",{style:F,children:(0,d.jsx)(s().I,{icon:o(947086).personSlashIcon,size:T-2,colorVariant:"tertiary"})})});if(q)return(0,d.jsx)("div",{style:R,children:(0,d.jsx)(o(360083).A,{stripGoogleIconQuery:!0,url:q,isAuthenticated:!1,width:Math.max(Number(V.width),120),render:(e,t)=>Z(t,W,U)})});if(W)return ee(W);if($)return ee($)}else if(I){if(!I.type&&I.avatarUrl)return(0,d.jsx)("div",{style:U,children:(0,d.jsx)("div",{style:R,children:Z(I.avatarUrl,I.name)})});if(I.name)return ee(I.name);if(I.email)return ee(I.email)}return Y()};switch(C){case"avatar":{const e=(0,d.jsx)("div",{style:g,children:te()});return X&&z&&D?(0,d.jsx)(o(436525).D,{userStore:z,spaceStore:D,children:e}):t?(0,d.jsx)(o(26697).m,{renderTooltip:J,placement:"bottom",alignment:"start",delayThreshold:_,render:t=>(0,d.jsx)("div",{style:g,"aria-label":H,...t,children:e})}):e}case"avatar-name":case"avatar-name-email":return Q("avatar-name"===C);default:(0,o(534177).HB)(C)}}},466721:(e,t,o)=>{o.r(t),o.d(t,{STORE_MAX_LIMIT:()=>b,initializePageVisit:()=>x,updatePageVisits:()=>I});o(898992),o(354520),o(581454);var n=()=>o(907258),r=()=>o(770063),i=()=>o(273648),a=()=>o(90023),s=()=>o(179034),l=()=>o(874852),c=()=>o(559653),d=()=>o(161479),u=()=>o(743246),p=()=>o(496603),m=()=>o(534177),g=()=>o(211716),h=()=>o(299545),v=()=>o(761309),f=()=>o(41161),y=()=>o(129286),S=()=>o(753812);const w=32,b=100;async function x(e,t){await n().default.waitUntilRendered();const{fromPageRefresh:o,blockStore:i,pageVisitStore:p,timestamp:m,type:w}=t,b=e.currentUser.id;if(void 0===b||o)return;t.blockStore.id!==p.state.pageId&&p.setState({...p.getInitialState(),pageId:t.blockStore.id});const x=(0,r().v3)(i,{table:c().F9,id:(0,c().$5)({parent_id:i.id,user_id:b}),spaceId:(0,d().e)(i.pointer.spaceId)}),I=(0,r().v3)(i,{table:l().ou,id:(0,c().$5)({parent_id:i.id,user_id:b}),spaceId:(0,d().e)(i.pointer.spaceId)});if(await y().transactionQueue.awaitRecordTransaction({table:s().ev,id:i.id}),await(0,h().hS)(i),!i.canRead()||(0,v().qb)(e,i,i.getSpaceStore()))return;await x.load(),await I.load();const _=x.getKeyStore("visited_at").getValue(),M=I.getKeyStore("exited_at").getValue(),A=await async function(e,t,o,n,r){const{id:i}=e.currentUser,s=t.id,l=t.getSystemBlockTypeStore().getValue();if((0,a().kR)(l))return{type:"skipped"};const c=t.getParentTable()===u().C0;if(c)return{type:"skipped"};if(i&&"passive"!==r){var d;null==e||null===(d=e.mobileNative)||void 0===d||d.recordPageVisit(i,{blockId:s,spaceId:o,visitedAt:n}),f().A.recordVisit({id:s,systemBlockType:l,type:g().ig.Default,currentUserId:i})}const p=await S().callApi({eventName:"recordPageVisit",environment:e,data:{block:{id:s,spaceId:o},timestamp:n,type:r},headers:{recordId:s,spaceId:o}});return p}(e,i,(0,d().e)(i.pointer.spaceId),m,w);if("skipped"===A.type)return;if("failed"===A.type)return;const k=C({pageVisits:A.data.pageVisits,currentState:p.state,blockStore:i,totalCount:p.state.totalCount,hasMore:void 0});p.state.pageId===i.id&&p.setState({...k,lastViewTime:_,lastExitTime:M})}async function I(e,t){await n().default.waitUntilRendered();const o=e.currentUser.id;if(void 0===o)return;const{blockStore:r,pageVisitStore:i,incremental:a}=t,s=t.limit||w;let l;if(a){const{pageId:e,lastViewTime:t,lastExitTime:n,totalCount:r,hasMore:a,...s}=i.state,c=Object.entries(s).map((([e,t])=>{if(o===e)return;const n=t.getVisitedAt();return void 0!==n?n+1:void 0}));l=p().T9(c.filter(m().O9))}const c=await S().callApi({eventName:"getPageVisitors",environment:e,data:{block:{id:r.id,spaceId:(0,d().e)(r.pointer.spaceId)},sinceTimestamp:l,limit:s,includeTotalCount:t.includeTotalCount},headers:{recordId:r.id,spaceId:(0,d().e)(r.pointer.spaceId)}});if("failed"===c.type)return;const u=C({pageVisits:c.data.pageVisits,blockStore:r,currentState:i.state,totalCount:c.data.totalCount,hasMore:c.data.hasMore});let g;if(Object.keys(u).length<=b)g=u;else{const{pageId:e,lastViewTime:t,lastExitTime:o,totalCount:n,hasMore:r,...i}=u,a=(0,m().WP)(i).map((([e,t])=>[e,t.getVisitedAt()??0]));g={pageId:e,lastViewTime:void 0,lastExitTime:void 0,totalCount:n,hasMore:r};const s=p().Ul(a,(([,e])=>-e)).slice(0,b);for(const[l]of s)g[l]=u[l]}i.state.pageId===u.pageId&&i.setState(g)}function C(e){const{blockStore:t,pageVisits:o,currentState:n,totalCount:r,hasMore:a}=e,s={...n,pageId:t.id,totalCount:r,hasMore:a};for(const l of o){const{id:e,user_id:o}=l;o in s||(s[o]=i()._.createChildStore(t,{table:c().F9,id:e,spaceId:(0,d().e)(t.pointer.spaceId)}))}return s}},476488:(e,t,o)=>{o.d(t,{J:()=>d,L:()=>u});o(898992),o(430670);var n=()=>o(902006),r=()=>o(716500),i=()=>o(383070),a=()=>o(450528);const s={type:"helpdocs",displayName:"Help Center",icon:o(682759).s,isEligible:e=>i().zD.canShowHelpdocsScope(),isLoading:()=>!1,isAvailable(e){return this.isEligible(e)},needsAuth:()=>!1,isInProgress:()=>!1,isDisconnecting:()=>!1,isConnected:e=>!0,createSearchScope:()=>({type:"helpdocs"}),isEnabled:e=>(0,a().H5)(e,"helpdocs"),setEnabled(e,t,o){return(0,a().dV)(e,"helpdocs",t,(()=>this.createSearchScope()))},connect(){}};const l={type:"notion",displayName:"Notion",icon:o(374693)._,isEligible:e=>!0,isLoading:()=>!1,isAvailable:e=>!0,needsAuth:()=>!1,isInProgress:()=>!1,isDisconnecting:()=>!1,isConnected:e=>!0,createSearchScope:()=>({type:"notion"}),isEnabled(e){return(0,a().H5)(e,this.type)},setEnabled(e,t){return(0,a().dV)(e,this.type,t,(()=>this.createSearchScope()))},connect(){}};const c={notion:l,web:{type:"web",displayName:"Web search",icon:o(822423).u,isEligible:e=>e.originSurface?i().zD.isWebSearchEnabledForSource(e.originSurface):i().zD.isResearchModeWebSearchEnabled(),isLoading:()=>!1,isAvailable(e){return this.isEligible(e)},needsAuth:()=>!1,isInProgress:()=>!1,isDisconnecting:()=>!1,isConnected(e){return this.isAvailable(e)},createSearchScope:()=>({type:"web"}),isEnabled:e=>"workflow"===e.type?(0,o(724639).H0)({config:e,modules:[]}):e.useWebSearch??!1,setEnabled(e,t,o){return this.isAvailable(o??{})?{...e,useWebSearch:t}:e},connect(){}},...{github:(0,r().K)("github").toSearchScopeModule(),slack:(0,r().K)("slack").toSearchScopeModule(),"google-drive":(0,r().K)("google-drive").toSearchScopeModule(),outlook:(0,r().K)("outlook").toSearchScopeModule(),"microsoft-teams":(0,r().K)("microsoft-teams").toSearchScopeModule(),"notion-mail":(0,r().K)("notion-mail").toSearchScopeModule(),sharepoint:(0,r().K)("sharepoint").toSearchScopeModule(),"google-calendar":(0,r().K)("google-calendar").toSearchScopeModule(),"notion-calendar":(0,r().K)("notion-calendar").toSearchScopeModule(),salesforce:(0,r().K)("salesforce").toSearchScopeModule(),box:(0,r().K)("box").toSearchScopeModule(),jira:(0,r().K)("jira").toSearchScopeModule(),gmail:(0,r().K)("gmail").toSearchScopeModule(),linear:(0,r().K)("linear").toSearchScopeModule(),discord:(0,r().K)("discord").toSearchScopeModule(),asana:(0,r().K)("asana").toSearchScopeModule(),custom:(0,r().K)("custom").toSearchScopeModule()},helpdocs:s};function d(e){return Object.values(c).flatMap((t=>{if((0,n().SC)(t.type)){const o=(0,r().K)(t.type);return o.isEligible(e)?o.getSearchScopeModules():[]}return t.isEligible(e)?[t]:[]}))}function u(e){return c[e]}},495576:(e,t,o)=>{o.d(t,{d:()=>A});var n=o(296540),r=()=>o(968578),i=()=>o(484714),a=()=>o(590526),s=()=>o(69708),l=()=>o(896628),c=()=>o(401497),d=()=>o(534177),u=()=>o(738471),p=o(474848);function m({src:e,placeholderSrc:t,placeholderBehavior:o,imageStyle:r,containerStyle:i,onLoadComplete:a,testId:s}){const[l,m]=(0,n.useState)(!0);let g;switch(o){case"force-show-placeholder":g=!0;break;case"force-show-src":g=!1;break;case"show-placeholder-if-loading-src":g=!!t&&(l||void 0===e);break;default:(0,d().HB)(o)}const h=(0,c().IS)((()=>{const e={gridColumn:1,gridRow:1};return{container:{display:"grid",...i},srcWrapper:{...g&&{display:"none"},...e},placeholderWrapper:{pointerEvents:"none",...e}}}),[i,g]);(0,n.useEffect)((()=>{void 0!==e&&m(!0)}),[e]);const v=(0,n.useCallback)((e=>{m(!1),null==a||a()}),[a]);return(0,p.jsxs)("div",{style:h.container,children:[(0,p.jsx)(u().A,{src:e,onLoad:v,style:r,placeholderStyle:h.srcWrapper,placeholderLoadedStyle:h.srcWrapper,testId:s}),t?(0,p.jsx)(u().A,{src:t,style:r,placeholderStyle:h.placeholderWrapper,placeholderLoadedStyle:h.placeholderWrapper}):void 0]})}var g=()=>o(19771),h=()=>o(360083),v=()=>o(801678),f=()=>o(984007),y=()=>o(504023),S=()=>o(821507),w=()=>o(568365),b=()=>o(77246),x=()=>o(244828),I=()=>o(79926);const C=new(I().O2)("AnimatedCoverImageActionBar",(async()=>Promise.all([o.e(75134),o.e(35530),o.e(36556),o.e(55373),o.e(36192),o.e(27992),o.e(63452),o.e(66249),o.e(87249),o.e(79022),o.e(34877),o.e(59218),o.e(40454)]).then(o.bind(o,166913)))),_=(0,I()._h)(C,(e=>e.AnimatedCoverImageActionBar)),M=280;function A(e){const{store:t,disabled:o,paddingRight:c,paddingLeft:d,height:u,proxyWidth:I}=e,C=(0,s().tz)(),A=(0,i().v3)(),j=(0,i().Y0)(),P=(0,a().uB)(void 0,r().A),D=(0,a().K8)((()=>o||"suggest"===b().Uv.getMode(t)||(0,S().aD)(j)),[o,t,j]),T=(0,a().K8)((()=>t.getCover()),[t]),E=(0,a().O$)(w().M),U=(0,y().x)(t.id),[R,V]=(0,n.useState)(void 0);if(!T)return null;const F=E.loadingMode!==f().pF&&E.loadingMode!==f().Wc;return(0,p.jsx)(v().A,{mouseStore:P,onFlushTemporaryPosition:e=>function(e,t,o){const{imagePosition:n,reset:r}=e;x().createAndCommit({userAction:"PageCover.handleFlushTemporaryPosition",environment:o,canUndo:!0,perform:e=>{l().yY({store:t,coverPosition:n,transaction:e}),r()}})}(e,t,A),renderControl:({handleRepositionClick:e,handleSavePositionClick:o,handleCancelClick:n,isVisible:r,isRepositioning:i})=>D?null:(0,p.jsx)(_,{store:t,mouseStore:P,imageUrl:R,handleRepositionClick:e,handleSavePositionClick:o,handleCancelClick:n,visible:r||U,isRepositioning:i,paddingLeft:d,paddingRight:c}),source:"page",store:t,style:{display:"flex",flexDirection:"column",alignItems:"center",height:u,maxHeight:M,cursor:"default"},preventClickPropagation:!0,render:e=>(0,p.jsxs)(n.Fragment,{children:[(0,p.jsx)(h().A,{url:T.cover,isAuthenticated:!0,permissionRecord:T.pointer,width:I,onFinishedLoadingProxyUrl:V,render:(t,o)=>{const n={width:"100%",height:u,maxHeight:M,objectFit:"cover",opacity:F?.5:1,objectPosition:`center ${100*(1-(e.imagePosition||0))}%`,borderRadius:0},r={width:"100%",height:u,maxHeight:M};return(0,p.jsx)(m,{src:o,placeholderSrc:F?E.dataURL:void 0,placeholderBehavior:F?"force-show-placeholder":"show-placeholder-if-loading-src",containerStyle:r,imageStyle:n,onLoadComplete:k,testId:"pageCover"})}},T.pointer.id),F?(0,p.jsx)(g().X,{variant:"spinner",percentage:E.uploadProgress,text:void 0!==E.uploadProgress?void 0:E.progressText}):U?(0,p.jsx)(g().X,{variant:"dots",text:C.formatMessage({id:"CoverImageActionBar.generatingCover",defaultMessage:"Generating..."})}):void 0]})})}function k(){w().M.reset()}},526278:(e,t,o)=>{o.r(t),o.d(t,{arrowStraightLeftIcon:()=>r,iconDefinition:()=>n});o(296540);const n={viewBox:"0 0 20 20",fittedViewBox:"2.37 3.97 15.26 12.06",directional:!0,svg:(0,o(474848).jsx)("path",{d:"M2.411 9.79a.6.6 0 0 1 .147-.232l5.4-5.4a.625.625 0 1 1 .884.884L4.509 9.375H17a.625.625 0 1 1 0 1.25H4.509l4.333 4.333a.625.625 0 1 1-.884.884l-5.4-5.4a.62.62 0 0 1-.147-.651"})},r=(0,o(340498).wt)("arrowStraightLeft",n,"default")},556122:(e,t,o)=>{o.d(t,{QJ:()=>m,TI:()=>c});o(944114),o(581454);var n=()=>o(726637),r=()=>o(763824);let i=0;const a="clipboard",s={debug:Boolean(n().A.isDevelopingInAirplaneMode),responseText:a,showErrorCode:!1,delayBetweenChunks:20,chunkSize:5,numLoremIpsums:3},l="Lorem ipsum dolor sit amet, consectetur adipiscing elit. Donec porta auctor sem vel efficitur. Vivamus efficitur eros sed erat efficitur efficitur. Vivamus et augue vel est efficitur efficitur.";function c(){return s}function d(e){return{async*[Symbol.asyncIterator](){for(const t of e)await(0,r().wR)(s.delayBetweenChunks),yield t}}}function u(e,t){const o=Math.ceil(e.length/t),n=new Array(o);for(let r=0,i=0;r<o;++r,i+=t)n[r]=e.substr(i,t);return n}function p(e){return e.map((e=>({type:"success",p:"padding",completion:e,inferenceId:"mock"})))}async function m({environment:e,data:t}){console.log("Retrieving fake completion for data",t);const{context:o}=t,r=o.selectedText,c=[];let{responseText:m}=s;if(m===a&&(m=await async function(){try{return await navigator.clipboard.readText()}catch(e){return}}()??"Unable to retrieve clipboard text."),void 0===m&&(c.push({type:"success",p:"padding",completion:"\n",inferenceId:"mock"},{type:"success",p:"padding",completion:"this is ",inferenceId:"mock"},{type:"success",p:"padding",completion:"fake ",inferenceId:"mock"},{type:"success",p:"padding",completion:`streaming response ${i++}.`,inferenceId:"mock"}),n().A.isDevelopingInAirplaneMode&&c.push({type:"success",p:"padding",completion:"\n\nTo see a real AI response, run the server with `--airplaneMode=false`.",inferenceId:"mock"}),"string"==typeof r)){c.push({type:"success",p:"padding",completion:"\n\nHere is the text you selected:\n\n",inferenceId:"mock"});for(const e of u(r,s.chunkSize))c.push({type:"success",completion:e,p:"padding",inferenceId:"mock"})}if(s.showErrorCode)c.push({type:"error",message:"alas",errorCode:s.showErrorCode,isRetryable:!1});else if(void 0===m)for(let n=0;n<s.numLoremIpsums;n++)c.push(...p([`\n\n${n+1}. `,...u(l,0===s.delayBetweenChunks?l.length:s.chunkSize)]));else if(m.length>0){const e=u(m,s.chunkSize);c.push(...p(e))}return Promise.resolve({type:"success",data:d(c),status:200,headers:{}})}(0,o(852832).exposeDebugValue)("completionDebugSettings",s)},562984:(e,t,o)=>{o.d(t,{i:()=>i,u:()=>r});var n=()=>o(79926);const r={PersonProfileContainer:new(n().O2)("PersonProfileContainer",(()=>Promise.all([o.e(75134),o.e(32370),o.e(26264),o.e(69785),o.e(29357),o.e(22585),o.e(41751),o.e(17680),o.e(95576),o.e(77093),o.e(23730),o.e(44632)]).then(o.bind(o,635686)))),extendedUserProfileActions:new(n().O2)("extendedUserProfileActions",(()=>o.e(63717).then(o.bind(o,260513))))},i=(0,n()._h)(r.PersonProfileContainer,(e=>e.PersonProfileContainer))},563692:(e,t,o)=>{o.r(t),o.d(t,{iconDefinition:()=>n,xMarkFillSmallIcon:()=>r});o(296540);const n={viewBox:"0 0 16 16",fittedViewBox:"3.03 3.03 9.94 9.94",svg:(0,o(474848).jsx)("path",{d:"M12.73 4.33a.75.75 0 1 0-1.06-1.06L8 6.94 4.33 3.27a.75.75 0 1 0-1.06 1.06L6.94 8l-3.67 3.67a.75.75 0 1 0 1.06 1.06L8 9.06l3.67 3.67a.75.75 0 0 0 1.06-1.06L9.06 8z"})},r=(0,o(340498).wt)("xMarkFillSmall",n,"fillSmall")},568365:(e,t,o)=>{o.d(t,{M:()=>n});const n=new(o(984007).Ay)},589407:(e,t,o)=>{o.r(t),o.d(t,{ellipsisIcon:()=>r,iconDefinition:()=>n});o(296540);const n={viewBox:"0 0 20 20",fittedViewBox:"2.62 8.62 14.76 2.76",svg:(0,o(474848).jsx)("path",{d:"M4 11.375a1.375 1.375 0 1 0 0-2.75 1.375 1.375 0 0 0 0 2.75m6 0a1.375 1.375 0 1 0 0-2.75 1.375 1.375 0 0 0 0 2.75m6 0a1.375 1.375 0 1 0 0-2.75 1.375 1.375 0 0 0 0 2.75"})},r=(0,o(340498).wt)("ellipsis",n,"default")},591197:(e,t,o)=>{o.d(t,{VY:()=>s,ZJ:()=>i,u3:()=>a});var n=()=>o(140934);class r extends(()=>o(757695))().Store{getInitialState(){return{popupRenderedInPage:!1,popupRenderedInPeekView:!1}}}const i=new r,a=new(n().ComputedStore)((()=>!1!==i.state.popupRenderedInPage),{debugName:"AssistantWriterRenderedInPageStore"}),s=new(n().ComputedStore)((()=>!1!==i.state.popupRenderedInPeekView),{debugName:"AssistantWriterRenderedInPeekViewStore"})},612900:(e,t,o)=>{o.d(t,{u:()=>i});var n=()=>o(79926);const r=new(n().O2)("PulsingWrapper",(async()=>o.e(45248).then(o.bind(o,673962)))),i=(0,n().jQ)(r,(e=>e.PulsingWrapper),{renderLoading:(e,t)=>t.children})},662971:(e,t,o)=>{o.d(t,{A:()=>m});var n=o(296540),r=()=>o(30537);const i=function(){const[e,t]=n.useState({x:0,y:0});return n.useEffect((()=>{const e=e=>{t({x:e.clientX,y:e.clientY})};return window.addEventListener("mousemove",e),()=>{window.removeEventListener("mousemove",e)}}),[]),e};var a=o(474848);function s({x:e,mouseX:t}){return t>e?void 0:-Math.max(e-t,10)+"px"}function l({x:e,width:t,mouseX:o}){return o>e?-Math.max(o-(e+t),10)+"px":void 0}function c({x:e,width:t,mouseX:o}){return o>e?`${Math.max(o-(e+t),10)}px`:`${Math.max(e-o,10)}px`}function d({x:e,y:t,height:o,mouseX:n,mouseY:r}){return n>e?`polygon(0% 0%, 0% 100%, 100% ${100*(r-t)/o}%)`:`polygon(100% 0%, 0% ${100*(r-t)/o}%, 100% 100%)`}function u(e){const{x:t=0,y:o=0,height:r=0,width:u=0}=e.el.getBoundingClientRect()||{},{x:p,y:m}=i(),g={x:t,y:o,height:r,width:u,mouseX:p,mouseY:m},h=(0,n.useRef)(null),v=n.useCallback((e=>{if(h.current){h.current.style.pointerEvents="none";const t=document.elementFromPoint(e.clientX,e.clientY);if(h.current.style.pointerEvents="auto",t){const o=new MouseEvent(e.nativeEvent.type,e.nativeEvent);t.dispatchEvent(o)}}}),[]),f={insetInlineEnd:l(g),insetInlineStart:s(g),height:r,width:c(g),clipPath:d(g)};return(0,a.jsx)("div",{ref:h,onClick:v,style:{cursor:"pointer",position:"absolute",pointerEvents:"auto",top:0,...f}})}function p({onClick:e,renderOrigin:t,renderExtension:i,allowOptionalExtensionMenu:s,...l},c){const{disabled:d,disableDefaultClick:p,onFocus:m,focused:g,openOnFocus:h,placementToOrigin:v,alignmentToOrigin:f,disableCloseOnEnter:y,bottomSheetInitialState:S,popupTypeOverride:w}=l,b=(0,o(484714).WS)(),x=(0,o(546926).Tf)(),[I,C]=(0,n.useState)(!1),_=(0,n.useRef)(null),M=(0,n.useRef)(null),A=(0,n.useRef)(null),k=(0,n.useRef)(null),j=(0,n.useCallback)((()=>{A.current&&window.clearTimeout(A.current),k.current&&window.clearTimeout(k.current),A.current=null,k.current=null}),[]),P=(0,n.useCallback)((()=>{j(),d||C(!0)}),[d,j]),D=(0,n.useCallback)((()=>{j(),C(!1)}),[j]),T=(0,n.useCallback)((e=>{j(),I||(e&&e.preventDefault&&e.preventDefault(),A.current=window.setTimeout(P,120))}),[I,j,P]),E=(0,n.useCallback)((()=>{j(),I&&(k.current=window.setTimeout(D,100))}),[I,D,j]),U=(0,n.useCallback)((t=>{m(),P(),s&&(null==e||e(t),D())}),[m,P,s,e,D]),R=(0,n.useCallback)((()=>{T()}),[T]),V=(0,n.useCallback)((()=>{m(),T()}),[m,T]),F=(0,n.useCallback)((e=>{if(o(726637).A.isMobile)return;const t=_.current;I&&t&&!t.contains(e.target)&&D()}),[I,D]),N=(0,n.useCallback)((e=>{13===e.keyCode&&I&&!y&&D()}),[I,D,y]);(0,n.useEffect)((()=>{if(!Boolean(p))return window.addEventListener("click",F),()=>{window.removeEventListener("click",F)}}),[p,F]),(0,n.useEffect)((()=>(window.addEventListener("keydown",N),()=>{window.removeEventListener("keydown",N)})),[N]);const B=(0,n.useRef)(g);(0,n.useEffect)((()=>{h&&!B.current&&g?T():!g&&B.current&&E(),B.current=g}),[g,h,T,E]);const L=(0,o(401497).IS)((()=>({mobilePopupStyle:{borderRadius:12,backgroundColor:o(100622).Tj.background.secondary}})),[]),O={...(0,o(383036).A)({onMouseEnter:R,onClick:U},l),showExtensionArrow:!0};let K=r().n.Popup;return w?K=w:b&&(K=x?r().n.BottomSheet:r().n.SlideUp),(0,a.jsx)(o(782482).N,{debugName:"ExtensionMenuItem",capture:g,onEnter:I?void 0:T,onRight:T,onLeft:I?E:void 0,onEsc:I?E:void 0,children:(0,a.jsx)(o(127833).zD,{popupType:K,bottomSheetInitialState:S,open:I,origin:t(O,c),placementToOrigin:v??"right",alignmentToOrigin:f??"center",originGap:0,disableMouseCapture:!0,preventBlockRenderQueueOnEnter:!0,preventScaleTransition:!b,preventCaptureEsc:!0,ref:_,render:()=>(0,a.jsxs)(a.Fragment,{children:[!b&&M.current?(0,a.jsx)(u,{el:M.current}):null,(0,a.jsx)("div",{ref:M,style:{height:"100%"},children:i({onMouseEnter:V},{close:E})})]}),style:{overflow:"visible",...b&&L.mobilePopupStyle},trapFocus:!0,onDismiss:D})})}const m=n.forwardRef(p)},673657:(e,t,o)=>{o.d(t,{n:()=>i});var n=()=>o(590526),r=()=>o(964345);function i(e){return(0,n().K8)((()=>r().gZ.state&&(null==e?void 0:e.id)===r().Di.state),[e])}},738508:(e,t,o)=>{o.r(t),o.d(t,{cursorIcon:()=>i,iconDefinition:()=>r});o(296540);var n=o(474848);const r={viewBox:"0 0 20 20",fittedViewBox:"1.25 0 17.5 20",svg:(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)("g",{className:"logo-light-mode",children:[(0,n.jsxs)("g",{clipPath:"url(#clip0_16020_205)",children:[(0,n.jsx)("path",{fill:"#757575",d:"m9.995 9.987 8.658 4.999a.6.6 0 0 1-.226.226l-8.092 4.672a.68.68 0 0 1-.68 0l-8.092-4.672a.6.6 0 0 1-.226-.226z"}),(0,n.jsx)("path",{fill:"#525252",d:"M9.995 0v9.987l-8.658 4.999a.6.6 0 0 1-.082-.309v-9.38c0-.22.117-.424.308-.534L9.655.09a.7.7 0 0 1 .34-.09"}),(0,n.jsx)("path",{fill:"#404040",d:"M18.652 4.989a.6.6 0 0 0-.225-.226L10.334.09A.7.7 0 0 0 9.995 0v9.987l8.658 4.999a.6.6 0 0 0 .083-.309v-9.38c0-.11-.03-.216-.083-.308"}),(0,n.jsx)("path",{fill:"#D9D9D9",d:"M18.047 5.339a.29.29 0 0 1 0 .29l-7.859 13.61c-.053.093-.193.055-.193-.05v-8.97a.4.4 0 0 0-.054-.201z"}),(0,n.jsx)("path",{fill:"#fff",d:"m18.047 5.339-8.106 4.68a.4.4 0 0 0-.147-.147L2.027 5.387c-.092-.053-.054-.193.052-.193h15.717c.111 0 .202.06.25.145"})]}),(0,n.jsx)("defs",{children:(0,n.jsx)("clipPath",{id:"clip0_16020_205",children:(0,n.jsx)("path",{fill:"#fff",d:"M1.255 0h17.49v20H1.256z"})})})]}),(0,n.jsxs)("g",{className:"logo-dark-mode",children:[(0,n.jsxs)("g",{clipPath:"url(#clip0_16020_213)",children:[(0,n.jsx)("path",{fill:"#6E6E6E",d:"m9.995 9.987 8.658 4.999a.6.6 0 0 1-.226.226l-8.092 4.672a.68.68 0 0 1-.68 0l-8.092-4.672a.6.6 0 0 1-.226-.226z"}),(0,n.jsx)("path",{fill:"#4A4A4A",d:"M9.995 0v9.987l-8.658 4.999a.6.6 0 0 1-.082-.309v-9.38c0-.22.117-.424.308-.534L9.655.09a.7.7 0 0 1 .34-.09"}),(0,n.jsx)("path",{fill:"#383838",d:"M18.652 4.989a.6.6 0 0 0-.225-.226L10.334.09A.7.7 0 0 0 9.995 0v9.987l8.658 4.999a.6.6 0 0 0 .083-.309v-9.38c0-.11-.03-.216-.083-.308"}),(0,n.jsx)("path",{fill:"#C9C9C9",d:"M18.047 5.339a.29.29 0 0 1 0 .29l-7.859 13.61c-.053.093-.193.055-.193-.05v-8.97a.4.4 0 0 0-.054-.201z"}),(0,n.jsx)("path",{fill:"#fff",d:"m18.047 5.339-8.106 4.68a.4.4 0 0 0-.147-.147L2.027 5.387c-.092-.053-.054-.193.052-.193h15.717c.111 0 .202.06.25.145"})]}),(0,n.jsx)("defs",{children:(0,n.jsx)("clipPath",{id:"clip0_16020_213",children:(0,n.jsx)("path",{fill:"#fff",d:"M1.255 0h17.49v20H1.256z"})})})]})]})},i=(0,o(340498).wt)("cursor",r,"default")},742734:(e,t,o)=>{o.d(t,{E:()=>a});var n=()=>o(230711),r=()=>o(590526),i=()=>o(304228);function a(e){const{spaceStore:t,viewedUserId:o}=e,a=(0,n().nB)(t),s=(0,n().V_)({spaceStore:t,userId:o});return(0,r().K8)((()=>(0,i().V)({spaceStore:t,actorRole:a,viewedRole:s})),[t,a,s])}},748054:(e,t,o)=>{o.d(t,{M:()=>r});o(296540);const n={viewBox:"0 0 20 20",fittedViewBox:"3.97 2.68 12.51 14.37",svg:(0,o(474848).jsx)("path",{d:"M10.282 3.66a5.39 5.39 0 0 0-5.217-.54l-.711.305a.63.63 0 0 0-.38.575v12.425a.625.625 0 1 0 1.25 0v-3.913l.333-.142a4.14 4.14 0 0 1 4.008.414 5.39 5.39 0 0 0 5.504.405l1.06-.53a.63.63 0 0 0 .346-.56V4a.625.625 0 0 0-.905-.558l-1.06.53c-1.36.68-2.983.56-4.228-.312m-5.057 7.495V4.412l.332-.142a4.14 4.14 0 0 1 4.008.413 5.39 5.39 0 0 0 5.504.406l.156-.078v6.703l-.715.357c-1.36.68-2.983.56-4.228-.312a5.4 5.4 0 0 0-5.057-.604"})},r=(0,o(340498).wt)("flag",n,"default")},780863:(e,t,o)=>{o.d(t,{p:()=>l});var n=o(296540),r=()=>o(40845),i=()=>o(496603),a=()=>o(440024);const s={isRepositioning:!1};function l(e){const{currentPosition:t,imageUrl:o,onSavePosition:l,onPositionChange:c,rootRef:d,environment:u}=e,[p,m]=(0,n.useState)(s),{isRepositioning:g}=p,h=(0,n.useCallback)((()=>{m(s)}),[]),v=(0,n.useMemo)((()=>void 0!==p.temporaryPosition?p.temporaryPosition:t),[p.temporaryPosition,t]);(0,n.useEffect)((()=>{c&&c(v)}),[v,c]);const f=(0,n.useCallback)((e=>{(0,a().I)({environment:u});const t=new Image;t.onload=()=>{m((e=>({...e,isRepositioning:!0,image:t})))};const n=e||o;n&&(t.src=n)}),[u,o]),y=(0,n.useCallback)((()=>{l(v),h()}),[l,v,h]),S=(0,n.useCallback)((()=>{h()}),[h]);(0,n.useEffect)((()=>{const e=e=>{const t=d.current;t&&e.target instanceof Node&&!t.contains(e.target)&&g&&y()};return g&&window.addEventListener("mousedown",e),()=>{window.removeEventListener("mousedown",e)}}),[g,y,d]);const w=(0,n.useCallback)((e=>{const{image:t}=p;if(!t||!g)return;const o=d.current;if(o&&o instanceof Element){const e=o.getBoundingClientRect().width/t.width*t.height;m((t=>({...t,startDragImageScreenHeight:e,startDragRenderedPosition:v})))}}),[p,g,v,d]),b=(0,n.useCallback)((e=>{if(!g)return;const{startDragImageScreenHeight:t,startDragRenderedPosition:o}=p,n=e.diffY/(t||0)+(o||0);m((e=>({...e,temporaryPosition:(0,i().LI)((0,r().A)(n,0,1),4)})))}),[g,p]),x=(0,n.useCallback)((()=>{m((e=>({...e,startDragImageScreenHeight:void 0,startDragRenderedPosition:void 0})))}),[]),I=(0,n.useMemo)((()=>g?"ns-resize":"default"),[g]);return{isRepositioning:g,currentImagePosition:v,handleDragStart:w,handleDragMove:b,handleDragEnd:x,handleStartReposition:f,handleSavePosition:y,handleCancelReposition:S,repositioningCursor:I}}},783793:(e,t,o)=>{o.d(t,{o:()=>c,x:()=>l});o(296540);var n=()=>o(401497),r=()=>o(100622),i=()=>o(278589),a=()=>o(200424),s=o(474848);function l(e){const{variant:t,imgSource:o,tintColor:a,faceStyle:l,shadowVariant:d="strong",style:u,...p}=e,m=(0,n().IS)((()=>{const e=(0,i().N)(t);return{faceImgWrap:{width:e,height:e,borderRadius:"100%",background:r().Tj.assistantCornerButtonBackground,..."strong"===d&&{boxShadow:e>=90?r().Tj.shadowMDThickerOutline:r().Tj.shadowMD},..."light"===d&&{borderRadius:"50%",boxShadow:e>=90?r().Tj.shadowSMThickerOutline:r().Tj.shadowSM},overflow:"hidden",...u}}}),[t,d,u]);return(0,s.jsx)("div",{...p,children:(0,s.jsx)("div",{style:m.faceImgWrap,children:(0,s.jsx)(c,{imgSource:o,variant:t,tintColor:a,style:l})})})}function c(e){const{imgSource:t,variant:o,tintColor:r,style:l,alt:c,...d}=e,u=(0,i().N)(o),p=t??a(),m=c??"Notion AI face",g=(0,n().IS)((()=>({faceImg:{height:u,width:u,transform:"scaleX(var(--direction, 1))",...l},tintedFace:{height:u,width:u,transform:"scaleX(var(--direction, 1))",backgroundColor:r,WebkitMaskImage:`url(${p})`,maskImage:`url(${p})`,WebkitMaskRepeat:"no-repeat",maskRepeat:"no-repeat",WebkitMaskPosition:"center",maskPosition:"center",WebkitMaskSize:"contain",maskSize:"contain",...l}})),[u,l,r,p]);return void 0!==r?(0,s.jsx)("div",{style:g.tintedFace,role:"img","aria-label":m}):(0,s.jsx)("img",{...d,style:g.faceImg,src:p,alt:m})}},801678:(e,t,o)=>{o.d(t,{A:()=>h});var n=o(296540),r=()=>o(756117),i=()=>o(590526),a=()=>o(609679),s=()=>o(69708),l=()=>o(100622),c=()=>o(496603),d=()=>o(806080),u=()=>o(284371),p=()=>o(720665),m=()=>o(46986),g=o(474848);const h=function(e){const t=(0,n.useRef)(null),r=(0,o(484714).v3)(),{renderControl:a,onFlushTemporaryPosition:s,style:l,source:u,store:h}=e,f=(0,i().K8)((()=>0===o(206051).default.state.stores.length),[]),[y,S]=(0,n.useState)(!1),w=(0,i().uB)(e.mouseStore,o(968578).A),b=(0,i().K8)((()=>w.state.mouseEntered),[w]),x=(0,i().K8)((()=>function(e,t){if("gallery"===e||"board"===e){const e=t.getFormat().card_cover_position;if((0,d().Et)(e))return e}const o=.5;var n;if((0,m().V)())return(null===(n=t.getCover())||void 0===n?void 0:n.cover_position)??o;if(t.isCollectionView()){const e=t.getCollectionStoreIfSingleSource();if(e){const t=e.getFormat().collection_cover_position;return(0,p().pN)(t)?o:t}}const r=t.getFormat(),i=r.page_cover_position;if((0,d().Et)(i))return i;return o}(u,h)),[u,h]),{isRepositioning:I,currentImagePosition:C,handleDragStart:_,handleDragMove:M,handleDragEnd:A,handleStartReposition:k,handleSavePosition:j,handleCancelReposition:P,repositioningCursor:D}=(0,o(780863).p)({currentPosition:x,onSavePosition:e=>{s({imagePosition:e,reset:()=>{w.reset()}})},rootRef:t,environment:r}),T=(0,o(401497).IS)((()=>({dragContainer:{width:"100%",cursor:D},container:{position:"relative",width:"100%",zIndex:1}})),[D]);I&&!f&&P();const E=(0,n.useMemo)((()=>(0,c().nF)((e=>{w.setState({...w.state,mouseEntered:!0})}),100)),[w]),U=(0,n.useMemo)((()=>(0,c().sg)((e=>{w.setState({...w.state,mouseEntered:!1})}),100)),[w]),R=(0,n.useCallback)(((e,t)=>{k(t)}),[k]),V=(0,n.useCallback)((e=>{j()}),[j]),F=(0,n.useCallback)((e=>{const t=e.target;void 0!==t&&t instanceof HTMLElement&&(0,o(819121).p)(t)&&S(!0)}),[]),N=(0,n.useCallback)((()=>{S(!0)}),[]),B=(0,i().K8)((()=>a({handleRepositionClick:R,handleSavePositionClick:V,handleCancelClick:P,isVisible:b||y||I,isRepositioning:I})),[R,V,P,y,I,b,a]),L=(0,o(870956).A)(Boolean(e.preventClickPropagation));return(0,g.jsxs)("div",{ref:t,onFocus:F,onBlur:N,onMouseEnter:E,onMouseMove:E,onMouseLeave:U,...L,...(0,o(451306).ow)(T.container,l),children:[(0,g.jsx)(o(222321).A,{onDraggableDragStart:_,onDraggableDragMove:M,onDraggableDragEnd:A,onDraggableDragCancel:A,disabled:!I,render:t=>(0,g.jsx)("div",{style:T.dragContainer,...t,children:e.render({imagePosition:C,isRepositioning:I})})}),(0,g.jsx)(v,{small:e.small,isRepositioning:I}),B]})};function v({small:e,isRepositioning:t}){if(e)return null;const o={background:l().IF.blackWithAlpha(.4),borderRadius:4,color:l().oZ.white,fontSize:12,fontFamily:u().vc(a().locale).sans,width:180,insetInlineStart:"calc(50% - 90px)",padding:"0.3em 1.5em 0.3em",pointerEvents:"none",position:"absolute",top:"calc(50% - 10px)",textAlign:"center"};return(0,g.jsx)(r().A,{visible:t,initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},style:o,children:(0,g.jsx)(s().sA,{defaultMessage:"Drag image to reposition",id:"withImageRepositioning.dragImage.text"})})}},803960:(e,t,o)=>{o.r(t),o.d(t,{arrowChevronSingleDownIcon:()=>r,iconDefinition:()=>n});o(296540);const n={viewBox:"0 0 20 20",fittedViewBox:"3.97 6.97 12.06 6.66",svg:(0,o(474848).jsx)("path",{d:"M9.558 13.442c.244.244.64.244.884 0l5.4-5.4a.625.625 0 0 0-.884-.884L10 12.116 5.042 7.158a.625.625 0 1 0-.884.884z"})},r=(0,o(340498).wt)("arrowChevronSingleDown",n,"default")},831081:(e,t,o)=>{o.d(t,{U:()=>r});o(296540);const n={viewBox:"0 0 16 16",fittedViewBox:"3 3 10 10",svg:(0,o(474848).jsx)("path",{d:"M11.75 3h-7.5C3.56 3 3 3.56 3 4.25v7.5c0 .69.56 1.25 1.25 1.25h7.5c.69 0 1.25-.56 1.25-1.25v-7.5C13 3.56 12.44 3 11.75 3"})},r=(0,o(340498).wt)("mediaStopFillSmall",n,"fillSmall")},846523:(e,t,o)=>{o.d(t,{u:()=>n});const n=(0,o(340498).xh)("questionMarkCircle",{default:{loader:()=>o.e(82106).then(o.bind(o,406533))},small:{loader:()=>o.e(82106).then(o.bind(o,721479))},fill:{loader:()=>o.e(82106).then(o.bind(o,299733))},fillSmall:{loader:()=>o.e(82106).then(o.bind(o,182060))}},["question","query","inquiry","uncertain","unknown","help","circle"])},888325:(e,t,o)=>{function n(e){return`${e.table}:${e.id}`}o.d(t,{_:()=>n})},912474:(e,t,o)=>{o.d(t,{a:()=>i});var n=()=>o(79926);const r=new(n().O2)("StopDictationButton",(async()=>await Promise.all([o.e(75134),o.e(35530),o.e(9773),o.e(36556),o.e(55373),o.e(36192),o.e(40537),o.e(27992),o.e(63452),o.e(66249),o.e(92845),o.e(87249),o.e(79022),o.e(14578),o.e(87017),o.e(34877),o.e(46414),o.e(11676),o.e(61165),o.e(94522),o.e(44584),o.e(38293),o.e(40992),o.e(88455),o.e(52871),o.e(47160),o.e(49021),o.e(53697),o.e(17680),o.e(6039),o.e(71136),o.e(86341),o.e(29316),o.e(3101)]).then(o.bind(o,962309)))),i=(0,n()._h)(r,(e=>e.StopDictationButton))},928213:(e,t,o)=>{o.d(t,{c:()=>a});var n=()=>o(165358),r=()=>o(519831),i=()=>o(753812);async function a(e){const{environment:t,collectionStore:o}=e,a={id:o.id,table:r().Vl,spaceId:o.getSpaceId()},s=await i().callApi({eventName:"suggestRecordKey",environment:t,data:{...a,shouldSetSuccessfullySuggestedRecord:!0}});if("success"===s.type)return s.data.key;n().log({level:"error",from:"collectionAutoIncrementIdActions.suggestRecordKeyResponse",type:"JSONParseError",error:{miscDataString:s.error.message}})}},947086:(e,t,o)=>{o.r(t),o.d(t,{iconDefinition:()=>n,personSlashIcon:()=>r});o(296540);const n={viewBox:"0 0 20 20",fittedViewBox:"3.31 2.31 14.13 16.25",svg:(0,o(474848).jsx)("path",{d:"M3.53 2.463a.626.626 0 0 1 .882.067l.032.038q.008.013.018.025l12.687 14.875q.089.101.203.156a.625.625 0 0 1-1.014.72l-.928-1.08a2.4 2.4 0 0 1-1.26.362h-8.3c-.68 0-1.328-.288-1.74-.768-.43-.501-.591-1.217-.23-1.923C4.899 12.945 7.3 11.63 10 11.63q.3 0 .593.021l-1.001-1.166a3.28 3.28 0 0 1-2.267-1.22c-.536-.669-.825-1.532-.886-2.453L3.463 3.345a.626.626 0 0 1 .067-.882M10 12.88c-2.335 0-4.245 1.138-5.007 2.625-.104.203-.071.379.066.54.157.182.449.33.79.33h8.301c.155 0 .3-.032.426-.082l-2.707-3.154a6.8 6.8 0 0 0-1.87-.26M10 2.375c1.137 0 2.055.469 2.675 1.241.607.757.899 1.766.9 2.824 0 1.058-.292 2.067-.9 2.825q-.213.263-.472.477l-.811-.951q.168-.138.307-.309c.392-.487.625-1.2.625-2.042S12.09 4.887 11.7 4.4c-.38-.473-.936-.775-1.7-.775-.762 0-1.32.302-1.7.774a2.4 2.4 0 0 0-.278.44l-.857-1.004q.076-.113.161-.219c.62-.772 1.538-1.241 2.675-1.241"})},r=(0,o(340498).wt)("personSlash",n,"default")},970236:(e,t,o)=>{o.d(t,{E:()=>s});o(296540);var n=()=>o(401497),r=()=>o(100622),i=()=>o(284371),a=o(474848);function s(e){const{color:t="gray",style:o,content:s,...l}=e,c=(0,n().IS)((()=>({badge:{alignSelf:"center",padding:"2px 4px",background:r().Tj[t].background.secondaryTranslucent,color:r().Tj[t].text.accentPrimary,borderRadius:4,fontSize:11,fontWeight:i().Wy.medium,lineHeight:1.3,...o}})),[t,o]);return(0,a.jsx)("div",{style:c.badge,...l,children:s})}},984007:(e,t,o)=>{o.d(t,{Ay:()=>l,Gi:()=>i,Wc:()=>n,pF:()=>a,vS:()=>r});const n="loadingLocalImage",r="uploading",i="downloading",a="loaded";class s extends(()=>o(757695))().Store{getInitialState(){return{loadingMode:a}}}const l=s},994006:(e,t,o)=>{o.d(t,{A:()=>r});o(296540);var n=o(474848);const r=function(e){const t={marginInlineEnd:e.avatarMarginRight??6,alignSelf:"center"},r={display:"flex",alignItems:"center",minWidth:0,...e.style},i=e.inline?{...t,width:"none",minHeight:"none"}:t,{userStore:a,avatarShouldShowShadow:s,avatarSize:l,hasTooltip:c,tooltipHeader:d,hasPersonHoverCard:u,spaceStore:p}=e,m=(0,o(69708).tz)(),g=(0,o(590526).K8)((()=>null==a?void 0:a.getDisplayName(m)),[a,m]),h=(0,n.jsxs)("div",{style:r,children:[(0,n.jsx)("div",{style:i,children:(0,n.jsx)(o(453697).A,{userStore:a,avatarShouldShowShadow:s,size:l,hasTooltip:c&&!u,hasPersonHoverCard:!1,tooltipHeader:d})}),(0,n.jsx)("div",{className:"notranslate",style:{...o(284371).RC},children:g})]});return u?(0,n.jsx)(o(436525).D,{userStore:a,spaceStore:p,children:h}):h}}}]);