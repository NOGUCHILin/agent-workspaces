"use strict";(globalThis.webpackChunknotion_next=globalThis.webpackChunknotion_next||[]).push([[48486,77282,97651],{346:(e,t,n)=>{n.d(t,{MG:()=>f,T1:()=>m,a1:()=>b,dt:()=>g,kg:()=>h,lC:()=>v,n_:()=>y});var o=n(296540),i=()=>n(484714),r=()=>n(590526),a=()=>n(79926),s=()=>n(187174),l=()=>n(941463),c=()=>n(441199),d=()=>n(749687),u=()=>n(737230),p=()=>n(756114);const m=new(a().O2)("PerformanceToolbar",(()=>Promise.all([n.e(23640),n.e(45624)]).then(n.bind(n,688201)))),f=(0,a()._h)(m,(e=>e.PerformanceToolbar)),g=(0,a()._h)(m,(e=>e.PerformanceToolbarSettings));function h(){const e=(0,i().v3)();return(0,r().K8)((()=>(0,p().D)(e,e.RouterStore.state)),[e])}function y(){const e=(0,i().v3)(),t=x("performanceToolbarStore"),n=x("isPerformanceToolbarVisible");return(0,r().K8)((()=>!(!t||!n)&&n(e,e.RouterStore.state,t.state)),[n,e,t])}function v(){const e=x("performanceToolbarStore");return(0,r().K8)((()=>!!e&&e.state.isPerformanceToolbarMounted),[e])}function b(){const e=(0,i().v3)(),t=x("createPerformanceToolbarMouseListeners"),n=x("performanceToolbarStore"),{sidebarExpanded:a,sidebarWidth:s,secondarySidebarExpanded:p,secondarySidebarWidth:m,updateSidebarExpanded:f,updateSidebarWidth:g}=(0,r().K8)((()=>({sidebarExpanded:d().sidebarExpandedStore.state,sidebarWidth:d().sidebarWidthStore.state,secondarySidebarExpanded:c().default.isOpen(),secondarySidebarWidth:l().Ay.getWidth(),updateSidebarExpanded:u().Ay.state.expanded,updateSidebarWidth:u().Ay.state.width})),[]);return(0,o.useEffect)((()=>{if(n&&t)return t(e,(e=>n.update((t=>({...t,isMouseNearPerformanceToolbar:e})))),a,s,p,m,f,g)}),[t,e,n,a,s,p,m,f,g])}function x(e){const t=h(),[{value:n}]=(0,s().Yb)((()=>t?m.load().then((t=>t[e])):Promise.resolve(void 0)),[e,t]);return n}},670:(e,t,n)=>{n.d(t,{Lr:()=>a,PM:()=>i,Ur:()=>r});n(517642),n(658004),n(733853),n(845876),n(432475),n(515024),n(731698);class o extends(()=>n(757695))().Store{getInitialState(){return{duplicatingWorkflowIds:new Set,isDuplicating:!1}}}const i=new o;function r(e){i.update((t=>{const n=new Set(t.duplicatingWorkflowIds);return n.add(e),{duplicatingWorkflowIds:n,isDuplicating:n.size>0}}))}function a(e){i.update((t=>{if(!t.duplicatingWorkflowIds.has(e))return t;const n=new Set(t.duplicatingWorkflowIds);return n.delete(e),{duplicatingWorkflowIds:n,isDuplicating:n.size>0}}))}},27356:(e,t,n)=>{n.r(t),n.d(t,{UISpacePermissionGroupToken:()=>v});var o=n(296540),i=()=>n(726637),r=()=>n(484714),a=()=>n(590526),s=()=>n(401497),l=()=>n(942194),c=()=>n(784892),d=()=>n(437607),u=()=>n(914462),p=()=>n(69708),m=()=>n(100622),f=()=>n(284371),g=()=>n(848401),h=()=>n(580648),y=n(474848);function v(e){const{parentStore:t,style:n,format:v}=e,b=e.groupPointer.id,x=e.groupPointer.spaceId,S=(0,d().S4)({spacePermissionGroupId:b,spaceId:x}),k=(0,a().K8)((()=>{if(e.groupModel)return e.groupModel;if(!t)return;return l().C.createChildStore(t,S).getModel()}),[t,S,e.groupModel]),w=(0,r().Y0)(),{outerStyle:I,avatarWrapStyle:A}=(0,s().IS)((()=>({outerStyle:{display:"flex",alignItems:"center",minWidth:0},avatarWrapStyle:{width:"none",minHeight:"none",marginInlineEnd:6},badgeStyle:{borderRadius:4,background:m().Tj.legacyDefaultSelectColor,fontSize:i().A.isMobile?11:9,lineHeight:w.isAndroid?1.5:1,textTransform:"uppercase",letterSpacing:"0.04em"}})),[w]),C=(0,p().tz)(),T=(0,a().K8)((()=>(0,u().n)({intl:C,permissionGroupModel:k})),[C,k]),M=(0,o.useCallback)((e=>v===c().NY.Inline?(0,y.jsx)(h().o,{group:k,size:e}):(0,y.jsxs)("div",{style:I,children:[(0,y.jsx)("div",{style:A,children:(0,y.jsx)(h().o,{group:k,size:e})}),(0,y.jsx)("div",{style:{...f().RC},children:T})]})),[v,I,A,k,T]);return(0,y.jsx)(g().Ay,{...e,style:{margin:0,...n},renderAvatar:M})}},32527:(e,t,n)=>{n.d(t,{E:()=>i});n(296540);const o={viewBox:"0 0 16 16",fittedViewBox:"2.67 2.3 10.65 11.35",svg:(0,n(474848).jsx)("path",{d:"M7.1 2.344a.625.625 0 0 0-.724.507l-.5 2.844h-1.98a.625.625 0 1 0 0 1.25h1.76l-.373 2.11H3.304a.625.625 0 0 0 0 1.25h1.76L4.6 12.932a.625.625 0 0 0 1.231.216l.501-2.843h2.483l-.463 2.627a.625.625 0 0 0 1.231.216l.501-2.843h2.02a.625.625 0 0 0 0-1.25h-1.8l.372-2.11h2.02a.625.625 0 0 0 0-1.25h-1.8l.463-2.627a.625.625 0 1 0-1.23-.217l-.502 2.844H7.145l.462-2.627a.625.625 0 0 0-.507-.724m-.547 6.71.371-2.109h2.483l-.372 2.11z"})},i=(0,n(340498).wt)("numberSmall",o,"small")},38554:(e,t,n)=>{n.d(t,{U:()=>a});var o=()=>n(590526),i=()=>n(822789),r=()=>n(229508);function a(){const e=(0,r().a)();return(0,o().K8)((()=>(0,i().XM)(e)),[e])}},53528:(e,t,n)=>{n.d(t,{OH:()=>s,T2:()=>l,do:()=>c});var o=()=>n(597777),i=()=>n(869190),r=()=>n(604995),a=()=>n(416504);function s(e){const{dateTime:t,intl:n,shortenDateAndRange:o}=e,a=r().C6.toPersistedDate(t.valueOf());return i().ZF({value:a,allowRelativeDates:!0,intl:n,shortenDateAndRange:o,displayInUserTimezone:!0})}function l(e){const{dateTime:t,intl:n,userTimeZone:o,displayInUserTimezone:a,alwaysIncludeTimezone:s}=e,l=r().C6.toPersistedDateTime(t.valueOf(),t.zoneName);return i().ZF({value:l,allowRelativeDates:!0,intl:n,userTimeZone:o,displayInUserTimezone:a,alwaysIncludeTimezone:s})}function c(e){const{luxonRange:t,intl:n}=e,s=r().C6.toPersistedDateRange(t),l=i().ZF({value:s,allowRelativeDates:!1,shortenDateAndRange:!0,intl:n,displayInUserTimezone:!0}),c=t.end.setZone((0,a().P)()),d=i().fU({start_time:c.toFormat(o().GE),humanReadable:!1,intl:n});return n.formatMessage({id:"verification.timeRange",defaultMessage:"{formattedDateRange} at {formattedEndTime}"},{formattedDateRange:l,formattedEndTime:d})}},59110:(e,t,n)=>{n.r(t),n.d(t,{loadLocalSubtree:()=>S});n(944114),n(517642),n(658004),n(733853),n(845876),n(432475),n(515024),n(731698),n(898992),n(354520),n(803949);var o=()=>n(726637),i=()=>n(700500),r=()=>n(175482),a=()=>n(777447),s=()=>n(792071),l=()=>n(976618),c=()=>n(388821),d=()=>n(277153),u=()=>n(912720),p=()=>n(199378),m=()=>n(179034),f=()=>n(519831),g=()=>n(869558),h=()=>n(37165),y=()=>n(144081),v=()=>n(743246),b=()=>n(201980),x=()=>n(534177);function S(e){const{environment:t,blockId:n,inMemoryRecordCache:o,options:i}=e,r=t.currentUser.id,a=c().RecordMap.create(),s=new Set,l=[{pointer:{table:m().ev,id:n},parentId:"doesn't matter"}];for(;l.length>0;){const e=l.shift();if(!e)continue;if(s.has(e.pointer.id))continue;const t=n===e.pointer.id,c=k({pointer:e.pointer,recordMap:a,inMemoryRecordCache:o,currentUserId:r,cursors:l,cursor:e,options:i,isRootRequest:t});if(c)return c;s.add(e.pointer.id)}return{type:"success",recordMap:a}}function k(e){const{pointer:t,recordMap:n,inMemoryRecordCache:c,currentUserId:S,cursors:k,cursor:w,options:I,isRootRequest:A}=e;let C;return(0,d().Yt)(t,m().ev)?C=function(e){var t,n,l,c;const{pointer:d,recordMap:p,inMemoryRecordCache:f,currentUserId:h,cursors:y,cursor:S,options:k,isRootRequest:w}=e,I=f.getRecord({pointer:d,userId:h}),A=null==I?void 0:I.value;if(!A)return k.requireFullSubtree?{type:"error",reason:"missing_record",pointer:d}:void 0;const C=k.excludeCrdtData?r().ir(A):A;if(k.includeLegacyTransclusionBlockValues){if(!w&&C.parent_id!==S.parentId&&!S.isBlockContentChild)return}else if(!w&&C.parent_id!==S.parentId)return;if(C.type===i().xd.externalObjectInstance&&!k.allowCopyExternalObjectInstances)return{type:"error",reason:"encountered_external_object_instance",pointer:d};if(p.setValue(d,C),!k.skipNavigableChildren){const e=s().Bj6.fromBlock(C).getCollectionPointers();for(const t of e){const e=f.getRecord({pointer:t,userId:h});var T,M;if(e)(null===(T=e.value)||void 0===T?void 0:T.parent_table)===m().ev&&(null===(M=e.value)||void 0===M?void 0:M.parent_id)===C.id&&y.push({pointer:t,parentId:C.id});else if(k.requireFullSubtree)return{type:"error",reason:"missing_record",pointer:t}}if(C.view_ids)for(const t of C.view_ids)y.push({pointer:{table:g().Gy,id:t,spaceId:C.space_id},parentId:C.id})}if(!(k.skipBlockContent||k.skipTransclusionContainerChildren&&"transclusion_container"===C.type||k.skipNavigableChildren&&(0,i().$I)(C.type))){const e=s().Bj6.fromBlock(C).getRenderableContentIds();for(const t of e)y.push({pointer:{table:m().ev,id:t},parentId:C.id,isBlockContentChild:!0})}const _=s().Bj6.fromBlock(C).getNonContentChildren();for(const o of _)y.push({pointer:{table:m().ev,id:o},parentId:C.id,isBlockContentChild:!0});if(C.type===i().xd.externalObjectInstance){var j,B;const e=(null===(j=C.format)||void 0===j?void 0:j.related_external_object_uris_to_instance_ids)&&Object.values(null===(B=C.format)||void 0===B?void 0:B.related_external_object_uris_to_instance_ids)||[];for(const t of e)y.push({pointer:{table:m().ev,id:t,spaceId:C.space_id},parentId:C.id})}if(!k.skipNavigableChildren&&C.properties){const e=Object.values(C.properties).filter(x().O9);for(const t of e)for(const e of t)for(const t of b().uPN(e)){if(b().jIt(t)){const e=b().v55(t);y.push({pointer:{table:m().ev,id:e},parentId:C.id})}if(b().sh$(t)){const e=b().cQR(t),n=(0,a().lX)({url:e,baseUrl:o().A.domainBaseUrl,publicDomainName:o().A.publicDomainName});n&&y.push({pointer:{table:m().ev,id:n},parentId:C.id})}if(b().N53(t)){const e=b().T$c(t);e&&y.push({pointer:{table:m().ev,id:e,spaceId:C.space_id},parentId:C.id})}}}"form"===C.type&&null!==(t=C.format)&&void 0!==t&&t.form_layout_pointer&&y.push({pointer:C.format.form_layout_pointer,parentId:C.id});null!==(n=C.format)&&void 0!==n&&n.automation_id&&y.push({pointer:{table:u().yB,id:C.format.automation_id,spaceId:C.space_id},parentId:C.id});null!==(l=C.format)&&void 0!==l&&l.workflow_id&&y.push({pointer:{table:v().C0,id:C.format.workflow_id,spaceId:C.space_id},parentId:C.id});null!==(c=C.format)&&void 0!==c&&c.ai_instructions_page_pointer&&y.push({pointer:C.format.ai_instructions_page_pointer,parentId:C.id})}({pointer:t,recordMap:n,inMemoryRecordCache:c,currentUserId:S,cursors:k,cursor:w,options:I,isRootRequest:A}):(0,d().Yt)(t,f().Vl)?C=function(e){var t,n;const{pointer:o,recordMap:i,inMemoryRecordCache:r,currentUserId:a,cursors:s,cursor:l,options:c}=e;if(!c.allowCopyCollections)return{type:"error",reason:"encountered_collection",pointer:o};const d=r.getRecord({pointer:o,userId:a});if(null==d||!d.value)return c.requireFullSubtree?{type:"error",reason:"missing_record",pointer:o}:void 0;if(d.value.parent_id!==l.parentId)return;const p=d.value;i.setValue(o,p),r.forEachRecord(a,(({model:e})=>{e.table===m().ev&&e&&e.parent_id===o.id&&e.alive&&s.push({pointer:e.pointer,parentId:o.id})}));const f=(null===(t=p.format)||void 0===t?void 0:t.automation_ids)??[];for(const m of f)s.push({pointer:{table:u().yB,id:m,spaceId:p.space_id},parentId:p.id});p.schema&&Object.values(p.schema).forEach((e=>{e&&"button"===e.type&&e.automation_id&&s.push({pointer:{id:e.automation_id,spaceId:p.space_id,table:u().yB},parentId:p.id})}));null!==(n=p.format)&&void 0!==n&&n.layout_pointer&&s.push({pointer:p.format.layout_pointer,parentId:p.id})}({pointer:t,recordMap:n,inMemoryRecordCache:c,currentUserId:S,cursors:k,cursor:w,options:I}):(0,d().Yt)(t,g().Gy)?C=function(e){var t,n;const{pointer:o,recordMap:i,inMemoryRecordCache:r,currentUserId:a,cursors:s,cursor:l,options:c}=e,d=r.getRecord({pointer:o,userId:a});if(null==d||!d.value)return c.requireFullSubtree?{type:"error",reason:"missing_record",pointer:o}:void 0;if(d.value.parent_id!==l.parentId)return;"form_editor"===d.value.type&&null!==(t=d.value.format)&&void 0!==t&&t.form_block_pointer&&s.push({pointer:d.value.format.form_block_pointer,parentId:d.value.id});null!==(n=d.value.format)&&void 0!==n&&n.dashboard_layout_pointer&&s.push({pointer:d.value.format.dashboard_layout_pointer,parentId:d.value.id});i.setValue(o,d.value)}({pointer:t,recordMap:n,inMemoryRecordCache:c,currentUserId:S,cursors:k,cursor:w,options:I}):(0,d().Yt)(t,u().yB)?C=function(e){const{pointer:t,recordMap:n,inMemoryRecordCache:o,currentUserId:i,cursors:r,cursor:a,options:s}=e,l=o.getRecord({pointer:t,userId:i});if(null==l||!l.value)return s.requireFullSubtree?{type:"error",reason:"missing_record",pointer:t}:void 0;if(l.value.parent_id!==a.parentId)return;n.setValue(t,l.value);for(const c of l.value.action_ids??[])r.push({pointer:{table:p().SC,id:c,spaceId:l.value.space_id},parentId:l.value.id})}({pointer:t,recordMap:n,inMemoryRecordCache:c,currentUserId:S,cursors:k,cursor:w,options:I}):(0,d().Yt)(t,p().SC)?C=function(e){const{pointer:t,recordMap:n,inMemoryRecordCache:o,currentUserId:i,cursors:r,cursor:a,options:s}=e,l=o.getRecord({pointer:t,userId:i});if(null==l||!l.value)return s.requireFullSubtree?{type:"error",reason:"missing_record",pointer:a.pointer}:void 0;if(l.value.parent_id!==a.parentId)return;n.setValue(t,l.value);for(const c of l.value.blocks??[])r.push({pointer:{table:m().ev,id:c,spaceId:l.value.space_id},parentId:l.value.id})}({pointer:t,recordMap:n,inMemoryRecordCache:c,currentUserId:S,cursors:k,cursor:w,options:I}):(0,d().Yt)(t,v().C0)?C=function(e){const{pointer:t,recordMap:n,inMemoryRecordCache:o,currentUserId:i,cursor:r,options:a}=e,s=o.getRecord({pointer:t,userId:i});if(null==s||!s.value)return a.requireFullSubtree?{type:"error",reason:"missing_record",pointer:r.pointer}:void 0;if(s.value.parent_id!==r.parentId)return;n.setValue(t,s.value)}({pointer:t,recordMap:n,inMemoryRecordCache:c,currentUserId:S,cursor:w,options:I}):(0,d().Yt)(t,y().zx)?C=function(e){const{pointer:t,recordMap:n,inMemoryRecordCache:o,currentUserId:i,cursors:r,options:a}=e,c=o.getRecord({pointer:t,userId:i}),d=null==c?void 0:c.value;if(!d)return a.requireFullSubtree?{type:"error",reason:"missing_record",pointer:t}:void 0;n.setValue(t,d);const u=s().Bj6.fromValue(y().zx,d);for(const s of u.getBlockChildrenPointers())r.push({pointer:s,parentId:t.id});const p=e=>{const n={id:e.collection_view_id,table:g().Gy,spaceId:d.space_id};return r.push({pointer:n,parentId:t.id}),e};(0,l().E)(d.modules,(e=>{if("formQuestion"===e.type){const n={id:e.formQuestionId,table:h().lo,spaceId:d.space_id};r.push({pointer:n,parentId:t.id})}else if("view"===e.type)p(e);else if("row"===e.type)for(const t of e.modules)"view"===t.type&&p(t)}))}({pointer:t,recordMap:n,inMemoryRecordCache:c,currentUserId:S,cursors:k,cursor:w,options:I}):(0,d().Yt)(t,h().lo)&&(C=function(e){const{pointer:t,recordMap:n,inMemoryRecordCache:o,currentUserId:i,options:r}=e,a=o.getRecord({pointer:t,userId:i});if(null==a||!a.value)return r.requireFullSubtree?{type:"error",reason:"missing_record",pointer:t}:void 0;n.setValue(t,a.value)}({pointer:t,recordMap:n,inMemoryRecordCache:c,currentUserId:S,cursors:k,cursor:w,options:I})),C}},70899:(e,t,n)=>{n.d(t,{U:()=>i});n(296540);const o={viewBox:"0 0 16 16",fittedViewBox:"1.87 1.87 12.25 12.26",svg:(0,n(474848).jsx)("path",{d:"M11.904 3.28a6.125 6.125 0 1 0-1.648 10.415.625.625 0 1 0-.46-1.163 4.875 4.875 0 1 1 2.808-2.93c-.102.294-.43.523-.878.523a.87.87 0 0 1-.872-.872V5.705a.625.625 0 0 0-1.242-.098 3.04 3.04 0 0 0-1.746-.527c-.792 0-1.542.277-2.095.825-.557.55-.871 1.332-.871 2.256s.313 1.714.864 2.276 1.3.858 2.102.858c.8 0 1.55-.294 2.104-.85a2.12 2.12 0 0 0 1.756.93c.835 0 1.738-.441 2.058-1.361a6.125 6.125 0 0 0-1.88-6.734M6.65 6.793c.294-.29.715-.463 1.216-.463.5 0 .929.173 1.228.466.296.289.508.735.508 1.365 0 .631-.213 1.095-.515 1.4-.303.306-.73.484-1.221.484-.49 0-.91-.178-1.209-.482-.296-.303-.507-.767-.507-1.402 0-.633.21-1.08.5-1.368"})},i=(0,n(340498).wt)("atSmall",o,"small")},72307:(e,t,n)=>{n.d(t,{A:()=>o});const o={appCursorListener:{sidebar:1,secondarySidebar:2,editor:3,aiChat:3,marketplace:3,teamHome:3,aiChatSidebar:4}}},77279:(e,t,n)=>{n.r(t),n.d(t,{default:()=>i});class o extends(()=>n(757695))().Store{getInitialState(){return{discussionIdToExpansionStartPointMap:{}}}}const i=new o},79877:(e,t,n)=>{n.d(t,{A:()=>d});var o=n(296540),i=()=>n(597777),r=()=>n(869190),a=()=>n(604995),s=()=>n(416504),l=()=>n(100622),c=n(474848);const d=function(e){const t=(0,n(69708).tz)(),d=(0,n(396182).I)(),m=(0,o.useRef)(),f=(0,o.useCallback)((()=>{const t=e.value;if(!t)return;const o=a().q8(t,(0,s().P)());if(!o)return;const i=o.valueOf(),r=i-Date.now();r<0||r>n(720665).nD||m.current&&m.current.timestamp===i||(m.current&&clearTimeout(m.current.timer),m.current={timestamp:i,timer:setTimeout((()=>d("DateBox","DateBox/createReminderTimer")),r)})}),[d,e.value]),g=(0,o.useCallback)((()=>{m.current&&(clearTimeout(m.current.timer),m.current=void 0)}),[]);(0,o.useEffect)((()=>{f()}),[f]),(0,o.useEffect)((()=>()=>{g()}),[g]);const{value:h,withComma:y}=e,v=(0,n(590526).K8)((()=>h?(0,r().ZF)({value:h,date_format:e.dateFormat,time_format:e.timeFormat,userTimeZone:(0,s().P)(),allowRelativeDates:!0,intl:t,shortenDateAndRange:e.shortenDateAndRange,displayInUserTimezone:e.displayInUserTimezone,getToday:n(847109).x1}):void 0),[t,e.dateFormat,e.displayInUserTimezone,e.shortenDateAndRange,e.timeFormat,h]);if(!h)return null;const b=a().AA(h,(0,s().P)(),n(609679).locale);let x;if((0,i().Lh)(h)){const e=a().Zs(h,(0,s().P)());x=e?{color:l().Tj.red.text.accentPrimary}:{color:l().oZ.blue}}const S=(0,c.jsxs)(c.Fragment,{children:[v,(0,i().Lh)(h)?(0,c.jsx)(n(807449).I,{icon:n(472219).alarmSmallIcon,style:{display:"inline-block",width:"1.2em",marginInlineStart:5,marginInlineEnd:2,paddingBottom:3,verticalAlign:"middle"}}):void 0,y?", ":null]});return e.disableTooltip?(0,c.jsx)("div",{className:e.className,style:{...e.style,...x},children:S}):(0,c.jsx)(n(26697).m,{renderTooltip:()=>(0,c.jsxs)(c.Fragment,{children:[e.tooltipHeader,(0,c.jsxs)("div",{style:p(e.tooltipHeader),children:[u(b.start),b.end?` → ${u(b.end)}`:""]})]}),render:t=>(0,c.jsx)("div",{className:e.className,style:{...e.style,...x},...t,children:S}),placement:e.tooltipPlacement})};function u(e){return(0,r().eV)({value:e,preset:"medium"})}function p(e){return e?{color:l().Tj.text.inverseSecondary}:{}}},89956:(e,t,n)=>{n.d(t,{p:()=>i});n(296540);const o={viewBox:"0 0 16 16",fittedViewBox:"2.46 2.46 11.08 11.08",svg:(0,n(474848).jsx)("path",{d:"M3.088 2.463a.625.625 0 0 0-.625.625v4a.625.625 0 1 0 1.25 0V4.597l3.045 3.045a.625.625 0 0 0 .884-.884L4.597 3.713h2.49a.625.625 0 1 0 0-1.25zM9.244 8.36a.625.625 0 0 0-.883.884l3.042 3.043H8.912a.625.625 0 1 0 0 1.25h4c.345 0 .625-.28.625-.625v-4a.625.625 0 0 0-1.25 0v2.491z"})},i=(0,n(340498).wt)("arrowExpandDiagonalSmall",o,"small")},97059:(e,t,n)=>{n.d(t,{s:()=>i});n(296540);const o={viewBox:"0 0 16 16",fittedViewBox:"1.82 1.82 12.68 12.68",svg:(0,n(474848).jsx)("path",{d:"M8 1.825a.575.575 0 0 0-.575.575V4a.575.575 0 0 0 1.15 0V2.4A.575.575 0 0 0 8 1.825m4.367 1.809a.575.575 0 0 0-.814 0l-1.131 1.131a.575.575 0 1 0 .813.813l1.132-1.131a.575.575 0 0 0 0-.813m-7.92 0a.575.575 0 0 0-.813.813l1.13 1.131a.575.575 0 1 0 .814-.813zm3.248 3.071a.7.7 0 1 0-.99.99l.77.77.99-.99zm4.305.72a.575.575 0 0 0 0 1.15h1.6a.575.575 0 1 0 0-1.15zm-9.6 0a.575.575 0 1 0 0 1.15H4a.575.575 0 0 0 0-1.15zm11.895 5.88-5.37-5.37-.99.99 5.37 5.37a.7.7 0 0 0 .99-.99m-8.717-2.883a.575.575 0 0 0-.813 0l-1.131 1.131a.575.575 0 1 0 .813.813l1.131-1.131a.575.575 0 0 0 0-.813M8 11.425a.575.575 0 0 0-.575.575v1.6a.575.575 0 1 0 1.15 0V12A.575.575 0 0 0 8 11.425"})},i=(0,n(340498).wt)("magicWandSmall",o,"small")},101749:(e,t,n)=>{n.d(t,{N:()=>a});n(296540);var o=()=>n(69708),i=()=>n(423657),r=n(474848);function a(e){const t=(0,i().A)(e);return t.isGuestRequestRequired?(0,r.jsx)(o().sA,{id:"contextualInvite.buttonAndTokenTooltip.guestRequestRequired",defaultMessage:"This guest must be approved by a workspace owner first"}):t.isStoreInTeam?t.teamAllowsGuests?void 0:(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("div",{children:(0,r.jsx)(o().sA,{id:"contextualInvite.buttonAndTokenTooltip.teamDisablesGuestsAlertLine1",defaultMessage:"This teamspace doesn’t allow guests."})}),(0,r.jsx)("div",{children:(0,r.jsx)(o().sA,{id:"contextualInvite.buttonAndTokenTooltip.teamDisablesGuestsAlertLine2",defaultMessage:"Remove any guests to continue."})})]}):t.spaceAllowsGuests?void 0:(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("div",{children:(0,r.jsx)(o().sA,{id:"contextualInvite.buttonAndTokenTooltip.spaceDisablesGuestsAlertLine1",defaultMessage:"This workspace doesn’t allow guests."})}),(0,r.jsx)("div",{children:(0,r.jsx)(o().sA,{id:"contextualInvite.buttonAndTokenTooltip.spaceDisablesGuestsAlertLine2",defaultMessage:"Remove any guests to continue."})})]})}},123350:(e,t,n)=>{n.r(t),n.d(t,{RequestMembersModal:()=>_,default:()=>j,messages:()=>M});var o=n(296540),i=()=>n(717137),r=()=>n(484714),a=()=>n(590526),s=()=>n(401497),l=()=>n(128933),c=()=>n(127833),d=()=>n(31511),u=()=>n(546926),p=()=>n(160432),m=()=>n(302501),f=()=>n(890492),g=()=>n(69708),h=()=>n(100622),y=()=>n(284371),v=()=>n(134696),b=()=>n(542056),x=()=>n(433876),S=()=>n(654856),k=()=>n(897537),w=()=>n(495867),I=()=>n(130651),A=()=>n(346527),C=()=>n(651106),T=n(474848);const M=(0,g().YK)({reason_placeholder:{id:"RequestMembersModal.reason.placeholder",defaultMessage:"Add a reason (optional)"}});function _(e){const t=(0,r().v3)(),{spaceStore:n,origin:_,analyticsFrom:j}=e,{modalOpen:B,focus:R}=(0,a().K8)((()=>{const{open:e,focus:t}=A().A.state;return{modalOpen:e,focus:t}}),[]),E=(0,o.useCallback)((e=>{B&&A().A.setState({...A().A.state,open:!0,focus:e})}),[B]),P=(0,a().uB)(void 0,C().A),D=(0,g().tz)(),O=(0,s().IS)((()=>({modalStyle:{alignSelf:"center",overflow:"visible",top:0,width:420},container:{padding:20},title:{fontWeight:y().Wy.medium,marginBottom:10},reasonTitle:{color:h().oZ.mediumTextColor,marginTop:10,marginBottom:5},footer:{display:"flex",justifyContent:"space-between",alignItems:"center",marginTop:15},requestInvitesButton:{marginInlineStart:20},divider:{width:"100%",marginTop:10,marginBottom:15},showDivider:{background:h().Tj.border.secondaryTranslucent,boxShadow:h().Tj.shadowLG},hideDivider:{boxShadow:"none"}})),[]);(0,o.useEffect)((()=>{E("invites")}),[E]);const z=e=>{e.currentTarget===e.target&&E("none")},V=async()=>{v().RH(t,{...w().nE(t,P.state.contextualInviteStore),from:j}),b().KW({permissionsInviteStore:P.state.permissionsInviteStore,contextualInviteStore:P.state.contextualInviteStore}),P.state.contextualInviteStore.startRequestMembership();const e=P.state.contextualInviteStore.state.invitedUsers;A().A.close();const o=await w().xi({environment:t,spaceStore:n,originId:void 0,originType:j,reasonMessage:P.state.permissionsInviteStore.state.emailMessage,contextualInviteStore:P.state.contextualInviteStore,intl:D});N({success:o,intl:D,users:e}),P.reset()},N=e=>{const{success:t,intl:n,users:o}=e;0!==o.length&&(t?l().D6({label:n.formatMessage({id:"requestMembersModal.requestSuccess.toast",defaultMessage:"Successfully requested membership for {users} to your workspace admins."},{users:w().id(o,n)})}):l().D6({label:n.formatMessage({id:"requestMembersModal.requestFail.toast",defaultMessage:"Failed to invite {users} to the workspace."},{users:w().id(o,n)})}))};return(0,T.jsx)(x().A,{modalStyle:O.modalStyle,open:B,onDismiss:async()=>{if(!(await(0,I().iQ)({environment:t,spaceStore:n,permissionsInviteStoreState:P.state.permissionsInviteStore.state,from:"space_settings_add_members"})))return A().A.close(),void P.reset();E("none")},renderContent:()=>(0,T.jsxs)("div",{style:O.container,onClick:z,children:[(0,T.jsx)("div",{style:O.title,onClick:z,children:(0,T.jsx)(g().sA,{id:"requestMembersModal.title",defaultMessage:"Request to invite members"})}),(0,T.jsx)(c().zD,{popupType:c().nl.Popup,alignmentToOrigin:"start",placementToOrigin:"bottom",open:"invites"===R,sameWidthAsOrigin:!0,originGap:10,trapFocus:!0,disableMouseCapture:!0,popupWrapStyle:{boxShadow:"none"},origin:(0,T.jsx)(S().A,{permissionsInviteStore:P.state.permissionsInviteStore,store:n,handleClickRemoveToken:e=>{b().St({targetToRemove:e,permissionsInviteStore:P.state.permissionsInviteStore})},handleInputChange:async e=>{E("invites"),await b().Pp({environment:t,event:e,permissionsInviteStore:P.state.permissionsInviteStore})},handleInputSubmit:async()=>{},origin:"add_members",right:(0,T.jsx)("div",{}),focus:"invites"===R,handleFocus:()=>E("invites")}),onDismiss:()=>E("none"),render:()=>{const e=(0,T.jsx)(k().A,{permissionsInviteStore:P.state.permissionsInviteStore,store:n,shouldShowGroups:!1,sectionRenderLimit:10,membersOnly:!1}),t={menuType:u().gu.Popup,disableScroller:!1};return(0,T.jsx)("div",{children:(0,T.jsx)(f().A,{...t,width:380,children:e})})},style:{width:"100%"}}),(0,T.jsx)("div",{style:{...O.divider,..."invites"===R?O.showDivider:O.hideDivider}}),(0,T.jsx)("div",{style:O.reasonTitle,onClick:z,children:(0,T.jsx)(g().sA,{id:"requestMembersModal.reasonForRequest.title",defaultMessage:"Reason for request"})}),(0,T.jsx)(i().A,{debugName:"RequestMembersModal",capture:!0,allowEsc:!0,children:(0,T.jsx)(d().A,{textarea:!0,style:{padding:8},value:P.state.permissionsInviteStore.state.emailMessage,focus:"reason"===R,onFocus:()=>E("reason"),onChange:e=>{P.state.permissionsInviteStore.setState({...P.state.permissionsInviteStore.state,emailMessage:e.target.value})},placeholder:D.formatMessage(M.reason_placeholder)})}),(0,T.jsxs)("div",{style:O.footer,onClick:z,children:[(0,T.jsx)(m().A,{isSecondaryColor:!0,isSmall:!0,isMultiline:!0,children:(0,T.jsx)(g().sA,{id:"RequestMembersModal.caption",defaultMessage:"Your admins will approve or decline your request."})}),(0,T.jsx)(p().A,{colorPalette:"blue",size:"lg",style:O.requestInvitesButton,onClick:V,children:(0,T.jsx)(g().sA,{id:"requestMembersModal.requestInvitesButton.label",defaultMessage:"Request invites"})})]})]}),origin:(0,T.jsx)("div",{onClick:()=>{A().A.open()},children:_})})}const j=_},129852:(e,t,n)=>{n.r(t),n.d(t,{exclamationMarkCircleIcon:()=>r,iconDefinition:()=>i});n(296540);var o=n(474848);const i={viewBox:"0 0 20 20",fittedViewBox:"2.37 2.37 15.26 15.25",svg:(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)("path",{d:"M9.875 6.25c.345 0 .625.28.625.625v3.5a.625.625 0 1 1-1.25 0v-3.5c0-.345.28-.625.625-.625m0 7.375a.75.75 0 1 0 0-1.5.75.75 0 0 0 0 1.5"}),(0,o.jsx)("path",{d:"M2.375 10a7.625 7.625 0 1 1 15.25 0 7.625 7.625 0 0 1-15.25 0M10 3.625a6.375 6.375 0 1 0 0 12.75 6.375 6.375 0 0 0 0-12.75"})]})},r=(0,n(340498).wt)("exclamationMarkCircle",i,"default")},159958:(e,t,n)=>{n.d(t,{Hn:()=>N,XN:()=>V,pj:()=>P,qj:()=>F});n(16280),n(944114),n(898992),n(354520),n(672577),n(581454),n(737550);var o=n(296540),i=()=>n(300474),r=()=>n(726637),a=()=>n(484714),s=()=>n(590526),l=()=>n(401497),c=()=>n(991003),d=()=>n(365917),u=()=>n(807449),p=()=>n(98126),m=()=>n(26697),f=()=>n(81068),g=()=>n(736847),h=()=>n(148307),y=()=>n(617871),v=()=>n(70899),b=()=>n(642557),x=()=>n(344417),S=()=>n(32527),k=()=>n(69708),w=()=>n(100622),I=()=>n(973647),A=()=>n(534177),C=()=>n(753812),T=()=>n(457583),M=()=>n(419357),_=()=>n(976792),j=()=>n(747938),B=()=>n(162969),R=n(474848);const E=(0,k().YK)({channelSearchPlaceholder:{id:"notificationRuleSettings.selectChannelView.searchInput.placeholder",defaultMessage:"Search…"}});function P(e){const{currentNotificationChannels:t,onNotificationChannelSelect:n,onNotificationChannelSelectAll:v,onClose:b,onNewSlackAccountAdded:S,renderMenu:C,channelFilter:B,workflowExternalScopedConnectionPointer:P,isMultiSelectMode:z,shouldHideSlackAccountSection:F,shouldShowSelectAllChannels:L,isAllChannels:U,shouldShowImChannels:W,onClearSelection:H,shouldHideSelectedChannels:K=!1,searchPlaceholder:G=E.channelSearchPlaceholder,shouldShowTooltipsOnChannelNames:q=!1,shouldShowFixedSearch:$=!1,moduleId:Y,workflowId:Q}=e,Z=(0,a().v3)(),X=(0,k().tz)(),J=(0,s().O$)(d().A.completeSlackAuthentications),ee=e.currentExternalAuthentication??J[0],te=(0,o.useMemo)((()=>P?(0,_().zz)(P):ee?{type:"external",botId:ee.id}:void 0),[P,ee]);o.useEffect((()=>{const e=P?null==P?void 0:P.spaceId:null==ee?void 0:ee.space_id;te&&e&&N({environment:Z,spaceId:e,externalAuthConfig:te,moduleId:Y,workflowId:Q})}),[Z,te,ee,P,Y,Q]);const ne=(null==P?void 0:P.id)??(null==ee?void 0:ee.id),[oe,ie]=o.useState(""),{loadedChannelsForAccount:re,isLoading:ae}=V(te),se=(0,s().K8)((()=>d().A.integrations.state.find((e=>e.id===y().zG))),[]),le=(0,i().r)(),ce=o.useCallback((e=>{ee?n(e,ee.parent_id):P&&n(e,P.id),z||b()}),[n,ee,P,b,z]),de=o.useCallback((()=>{const e=ee?ee.parent_id:null==P?void 0:P.id;e&&v&&v(e),z&&L||b()}),[ee,P,z,L,v,b]),ue=(0,l().IS)((()=>({icon:{marginInlineStart:8,width:12,height:12,color:w().Tj.text.tertiary},container:{backgroundColor:w().Tj.popoverBackground,marginTop:12,marginBottom:6},searchIcon:{width:14,height:14,marginInlineEnd:6,flexGrow:0,flexShrink:0,color:w().Tj.icon.primary},fixedSearchInput:{paddingBlock:4,borderBottom:`1px solid ${w().Tj.border.secondary}`}})),[]),pe=o.useCallback((e=>{const{channel:n}=e,o=!U&&(null==t?void 0:t.some((e=>e.id===n.id)));if(!o||!K)return{key:n.id,render:e=>(0,R.jsx)(m().m,{renderTooltip:()=>n.name,disableTooltip:!q,alignment:"center",placement:"right",render:t=>(0,R.jsx)(f().A,{...e,...t,icon:(0,R.jsx)(u().I,{icon:O({channel:n}),colorVariant:"tertiary",size:"sm"}),desktopIconStyle:{width:8},title:n.name,isChecked:o})}),action:()=>{ce(n)}}}),[U,t,ce,K,q]),{publicChannels:me,privateChannels:fe,personalChannels:ge,imChannels:he}=o.useMemo((()=>function(e,t){const n=[],o=[],i=[],r=[];e.sort(((e,t)=>e.name.localeCompare(t.name)));for(const a of e)t&&!t(a)||("public"===a.type?n.push(a):"private"===a.type?o.push(a):"me"===a.type?i.push(a):"im"===a.type?r.push(a):(0,A().HB)(a.type));return{publicChannels:n,privateChannels:o,personalChannels:i,imChannels:r}}(re,B)),[B,re]),ye=o.useCallback((()=>me.map((e=>({menuListItem:pe({channel:e}),channelName:e.name}))).filter(A().O9)),[me,pe]),ve=o.useCallback((()=>fe.map((e=>({menuListItem:pe({channel:e}),channelName:e.name}))).filter(A().O9)),[fe,pe]),be=o.useCallback((()=>ge.map((e=>({menuListItem:pe({channel:e}),channelName:e.name}))).filter(A().O9)),[ge,pe]),xe=o.useCallback((()=>he.map((e=>({menuListItem:pe({channel:e}),channelName:e.name}))).filter(A().O9)),[he,pe]),Se=o.useCallback((()=>ye().map((({menuListItem:e,channelName:t})=>{if(D({channelName:t,query:oe}))return e})).filter(A().O9)),[ye,oe]),ke=o.useCallback((()=>ve().map((({menuListItem:e,channelName:t})=>{if(D({channelName:t,query:oe}))return e})).filter(A().O9)),[ve,oe]),we=o.useCallback((()=>be().map((({menuListItem:e,channelName:t})=>{if(D({channelName:t,query:oe}))return e})).filter(A().O9)),[be,oe]),Ie=o.useCallback((()=>xe().map((({menuListItem:e,channelName:t})=>{if(D({channelName:t,query:oe}))return e})).filter(A().O9)),[xe,oe]),Ae=o.useCallback((()=>ee?(0,j().qO)(ee).organizationName:"Workflows organization"),[ee]),Ce=o.useCallback((()=>{if(!ne)return[];const e=[],n=Se(),o=ke(),i=we(),r=Ie(),a=L&&z&&!oe,s=Boolean(H&&!oe&&((null==t?void 0:t.length)||U));return s&&H&&e.push({key:"clear-selection-section",render:e=>(0,R.jsx)(g().A,{...e}),items:[{key:"clear-selection",render:e=>(0,R.jsx)(f().A,{...e,title:(0,R.jsx)(k().sA,{id:"workflows.slack.clearSelection",defaultMessage:"Clear selection"}),isChecked:!1}),action:()=>H()}]}),a&&e.push({key:"select-all-channels",render:e=>(0,R.jsx)(g().A,{...e}),items:[{key:"all-channels",render:e=>(0,R.jsx)(f().A,{...e,title:(0,R.jsx)(k().sA,{id:"notificationRuleSettings.selectChannelView.selectAllChannels.label",defaultMessage:"All channels"}),isChecked:U}),action:de}]}),i.length>0&&e.push({key:"personal-channels",render:e=>(0,R.jsx)(g().A,{...e,title:Ae(),topBorder:a||s}),items:i}),n.length>0&&e.push({key:"public-channels",render:e=>(0,R.jsx)(g().A,{...e,topBorder:i.length>0||a||s,title:0===i.length&&Ae()}),items:n}),o.length>0&&e.push({key:"private-channels",render:e=>(0,R.jsx)(g().A,{...e,topBorder:n.length>0||a||s,title:0===i.length&&n.length>0&&Ae()}),items:o}),W&&r.length>0&&e.push({key:"im-channels",render:e=>(0,R.jsx)(g().A,{...e,title:(0,R.jsx)(k().sA,{defaultMessage:"Direct Messages with Notion",id:"imChannels.title"})}),items:r}),e}),[ne,Se,ke,we,Ie,L,z,oe,H,null==t?void 0:t.length,U,W,de,Ae]),Te=(0,c().A)(ae,500,300);if(!ne)return null;const Me=[];return $||Me.push({key:"search-input-section",items:[{key:"search-input-item",action:()=>{},render:e=>(0,R.jsx)("div",{children:(0,R.jsx)(M().Ay,{...e,inputLeft:(0,R.jsx)(M().Zf,{icon:x().magnifyingGlassSmallIcon}),inputRight:Te&&(0,R.jsx)(p().A,{style:{marginInlineEnd:2}}),showClearButton:!0,placeholder:X.formatMessage(G),focusInitial:!r().A.isMobile,value:oe,onChange:e=>{ie(e.target.value)}})})}],render:e=>(0,R.jsx)(g().A,{...e})}),Me.push(...Ce()),t||F||!se||Me.push({key:"add-another-slack-account-section",items:[{key:"add-another-slack-account-item",action:async()=>{if(!le)return;const e=await T().Jq({environment:Z,integration:se,spaceId:le,from:"collection_view_settings"});I().Q.isFail(e)||S()},render:e=>(0,R.jsx)(f().A,{...e,icon:(0,R.jsx)("img",{src:h().A.images.externalIntegrations.slackIconPng,style:{width:18,height:"auto"}}),title:(0,R.jsx)(k().sA,{id:"notificationRuleSettings.selectChannelView.setupAnotherSlackAccount.label",defaultMessage:"Add another Slack account"})})}],render:e=>(0,R.jsx)(g().A,{...e,topBorder:!0})}),(0,R.jsxs)(R.Fragment,{children:[$?(0,R.jsx)("div",{style:ue.fixedSearchInput,children:(0,R.jsx)(M().Ay,{...e,inputLeft:(0,R.jsx)(M().Zf,{icon:x().magnifyingGlassSmallIcon}),inputRight:Te&&(0,R.jsx)(p().A,{style:{marginInlineEnd:2}}),showClearButton:!0,placeholder:X.formatMessage(G),focusInitial:!r().A.isMobile,value:oe,onChange:e=>{ie(e.target.value)}})}):void 0,C(Me)]})}function D(e){const{channelName:t,query:n}=e;return 0===n.length||t.toLocaleLowerCase().indexOf(n.trim().toLocaleLowerCase())>=0}function O(e){const{channel:t}=e;return"private"===t.type?b().lockSmallIcon:"me"===t.type||"im"===t.type?v().U:S().E}const z=15e3;function V(e){const t=(0,s().K8)((()=>{if(e)return B().c.getStateForBot(e)}),[e],{useDeepEqual:!0});return{loadedChannelsForAccount:(0,o.useMemo)((()=>null!=t&&t.channels?Object.values(t.channels):[]),[null==t?void 0:t.channels]),isLoading:(null==t?void 0:t.fetching)??!1}}async function N(e){const{environment:t,externalAuthConfig:n,spaceId:o,moduleId:i,workflowId:r}=e,a=B().c.getStateForBot(n);if(!(a.fetching||Date.now()-a.lastRefreshed<z)){if(B().c.updateStateForBot(n,{fetching:!0,lastRefreshed:Date.now(),failed:!1}),"workflow"===n.type&&i&&r){const e=await C().callApi({eventName:"getViaWorkflowModuleConfigurationUtil",environment:t,data:{workflowId:r,moduleId:i,spaceId:o,moduleType:"slack",callArguments:{functionName:"getExistingSlackChannels",functionArgs:[]}}});if("success"===e.type){if("getExistingSlackChannels"!==e.data.functionName)throw new Error("Invalid function name");B().c.addChannelsForBot(n,e.data.functionReturn)}else B().c.updateStateForBot(n,{failed:!0})}else{let e;for(;;){const i=await C().callApi({eventName:"getExternalNotificationChannels",environment:t,data:{spaceId:o,cursor:e,...n}});if("success"!==i.type){B().c.updateStateForBot(n,{failed:!0}),console.error(i.error);break}{const t={};for(const e of i.data.channels)t[e.id]=e;if(B().c.addChannelsForBot(n,t),e=i.data.cursor,!e)break}await new Promise((e=>setTimeout(e,0)))}}B().c.updateStateForBot(n,{fetching:!1})}}const F=o.forwardRef(((e,t)=>{const{channel:n,currentNotificationChannels:o,...i}=e;return(0,R.jsx)(f().A,{ref:t,...i,icon:(0,R.jsx)(u().I,{icon:O({channel:n}),colorVariant:"tertiary",size:"sm"}),desktopIconStyle:{width:8},title:n.name,isChecked:null==o?void 0:o.some((e=>e.id===n.id))})}));F.displayName="SlackChannelMenuItem"},162969:(e,t,n)=>{n.d(t,{c:()=>a,m:()=>i});function o(e){switch(e.type){case"external":return`external-${e.botId}`;case"workflow":return`workflow-${e.workflowExternalScopedConnectionId}`;case"workflowExternal":return`workflowExternal-${e.externalConnectionId}`;case"universal":return`universal-${e.app}-${e.spaceId}`;default:throw(0,n(534177).HB)(e)}}const i={channels:{},fetching:!1,lastRefreshed:0,failed:!1};class r extends(()=>n(757695))().Store{getStateForBot(e){const t=o(e);return this.state[t]??i}updateStateForBot(e,t){this.setState({...this.state,[o(e)]:{...this.getStateForBot(e),...t}})}addChannelsForBot(e,t){const n=this.getStateForBot(e);this.setState({...this.state,[o(e)]:{...n,channels:{...n.channels,...t}}})}}const a=new r;(0,n(852832).exposeDebugValue)("ExternalNotificationChannelsStore",a)},170350:(e,t,n)=>{n.r(t),n.d(t,{filterIcon:()=>i,iconDefinition:()=>o});n(296540);const o={viewBox:"0 0 20 20",fittedViewBox:"2.37 4.87 15.25 10.25",svg:(0,n(474848).jsx)("path",{d:"M3 4.875a.625.625 0 1 0 0 1.25h14a.625.625 0 1 0 0-1.25zm2.125 5.742h9.75a.625.625 0 1 0 0-1.25h-9.75a.625.625 0 1 0 0 1.25m1.5 3.883c0-.345.28-.625.625-.625h5.5a.625.625 0 1 1 0 1.25h-5.5a.625.625 0 0 1-.625-.625"})},i=(0,n(340498).wt)("filter",o,"default")},173783:(e,t,n)=>{n.d(t,{A:()=>s});n(296540);var o=()=>n(807449),i=()=>n(888867),r=()=>n(497577),a=n(474848);function s(e){const t=(0,r().E)(e);return(0,a.jsx)("div",{style:t.iconContainer,children:(0,a.jsx)(o().I,{icon:i().s,size:t.icon.width,colorVariant:"secondary"})})}},175882:(e,t,n)=>{n.r(t),n.d(t,{exclamationMarkTriangleSmallIcon:()=>r,iconDefinition:()=>i});n(296540);var o=n(474848);const i={viewBox:"0 0 16 16",fittedViewBox:"1.49 1.87 13.01 11.75",svg:(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)("path",{d:"M7.9 5.281a.625.625 0 0 0-.625.625v2.5a.625.625 0 0 0 1.25 0v-2.5a.625.625 0 0 0-.625-.625m0 4.7a.725.725 0 1 0 0 1.45.725.725 0 0 0 0-1.45"}),(0,o.jsx)("path",{d:"M9.58 2.788c-.702-1.217-2.458-1.217-3.16 0l-4.677 8.1c-.702 1.216.176 2.737 1.58 2.737h9.354c1.405 0 2.283-1.52 1.58-2.738zm-2.078.625a.575.575 0 0 1 .996 0l4.677 8.1a.575.575 0 0 1-.498.862H3.324a.575.575 0 0 1-.498-.863z"})]})},r=(0,n(340498).wt)("exclamationMarkTriangleSmall",i,"small")},200562:(e,t,n)=>{n.d(t,{z:()=>r});var o=()=>n(79926);const i=new(o().O2)("topbarSidebarButton",(async()=>await n.e(62033).then(n.bind(n,81292)))),r=(0,o()._h)(i,(e=>e.TopbarSidebarButton))},208993:(e,t,n)=>{n.d(t,{W:()=>u});n(296540);var o=()=>n(401497),i=()=>n(699143),r=()=>n(718827),a=()=>n(265060),s=()=>n(493552),l=()=>n(26697),c=()=>n(846523),d=n(474848);function u({tooltipTitle:e,tooltipDescription:t,buttonProps:n,iconSize:o="small",iconColorVariant:r="tertiary",tooltipWidth:u,forceVisibleState:m=!1}){return(0,d.jsx)(l().m,{placement:"top",forceVisibleState:m,style:u?{width:u}:void 0,renderTooltip:()=>(0,d.jsxs)(i().Y1,{gap:2,direction:"vertical",children:[(0,d.jsx)(s().D,{styleKey:"captionMedium",colorVariant:"inversePrimary",children:e}),t?(0,d.jsx)(s().D,{styleKey:"captionRegular",colorVariant:"inverseSecondary",children:t}):null]}),render:e=>(0,d.jsx)(p,{buttonProps:n,...e,children:(0,d.jsx)(a().Q,{iconGroup:c().u,colorVariant:r,variantName:o})}),textWrap:Boolean(u)})}function p({children:e,buttonProps:t,...n}){const i=(0,o().IS)((()=>({button:{borderRadius:2}})),[]);return t?(0,d.jsx)(r().Ay,{style:i.button,...t,...n,children:e}):(0,d.jsx)("span",{...n,children:e})}},212473:(e,t,n)=>{n.r(t),n.d(t,{arrowUpRightSquareIcon:()=>r,iconDefinition:()=>i});n(296540);var o=n(474848);const i={viewBox:"0 0 20 20",fittedViewBox:"3.12 3.12 13.75 13.75",svg:(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)("path",{d:"M7.875 7c0-.345.28-.625.625-.625H13c.345 0 .625.28.625.625v4.5a.625.625 0 1 1-1.25 0V8.509l-5.12 5.12a.625.625 0 1 1-.884-.883l5.12-5.121H8.5A.625.625 0 0 1 7.875 7"}),(0,o.jsx)("path",{d:"M3.125 5.25c0-1.174.951-2.125 2.125-2.125h9.5c1.174 0 2.125.951 2.125 2.125v9.5a2.125 2.125 0 0 1-2.125 2.125h-9.5a2.125 2.125 0 0 1-2.125-2.125zm2.125-.875a.875.875 0 0 0-.875.875v9.5c0 .483.392.875.875.875h9.5a.875.875 0 0 0 .875-.875v-9.5a.875.875 0 0 0-.875-.875z"})]})},r=(0,n(340498).wt)("arrowUpRightSquare",i,"default")},224011:(e,t,n)=>{n.d(t,{A:()=>r});var o=()=>n(20022);class i extends(()=>n(757695))().Store{getInitialState(){return{isFullScreen:window.outerWidth===window.screen.width&&window.outerHeight===window.screen.height}}constructor(){super(),this.updateFromElectronState=async()=>{const e=await o().Y5.get();void 0!==e&&this.setState({isFullScreen:e})},o().Y5.addListener(this.updateFromElectronState),this.updateFromElectronState()}}const r=new i},224682:(e,t,n)=>{n.d(t,{m:()=>i});class o extends(()=>n(757695))().Store{getInitialState(){return{type:"uninitialized"}}isWriting(){return"filling"===this.state.type&&!this.state.haveAllBlocksCompletedAutofill&&!this.state.didInterruptStreaming}setIsWriting(e){const{propertySchema:t,stores:o,sessionIdForAnalytics:i,collectionId:r}=e,a=i||n(206267).JW();return this.setState({type:"filling",propertySchema:t,collectionId:r,numBlocksToAutofill:o.length,numBlocksAutofilled:0,sessionId:a,didInterruptStreaming:!1,haveAllBlocksCompletedAutofill:!1}),a}}const i=new o},229508:(e,t,n)=>{n.d(t,{a:()=>r});var o=()=>n(907258),i=()=>n(590526);function r(){return(0,i().O$)(o().AppStoreSidebarSpaceViewStore)}},241319:(e,t,n)=>{n.d(t,{y:()=>r});n(898992),n(672577);var o=()=>n(534177),i=()=>n(239381);function r(e){var t;const{actionModels:n,id:r}=e,a=(0,i().y5)(r),s="action"===a.source?n.find((e=>e.id===a.action_id)):void 0,l=(0,o().O9)(s)&&s.isType("create_page")?null===(t=s.getConfig())||void 0===t?void 0:t.collection:void 0;return{automationValueInfo:a,collectionPointer:l,actionModel:s}}},243331:(e,t,n)=>{n.d(t,{K_:()=>i,Lf:()=>a});var o=()=>n(206267);function i(){return{currentScreen:"none",status:"not_started",isBackendConnected:!1,externalSourceName:void 0,sessionId:o().JW(),analyticsFrom:"unknown",isConnected:!1,isPersonalAuthComplete:!1,isDisconnecting:!1,isLoaded:!1,isNotionMailProhibited:!1}}class r extends(()=>n(757695))().Store{getInitialState(){return i()}}const a=new r;(0,n(852832).exposeDebugValue)("notionMailAIConnectorStore",a)},246679:(e,t,n)=>{n.d(t,{VK:()=>i,gv:()=>a});var o=()=>n(206267);function i(){return{currentScreen:"none",status:"not_started",isBackendConnected:!1,externalSourceName:void 0,sessionId:o().JW(),analyticsFrom:"unknown",isConnected:!1,isPersonalAuthComplete:!1,isDisconnecting:!1,isLoaded:!1,isNotionCalendarProhibited:!1}}class r extends(()=>n(757695))().Store{getInitialState(){return i()}}const a=new r;(0,n(852832).exposeDebugValue)("notionCalendarAIConnectorStore",a)},255043:(e,t,n)=>{n.d(t,{O:()=>S,r:()=>k});n(898992),n(672577),n(581454);var o=n(296540),i=()=>n(401497),r=()=>n(249046),a=()=>n(250910),s=()=>n(807449),l=()=>n(546926),c=()=>n(631524),d=()=>n(302501),u=()=>n(890492),p=()=>n(81068),m=()=>n(663639),f=()=>n(736847),g=()=>n(324254),h=()=>n(676510),y=()=>n(534177),v=()=>n(608346),b=()=>n(419357),x=n(474848);function S(e){return(0,x.jsxs)(r().Ye,{alignItems:"center",style:{gap:4},children:[e.icon,(0,x.jsx)(d().A,{isSmall:e.isSmall,children:e.name})]})}function k(e){const{onSelectOption:t,options:n,currentOption:r,placeHolder:u,initialFocus:m,menuProps:f,iconOnly:v,inputProps:k,searchThreshold:I,selectorButtonStyle:A}=e,[C,T]=(0,o.useState)(""),M=n.find((({key:e})=>e===r)),_=(0,i().IS)((()=>({workspaceSelectorButton:{paddingTop:8,paddingBottom:8,paddingInlineStart:8,paddingInlineEnd:8,opacity:1,width:376,border:`1px solid ${h().$.light.gray[100]}`,justifyContent:"space-between",marginTop:8,marginBottom:8},teamspacePickerButton:{maxWidth:300},menuChevronDownIcon:{marginInlineStart:4}})),[]),j={..."workspace"===A?_.workspaceSelectorButton:{},..."teamspace"===A?_.teamspacePickerButton:{}};return(0,x.jsx)(a().A,{popupType:a().z.Popup,placementToOrigin:"bottom",alignmentToOrigin:e.alignmentToOrigin,originGap:4,renderOrigin:e=>(0,x.jsxs)(c().p,{...e,style:{color:r?void 0:h().$.light.gray[300],...j},children:[(0,x.jsx)(d().A,{style:{textOverflow:"ellipsis",fontSize:"14px",font:"SF Pro Text",color:r?void 0:"#ACABA9",lineHeight:"19.6px"},children:(v?null==M?void 0:M.icon:M&&(0,x.jsx)(S,{...M}))??u}),(0,x.jsx)(s().I,{icon:g().arrowChevronSingleDownSmallIcon,size:"xs",colorVariant:"secondary",style:_.menuChevronDownIcon})]}),render:e=>{const o=(0,x.jsx)(b().Ay,{style:{width:"100%",paddingTop:8,paddingBottom:2},onChange:e=>T(e.target.value),value:C,...k}),i={menuType:l().gu.Popup,width:376,left:50,header:(0,y().O9)(I)&&n.length>I?o:null,...f},a=n.map((({key:n,name:o,icon:i,searchTerm:a})=>({key:n,keywords:a??[],action:()=>{t(n),e.close()},render:e=>(0,x.jsx)(p().A,{...e,title:(0,x.jsx)(S,{name:o,icon:i}),shouldWrapCaption:!0,isChecked:r===n})})));return(0,x.jsx)(w,{menuOptions:i,menuItems:a,filterQuery:C,initialFocus:m})}})}function w({menuOptions:e,menuItems:t,filterQuery:n,initialFocus:o}){const i=(0,v().m)({sections:[{key:"dropdown.menuList",render:e=>(0,x.jsx)(f().A,{...e}),items:t}],filterQuery:n||void 0});return(0,x.jsx)(u().A,{...e,children:(0,x.jsx)(m().A,{type:m().O.Vertical,sections:i,initialFocus:o,style:{position:"relative",alignItems:"flex-end"}})})}},262661:(e,t,n)=>{n.d(t,{i:()=>i});var o=()=>n(130382);function i(e){const t=e.getSettings(),n=null==t?void 0:t.signup_time;return n?(0,o().Mn)(n):null}},266685:(e,t,n)=>{n.d(t,{a:()=>l});n(296540);var o=()=>n(819121),i=()=>n(401497),r=()=>n(451306),a=()=>n(100622),s=n(474848);function l(e){const{disabled:t,checked:n,selectorSize:l}=e,[c,d]=(0,o().A)(),u=function(e){const{checked:t,disabled:n,isFocusVisible:o,selectorSize:r}=e;return(0,i().IS)((()=>({root:{position:"absolute",display:"flex",width:15,height:15,padding:5,margin:1.5,justifyContent:"center",alignItems:"center",gap:8,flexShrink:0,borderRadius:"50%",transition:"background 100ms ease-out",...t?{boxShadow:`0 0 0 1.5px ${n?a().Tj.background.tertiaryTranslucent:a().Tj.blue.background.accentPrimary}`,background:n?a().Tj.background.tertiaryTranslucent:a().Tj.blue.background.accentPrimary}:{boxShadow:`0 0 0 1.5px ${n?a().Tj.background.tertiaryTranslucent:a().Tj.border.strongTranslucent}`,background:a().Tj.background.primary},...o&&{boxShadow:a().Tj.buttonBlueFocusRing}},active:{background:t?a().Tj.blueButtonPressedBackground:a().Tj.buttonHoveredBackground},input:{opacity:0,width:"small"===r?14:18,height:"small"===r?14:18,...n?{pointerEvents:"none"}:{cursor:"pointer"}}})),[t,n,o,r])}({checked:n,disabled:t,isFocusVisible:d,selectorSize:l});return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("input",{ref:c,type:"radio",style:u.input,className:"radio-button",...e}),(0,s.jsx)("span",{...(0,r().ow)("custom-radio-button",u.root,t?{}:{pseudoActive:u.active})})]})}},269345:(e,t,n)=>{n.d(t,{_:()=>R});n(296540);var o=()=>n(484714),i=()=>n(590526),r=()=>n(401497),a=()=>n(75435),s=()=>n(127833),l=()=>n(30537),c=()=>n(695115),d=()=>n(26697),u=()=>n(526278),p=()=>n(940563),m=()=>n(617668),f=()=>n(69708),g=()=>n(899963),h=()=>n(109488),y=()=>n(44551),v=()=>n(116749);var b=()=>n(896922),x=()=>n(564704),S=()=>n(800140),k=()=>n(917908),w=()=>n(551253),I=()=>n(712505),A=()=>n(35392),C=n(474848);const T=(0,f().YK)({newTabButton:{id:"desktopTopbarBrowserHistoryButton.newTabButton.label",defaultMessage:"New tab"},goBackButton:{id:"desktopTopbarBrowserHistoryButtons.goBackButton.label",defaultMessage:"Go back"},goForwardButton:{id:"desktopTopbarBrowserHistoryButton.goForwardButton.label",defaultMessage:"Go forward"}});function M(){const e=(0,f().tz)(),t=(0,i().K8)((()=>a().A.state.isTabPositionSupported),[]);return(0,C.jsx)(d().m,{renderTooltip:()=>(0,C.jsxs)("div",{style:{display:"flex"},children:[e.formatMessage(T.newTabButton),(0,C.jsx)(A().A,{name:"newTab",style:{opacity:.5,marginInlineStart:4}})]}),placement:"bottom",alignment:"center",originGap:6,render:n=>(0,C.jsx)(c().A,{ariaLabel:e.formatMessage(T.newTabButton),icon:{icon:m().plusIcon,size:"lg"},colorVariant:"primary",className:"notion-new-tab-button",style:{position:"relative"},onClick:()=>function(e){y().electronApi&&null!==y().electronApi&&void 0!==y().electronApi&&y().electronApi.newTab?y().electronApi.newTab():(0,v().V)({url:"",makeTabActive:!0,position:e?"end":"start"})}(t),...n})})}function _({isNavigationHistorySupported:e}){const t=(0,f().tz)(),n=(0,o().v3)(),r=(0,i().K8)((()=>!k().H.canGoBack()),[]);return(0,C.jsx)(d().m,{renderTooltip:()=>(0,C.jsxs)("div",{style:{display:"flex"},children:[t.formatMessage(T.goBackButton),(0,C.jsx)(A().A,{name:"goBack",style:{opacity:.5,marginInlineStart:4}})]}),placement:"bottom",alignment:"center",originGap:6,render:o=>(0,C.jsx)(c().A,{ariaLabel:t.formatMessage(T.goBackButton),icon:{icon:u().arrowStraightLeftIcon,size:"lg"},colorVariant:"primary",className:"notion-history-back-button",disabled:r,style:{position:"relative",width:24,height:24},onClick:t=>function(e,t,n){g().Lt(t,{type:"back"});const o=e.metaKey||e.ctrlKey;n&&o?(0,x().Y)(t,"back"):(0,b().a)(t)}(t,n,e),onContextMenu:()=>{!r&&e&&w().I.setState({direction:"back",open:!0})},...o})})}function j({isNavigationHistorySupported:e}){const t=(0,f().tz)(),n=(0,o().v3)(),r=(0,i().K8)((()=>!k().H.canGoForward()),[]);return(0,C.jsx)(d().m,{renderTooltip:()=>(0,C.jsxs)("div",{style:{display:"flex"},children:[t.formatMessage(T.goForwardButton),(0,C.jsx)(A().A,{name:"goForward",style:{opacity:.5,marginInlineStart:4}})]}),placement:"bottom",alignment:"center",originGap:6,render:o=>(0,C.jsx)(c().A,{ariaLabel:t.formatMessage(T.goForwardButton),icon:{icon:p().arrowStraightRightIcon,size:"lg"},colorVariant:"primary",className:"notion-history-forward-button",disabled:r,style:{position:"relative",width:24,height:24},onClick:t=>function(e,t,n){g().Lt(t,{type:"forward"});const o=e.metaKey||e.ctrlKey;n&&o?(0,x().Y)(t,"forward"):(0,S().s)(t)}(t,n,e),onContextMenu:()=>{!r&&e&&w().I.setState({direction:"forward",open:!0})},...o})})}function B(e){const{topbarFeatureController:t}=e,n=(0,i().K8)((()=>{var e;return(null===(e=a().A.state.preferences)||void 0===e?void 0:e.isNavigationHistoryEnabled)&&a().A.state.isNavigationHistorySupported}),[]),o=(0,r().IS)((()=>({container:{position:"relative",display:"flex",flexShrink:0,gap:4}})),[]);return(0,C.jsx)(h().A,{capture:!0,render:e=>(0,C.jsxs)("div",{style:o.container,...e,children:[(0,C.jsx)(_,{isNavigationHistorySupported:n}),(0,C.jsx)(j,{isNavigationHistorySupported:n}),t.showNewTabButton?(0,C.jsx)(M,{}):null]})})}function R(e){const{topbarFeatureController:t}=e,{isElectron:n}=(0,o().Y0)(),r=(0,i().O$)(a().b),c=(0,i().K8)((()=>I().default.isCenterPeekOpen()),[]);return!n||r?null:(0,C.jsx)(s().zD,{trapFocus:!1,style:{background:"transparent",borderRadius:0,boxShadow:"none"},origin:(0,C.jsx)(B,{topbarFeatureController:t}),render:()=>(0,C.jsx)(B,{topbarFeatureController:t}),placementToOrigin:"center",alignmentToOrigin:"center",open:c,disableMouseCapture:!0,preventCaptureEsc:!0,preventScaleTransition:!0,preventOpacityTransition:!0,popupType:l().n.Popup})}},326887:(e,t,n)=>{n.d(t,{$X:()=>r,H8:()=>a,x2:()=>i});var o=()=>n(534177);function i(e){return"event"===e||"recurrence"===e}function r(e){const t=e.getTrigger();return(0,o().O9)(t)&&i(t.type)}function a(e){return"event"===e?"event":"recurrence"===e?"recurrence":void(0,o().HB)(e)}},346527:(e,t,n)=>{n.d(t,{A:()=>i});class o extends(()=>n(757695))().Store{getInitialState(){return{open:!1,focus:"none"}}open(){this.setState({open:!0,focus:"none"})}close(){this.setState({open:!1,focus:"none"})}}const i=new o},348869:(e,t,n)=>{n.d(t,{g:()=>s});n(944114);var o=()=>n(792057),i=()=>n(785728),r=()=>n(532659),a=()=>n(753812);async function s(e){const{environment:t,onResponse:n,data:s,userId:l,tracking:c,abortSignal:d}=e,u=await a().callStreamApi({eventName:"runInferenceTranscript",environment:t,data:s,userId:l,tracking:c,abortSignal:d,headers:(0,i().WS)({spaceId:s.spaceId})});if("success"!==u.type)return null!=d&&d.aborted?{error:{message:"Aborted",code:0}}:(o().Qg(u),{error:{message:u.error.message,code:u.status}});const p=[];if(r().hS.is(u.data))for await(const o of u.data){if("error"===o.type)return{error:{message:o.message,code:o.errorCode}};null==n||n(o),p.push(o)}return{value:p}}},358075:(e,t,n)=>{n.d(t,{l:()=>a});n(296540);var o=()=>n(970236),i=()=>n(69708),r=n(474848);function a(e){return(0,r.jsx)(o().E,{style:{textWrap:"nowrap"},content:"membership_admin"===e.role?(0,r.jsx)(i().sA,{id:"spacePermissionsSettings.user.membershipAdmin",defaultMessage:"Membership admin"}):(0,r.jsx)(i().sA,{id:"spacePermissionsSettings.user.workspaceOwner",defaultMessage:"Workspace owner"})})}},371231:(e,t,n)=>{n.d(t,{m:()=>c});var o=()=>n(988083),i=()=>n(201794),r=()=>n(232615),a=()=>n(496603);const s=a().sg(((e,t)=>{o().A.setState({...o().A.state,phase:e,estimatedKeyboardWebViewOverlap:t})}),300),l=a().sg(((e,t)=>{o().A.setState({...o().A.state,phase:e,estimatedKeyboardWebViewOverlap:t})}),150);function c(e,t,n){const{device:a,RouterStore:c}=e;if(!(0,i().T)("supportsAlwaysMultiTextSelectionBehavior")){const e="page"===c.state.route.name,o=a.isAndroid&&a.isMobileNative,i="editing"===r().default.state.mode;if(e&&o&&!i)return void s(t,n)}if((0,i().T)("supportsDebouncingKeyboardDuringOnboarding")){const e="onboarding"===c.state.route.name,o=a.isIOS&&a.isMobileNative;if(e&&o)return void l(t,n)}o().A.setState({...o().A.state,phase:t,estimatedKeyboardWebViewOverlap:n})}},375555:(e,t,n)=>{function o(e,t){const{device:n}=e;n.isAndroid&&t.focus(),t.select()}n.d(t,{G:()=>o})},381553:(e,t,n)=>{n.d(t,{Y:()=>r});n(296540);var o=n(474848);const i={viewBox:"0 0 16 16",fittedViewBox:"2.37 2.37 11.25 11.25",svg:(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)("path",{d:"M7.053 6.407a.643.643 0 1 0 0 1.286.643.643 0 0 0 0-1.286m1.894 0a.643.643 0 1 0 0 1.286.643.643 0 0 0 0-1.286m1.893 0a.643.643 0 1 0 0 1.286.643.643 0 0 0 0-1.286M5.159 8.3a.643.643 0 1 0 0 1.287.643.643 0 0 0 0-1.286M7.053 8.3a.643.643 0 1 0 0 1.287.643.643 0 0 0 0-1.286M8.947 8.3a.643.643 0 1 0 0 1.287.643.643 0 0 0 0-1.286M10.84 8.3a.643.643 0 1 0 0 1.287.643.643 0 0 0 0-1.286m-5.681 1.894a.643.643 0 1 0 0 1.286.643.643 0 0 0 0-1.286m1.894 0a.643.643 0 1 0 0 1.286.643.643 0 0 0 0-1.286m1.894 0a.643.643 0 1 0 0 1.286.643.643 0 0 0 0-1.286"}),(0,o.jsx)("path",{d:"M4.25 2.375c-1.036 0-1.875.84-1.875 1.875v7.5c0 1.036.84 1.875 1.875 1.875h7.5c1.036 0 1.875-.84 1.875-1.875v-7.5c0-1.036-.84-1.875-1.875-1.875zm-.625 9.375V5.632h8.75v6.118c0 .345-.28.625-.625.625h-7.5a.625.625 0 0 1-.625-.625"})]})},r=(0,n(340498).wt)("viewCalendarSmall",i,"small")},383567:(e,t,n)=>{n.d(t,{F:()=>r});n(296540);var o=n(474848);const i={viewBox:"0 0 20 20",fittedViewBox:"3.26 1.98 16.32 17.52",svg:(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)("path",{d:"M15.825 12a3.75 3.75 0 1 1-.001 7.501 3.75 3.75 0 0 1 0-7.501m0 1.325a.55.55 0 0 0-.55.55V15.2H13.95a.55.55 0 0 0-.001 1.1h1.326v1.325a.55.55 0 0 0 1.1 0V16.3h1.324a.55.55 0 0 0 0-1.1h-1.325v-1.325a.55.55 0 0 0-.55-.55M9.702 5.022a3.918 3.918 0 0 1 6.742.036.626.626 0 0 1-1.08.63 2.667 2.667 0 0 0-4.59-.023L5.376 14.68l4.19.678a.626.626 0 0 1-.2 1.235l-5.1-.827a.625.625 0 0 1-.437-.938z"}),(0,o.jsx)("path",{d:"M10.912 8.094a1.178 1.178 0 1 1 2.326.377 1.178 1.178 0 0 1-2.326-.377M4.7 7.087a1.178 1.178 0 1 1 2.327.377A1.178 1.178 0 0 1 4.7 7.087M3.488 2.985a3.92 3.92 0 0 1 5.572.357.625.625 0 0 1-.944.818 2.67 2.67 0 0 0-3.796-.243.625.625 0 1 1-.832-.932"})]})},r=(0,n(340498).wt)("aiFacePlus",i,"default")},390527:(e,t,n)=>{n.r(t),n.d(t,{DEFAULT_MAX_RECURRENCE_DUPLICATION_PER_TASK:()=>B,MAXIMUM_DAILY_RECURRENCES_IN_PATH:()=>w,MAXIMUM_NESTED_RECURRENCE_LEVEL:()=>k,MAX_RECURRENCE_INTERVAL:()=>y,MAX_RECURRENCE_NUMBER_OF_RUNS:()=>v,RRULE_WEEKDAYS_MAP:()=>h,adjustedStartDateIfPossible:()=>A,areRecurrenceSchedulesEqual:()=>O,convertFromUnpersistedRecurrenceConfig:()=>D,convertToUnpersistedRecurrenceConfig:()=>R,getFormattedEndCondition:()=>j,getFormattedNextRecurrenceTime:()=>_,getNewEndTimestamp:()=>E,getNextDateUtc:()=>M,getRecurrenceAfter:()=>C,isRunningBetweenMidnightAnd3AM:()=>T,isValidRecurrenceInterval:()=>b,isValidRecurrenceNumberOfRuns:()=>x,rruleFromRecurrence:()=>S,templateAncestorsViolateRecurrenceNesting:()=>I});n(898992),n(354520),n(581454);var o=()=>n(906745);n(944114);function i(e,...t){if(0===t.length)return e.map((e=>[e]));const n=[];for(const o of e)n.push(...i(t[0],...t.slice(1)).map((e=>[o,...e])));return n}var r=()=>n(496603),a=()=>n(534177),s=()=>n(720665),l=()=>n(597777),c=()=>n(869190),d=()=>n(416504),u=()=>n(402390);class p extends(()=>n(896346))().p3{constructor(e,t){super(e,t)}after(e,t){return super.after(e,t)}}var m=()=>n(912720);const f=(0,n(69708).YK)({dateAtTime:{id:"automations.recurrenceHelpers.dateAtTime",defaultMessage:"{date} at {time}"},dateBetweenMidnightAnd3AM:{id:"automations.recurrenceHelpers.dateBetweenMidnightAnd3AM",defaultMessage:"{date} between 12–3 AM"},numberEndConditionDescription:{id:"automations.recurrenceHelpers.numberEndConditionDescription",defaultMessage:"{number, plural, one {After {number} run} other {After {number} runs}}"},noEndCondition:{id:"automations.recurrenceHelpers.noEndCondition",defaultMessage:"Never"}}),g={hour:p.HOURLY,day:p.DAILY,week:p.WEEKLY,month:p.MONTHLY,year:p.YEARLY},h={MO:p.MO,TU:p.TU,WE:p.WE,TH:p.TH,FR:p.FR,SA:p.SA,SU:p.SU},y=99,v=999;function b(e){return(0,s().Et)(e)&&Number.isInteger(e)&&e>0&&e<=y}function x(e){return(0,s().Et)(e)&&Number.isInteger(e)&&e>0&&e<=v}function S(e){const{start_date:t,frequency:n,interval:o,weekdays:r,timezone:s,hour:c,minute:d}=e,u=(0,l().eU)(t);"hour"===n&&u.setUTCHours(c??0,d??0,0,0);const m="week"===n&&r?r.map((e=>h[e])):void 0,f={};return(0,a().O9)(e.end_condition)&&("date"===e.end_condition.type?f.until=(0,l().eU)(e.end_condition.end_at):"number"===e.end_condition.type?f.count=e.end_condition.number_of_occurrences:(0,a().HB)(e.end_condition)),"month"===e.frequency&&(0,a().O9)(e.monthly_restriction)&&("monthdays"===e.monthly_restriction.type?f.bymonthday=e.monthly_restriction.monthdays:"weekdays_in_month"===e.monthly_restriction.type?f.byweekday=i(e.monthly_restriction.weekdays,e.monthly_restriction.week_numbers).map((([e,t])=>h[e].nth(t))):(0,a().HB)(e.monthly_restriction)),new p({freq:g[n],dtstart:u,interval:o,byweekday:m,tzid:"hour"===n?void 0:s,..."hour"===n?{}:{byhour:c??0,byminute:d??0,bysecond:0},...f})}const k=1,w=1;function I(e){var t;if(0===e.length)return{violatesConstraint:!1,templateNestingExceedsMaxDepth:!1,ancestorHasDailyTemplate:!1,nestedDepthOfAutomationAncestors:void 0,immediateAncestorRecurrenceType:void 0};const n=e.filter((e=>{var t;return"day"===(null===(t=e.getRecurrence())||void 0===t?void 0:t.frequency)})),o=e.length,i=null===(t=e[0].getRecurrence())||void 0===t?void 0:t.frequency,r=o>k,a=n.length>=w;return{violatesConstraint:r||a,templateNestingExceedsMaxDepth:r,ancestorHasDailyTemplate:a,nestedDepthOfAutomationAncestors:o,immediateAncestorRecurrenceType:i}}function A(e){var t;const{recurrence:n,afterDate:i}=e;if("number"===(null===(t=n.end_condition)||void 0===t?void 0:t.type)||n.start_date>=i)return n;let r=o().DateTime.fromMillis(n.start_date,{zone:"utc"});const a=o().DateTime.fromMillis(i,{zone:"utc"});switch(n.frequency){case"hour":{const e=Math.floor(a.diff(r,"hours").hours/n.interval);r=r.plus({hours:e*n.interval});break}case"year":{const e=Math.floor(a.diff(r,"years").years/n.interval);r=r.plus({years:e*n.interval});break}case"month":{const e=Math.floor(a.diff(r,"months").months/n.interval);r=r.plus({months:e*n.interval});break}case"week":{const e=Math.floor(a.diff(r,"weeks").weeks/n.interval);r=r.plus({weeks:e*n.interval});break}case"day":{const e=Math.floor(a.diff(r,"days").days/n.interval);r=r.plus({days:e*n.interval});break}}return{...n,start_date:(0,l().DH)(r.toMillis())}}function C(e){const{recurrence:t,afterDate:n}=e;if((0,m().wt)(t)){const e=(0,l().l1)(n);return t.start_date>=e?new Date(t.start_date):void 0}{const e=S(A({recurrence:t,afterDate:n})).after((0,l().eU)(n));if(!e)return;return(0,l().h1)(e)}}function T(e){return 0===e.hour||1===e.hour||2===e.hour}function M(e){return S(e).after((0,l().eU)((0,l().Rz)()))||void 0}function _(e){const{recurrence:t,intl:n}=e,i=M(D(t));if(!i)return;const r=T(t),a=o().DateTime.fromJSDate(i).toUTC().setZone("local",{keepLocalTime:!0}).setLocale((0,u().H)(n)).setZone(t.timezone),s=(0,c().Yq)({date:a,dateFormat:"relative",allowRelativeDates:!0,intl:n,shortenDate:!0});if(r)return n.formatMessage(f.dateBetweenMidnightAnd3AM,{date:s});{let e=a.toLocaleString(o().DateTime.TIME_SIMPLE);return t.timezone!==(0,d().P)()&&(e+=` ${a.toFormat("ZZZZ")}`),n.formatMessage(f.dateAtTime,{date:s,time:e})}}function j(e,t){return(0,a().O9)(e)?"number"===e.type?t.formatMessage(f.numberEndConditionDescription,{number:e.number_of_occurrences}):"date"===e.type?(0,c().Yq)({date:o().DateTime.fromMillis(e.end_at),dateFormat:"relative",allowRelativeDates:!0,intl:t,shortenDate:!0}):void(0,a().HB)(e):t.formatMessage(f.noEndCondition)}const B=100;function R(e){return{...e,start_date:(0,l().l1)(e.start_date),end_condition:e.end_condition?"number"===e.end_condition.type?e.end_condition:"date"===e.end_condition.type?{type:"date",end_at:(0,l().l1)(e.end_condition.end_at)}:(0,a().HB)(e.end_condition):void 0}}function E(e,t,n){return e.plus(n-t)}function P(e,t){const n=o().DateTime.fromMillis(t.end_at).set({hour:e.hour??0,minute:e.minute??0});return{type:"date",end_at:(0,l().Rz)(n.toJSDate())}}function D(e){return{...e,start_date:(0,l().Rz)(new Date(e.start_date)),end_condition:e.end_condition?"number"===e.end_condition.type?e.end_condition:"date"===e.end_condition.type?P(e,e.end_condition):(0,a().HB)(e.end_condition):void 0}}function O(e,t){const n=r().fN(e,(e=>void 0!==e)),o=r().fN(t,(e=>void 0!==e));return r().n4(n,o)}},404905:(e,t,n)=>{n.d(t,{j:()=>c});var o=n(296540),i=()=>n(484714),r=()=>n(401497),a=()=>n(284371),s=()=>n(26697);var l=n(474848);function c(e){const{children:t,style:n,overlayContainerZIndex:c,placement:d="bottom",tooltipStyle:u}=e,{isSafari:p}=(0,i().Y0)(),m=(0,o.useRef)(null),f=function(e){const[t,n]=(0,o.useState)(!1);return(0,o.useEffect)((()=>{const{current:t}=e;if(!t)return void n(!1);const o="ResizeObserver"in window?new ResizeObserver((([e])=>{n(e.target.scrollWidth>e.target.clientWidth)})):void 0;return null==o||o.observe(t),()=>null==o?void 0:o.unobserve(t)}),[]),t}(m),g=(0,r().IS)((()=>({overflowText:{...a().RC,...n}})),[n]);return(0,l.jsx)(s().m,{delayThreshold:500,placement:d,textWrap:!0,style:u,overlayContainerZIndex:c,forceVisibleState:!(p||!f)&&void 0,renderTooltip:()=>f?t:void 0,render:e=>(0,l.jsx)("div",{ref:m,style:g.overflowText,...e,children:t})})}},417555:(e,t,n)=>{n.d(t,{A:()=>d});n(296540);var o=()=>n(807449),i=()=>n(784892),r=()=>n(395546),a=()=>n(695608),s=()=>n(534177),l=()=>n(622419),c=n(474848);const d=function({isStrikedThrough:e,backgroundColor:t,onClickRemove:d,target:u,disabled:p,showInfoIcon:m,style:f,shouldWrap:g}){const h=(0,n(69708).tz)(),y=(0,n(590526).K8)((()=>function({target:e,intl:t,showInfoIcon:n}){let i;switch(e.type){case"newUser":i=e.value.email.trim();break;case"existingUser":i=(0,a().c6)(t,e.value);break;case"group":i=(0,l().Pf)({intl:t,groupName:e.value.name});break;default:(0,s().HB)(e)}return n?(d=i,(0,c.jsxs)("div",{style:{display:"flex",flexDirection:"row",alignItems:"center",gap:4},children:[(0,c.jsx)(o().I,{icon:r().infoCircleSmallIcon,size:"sm"}),d]})):i;var d}({target:u,intl:h,showInfoIcon:m})),[u,h,m]);return(0,c.jsx)(n(881690).A,{showRemoveButton:!0,isSingle:!0,isStrikedThrough:e,backgroundColor:t,format:n(726637).A.isMobile?i().NY.Large:i().NY.Medium,onClickRemove:e=>function(e,t,n){e.stopPropagation(),t(n)}(e,d,u),disabled:p,disabledFeedback:!0,value:y,style:f,shouldWrap:g})}},419357:(e,t,n)=>{n.d(t,{Ay:()=>x,KF:()=>b,LG:()=>h,Zf:()=>v,yD:()=>y});var o=n(296540),i=()=>n(484714),r=()=>n(401497),a=()=>n(718827),s=()=>n(695115),l=()=>n(31511),c=()=>n(546926),d=()=>n(424400),u=()=>n(340498),p=()=>n(100622),m=()=>n(496603),f=()=>n(284371),g=n(474848);const h=30,y=28;function v(e){const{icon:t}=e;return t({fill:p().Tj.icon.secondary,width:u().Ev.sm,height:u().Ev.sm,flexGrow:0,flexShrink:0})}function b(e){const t=(0,i().WS)(),n=(0,r().eP)(),o=(0,r().IS)((()=>({outlineButton:{...(0,a().qq)({shape:"default",size:"sm",hasIconOnly:!0,isButtonGapEnabled:!0}),fontWeight:f().Wy.medium,lineHeight:1.2,border:`1px solid ${p().Tj.border.primaryTranslucent}`,background:e.hasBackground?p().Tj.background.primary:void 0},outlineButtonHovered:{background:p().Tj.background.secondary},outlineButtonPressed:{background:(0,a().yZ)({color:p().Tj.background.primary,mode:n})}})),[e.hasBackground,n]);return(0,g.jsx)(s().A,{size:"xs",colorVariant:"primary",...e,ariaLabel:e.ariaLabel,style:{...o.outlineButton,...e.style,height:t?h:y,width:t?h:y},hoveredStyle:o.outlineButtonHovered,pressedStyle:o.outlineButtonPressed})}const x=o.forwardRef((function({preventCaptureArrowShortcuts:e,preventCaptureDeleteWhenEmpty:t,preventCaptureClipboardShortcuts:i,preventCaptureSpacebarWhenEmpty:r,...a},s){const{left:l,right:u,inputLeft:p,inputRight:f,inputRightStyle:h,disableInput:y,inputOuterStyle:v,rightMobileEditLabel:b,mobileKeyboardOnDismiss:x,style:S,value:I,onChange:A,autosize:C,autosizeMinHeight:T,autosizeMaxHeight:M,customElementAttributes:_,disabled:j,format:B,id:R,placeholder:E,type:P,autoFocus:D,focus:O,focusInitial:z,focusAfterAnimation:V,forceShowClearButton:N,ignoreKeyboardMode:F,inputElementAttributes:L,inputStyle:U,isRightLastElementOfInput:W,maxlength:H,min:K,max:G,selectAll:q,showClearButton:$,suppressFocusRing:Y,textarea:Q,textareaSubmitOnEnter:Z,onBlur:X,onCancel:J,onClearButtonClick:ee,onClick:te,onFocus:ne,onKeyDown:oe,onSubmit:ie,...re}=a,[ae,se]=(0,o.useState)((()=>Boolean(O||z)));(0,o.useEffect)((()=>{void 0!==O&&se(O)}),[O]);const le=e?void 0:m().D_,ce=!t||I.length>0?m().D_:void 0,de=i?void 0:m().D_,ue=!r||I.length>0?m().D_:void 0,pe=(0,c().Tf)(),me=(0,o.useContext)(c().xu),fe=(0,o.useRef)(null),ge={value:I,onChange:A,autosize:C,autosizeMinHeight:T,autosizeMaxHeight:M,customElementAttributes:_,disabled:j,format:B,id:R,placeholder:E,type:P,autoFocus:D,focus:O,focusInitial:z,focusAfterAnimation:V,forceShowClearButton:N,ignoreKeyboardMode:F,inputElementAttributes:L,inputStyle:U,isRightLastElementOfInput:W,maxlength:H,min:K,max:G,selectAll:q,showClearButton:$,suppressFocusRing:Y,textarea:Q,textareaSubmitOnEnter:Z,onBlur:X,onCancel:J,onClearButtonClick:ee,onClick:te,onFocus:ne,onKeyDown:oe,onSubmit:ie};return(0,g.jsx)(n(782482).N,{debugName:"InputMenuItem",capture:!0,onUntab:m().D_,onTab:m().D_,onSelectAll:m().D_,onRedo:m().D_,onUndo:m().D_,onToggleBold:m().D_,onToggleItalics:m().D_,onToggleCode:m().D_,onCut:de,onCopy:de,onPaste:de,onKeypress:m().D_,onLeft:le,onRight:le,onDelete:ce,onBackspace:ce,onSpace:ue,children:n(726637).A.isMobile?(0,g.jsxs)(g.Fragment,{children:[(0,g.jsx)(d().Ay,{ref:s,...re,itemMarginLeft:pe?8:void 0,style:S,title:(0,g.jsx)(w,{ref:fe,left:l,right:u,inputLeft:p,inputRight:f,inputRightStyle:h,disableInput:y,inputOuterStyle:v,rightMobileEditLabel:b,isFocused:ae,setIsFocused:se,...ge})}),(0,g.jsx)(n(797324).A,{show:ae&&me.menuType!==c().gu.ActionSheet,onDismiss:x,inputRef:fe})]}):(0,g.jsx)(d().Ay,{ref:s,...re,left:l,right:u,isTokenTitle:!0,title:(0,g.jsx)(k,{ref:fe,disableInput:y,inputOuterStyle:v,inputRight:f,inputRightStyle:h,inputLeft:p,...ge}),style:{paddingTop:4,paddingBottom:4,...S}})})}));function S({rightMobileEditLabel:e,inputRef:t}){const r=(0,i().v3)(),s=(0,o.useCallback)((e=>{e.preventDefault();const o=t.current;o&&(0,n(375555).G)(r,o)}),[r,t]);return(0,g.jsx)(a().Ay,{onClick:s,style:{color:p().Tj.text.secondary},children:e})}const k=o.forwardRef((function(e,t){const{disabled:n,disableInput:o,inputOuterStyle:i,inputRight:r,inputRightStyle:a,inputLeft:s,min:c,textarea:d,...u}=e;return(0,g.jsx)(l().A,{...u,ref:t,disabled:n||o,style:{height:d?void 0:28,padding:"3px 6px",...i},left:s,right:r,rightStyle:a,min:c,textarea:d})})),w=o.forwardRef((function(e,t){const{left:i,right:r,inputLeft:a,inputRight:s,inputRightStyle:c,disableInput:d,inputOuterStyle:u,rightMobileEditLabel:p,isFocused:m,setIsFocused:f,disabled:h,showClearButton:y,onBlur:v,onFocus:b,...x}=e,k=(0,o.useCallback)((e=>{f(!1),v&&v(e)}),[v,f]),w=(0,o.useCallback)((e=>{f(!0),b&&b(e)}),[b,f]),I=(0,o.useRef)(null),A=(0,n(93583).A)(I,t),C=p&&!m?(0,g.jsx)(S,{rightMobileEditLabel:p,inputRef:I}):null;return(0,g.jsx)(l().A,{...x,ref:A,format:"transparent",style:{fontSize:16,...u},onFocus:w,onBlur:k,showClearButton:!1!==y,disabled:h||d,left:a||i,right:C||s||r,rightStyle:c})}))},422540:(e,t,n)=>{n.d(t,{$0:()=>y,Fx:()=>I,Ge:()=>f,I3:()=>p,Kj:()=>k,PP:()=>A,TK:()=>C,Yy:()=>u,aE:()=>T,cQ:()=>w,kH:()=>g,m7:()=>m,nq:()=>x,nv:()=>v,tj:()=>h});n(898992),n(354520),n(737550);var o=()=>n(496603),i=()=>n(534177),r=()=>n(381283),a=()=>n(898244),s=()=>n(651124),l=()=>n(349835),c=()=>n(390066);const d={checkbox:!0,date:!0,email:!0,multi_select:!0,number:!0,person:!0,phone_number:!0,relation:!0,select:!0,status:!0,text:!0,title:!0,url:!0,auto_increment_id:!1,button:!1,created_by:!1,created_time:!1,file:!1,formula:!1,last_edited_by:!1,last_edited_time:!1,last_visited_time:!1,location:!1,rollup:!1,verification:!1,place:!1},u={checkbox:[{type:"checkbox"}],date:[{type:"date"}],email:[{type:"text"}],multi_select:[{type:"text"},{of:{type:"text"},type:"array"}],number:[{type:"number"}],person:[{type:"person"},{of:{type:"person"},type:"array"}],phone_number:[{type:"text"}],relation:[{type:"block"},{of:{type:"block"},type:"array"}],select:[{type:"text"},{of:{type:"text"},type:"array"}],status:[{type:"text"},{of:{type:"text"},type:"array"}],text:void 0,title:void 0,url:[{type:"text"}]};function p(e){return Boolean(d[e.type]&&!(0,a().UU)(e)&&(!(0,a().$M)(e)||void 0===(0,a().om)(e)))}function m(e){const{collectionFormat:t,collectionSchema:n,filter:r,sort:l,sourcePropertyIds:d}=e,u=(d??(0,i().uv)(n)).filter(((t,o,i)=>{const s=n[t];return!(!s||!p(s))&&(("relation"!==s.type||!e.restrictCrossSpace||!(0,a().o2)(e.spaceId,s))&&(!r||r([t,s],o,n)))}));if(0===u.length)return[];if(!t||!1===l)return u;const m=(0,c().L)(t,n,void 0,s().jf.Page).collection_page_properties||[];return o().Ul(u,(e=>m.findIndex((t=>t.property===e))))}function f(e){const{collectionFormat:t,collectionSchema:n,sort:a}=e,l=(0,i().uv)(n).filter(((e,t,o)=>{const i=n[e];return!(!i||!(0,r().J)(i))}));if(0===l.length)return[];if(!t||!1===a)return l;const d=(0,c().L)(t,n,void 0,s().jf.Page).collection_page_properties||[];return o().Ul(l,(e=>d.findIndex((t=>t.property===e))))}function g(e){return e.type===l().M9.InvalidCharacter?{type:e.type,character:e.character}:e.type===l().M9.TokenExpected?{type:e.type,token:e.token}:e.type===l().uW.MissingSchemaPropertyOnThisRow||e.type===l().uW.MissingSchemaPropertyOnCollection?{type:e.type,collectionId:e.collectionId,property:e.property,errorSource:e.errorSource}:e.type===l().uW.ThisRowBlockPropertyMismatchCollection?{type:e.type,thisRowCollection:e.thisRowCollection,errorSource:e.errorSource}:e.type===l().uW.MissingContextVariable?{type:e.type,valueId:e.valueId,errorSource:e.errorSource}:e.type===l().uW.FunctionCallTooFewArguments?{type:e.type,numArguments:e.numArguments,errorSource:e.errorSource}:e.type===l().uW.FunctionCallUnexpectedArgument?{type:e.type,parameterIndex:e.parameterIndex,errorSource:e.errorSource}:e.type===l().uW.FunctionCallArgumentWrongType?{type:e.type,argumentType:e.argumentType,libraryFunctionName:e.libraryFunction.name,parameterIndex:e.parameterIndex,errorSource:e.errorSource}:e.type===l().uW.MissingDataDependencyBlock?{type:e.type,blockPointer:e.blockPointer,node:e.node,errorSource:e.errorSource}:e.type===l().uW.MissingDataDependencyPerson?{type:e.type,personPointer:e.personPointer,errorSource:e.errorSource}:e.type===l().uW.MemberPropertyMismatchCollection?{type:e.type,blockCollection:e.blockCollection,errorSource:e.errorSource}:e.type===l().uW.DownstreamParseFailure?{type:e.type,collectionId:e.collectionId,property:e.property,errorSource:e.errorSource}:e.type===l().uW.ContextVariableWrongType?{type:e.type,valueId:e.valueId,expectedType:e.expectedType,resultType:e.resultType,errorSource:e.errorSource}:e.type===l().uW.DisallowedValueType?{type:e.type,expressionValue:e.expressionValue,allowedValueTypes:e.allowedValueTypes,errorSource:e.errorSource}:e.type===l().uW.LibraryFunctionExecutionError?{type:e.type,error:e.error,libraryFunctionName:e.libraryFunction.name,errorSource:e.errorSource}:"errorSource"in e?{type:e.type,errorSource:e.errorSource}:{type:e.type}}const h={checkbox:!0,date:!0,email:!0,multi_select:!0,number:!0,person:!0,phone_number:!0,relation:!0,select:!0,status:!0,text:!0,title:!0,url:!0,button:!1,file:!1,verification:!1,auto_increment_id:!1,created_by:!1,created_time:!1,formula:!1,last_edited_by:!1,last_edited_time:!1,last_visited_time:!1,location:!1,rollup:!1,place:!1};function y(e){return Boolean(h[e.type])}function v(e){const{collectionFormat:t,collectionSchema:n,filter:r,sort:l}=e,d=(0,i().uv)(n).filter(((e,t,o)=>{var i;const s=n[e];return!(!s||!h[s.type])&&((!(0,a().$M)(s)||null===(i=(0,a().om)(s))||void 0===i||!i.auto_update_on_edit)&&(!r||r([e,s],t,n)))}));if(0===d.length)return[];if(!t||!1===l)return d;const u=(0,c().L)(t,n,void 0,s().jf.Page).collection_page_properties||[];return o().Ul(d,(e=>u.findIndex((t=>t.property===e))))}const b={checkbox:!0,email:!0,multi_select:!0,number:!0,person:!0,phone_number:!0,relation:!0,select:!0,status:!0,text:!0,title:!0,url:!0,auto_increment_id:!1,button:!1,created_by:!1,created_time:!1,date:!1,file:!1,formula:!1,last_edited_by:!1,last_edited_time:!1,last_visited_time:!1,location:!1,rollup:!1,verification:!1,place:!1};function x(e){return b[e.type]}const S={checkbox:!0,created_by:!0,created_time:!0,date:!0,email:!0,multi_select:!0,number:!0,person:!0,phone_number:!0,relation:!0,select:!0,status:!0,text:!0,title:!0,url:!0,last_edited_by:!0,last_edited_time:!0,auto_increment_id:!1,button:!1,file:!1,formula:!1,last_visited_time:!1,location:!1,rollup:!1,verification:!1,place:!1};function k(e){return S[e.type]}function w(e){return 0===e}function I(e){return function(e){return"button_block"===e||"button_property"===e}(e)}function A(e){const{property:t,collectionSchema:n}=e;return!!n&&!n[t]}function C(e){const{collectionSchema:t,property:n,type:o}=e,i=null==t?void 0:t[n];return!i||("action"===o?!p(i):!h[i.type])}function T({automationTrigger:e,collectionSchema:t}){if("event"===(null==e?void 0:e.type)){const{pagesAdded:n,pagePropertiesEdited:o,source:r}=e.event;if(void 0===r)return!1;const a="some"===o.type&&o.some,s="all"===o.type&&o.all;if((a||s||[]).some((e=>A({collectionSchema:t,property:e.property})||C({collectionSchema:t,property:e.property,type:"trigger"}))))return!1;const l="some"===o.type&&(!(0,i().O9)(o.some)||0===o.some.length),c="all"===o.type&&(!(0,i().O9)(o.all)||0===o.all.length);if(!n&&("none"===o.type||l||c))return!1}else{if("recurrence"!==(null==e?void 0:e.type))return!1;if(!e.recurrence)return!1}return!0}},423657:(e,t,n)=>{n.d(t,{A:()=>l});var o=()=>n(135168),i=()=>n(299545),r=()=>n(78846),a=()=>n(707396);function s(e,t){return(0,r().h)(e)?{isGuestRequestRequired:!0}:t?{isStoreInTeam:!0,teamAllowsGuests:!0,spaceAllowsGuests:!0,isGuestRequestRequired:!1}:{isStoreInTeam:!1,spaceAllowsGuests:!0,isGuestRequestRequired:!1}}const l=function(e){return(0,n(590526).K8)((()=>{if((0,i().nw)(e))return{isStoreInTeam:!1,spaceAllowsGuests:!0,isGuestRequestRequired:!1};if("workflow"===e.table){const t=(0,o().f)(e);return(0,a().r)(t)?s(t,void 0):{isStoreInTeam:!1,spaceAllowsGuests:!(null!=t&&t.getDisableGuests()),isGuestRequestRequired:!1}}if(!(0,i()._p)(e))return(0,a().r)(e)?s(e,void 0):{isStoreInTeam:!1,spaceAllowsGuests:!0,isGuestRequestRequired:!1};const t=(0,n(74351).U)(e),r=(0,n(156202).p)(e),l=r||(0,o().f)(e);if((0,a().r)(l))return s(l,t);const c=!(null!=r&&r.getDisableGuests());return t?{isStoreInTeam:!0,teamAllowsGuests:!t.getDisableGuests(),spaceAllowsGuests:c,isGuestRequestRequired:!1}:{isStoreInTeam:!1,spaceAllowsGuests:c,isGuestRequestRequired:!1}}),[e])}},425142:(e,t,n)=>{n.r(t),n.d(t,{AiBlockV2:()=>Rn});n(16280),n(517642),n(658004),n(733853),n(845876),n(432475),n(515024),n(731698),n(898992),n(354520),n(803949),n(581454);var o=n(296540),i=()=>n(564884),r=()=>n(907258),a=()=>n(135168),s=()=>n(242422),l=()=>n(993905),c=()=>n(23749),d=()=>n(726637),u=()=>n(17022),p=()=>n(484714),m=()=>n(590526),f=()=>n(401497),g=()=>n(792057),h=()=>n(770063),y=()=>n(295633),v=()=>n(807449),b=()=>n(695115),x=()=>n(160432),S=()=>n(26697),k=()=>n(1295),w=()=>n(534177),I=()=>n(68263),A=()=>n(179034),C=()=>n(519831),T=()=>n(96689),M=()=>n(189141);function _(e){const{referenceContext:t,getRecordRole:n,getCanReadSlackChannel:o}=e;if(!t)return!0;for(const i of t)if("collection"===i.type){const e=n({id:i.collectionId,table:C().Vl})??"none";if(!(0,I().Tt)(e))return!1}else if("page"===i.type||"currentPage"===i.type){const e=n({id:i.pageId,table:A().ev})??"none";if(!(0,I().Tt)(e))return!1}else if("slack"===i.type){if(!o(i))return!1}else(0,w().HB)(i);return!0}class j{constructor(e,t){this.permissionLevel=void 0,this.isTemplateInstantiation=void 0,this.permissionLevel=e,this.isTemplateInstantiation=(null==t?void 0:t.isTemplateInstantiation)??!1}canOpenConfigurationPanel(){switch(this.permissionLevel){case"editor":case"configuration_reader":return!0;case"reader":return!1;default:(0,w().HB)(this.permissionLevel)}}canEditConfigurationPanel(){if(this.isTemplateInstantiation)return!0;switch(this.permissionLevel){case"reader":case"configuration_reader":return!1;case"editor":return!0;default:(0,w().HB)(this.permissionLevel)}}canGenerateBlock(){switch(this.permissionLevel){case"editor":return!0;case"configuration_reader":case"reader":return!1;default:(0,w().HB)(this.permissionLevel)}}canDuplicateBlock(){if(this.isTemplateInstantiation)return!0;switch(this.permissionLevel){case"reader":return!1;case"configuration_reader":case"editor":return!0;default:(0,w().HB)(this.permissionLevel)}}}var B=()=>n(663760),R=()=>n(165358),E=()=>n(416845),P=()=>n(513416),D=()=>n(831081),O=()=>n(735790),z=()=>n(134025),V=()=>n(370085),N=()=>n(388821),F=()=>n(798880),L=()=>n(706021),U=()=>n(439180),W=()=>n(69708),H=()=>n(100622),K=()=>n(532659),G=()=>n(496603),q=()=>n(229833),$=()=>n(532313),Y=()=>n(753812),Q=()=>n(863168),Z=()=>n(384944),X=()=>n(864145),J=()=>n(217638),ee=()=>n(673660),te=()=>n(159958),ne=()=>n(162969),oe=()=>n(991249),ie=()=>n(390366),re=()=>n(244828),ae=(n(944114),n(823215),n(672577),n(737550),()=>n(300474)),se=()=>n(717137),le=()=>n(383036),ce=()=>n(250910),de=()=>n(546926),ue=()=>n(493552),pe=()=>n(890492),me=()=>n(81068),fe=()=>n(663639),ge=()=>n(736847),he=()=>n(700500),ye=()=>n(324254),ve=()=>n(537193),be=()=>n(671089),xe=()=>n(395546),Se=()=>n(880565),ke=()=>n(813197),we=()=>n(920495),Ie=()=>n(983521),Ae=()=>n(37719),Ce=()=>n(284371),Te=()=>n(59226),Me=()=>n(265060),_e=()=>n(98126),je=()=>n(287188),Be=()=>n(96563),Re=()=>n(604018),Ee=()=>n(528093),Pe=()=>n(724639),De=()=>n(476488),Oe=()=>n(450528);var ze=()=>n(750127),Ve=n(474848);const Ne=280,Fe=350,Le=(0,W().YK)({tooltipLabel:{id:"MultiSearchScopePopup.tooltipLabel",defaultMessage:"Search scope settings"},sourcesSection:{id:"MultiSearchScopePopup.sourcesSection",defaultMessage:"Sources"},connectorsSection:{id:"MultiSearchScopePopup.connectorsSection",defaultMessage:"Connectors"},connectLabel:{id:"MultiSearchScopePopup.connectLabel",defaultMessage:"Connect"}});function Ue(e){const{buttonPopupParent:t,value:n,onChange:i,validScopeOverrides:r,hideConnectorFooter:a,originSource:s}=e,l=(0,p().v3)(),c=(0,ae().r)(),u=(0,Ee()._)({name:"ai_connectors",spaceId:c,userId:l.currentUser.id}),{normalizedValue:f,eligibleScopes:g,handleToggleScope:h}=function(e){const{value:t,onChange:n,avoidEverythingScope:i,originSource:r}=e,a=(0,o.useMemo)((()=>"workflow"===t.type?(0,Pe().n_)({config:t,modules:[]})??[]:"ai-block"===t.type?t.searchScopes:[]),[t]),s=(0,m().K8)((()=>(0,De().J)({originSurface:r})),[r]),l=(0,m().K8)((()=>s.filter((e=>e.isAvailable({})))),[s]),c=(0,o.useMemo)((()=>{if("workflow"!==t.type&&"ai-block"!==t.type)return t;const e=a.some((e=>"everything"===e.type)),n=(0,Oe().NV)(t);if(e){const e=l.filter((e=>"web"!==e.type)).map((e=>e.createSearchScope()));return{...t,searchScopes:e,useWebSearch:n}}{const e=a.filter((e=>"web"!==e.type));return{...t,searchScopes:e,useWebSearch:n}}}),[t,l,a]),d=(0,o.useCallback)((e=>{const t=e.isEnabled(c);let o=e.setEnabled(c,!t);const r=(0,Oe().ZP)(o),a=(0,Oe().NV)(o),s=l.map((e=>e.type)).filter((e=>"web"!==e)),d=r.map((e=>e.type)),u=s.every((e=>d.includes(e))),p=r.filter((e=>"ai-knowledge"!==e.type)),m=p.filter((e=>"web"!==e.type)),f=a||p.some((e=>"web"===e.type));o=m.length>0||f?u&&s.length>0&&!i?{...o,searchScopes:[{type:"everything"}],useWebSearch:a}:{...o,searchScopes:p,useWebSearch:a}:{...o,searchScopes:[{type:"ai-knowledge"}],useWebSearch:a},n(o)}),[c,n,l,i]);return{normalizedValue:c,handleToggleScope:d,eligibleScopes:s,availableScopes:l}}({value:n,onChange:i,avoidEverythingScope:Boolean(r),originSource:s}),y=(0,o.useCallback)((e=>{e.connect({environment:l,connectorsFeatureAvailability:u})}),[l,u]),v=(0,m().K8)((()=>{const e={sections:[],addSection(e){e&&this.sections.push(e)}},t=g.filter((e=>["web","notion"].includes(e.type)));t.length>0&&e.addSection(We({key:"sources-section",title:(0,Ve.jsx)(W().sA,{...Le.sourcesSection}),scopeModules:t,value:f,onToggleScope:h,onConnectScope:y,originSource:s}));const n=g.filter((e=>{if("web"!==e.type&&"notion"!==e.type)return!r||r.includes(e.type)}));return n.length>0&&e.addSection(We({key:"connectors-section",title:(0,Ve.jsx)(W().sA,{...Le.connectorsSection}),scopeModules:n,value:f,onToggleScope:h,onConnectScope:y,originSource:s})),e.sections}),[g,f,h,y,r,s]);return(0,Ve.jsx)(pe().A,{menuType:de().gu.Popup,width:d().A.isMobile&&"ai_block"===s?"100%":Ne,maxHeight:d().A.isMobile&&"ai_block"===s?void 0:Fe,footer:!a&&(0,Ve.jsx)(Ke,{buttonPopupParent:t,connectorsFeatureAvailability:u}),children:(0,Ve.jsx)(fe().A,{type:fe().O.Vertical,initialFocus:void 0,sections:v,style:d().A.isMobile&&"ai_block"===s?{width:"100%"}:void 0})})}function We(e){const{key:t,title:n,scopeModules:o,value:i,onToggleScope:r,onConnectScope:a,originSource:s}=e;return{key:t,render:e=>(0,Ve.jsx)(ge().A,{...e,title:n,mobileTitleStyle:d().A.isMobile&&"ai_block"===s?{fontSize:17}:void 0}),items:o.map((e=>({key:e.type,render:t=>(0,Ve.jsx)(He,{...t,scope:e,value:i,onToggle:()=>r(e),onConnect:()=>a(e),originSource:s}),action:!e.isLoading()&&e.isAvailable({})?()=>r(e):e.isLoading()?()=>{}:()=>a(e)})))}}function He(e){const{scope:t,value:n,onToggle:o,onConnect:i,focused:r,originSource:a}=e,{isEnabled:s,isLoading:l,isAvailable:c,needsAuth:u}=(0,m().K8)((()=>({isEnabled:t.isEnabled(n),isLoading:t.isLoading(),isAvailable:t.isAvailable({}),needsAuth:t.needsAuth()})),[t,n]);let p=null;return p=l?(0,Ve.jsx)(_e().k,{}):c?(0,Ve.jsx)(je().A,{on:s,disabled:!c,onClick:o,disallowTabbing:!0}):(0,Ve.jsx)(ue().D,{styleKey:(d().A.isMobile,"captionRegular"),colorVariant:"secondary",children:(0,Ve.jsx)(W().sA,{...Le.connectLabel})}),(0,Ve.jsx)(me().A,{role:"menuitemcheckbox",focused:r,icon:(0,Ve.jsx)(Me().Q,{iconGroup:t.icon,overrideSize:()=>d().A.isMobile&&"ai_block"===a?22:18,variantName:"default"}),title:t.displayName,onClick:()=>{l||(c?o():i())},disabled:l,right:p,dontShrinkRight:!0,buttonStyle:d().A.isMobile&&"ai_block"===a?{padding:"16px"}:void 0,titleStyle:d().A.isMobile&&"ai_block"===a?{fontSize:17}:void 0,rightStyle:d().A.isMobile&&"ai_block"===a?{marginInlineStart:"auto"}:void 0})}function Ke(e){const{buttonPopupParent:t,connectorsFeatureAvailability:n}=e,i=(0,p().v3)(),r=(0,Te().X)("notion_ai_workspace_settings"),a=(0,m().K8)((()=>0===(0,Re().Nr)().length),[]),s=(0,o.useCallback)((()=>{(0,Be().pp)({environment:i,connector:"generic",analyticsFrom:"multi_search_scope_menu",connectorsFeatureAvailability:n}),t.close()}),[t,n,i]);return!r||a?null:(0,Ve.jsx)(ge().A,{topBorderExtendToEdge:!0,children:(0,Ve.jsx)(ze().$,{onClick:s,focused:!1})})}var Ge=()=>n(187820),qe=()=>n(16006),$e=()=>n(483795),Ye=()=>n(486674);function Qe(){return(0,m().K8)((()=>{const e=(0,De().J)({originSurface:"ai_block"}),t=e.find((e=>"slack"===e.type)),n=e.find((e=>"web"===e.type));return{isSlackConnected:(null==t?void 0:t.isAvailable({originSurface:"ai_block"}))??!1,isWebSearchAvailable:(null==n?void 0:n.isAvailable({originSurface:"ai_block"}))??!1}}),[])}var Ze=()=>n(302501);function Xe(e){const{onToggle:t,toggled:n}=e,[i,r]=(0,o.useState)(n),a=(0,o.useRef)(!1),s=(0,o.useCallback)((()=>{r((e=>!e)),a.current=!0}),[]);return(0,o.useEffect)((()=>{a.current&&(t(i),a.current=!1)}),[i,t]),(0,o.useEffect)((()=>{r(n)}),[n]),(0,Ve.jsxs)("div",{style:{marginTop:10,display:"flex",alignItems:"center",fontWeight:600,gap:10,justifyContent:"space-between"},children:[(0,Ve.jsx)(Ze().A,{children:(0,Ve.jsx)(W().sA,{id:"AiBlockV2.AutoGenerateOnTemplateDuplicationFieldToggle.Label",defaultMessage:"Autofill when template is duplicated"})}),(0,Ve.jsx)(je().A,{on:i,onClick:s})]})}var Je=()=>n(127833),et=()=>n(970236),tt=()=>n(631524),nt=()=>n(449279),ot=()=>n(452004),it=()=>n(62900),rt=()=>n(245241),at=()=>n(778078),st=()=>n(305390),lt=()=>n(825972),ct=()=>n(135599),dt=(n(18107),n(967357),()=>n(148307)),ut=()=>n(992214),pt=()=>n(784892),mt=()=>n(416504),ft=()=>n(129852),gt=()=>n(881690),ht=()=>n(589222),yt=()=>n(31511);const vt=(0,W().YK)({addContextPlaceholder:{id:"ContextTokenPlaceholderTypeahead.addContextPlaceholder",defaultMessage:"Add context"}}),bt={regular:24,spacious:31};function xt(e){const{disabled:t,currentlyFocusedItem:n,items:i,query:r,setQuery:a,isMenuOpen:s,hasContextsAlready:l,inputRef:c,heightVariant:d,hideCompactMode:u,isShowingContextWarning:p}=e,m=(0,W().tz)(),g=(0,o.useMemo)((()=>{var e;if(!r)return;const t=r.trimEnd(),o=r.slice(t.length);if(n)return n.title.toLowerCase().startsWith(t.toLowerCase())?`${t}${n.title.slice(t.length)}${o}`:r;const a=null===(e=i.find((e=>e.title.toLowerCase().startsWith(t.toLowerCase()))))||void 0===e?void 0:e.title;return a?`${t}${a.slice(t.length)}${o}`:r}),[i,r,n]),h=(0,o.useMemo)((()=>!!p||!s&&l),[p,s,l]),y=(0,o.useMemo)((()=>{if(r){const e=g??r,t=r.trimEnd(),n=r.slice(t.length);if(n.length>0){const t=n.replace(/ /g," ");return e.trimEnd()+t}return e}return m.formatMessage(vt.addContextPlaceholder)}),[r,m,g]),v=(0,o.useRef)(null);(0,o.useEffect)((()=>{s||a("")}),[s,a]);const b=(0,f().IS)((()=>({container:{display:"flex",alignItems:"center",background:h?"transparent":H().Tj.inputBackground,borderRadius:4,paddingInlineStart:0,paddingInlineEnd:0,height:bt[d],width:"fit-content",...Ce().RC},backgroundInput:{height:void 0,display:"flex",alignItems:"center",borderRadius:6,paddingTop:4,paddingBottom:4,paddingInlineStart:4,paddingInlineEnd:10,fontSize:12,lineHeight:"18px",color:H().Tj.text.disabled,whiteSpace:"nowrap",width:"auto"},foregroundInput:{boxShadow:"none",background:"transparent",position:"absolute",top:0,insetInlineStart:0,width:"100%",color:H().Tj.text.secondary,lineHeight:"18px",fontSize:12,paddingTop:4,paddingBottom:4,paddingInlineStart:4,paddingInlineEnd:10,overflow:"hidden",textOverflow:"clip",textIndent:0},plusIcon:{fill:H().Tj.text.disabled,width:14,height:14,marginInlineStart:4,...h&&{marginInlineEnd:0}}})),[h,d]);return u&&h?null:(0,Ve.jsx)(S().m,{disableTooltip:!h,textWrap:!0,style:{minWidth:200,padding:"4px 8px"},renderTooltip:()=>(0,Ve.jsx)(W().sA,{id:"ContextTokenPlaceholderTypeahead.tooltip",defaultMessage:"Add context to help Notion AI generate relevant content"}),render:o=>(0,Ve.jsxs)(tt().p,{...o,style:b.container,onClick:e.onFocus,disabled:t,children:[(0,Ve.jsx)(Me().Q,{iconGroup:ht().h,variantName:"default",colorPalette:"gray",colorVariant:"primary",style:b.plusIcon}),h?void 0:(0,Ve.jsxs)("div",{style:{position:"relative"},children:[(0,Ve.jsx)("div",{ref:v,style:b.backgroundInput,children:y}),(0,Ve.jsx)(se().A,{capture:!0,debugName:"ContextTokenPlaceholderTypeahead",allowMenuList:!0,children:(0,Ve.jsx)(yt().A,{ref:c,disabled:t,style:b.foregroundInput,focus:s,value:r,onChange:e=>{a(e.target.value)},onKeyDown:t=>{"Tab"===t.key&&n&&(t.preventDefault(),e.onSuggestionSelected(n))},suppressFocusRing:!0,onFocus:()=>{e.onFocus()}})})]})]})})}const St=(0,W().YK)({slackIconAriaLabel:{id:"AiBlockV2ContextTokenInput.slackIconAriaLabel",defaultMessage:"Slack"}});function kt(e){const{disabled:t,currentContexts:n,contextInputRef:i,inputRef:r,query:a,setQuery:s,searchResultMenuIsOpen:l,setSearchResultMenuIsOpen:c,handleUpdateContexts:d,searchResultMenuState:u,menuListStore:p,heightVariant:g,actionButtons:h,showEmptyStateWarning:y}=e,v=(0,mt().P)(),b=(0,W().tz)(),x=(0,m().K8)((()=>"notion"===u.type?u.results.map((e=>({key:e.blockStore.id,item:e,title:e.blockStore.getRenderTitle({userTimeZone:v,intl:b})??(0,ut().L)(b)}))):"slack"===u.type?u.results.map((e=>({key:e.channel.id,title:e.channel.name,item:e}))):"choose"===u.type?[]:void(0,w().HB)(u)),[u,v,b]),S=(0,m().K8)((()=>{const e=p.state.focus.indexGlobal;return void 0!==e?x.at(e):void 0}),[p,x]),k=(0,o.useCallback)((e=>{d(n.filter((t=>!(0,G().n4)(t,e))))}),[n,d]),I=Boolean(h),A=(0,f().eP)(),C=(0,f().IS)((()=>({container:{position:"relative",borderRadius:6,boxShadow:H().Tj.inputBoxShadow,backgroundColor:"dark"===A?H().Tj.palette.translucentGray[100]:"transparent",display:"flex",alignItems:"center",padding:4,gap:4,justifyContent:"space-between",cursor:t?"not-allowed":"pointer",width:"100%"},tokensWrapper:{display:"flex",alignItems:"center",flexWrap:"wrap",gap:4,flex:1,minHeight:bt[g],paddingInlineStart:I?4:void 0,paddingTop:4,paddingBottom:4},actionButtonsWrapper:{display:"flex",alignItems:"center",flexShrink:0,marginInlineEnd:4},firstLinePlaceholder:{position:"absolute",top:0,insetInlineStart:0,height:32,width:"100%"}})),[t,g,I,A]);return(0,Ve.jsxs)("div",{style:C.container,onClick:()=>{t||c(!0)},children:[(0,Ve.jsx)("div",{ref:i,style:C.firstLinePlaceholder}),(0,Ve.jsxs)("div",{style:C.tokensWrapper,children:[(0,Ve.jsx)(xt,{hideCompactMode:I,disabled:t,inputRef:r,query:a,setQuery:s,items:x,currentlyFocusedItem:S,onSuggestionSelected:e=>{l&&(d([e.item,...n]),s(""),c(!1))},hasContextsAlready:n.length>0,onFocus:()=>{c(!0)},isMenuOpen:l,heightVariant:g,isShowingContextWarning:y&&!l}),y&&!l?(0,Ve.jsx)(wt,{disabled:t,heightVariant:g}):void 0,n.map((e=>(0,Ve.jsx)(It,{contextItem:e,disabled:t,onRemove:t=>{k(e),t.preventDefault(),t.stopPropagation()}},function(e){if("currentPage"===e.type)return`currentPage-${e.blockStore.id}`;if("block"===e.type)return`block-${e.blockStore.id}`;if("slack"===e.type)return`slack-${e.channel.id}`}(e))))]}),h?(0,Ve.jsx)("div",{style:C.actionButtonsWrapper,children:h}):void 0]})}function wt(e){const{disabled:t}=e,n=(0,f().IS)((()=>({container:{position:"relative",borderRadius:6,display:"flex",alignItems:"center",justifyContent:"space-between",cursor:t?"default":"pointer",paddingInlineStart:4},contentWrapper:{display:"flex",alignItems:"center",gap:8},placeholder:{color:H().Tj.yellow.text.secondary,fontSize:14,userSelect:"none"}})),[t]);return(0,Ve.jsx)("div",{style:n.container,children:(0,Ve.jsxs)("div",{style:n.contentWrapper,children:[(0,Ve.jsx)(v().I,{icon:ft().exclamationMarkCircleIcon,size:18,colorPalette:"yellow",colorVariant:"secondary"}),(0,Ve.jsx)("div",{style:n.placeholder,children:(0,Ve.jsx)(W().sA,{defaultMessage:"AI blocks work better with context",id:"aiBlockV2ContextInput.placeholder"})})]})})}function It(e){const{contextItem:t,disabled:n,onRemove:o}=e,i=(0,W().tz)(),r=(0,mt().P)(),a=(0,m().K8)((()=>"currentPage"===t.type||"block"===t.type?t.blockStore.getRenderTitle({userTimeZone:r,intl:i})??(0,ut().L)(i):"slack"===t.type?t.channel.name:void(0,w().HB)(t)),[t,i,r]),s=(0,f().IS)((()=>({tokenWrapper:{backgroundColor:H().Tj.lightGrayBannerBackground,cursor:"pointer",paddingInlineStart:4,paddingInlineEnd:4,paddingTop:12,paddingBottom:12,borderRadius:4,maxWidth:150,height:24,color:H().Tj.text.secondary}})),[]);return(0,Ve.jsx)(gt().A,{disabled:n,style:s.tokenWrapper,format:pt().NY.Small,isSingle:!0,shouldShrink:!0,backgroundColor:"transparent",shouldWrap:!1,showRemoveButton:!0,onClickRemove:o,value:(0,Ve.jsx)(Mt,{contextItem:t}),showTooltip:"overflow",tooltip:a,tooltipPlacement:"bottom",tooltipOriginGap:0})}const At=16,Ct=12;function Tt(){return(0,f().IS)((()=>({recordTitleStyle:{display:"flex",alignItems:"center",gap:4}})),[])}function Mt(e){const{contextItem:t}=e;return"currentPage"===t.type?(0,Ve.jsx)(_t,{blockStore:t.blockStore}):"block"===t.type?(0,Ve.jsx)(jt,{blockStore:t.blockStore}):"slack"===t.type?(0,Ve.jsx)(Bt,{channel:t.channel}):(0,w().HB)(t)}function _t(e){const{blockStore:t}=e,n=Tt(),o=(0,m().K8)((()=>t.getIcon()),[t]),i=(0,m().K8)((()=>(0,Ge().Te)(t)),[t]);return(0,Ve.jsxs)("div",{style:n.recordTitleStyle,children:[(0,Ve.jsx)(Ge().B6,{disabled:!0,icon:o,iconRecordCategory:i,isEmptyPage:!1,size:At}),(0,Ve.jsx)("div",{style:Ce().RC,children:(0,Ve.jsx)(W().sA,{defaultMessage:"Current page",id:"ContextTokenInput.currentPage"})})]})}function jt(e){const{blockStore:t}=e,n=Tt(),o=(0,m().K8)((()=>t.getIcon()),[t],{useDeepEqual:!0}),i=(0,m().K8)((()=>(0,Ge().Te)(t)),[t]);return(0,Ve.jsxs)("div",{style:n.recordTitleStyle,children:[(0,Ve.jsx)(Ge().B6,{disabled:!0,icon:o,iconRecordCategory:i,isEmptyPage:!1,size:At}),(0,Ve.jsx)(qe().A,{store:t})]})}function Bt(e){const{channel:t}=e,n=Tt(),o=(0,W().tz)();return(0,Ve.jsxs)("div",{style:n.recordTitleStyle,children:[(0,Ve.jsx)("img",{width:Ct,src:dt().A.images.externalIntegrations.slackIconPng,alt:o.formatMessage(St.slackIconAriaLabel)}),(0,Ve.jsx)("div",{children:t.name})]})}const Rt=(0,W().YK)({notionContextLabel:{id:"notionContextLabel",defaultMessage:"Notion"},slackContextLabel:{id:"slackContextLabel",defaultMessage:"Slack"}}),Et="notion";function Pt(e){var t;const{currentContexts:n,handleUpdateContexts:i,disabled:a,showEmptyStateWarning:s,heightVariant:l,defaultSearchContext:c,onSearchContextSelected:d,actionButtons:u,excludeBlockTypes:f}=e,[g,h]=(0,o.useState)(!1),y=(0,m().uB)(void 0,ot().$),v=(0,m().K8)((()=>["notion",...(0,Re().wd)().filter(zt)]),[]),[b,x]=(0,o.useState)(""),{searchResultMenuState:S,setCurrentSearchContext:k}=function(e){const{availableSearchContexts:t,currentContexts:n,query:i,defaultSearchContext:a,excludeBlockTypes:s}=e,l=t.length>1,[c,d]=(0,o.useState)(a||(l?void 0:Et)),u=(0,p().v3)(),f=(0,ae().r)(),g=(0,m().K8)((()=>lt().NK.state.map((e=>e.store))),[]),{results:h,isResultsLoading:y}=(0,ct().W)({source:"ai_block_v2_page_context_search",query:i,limit:20,type:rt().Vz.BlocksInSpace,excludedBlockIds:n.filter((e=>"slack"!==e.type)).map((e=>e.blockStore.id)),filters:{requireEditPermissions:!1,excludeTemplates:!1},options:{disable:!i||"notion"!==c},peopleBlocksToInclude:"none"}),v=(0,o.useMemo)((()=>h.map((e=>e.store))),[h]),b=(0,o.useMemo)((()=>i?y?"searching":"loaded":"default"),[i,y]),x=(0,m().O$)(r().AppStoreMainEditorCurrentBlockStore),S=(0,m().K8)((()=>{let e;if(i)e=v??[];else{e=[...x?[x]:[],...g]}return s&&s.length>0?e.filter((e=>{const t=e.getType();return!t||!s.includes(t)})):e}),[i,v,g,x,s]);(0,o.useEffect)((()=>{f&&(0,te().Hn)({environment:u,spaceId:f,externalAuthConfig:{type:"universal",app:"slack",spaceId:f}})}),[u,f]);const{channels:k,isFetchingSlack:I}=(0,m().K8)((()=>{if(!f)return{channels:ne().m.channels,isFetchingSlack:ne().m.fetching};const e=ne().c.getStateForBot({type:"universal",app:"slack",spaceId:f});return{channels:e.channels,isFetchingSlack:e.fetching}}),[f]),A=(0,o.useMemo)((()=>Object.values(k).map((e=>({type:"slack",channel:e})))),[k]),[C,T]=(0,o.useState)([]);(0,o.useEffect)((()=>{0===C.length&&A.length>0&&T(A)}),[A,C.length]);const M=function(e,t){const[n,i]=(0,o.useState)(e);return(0,o.useEffect)((()=>{const n=setTimeout((()=>i(e)),t);return()=>clearTimeout(n)}),[e,t]),n}(i,300),[_,j]=(0,o.useState)([]);(0,o.useEffect)((()=>{let e=!1;async function t(){if("slack"===c&&M){const t=await async function(e,t,n,o){const i=100,r=[];for(let a=0;a<t.length;a+=i){const s=t.slice(a,a+i);await new Promise((e=>setTimeout(e,0)));const l=(0,at().Ay)(e,s,n,o);r.push(...l)}return(0,at().Ay)(e,r,n,o)}(M,A,(e=>e.channel.name));e||j(t)}else j(C)}return t(),()=>{e=!0}}),[c,M,A,C]);const B=(0,o.useDeferredValue)(M),R=(0,o.useMemo)((()=>"slack"===c&&B?_:C),[c,B,C,_]),E=(0,o.useMemo)((()=>{if(!c)return{type:"choose"};const e=S.map((e=>({type:e.id===(null==x?void 0:x.id)?"currentPage":"block",blockStore:e})));if("slack"===c){let e="default";return i&&(e=I?"searching":"loaded"),{type:c,status:e,results:R}}if("notion"===c)return{type:c,status:b,results:e};(0,w().HB)(c)}),[c,i,S,R,b,I,x]);return{setCurrentSearchContext:d,searchResultMenuState:Dt({currentContexts:n,state:E})}}({availableSearchContexts:v,currentContexts:n,query:b,defaultSearchContext:c,excludeBlockTypes:f}),I=(0,o.useRef)(null),A=(0,o.useRef)(null);return(0,o.useEffect)((()=>{e.forceOpen&&c&&(h(!0),k(c),null==d||d())}),[e.forceOpen,c,k]),(0,Ve.jsx)(Je().zD,{popupType:Je().nl.Popup,open:g,onDismiss:()=>{h(!1)},placementToOrigin:"bottom",alignmentToOrigin:"start",originRect:null==A||null===(t=A.current)||void 0===t?void 0:t.getBoundingClientRect(),trapFocus:!1,sameWidthAsOrigin:!0,origin:(0,Ve.jsx)(kt,{disabled:a,currentContexts:n,inputRef:I,handleUpdateContexts:i,searchResultMenuIsOpen:g,setSearchResultMenuIsOpen:h,menuListStore:y,query:b,setQuery:x,searchResultMenuState:S,contextInputRef:A,heightVariant:l,actionButtons:u,showEmptyStateWarning:s}),render:()=>(0,Ve.jsx)(Ot,{query:b,setQuery:x,availableSearchContexts:v,onSelectResult:e=>{i([e,...n]),h(!1),x("")},currentContexts:n,setCurrentSearchContext:e=>{var t;k(e),null===(t=I.current)||void 0===t||t.focus()},state:S,menuListStore:y})})}function Dt(e){const{currentContexts:t,state:n}=e,o=new Set,i=new Set;for(const r of t)"block"===r.type?o.add(r.blockStore.id):"slack"===r.type?i.add(r.channel.id):"currentPage"===r.type?o.add(r.blockStore.id):(0,w().HB)(r);if("choose"===n.type)return n;if("notion"===n.type){const e=(0,G().hS)(n.results.filter((e=>!o.has(e.blockStore.id))),(e=>e.blockStore.id));return{...n,results:e}}if("slack"===n.type){const e=n.results.filter((e=>!i.has(e.channel.id))).sort(((e,t)=>e.channel.name.localeCompare(t.channel.name)));return{...n,results:e}}(0,w().HB)(n)}function Ot(e){const{onSelectResult:t,availableSearchContexts:n,state:i,setCurrentSearchContext:r,menuListStore:a,query:s,setQuery:l}=e,c=(0,W().tz)(),d=(0,f().IS)((()=>({backContentWrap:{display:"flex",alignItems:"center",cursor:"pointer",marginTop:4,marginInlineStart:8}})),[]),u=(0,o.useMemo)((()=>(0,at().Ay)(s,n,(e=>"notion"===e?c.formatMessage(Rt.notionContextLabel):"slack"===e?c.formatMessage(Rt.slackContextLabel):void(0,w().HB)(e)))),[n,s,c]),p=(0,o.useMemo)((()=>{const e={key:"no-results",render:()=>(0,Ve.jsx)(nt().u,{title:(0,Ve.jsx)(W().sA,{defaultMessage:"No results found",id:"contextTokenInput.searchResultMenu.noResults.message"})}),action:()=>{}};if("choose"===i.type)return 0===u.length?[e]:u.map((e=>({key:e,render:t=>(0,Ve.jsx)(Vt,{...t,searchContext:e}),action:()=>{r(e),l("")}})));const n=[];return"default"===i.status||"loaded"===i.status||"searching"===i.status?0===i.results.length?"searching"===i.status?(n.push({key:"loading",render:()=>(0,Ve.jsx)(nt().u,{title:(0,Ve.jsx)(W().sA,{defaultMessage:"Loading…",id:"contextTokenInput.searchResultMenu.loading.message"})}),action:()=>{}}),n):(n.push(e),n):n.concat(i.results.map((e=>"block"===e.type?{key:e.blockStore.id,render:t=>(0,Ve.jsx)(st().A,{...t,store:e.blockStore}),action:()=>{t(e)}}:"slack"===e.type?{key:e.channel.id,render:t=>(0,Ve.jsx)(te().qj,{...t,channel:e.channel}),action:()=>{t(e)}}:"currentPage"===e.type?{key:`${e.blockStore.id}-currentPage`,render:t=>(0,Ve.jsx)(st().A,{...t,store:e.blockStore,right:(0,Ve.jsx)(et().E,{content:(0,Ve.jsx)(W().sA,{id:"ContextTokenInput.currentPage",defaultMessage:"Current page"})})}),action:()=>{t(e)}}:void(0,w().HB)(e)))):(0,w().HB)(i.status)}),[i,u,r,t,l]);return(0,Ve.jsx)(pe().A,{menuType:de().gu.Popup,maxHeight:200,header:"choose"!==i.type&&n.length>1&&(0,Ve.jsx)("div",{style:d.backContentWrap,children:(0,Ve.jsx)(tt().p,{iconLeading:it().arrowStraightLeftSmallIcon,size:"xs",colorVariant:"tertiary",onClick:()=>{r(void 0)},children:(0,Ve.jsx)(W().sA,{id:"ContextTokenInput.backButton",defaultMessage:"Back"})})}),children:(0,Ve.jsx)(fe().A,{type:fe().O.Vertical,initialFocus:0,store:a,sections:[{key:"search-results",render:e=>(0,Ve.jsx)(ge().A,{...e}),items:p}]})})}function zt(e){return"slack"===e}const Vt=o.forwardRef(((e,t)=>{const{searchContext:o,...i}=e,r=(0,W().tz)();let a,s;return"notion"===o?a=(0,Ve.jsx)(v().I,{icon:n(558687).notionIcon,size:"default"}):"slack"===o?a=(0,Ve.jsx)(v().I,{icon:n(888382).slackIcon,size:"default"}):(0,w().HB)(o),"notion"===o?s=r.formatMessage(Rt.notionContextLabel):"slack"===o?s=r.formatMessage(Rt.slackContextLabel):(0,w().HB)(o),(0,Ve.jsx)(me().A,{ref:t,...i,icon:a,title:s})}));Vt.displayName="SearchContextMenuItem";var Nt=()=>n(908006),Ft=()=>n(395361),Lt=()=>n(792485),Ut=()=>n(882722),Wt=()=>n(843427),Ht=()=>n(232615),Kt=()=>n(201980),Gt=()=>n(829300),qt=()=>n(515692),$t=()=>n(220331),Yt=()=>n(366437),Qt=()=>n(295304),Zt=()=>n(405623),Xt=()=>n(260850);const Jt=Object.freeze({property:!0});function en(e){const{store:t,minTextHeight:n=50,placeholder:i,showAtMentionMenu:r,fontSize:a=14,fontWeight:s=500,disabled:l,context:c,updateContexts:d}=e,g=(0,p().v3)(),h=(0,m().O$)(Ht().default),y=(0,Lt().S)(),v=(0,o.useMemo)((()=>{const e=new Set;return null==c||c.forEach((t=>{"page"!==t.type&&"currentPage"!==t.type||e.add(t.pageId)})),e}),[c]),b=(0,o.useCallback)((async()=>{const e=Ht().default.state;"editing"===e.mode&&(0,Wt().K)(e.multiSelection)&&e.multiSelection.start.store===t||((0,Xt().z)({store:t}),await Nt().default.afterNextFlush())}),[t]),x=(0,o.useCallback)((e=>{l||(e.preventDefault(),e.stopPropagation(),async function(){await b(),await Nt().default.afterNextFlush(),Gt().Gf({environment:g,mentionTypes:qt().Ap,usePopupOnMobile:!0,mentionSectionOrdering:qt().h2,spaceStore:null==y?void 0:y.spaceStore})}())}),[l,g,b,null==y?void 0:y.spaceStore]),S=(0,o.useCallback)((()=>{const e=u().e.withListenerIgnored((()=>t.getValue()));if(e){const t=(0,Kt().moK)(e).filter((e=>!v.has(e.id))).map((e=>({type:"page",pageId:e.id})));d([...c??[],...t])}}),[c,v,t,d]),k=(0,Ft().Y)(S,200);(0,o.useEffect)((()=>{!async function(){await Nt().default.afterNextFlush(),await Nt().default.afterNextFlush(),(0,Xt().z)({store:t})}()}),[t]);const w=(0,o.useCallback)((()=>{"editing"===h.mode&&re().createAndCommit({userAction:"AiBlockV2InstructionEditor.handleEnter",environment:g,canUndo:!0,perform:e=>{Qt().$D({environment:g,editorMode:"default",store:t,string:"\n",multiSelection:h.multiSelection,disableMentions:!0,disableSlashCommands:!0,disableEmojiCommands:!0,transaction:e})}})}),[g,t,h]),I=(0,f().eP)(),A=(0,f().IS)((()=>({inputWrap:{display:"flex",flexDirection:"column",justifyContent:"space-between",boxShadow:H().Tj.inputBoxShadow,minHeight:n,backgroundColor:"dark"===I?H().Tj.palette.translucentGray[100]:"transparent",borderRadius:6,overflow:"inherit",flexGrow:1,flexShrink:1,paddingInlineStart:6,paddingInlineEnd:6,paddingBottom:6},textContainer:{fontSize:a,fontWeight:s,flexGrow:1,padding:"4px 0",maxHeight:240,overflow:"auto"},placeholder:{color:H().Tj.text.disabled}})),[a,s,n,I]);return(0,Ve.jsxs)("div",{style:A.inputWrap,className:Ut().CCX,children:[(0,Ve.jsx)(Zt().A,{onChange:k,placeholder:i,placeholderStyle:A.placeholder,style:A.textContainer,disabled:l,store:t,pasteBehavior:"inline",disableSlashCommands:!0,disableEmbedMenu:!0,disableEmojiCommands:!1,disableComment:!0,disableSelectAllBlocks:!1,disableSelectionDrag:!0,disableMobileActionBar:!0,disableStyleAnnotations:!1,disableInsertedDeletedAnnotations:!0,disableSuggestEdit:!0,inPageFind:Yt().Os.none,onEnter:w,disabledMentionTypes:Jt}),r?(0,Ve.jsx)("div",{style:{display:"flex",justifyContent:"flex-end",flexDirection:"column",alignItems:"flex-end"},children:(0,Ve.jsx)($t().q,{onClick:x})}):void 0]})}var tn=()=>n(929219),nn=()=>n(440375),on=()=>n(973647),rn=()=>n(68465),an=()=>n(457419),sn=()=>n(129286);const ln=(0,W().YK)({disabledAiCredits:{id:"AiBlockV2.disabled.aiCredits",defaultMessage:"AI is currently disabled"},currentlyGenerating:{defaultMessage:"Generation in progress",id:"AiBlockV2.currentlyGenerating"},cannotEditBlock:{defaultMessage:"This block cannot be edited",id:"AiBlockV2.cannotEditBlock"},insufficientPermissions:{defaultMessage:"You do not have permission to generate this block",id:"AiBlockV2.insufficientPermissions"},noInstructions:{defaultMessage:"No instructions provided",id:"AiBlockV2.noInstructions"},offline:{defaultMessage:"Unavailable while offline",id:"AiBlockV2.offline"},syncing:{defaultMessage:"Saving changes...",id:"AiBlockV2.saving"}});function cn(e){const{store:t,isGenerating:n,permissionLevelCalculator:o}=e,i=(0,Lt().S)(),r=(0,W().tz)(),{blockConfiguration:a}=dn(t),s=!(0,m().O$)(tn().e),l=function(e){const t=(0,m().K8)((()=>0!==nn().A.state.remainingPending),[]);return(0,m().K8)((()=>!!t&&sn().transactionQueue.isPendingTransactionForRecord(e.pointer)),[t,e.pointer])}(t);return(0,m().K8)((()=>{const e=null==i?void 0:i.publicEditModeStore.state;return(0,rn().ZE)(e,null==i?void 0:i.pageStore)?n?{isDisabled:!1,tooltipMessage:r.formatMessage(ln.currentlyGenerating)}:s?{isDisabled:!0,disabledMessage:r.formatMessage(ln.offline)}:l?{isDisabled:!0,disabledMessage:r.formatMessage(ln.syncing)}:!t.canEdit()||(0,an().S)(t)?{isDisabled:!0,disabledMessage:r.formatMessage(ln.cannotEditBlock)}:o.canGenerateBlock()?"summarizeThisPage"===a.type||"extractKeyPointsFromThisPage"===a.type||"custom"!==a.type||a.autofillInstructions?{isDisabled:!1}:{isDisabled:!0,disabledMessage:r.formatMessage(ln.noInstructions)}:{isDisabled:!0,disabledMessage:r.formatMessage(ln.insufficientPermissions)}:{isDisabled:!0,disabledMessage:r.formatMessage(ln.disabledAiCredits)}}),[i,n,t,o,a,r,s,l])}function dn(e){const t=(0,p().v3)(),n=(0,m().K8)((()=>(0,a().f)(e)),[e]);return{blockConfiguration:(0,m().K8)((()=>{const t=null==n?void 0:n.getRecordModel;return function(e){const{model:t,getRecordModel:n}=e;if(!t)return M().Z0;const o=new(M().QN)(n),i=o.migrateToLatest({model:t});if(on().Q.isFail(i))return M().Z0;return i.value}({model:e.getModel(),getRecordModel:t})}),[e,null==n?void 0:n.getRecordModel]),updateBlockConfiguration:(0,o.useCallback)((n=>{const{isGenerating:o,...i}=n;re().createAndCommit({userAction:"AiBlock.updateBlockConfiguration",environment:t,canUndo:!0,perform:t=>{re().applyOperation({store:e,operation:z().op.update({pointer:e.pointer,path:["format"],args:{ai_block_configuration_menu:i}}),transaction:t})}})}),[t,e]),spaceStore:n}}function un(e){const t=(0,o.useRef)(void 0),{blockConfiguration:n,updateBlockConfiguration:i}=dn(e);return{updateBlockSkillType:(0,o.useCallback)((e=>{var o;if(e===n.type)return;if(e===(null===(o=t.current)||void 0===o?void 0:o.type))return i(t.current),void(t.current=n);let r;switch(e){case"custom":r={type:"custom",version:3,autofillInstructions:n.autofillInstructions,context:n.context,searchScopes:n.searchScopes};break;case"extractKeyPointsFromThisPage":r={...n,type:"extractKeyPointsFromThisPage",version:3};break;case"summarizeThisPage":r={...n,type:"summarizeThisPage",version:3};break;default:(0,w().HB)(e)}t.current=n,i(r)}),[n,i]),currentSkillType:n.type}}const pn=(0,W().YK)({custom:{id:"AiBlockV2.inlineConfig.skillSelector.custom",defaultMessage:"Custom output"},summarize:{id:"AiBlockV2.inlineConfig.skillSelector.pageSummary",defaultMessage:"Page summary"},extractKeyPoints:{id:"AiBlockV2.inlineConfig.skillSelector.keyPoints",defaultMessage:"Key points"},selectOutputType:{id:"AiBlockV2.inlineConfig.skillSelector.selectOutputType",defaultMessage:"Select output type"},summarizePlaceholder:{id:"AiBlockV2.inlineConfig.skillSelector.summarizePlaceholder",defaultMessage:"Create a summary about this page"},extractKeyPointsPlaceholder:{id:"AiBlockV2.inlineConfig.skillSelector.extractKeyPointsPlaceholder",defaultMessage:"Find key points on this page"},customAutofillInstructionsPlaceholder:{id:"AiBlockV2.inlineConfig.customAutofillInstructionsPlaceholder",defaultMessage:"Describe the content that should be generated. Use ‘@’ to mention people, pages, or dates"},currentPageOnlyPrefix:{id:"AiBlockV2.inlineConfig.contextType.currentPageOnlyPrefix",defaultMessage:"Current page only —"},currentPageOnlyPrefixNoEmdash:{id:"AiBlockV2.inlineConfig.contextType.currentPageOnlyPrefixNoEmdash",defaultMessage:"Current page —"},notion:{id:"AiBlockConfigView.source.notion",defaultMessage:"Notion"},slack:{id:"AiBlockConfigView.source.slack",defaultMessage:"Slack"},web:{id:"AiBlockConfigView.source.web",defaultMessage:"Web search"},noSources:{id:"AiBlockConfigView.source.noSources",defaultMessage:"Don’t search any sources"}});function mn(e){const{store:t,disabled:n,setSelectedContextType:i,inferredCustomContextType:r}=e,a=(0,f().IS)((()=>({dropdown:{display:"flex",alignItems:"center",padding:"8px 12px",border:`1px solid ${H().Tj.border.secondary}`,borderRadius:6,marginBottom:4,gap:4,cursor:"pointer",fontSize:14,minHeight:36,justifyContent:"space-between",...n?{backgroundColor:H().Tj.inputBackground,cursor:"not-allowed"}:{}},dropdownText:{color:H().Tj.text.primary,display:"flex",alignItems:"center",gap:8},optionIcon:{marginInlineEnd:8,fill:H().Tj.icon.tertiary,width:16,height:16},mobileMenuItemStyle:{borderBottom:`1px solid ${H().Tj.border.secondary}`}})),[n]),s=[{key:"custom",label:(0,Ve.jsx)(W().sA,{...pn.custom}),icon:()=>(0,Ve.jsx)(v().I,{icon:Ie().L,style:{...a.optionIcon,fill:void 0}})},{key:"summarizeThisPage",label:(0,Ve.jsx)(W().sA,{...pn.summarize}),icon:()=>(0,Ve.jsx)(v().I,{icon:Ae().P,style:{...a.optionIcon,fill:void 0}})},{key:"extractKeyPointsFromThisPage",label:(0,Ve.jsx)(W().sA,{...pn.extractKeyPoints}),icon:()=>(0,Ve.jsx)(v().I,{icon:Se().q,style:{...a.optionIcon,fill:void 0}})}],{currentSkillType:l,updateBlockSkillType:c}=un(t),u=s.find((e=>e.key===l)),p=(0,o.useCallback)(((e,t)=>{c(e),i("custom"!==e?"current_page":r),t()}),[c,i,r]);return(0,Ve.jsx)(ce().A,{popupType:d().A.isMobile?ce().z.BottomSheet:ce().z.Popup,bottomSheetInitialState:"half",placementToOrigin:"bottom",trapFocus:!1,sameWidthAsOrigin:!0,disabled:n,renderOrigin:e=>(0,Ve.jsxs)("div",{...(0,le().A)(e,{onClick:e=>e.stopPropagation()}),style:a.dropdown,children:[(0,Ve.jsxs)("span",{style:a.dropdownText,children:[null==u?void 0:u.icon(),(null==u?void 0:u.label)||(0,Ve.jsx)(W().sA,{...pn.selectOutputType})]}),(0,Ve.jsx)(v().I,{icon:ye().arrowChevronSingleDownSmallIcon,size:"sm",colorVariant:"tertiary"})]}),render:e=>{const t={menuType:de().gu.Popup},n=[{key:"skillOptions",render:e=>(0,Ve.jsx)(ge().A,{...e}),items:s.map(((t,n)=>({key:t.key,action:()=>{p(t.key,e.close)},render:e=>(0,Ve.jsx)(me().A,{...e,title:t.label,left:t.icon(),isChecked:t.key===l,mobileIconStyle:{height:28,width:28},titleStyle:d().A.isMobile?{fontSize:17,paddingTop:16,paddingBottom:16}:void 0,style:d().A.isMobile&&n<s.length-1?a.mobileMenuItemStyle:void 0})})))}],o=(0,Ve.jsx)(pe().A,{...t,children:(0,Ve.jsx)(fe().A,{initialFocus:void 0,type:fe().O.Vertical,sections:n,style:{position:"relative"}})});return d().A.isMobile?(0,Ve.jsxs)(Ve.Fragment,{children:[(0,Ve.jsx)("div",{style:{display:"flex",justifyContent:"center",marginTop:22,marginBottom:14},children:(0,Ve.jsx)(ue().D,{styleKey:"titleSmSemibold",children:(0,Ve.jsx)(W().sA,{id:"AiBlockV2.inlineConfig.title",defaultMessage:"Generate"})})}),o]}):o}})}function fn(e){const{handleSaveButton:t,saveButtonDisabledMessage:n}=e,o=(0,f().IS)((()=>({buttonContainer:{zIndex:100,display:"flex",gap:8,alignItems:"center"}})),[]),i=void 0!==n;return(0,Ve.jsx)("div",{style:o.buttonContainer,children:(0,Ve.jsx)(S().m,{disableTooltip:!i,renderTooltip:()=>(0,Ve.jsx)("div",{children:n}),placement:"bottom",render:e=>(0,Ve.jsx)(x().A,{colorPalette:"blue",...e,onClick:t,size:"md",disabled:i,children:(0,Ve.jsx)(W().sA,{id:"AiBlockV2.inlineConfig.done",defaultMessage:"Done"})})})})}function gn({store:e}){const t=(0,m().K8)((()=>e.getIcon()),[e]),n=(0,m().K8)((()=>e.isEmptyPage()),[e]),o=(0,m().K8)((()=>(0,Ge().Te)(e)),[e]),i=(0,f().IS)((()=>({pageTitlePreview:{color:H().Tj.gray.text.tertiary}})),[]);return(0,Ve.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:6},children:[(0,Ve.jsx)(Ge().B6,{disabled:!0,icon:t,iconRecordCategory:o,isEmptyPage:n,size:16}),(0,Ve.jsx)(qe().A,{style:i.pageTitlePreview,store:e})]})}function hn(e){const{blockConfiguration:t,updateBlockConfiguration:n,editDisabledLackOfPermissions:i,selectedContext:r,updateSelectedContext:a}=e,s=(0,W().tz)(),l=(0,o.useMemo)((()=>"custom"!==t.type),[t.type]),c=(0,f().IS)((()=>({textInputContainer:{border:`1px solid ${H().Tj.border.secondary}`,borderRadius:6,padding:"12px",minHeight:150,height:150,position:"relative",...l&&{display:"flex",alignItems:"center",justifyContent:"center",backgroundColor:H().Tj.inputBackground,color:H().Tj.gray.text.tertiary,pointerEvents:"none"}},textInput:{fontSize:14,fontWeight:400,padding:"4px 0",overflow:"auto"}})),[l]),d=(0,o.useRef)(!1),u=(0,o.useCallback)((e=>{"custom"===t.type&&(d.current?d.current=!1:n({...t,autofillInstructions:e}))}),[t,n]),{store:p,setValue:g}=(0,$e().AI)({initialValue:"custom"===t.type?t.autofillInstructions:void 0,onChange:u}),h="custom"===t.type?t.autofillInstructions:void 0,y=(0,m().K8)((()=>p.getValue()),[p]);(0,o.useEffect)((()=>{G().n4(h,y)||(d.current=!0,g(h))}),[h,y,g]);const v=s.formatMessage(function(e){switch(e){case"summarizeThisPage":return pn.summarizePlaceholder;case"extractKeyPointsFromThisPage":return pn.extractKeyPointsPlaceholder;case"custom":return pn.customAutofillInstructionsPlaceholder;default:(0,w().HB)(e)}}(t.type)),b=t.type;switch(b){case"summarizeThisPage":case"extractKeyPointsFromThisPage":return(0,Ve.jsx)("div",{style:c.textInputContainer,children:(0,Ve.jsx)("div",{style:c.textInput,children:v})});case"custom":return(0,Ve.jsx)(en,{store:p,placeholder:v,minTextHeight:150,fontSize:14,fontWeight:400,disabled:i,context:r,updateContexts:a,showAtMentionMenu:!0});default:(0,w().HB)(b)}}function yn(e){const{blockConfiguration:t,updateBlockConfiguration:n,editDisabledLackOfPermissions:i,setSelectedContextType:r,selectedContextType:a,currentPageScope:s}=e,l=(0,W().tz)(),{isSlackConnected:c}=Qe(),u="custom"===t.type,p=i||!u,g=(0,f().IS)((()=>({dropdown:{display:"flex",alignItems:"center",border:`1px solid ${H().Tj.border.secondary}`,borderRadius:6,padding:"8px 12px",gap:4,cursor:"pointer",fontSize:14,minHeight:36,justifyContent:"space-between",...p&&{backgroundColor:H().Tj.inputBackground,color:H().Tj.gray.text.tertiary,cursor:"not-allowed"}},dropdownText:{color:H().Tj.text.primary,display:"flex",alignItems:"center",gap:8},optionIcon:{marginInlineEnd:8,fill:H().Tj.icon.tertiary,width:d().A.isMobile?22:16,height:d().A.isMobile?22:16},currentPageInfoWrapper:{...Ce().RC,lineHeight:1.2,paddingBottom:2},mobileMenuItemStyle:{borderBottom:`1px solid ${H().Tj.border.secondary}`}})),[p]),h=(0,m().K8)((()=>{const e=(0,Ye().a)();return[{key:"current_page",label:e?(0,Ve.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:6},children:[(0,Ve.jsx)("span",{children:l.formatMessage(d().A.isMobile?pn.currentPageOnlyPrefixNoEmdash:pn.currentPageOnlyPrefix)}),(0,Ve.jsx)("div",{style:g.currentPageInfoWrapper,children:(0,Ve.jsx)(gn,{store:e})})]}):l.formatMessage({id:"aiBlock.contextType.currentPage",defaultMessage:"Context"}),icon:()=>(0,Ve.jsx)(v().I,{icon:we().pageIcon,style:{...g.optionIcon,fill:void 0}})},{key:"specified_context",label:l.formatMessage({id:"aiBlock.contextType.specifiedContext",defaultMessage:"Specified context"}),icon:()=>(0,Ve.jsx)(v().I,{icon:be().checkmarkCircleIcon,style:{...g.optionIcon,fill:void 0}})}]}),[l,g]),y=h.find((e=>e.key===a))??h[0],b=(0,o.useCallback)((e=>{if(r(e),!u)return;let o,i;switch(e){case"current_page":o=s,i=[];break;case"specified_context":o=t.context&&t.context.length>0?t.context:void 0;const n=t.searchScopes??[];i=n.length>0?n:[{type:"notion"},...c?[{type:"slack"}]:[]];break;default:(0,w().HB)(e)}n({...t,type:"custom",context:o,searchScopes:i})}),[t,n,s,u,r,c]),x=t.type;switch(x){case"summarizeThisPage":case"extractKeyPointsFromThisPage":return(0,Ve.jsxs)("div",{style:g.dropdown,children:[(0,Ve.jsxs)("span",{style:g.dropdownText,children:[y.icon(),y.label]}),(0,Ve.jsx)(v().I,{icon:ye().arrowChevronSingleDownSmallIcon,size:"sm",colorVariant:"tertiary"})]});case"custom":return(0,Ve.jsx)(ce().A,{popupType:d().A.isMobile?ce().z.BottomSheet:ce().z.Popup,bottomSheetInitialState:"half",disabled:p,placementToOrigin:"bottom",trapFocus:!1,sameWidthAsOrigin:!0,renderOrigin:e=>(0,Ve.jsxs)("div",{...(0,le().A)(e,{onClick:e=>e.stopPropagation()}),style:g.dropdown,children:[(0,Ve.jsxs)("span",{style:g.dropdownText,children:[y.icon(),y.label]}),(0,Ve.jsx)(v().I,{icon:ye().arrowChevronSingleDownSmallIcon,size:"sm",colorVariant:"tertiary"})]}),render:e=>{const t={menuType:de().gu.Popup},n=[{key:"contextOptions",render:e=>(0,Ve.jsx)(ge().A,{...e}),items:h.map(((t,n)=>({key:t.key,action:()=>{b(t.key),e.close()},render:e=>(0,Ve.jsx)(me().A,{...e,title:t.label,left:t.icon(),isChecked:t.key===a,mobileIconStyle:{height:28,width:28},titleStyle:d().A.isMobile?{fontSize:17,paddingTop:12,paddingBottom:12}:void 0,style:d().A.isMobile&&n<h.length-1?g.mobileMenuItemStyle:void 0})})))}],o=(0,Ve.jsx)(pe().A,{...t,children:(0,Ve.jsx)(fe().A,{initialFocus:void 0,type:fe().O.Vertical,sections:n,style:{position:"relative"}})});return d().A.isMobile?(0,Ve.jsxs)(Ve.Fragment,{children:[(0,Ve.jsx)("div",{style:{display:"flex",justifyContent:"center",marginTop:22,marginBottom:14},children:(0,Ve.jsx)(ue().D,{styleKey:"titleSmSemibold",children:(0,Ve.jsx)(W().sA,{id:"AiBlockV2.inlineConfig.contextType.title",defaultMessage:"Using information from"})})}),o]}):o}});default:(0,w().HB)(x)}}function vn(e){const{selectedContext:t,store:n,updateSelectedContext:i,editDisabledLackOfPermissions:r}=e,a=(0,p().v3)(),[s,l]=(0,o.useState)(void 0),c=(0,f().IS)((()=>({contextSection:{marginTop:7},contextInputWrapper:{position:"relative",display:"flex",alignItems:"center"},symbolButton:{width:24,height:24,display:"flex",alignItems:"center",justifyContent:"center",borderRadius:4,cursor:"pointer",backgroundColor:"transparent",border:"none",padding:0},symbolIcon:{width:18,height:18,fill:H().Tj.icon.tertiary}})),[]),[d,u]=(0,o.useState)(!1),g=(0,o.useCallback)((e=>{l(e),u(!0)}),[]),h=(0,ae().r)(),v=(0,m().K8)((()=>{if(!(0,Re().wd)().includes("slack"))return!1;if(h){if(ne().c.getStateForBot({type:"universal",app:"slack",spaceId:h}).failed)return!1}return!0}),[h]),x=(0,W().tz)();return(0,Ve.jsx)("div",{style:c.contextSection,children:(0,Ve.jsx)(se().A,{debugName:"AiBlockConfigViewContextInput",capture:!0,allowMenuList:!1,allowEsc:!0,allowEnter:!0,children:(0,Ve.jsx)("div",{style:c.contextInputWrapper,children:(0,Ve.jsx)(Pt,{heightVariant:"regular",defaultSearchContext:s,onSearchContextSelected:()=>{l(void 0),u(!1)},forceOpen:d,currentContexts:(null==t?void 0:t.map((e=>{if("page"===e.type||"collection"===e.type){const t=n.getSpaceId();return{type:"block",blockStore:new(y().B)(a,{table:A().ev,id:e.pageId,spaceId:t})}}if("currentPage"===e.type){const t=n.getSpaceId();return{type:"currentPage",blockStore:new(y().B)(a,{table:A().ev,id:e.pageId,spaceId:t})}}if("slack"===e.type)return e;(0,w().HB)(e)})))||[],handleUpdateContexts:e=>{const t=[];for(const n of e)if("block"===n.type){const e=n.blockStore.getCollectionStores();e&&e.length>0?t.push(...e.map((e=>({pageId:n.blockStore.id,collectionId:e.id,type:"collection"})))):t.push({pageId:n.blockStore.id,type:"page"})}else"slack"===n.type?t.push(n):"currentPage"===n.type?t.push({type:"currentPage",pageId:n.blockStore.id}):(0,w().HB)(n);i(t)},disabled:r,showEmptyStateWarning:void 0===t||0===t.length,excludeBlockTypes:[he().xd.collectionView,he().xd.collectionViewPage],actionButtons:r?void 0:(0,Ve.jsxs)(Ve.Fragment,{children:[v?(0,Ve.jsx)(b().A,{ariaLabel:x.formatMessage(pn.slack),icon:ke().L,style:c.symbolButton,iconStyle:c.symbolIcon,disabled:r,onClick:e=>{e.stopPropagation(),g("slack")}}):void 0,(0,Ve.jsx)(b().A,{ariaLabel:x.formatMessage(pn.notion),icon:ve().b,style:c.symbolButton,disabled:r,iconStyle:c.symbolIcon,onClick:e=>{e.stopPropagation(),g("notion")}})]})})})})})}function bn(e){const{buttonPopupParent:t,value:n,onChange:i,validScopeOverrides:r,editDisabledLackOfPermissions:a}=e,s=(0,f().IS)((()=>({clearAllButton:{padding:"8px 12px",cursor:"pointer",fontSize:14,color:H().Tj.text.primary,borderBottom:`1px solid ${H().Tj.border.secondary}`,...d().A.isMobile&&{padding:"16px",fontSize:17,width:"100%",textAlign:"start"}},disabledButton:{color:H().Tj.gray.text.tertiary,cursor:"not-allowed"}})),[]),l=(0,o.useCallback)((()=>{a||(i({type:"ai-block",searchScopes:[],useWebSearch:!1}),t.close())}),[i,t,a]);return(0,Ve.jsxs)("div",{style:d().A.isMobile?{width:"100%"}:void 0,children:[d().A.isMobile?(0,Ve.jsx)("div",{style:{display:"flex",justifyContent:"center",marginTop:22,marginBottom:14},children:(0,Ve.jsx)(ue().D,{styleKey:"titleSmSemibold",children:(0,Ve.jsx)(W().sA,{id:"AiBlockV2.inlineConfig.search.title",defaultMessage:"Search"})})}):void 0,(0,Ve.jsx)("div",{style:{...s.clearAllButton,...a?s.disabledButton:{}},onClick:l,role:"button",tabIndex:0,onKeyDown:e=>{"Enter"!==e.key&&" "!==e.key||(e.preventDefault(),l())},children:(0,Ve.jsx)(W().sA,{id:"AiBlockConfigView.dontSearchAnySources",defaultMessage:"Don’t search any sources"})}),(0,Ve.jsx)(Ue,{buttonPopupParent:t,value:n,onChange:i,validScopeOverrides:r,hideConnectorFooter:!0,originSource:"ai_block"})]})}function xn(e){const{searchScopes:t,setSearchScopes:n,editDisabledLackOfPermissions:i}=e,r=(0,f().IS)((()=>({section:{marginTop:8},sectionTitle:{fontSize:14,fontWeight:600,color:H().Tj.text.primary,marginBottom:8,display:"flex",alignItems:"center"},searchContainer:{border:`1px solid ${H().Tj.border.secondary}`,borderRadius:6,cursor:"pointer",...i&&{backgroundColor:H().Tj.inputBackground,color:H().Tj.gray.text.tertiary,cursor:"not-allowed"}},dropdownTrigger:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"8px 12px",fontSize:14,minHeight:36},dropdownText:{fontSize:14,color:H().Tj.text.primary},rightSection:{display:"flex",alignItems:"center",gap:8},tooltipContent:{width:250,whiteSpace:"normal",wordWrap:"break-word"},infoIcon:{marginInlineStart:4,cursor:"help"}})),[i]),a=(0,W().tz)(),{isSlackConnected:s,isWebSearchAvailable:l}=Qe(),c=(0,o.useMemo)((()=>{if(t)return t.filter((e=>"web"===e.type?l:"slack"!==e.type||s))}),[s,l,t]),u=(0,o.useMemo)((()=>{if(!c||0===c.length)return a.formatMessage(pn.noSources);const e=[],t=c.some((e=>"everything"===e.type));return(t||c.some((e=>"notion"===e.type)))&&e.push(a.formatMessage(pn.notion)),(t||c.some((e=>"slack"===e.type)))&&s&&e.push(a.formatMessage(pn.slack)),(t||c.some((e=>"web"===e.type)))&&l&&e.push(a.formatMessage(pn.web)),a.formatList(e,{type:"conjunction"})}),[c,s,l,a]),p=(0,o.useMemo)((()=>["slack"]),[]),m=(0,o.useMemo)((()=>{const e=(null==c?void 0:c.some((e=>"web"===e.type)))??!1;return{type:"ai-block",searchScopes:(null==c?void 0:c.filter((e=>"web"!==e.type)))??[],useWebSearch:e}}),[c]),g=(0,o.useCallback)((e=>{const{searchScopes:t=[],useWebSearch:o}=e;n(o?[...t,{type:"web"}]:t)}),[n]);return(0,Ve.jsxs)("div",{style:r.section,children:[(0,Ve.jsxs)("div",{style:r.sectionTitle,children:[(0,Ve.jsx)(W().sA,{id:"AiBlockConfigView.search",defaultMessage:"Search"}),d().A.isMobile?void 0:(0,Ve.jsx)(S().m,{renderTooltip:()=>(0,Ve.jsx)("div",{style:r.tooltipContent,children:(0,Ve.jsx)(W().sA,{id:"AiBlockConfigView.search.explanation",defaultMessage:"Select what contexts AI can search to complement the information in the other fields"})}),render:e=>(0,Ve.jsx)("div",{...e,children:(0,Ve.jsx)(v().I,{icon:xe().infoCircleSmallIcon,size:"sm",colorVariant:"tertiary",style:r.infoIcon})})})]}),(0,Ve.jsx)("div",{style:r.searchContainer,children:(0,Ve.jsx)(ce().A,{popupType:d().A.isMobile?ce().z.BottomSheet:ce().z.Popup,originGap:2,disabled:i,placementToOrigin:"bottom",alignmentToOrigin:"start",renderOrigin:e=>(0,Ve.jsxs)("div",{style:r.dropdownTrigger,...e,children:[(0,Ve.jsx)("div",{children:(0,Ve.jsx)("div",{style:r.dropdownText,children:u||a.formatMessage({id:"AiBlockConfigView.dontSearchAnySources2",defaultMessage:"Don't search any sources"})})}),(0,Ve.jsx)("div",{style:r.rightSection,children:(0,Ve.jsx)(v().I,{icon:ye().arrowChevronSingleDownSmallIcon,size:"sm",colorVariant:"tertiary"})})]}),render:e=>(0,Ve.jsx)(bn,{buttonPopupParent:e,value:m,onChange:g,validScopeOverrides:p,editDisabledLackOfPermissions:i})})})]})}function Sn(e){const{store:t,onClose:n,permissionLevelCalculator:i}=e,r=!i.canEditConfigurationPanel(),{blockConfiguration:a,updateBlockConfiguration:s}=dn(t),{currentSkillType:l}=un(t),c=(0,m().K8)((()=>{const e=t.getNavigableBlockStore();return(null==e?void 0:e.isTemplate())??!1}),[t]),u=(0,o.useMemo)((()=>{const e=a.context??[],t=a.searchScopes??[];return e.every((e=>"currentPage"===e.type))&&0===t.length?"current_page":"specified_context"}),[a]),p=(0,o.useMemo)((()=>"custom"!==a.type?"current_page":u),[a,u]),[g,h]=(0,o.useState)(p),y=(0,m().K8)((()=>{const e=(0,Ye().a)();return e?[{type:"currentPage",pageId:e.id}]:[]}),[]),b="custom"===a.type?a.context:void 0,x=(0,o.useCallback)((e=>{if(null!=e&&e.some((e=>"currentPage"!==e.type))&&h("specified_context"),"custom"===l){const t={...a,type:"custom",version:a.version,autofillInstructions:a.autofillInstructions,context:G().hS(e,(e=>{switch(e.type){case"currentPage":case"page":return e.pageId;case"collection":return e.collectionId;case"slack":return e.channel.id;default:return(0,w().HB)(e)}})),searchScopes:"custom"===a.type?a.searchScopes:[]};s(t)}}),[l,a,s]),k=(0,o.useCallback)((e=>{s({...a,autoGenerateOnTemplateDuplication:e})}),[a,s]),I=(0,o.useCallback)((e=>{s({...a,searchScopes:e})}),[a,s]),A=(0,W().tz)(),C=(0,o.useMemo)((()=>r?A.formatMessage({id:"AiBlockConfigView.saveButtonDisabled.insufficientEditPermissions",defaultMessage:"Insufficient permissions to edit"}):void 0),[r,A]),T=(0,f().IS)((()=>({container:{padding:16,position:"relative",margin:"0 auto"},content:{paddingTop:2},header:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:16},headerTitle:{fontSize:16,fontWeight:600,color:H().Tj.text.primary},section:{marginBottom:20},sectionTitle:{fontSize:14,fontWeight:600,color:H().Tj.text.primary,marginBottom:8,display:"flex",alignItems:"center"},tooltipContent:{width:250,whiteSpace:"normal",wordWrap:"break-word"},infoIcon:{marginInlineStart:4,cursor:"help"}})),[]),{isSlackConnected:M}=Qe();return(0,Ve.jsxs)("div",{style:T.container,children:[(0,Ve.jsxs)("div",{style:T.header,children:[(0,Ve.jsx)("div",{style:T.headerTitle,children:(0,Ve.jsx)(W().sA,{id:"AiBlockConfigView.aiBlock",defaultMessage:"AI block"})}),(0,Ve.jsx)(fn,{handleSaveButton:n,saveButtonDisabledMessage:C})]}),(0,Ve.jsxs)("div",{style:T.content,children:[(0,Ve.jsxs)("div",{style:T.section,children:[(0,Ve.jsx)("div",{style:T.sectionTitle,children:(0,Ve.jsx)(W().sA,{id:"AiBlockConfigView.generate",defaultMessage:"Generate"})}),(0,Ve.jsx)(mn,{store:t,disabled:r,inferredCustomContextType:u,setSelectedContextType:h})]}),(0,Ve.jsx)("div",{style:T.section,children:(0,Ve.jsx)(hn,{blockConfiguration:a,updateBlockConfiguration:s,editDisabledLackOfPermissions:r,selectedContext:b,updateSelectedContext:x})}),(0,Ve.jsxs)("div",{style:T.section,children:[(0,Ve.jsxs)("div",{style:T.sectionTitle,children:[(0,Ve.jsx)(W().sA,{id:"AiBlockConfigView.using",defaultMessage:"Using"}),d().A.isMobile?void 0:(0,Ve.jsx)(S().m,{renderTooltip:()=>(0,Ve.jsx)("div",{style:T.tooltipContent,children:M?(0,Ve.jsx)(W().sA,{id:"AiBlockConfigView.using.tooltip",defaultMessage:"AI uses information in mentioned page(s) or channels. At this time, AI Block cannot see databases."}):(0,Ve.jsx)(W().sA,{id:"AiBlockConfigView.using.tooltipWithoutSlack",defaultMessage:"AI uses information in mentioned page(s). At this time, AI Block cannot see databases."})}),render:e=>(0,Ve.jsx)("div",{...e,children:(0,Ve.jsx)(v().I,{icon:xe().infoCircleSmallIcon,size:"sm",colorVariant:"tertiary",style:T.infoIcon})})})]}),(0,Ve.jsx)(yn,{blockConfiguration:a,updateBlockConfiguration:s,editDisabledLackOfPermissions:r,setSelectedContextType:h,selectedContextType:g,currentPageScope:y}),"custom"===a.type&&"specified_context"===g?(0,Ve.jsx)(vn,{selectedContext:b,store:t,updateSelectedContext:x,editDisabledLackOfPermissions:r}):void 0,"specified_context"===g?(0,Ve.jsx)(xn,{searchScopes:a.searchScopes,setSearchScopes:I,editDisabledLackOfPermissions:r,setSelectedContextType:h}):void 0,c?(0,Ve.jsx)(Xe,{onToggle:k,toggled:Boolean(a.autoGenerateOnTemplateDuplication)}):void 0]})]})]})}var kn=()=>n(698885);function wn(e){const{traceId:t,feedbackState:n,setFeedbackState:o,iconHeight:i}=e;return(0,Ve.jsx)(kn().j,{setFeedbackState:o,feedbackState:n,traceId:t,feature:"ai_block",iconHeight:i})}var In=()=>n(756117);function An(e){const{hoveredOrSelectionState:t,setHaloShouldBeVisible:n,colorVariant:i="purple",showingConfigView:r}=e,a=(0,f().IS)((()=>({haloContent:{position:"absolute",insetInlineStart:-6,insetInlineEnd:-6,top:-3,bottom:-3,pointerEvents:"none",borderRadius:8,border:`2px solid ${"purple"===i?H().Tj.palette.purple[300]:H().Tj.blue.border.strong}`}})),[i]),s=(0,o.useMemo)((()=>t!==X().l.Default||r),[t,r]);return(0,Ve.jsx)(In().A,{visible:s,initial:{opacity:0,scale:.995},animate:{opacity:t===X().l.Hovered?.45:1,scale:1},exit:{opacity:0,scale:.995},onAnimationStart:()=>{n(!0)},onAnimationEnd:()=>{s||n(!1)},style:a.haloContent})}(0,W().YK)({summarize:{id:"aiBlock.summarize",defaultMessage:"Summarize this page with AI"},findActionItems:{id:"aiBlock.findActionItems",defaultMessage:"Find action items on this page with AI"},helpMeWrite:{id:"aiBlock.helpMeWrite",defaultMessage:"Tell the AI what to write…"},summarizeMeetingTranscript:{id:"aiBlock.summarizeMeetingTranscript",defaultMessage:"Summarize this meeting with any action items and decisions taken"}});function Cn(e){const t=(0,W().tz)(),n=(0,m().K8)((()=>{const n=e.getFormat().ai_last_edited;return n?t.formatDate(n,{day:"numeric",month:"long",year:"numeric"}):void 0}),[t,e]);return(0,m().K8)((()=>{var o;const i=e.getLastEditedTime();if(!i)return;const r=t.formatDate(i,{day:"numeric",month:"long",year:"numeric"});if(r===n)return{lastAiEditGenerationTime:n,lastEditedByName:void 0,lastHumanEditedTime:void 0};return{lastEditedByName:(null===(o=e.getLastEditedByStore())||void 0===o?void 0:o.getDisplayName(t,!1))??void 0,lastHumanEditedTime:r,lastAiEditGenerationTime:n}}),[t,n,e])}function Tn(e){const{disabledResult:t,lastGeneratedProps:n}=e,o=(0,f().IS)((()=>({darkTextColor:{color:"#787774"}})),[]);return t.isDisabled?(0,Ve.jsx)("div",{children:t.disabledMessage}):t.tooltipMessage?(0,Ve.jsx)("div",{children:t.tooltipMessage}):n?(0,Ve.jsxs)("div",{style:{display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",gap:4},children:[n.lastEditedByName&&n.lastHumanEditedTime?(0,Ve.jsx)("div",{style:o.darkTextColor,children:(0,Ve.jsx)(W().sA,{defaultMessage:"Edited by {personName} on {timestamp}",id:"AiBlockV2.lastGeneratedByHuman",values:{personName:n.lastEditedByName,timestamp:n.lastHumanEditedTime}})}):void 0,(0,Ve.jsx)("div",{style:o.darkTextColor,children:(0,Ve.jsx)(W().sA,{defaultMessage:"Generated by Notion AI on {timestamp}",id:"AIBlockV2.LastGeneratedAt",values:{timestamp:n.lastAiEditGenerationTime}})})]}):null}function Mn(e){const t=e?ne().c.getStateForBot({type:"universal",app:"slack",spaceId:e}):void 0;return e=>{const n=null==t?void 0:t.channels[e.channel.id];return Boolean(n)}}function _n(e){const{onSettings:t,handleGenerateClick:n,handleStopGeneratingClick:i,isGenerating:r,traceId:a,isEmpty:s,store:l,permissionLevelCalculator:c}=e,u=(0,W().tz)(),p=cn({store:l,isGenerating:r,permissionLevelCalculator:c}),{isDisabled:m}=p,g=Cn(l),[h,y]=(0,o.useState)(void 0),k=c.canOpenConfigurationPanel(),w=(0,f().IS)((()=>({container:{position:"absolute",top:2,insetInlineEnd:2,display:"flex",gap:6,zIndex:90},generateWrapper:{display:"flex",alignItems:"center",borderRadius:6,padding:"0px",height:"30px",userSelect:"none"},additionalButtonWrapper:{display:"flex",alignItems:"center",backgroundColor:H().Tj.popoverBackground,borderRadius:6,padding:"0px",boxShadow:H().Tj.shadowMD,border:`1px solid ${H().Tj.border.secondaryTranslucent}`,height:"30px",userSelect:"none"},iconButton:{height:"100%",display:"flex",alignItems:"center"},generateButton:{boxShadow:H().Tj.shadowMD,height:"100%",display:"flex",alignItems:"center",gap:4},labelText:{fontSize:"12px"}})),[]),I=(0,o.useCallback)((e=>{e.stopPropagation(),e.preventDefault(),r?i():n()}),[n,i,r]),A=r?u.formatMessage({id:"AiBlockV2.generatingTooltip",defaultMessage:"Generating..."}):u.formatMessage({id:"AiBlockV2.generateTooltip",defaultMessage:"Generate"});return(0,Ve.jsxs)("div",{style:w.container,children:[(0,Ve.jsxs)("div",{style:w.additionalButtonWrapper,children:[d().A.isMobile||s||r?null:(0,Ve.jsx)(wn,{traceId:a,feedbackState:h,setFeedbackState:y,iconHeight:"100%"}),(0,Ve.jsx)(S().m,{renderTooltip:()=>k?u.formatMessage({id:"AiBlockV2.settingsTooltip",defaultMessage:"Settings"}):u.formatMessage({id:"AiBlockV2.settingsTooltipDisabled",defaultMessage:"Insufficient permissions to edit"}),render:e=>(0,Ve.jsx)(b().A,{...e,disabled:!k,icon:O().M,onClick:t,ariaLabel:u.formatMessage({id:"AiBlockV2.settingsButton",defaultMessage:"Settings"}),size:"sm",colorVariant:"secondary",style:w.iconButton})})]}),(0,Ve.jsx)("div",{style:w.generateWrapper,children:(0,Ve.jsx)(S().m,{disableTooltip:!m&&!g,renderTooltip:()=>(0,Ve.jsx)(Tn,{store:l,disabledResult:p,lastGeneratedProps:g}),render:e=>(0,Ve.jsxs)(x().A,{...e,onMouseDown:e=>e.preventDefault(),onClick:I,disabled:m,ariaLabel:A,size:"md",style:w.generateButton,colorPalette:"blue",children:[r?(0,Ve.jsx)(v().I,{icon:D().U,size:"sm"}):void 0,(0,Ve.jsx)("div",{style:w.labelText,contentEditable:!1,children:A})]})})})]})}const jn=(0,W().YK)({failedToGenerate:{id:"AIBlockV2.FailedToGenerate",defaultMessage:"Failed to generate. Please try again later."}});function Bn(e){const{spaceId:t,currentUserId:n}=(0,m().K8)((()=>{var t,n;return{spaceId:null===(t=(0,a().f)(e))||void 0===t?void 0:t.id,currentUserId:null===(n=r().default.state.currentUserStore)||void 0===n?void 0:n.id}}),[e]),o=(0,m().K8)((()=>e.getModel()),[e]),i=(0,m().K8)((()=>{var t;return null===(t=e.getNavigableBlockStore())||void 0===t?void 0:t.pointer}),[e]);return(0,m().K8)((()=>function(e){const{model:t,spaceId:n,currentUserId:o,getRecordRole:i,getCanReadSlackChannel:r,currentPagePointer:a}=e;if(!t)return"reader";if(!n||!o)return"reader";const s=i(t.pointer)??"none";if(!(0,I().Tt)(s))return"reader";const l=i({id:n,table:T().NX})??"none";if(!(0,I().Tt)(l))return"reader";if(!(0,I().p2)(s))return"configuration_reader";const c=(0,M().Lv)({model:t});if("custom"===c.type)return _({referenceContext:c.context,getCanReadSlackChannel:r,getRecordRole:i})?"editor":"reader";if("summarizeThisPage"===c.type||"extractKeyPointsFromThisPage"===c.type)return a?_({referenceContext:[{type:"page",pageId:a.id}],getCanReadSlackChannel:r,getRecordRole:i})?"editor":"configuration_reader":"reader";(0,w().HB)(c)}({spaceId:t,currentUserId:n,getCanReadSlackChannel:Mn(t),getRecordRole:e.getRecordRole,model:o,currentPagePointer:i})),[t,n,e,o,i])}function Rn(e){const{store:t,hoveredOrSelectionState:n,setHaloShouldBeVisible:r,showingOverlay:s,disabled:f,disableHoverMenu:h}=e,v=(0,p().v3)(),b=(0,W().tz)(),x=(0,m().K8)((()=>(0,a().f)(t)),[t]),[S,k]=(0,o.useState)(!1),I=new j(Bn(t)),{blockConfiguration:C,updateBlockConfiguration:T}=dn(t);(0,o.useEffect)((()=>{Q().EF.state===t.pointer.id&&(!function(e){const{updateBlockConfiguration:t,blockConfiguration:n,environment:o,spaceStore:i}=e,r=new Set,a=null==i?void 0:i.id;if(a&&"context"in n){for(const e of n.context??[])if("collection"===e.type||"page"===e.type||"currentPage"===e.type){const t=new(y().B)(o,{table:A().ev,id:e.pageId,spaceId:a});u().e.withListenerIgnored((()=>!t.canRead()))&&r.add(e.pageId)}else"slack"===e.type?Mn(a)(e)||r.add(e.channel.id):(0,w().HB)(e);t({...n,context:(n.context??[]).filter((e=>"slack"===e.type?!r.has(e.channel.id):!r.has(e.pageId)))})}}({environment:v,blockConfiguration:C,updateBlockConfiguration:T,spaceStore:x}),k(!0),r(!0),Q().EF.setState(void 0))}),[C,v,x,t.pointer.id,T,r]),(0,o.useEffect)((()=>{(0,ee().A)()}),[n]);const M=(0,o.useCallback)((e=>{g().ui({message:e,showCancel:!1,keepFocus:!1,items:[{label:b.formatMessage(g()._0.dismissButtonLabel),onAccept:G().D_}]})}),[b]),[_,B]=(0,o.useState)(!1),D=(0,m().K8)((()=>t.isGenerating()),[t]);(0,o.useEffect)((()=>{B(D)}),[D]);const O=t.id,z=(0,o.useMemo)((()=>{var e;return{block_id:t.id,prompt_type:C.type,search_scopes_enabled:null===(e=C.context)||void 0===e?void 0:e.map((e=>e.type))}}),[C.context,C.type,t.id]),[V,N]=(0,o.useState)(void 0),F=(0,o.useCallback)((async()=>{(0,i().u)({environment:v,event:{eventName:"ai_block_generate_clicked",eventProperties:z}});const e=new AbortController;N(e),await async function(e){const{environment:t,setIsGenerating:n,onError:o,store:i,intl:r,abortController:s}=e;function l(){o(r.formatMessage(jn.failedToGenerate))}n(!0);const c=async()=>{var e,n;const o=null===(e=(0,a().f)(i))||void 0===e?void 0:e.id;if(!o)return;const r=null===(n=i.getNavigableBlockStore())||void 0===n?void 0:n.pointer;if(!r)return;const l=await(0,ie().B)(t,{spaceId:o,userId:t.currentUser.id,amount:1,name:"ai_usage"});if(!(0,L().e2)(l))return void oe().K(t,{from:"ai_block",upsell:l.upsell,spaceStore:(0,a().f)(i)});const c=await Y().callStreamApi({eventName:"generateAiBlock",environment:t,data:{blockPointer:{...i.pointer,spaceId:o},parentPagePointer:{...r,spaceId:o},analyticsSource:"client"},abortSignal:s.signal}),d=await(0,ie().B)(t,{spaceId:o,userId:t.currentUser.id,amount:"unknown",name:"ai_usage"});if((0,P().kX)(c)||"success"!==c.type||!K().hS.is(c.data))throw new Error("InvalidServerResponse");{let e;for await(const n of c.data){if(!(0,P().PX)(n)){if((0,P().kX)(n)){if(null!=d&&d.upsell&&(0,E().iDI)(n,E().yPR))return void oe().K(t,{from:"ai_limit_in_app",upsell:d.upsell,spaceStore:(0,a().f)(i)});throw"ValidationError"===n.name?new(E().yI4)(n.body.debugMessage??"Unknown error"):new Error("InvalidStreamResponse")}throw new Error("InvalidStreamResponse")}En({environment:t,markdownString:n.markdownString,aiBlockStore:i}),e=n.markdownString}if(!e||0===e.length)throw new Error("EmptyGeneration")}};try{return await(0,$().L5)({fn:c,retryAttemptsMS:[50,100,200],retryAttemptRandomOffsetMS:0,initialInput:void 0,handleError:(e,t,n)=>s.signal.aborted?{status:"throw",error:new Error("User aborted request.")}:(t&&l(),function(e){const{type:t,aiBlockId:n,spaceId:o,miscDataToConvertToString:i,error:r}=e;R().log({from:"generateAiBlockTask",level:"error",type:t,error:r?(0,q().convertErrorToLog)(r):void 0,data:{miscDataToConvertToString:{aiBlockId:n,spaceId:o,...i}}})}({aiBlockId:i.id,spaceId:i.getSpaceId(),type:e.name,error:e,miscDataToConvertToString:{source:"client",isRetrying:!t,retryAttempt:n}}),t?{status:"throw",error:e}:{status:"retry"})})}finally{n(!1)}}({environment:v,intl:b,onError:M,store:t,setIsGenerating:B,abortController:e})}),[v,b,M,z,t]),U=(0,o.useCallback)((()=>{null==V||V.abort(),B(!1),(0,i().u)({environment:v,event:{eventName:"ai_block_stop_generate_clicked",eventProperties:z}})}),[V,v,z,B]),H=(0,o.useCallback)((()=>{_||k(!0)}),[_]),Z=(0,o.useCallback)((()=>{(0,i().u)({environment:v,event:{eventName:"ai_block_settings_panel_opened",eventProperties:z}}),k(!0),r(!0)}),[v,r,z]),ne=(0,o.useCallback)((()=>{k(!1),r(!1),(0,i().u)({environment:v,event:{eventName:"ai_block_settings_done_clicked",eventProperties:z}})}),[v,r,z]),re=(0,m().K8)((()=>!t.hasContent()),[t]),ae=(0,m().K8)((()=>t.getContentStore()),[t]),se=!S&&n!==X().l.Default;return(0,o.useEffect)((()=>{const e=u().e.withListenerIgnored((()=>{var e;return null===(e=(0,a().f)(t))||void 0===e?void 0:e.id}));e&&(0,te().Hn)({environment:v,spaceId:e,externalAuthConfig:{type:"universal",app:"slack",spaceId:e}})}),[v,t]),(0,Ve.jsxs)(c().A,{name:"AiBlockV2",children:[(0,Ve.jsxs)("div",{style:{paddingInlineStart:8,minHeight:35,position:"relative"},onClick:re?H:void 0,children:[se?(0,Ve.jsx)(_n,{onSettings:Z,handleGenerateClick:F,handleStopGeneratingClick:U,isGenerating:_,traceId:O,isEmpty:re,permissionLevelCalculator:I,store:t}):void 0,S?(0,Ve.jsx)(l().s,{allowSelectionWithin:!0,onClick:e=>e.stopPropagation(),children:(0,Ve.jsx)(Sn,{store:t,onClose:ne,permissionLevelCalculator:I})}):(0,Ve.jsx)(J().A,{emptyPlaceholder:(0,Ve.jsx)(Pn,{placeholderText:b.formatMessage({id:"AiBlockV2.EmptyEditingPlaceholder3",defaultMessage:"Your AI content will be generated here - click to setup"})}),disabled:f||_,store:ae,disableHoverMenu:h||n!==X().l.SelectedDescendant,disableDrag:d().A.isMobile})]}),s?(0,Ve.jsx)(An,{hoveredOrSelectionState:n,setHaloShouldBeVisible:r,colorVariant:"blue",showingConfigView:S}):void 0]})}function En(e){const{environment:t,markdownString:n,aiBlockStore:o}=e,i=o.getSpaceId(),r=t.currentUser.id;if(!r)return;const a={table:F().oo,id:r},l=t.idCreator.getSpaceIdCreatorSync(i),c=(0,B().hM)(n),u=s().default.checkGate({gateName:"bullets_in_simple_tables_yuh"}),p=(0,k().ie)({pageId:o.id,recordMap:N().RecordMap.create(),updates:[{action:"insert",blocks:c}],spaceId:i,legacyNonCrdt:!0,idCreator:l,actorPointer:a,uriContext:{baseUrl:d().A.domainBaseUrl,publicDomainName:d().A.publicDomainName},agentBlocksOnPage:[],suppressErrors:!0,options:{simpleBulletsEnabled:u}});re().createAndCommit({userAction:"aiBlockV2.handleMarkdownStreamResponse",environment:t,canUndo:!0,perform:e=>{o.getContentIds().forEach((t=>{re().applyOperation({store:o,operation:(0,V().TQ)({blockParentId:o.id,recordId:t}),transaction:e})}));for(const n of p)if((0,U().ph)(n)){const o=new(y().B)(t,n.pointer);re().applyCrdtTextOperation({store:o,operation:n,invertedOperation:void 0,transaction:e})}else if((0,z().$Y)(n)||(0,z().mP)(n))switch(n.pointer.table){case A().ev:{const o=new(y().B)(t,n.pointer);re().applyOperation({store:o,operation:n,transaction:e});break}default:{const o=new(h().pm)({environment:t,pointer:n.pointer,path:n.path});re().applyOperation({store:o,operation:n,transaction:e})}}else(0,w().HB)(n);Z().zv({store:o.getFormatStore(),data:{ai_last_edited:Date.now()},transaction:e})}})}function Pn(e){const{placeholderText:t}=e,n=(0,f().IS)((()=>({textWrapper:{caretColor:H().Tj.text.tertiary,color:H().Tj.text.tertiary,display:"flex",alignItems:"center",cursor:"pointer",minHeight:35}})),[]);return(0,Ve.jsx)("div",{style:n.textWrapper,children:t})}},427636:(e,t,n)=>{n.d(t,{A:()=>r});n(296540);var o=()=>n(100622),i=n(474848);const r=function(e){const{botStore:t,avatarSize:r,shouldShowBadge:a,style:s,inline:l}=e,c=(0,n(69708).tz)(),d=(0,n(484714).Y0)(),u=(0,n(590526).K8)((()=>null==t?void 0:t.getDisplayName(c)),[t,c]),{outerStyle:p,avatarWrapStyle:m,badgeStyle:f}=(0,n(401497).IS)((()=>({outerStyle:{display:"flex",alignItems:"center",minWidth:0,...s},avatarWrapStyle:l?{width:"none",minHeight:"none",marginInlineEnd:6}:{marginInlineEnd:6},badgeStyle:{padding:"2px 6px",borderRadius:4,color:o().Tj.text.secondary,background:o().Tj.legacyDefaultSelectColor,fontSize:n(726637).A.isMobile?11:9,lineHeight:d.isAndroid?1.5:1,textTransform:"uppercase",letterSpacing:"0.04em",marginInlineStart:8,marginTop:1}})),[s,l,d]);return(0,i.jsxs)("div",{style:p,children:[(0,i.jsx)("div",{style:m,children:(0,i.jsx)(n(256863).A,{botStore:t,size:r})}),(0,i.jsx)("div",{style:{...n(284371).RC},children:u}),a?(0,i.jsx)("div",{style:f,children:"Bot"}):void 0]})}},435386:(e,t,n)=>{n.d(t,{w:()=>i});var o=()=>n(651784);function i({url:e,config:t}){const n=(0,o().parseRoute)({url:e,baseUrl:t.domainBaseUrl,publicDomainName:t.publicDomainName,isMobile:!1,protocol:t.protocol,currentUrl:void 0});return"page"===n.name?n.blockId:"team"===n.name?n.peekViewBlockId:void 0}},445560:(e,t,n)=>{n.d(t,{X:()=>o});const o=n(757695).Store.createValue({shouldReset:!1},{name:"MobileAssistantMenuStore"})},448693:(e,t,n)=>{n.d(t,{Ay:()=>b,t_:()=>x,v7:()=>S});n(296540);var o=()=>n(484714),i=()=>n(590526),r=()=>n(457205),a=()=>n(849255),s=()=>n(764880),l=()=>n(784892),c=()=>n(534177),d=()=>n(883701),u=()=>n(427636),p=()=>n(256863),m=()=>n(848401),f=()=>n(994006),g=()=>n(453697),h=n(474848);function y(e){const t=(0,o().v3)(),{actor:n,format:s,hasTooltip:y,tooltipHeader:b,hasPersonHoverCard:x,spaceStore:S}=e,k=(0,i().K8)((()=>{const e=n.asActor;if(e)return(0,d().J)(t,e)}),[n,t]);return(0,h.jsx)(m().Ay,{...e,renderAvatar:e=>{if(k)return k instanceof r().v?s===l().NY.Inline?(0,h.jsx)(p().A,{botStore:k,size:e,style:v}):(0,h.jsx)(u().A,{botStore:k,avatarSize:e,inline:!0,style:v}):k instanceof a().L?s===l().NY.Inline?(0,h.jsx)(g().A,{userStore:k,size:e,avatarShouldShowShadow:!1,hasTooltip:y??!0,style:v,tooltipHeader:b,hasPersonHoverCard:x}):(0,h.jsx)(f().A,{userStore:k,avatarSize:e,inline:!0,hasTooltip:y,hasPersonHoverCard:x,style:v,tooltipHeader:b,spaceStore:S}):void(0,c().HB)(k)}})}const v={minWidth:0};y.Format=l().NY;const b=y;function x(e){const{userValue:t,...n}=e,o=(0,s().MR)(t);return(0,h.jsx)(y,{actor:o,...n})}function S(e){const{botValue:t,...n}=e;return(0,h.jsx)(y,{actor:(0,s().oC)(t),hasPersonHoverCard:!1,...n})}x.Format=m().mI,S.Format=m().mI},448801:(e,t,n)=>{n.d(t,{i:()=>i});n(944114),n(517642),n(658004),n(733853),n(845876),n(432475),n(515024),n(731698);var o=()=>n(371562);o();function i(e,t){const n=o().create({arrays:{detectMove:!1,includeValueOnMove:!0}}).diff(e,t);if(!n)return{beforeOps:{},removeOps:new Set};let i=[],r=[];for(const o in n)"_t"!==o&&("_"===o[0]?i.push(parseInt(o.slice(1),10)):1===n[o].length&&r.push({index:parseInt(o,10),value:n[o][0]}));const a={},s=new Set,l=[...e];i=i.sort(((e,t)=>e-t));for(let o=i.length-1;o>=0;o--){const e=i[o],t=l.splice(e,1)[0];s.add(t)}r=r.sort(((e,t)=>e.index-t.index));for(let o=0;o<r.length;o++){const e=r[o];a[e.value]=l[e.index],l.splice(e.index,0,e.value)}return{beforeOps:a,removeOps:s}}},460957:(e,t,n)=>{n.d(t,{E:()=>a});n(581454);var o=()=>n(201980),i=()=>n(718957),r=()=>n(29554);function a(e){const{multiSelection:t}=e;return(0,i().$W)(t).map((({store:e,selection:t})=>{const n=(0,o().RQ)(e.getValue()),i=(0,o().xbM)(n,t),{tokensInsideRange:a}=(0,o().AI5)(n,i.startIndex,i.endIndex);return(0,r().r4)(a,e)})).join("\n\n")}},471095:(e,t,n)=>{n.r(t),n.d(t,{iconDefinition:()=>o,lockFillIcon:()=>i});n(296540);const o={viewBox:"0 0 20 20",fittedViewBox:"3.97 1.95 12.05 15.66",svg:(0,n(474848).jsx)("path",{d:"M6 5.95a4 4 0 1 1 8 0v1.433a2.426 2.426 0 0 1 2.025 2.392v5.4A2.425 2.425 0 0 1 13.6 17.6H6.4a2.425 2.425 0 0 1-2.425-2.425v-5.4c0-1.203.876-2.201 2.025-2.392zm6.75 1.4v-1.4a2.75 2.75 0 1 0-5.5 0v1.4zm-2.2 5.458a1.35 1.35 0 1 0-1.1 0v1.242a.55.55 0 0 0 1.1 0z"})},i=(0,n(340498).wt)("lockFill",o,"fill")},497577:(e,t,n)=>{n.d(t,{E:()=>r});var o=()=>n(401497),i=()=>n(100622);function r(e){const{size:t,style:n}=e;return(0,o().IS)((()=>({icon:{width:.6*t,height:.6*t,fill:i().Tj.text.secondary},iconContainer:{width:t,height:t,borderRadius:"100%",background:i().Tj.border.secondaryTranslucent,display:"flex",alignItems:"center",justifyContent:"center",flexShrink:0,...n}})),[t,n])}},526905:(e,t,n)=>{n.d(t,{b9:()=>p,bS:()=>u,xA:()=>m});n(581454);var o=()=>n(907258),i=()=>n(416504),r=()=>n(763884),a=()=>n(72234),s=()=>n(866805),l=()=>n(244828);const c=144e5,d=new Map;function u(e){return`${e}:user_first_active_today`}function p(e){var t;const n=function(e){let t=d.get(e);return t||(t=new Intl.DateTimeFormat("en-CA",{timeZone:e,year:"numeric",month:"2-digit",day:"2-digit"}),d.set(e,t)),t}((null===(t=o().default.state.currentUserSettingsStore)||void 0===t||null===(t=t.getSettings())||void 0===t?void 0:t.time_zone)??(0,i().P)()),r=n.formatToParts(new Date(e-c)),a=Object.fromEntries(r.map((e=>[e.type,e.value])));return`${a.year??"0000"}-${a.month??"00"}-${a.day??"00"}`}async function m(e){var t;const{environment:i,userId:c,spaceId:d}=e;if(!(0,s().OE)())return!1;const m=Date.now(),f=p(m),g=r().K.get({userId:c,key:u(d)});if((null==g?void 0:g.dateBucket)===f)return!1;const h=await async function(e){const t=o().default.state.sidebarSpaceViewStore;if(t&&t.getSpaceId()===e)return await t.load(),t}(d);if(!h)return!1;const y=h.getSettings();if((null==y?void 0:y.user_daily_first_active_local_date_bucket)===f)return r().K.set({userId:c,key:u(d),value:{dateBucket:f,triggeredAt:y.user_daily_first_active_at_utc??m}}),!1;r().K.set({userId:c,key:u(d),value:{dateBucket:f,triggeredAt:m}});const{maybeUpdateDailyBriefPageIfTemplateUpdated:v}=await Promise.all([n.e(35530),n.e(9773),n.e(55373),n.e(36192),n.e(71562),n.e(96346),n.e(27992),n.e(63452),n.e(66249),n.e(92845),n.e(87249),n.e(79022),n.e(14578),n.e(87017),n.e(34877),n.e(46414),n.e(11676),n.e(61165),n.e(47668),n.e(94522),n.e(24587),n.e(44584),n.e(67494),n.e(10522),n.e(40992),n.e(88455),n.e(33893),n.e(48486),n.e(56351)]).then(n.bind(n,833779));await v({environment:i,spaceViewStore:h});const b=null==y||null===(t=y.agent_personalization_settings)||void 0===t?void 0:t.daily_brief_prompt;if(null==b||!b.tooltip_dismissed_at){const{startDailyBriefChat:e}=await Promise.all([n.e(35530),n.e(9773),n.e(55373),n.e(36192),n.e(71562),n.e(96346),n.e(27992),n.e(63452),n.e(66249),n.e(92845),n.e(87249),n.e(79022),n.e(14578),n.e(87017),n.e(34877),n.e(46414),n.e(11676),n.e(61165),n.e(47668),n.e(94522),n.e(24587),n.e(44584),n.e(67494),n.e(10522),n.e(40992),n.e(88455),n.e(33893),n.e(48486),n.e(73199)]).then(n.bind(n,30154));await e({environment:i,showChatSidebarSource:"daily_brief_reminder",skipOpeningPanel:!0})}return l().createAndCommit({environment:i,userAction:"dailyFirstActivityActions.markTriggered",canUndo:!1,perform:e=>{a().AG(h,e,{user_daily_first_active_local_date_bucket:f,user_daily_first_active_at_utc:m})}}),!0}},529099:(e,t,n)=>{n.r(t),n.d(t,{aiFaceIcon:()=>r,iconDefinition:()=>i});n(296540);var o=n(474848);const i={viewBox:"0 0 20 20",fittedViewBox:"4.13 2.52 13.27 14.61",svg:(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)("path",{d:"M12.758 9.976a1.178 1.178 0 1 0 .377-2.326 1.178 1.178 0 0 0-.377 2.326M6.547 8.97a1.178 1.178 0 1 0 .377-2.327 1.178 1.178 0 0 0-.377 2.326"}),(0,o.jsx)("path",{d:"M10.573 5.554a3.917 3.917 0 0 1 6.743.035.625.625 0 1 1-1.08.63 2.667 2.667 0 0 0-4.591-.023l-5.398 9.015 4.192.68a.625.625 0 0 1-.2 1.233l-5.102-.827a.625.625 0 0 1-.436-.938zM4.36 3.517a3.92 3.92 0 0 1 5.572.356.625.625 0 1 1-.945.818 2.67 2.67 0 0 0-3.795-.243.625.625 0 1 1-.833-.931"})]})},r=(0,n(340498).wt)("aiFace",i,"default")},529803:(e,t,n)=>{n.d(t,{A:()=>i});class o extends(()=>n(757695))().Store{}const i=new o},539412:(e,t,n)=>{n.d(t,{$y:()=>v,jc:()=>y,x9:()=>h});n(296540);var o=()=>n(564884),i=()=>n(484714),r=()=>n(590526),a=()=>n(212473),s=()=>n(922189),l=()=>n(69708),c=()=>n(209660),d=()=>n(511393),u=()=>n(529803),p=()=>n(780262),m=()=>n(807778),f=()=>n(671812),g=n(474848);function h(){const e=(0,r().K8)((()=>{const{editsBlocked:e}=p().A.state;return e??!1}),[]);return(0,r().K8)((()=>(0,m().Jq)()),[])&&e}function y(){return(0,r().K8)((()=>{var e;const t=u().A.state;return null==t||null===(e=t.data)||void 0===e?void 0:e.invoiceHostedUrl}),[])}function v(){const e=(0,i().v3)(),t=y(),n=(0,r().K8)((()=>{var e;const t=u().A.state;return(null==t||null===(e=t.data)||void 0===e?void 0:e.overdueInvoiceCount)??0}),[]),o=(0,r().K8)((()=>(0,d().h)(e)),[e]),p=function(e,t){if(e)return t>1?(0,g.jsx)(l().sA,{defaultMessage:"Access to Notion is limited because we couldn’t process {overdueInvoiceCount, plural, one {your last payment} other {{overdueInvoiceCount} payments}}.",id:"uncollectibleExperience.uncollectibleExperienceOverlay.multipleInvoicesMessageContent",values:{overdueInvoiceCount:t}}):(0,g.jsx)(l().sA,{defaultMessage:"Access to Notion is limited because we couldn’t process your last payment",id:"uncollectibleExperience.uncollectibleExperienceOverlay.messageContent"});return(0,g.jsx)(l().sA,{id:"uncollectibleExperience.uncollectibleExperienceOverlay.memberMessageContent",defaultMessage:"Access to Notion is limited"})}(o,n),m=function(e){if(e)return;return(0,g.jsx)(l().sA,{id:"uncollectibleExperience.uncollectibleExperienceOverlay.memberSecondaryLabel",defaultMessage:"Contact a workspace owner to update your workspace’s payment method"})}(o),h=function(e,t,n){if(t){const o=(0,f().a)(n);return n=>{o&&(b(t,e),o(n))}}return n=>{b(t,e),c().Ow()}}(e,o,t),v=function(e){if(e)return(0,g.jsx)(l().sA,{defaultMessage:"View unpaid invoice",id:"uncollectibleExperience.uncollectibleExperienceOverlay.buttonLabel"});return(0,g.jsx)(l().sA,{id:"uncollectibleExperience.uncollectibleExperienceOverlay.memberButtonLabel",defaultMessage:"View workspace owner"})}(o);return{clickAction:h,ctaMessage:v,primaryMessage:p,secondaryMessage:m,ctaIcon:o?a().arrowUpRightSquareIcon:s().personCircleFillIcon,tooltipBodyMessage:o?v:m,isWorkspaceOwner:o,overdueInvoiceCount:n}}function b(e,t){(0,o().u)({environment:t,event:{eventName:"subscription_uncollectible_blurred_experience_cta_clicked",eventProperties:{is_workspace_owner:e}}})}},541235:(e,t,n)=>{n.d(t,{Ud:()=>a,YD:()=>r,c$:()=>o,q_:()=>i});const o={"sprints-onboarding":{steps:[{id:"current-sprint-view-tooltip"},{id:"sprint-task-tooltip"},{id:"complete-sprint-button-tooltip"}]},"enhanced-qna-onboarding":{steps:[{id:"find-in-tooltip"},{id:"mention-tooltip"}]},"jira-sync-onboarding":{steps:[{id:"all-projects-tooltip"},{id:"all-issues-tooltip"},{id:"database-views-and-filters-tooltip"},{id:"settings-to-setup-projects-and-issues"}]},"project-management-import-onboarding":{steps:[{id:"your-teamspace-tooltip"},{id:"all-projects-tooltip"},{id:"navigate-to-project-tasks-tooltip"},{id:"project-customization-tooltip"},{id:"related-tasks-database-views-tooltip"}]},"ai-comment-onboarding":{steps:[{id:"ai-comment-onboarding-tooltip"}]},database_onboarding:{steps:[{id:"database_onboarding_status_property_tooltip"},{id:"database_onboarding_add_property_tooltip"},{id:"database_onboarding_database_page_tooltip"},{id:"database_onboarding_board_view_tooltip"}]},"new-user-home-workspace-tour":{steps:[{id:"teamspaces"}]}},i="completed",r="dismissed";function a(e,t){return null==t?void 0:t[e]}},546461:(e,t,n)=>{n.d(t,{K4:()=>S,To:()=>A,fi:()=>k,q8:()=>x,u:()=>b});n(16280),n(18107),n(967357);var o=n(296540),i=()=>n(484714),r=()=>n(792485),a=()=>n(590526),s=()=>n(79926),l=()=>n(140934),c=()=>n(322867),d=()=>n(69708),u=()=>n(534177),p=()=>n(813297),m=()=>n(326887),f=()=>n(862292),g=()=>n(190019),h=()=>n(76190),y=n(474848);const v=(0,o.createContext)({ancestors:[]});v.displayName="AutomationContext";v.Consumer;function b(e){const{automationStore:t,children:n,contextType:b,enableExistenceGuarantees:x}=e,S=(0,i().v3)(),k=(0,d().tz)(),{value:A}=(0,s().fJ)(f().T.formulas),{value:C}=(0,s().fJ)(p().QV.automationTypecheck),T=(0,h().n)(t),M=(0,r().S)(),_=(0,a().K8)((()=>{if(!A)return{error:new(c().N9)("Missing formulas dependency")};if(!C)return{error:new(c().N9)("Missing automation dependency")};const e=function(e){const{environment:t,automationStore:n,automationTypecheckModule:o,contextType:i,formulasModule:r,intl:a,isSubscribed:s,pageStore:c,enableExistenceGuarantees:d}=e,p=function(e,t){if(t)return w.get(e);return w.get(e)??I.get(e)}(n,d);if(p)return p;const f=new(l().ComputedStore)((()=>{const e=n.getTriggerType();let l=i;return(0,u().O9)(e)&&(0,m().x2)(e)&&(l=(0,m().H8)(e)),(0,g().Z)({environment:t,automationStore:n,automationTypecheckModule:o,contextType:l,formulasModule:r,intl:a,isSubscribed:s,pageStore:c,enableExistenceGuarantees:d})}),{debugName:"automationContextTypecheckResultCachedStore"});return function(e,t,n){n?(w.set(e,t),I.set(e,t)):I.set(e,t)}(n,f,d),f}({automationStore:t,automationTypecheckModule:C,contextType:b,environment:S,formulasModule:A,intl:k,isSubscribed:T,pageStore:"button_block"===b?null==M?void 0:M.pageStore:void 0,enableExistenceGuarantees:x});return e.state}),[S,t,C,b,A,k,T,null==M?void 0:M.pageStore,x]),j=(0,o.useContext)(v),B=(0,o.useMemo)((()=>0===j.ancestors.length?[{automationStore:t,contextType:b,typecheckResult:_}]:[...j.ancestors,{automationStore:t,contextType:b,typecheckResult:_}]),[j,t,b,_]),R=(0,o.useMemo)((()=>({ancestors:B,enableExistenceGuarantees:x})),[B,x]);return(0,y.jsx)(v.Provider,{value:R,children:n})}function x(){const e=(0,o.useContext)(v).ancestors.at(-1);if(!e)throw new Error("No automation context found!");return e}function S(){return(0,o.useContext)(v).ancestors.at(-1)}function k(){return(0,o.useContext)(v).enableExistenceGuarantees}const w=new WeakMap,I=new WeakMap;function A(e){var t;return null===(t=w.get(e))||void 0===t?void 0:t.state}},550368:(e,t,n)=>{n.d(t,{a:()=>u});var o=n(296540),i=()=>n(401497),r=()=>n(100622),a=()=>n(534177),s=()=>n(284371),l=()=>n(699143),c=()=>n(493552),d=n(474848);const u=o.forwardRef((function({additionalContent:e,description:t,isDisabled:n,isSelected:a,label:c,name:u,onChange:f,width:g="fill",selectorSize:h="normal",selectAlignXAxis:y="left",selectAlignYAxis:v="center",selectType:b="checkbox",style:x,supportText:S,value:k,colorVariant:w,alignAdditionalContent:I,...A},C){const T=(0,o.useId)(),M=function(e){const{isSelected:t,isDisabled:n,selectAlignYAxis:o,alignAdditionalContent:a}=e;return(0,i().IS)((()=>{const e=t&&!n?r().Tj.blue.border.accentPrimary:r().Tj.border.primary;return{container:{display:"flex",alignItems:a??"center",gap:12,userSelect:"none",paddingTop:9,paddingInlineEnd:16,paddingBottom:10,paddingInlineStart:10,borderRadius:6,border:`1px solid ${e}`,...!n&&{cursor:"pointer"}},title:{fontWeight:s().Wy.medium,fontSize:14,userSelect:"none",lineHeight:18},additionalContentWrapper:{flexShrink:0},selectorWrapper:{display:"flex",..."top"===o?{marginTop:2}:{}},rightAlignSelectorWrapper:{display:"flex"}}}),[t,n,o,a])}({isSelected:a,isDisabled:n,selectAlignYAxis:v,alignAdditionalContent:I}),_=(0,d.jsxs)(l().Y1,{direction:"horizontal",align:"top"===v?"top-left":"center-left",gap:12,width:g,children:[(0,d.jsx)("div",{style:M.selectorWrapper,children:(0,d.jsx)(m,{id:T,selectType:b,name:u,value:k,onChange:f,isSelected:a,selectorSize:h,isDisabled:n,...A})}),(0,d.jsx)(p,{colorVariant:w,description:t,label:c,selectorSize:h,supportText:S,isDisabled:n})]}),j=(0,d.jsxs)(l().Y1,{direction:"horizontal",align:"top"===v?"top-center":"center",gap:12,children:[(0,d.jsx)(p,{colorVariant:w,description:t,label:c,selectorSize:h,supportText:S,isDisabled:n}),(0,d.jsx)("div",{style:{...M.selectorWrapper,...M.rightAlignSelectorWrapper},children:(0,d.jsx)(m,{id:T,selectType:b,name:u,value:k,onChange:f,selectorSize:h,isSelected:a,isDisabled:n,...A})})]}),B=e?(0,d.jsx)("div",{style:M.additionalContentWrapper,children:e}):null;return(0,d.jsx)("label",{ref:C,style:{...M.container,...x},htmlFor:T,children:"left"===y?(0,d.jsxs)(d.Fragment,{children:[_,B]}):(0,d.jsxs)(d.Fragment,{children:[B,j]})})}));function p(e){const{description:t,label:n,supportText:o,selectorSize:i,isDisabled:r,colorVariant:s}=e;let u;return"large"===i?u="pageContentTextBlock":"normal"===i||void 0===i?u="bodySmMedium":"small"===i?u="captionRegular":(0,a().HB)(i),(0,d.jsxs)(l().Y1,{gap:4,children:[(0,d.jsxs)(l().Y1,{gap:2,children:[(0,d.jsx)(c().D,{styleKey:u,colorVariant:s||(r?"disabled":"primary"),children:n}),t?(0,d.jsx)(c().D,{styleKey:"captionRegular",colorVariant:r?"disabled":"secondary",children:t}):null]}),o?(0,d.jsx)(c().D,{styleKey:"captionMedium",colorVariant:"tertiary",children:o}):null]})}function m(e){const{selectType:t,selectorSize:o="normal",id:r,name:s,value:l,onChange:c,isSelected:u,isDisabled:p,...m}=e,f=(0,i().IS)((()=>({checkboxWrapper:{minWidth:18,display:"flex",justifyContent:"center"}})),[]);switch(t){case"radio":return(0,d.jsx)(n(266685).a,{id:r,name:s,value:l,onChange:c,checked:u,disabled:p,selectorSize:o,...m});case"checkbox":return(0,d.jsx)("div",{style:f.checkboxWrapper,children:(0,d.jsx)(n(665290).W,{id:r,name:s,value:l,onChange:c,checked:u,disabled:p,selectorSize:o,...m})});case"none":return null;default:(0,a().HB)(t)}}},551253:(e,t,n)=>{n.d(t,{I:()=>i});class o extends(()=>n(757695))().Store{getInitialState(){return{open:!1,direction:"back"}}}const i=new o},555267:(e,t,n)=>{n.d(t,{A:()=>l});var o=n(296540),i=()=>n(991003),r=()=>n(98126),a=()=>n(100622),s=n(474848);function l({loadingMessage:e}){const t=(0,i().A)(!0,400);return(0,s.jsx)("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",height:"100%"},children:t?(0,s.jsxs)(o.Fragment,{children:[(0,s.jsx)(r().k,{}),e?(0,s.jsx)("div",{style:{marginInlineStart:8,color:a().Tj.text.secondary},children:e}):void 0]}):void 0})}},557297:(e,t,n)=>{n.d(t,{lz:()=>r,nO:()=>i,wl:()=>a});var o=()=>n(79926);const i={chatSidebar:new(o().O2)("chatSidebar",(()=>Promise.all([n.e(35530),n.e(55373),n.e(36192),n.e(44711),n.e(53321),n.e(67539),n.e(27992),n.e(63452),n.e(66249),n.e(87249),n.e(79022),n.e(34877),n.e(11676),n.e(61165),n.e(94522),n.e(44584),n.e(40992),n.e(88455),n.e(36437),n.e(87289),n.e(18503),n.e(18422),n.e(28463),n.e(2703)]).then(n.bind(n,942646)))),chatSidebarActions:new(o().O2)("chatSidebarActions",(async()=>await Promise.resolve().then(n.bind(n,703748)))),chatSidebarHelpers:new(o().O2)("chatSidebarHelpers",(async()=>await Promise.resolve().then(n.bind(n,770160)))),chatSidebarModeButton:new(o().O2)("chatSidebarModeButton",(async()=>await Promise.all([n.e(75134),n.e(35530),n.e(9773),n.e(55373),n.e(36192),n.e(71562),n.e(96346),n.e(44711),n.e(53321),n.e(51220),n.e(16471),n.e(37353),n.e(37571),n.e(29151),n.e(40118),n.e(50397),n.e(62475),n.e(3151),n.e(98629),n.e(27992),n.e(63452),n.e(66249),n.e(92845),n.e(87249),n.e(79022),n.e(14578),n.e(87017),n.e(34877),n.e(46414),n.e(11676),n.e(61165),n.e(47668),n.e(94522),n.e(24587),n.e(44584),n.e(67494),n.e(10522),n.e(38293),n.e(40992),n.e(88455),n.e(63515),n.e(33893),n.e(55162),n.e(91793),n.e(71003),n.e(32370),n.e(26264),n.e(97989),n.e(36437),n.e(93963),n.e(44590),n.e(7914),n.e(55113),n.e(85071),n.e(25588),n.e(6769),n.e(23640),n.e(72252),n.e(93134),n.e(12452),n.e(18825),n.e(52871),n.e(29351),n.e(22370),n.e(93049),n.e(22582),n.e(18636),n.e(87289),n.e(16060),n.e(16529),n.e(34281),n.e(35279),n.e(69785),n.e(77754),n.e(29357),n.e(64242),n.e(39986),n.e(22585),n.e(47160),n.e(76677),n.e(68609),n.e(15553),n.e(77345),n.e(79340),n.e(37759),n.e(41423),n.e(21627),n.e(41714),n.e(77777),n.e(17729),n.e(23493),n.e(42810),n.e(20741),n.e(16866),n.e(18503),n.e(83271),n.e(33695),n.e(85673),n.e(92926),n.e(94814)]).then(n.bind(n,297875)))),dockedSidebar:new(o().O2)("dockedSidebar",(async()=>await Promise.all([n.e(35530),n.e(55373),n.e(36192),n.e(44711),n.e(53321),n.e(67539),n.e(27992),n.e(63452),n.e(66249),n.e(87249),n.e(79022),n.e(34877),n.e(11676),n.e(61165),n.e(94522),n.e(44584),n.e(40992),n.e(88455),n.e(36437),n.e(87289),n.e(18503),n.e(18422),n.e(28463)]).then(n.bind(n,760562))))},r=(0,o()._h)(i.chatSidebar,(e=>e.ChatSidebar)),a=(0,o()._h)(i.chatSidebarModeButton,(e=>e.ChatSidebarModeButtonPopupContents))},564704:(e,t,n)=>{n.d(t,{Y:()=>s,x:()=>l});var o=()=>n(917908),i=()=>n(459621),r=()=>n(619553),a=()=>n(414754);function s(e,t){const n="back"===t?-1:1,r=o().H.peekEntry(n);r&&(0,i().x)(e,{url:r.url,position:"after-children"})}function l(e,t,n){const i=function(e){const{entries:t,activeIndex:n}=o().H.getState();if(void 0===n)return;const i=t.findIndex((t=>t.historyId===e));if(-1===i)return;return i-n}(t);if(void 0===i)return;const s=o().H.peekEntry(i);s&&(n?(0,r().B)({environment:e,url:s.url,makeTabActive:!1,position:"after-children",openInNew:n}):(0,a().o)({environment:e,offset:i}))}},567121:(e,t,n)=>{n.d(t,{EG:()=>a,K5:()=>r,RH:()=>i,Yi:()=>s,ls:()=>o});const o=32,i=202,r=1e3,a="Want to add a metric? Look for 'src/client/performanceToolbar/config.ts' in notion-next.",s="To disable the toolbar entirely, go to the 'Experiments' panel and look for the 'performance_debugging_toolbar' flag."},573792:(e,t,n)=>{n.d(t,{DW:()=>l,R1:()=>c,lx:()=>s});var o=()=>n(726637),i=()=>n(418135),r=()=>n(175947),a=()=>n(100622);function s(){return{height:"100%",flexGrow:0,marginInlineEnd:8,fontSize:14,minWidth:0}}function l({environment:e,isShowingTabBar:t,shouldShowSidebar:n,isSidebarExpanded:a,isSecondarySidebarVisible:s,isBrowserFullScreen:l,shouldRenderTemplateGalleryTopbar:c,allowOverflow:d,zoom:u}){const{device:p}=e,m=p.isElectronMac&&(!n||!a&&!s)&&!l&&!t,f=p.isElectronWindows&&!t,g=f&&(!n||!a&&!s);let h=r().ek(p.isElectronMac);return c&&(h=r().Hi),{display:"flex",justifyContent:"space-between",alignItems:"center",overflow:d?"visible":"hidden",height:h,paddingInlineStart:m?(0,i().n$)(u):g?46:o().A.isMobile?4:12,paddingInlineEnd:f?(0,i().yA)(u)+4:o().A.isMobile?4:10}}function c(){return{flex:"none",width:1,height:16,marginInlineStart:8,marginInlineEnd:8,background:a().Tj.border.primaryTranslucent}}},578194:(e,t,n)=>{n.d(t,{r:()=>o});const o=(0,n(583835).Dv)("importEvernote")},580648:(e,t,n)=>{n.d(t,{o:()=>c});n(296540);var o=()=>n(590526),i=()=>n(914462),r=()=>n(69708),a=()=>n(173783),s=()=>n(187820),l=n(474848);function c(e){const{group:t}=e,n=e.size??20,c=(0,r().tz)(),d=(0,o().K8)((()=>{if(t&&t.icon)return{pointer:t.pointer,icon:t.icon}}),[t]),u=(0,o().K8)((()=>(0,i().n)({intl:c,permissionGroupModel:t})),[c,t]);return(0,l.jsx)("div",{children:d?(0,l.jsx)(s().B6,{disabled:!0,size:n,icon:d,isEmptyPage:!1,title:u}):(0,l.jsx)(a().A,{size:n})})}},595939:(e,t,n)=>{n.d(t,{OY:()=>s,S4:()=>a,Wu:()=>l});var o=()=>n(680074),i=()=>n(244828),r=()=>n(680977);function a(e){const{environment:t,preference:n}=e,a=(0,o().R$)(t);a&&(i().createAndCommit({environment:t,userAction:"userSettingsActions.setContrastPreference",canUndo:!0,cellTarget:"main",perform:e=>{(0,r().m)({userSettingsStore:a,transaction:e,data:{contrast_preference:n}})}}),s(n))}async function s(e){document.body.setAttribute("data-contrast",e);("high"===e||"auto"===e&&window.matchMedia("(prefers-contrast: more)").matches)&&await n.e(76353).then(n.bind(n,811300))}function l(e){const t=(0,o().R$)(e);return(null==t?void 0:t.getSettingsStore().getKeyStore("contrast_preference").getValue())??"auto"}},607567:(e,t,n)=>{n.d(t,{Z:()=>r});n(296540);var o=n(474848);const i={viewBox:"0 0 20 20",fittedViewBox:"2.37 4.12 16.74 14.99",svg:(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)("path",{d:"M4.5 4.125A2.125 2.125 0 0 0 2.375 6.25v7.5c0 1.174.951 2.125 2.125 2.125h5.702a4.7 4.7 0 0 1-.2-1.25H4.5a.875.875 0 0 1-.875-.875V7.5h12.75v2.535a4.7 4.7 0 0 1 1.25.684V6.25A2.125 2.125 0 0 0 15.5 4.125zm.758 1.684a.625.625 0 1 1-1.25 0 .625.625 0 0 1 1.25 0m1.375-.625a.625.625 0 1 1 0 1.25.625.625 0 0 1 0-1.25m2.625.625a.625.625 0 1 1-1.25 0 .625.625 0 0 1 1.25 0"}),(0,o.jsx)("path",{d:"M17.7 16.607a3.625 3.625 0 1 0-.893.878l1.223 1.427a.625.625 0 0 0 .94-.823zM12.375 14.5a2.375 2.375 0 1 1 4.75 0 2.375 2.375 0 0 1-4.75 0"})]})},r=(0,n(340498).wt)("browserMagnifyingGlass",i,"default")},608346:(e,t,n)=>{n.d(t,{m:()=>a});n(898992),n(354520),n(672577),n(581454);var o=n.n(n(844751)),i=n(296540),r=()=>n(534177);function a({sections:e,filterQuery:t}){return(0,i.useMemo)((()=>e.map((e=>function(e,t){const{items:n,...i}=e;if(!t)return e;const r=n.filter((e=>e.keywords.find((e=>o().match(t,e)))));return r.length>0?{...i,items:r}:void 0}(e,t))).filter(r().O9)),[t,e])}},611947:(e,t,n)=>{n.r(t),n.d(t,{checkIsTutorialDone:()=>g,dismissTutorial:()=>d,resetTutorials:()=>u,tutorialAdvanceToStep:()=>p,tutorialAdvanceToStepAfter:()=>m,tutorialGoToNextStep:()=>l,tutorialGoToPrevStep:()=>c,tutorialGoToStep:()=>f});var o=()=>n(907258),i=()=>n(541235),r=()=>n(680977),a=()=>n(244828),s=()=>n(646355);function l(e,t,n){var i;const{currentUserSettingsStore:a}=o().default.state;if(!a)return;const l=null===(i=a.getSettings())||void 0===i?void 0:i.tutorials;n?(0,r().m)({userSettingsStore:a,transaction:n,data:{tutorials:{...l,[t]:(0,s().i9)(a,t)}}}):h({userAction:"TutorialActions.nextStep",environment:e,perform:e=>{(0,r().m)({userSettingsStore:a,transaction:e,data:{tutorials:{...l,[t]:(0,s().i9)(a,t)}}})},userId:a.id})}function c(e,t){var n;const{currentUserSettingsStore:i}=o().default.state;if(!i)return;const a=null===(n=i.getSettings())||void 0===n?void 0:n.tutorials;h({userAction:"TutorialActions.prevStep",environment:e,perform:e=>{(0,r().m)({userSettingsStore:i,transaction:e,data:{tutorials:{...a,[t]:(0,s().KD)(i,t)}}})},userId:i.id})}function d(e,t){var n;const{currentUserSettingsStore:a}=o().default.state;if(!a)return;const s=null===(n=a.getSettings())||void 0===n?void 0:n.tutorials;(null==s?void 0:s[t])!==i().YD&&h({userAction:"TutorialActions.dismissTutorial",environment:e,perform:e=>{(0,r().m)({userSettingsStore:a,transaction:e,data:{tutorials:{...s,[t]:i().YD}}})},userId:a.id})}function u(e){const{currentUserSettingsStore:t}=o().default.state;t&&h({userAction:"TutorialActions.resetTutorialsDebug",environment:e,perform:e=>{(0,r().m)({userSettingsStore:t,transaction:e,data:{tutorials:{}}})},userId:t.id})}function p(e,t,n){var a;const{currentUserSettingsStore:l}=o().default.state;if(!l||(0,s().x$)(l,t))return;const c=(0,s().gt)(l,t);i().c$[t].steps.findIndex((e=>e.id===c))>=i().c$[t].steps.findIndex((e=>e.id===n))||(0,r().m)({userSettingsStore:l,transaction:e,data:{tutorials:{...null===(a=l.getSettings())||void 0===a?void 0:a.tutorials,[t]:n}}})}function m(e,t,n){if((0,s().ll)(n))return;const o=(0,s().tb)(t,n);o&&p(e,t,o)}function f(e,t,n,i){var a;const{currentUserSettingsStore:s}=o().default.state;if(!s)return;const l=null===(a=s.getSettings())||void 0===a?void 0:a.tutorials;i?(0,r().m)({userSettingsStore:s,transaction:i,data:{tutorials:{...l,[t]:n}}}):h({userAction:"TutorialActions.nextStep",environment:e,perform:e=>{(0,r().m)({userSettingsStore:s,transaction:e,data:{tutorials:{...l,[t]:n}}})},userId:s.id})}function g(e){const{currentUserSettingsStore:t}=o().default.state;return!!t&&(0,s().x$)(t,e)}function h(e){return a().createAndCommit({...e,canUndo:!1})}},613016:(e,t,n)=>{n.d(t,{a:()=>i});var o=()=>n(907258);function i(){const{sidebarSpaceStore:e}=o().default.getState();return e?e.id:void 0}},613885:(e,t,n)=>{n.d(t,{k:()=>i});var o=()=>n(726637);function i(e,t){const n=o().A.isMobile?2:3;return t.slice(0,n)}},619553:(e,t,n)=>{n.d(t,{B:()=>a});var o=()=>n(459621),i=()=>n(59145),r=()=>n(441748);function a({openInNew:e,url:t,makeTabActive:n,position:a,isNewPage:s,environment:l}){"tab"===e&&n?(0,i().x)(l,{url:t,position:a,makeTabActive:n,isNewPage:s}):"tab"!==e||n?"window"===e&&(0,r().E)(t):(0,o().x)(l,{url:t,position:a})}},621594:(e,t,n)=>{n.r(t),n.d(t,{exclamationMarkCircleSmallIcon:()=>r,iconDefinition:()=>i});n(296540);var o=n(474848);const i={viewBox:"0 0 16 16",fittedViewBox:"1.87 1.87 12.25 12.25",svg:(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)("path",{d:"M7.9 4.875a.625.625 0 0 0-.625.625V8a.625.625 0 1 0 1.25 0V5.5a.625.625 0 0 0-.625-.625m0 4.7a.725.725 0 1 0 0 1.45.725.725 0 0 0 0-1.45"}),(0,o.jsx)("path",{d:"M8 1.875a6.125 6.125 0 1 0 0 12.25 6.125 6.125 0 0 0 0-12.25M3.125 8a4.875 4.875 0 1 1 9.75 0 4.875 4.875 0 0 1-9.75 0"})]})},r=(0,n(340498).wt)("exclamationMarkCircleSmall",i,"small")},625194:(e,t,n)=>{n.d(t,{m:()=>a});var o=n(296540),i=()=>n(96330),r=n(474848);const a=o.memo((function(e){const{textValue:t}=e,n=(0,o.useMemo)((()=>(0,i().X1)((0,i().eC)(t))),[t]);return(0,r.jsx)("span",{children:n})}))},627503:(e,t,n)=>{n.d(t,{a:()=>i});n(296540);const o={viewBox:"0 0 16 16",fittedViewBox:"1.37 1.37 13.25 13.25",svg:(0,n(474848).jsx)("path",{d:"M3.25 1.375c-1.036 0-1.875.84-1.875 1.875v6c0 1.036.84 1.875 1.875 1.875h1.625v1.625c0 1.036.84 1.875 1.875 1.875h6c1.036 0 1.875-.84 1.875-1.875v-6c0-1.036-.84-1.875-1.875-1.875h-1.625V3.25c0-1.036-.84-1.875-1.875-1.875zM2.625 3.25c0-.345.28-.625.625-.625h6c.345 0 .625.28.625.625v1.625H6.75c-1.036 0-1.875.84-1.875 1.875v3.125H3.25a.625.625 0 0 1-.625-.625zm3.5 3.5c0-.345.28-.625.625-.625h6c.345 0 .625.28.625.625v6c0 .345-.28.625-.625.625h-6a.625.625 0 0 1-.625-.625z"})},i=(0,n(340498).wt)("duplicateSmall",o,"small")},646355:(e,t,n)=>{n.d(t,{KD:()=>l,gt:()=>c,i9:()=>s,ll:()=>r,tb:()=>a,x$:()=>i});n(18107),n(967357);var o=()=>n(541235);function i(e,t){return r(c(e,t))}function r(e){return void 0!==e&&(e===o().q_||e===o().YD)}function a(e,t){if(r(t))return;const n=o().c$[e],i=n.steps.findIndex((e=>e.id===t));return-1===i?n.steps[0].id:i===n.steps.length-1?o().q_:n.steps[i+1].id}function s(e,t){const n=c(e,t);if(n&&!r(n))return a(t,n)}function l(e,t){const n=c(e,t);if(n)return function(e,t){const n=o().c$[e];var i;if(r(t))return null===(i=n.steps.at(-1))||void 0===i?void 0:i.id;const a=n.steps.findIndex((e=>e.id===t));return-1!==a&&0!==a?n.steps[a-1].id:void 0}(t,n)}function c(e,t){var n;if(!e)return;const i=((null===(n=e.getSettings())||void 0===n?void 0:n.tutorials)||{})[t];return void 0===i?o().c$[t].steps[0].id:i}},651106:(e,t,n)=>{n.d(t,{A:()=>i});class o extends(()=>n(757695))().Store{getInitialState(){return{permissionsInviteStore:(0,n(964831)._P)(),contextualInviteStore:new(n(159026).Ay)}}get stageFromStoreState(){return this.state.contextualInviteStore.state.inviteStage}}const i=o},654856:(e,t,n)=>{n.d(t,{A:()=>p});n(581454);var o=n(296540),i=()=>n(726637),r=()=>n(590526),a=()=>n(352321),s=()=>n(69708),l=()=>n(299545),c=()=>n(130651),d=()=>n(417555),u=n(474848);const p=function(e){const{origin:t,permissionsInviteStore:p,store:m,handleClickRemoveToken:f,handleInputChange:g,handleInputSubmit:h,right:y,focus:v,handleFocus:b}=e,x=(0,r().K8)((()=>0!==(0,n(761309).Qo)()),[]),S="share_menu"===t||"add_members"===t,k="add_members"===t,[w,I]=(0,r().$y)(p),A=(0,n(484714).v3)(),{device:C}=A,T=(0,s().tz)(),{tokenQuery:M}=w,_=(0,n(101749).N)(m),j=w.inviteTargets.map((e=>{const t="newUser"===e.type?e.value.email:`${e.type}-${e.value.id}`,i=(0,c().yi)(e),r="newUser"===e.type||"existingUser"===e.type?e.value.email:void 0,a=i?_:void 0,l={key:t,target:e,onClickRemove:f,shouldWrap:S,showInfoIcon:Boolean(a)};return S&&r?(0,u.jsx)(n(26697).m,{placement:"top",disableTooltip:k,renderTooltip:()=>i?a||(0,u.jsx)(s().sA,{defaultMessage:"{email} will be invited as a guest",id:"ContextualInvite.permissions_invites.guest.tooltip",values:{email:r}}):r,render:n=>(0,o.createElement)("span",{...n,key:t},(0,u.jsx)(d().A,{...l,backgroundColor:(0,c().qv)(e)}))},t):(0,o.createElement)(d().A,{...l,key:t})})),B=0===w.inviteTargets.length;return(0,u.jsx)(a().Ay,{focus:i().A.isMobile?void 0:v,focusInitial:i().A.isMobile,focusAfterAnimation:!0,onClick:()=>{i().A.isMobile||null==b||b()},format:a().le.Share,value:M,onChange:g,type:"email",tokens:j,disabled:!1,autoComplete:"off",placeholder:S?x?T.formatMessage({defaultMessage:"Add people, groups, or emails…",id:"ContexualInvites.inviteUserModal.searchInput.placeholderWithTeams"}):T.formatMessage({defaultMessage:"Add emails or people",id:"ContexualInvites.inviteUserModal.searchInput.placeholderWithoutBots"}):(0,l().Yu)(m)||(0,l().nw)(m)?T.formatMessage({id:"inviteUserModal.searchInput.placeholder",defaultMessage:"Search name or emails"}):T.formatMessage({id:"permissionsInvite.searchInput.placeholder",defaultMessage:"Search emails, names, or groups"}),onRemoveLastToken:()=>{const e={...w};e.inviteTargets=e.inviteTargets.slice(0,-1),I(w)},right:y,inputFullWidth:!0,inputAndTokenWrapRightStyle:{paddingTop:i().A.isMobile||"add_members"===t?0:B?7:6,paddingBottom:i().A.isMobile||S?0:4},onEmptySubmit:()=>h(),dontShowBorderBottom:C.isAndroid,showBorder:S,...!S&&{style:{padding:"10px  9px 4px 9px"}},...S&&{style:{borderRadius:4,paddingTop:B?3:0,paddingBottom:0,...v&&{background:"none"}}}})}},665290:(e,t,n)=>{n.d(t,{W:()=>d});n(296540);var o=()=>n(819121),i=()=>n(401497),r=()=>n(451306),a=()=>n(73956),s=()=>n(100622),l=()=>n(807449),c=n(474848);function d(e){const{selectorSize:t="normal",...n}=e,{disabled:d,checked:u}=n,[p,m]=(0,o().A)(),f=function(e){const{checked:t,disabled:n,isFocusVisible:o,selectorSize:r}=e;return(0,i().IS)((()=>({root:{position:"absolute",display:"flex",width:"large"===r?15:11,height:"large"===r?15:11,margin:1.5,justifyContent:"center",alignItems:"center",flexShrink:0,borderRadius:"large"===r?2:1,transition:"background 100ms ease-out",...t?{boxShadow:`0 0 0 1.5px ${n?s().Tj.background.tertiaryTranslucent:s().Tj.blue.background.accentPrimary}`,background:n?s().Tj.background.tertiaryTranslucent:s().Tj.blue.background.accentPrimary}:{boxShadow:`0 0 0 1.5px ${n?s().Tj.background.tertiaryTranslucent:s().Tj.border.strongTranslucent}`,background:s().Tj.background.primary},...o&&{boxShadow:s().Tj.buttonBlueFocusRing}},active:{background:t?s().Tj.blueButtonPressedBackground:s().Tj.buttonHoveredBackground},input:{opacity:0,width:"large"===r?18:void 0,height:"large"===r?18:void 0,...n?{pointerEvents:"none"}:{cursor:"pointer"}}})),[r,t,n,o])}({checked:u,disabled:d,selectorSize:t,isFocusVisible:m});return(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)("input",{ref:p,type:"checkbox",style:f.input,...n}),(0,c.jsx)("span",{...(0,r().ow)(f.root,d?{}:{pseudoActive:f.active}),children:u?(0,c.jsx)(l().I,{icon:a().checkmarkFillSmallIcon,colorPalette:"blue",colorVariant:"inversePrimary",size:"large"===t?"xs":"xxs"}):void 0})]})}},671089:(e,t,n)=>{n.r(t),n.d(t,{checkmarkCircleIcon:()=>r,iconDefinition:()=>i});n(296540);var o=n(474848);const i={viewBox:"0 0 20 20",fittedViewBox:"2.37 2.37 15.25 15.26",svg:(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)("path",{d:"M12.876 7.982a.625.625 0 1 0-1.072-.644L9.25 11.595 7.815 9.92a.625.625 0 0 0-.95.813l2 2.334a.625.625 0 0 0 1.01-.085z"}),(0,o.jsx)("path",{d:"M10 2.375a7.625 7.625 0 1 0 0 15.25 7.625 7.625 0 0 0 0-15.25M3.625 10a6.375 6.375 0 1 1 12.75 0 6.375 6.375 0 0 1-12.75 0"})]})},r=(0,n(340498).wt)("checkmarkCircle",i,"default")},698885:(e,t,n)=>{n.d(t,{j:()=>b});var o=n(296540),i=()=>n(564884),r=()=>n(484714),a=()=>n(590526),s=()=>n(401497),l=()=>n(929219),c=()=>n(695115),d=()=>n(163749),u=()=>n(340266),p=()=>n(322972),m=()=>n(557943),f=()=>n(69708),g=()=>n(534177),h=()=>n(272200),y=()=>n(762771),v=n(474848);function b(e){const{traceId:t,feedbackState:n,setFeedbackState:i,feature:d,iconHeight:u}=e,p=(0,s().IS)((()=>({wrapper:{...u?{height:u}:{}},iconButton:{...u?{height:u}:{}}})),[u]),{thumbsUpType:m,thumbsDownType:h}=(0,o.useMemo)((()=>{switch(d){case"ai_block":return{thumbsDownType:"ai_block_thumbs_down",thumbsUpType:"ai_block_thumbs_up"};case"ai_autofill":return{thumbsDownType:"ai_autofill_thumbs_down",thumbsUpType:"ai_autofill_thumbs_up"};default:(0,g().HB)(d)}}),[d]),b=(0,f().tz)(),k=(0,r().v3)(),w=!(0,a().O$)(l().e),I=(0,o.useCallback)((()=>{y().A.setState({...y().A.state,open:!0,type:h,traceId:t,thumbsUpOrDown:"down"}),i({type:"thumbsdown",userContent:"",shareWithNotion:!0}),x({environment:k,feature:d,inferenceId:t,feedbackType:"thumbsdown",userContent:"",shareWithNotion:!0})}),[k,i,h,t,d]),A=(0,o.useCallback)((()=>{y().A.setState({...y().A.state,open:!0,type:m,traceId:t,thumbsUpOrDown:"up"}),i({type:"thumbsup",userContent:"",shareWithNotion:!0}),x({environment:k,feature:d,inferenceId:t,feedbackType:"thumbsup",userContent:"",shareWithNotion:!0})}),[k,i,m,t,d]);return(0,v.jsxs)("div",{onClick:e=>{e.stopPropagation(),e.preventDefault()},style:p.wrapper,children:[(0,v.jsx)(c().A,{onClick:A,icon:S("thumbsup","thumbsup"===(null==n?void 0:n.type)),ariaLabel:b.formatMessage({id:"AiFeatureFeedbackButtons.thumbsUp",defaultMessage:"Helpful"}),disabled:w,style:p.iconButton}),(0,v.jsx)(c().A,{icon:S("thumbsdown","thumbsdown"===(null==n?void 0:n.type)),onClick:I,ariaLabel:b.formatMessage({id:"AiFeatureFeedbackButtons.thumbsDown",defaultMessage:"Not helpful"}),disabled:w,style:p.iconButton})]})}function x(e){const{environment:t,feature:n,inferenceId:o,feedbackType:r,userContent:a,shareWithNotion:s}=e;let l;l="thumbsup"===r?"thumbs_up":"thumbs_down",(0,i().u)({environment:t,event:{eventName:"ai_feedback_given",eventProperties:{feature:n,inference_id:o,sentiment:l}}}),h().trackAIAction(t,{type:"property_autofill",inference_id:o,feedback_type:r,timestamp:(new Date).toUTCString(),user_comment:a,share_with_notion:s})}function S(e,t){switch(e){case"thumbsup":return t?p().P:m().s;case"thumbsdown":return t?d().m:u().d}}},704658:(e,t,n)=>{n.r(t),n.d(t,{UpgradeButton:()=>h});n(296540);var o=()=>n(593531),i=()=>n(406094),r=()=>n(69708),a=()=>n(86269),s=()=>n(839897),l=()=>n(674482),c=()=>n(24796),d=n(474848);function u(e){var t;const{upgradeStatus:n,handleClick:o,size:u="default",width:p="fill",hoverRef:m,onMouseDown:f,upsell:g,featureName:h}=e,y=(0,r().tz)(),v=(0,s().e)(n),b=v.label.button({intl:y,upsell:g,featureName:h}),x=Boolean(v.disabledTooltip),S=(0,a().Lo)({width:p}),{animationState:k,animationTriggers:w}=(0,a().lP)(m);return(0,d.jsx)(c().T,{tooltipMessage:x&&!m?null===(t=v.disabledTooltip)||void 0===t?void 0:t.call(v,{intl:y,upsell:g,featureName:h}):void 0,children:(0,d.jsx)(i().A,{...m?{}:w,disabled:x,hoveredStyle:m?{background:"unset"}:void 0,size:l().lR[u],iconLeading:{...(0,a().e4)({icon:v.icon({upsell:g}),animationState:k}),size:l().Ud[u]},style:S,onClick:o,onMouseDown:f,children:b})})}var p=()=>n(160432);function m(e){var t;const{upsell:n,upgradeStatus:o,handleClick:i,onMouseDown:a,featureName:u}=e,m=(0,r().tz)(),f=(0,s().e)(o),g=f.label.button({intl:m,upsell:n,featureName:u}),h=Boolean(f.disabledTooltip);return(0,d.jsx)(c().T,{tooltipMessage:h?null===(t=f.disabledTooltip)||void 0===t?void 0:t.call(f,{intl:m,upsell:n,featureName:u}):void 0,children:(0,d.jsx)(p().A,{colorPalette:"blue",disabled:h,size:l().lR.default,onClick:i,onMouseDown:a,children:g})})}var f=()=>n(986321),g=()=>n(408543);function h({source:e,upsell:t,featureName:n,hoverRef:i,onMouseDown:r,postUpgradeCallback:a,onClickBeforeUpgradeAction:s,spaceStore:l,...c}){const{upgradeEligibility:p,handleClick:h}=(0,g().C)({upsell:t,source:e,buttonDisplayType:c.display,onClickBeforeUpgradeAction:s,postUpgradeCallback:a,spaceStore:l});if(!p||"not_eligible"===p.status&&"feature_not_upsellable"===p.reason)return null;switch(c.display){case"button":return(0,d.jsx)(u,{upgradeStatus:p.status,handleClick:h,upsell:t,featureName:n,hoverRef:i,onMouseDown:r,...c});case"icon":return(0,d.jsx)(o().c,{upgradeStatus:p.status,handleClick:h,upsell:t,featureName:n,hoverRef:i,onMouseDown:r,...c});case"text":return(0,d.jsx)(f().c,{upgradeStatus:p.status,handleClick:h,upsell:t,featureName:n,hoverRef:i,onMouseDown:r,...c});case"primary":return(0,d.jsx)(m,{upgradeStatus:p.status,handleClick:h,upsell:t,featureName:n,onMouseDown:r,...c})}}},721253:(e,t,n)=>{n.d(t,{lv:()=>y,C5:()=>g,u7:()=>f,uh:()=>h});var o=()=>n(560198),i=()=>n(267785),r=()=>n(100622);const a="theme";var s=()=>n(534177),l=()=>n(44551);var c=()=>n(20822),d=()=>n(661179);const u=15;function p(e,t){const{ThemeStore:n}=e,{mode:s,usingSystemTheme:c}=t;if(o()._u)return;const d={mode:s};var u,p;n.setState(d),e.mobileNative&&e.mobileNative.setTheme(s,c),u=function(e,t){const n=(0,r().O4)({theme:e});return{mode:e,usingSystemTheme:t,colors:{white:r().oZ.white,blue:r().oZ.blue},borderRadius:4,textColor:n.text.primary,popoverBackgroundColor:n.popoverBackground,popoverBoxShadow:n.shadowMD,inputBoxShadow:n.inputBoxShadow,inputBackgroundColor:n.inputBackground,dividerColor:n.border.primaryTranslucent,shadowOpacity:0}}(s,c),null===l().electronApi||void 0===l().electronApi||null===(p=l().electronApi.setTheme)||void 0===p||p.call(l().electronApi,u);try{localStorage.setItem(a,JSON.stringify(d))}catch(m){(0,i().x)(a,JSON.stringify(d),"ThemeActions",m)}f(s),"dark"===s?(document.body.classList.add("dark"),document.body.classList.add("notion-dark-theme")):(document.body.classList.remove("dark"),document.body.classList.remove("notion-dark-theme"))}const m={scrollbarTrack:{light:"rgba(0, 0, 0, 0)",dark:"rgba(0, 0, 0, 0)"},scrollbarThumb:{light:"#D3D1CB",dark:"rgba(255, 255, 255, 0.2)"}};function f(e){if(0===d().A.state)return;const t=document.getElementById("scroll-properties");t&&(t.innerHTML=`\n\t\t* {\n\t\t\tscrollbar-width: ${u}px;\n\t\t\tscrollbar-color: ${m.scrollbarThumb[e]}  ${m.scrollbarTrack[e]};\n\t\t}\n\t`)}function g(e){c().A.setState(e)}function h(e){const t=y();switch(t){case"dark":case"light":p(e,{mode:t,usingSystemTheme:!1});break;case"system":!async function(e){const{mobileNative:t}=e;let n="light";n=t&&t.api.getTheme?await t.api.getTheme():(0,o().VD)(e),p(e,{mode:n,usingSystemTheme:!0})}(e);break;default:(0,s().HB)(t)}}function y(){const e=c().A.state||"system";return"dark"===(t=e)||"light"===t||"system"===t?t:"system";var t}},730307:(e,t,n)=>{n.d(t,{l:()=>m});var o=()=>n(779315),i=()=>n(292985),r=()=>n(161479),a=()=>n(878523),s=()=>n(129522),l=()=>n(404783),c=()=>n(555776),d=()=>n(116008),u=()=>n(36088),p=()=>n(405981);async function m(e){var t;const{environment:n,blockStore:m,rect:f,property_id:g,from:h}=e;if(d().A.hasContent())return void(0,p()._y)({environment:n,reason:"starting_new"});const y=s().K.getRect(m);if(!y)return;const v=new(l().A)(n,(0,r().e)(m.pointer.spaceId)),b=y.width,x=y.height,S=y.right-b;d().A.setState({open:!0,rect:f||new DOMRect(S,y.top,b,x),type:"block",content:"comment",blockStore:m,blockId:m.id,discussionInputStore:v,property_id:g,lastKnownBlockStore:m,from:h}),(0,i().V)({element:null===(t=o().A.UpdateSidebarCommentScroller)||void 0===t?void 0:t.getNode(),environment:n,options:{top:0,behavior:"smooth"}}),c().A.setActiveWithSource("text_annotation"),await(0,u().M)({discussionInputStore:v,environment:n}),a().j4(n,{from:h})}},736767:(e,t,n)=>{n.d(t,{A:()=>a});var o=n(296540),i=n(474848);function r(e,t){return(0,i.jsx)(n(424400).Ay,{...e,ref:t,style:{background:"none",borderBottom:"none",boxShadow:"",marginTop:2,marginBottom:6,paddingTop:4,paddingBottom:4,minHeight:"none",...e.style}})}const a=(0,o.forwardRef)(r)},747938:(e,t,n)=>{n.d(t,{Dy:()=>s,Os:()=>c,l$:()=>l,qO:()=>a});n(944114),n(898992),n(354520);var o=()=>n(617871),i=()=>n(792071),r=()=>n(402904);function a(e){if(e.integration_id!==o().zG)throw"Cannot render account for integration.";const t=/(.+) - (.+)/.exec(e.account_name);if(!t)return{accountName:e.account_name};const[,n,i]=t;return{organizationName:n,accountName:i}}function s(e){return i().Bj6.fromValue(r().As,e).getSlackWorkspaceId()}function l(e,t){return t?e.filter((e=>{const n=s(e);return!!n&&t(n)})):e}function c(e,t=""){const n={};for(const o of e){const{accountName:e,organizationName:i}=a(o);d({query:t,accountName:e,organizationName:i})&&(n[e]||(n[e]=[]),n[e].push({externalAuthentication:o,workspaceName:i}))}return n}function d(e){const{accountName:t,organizationName:n,query:o}=e;if(0===o.length)return!0;const i=t.toLocaleLowerCase().indexOf(o.trim().toLocaleLowerCase())>=0,r=!!n&&n.toLocaleLowerCase().indexOf(o.trim().toLocaleLowerCase())>=0;return i||r}},756114:(e,t,n)=>{n.d(t,{D:()=>o});function o(e,t){t.route.name;return!1}},763765:(e,t,n)=>{n.d(t,{t:()=>i});class o extends(()=>n(757695))().Store{getInitialState(){return{loaded:!1}}USEWITHCAUTION_markStatsigUserFetched(e){const{userId:t,spaceId:n,fetched:o}=e;this.setState({loaded:o,userId:t,spaceId:n})}USEWITHCAUTION_isFetchedForSpaceAndUserId(e){const{spaceId:t,userId:n}=e;return this.state.loaded&&this.state.spaceId===t&&this.state.userId===n}}const i=new o;(0,n(852832).exposeDebugValue)("statsigUserLoadingStatusStore",i)},786702:(e,t,n)=>{n.d(t,{w:()=>r});var o=()=>n(726637),i=()=>n(435386);function r(e){return(0,i().w)({url:e,config:o().A})}},791177:(e,t,n)=>{n.d(t,{$:()=>i});var o=n(296540);function i(){const[e,t]=(0,o.useState)({inputElementAttributes:void 0,suppressFocusRing:!1}),[n,i]=(0,o.useState)(!1),[r,a]=(0,o.useState)(!1);(0,o.useEffect)((()=>{if(n){function e(){a(!1)}function t(e){"ArrowDown"!==e.key&&"ArrowUp"!==e.key||a(!0)}return window.addEventListener("pointerdown",e),window.addEventListener("keydown",t),()=>{window.removeEventListener("pointerdown",e),window.removeEventListener("keydown",t)}}}),[n]);return[(0,o.useMemo)((()=>({inputElementAttributes:e.inputElementAttributes,suppressFocusRing:e.suppressFocusRing&&r,onFocus:()=>{i(!0)},onBlur:()=>{i(!1)}})),[e,r]),(0,o.useMemo)((()=>({setComboboxState:t,isFocusVisible:r,isComboboxFocused:n,onItemHover:()=>{a(!1)}})),[r,n])]}},797324:(e,t,n)=>{n.d(t,{A:()=>g});var o=n(296540),i=()=>n(560520),r=()=>n(484714),a=()=>n(790748),s=()=>n(581010),l=()=>n(69708),c=()=>n(100622),d=()=>n(284371),u=()=>n(396406),p=()=>n(718827),m=()=>n(843798),f=n(474848);function g(e){const{onDismiss:t,inputRef:n}=e,g=(0,r().Y0)(),h=(0,o.useRef)(null),y=g.isMobileNative&&g.isIOS,v=y&&e.show;(0,a().b)(s().A,(()=>({getNode:()=>h.current,isShown:()=>v})),[v]);const b=(0,i().n)(),x=(0,o.useCallback)((()=>{var e;null==n||null===(e=n.current)||void 0===e||e.focus(),t&&t();const o=document.activeElement;o instanceof HTMLElement&&o.blur()}),[n,t]);if(!y)return null;const S=v?-(m().j+b):0;return(0,f.jsx)(u().O,{open:!0,children:(0,f.jsx)("div",{style:{position:"fixed",top:"100vh",width:"100%",height:m().j,display:v?"flex":"none",alignItems:"center",justifyContent:"flex-end",backgroundColor:c().Tj.keyboardDoneBarBackground,transform:`translateY(${S}px)`,transition:v?"ease-out":"ease-in",boxShadow:v?`\n\t\t\t\t\t\t\t\t0 -1px 0 ${c().Tj.border.primaryTranslucent}\n\t\t\t\t\t\t\t`:void 0},ref:h,children:(0,f.jsx)(p().Ay,{style:{display:"flex",alignItems:"center",marginInlineEnd:16,color:c().oZ.blue,fontWeight:d().Wy.semibold},onTouchEnd:()=>{x()},children:(0,f.jsx)(l().sA,{defaultMessage:"Done",id:"mobile.dismissKeyboardBar.button.label"})})})})}},800140:(e,t,n)=>{n.d(t,{s:()=>r});var o=()=>n(917908),i=()=>n(414754);function r(e){o().H.canGoForward()&&(0,i().o)({environment:e,offset:1})}},811558:(e,t,n)=>{var o=n(746518),i=n(439928),r=n(225397),a=Array;o({target:"Array",proto:!0},{with:function(e,t){return i(r(this),a,e,t)}})},813323:(e,t,n)=>{n.d(t,{z:()=>s});n(296540);var o=()=>n(401497),i=()=>n(736847),r=()=>n(69708),a=n(474848);function s(e){const t=(0,o().IS)((()=>({container:{paddingBlock:4}})),[]);return(0,a.jsx)(i().A,{title:e.hideTitle?void 0:(0,a.jsx)(r().sA,{id:"inviteUserModal.searchDropdown.selectPersonTitle",defaultMessage:"Select a person"}),style:t.container,...e})}},837622:(e,t,n)=>{n.d(t,{A:()=>u});var o=n(296540),i=()=>n(590526),r=()=>n(401497),a=()=>n(201980),s=()=>n(116008),l=()=>n(279115),c=()=>n(29554),d=n(474848);const u=o.memo((function(e){const{parentStore:t,withComma:u,linkifyUrls:p,disableCommentHighlight:m,disableLinks:f,shouldTruncate:g,clampLines:h,textValue:y}=e,v=(0,n(484714).v3)(),b=(0,r().DP)(),x=(0,n(712030).Ol)();(0,o.useEffect)((()=>{void 0!==y&&v.KatexStore.loadIfNeeded((()=>y))}),[v.KatexStore,y]);const{collectionContextStore:S,property:k}=(0,o.useContext)(n(971003).L8),{collectionViewBlockId:w,collectionViewId:I}=(0,i().K8)((()=>{var e,t;return{collectionViewId:null==S||null===(e=S.collectionViewStore())||void 0===e?void 0:e.id,collectionViewBlockId:null==S||null===(t=S.collectionViewBlockStore())||void 0===t?void 0:t.id}}),[S]),A=(0,i().K8)((()=>v.KatexStore.getKatex()),[v.KatexStore]),C=(0,i().K8)((()=>{const e=l().qu.state,n=l().wb.state;return e&&k&&y?c().nu({textValue:y,blockId:t.id,textProps:{type:"page_property_value_match",collectionViewBlockId:w,collectionViewId:I,propertyId:k},find:e,currentFocusedResult:n,store:t}):y}),[k,t,y,w,I]),T=(0,i().K8)((()=>{if(s().A.getPropertyId()!==k||s().A.getBlockStore()!==t)return C;const e=s().A.getMultiSelection();return e?a().Mwp({textValue:C,selection:{startIndex:e.start.index,endIndex:e.end.index},annotation:[a().Ifu.TemporaryComment]}):y?a().Mwp({textValue:C,selection:{startIndex:0,endIndex:a().qAZ(y).length},annotation:[a().Ifu.TemporaryComment]}):C}),[t,k,y,C]),M=(0,i().K8)((()=>void 0===T?null:c().S5({environment:v,textValue:T&&{value:T,spaceId:(0,n(161479).e)(t.pointer.spaceId)},parentStore:t,disableHover:!1,disableStyleAnnotations:!1,disableInsertedDeletedAnnotations:!1,disableDateStyleAnnotations:!1,disableSuggestionAnnotations:!1,disableCommentAnnotations:m??!1,disabled:!0,theme:b,disableLinks:f??!1,emojiType:x,katex:A,formulaValueTypes:[],stopLinkPropagation:!0,linkTargetBlank:!0})),[T,v,t,m,b,f,x,A],{silenceRerenderDefender:!0}),_=(0,o.useMemo)((()=>{if(!p||void 0===y)return null;const e=(0,a().k4p)(y);return(0,n(735577).A)(e)?(0,n(713998).MO)(y):null}),[p,y]),j=(0,r().IS)((()=>({text:{...g&&!h?n(284371).RC:void 0,...g&&h?{...(0,n(115512).pA)(h),overflow:"hidden",textOverflow:"ellipsis"}:{}}})),[g,h]);return(0,d.jsxs)("span",{style:j.text,children:[_?(0,d.jsx)(n(552712).N,{href:_,style:{display:"inline",pointerEvents:"auto",...(0,n(468882).w_)()},external:!0,onClick:e=>e.stopPropagation(),children:M}):M,u?", ":null]})}))},838364:(e,t,n)=>{n.d(t,{H:()=>o});const o=52},839754:(e,t,n)=>{n.d(t,{Bi:()=>A,My:()=>I,ZM:()=>T,_M:()=>C,navigateToWorkflowTemplateOnboardingModal:()=>M});n(16280),n(944114),n(517642),n(658004),n(733853),n(845876),n(432475),n(515024),n(731698),n(898992),n(354520),n(672577),n(581454);var o=()=>n(907258),i=()=>n(295633),r=()=>n(584262),a=()=>n(663077),s=()=>n(179034),l=()=>n(201980),c=()=>n(896628),d=()=>n(384944),u=()=>n(730969),p=()=>n(840153),m=()=>n(339798),f=()=>n(180762),g=()=>n(799832),h=()=>n(111379),y=()=>n(535960),v=()=>n(31173),b=()=>n(295304),x=()=>n(244828),S=()=>n(373444),k=()=>n(165592),w=()=>n(204067);function I({transaction:e,collectionStore:t,propertyTemplates:n}){var o;const i=(null===(o=t.getParentBlockStore())||void 0===o?void 0:o.getCollectionViewStores().filter((e=>"table"===e.getType())))??[];if(0===i.length)return;const r=[];for(const l of n){const e=(0,w().S1)({collectionStore:t,templateId:l.templateId,instancePointerType:"property"});e&&r.push({property:e.id,visible:!(0,a().Sz)(l),...l.tablePropertyFormat})}if(0!==r.length)for(const a of i){var s;const t=(null===(s=a.getPropertyFormatsStore("table_properties"))||void 0===s?void 0:s.getValue())??[],n=new Set(t.map((e=>e.property))),o=r.filter((e=>!n.has(e.property)));0!==o.length&&c().zA({stores:[a],update:{table_properties:[...t,...o]},transaction:e})}}function A({transaction:e,collectionStore:t,propertyTemplates:n}){const o=[];for(const s of n){const e=(0,w().S1)({collectionStore:t,templateId:s.templateId,instancePointerType:"property"});e&&o.push({property:e.id,visible:!0})}const i=t.getFormat().collection_page_properties??[],r=new Set(i.map((e=>e.property))),a=o.filter((e=>!r.has(e.property)));a.length&&c().zA({stores:[t],update:{collection_page_properties:[...i,...a]},transaction:e})}function C({environment:e,newPageStore:t,result:n}){"accepted_template"!==n.type&&"accepted_empty_collection"!==n.type||x().createAndCommit({environment:e,canUndo:!1,perform:o=>{const r=t.getTitleValue();if(d().zv({store:t,transaction:o,data:{alive:!1}}),"accepted_empty_collection"===n.type&&!(0,l().w9s)(r)){const a=i().B.createChildStore(t,{table:"block",id:n.blockId}).getTitleStore();a&&b().yr({environment:e,transaction:o,tokens:r,index:0,store:a})}const a=t.getParentStore();if((null==a?void 0:a.table)===s().ev){const e=a.getContentIds();d().zv({store:a,transaction:o,data:{content:e.filter((e=>e!==t.id))}})}},userAction:"clean_up_empty_new_page"})}function T({environment:e,userAction:t,result:n,existingCollectionViewBlockStore:o,existingCollectionStore:i}){if("canceled"!==n.type){if("accepted_empty_collection"===n.type&&i){const o=i.getKeyStore("name"),r=(0,l().x9d)(n.newCollectionTitle);o&&x().createAndCommit({userAction:t,environment:e,canUndo:!0,perform:t=>b().R9({environment:e,store:o,transaction:t,value:r})})}if(o){var r;const e=null===(r=(0,g().U)(o))||void 0===r?void 0:r.settingsStore;e&&m().os({collectionSettingsStore:e})}if("accepted_template"===n.type&&null!=o&&o.isCollectionView()&&(null==o||!o.hasSingleSourceAndNoLinkedCollections())){const t=(0,g().U)(o),i=o.getCollectionViewStores().find((e=>{var t;return(null===(t=e.getCollectionStore())||void 0===t?void 0:t.id)===n.collectionId}));if(!t||!i)return;(0,f().t)({environment:e,collectionContextStore:t,collectionViewId:i.id,isFullScreen:t.isFullScreenStore.state,isRootChild:t.isRootChildStore.state,isInPeekRenderer:t.isInPeekRendererStore.state})}}}async function M({environment:e,collectionViewBlockStore:t}){const n=t.id;if(!t.isDefined()){const o=await(0,v().$)({environment:e,blockId:n});if(!o)return;e=await p().T({environment:e,newCurrentUserId:o}),t=new(i().B)(e,{table:s().ev,id:n}),await t.load()}const a=t.getSpaceId();if(!a)throw new Error("Space ID not found for collection block");const l=(0,h().k)(a);if(!l)throw new Error(`Space view not found for space ID: ${a}`);const{sidebarSpaceStore:c}=o().default.state;(null==c?void 0:c.id)!==a&&await(0,u().y)({environment:e,spaceViewStore:l});const d=t.getFormat();if("workflow_template_placeholder"===(null==d?void 0:d.collection_view_sub_type)&&null!=d&&d.placeholder_workflow_template_id&&t.isCollectionView()){const{getCollectionTemplateFromId:n}=await k().t.load(),o=n(d.placeholder_workflow_template_id);if(!o)throw new Error(`Collection template "${d.placeholder_workflow_template_id}" not found`);const{onNavigateToPlaceholderWorkflowTemplateBlock:i}=await S().O.load();i({environment:e,collectionTemplate:o,collectionViewBlockStore:t})}else(0,y().u)({environment:e,store:t,pageVisitSource:r().y8.WorkflowTemplatesDeeplink})}},848401:(e,t,n)=>{n.d(t,{Ay:()=>g,mI:()=>m,vb:()=>f});n(296540);var o=()=>n(401497),i=()=>n(718827),r=()=>n(807449),a=()=>n(784892),s=()=>n(563692),l=()=>n(340498),c=()=>n(69708),d=()=>n(284371),u=n(474848);const p=(0,c().YK)({removeTokenLabel:{defaultMessage:"Remove {title}",id:"uiGenericToken.removeTokenLabel"},removeTokenLabelGeneric:{defaultMessage:"Remove Item",id:"uiGenericToken.removeTokenLabelGeneric"}}),m=a().NY,f={[a().NY.ExtremeSmall]:{height:12,fontSize:10,margin:"0 4px 0 0",marginEditState:"0 6px 0 0",closeIconSize:l().Ev.xxs,avatarSize:14},[a().NY.ExtraSmall]:{height:14,fontSize:12,margin:"0 6px 0 0",marginEditState:"0 6px 0 0",closeIconSize:l().Ev.xxs,avatarSize:14},[a().NY.Small]:{height:18,fontSize:12,margin:"0 6px 6px 0",marginEditState:"0 6px 6px 0",closeIconSize:l().Ev.xxs,avatarSize:16},[a().NY.CompactEssential]:{height:20,fontSize:14,margin:"0 10px 6px 0",marginEditState:"0 6px 6px 0",closeIconSize:l().Ev.xxs,avatarSize:20},[a().NY.Medium]:{height:20,fontSize:14,margin:"0 10px 6px 0",marginEditState:"0 6px 6px 0",closeIconSize:l().Ev.xxs,avatarSize:20},[a().NY.Inline]:{height:20,fontSize:14,closeIconSize:l().Ev.xxs,avatarSize:20,margin:"0 -5px 0 0",marginEditState:"0 6px 0 0"},[a().NY.Large]:{height:24,fontSize:16,margin:"0 8px 8px 0",marginEditState:"0 8px 8px 0",closeIconSize:l().Ev.sm,avatarSize:24}};function g({avatarSize:e,format:t,isSingle:n,onClickRemove:a,renderAvatar:l,showRemoveButton:m,shouldShrink:g,style:h,title:y}){const v=(0,c().tz)(),{height:b,fontSize:x,margin:S,marginEditState:k,closeIconSize:w,avatarSize:I}=f[t],A=e??I,C=(0,o().IS)((()=>({root:{display:"flex",alignItems:"center",flexShrink:g?1:0,minWidth:0,height:b,borderRadius:6,fontSize:x,lineHeight:"120%",margin:n?0:m?k:S,...h}})),[x,b,n,S,k,g,m,h]);return(0,u.jsxs)("div",{style:C.root,children:[null==l?void 0:l(A),(0,u.jsx)("div",{className:"notranslate",style:{...d().RC},children:y}),m?(0,u.jsx)(i().Ay,{ariaLabel:void 0!==y?v.formatMessage(p.removeTokenLabel,{title:y}):v.formatMessage(p.removeTokenLabelGeneric),onClick:a,style:{display:"flex",alignItems:"center",justifyContent:"center",width:b,height:b,marginInlineStart:2,marginInlineEnd:2,flexGrow:0,flexShrink:0,borderRadius:6},children:(0,u.jsx)(r().I,{icon:s().xMarkFillSmallIcon,size:w,style:{opacity:.5}})}):null]})}},859384:(e,t,n)=>{n.d(t,{M:()=>r});n(296540);var o=n(474848);const i={viewBox:"0 0 20 20",fittedViewBox:"3.12 2.99 13.88 13.88",svg:(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)("path",{d:"m16.774 4.341-.59.589-1.109-1.11.596-.594a.784.784 0 0 1 1.103 0c.302.302.302.8 0 1.102zM8.65 12.462l6.816-6.813-1.11-1.11-6.822 6.808a1.1 1.1 0 0 0-.236.393l-.289.932c-.052.196.131.38.315.314l.932-.288a.9.9 0 0 0 .394-.236"}),(0,o.jsx)("path",{d:"M4.375 6.25c0-1.036.84-1.875 1.875-1.875H11a.625.625 0 1 0 0-1.25H6.25A3.125 3.125 0 0 0 3.125 6.25v7.5c0 1.726 1.4 3.125 3.125 3.125h7.5c1.726 0 3.125-1.4 3.125-3.125V9a.625.625 0 1 0-1.25 0v4.75c0 1.036-.84 1.875-1.875 1.875h-7.5a1.875 1.875 0 0 1-1.875-1.875z"})]})},r=(0,n(340498).wt)("compose",i,"default")},862139:(e,t,n)=>{n.d(t,{_:()=>f});var o=n(296540),i=()=>n(907258),r=()=>n(726637),a=()=>n(590526),s=()=>n(81068),l=()=>n(424400),c=()=>n(69708),d=()=>n(622419),u=()=>n(173783),p=()=>n(187820),m=n(474848);function f(e){const{group:t,menuListItemProps:n,spaceStore:f,iconSizeOverride:g,right:h}=e,y=(0,c().tz)(),v=(0,a().K8)((()=>{const e=f??i().AppStoreSidebarSpaceStore.state;if(e&&t.icon)return{pointer:{table:e.table,id:e.id},icon:t.icon}}),[t,f]),b=(0,o.useMemo)((()=>(0,d().Pf)({intl:y,groupName:t.name})),[t.name,y]),x=g||(r().A.isMobile?l().nd:l().pg);return(0,m.jsx)(s().A,{...n,icon:v?(0,m.jsx)(p().B6,{disabled:!0,size:x,icon:v,isEmptyPage:!1,title:b}):(0,m.jsx)(u().A,{size:x}),title:b,right:h})}},863059:(e,t,n)=>{n.d(t,{Hh:()=>M,Kh:()=>I,Nq:()=>w,U:()=>A,gQ:()=>_,nh:()=>T,u7:()=>C});var o=n(296540),i=()=>n(726637),r=()=>n(484714),a=()=>n(590526),s=()=>n(401497),l=()=>n(75435),c=()=>n(418135),d=()=>n(340498),u=()=>n(175947),p=()=>n(100622),m=()=>n(180252),f=()=>n(614949),g=()=>n(696746),h=()=>n(900652),y=()=>n(441199),v=()=>n(644914),b=()=>n(224011),x=()=>n(150193),S=()=>n(965833);const k=10;function w(){const{isElectronWindows:e}=(0,r().Y0)(),t=(0,a().O$)(l().b),n=(0,a().K8)((()=>l().A.state.zoomFactor||c().rx),[]),s=e&&!t;return(0,o.useMemo)((()=>s?(0,c().yA)(n)+4:i().A.isMobile?4:k),[s,n])}function I({shouldRenderTemplateGalleryTopbar:e}){const t=(0,r().v3)(),n=(0,a().K8)((()=>l().A.state.zoomFactor),[]),s=(0,a().O$)(l().b),d=(0,a().K8)((()=>(0,f().X)(t).shouldShowSidebar),[t]),p=(0,a().K8)((()=>(0,v().KB)(t)),[t]),m=(0,a().K8)((()=>y().default.isPanelPinnedState()),[]),g=(0,a().K8)((()=>b().A.state.isFullScreen),[]),{device:h}=t,x=n||c().rx,S=h.isElectronMac&&(!d||!p&&!m)&&!g&&!s,k=h.isElectronWindows&&!s,w=k&&(!d||!p&&!m);let I=u().ek(h.isElectronMac);e&&(I=u().Hi);return(0,o.useMemo)((()=>({display:"flex",justifyContent:"space-between",alignItems:"center",overflow:"hidden",height:I,paddingInlineStart:S?(0,c().n$)(x):w?46:i().A.isMobile?4:12,paddingInlineEnd:k?(0,c().yA)(x)+4:i().A.isMobile?4:10})),[I,S,x,w,k])}function A({store:e,shouldRenderTemplateGalleryTopbar:t,isBrowserFullScreen:n}){const o=(0,r().v3)(),i=(0,r().Y0)(),d=(0,r().WS)(),f=(0,a().K8)((()=>"meet"===o.RouterStore.state.route.name),[o.RouterStore]),y=(0,a().K8)((()=>((0,g().lU)(e)||f)&&0===x().A.state.banners.length),[e,f]);let b=u().ek(i.isElectronMac);t&&(b=2*u().Hi);const k=(0,a().K8)((()=>h().Z8()),[]),w=(0,a().O$)((0,m().$o)(o)),I=(0,a().K8)((()=>l().A.state.zoomFactor),[]),A=u().pz(i.isElectronMac,n,I||c().rx);return(0,s().IS)((()=>({header:{background:y&&!d?"transparent":p().Tj.background.primary,maxWidth:"100vw",zIndex:100,WebkitUserSelect:"none",userSelect:"none",position:"relative"},container:{width:`calc(100% - ${k}px)`,maxWidth:"100vw",height:b,opacity:w?0:1,transition:`\n\t\t\t\t\t\topacity ${S().L}ms,\n\t\t\t\t\t\tcolor ${S().L}ms\n\t\t\t\t\t`,position:"relative",insetInlineStart:k},electronTopbarSidebarMousePeekArea:{position:"absolute",top:0,bottom:-v().qe,width:`${A}px`}})),[y,d,k,w,b,A])}const C=34,T=28;function M(){return{iconButton:{width:C,height:T,marginInlineEnd:2},icon:{height:d().Ev.lg,width:d().Ev.lg,fill:p().Tj.icon.primary},tabletIcon:{height:d().lD.lg,width:d().lD.lg,fill:p().Tj.icon.primary}}}function _(){return(0,s().IS)(M,[])}},866805:(e,t,n)=>{n.d(t,{Jl:()=>d,Ni:()=>l,OE:()=>c});var o=()=>n(242422),i=()=>n(726637),r=()=>n(534177),a=()=>n(246679),s=()=>n(243331);const l=3;function c(){if(i().A.isMobile)return!1;if(!o().default.checkGate({gateName:"agent_daily_brief"}))return!1;const e="authenticated"===a().gv.state.status,t="authenticated"===s().Lf.state.status;return e&&t}async function d(e={}){var t;const{spaceId:o,environment:i,...a}=e,{UserChatPreferenceLocalStorageStore:s}=await n.e(37342).then(n.bind(n,166442)),{AGENT_MODEL_TYPES:l}=await n.e(27992).then(n.bind(n,365646)),c=o?(null===(t=s.getState())||void 0===t?void 0:t[o])??{}:{},{model:d}=c;let u=d&&(0,r().Xk)(l,d)?d:void 0;if(o&&u){const{getAvailableWorkflowAgentModels:e}=await Promise.all([n.e(27992),n.e(7049)]).then(n.bind(n,676953));e(i,o).has(u)||(u=void 0)}const{getWorkflowAgentConfig:p}=await Promise.all([n.e(35530),n.e(55373),n.e(36192),n.e(27992),n.e(63452),n.e(66249),n.e(87249),n.e(79022),n.e(34877),n.e(32236)]).then(n.bind(n,844317)),m=p({...a,spaceId:o,model:u,useReadOnlyMode:!1}),f=!0;return m.enableUserSessionContext=!0,m.enableQueryCalendar=f,m.enableQueryMail=f,m.enableAgentViewNotificationsTool=f,m.agentFollowupVariation=void 0,m}},883701:(e,t,n)=>{n.d(t,{J:()=>a});var o=()=>n(457205),i=()=>n(849255),r=()=>n(534177);function a(e,t){if(t&&t.asActor)switch(t.pointer.table){case"bot":return new(o().v)(e,t.pointer);case"notion_user":return new(i().L)(e,t.pointer);default:(0,r().HB)(t.pointer)}}},888643:(e,t,n)=>{n.d(t,{k:()=>i});var o=()=>n(402014);function i(e){(0,o().SQ)(e,o().y$.Click,(()=>{}))}},890409:(e,t,n)=>{n.d(t,{Ah:()=>y,Dk:()=>f,Iv:()=>h,SF:()=>g,YO:()=>x,_f:()=>k,c_:()=>p,dW:()=>b,gW:()=>m,sp:()=>w,vN:()=>v});n(16280),n(944114),n(898992),n(354520),n(803949),n(581454),n(737550);var o=()=>n(496603),i=()=>n(973647),r=()=>n(534177),a=()=>n(842599),s=()=>n(239381),l=()=>n(179034),c=()=>n(798880),d=()=>n(201980),u=()=>n(241319);function p(e,t){e.DO_NOT_USE_commonTrackEvent({eventName:"add_automation_step",properties:t})}function m(e,t){e.DO_NOT_USE_commonTrackEvent({eventName:"delete_automation_step",properties:t})}function f(e,t){e.DO_NOT_USE_commonTrackEvent({eventName:"automation_create",properties:t})}function g(e,t){e.DO_NOT_USE_commonTrackEvent({eventName:"automation_update",properties:t})}function h(e,t){e.DO_NOT_USE_commonTrackEvent({eventName:"automation_delete",properties:t})}function y(e,t){e.DO_NOT_USE_commonTrackEvent({eventName:"automation_enable",properties:t})}function v(e,t){e.DO_NOT_USE_commonTrackEvent({eventName:"automation_disable",properties:t})}function b(e,t){e.DO_NOT_USE_commonTrackEvent({eventName:"automation_action_create",properties:t})}function x(e,t){e.DO_NOT_USE_commonTrackEvent({eventName:"automation_action_delete",properties:t})}function S(e){const{formulaAnalyticsModule:t,formulasModule:n,formulaTypecheckContextValues:o,getRecordModel:a,spaceId:l,value:c,featureGates:d}=e;if("formula"===c.type){if(!(0,r().O9)(c.value))return;const e=i().Q.unwrapOr(n.parseFormulaInputToAst(c.value),void 0);if(e){const i=n.addTypesToFormulaAST(e,{handleDataRequest:(0,s().zg)(a),spaceId:l,valueTypes:o,featureGates:d});return{...t.getFormulaAnalytics(e,{getRecordModel:a,typecheckContextValues:o}),formula_return_type:i.node.type,redacted_formula:t.getRedactedFormulaAsStringSync(e,{getRecordModel:a,typecheckContextValues:o})}}}else{if("simple"===c.type){if(!(0,r().O9)(c.value))return;return t.getSimpleFormulaAnalytics(c.value,{getRecordModel:a,typecheckContextValues:o})}(0,r().HB)(c.type)}}function k(e){const{automationActionModel:t,automationActionModels:n,formulaAnalyticsModule:i,formulasModule:l,formulaTypecheckContextValues:p,getRecordModel:m,featureGates:f,simpleFormulasModule:g}=e;return t.isType("complete_sprint")?{automation_action_id:t.pointer.id,type:"complete_sprint"}:t.isType("create_page")?function(e){const{automationActionModel:t,formulaAnalyticsModule:n,formulasModule:o,formulaTypecheckContextValues:i,getRecordModel:a,featureGates:s}=e,l=t.getConfig();let c,d=[];const u=null==l?void 0:l.collection,p=null==l?void 0:l.properties;if((0,r().O9)(u)&&(0,r().O9)(p)&&p.length>0){const e=a(u),f=null==e?void 0:e.getNormalizedSchema();(0,r().O9)(f)&&(d=p.map((e=>{var t;return(null===(t=f[e])||void 0===t?void 0:t.type)??"unknown"})));const g=null==l?void 0:l.values;if(o&&(0,r().O9)(g)){c=[];for(const e of p){var m;const r=null===(m=g[e])||void 0===m?void 0:m.value;if(!r)continue;const l=S({formulaAnalyticsModule:n,formulasModule:o,getRecordModel:a,formulaTypecheckContextValues:i,spaceId:t.spaceId,value:r,featureGates:s});l&&c.push(l)}}}return{automation_action_id:t.pointer.id,property_formula_stats:c,property_types:d,type:"create_page"}}({automationActionModel:t,formulaAnalyticsModule:i,formulasModule:l,formulaTypecheckContextValues:p,getRecordModel:m,featureGates:f}):t.isType("duplicate_blocks")?{automation_action_id:t.pointer.id,type:"duplicate_blocks"}:t.isType("modal_confirmation")?function(e){const{automationActionModel:t,formulaAnalyticsModule:n,formulasModule:o,formulaTypecheckContextValues:i,getRecordModel:a,featureGates:s}=e,l=t.getConfig(),c=[];if(o&&(0,r().O9)(l)&&l.text){const e=S({formulasModule:o,formulaAnalyticsModule:n,getRecordModel:a,formulaTypecheckContextValues:i,spaceId:t.spaceId,value:l.text,featureGates:s});e&&c.push(e)}return{automation_action_id:t.pointer.id,formula_stats:c,type:"modal_confirmation"}}({automationActionModel:t,formulaAnalyticsModule:i,formulasModule:l,formulaTypecheckContextValues:p,getRecordModel:m,featureGates:f}):t.isType("open_page")?{automation_action_id:t.pointer.id,type:"open_page"}:t.isType("query_collection")?{automation_action_id:t.pointer.id,type:"query_collection"}:t.isType("send_in_app_notification")?function(e){var t;const{automationActionModel:n,formulaAnalyticsModule:o,formulasModule:i,formulaTypecheckContextValues:a,getRecordModel:s,featureGates:l,simpleFormulasModule:c}=e,u={automation_action_id:n.pointer.id,messageCharacterCount:0,type:"send_in_app_notification"},p=n.getConfig();if(!(0,r().O9)(p))return u;if((0,r().O9)(p.target))if("formula"===p.target.type&&(0,r().O9)(p.target.value)){if(u.targetData={type:"formula",numUserFormulaTargets:(0,d().Fbh)(p.target.value.value).length,numFormulaContextTargets:c.getReferencedContextValueIds(p.target.value).length},i){const e=S({formulasModule:i,formulaAnalyticsModule:o,getRecordModel:s,formulaTypecheckContextValues:a,spaceId:n.spaceId,value:p.target.value,featureGates:l});e&&(u.formula_stats??=[],u.formula_stats.push(e))}}else if("property"===p.target.type&&(0,r().O9)(p.target.propertyId)&&(0,r().O9)(p.target.collectionPointer)){const e=s(p.target.collectionPointer),t=null==e?void 0:e.getSchema();var m;(0,r().O9)(t)&&(u.targetData={type:"property",propertyType:null===(m=t[p.target.propertyId])||void 0===m?void 0:m.type})}if((0,r().O9)(null===(t=p.notification_message)||void 0===t?void 0:t.value)&&(u.messageCharacterCount=(0,d().FAw)(p.notification_message.value),i)){const e=S({formulasModule:i,formulaAnalyticsModule:o,getRecordModel:s,formulaTypecheckContextValues:a,spaceId:n.spaceId,value:p.notification_message,featureGates:l});e&&(u.formula_stats??=[],u.formula_stats.push(e))}return u}({automationActionModel:t,formulaAnalyticsModule:i,formulasModule:l,formulaTypecheckContextValues:p,getRecordModel:m,featureGates:f,simpleFormulasModule:g}):t.isType("send_gmail_notification")?function(e){var t,n,i,s,l,u,p;const{automationActionModel:m,formulaAnalyticsModule:f,formulasModule:g,formulaTypecheckContextValues:h,getRecordModel:y,featureGates:v}=e,b=m.getConfig();if(!(0,r().O9)(b))return{automation_action_id:m.pointer.id,fields:{},recipient_domains:{},type:"send_gmail_notification"};const x=Object.fromEntries(Object.entries(b||{}).map((([e,t])=>{var n;return"formula"===(null==t?void 0:t.type)?[e,Boolean(null==t||null===(n=t.value)||void 0===n?void 0:n.value)]:"simple"===(null==t?void 0:t.type)?[e,Boolean(null==t?void 0:t.value)]:[e,Boolean(t)]}))),{to:k,cc:w,bcc:I}=b,A=[...(null==k||null===(t=k.value)||void 0===t?void 0:t.value)||[],...(null==w||null===(n=w.value)||void 0===n?void 0:n.value)||[],...(null==I||null===(i=I.value)||void 0===i?void 0:i.value)||[]],C=[...(0,d().Fbh)(A).map((e=>y({table:c().oo,id:e}))).map((e=>null==e?void 0:e.email)).filter(r().O9),...(0,a().C3)((0,d().k4p)(A))],T=o().Tr(C.map((e=>e.split("@")[1]))),M=[null===(s=b.to)||void 0===s?void 0:s.value,null===(l=b.cc)||void 0===l?void 0:l.value,null===(u=b.bcc)||void 0===u?void 0:u.value,null===(p=b.reply_to)||void 0===p?void 0:p.value,b.from_name,b.email_subject,b.email_body].map((e=>{if(g&&(0,r().O9)(e))return S({formulaAnalyticsModule:f,formulasModule:g,getRecordModel:y,formulaTypecheckContextValues:h,spaceId:m.spaceId,value:e,featureGates:v})})).filter(r().O9);return{automation_action_id:m.pointer.id,fields:x,formula_stats:M,recipient_domains:T,type:"send_gmail_notification"}}({automationActionModel:t,formulaAnalyticsModule:i,formulasModule:l,formulaTypecheckContextValues:p,getRecordModel:m,featureGates:f}):t.isType("slack_notification")?{automation_action_id:t.pointer.id,type:"slack_notification"}:t.isType("update_pages")?function(e){const{automationActionModel:t,automationActionModels:n,formulaAnalyticsModule:o,formulasModule:i,formulaTypecheckContextValues:a,getRecordModel:l,featureGates:c}=e,d=t.getConfig(),p=[],m=[],f=[];if((0,r().O9)(d)&&(0,r().O9)(d.target)&&(0,r().O9)(d.properties)&&d.properties.length>0){let e;if("variable"===d.target.type){const t=(0,s().y5)(d.target.id);if("action"===t.source){const t=(0,u().y)({actionModels:n,id:d.target.id}).collectionPointer;if((0,r().O9)(t)){const n=l(t);e=null==n?void 0:n.getNormalizedSchema()}}else{if("global"!==t.source||"button_page"!==t.global)throw new Error("Failed loading property schema");{const t=(0,s().IV)(a,d.target.id);if("block"===(null==t?void 0:t.type.type)&&(0,r().O9)(t.type.collection)){const n=l(t.type.collection);e=null==n?void 0:n.getNormalizedSchema()}}}}else if("collection"===d.target.type){const t=l(d.target.collection);e=null==t?void 0:t.getNormalizedSchema()}(0,r().O9)(e)&&d.properties.forEach((n=>{const s=e[n];if((0,r().O9)(s)&&(p.push(s.type),i&&(0,r().O9)(d.values))){const e=d.values[n];if((0,r().O9)(e)&&(m.push({type:s.type,operator:e.action}),e.value)){const n=S({formulasModule:i,formulaAnalyticsModule:o,getRecordModel:l,formulaTypecheckContextValues:a,spaceId:t.spaceId,value:e.value,featureGates:c});n&&f.push(n)}}}))}return{automation_action_id:t.pointer.id,property_configs:m,property_formula_stats:f,property_types:p,type:"update_pages"}}({automationActionModel:t,automationActionModels:n,formulaAnalyticsModule:i,formulasModule:l,formulaTypecheckContextValues:p,getRecordModel:m,featureGates:f}):t.isType("define_variables")?function(e){const{automationActionModel:t,formulaAnalyticsModule:n,formulasModule:o,formulaTypecheckContextValues:i,getRecordModel:a,featureGates:s}=e,l=t.getConfig(),c=[];if(o&&(0,r().O9)(l)&&l.values)for(const r of Object.values(l.values))if(r.value){const e=S({formulasModule:o,formulaAnalyticsModule:n,getRecordModel:a,formulaTypecheckContextValues:i,spaceId:t.spaceId,value:r.value,featureGates:s});e&&c.push(e)}return{automation_action_id:t.pointer.id,formula_stats:c,type:"define_variables"}}({automationActionModel:t,formulaAnalyticsModule:i,formulasModule:l,formulaTypecheckContextValues:p,getRecordModel:m,featureGates:f}):t.isType("http_request")?{automation_action_id:t.pointer.id,type:"http_request"}:t.isType("publish_site")?{automation_action_id:t.pointer.id,type:"publish_site"}:t.isType("worker")?{automation_action_id:t.pointer.id,type:"worker"}:void(0,r().HB)(t)}function w(e){const{automationModel:t,builderType:n="sidebar",formulaAnalyticsModule:o,formulasModule:i,formulaTypecheckContextValues:a,getRecordModel:s,featureGates:c,simpleFormulasModule:d,source:u}=e,p=[],m=t.getActionPointers().map((e=>s(e))).filter(r().O9);for(const l of t.getActionPointers()){const e=s(l);(0,r().O9)(e)&&p.push(k({automationActionModel:e,automationActionModels:m,formulaAnalyticsModule:o,formulasModule:i,formulaTypecheckContextValues:a,getRecordModel:s,featureGates:c,simpleFormulasModule:d}))}const f=[];let g,h,y;if(t.isEventType()){var v;const e=t.getEventConfiguration(),n=s(t.getParentPointer());g=t.getParentId();const o=t.getEventConfiguration();if("collection_view"===(null===(v=o.source)||void 0===v?void 0:v.type)){const e=s(o.source.pointer);(null==e?void 0:e.parent_table)===l().ev&&(y=null==e?void 0:e.parent_id),h=null==o?void 0:o.source.pointer.id}const i=null==n?void 0:n.getNormalizedSchema();if((0,r().O9)(i)){const{pagesAdded:t,pagePropertiesEdited:n}=e;if(t&&f.push({type:"page"}),"any"===n.type)f.push({condition:"any",type:"property"});else if("none"===n.type)f.push({condition:"none",type:"property"});else{let e=[];"some"===n.type?e=n.some??[]:"all"===n.type&&(e=n.all??[]);const t=[],o=[];e.forEach((e=>{var n;const a=null===(n=i[e.property])||void 0===n?void 0:n.type;(0,r().O9)(a)&&(t.push({type:a,operator:e.filter.operator}),o.push(a))})),f.push({condition:n.type,property_configs:t,property_types:o,type:"property"})}}}else if(t.isButtonType())f.push({type:"button"});else if(t.isRecurrenceType()){var b;f.push({type:"recurrence",frequency:null===(b=t.getTrigger().recurrence)||void 0===b?void 0:b.frequency})}else(0,r().HB)(t);return{automation_actions:p,automation_id:t.id,automation_triggers:f,collection_id:g,collection_view_id:h,collection_view_block_id:y,builder_type:n,source:u}}},897537:(e,t,n)=>{n.d(t,{A:()=>B});n(944114),n(517642),n(658004),n(733853),n(845876),n(432475),n(515024),n(731698),n(898992),n(354520),n(672577),n(581454),n(296540);var o=()=>n(295633),i=()=>n(732810),r=()=>n(970236),a=()=>n(807449),s=()=>n(81068),l=()=>n(449279),c=()=>n(663639),d=()=>n(842599),u=()=>n(733816),p=()=>n(792071),m=()=>n(848538),f=()=>n(798880),g=()=>n(69708),h=()=>n(534177),y=()=>n(284371),v=()=>n(358075),b=()=>n(299545),x=()=>n(130651),S=()=>n(813323),k=()=>n(860048),w=()=>n(231704),I=n(474848);function A(){return(0,I.jsx)(r().E,{content:(0,I.jsx)(g().sA,{id:"spaceUserMembershipType.member",defaultMessage:"Member"})})}var C=()=>n(313171);const T=(0,g().YK)({invited_page:{id:"PermissionsInviteSearchRequest.userTooltip.invited_page",defaultMessage:"{userNameAndEmail} is invited to this page already"},invited_database:{id:"PermissionsInviteSearchRequest.userTooltip.invite_database",defaultMessage:"{userNameAndEmail} is invited to this database already"},invited_space:{id:"PermissionsInviteSearchRequest.userTooltip.invited_space",defaultMessage:"{userNameAndEmail} is invited to this workspace already"},invited_team:{id:"PermissionsInviteSearchRequest.userTooltip.invited_team",defaultMessage:"{userNameAndEmail} is invited to this teamspace already"},not_in_space:{id:"PermissionsInviteSearchRequest.userTooltip.admin",defaultMessage:"Click to invite {userNameAndEmail}"}}),M=(0,g().YK)({workspaceOwnerTooltip:{id:"inviteUserModal.userRole.workspaceOwnerBadge.tooltip",defaultMessage:"{ userNameAndEmail} is a workspace owner in this workspace"},membershipAdminTooltip:{id:"inviteUserModal.userRole.membershipAdminBadge.tooltip",defaultMessage:"{ userNameAndEmail} is a membership admin in this workspace"},memberTooltip:{id:"inviteUserModal.userRole.memberBadge.tooltip",defaultMessage:"{ userNameAndEmail} is a member in this workspace"},restrictedMemberTooltip:{id:"inviteUserModal.userRole.restrictedMemberBadge.tooltip",defaultMessage:"{ userNameAndEmail} is a restricted member in this workspace"},guestTooltip:{id:"inviteUserModal.userRole.guest.tooltip",defaultMessage:"{ userNameAndEmail} is a guest in this workspace"}});function _(e,t){return e.filter(((e,n)=>n<t))}function j(e){const{membershipType:t,intl:n,userNameAndEmail:o}=e;switch(t){case"owner":return{tooltip:n.formatMessage(M.workspaceOwnerTooltip,{userNameAndEmail:o}),userTypeToken:(0,I.jsx)(v().l,{role:t})};case"membership_admin":return{tooltip:n.formatMessage(M.membershipAdminTooltip,{userNameAndEmail:o}),userTypeToken:(0,I.jsx)(v().l,{role:t})};case"member":return{tooltip:n.formatMessage(M.memberTooltip,{userNameAndEmail:o}),userTypeToken:(0,I.jsx)(A,{})};case"restricted_member":return{tooltip:n.formatMessage(M.restrictedMemberTooltip,{userNameAndEmail:o}),userTypeToken:(0,I.jsx)(C().L,{})};case"page_guest":return{tooltip:n.formatMessage(M.guestTooltip,{userNameAndEmail:o}),userTypeToken:(0,I.jsx)(w().w,{labelType:t})};default:(0,h().HB)(t)}}const B=function(e){const{store:t,shouldShowGroups:h,sectionRenderLimit:v,membersOnly:w,hideCurrentUser:A,disableInvitedUsers:M,guestsMustBeRequested:B,hideTitle:R,defaultUserTitle:E,performSearchRequest:P}=e,[D,O,z]=(0,n(590526).$y)(e.permissionsInviteStore),V=(0,n(484714).v3)(),N=(0,g().tz)(),{tokenQuery:F}=D,L=(0,n(792485).S)(),U="invitee",W={request:F,performRequest:e=>P?P({query:e,limit:10,environment:V}):n(542056).hQ({query:e,sectionLimit:{userLimit:10,groupLimit:h?10:0,importContactLimit:0},membersOnly:w,environment:V,intl:N,pageContext:L}),render:(e,w,P)=>{if(e)return(0,I.jsx)(S().z,{loading:!P,hideTitle:R,children:(0,I.jsx)(l().u,{title:(0,I.jsx)(g().sA,{id:"inviteUserModal.searchInput.errorMessage",defaultMessage:"Something went wrong"})})});const O=w&&{...w,inviteUsers:w.inviteUsers.filter((e=>!(0,x().mQ)({permissionsInviteStore:z,target:e})&&(!A||e.value.id!==V.currentUser.id))),importedContacts:(0,x().GZ)(w.inviteUsers,w.importedContacts)},L=O&&(null==F?void 0:F.length)>0,{inviteUsers:W,inviteGroups:H,importedContacts:K=[]}=L?O:(0,x().Es)({currentInviteActors:O,permissionsInviteStore:z,targetStore:t}),G=[..._(W,v),..._(K,10)].map(((e,l)=>{const c="newUser"===e.type?e.value.email:e.value.id,d=(0,x().vP)(e),h=Boolean(L&&(0,x().VF)({permissionsInviteStore:z,userTarget:e,targetStore:t}));return{key:c,render:l=>{const{tooltip:c,userTypeToken:y}=function(e){const{userTarget:t,targetStore:n,isInvited:a,membershipType:s,intl:l}=e,c="newUser"===t.type?null:p().Bj6.fromValue(f().oo,t.value),d=null==c?void 0:c.id,u=null==c?void 0:c.getDisplayName(l),h=t.value.email,y=u&&u!==h?`${u} (${h})`:h??l.formatMessage({id:"userTypeTooltip.generalPerson",defaultMessage:"This person"});if((0,b().$R)(n)&&d){const e=n.getTeamRoleForUser(d,new Set);if(e&&"none"!==e){const t=l.formatMessage(k().Y7[e].label);return{tooltip:l.formatMessage(T.invited_team,{userNameAndEmail:y}),userTypeToken:(0,I.jsx)(r().E,{content:(0,I.jsx)(g().sA,{id:"inviteUserModal.teamspaceRole.memberBadge.label",defaultMessage:"{teamRoleMessage}",values:{teamRoleMessage:t}})})}}return(0,m().P)(s)||(0,m().GN)(s)?j({userNameAndEmail:y,membershipType:s,intl:l}):{tooltip:void 0,userTypeToken:void 0}}if(a)return{tooltip:(0,b().Yu)(n)?l.formatMessage(T.invited_space,{userNameAndEmail:y}):n instanceof o().B?l.formatMessage(T.invited_page,{userNameAndEmail:y}):n instanceof i().m?l.formatMessage(T.invited_database,{userNameAndEmail:y}):l.formatMessage(T.invited_team,{userNameAndEmail:y}),userTypeToken:(0,I.jsx)(r().E,{content:(0,I.jsx)(g().sA,{id:"inviteUserModal.userRole.invitedBadge.label",defaultMessage:"Invited"})})};if("none"===s)return{tooltip:l.formatMessage(T.not_in_space,{userNameAndEmail:y}),userTypeToken:void 0};return j({userNameAndEmail:y,membershipType:s,intl:l})}({userTarget:e,targetStore:t,membershipType:d,isInvited:h,intl:N});return"existingUser"===e.type?(0,I.jsx)(n(457688).A,{...l,actor:(0,n(764880).A7)(e.value),right:y,tooltip:c,tooltipPlacement:"bottom",disabled:M&&h,defaultUserTitle:E}):(0,I.jsx)(n(26697).m,{placement:"bottom",alignment:"start",textWrap:!0,render:t=>(0,I.jsx)(s().A,{...l,...t,icon:(0,I.jsx)(a().I,{icon:u().o}),right:y,title:e.value.email.trim(),disabled:M&&h}),disableTooltip:!c,renderTooltip:()=>c})},action:()=>{if(M&&h)return;const t={...e,..."existingUser"===e.type&&{membershipType:d}};n(134696).kH(V,{subscription_tier:(0,n(483226).AI)(),invite_token_query:F,selected_user_token:e,selected_user_token_rank:l,from:"permission_invite"}),z.setState({...D,inviteTargets:[...D.inviteTargets,t],tokenQuery:"",inputFocus:U})}}})),q=_(H,v).map((e=>{const{value:t}=e;return{key:t.id,render:o=>{const i=(0,x().dV)(e)?(0,I.jsx)(C().L,{}):void 0;return(0,I.jsx)(n(862139)._,{group:t,menuListItemProps:o,right:i})},action:()=>{z.setState({...D,inviteTargets:[...D.inviteTargets,e],tokenQuery:"",inputFocus:U})}}})),$=[];if(G.length>0&&$.push({key:"user results",render:e=>(0,I.jsx)(S().z,{...e,loading:!P,hideTitle:R}),items:G}),h&&q.length>0&&$.push({key:"group results",render:e=>(0,I.jsx)(n(736847).A,{...e,title:(0,I.jsx)(g().sA,{id:"inviteUserModal.searchDropdown.selectGroupTitle",defaultMessage:"Select a group"}),loading:!P}),items:q}),0===$.length){const e=(0,d().qh)(D.tokenQuery);if((0,d().DT)(e)){const o={type:"newUser",value:{email:e},source:"email"},i=(0,x().mQ)({target:o,permissionsInviteStore:z});if(!i)return;if(i)return(0,I.jsx)(S().z,{loading:!P,hideTitle:R,children:(0,I.jsx)(l().u,{title:(0,I.jsx)(g().sA,{id:"inviteUserModal.userAlreadyInvitedMessage",defaultMessage:"Already inviting {user}.",values:{user:(0,I.jsx)("span",{style:{fontWeight:y().Wy.bold},children:(0,x().Sk)({intl:N,target:i})})}})})});const r=(w&&w.inviteUsers||[]).find((t=>"existingUser"===t.type&&t.value.email===e));if(r&&"existingUser"===r.type&&(0,x().wF)({store:t,target:r}))return(0,I.jsx)(S().z,{loading:!P,hideTitle:R,children:(0,I.jsx)(l().u,{title:(0,I.jsx)(g().sA,{id:"inviteUserModal.userAlreadyHasPermissionMessage",defaultMessage:"{user} already has permission.",values:{user:(0,I.jsx)("span",{style:{fontWeight:y().Wy.bold},children:(0,n(695608).c6)(N,r.value)})}})})})}else{if(!D.tokenQuery)return null;$.push({key:"user results",render:e=>(0,I.jsx)(S().z,{...e,loading:!P,hideTitle:R,title:B?(0,I.jsx)(g().sA,{id:"inviteUserModal.searchDropdown.requestPeople",defaultMessage:"Keep typing to request inviting an email"}):(0,I.jsx)(g().sA,{id:"inviteUserModal.searchDropdown.addPeople",defaultMessage:"Keep typing to invite email"})}),items:[{key:D.tokenQuery,render:e=>(0,I.jsx)(s().A,{icon:(0,I.jsx)(a().I,{icon:u().o}),title:D.tokenQuery,...e}),action:()=>{}}]})}}return(0,I.jsx)(c().A,{type:c().O.Vertical,initialFocus:F.length>0?0:void 0,sections:$})}};return(0,I.jsx)(n(251126).A,{...W})}},916275:(e,t,n)=>{n.d(t,{P:()=>r});n(16280),n(898992),n(354520),n(672577),n(737550);var o=()=>n(449412);class i extends(()=>n(62175))().U{isModelAvailable(e,t,n){const o=this.getData(e,{spaceId:t});return!!o&&o.some((e=>e.model===n))}isModelDisabled(e,t,n){const o=this.getData(e,{spaceId:t});if(!o)return!1;const i=o.find((e=>e.model===n));return(null==i?void 0:i.isDisabled)??!1}getModelsForMode(e,t,n){const o=this.getData(e,{spaceId:t});if(o)return o.filter((e=>"markdown-chat"===n?void 0!==e.markdownChat:void 0!==e.workflow))}}const r=new i(((e,{spaceId:t})=>`${e.currentUser.id}:${t}`),(async(e,{spaceId:t})=>{const i=e.currentUser.id;try{const r=await e.api.callCellCompatibleApi({eventName:"getAvailableModels",environment:e,cellNavigation:{spaceId:t},data:{spaceId:t}});if("failed"===r.type){const e=(0,n(247584).V4)(r);return void o().O8(new Error(`Failed to fetch available models: ${e}`),{from:"AvailableModelsStore.fetch",type:"api_failed_response",data:{spaceId:t,userId:i,errorMessage:e}})}return 0===r.data.models.length&&o().O8(new Error("Received empty model list from server"),{from:"AvailableModelsStore.fetch",type:"empty_response",data:{spaceId:t,userId:i}}),r.data.models}catch(r){return void o().O8(r,{from:"AvailableModelsStore.fetch",type:"error",data:{spaceId:t,userId:i}})}}),{dontCacheUndefined:!0});(0,n(852832).exposeDebugValue)("availableAiModelsStore",r)},921123:(e,t,n)=>{n.r(t),n.d(t,{archiveBoxFillIcon:()=>i,iconDefinition:()=>o});n(296540);const o={viewBox:"0 0 20 20",fittedViewBox:"3.12 3.12 13.75 13.75",svg:(0,n(474848).jsx)("path",{d:"M3.125 4.25c0-.621.504-1.125 1.125-1.125h11.5c.621 0 1.125.504 1.125 1.125v1.5c0 .621-.504 1.125-1.125 1.125H4.25A1.125 1.125 0 0 1 3.125 5.75zm1 3.875h11.75v7.625c0 .621-.504 1.125-1.125 1.125h-9.5a1.125 1.125 0 0 1-1.125-1.125zM8 9.875a.625.625 0 1 0 0 1.25h4a.625.625 0 1 0 0-1.25z"})},i=(0,n(340498).wt)("archiveBoxFill",o,"fill")},922952:(e,t,n)=>{n.d(t,{u:()=>a});var o=()=>n(295633),i=()=>n(302996),r=()=>n(723085);function a(e){return e instanceof r().h||e instanceof i().SpaceStore||e instanceof o().B}},926586:(e,t,n)=>{n.d(t,{K:()=>p});n(296540);var o=()=>n(590526),i=()=>n(75435),r=()=>n(695115),a=()=>n(182183),s=()=>n(69708),l=()=>n(44551);var c=()=>n(130119),d=n(474848);const u=(0,s().YK)({menu:{defaultMessage:"Menu",id:"topbar.appMenuButton.title"}});function p(){const e=(0,s().tz)();return(0,o().O$)(i().b)?null:(0,d.jsx)(r().A,{style:{position:"absolute",top:"10px",insetInlineStart:"14px",width:24,height:24,zIndex:1e5,...(0,c().g)({noDrag:!0})},colorVariant:"primary",onClick:()=>{var e;null===l().electronApi||void 0===l().electronApi||null===(e=l().electronApi.openAppMenu)||void 0===e||e.call(l().electronApi)},icon:a().notionTintableIcon,ariaLabel:e.formatMessage(u.menu)})}},933117:(e,t,n)=>{n.d(t,{A:()=>f});n(944114),n(898992),n(803949),n(581454);var o=n(296540),i=()=>n(245720),r=()=>n(30537),a=()=>n(546926),s=()=>n(890492),l=()=>n(663639),c=()=>n(736847),d=()=>n(69708),u=()=>n(496603),p=()=>n(534177),m=n(474848);const f=function({renderOrigin:e,onClick:t,items:o,getKey:i,renderItem:r,selectedItem:s,onSelect:l,dontCloseParentOnSelect:c,menuTypeOverride:d,menuTitle:u,width:p,minWidth:f,disabled:g,originGap:v,buttonPopupStore:b,sameWidthAsOrigin:x}){const S=(0,n(590526).uB)(b,n(118307).A),k=d??(n(726637).A.isMobile?a().gu.Modal:a().gu.Popup);return(0,m.jsx)(n(250910).A,{popupType:y(k),bottomSheetInitialState:"half",renderOrigin:e,buttonPopupStore:S,placementToOrigin:"bottom",onClick:t,render:e=>(0,m.jsx)(h,{parent:e,items:o,getKey:i,renderItem:r,selectedItem:s,onSelect:l,dontCloseParentOnSelect:c,menuType:k,menuTitle:u,width:p,minWidth:f}),disabled:g,originGap:v,sameWidthAsOrigin:x})};function g(e,t,n,i,r,a,s,l){return{key:0,render:e=>(0,o.createElement)(c().A,{...e,key:t,topBorder:t>0}),items:e.map((e=>({key:i(e),render:t=>r({...t,value:e,key:i(e),selectedItem:a}),action:()=>{!function(e,t,n){t!==e&&n(e)}(e,a,s),l||n.close()}})))}}function h({parent:e,items:t,getKey:n,renderItem:o,selectedItem:r,onSelect:c,dontCloseParentOnSelect:f,menuType:h,menuTitle:y,width:v,minWidth:b}){const x=[];if(function(e){return e.length>0&&e[0]instanceof Array}(t))t.forEach(((t,i)=>{const a=g(t,i,e,n,o,r,c,f);x.push(a)}));else{const i=g(t,0,e,n,o,r,c,f);x.push(i)}const S=(0,m.jsx)(l().A,{type:l().O.Vertical,initialFocus:u().SL(u().Bq(t),(e=>u().n4(e,r))),sections:x});let k;switch(h){case a().gu.ActionSheet:k={menuType:a().gu.ActionSheet};break;case a().gu.Modal:k={menuType:a().gu.Modal,title:y,right:(0,m.jsx)(d().sA,{...i().W.done}),onClickRight:e.close};break;case a().gu.Popup:k={menuType:a().gu.Popup,width:v||160,minWidth:b};break;default:(0,p().HB)(h)}return(0,m.jsx)(s().A,{...k,children:S})}function y(e){switch(e){case a().gu.ActionSheet:return r().n.SlideUp;case a().gu.Modal:return r().n.BottomSheet;case a().gu.Popup:return r().n.Popup}}},933517:(e,t,n)=>{n.d(t,{O:()=>r,t:()=>i});var o=()=>n(79926);const i=(0,o()._h)(new(o().O2)("PeekRenderer",(async()=>{const{default:e}=await Promise.all([n.e(75134),n.e(35530),n.e(9773),n.e(55373),n.e(36192),n.e(71562),n.e(96346),n.e(44711),n.e(53321),n.e(51220),n.e(16471),n.e(37353),n.e(37571),n.e(29151),n.e(40118),n.e(50397),n.e(62475),n.e(3151),n.e(98629),n.e(27992),n.e(63452),n.e(66249),n.e(92845),n.e(87249),n.e(79022),n.e(14578),n.e(87017),n.e(34877),n.e(46414),n.e(11676),n.e(61165),n.e(47668),n.e(94522),n.e(24587),n.e(44584),n.e(67494),n.e(10522),n.e(38293),n.e(40992),n.e(88455),n.e(63515),n.e(33893),n.e(55162),n.e(91793),n.e(71003),n.e(32370),n.e(26264),n.e(97989),n.e(36437),n.e(93963),n.e(44590),n.e(7914),n.e(55113),n.e(85071),n.e(25588),n.e(6769),n.e(23640),n.e(72252),n.e(93134),n.e(12452),n.e(18825),n.e(52871),n.e(29351),n.e(22370),n.e(93049),n.e(22582),n.e(18636),n.e(87289),n.e(16060),n.e(16529),n.e(34281),n.e(35279),n.e(69785),n.e(77754),n.e(29357),n.e(64242),n.e(39986),n.e(47160),n.e(76677),n.e(68609),n.e(15553),n.e(77345),n.e(79340),n.e(37759),n.e(41423),n.e(41751),n.e(21627),n.e(41714),n.e(77777),n.e(17729),n.e(23493),n.e(51240),n.e(20029),n.e(95885),n.e(39438),n.e(54719),n.e(25523),n.e(23730),n.e(43151)]).then(n.bind(n,274806));return{PeekRenderer:e}})),(e=>e.PeekRenderer)),r=(0,o()._h)(new(o().O2)("RestrictedAccess",(async()=>{const{RestrictedAccessComponent:e}=await Promise.all([n.e(49418),n.e(57314)]).then(n.bind(n,287570));return{RestrictedAccessComponent:e}})),(e=>e.RestrictedAccessComponent))},935432:(e,t,n)=>{n.d(t,{A:()=>a});var o=()=>n(416845),i=()=>n(357264),r=()=>n(788579);function a(e,t){if((0,o().pA8)(t)){const n=(0,r().$)(t.clientData);if(n)return"messageValues"in t.clientData?e.formatMessage(n,t.clientData.messageValues):e.formatMessage(n)}return e.formatMessage(i().k.generic_error)}},937199:(e,t,n)=>{n.d(t,{LH:()=>r,Op:()=>i,bi:()=>l,sf:()=>s,v$:()=>a});n(16280);var o=n(296540);const i=(0,o.createContext)(null);function r(){const e=(0,o.useContext)(i);if(!e)throw new Error("usePageLayoutEditorContext must be used inside BaseLayoutEditorContext.Provider");return e}function a(){return(0,o.useContext)(i)}i.displayName="BaseLayoutEditorContext";const s=(0,o.createContext)(null);function l(){const e=(0,o.useContext)(s);if(!e)throw new Error("usePageLayoutEditorContext must be used inside PageLayoutEditorContextProvider");return e}s.displayName="PageLayoutEditorContext"},962753:(e,t,n)=>{n.d(t,{EH:()=>v,FO:()=>h,P$:()=>y,VA:()=>f,h0:()=>d,lM:()=>u,mq:()=>g});n(898992),n(581454),n(737550);var o=()=>n(907258),i=()=>n(242422),r=()=>n(763765),a=()=>n(613848),s=()=>n(496603),l=()=>n(534177),c=()=>n(822789);function d(e){const{currentUserRootStore:t}=o().default.state;if(!t)return!1;const n=t.getSpaceViewStores();return(0,s().oE)(null==n?void 0:n.map((e=>e.getSpaceId()))).map((t=>a().A.getData(e,{spaceId:t,userId:e.currentUser.id}))).some((e=>p(e)))}function u(e,t){return p(a().A.getData(e,{spaceId:t,userId:e.currentUser.id}))}function p(e){switch(null==e?void 0:e.membershipType){case void 0:case"none":case"page_guest":return!1;case"restricted_member":case"member":case"membership_admin":case"owner":return!0===e.is_sales_assisted;default:(0,l().HB)(e)}}function m(e,t){if(!t)return"control";if(u(e,t))return"control";const n=i().default.getEligibleGroup({experimentId:"ai_product_retention_simplified_input",defaultGroup:"control"});return"input"===n||"input_and_ask_mode"===n?n:"control"}function f(){switch(i().default.getEligibleGroup({experimentId:"ai_product_retention_agent_follow_ups",defaultGroup:"control"})){case"button_nudge":return["button","nudge"];case"button_control":return["button","default"];case"nudge":return["nudge"];default:return}}function g(e,t){const n=i().default.checkGate({gateName:"agent_deep_find"}),o=void 0!==t&&u(e,t),a=e.currentUser.id,s=!t||!a||r().t.USEWITHCAUTION_isFetchedForSpaceAndUserId({spaceId:t,userId:a}),l=n||!o&&s&&"on"===i().default.getEligibleGroup({experimentId:"ai_product_retention_deepfind",defaultGroup:"control"}),c=y(e,t);return{agentDeepFindEnabled:l,useReadOnlyMode:l&&c}}function h(e,t){if(t?(0,c().vp)(t):(0,c().hw)())return!0;return"control"!==m(e,t)}function y(e,t){return"input_and_ask_mode"===m(e,t)}function v(){return"on"===i().default.getEligibleGroup({experimentId:"ai_product_retention_agent_speculative_search",defaultGroup:"control"})}},965833:(e,t,n)=>{n.d(t,{L:()=>o});const o=700},976582:(e,t,n)=>{n.d(t,{m:()=>r});var o=n(296540);class i{constructor(e){this.topbarRenderLocation=void 0;const{topbarRenderLocation:t}=e;this.topbarRenderLocation=t}get showNewTabButton(){return{AIChat:!0,DefaultTopbar:!0,Marketplace:!0,PersonProfile:!0,PersonalHome:!0,PersonalHomeScrolled:!0,PublicPage:!0,PublicSharing:!0,TeamHome:!0,TrustedDomainPage:!0,WorkflowEditor:!0,AssistantMenuHeader:!1,Meet:!1}[this.topbarRenderLocation]}get topbarActionsDisplayStyle(){return{PersonalHome:"transparent",PersonalHomeScrolled:"bordered",AIChat:"solid",AssistantMenuHeader:"solid",DefaultTopbar:"solid",Marketplace:"solid",PersonProfile:"solid",PublicPage:"solid",PublicSharing:"solid",TeamHome:"solid",TrustedDomainPage:"solid",WorkflowEditor:"solid",Meet:"solid"}[this.topbarRenderLocation]}get showDesktopAppMenuIconButton(){return{AIChat:!0,AssistantMenuHeader:!1,DefaultTopbar:!1,Marketplace:!1,PersonProfile:!1,PersonalHome:!1,PersonalHomeScrolled:!1,PublicPage:!1,PublicSharing:!1,TeamHome:!1,TrustedDomainPage:!1,WorkflowEditor:!1,Meet:!1}[this.topbarRenderLocation]}}function r(e){const{location:t}=e;return(0,o.useMemo)((()=>new i({topbarRenderLocation:t})),[t])}},976792:(e,t,n)=>{n.d(t,{YS:()=>a,q8:()=>r,zz:()=>s});n(898992),n(737550);var o=()=>n(383616),i=()=>n(966249);function r(e){return Boolean(e.state&&"connectionPointer"in e.state&&e.state.connectionPointer)}function a(e){const{connectionScopes:t,module:n}=e;if("slack"!==n.type)return!1;if(!r(n))return!1;const o=function(){const e=i().Nh.slack;if(!e)return[];const t=e.config.scopes;return t.production??t.local??[]}();return 0!==o.length&&o.some((e=>!(t??[]).includes(e)))}function s(e){if(e)return e.table===o().Kl?{type:"workflowExternal",externalConnectionId:e.id}:{type:"workflow",workflowExternalScopedConnectionId:e.id}}}}]);