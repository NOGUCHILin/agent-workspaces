"use strict";(globalThis.webpackChunknotion_next=globalThis.webpackChunknotion_next||[]).push([[14344,30015,31911],{97065:(e,t,r)=>{r.d(t,{DH:()=>i});var o=()=>r(538948);const n=["trial_from_perf_marketing","onboarding_reverse_trial","mp_reverse_trial","feature_upsell_reverse_trial","admin_trial"];function i(e){return n.includes(e)||o().FN.includes(e)}},124617:(e,t,r)=>{r.d(t,{u:()=>n});var o=()=>r(314529);function n(e,t){const r=t.name,n="args"in t?t.args:void 0;(0,o().DO_NOT_USE_trackLegacy)(e,r,n)}},159026:(e,t,r)=>{r.d(t,{Ay:()=>s,NJ:()=>o,d5:()=>n});r(898992),r(354520),r(581454),r(737550);let o=function(e){return e.unselected="unselected",e.workspace_member="workspace_member",e.request_workspace_member="request_workspace_member",e.page_guest="page_guest",e.closed="closed",e}({}),n=function(e){return e[e.closed=0]="closed",e[e.share_page=1]="share_page",e[e.share_workspace=2]="share_workspace",e[e.request_workspace=3]="request_workspace",e}({});class i extends(()=>r(757695))().Store{getInitialState(){return{inviteStage:n.closed,selection:o.workspace_member,order:[o.workspace_member,o.page_guest],invitedUsers:[],invitedEmailToUserIdMap:{},flowId:r(206267).JW()}}startWorkspaceInvite(){this.setState({...this.state,inviteStage:n.share_workspace,order:[o.workspace_member,o.page_guest],selection:o.workspace_member})}startRequestMembership(){this.setState({...this.state,inviteStage:n.request_workspace,order:[o.request_workspace_member,o.page_guest],selection:o.request_workspace_member})}hasGuests(){return this.state.invitedUsers.some((e=>e.isGuest))}getGuestEmails(){return this.state.invitedUsers.filter((e=>e.isGuest)).map((e=>e.email))}}const s=i},159600:(e,t,r)=>{r.d(t,{s:()=>d});var o=()=>r(907258),n=()=>r(484714),i=()=>r(590526),s=()=>r(584262),a=()=>r(802149),l=()=>r(564884);var c=()=>r(492414),u=()=>r(805419);function d({shouldRedirectForExistingUsersOnly:e}){const t=(0,n().v3)(),r=(0,i().K8)((()=>{const{mainEditorCurrentBlockStore:e}=o().default.state;if(e)return(0,c().J8)({store:e,pageVisitSource:s().y8.PublicShareLink})}),[]);return o=>{!function(e,t){(0,l().u)({environment:e,event:{eventName:"click_sharing_signup",eventProperties:t}})}(t,{from:o}),r&&(0,a().wA)({url:r,shouldRedirectForExistingUsersOnly:e}),u().publicShareLinkLoginModalStore.setState({open:!0})}}},200424:(e,t,r)=>{e.exports=r.p+"9ade71d75a1c0e93.png"},278589:(e,t,r)=>{r.d(t,{N:()=>i});var o=()=>r(534177),n=()=>r(17680);function i(e){return"avatar"===e?n().eQ:"xsmall"===e?18:"xsmall_plus"===e?24:"small"===e?28:"small_plus"===e?32:"medium"===e?36:"medium_plus"===e?44:"medium_large"===e?48:"large"===e?50:"large_plus"===e?64:"xlarge"===e?94:"plans"===e?20:"deep_dive"===e?16:"upsell_banner"===e?74:"personalization_modal"===e?96:(0,o().HB)(e)}},326887:(e,t,r)=>{r.d(t,{$X:()=>i,H8:()=>s,x2:()=>n});var o=()=>r(534177);function n(e){return"event"===e||"recurrence"===e}function i(e){const t=e.getTrigger();return(0,o().O9)(t)&&n(t.type)}function s(e){return"event"===e?"event":"recurrence"===e?"recurrence":void(0,o().HB)(e)}},329458:(e,t,r)=>{r.d(t,{L:()=>n});var o=()=>r(314529);function n(e,t){(0,o().DO_NOT_USE_trackLegacy)(e,"notion_topbar_click",t,{dontWait:!0})}},369251:(e,t,r)=>{r.d(t,{A:()=>v,k:()=>_});var o=r(296540),n=()=>r(907258),i=()=>r(717137),s=()=>r(484714),a=()=>r(590526),l=()=>r(401497),c=()=>r(128933),u=()=>r(574359),d=()=>r(31511),p=()=>r(406094),m=()=>r(160432),g=()=>r(69708),y=()=>r(284371),b=()=>r(134696),h=()=>r(753812),f=()=>r(159026),S=r(474848);function _(e){const t=(0,s().v3)(),{onDismiss:r}=e,[_,v]=(0,o.useState)(""),x=(0,g().tz)(),k=(0,l().IS)((()=>({container:{padding:20,width:350,paddingBottom:15},title:{fontWeight:y().Wy.medium,marginBottom:10},input:{width:"100%",padding:"8px 12px",marginTop:10,marginBottom:10},button:{width:"100%",marginTop:10}})),[]),M=(0,a().O$)(n().AppStoreSidebarSpaceStore),w=(0,a().K8)((()=>M?(0,u().G)(t,M):"workspace"),[t,M]);return(0,S.jsxs)("div",{style:k.container,children:[(0,S.jsx)("div",{style:k.title,children:(0,S.jsx)(g().sA,{id:"GuestMembershipRequestModal.title",defaultMessage:"Request membership to {workspaceName}",values:{workspaceName:w}})}),(0,S.jsxs)(i().A,{debugName:"GuestMembershipRequestModal",capture:!0,allowEsc:!0,children:[(0,S.jsx)(d().A,{style:k.input,textarea:!0,value:_,placeholder:x.formatMessage({id:"GuestMembershipRequestModal.message.placeholder",defaultMessage:"Reason (optional)"}),onChange:e=>{v(e.target.value)}}),(0,S.jsx)(m().A,{colorPalette:"blue",size:"lg",style:k.button,onClick:()=>{const{currentUser:e}=t;e&&e.id&&M&&(b().RH(t,{invite_flow_id:void 0,user_count:1,new_user_count:1,is_bot:!1,space_role:"read_and_write",invite_message_length:_.length,invite_space_role_selection:f().NJ.request_workspace_member,from:"sidebar_guest_request"}),h().callApi({eventName:"requestAccess",environment:t,data:{type:"actor-to-space",forActorId:e.id,spaceId:M.id,message:_,attributes:{origin_id:M.id,origin_type:"sidebar_guest_request",origin_table:"space",add_permissions_on_approval:!1}}}).catch((()=>{c().D6({label:(0,S.jsx)(g().sA,{id:"guestMembershipRequestModal.confirmationToast.errorMessage",defaultMessage:"Failed to send membership request."})})})).finally((()=>{c().D6({label:(0,S.jsx)(g().sA,{id:"guestMembershipRequestModal.confirmationToast.successMessage",defaultMessage:"Sent membership request."})})})),v(""),r())},children:(0,S.jsx)(g().sA,{id:"GuestMembershipRequestModal.sendRequest.button",defaultMessage:"Send request"})}),(0,S.jsx)(p().A,{size:"lg",style:k.button,onClick:()=>{v(""),r()},children:(0,S.jsx)(g().sA,{id:"GuestMembershipRequestModal.cancel.button",defaultMessage:"Cancel"})})]})]})}const v=function(e){const t=(0,s().v3)(),[n,i]=(0,o.useState)(!1),{origin:a}=e,c=(0,l().IS)((()=>({modalStyle:{alignSelf:"center",overflow:"visible",top:0,width:350}})),[]);return(0,S.jsx)(r(433876).A,{modalStyle:c.modalStyle,open:n,origin:(0,S.jsx)("div",{onClick:()=>{r(701763).cK(t),i(!0)},children:a}),onDismiss:()=>i(!1),renderContent:()=>(0,S.jsx)(_,{onDismiss:()=>i(!1)})})}},422540:(e,t,r)=>{r.d(t,{$0:()=>h,Fx:()=>M,Ge:()=>g,I3:()=>p,Kj:()=>x,PP:()=>w,TK:()=>j,Yy:()=>d,aE:()=>C,cQ:()=>k,kH:()=>y,m7:()=>m,nq:()=>_,nv:()=>f,tj:()=>b});r(898992),r(354520),r(737550);var o=()=>r(496603),n=()=>r(534177),i=()=>r(381283),s=()=>r(898244),a=()=>r(651124),l=()=>r(349835),c=()=>r(390066);const u={checkbox:!0,date:!0,email:!0,multi_select:!0,number:!0,person:!0,phone_number:!0,relation:!0,select:!0,status:!0,text:!0,title:!0,url:!0,auto_increment_id:!1,button:!1,created_by:!1,created_time:!1,file:!1,formula:!1,last_edited_by:!1,last_edited_time:!1,last_visited_time:!1,location:!1,rollup:!1,verification:!1,place:!1},d={checkbox:[{type:"checkbox"}],date:[{type:"date"}],email:[{type:"text"}],multi_select:[{type:"text"},{of:{type:"text"},type:"array"}],number:[{type:"number"}],person:[{type:"person"},{of:{type:"person"},type:"array"}],phone_number:[{type:"text"}],relation:[{type:"block"},{of:{type:"block"},type:"array"}],select:[{type:"text"},{of:{type:"text"},type:"array"}],status:[{type:"text"},{of:{type:"text"},type:"array"}],text:void 0,title:void 0,url:[{type:"text"}]};function p(e){return Boolean(u[e.type]&&!(0,s().UU)(e)&&(!(0,s().$M)(e)||void 0===(0,s().om)(e)))}function m(e){const{collectionFormat:t,collectionSchema:r,filter:i,sort:l,sourcePropertyIds:u}=e,d=(u??(0,n().uv)(r)).filter(((t,o,n)=>{const a=r[t];return!(!a||!p(a))&&(("relation"!==a.type||!e.restrictCrossSpace||!(0,s().o2)(e.spaceId,a))&&(!i||i([t,a],o,r)))}));if(0===d.length)return[];if(!t||!1===l)return d;const m=(0,c().L)(t,r,void 0,a().jf.Page).collection_page_properties||[];return o().Ul(d,(e=>m.findIndex((t=>t.property===e))))}function g(e){const{collectionFormat:t,collectionSchema:r,sort:s}=e,l=(0,n().uv)(r).filter(((e,t,o)=>{const n=r[e];return!(!n||!(0,i().J)(n))}));if(0===l.length)return[];if(!t||!1===s)return l;const u=(0,c().L)(t,r,void 0,a().jf.Page).collection_page_properties||[];return o().Ul(l,(e=>u.findIndex((t=>t.property===e))))}function y(e){return e.type===l().M9.InvalidCharacter?{type:e.type,character:e.character}:e.type===l().M9.TokenExpected?{type:e.type,token:e.token}:e.type===l().uW.MissingSchemaPropertyOnThisRow||e.type===l().uW.MissingSchemaPropertyOnCollection?{type:e.type,collectionId:e.collectionId,property:e.property,errorSource:e.errorSource}:e.type===l().uW.ThisRowBlockPropertyMismatchCollection?{type:e.type,thisRowCollection:e.thisRowCollection,errorSource:e.errorSource}:e.type===l().uW.MissingContextVariable?{type:e.type,valueId:e.valueId,errorSource:e.errorSource}:e.type===l().uW.FunctionCallTooFewArguments?{type:e.type,numArguments:e.numArguments,errorSource:e.errorSource}:e.type===l().uW.FunctionCallUnexpectedArgument?{type:e.type,parameterIndex:e.parameterIndex,errorSource:e.errorSource}:e.type===l().uW.FunctionCallArgumentWrongType?{type:e.type,argumentType:e.argumentType,libraryFunctionName:e.libraryFunction.name,parameterIndex:e.parameterIndex,errorSource:e.errorSource}:e.type===l().uW.MissingDataDependencyBlock?{type:e.type,blockPointer:e.blockPointer,node:e.node,errorSource:e.errorSource}:e.type===l().uW.MissingDataDependencyPerson?{type:e.type,personPointer:e.personPointer,errorSource:e.errorSource}:e.type===l().uW.MemberPropertyMismatchCollection?{type:e.type,blockCollection:e.blockCollection,errorSource:e.errorSource}:e.type===l().uW.DownstreamParseFailure?{type:e.type,collectionId:e.collectionId,property:e.property,errorSource:e.errorSource}:e.type===l().uW.ContextVariableWrongType?{type:e.type,valueId:e.valueId,expectedType:e.expectedType,resultType:e.resultType,errorSource:e.errorSource}:e.type===l().uW.DisallowedValueType?{type:e.type,expressionValue:e.expressionValue,allowedValueTypes:e.allowedValueTypes,errorSource:e.errorSource}:e.type===l().uW.LibraryFunctionExecutionError?{type:e.type,error:e.error,libraryFunctionName:e.libraryFunction.name,errorSource:e.errorSource}:"errorSource"in e?{type:e.type,errorSource:e.errorSource}:{type:e.type}}const b={checkbox:!0,date:!0,email:!0,multi_select:!0,number:!0,person:!0,phone_number:!0,relation:!0,select:!0,status:!0,text:!0,title:!0,url:!0,button:!1,file:!1,verification:!1,auto_increment_id:!1,created_by:!1,created_time:!1,formula:!1,last_edited_by:!1,last_edited_time:!1,last_visited_time:!1,location:!1,rollup:!1,place:!1};function h(e){return Boolean(b[e.type])}function f(e){const{collectionFormat:t,collectionSchema:r,filter:i,sort:l}=e,u=(0,n().uv)(r).filter(((e,t,o)=>{var n;const a=r[e];return!(!a||!b[a.type])&&((!(0,s().$M)(a)||null===(n=(0,s().om)(a))||void 0===n||!n.auto_update_on_edit)&&(!i||i([e,a],t,r)))}));if(0===u.length)return[];if(!t||!1===l)return u;const d=(0,c().L)(t,r,void 0,a().jf.Page).collection_page_properties||[];return o().Ul(u,(e=>d.findIndex((t=>t.property===e))))}const S={checkbox:!0,email:!0,multi_select:!0,number:!0,person:!0,phone_number:!0,relation:!0,select:!0,status:!0,text:!0,title:!0,url:!0,auto_increment_id:!1,button:!1,created_by:!1,created_time:!1,date:!1,file:!1,formula:!1,last_edited_by:!1,last_edited_time:!1,last_visited_time:!1,location:!1,rollup:!1,verification:!1,place:!1};function _(e){return S[e.type]}const v={checkbox:!0,created_by:!0,created_time:!0,date:!0,email:!0,multi_select:!0,number:!0,person:!0,phone_number:!0,relation:!0,select:!0,status:!0,text:!0,title:!0,url:!0,last_edited_by:!0,last_edited_time:!0,auto_increment_id:!1,button:!1,file:!1,formula:!1,last_visited_time:!1,location:!1,rollup:!1,verification:!1,place:!1};function x(e){return v[e.type]}function k(e){return 0===e}function M(e){return function(e){return"button_block"===e||"button_property"===e}(e)}function w(e){const{property:t,collectionSchema:r}=e;return!!r&&!r[t]}function j(e){const{collectionSchema:t,property:r,type:o}=e,n=null==t?void 0:t[r];return!n||("action"===o?!p(n):!b[n.type])}function C({automationTrigger:e,collectionSchema:t}){if("event"===(null==e?void 0:e.type)){const{pagesAdded:r,pagePropertiesEdited:o,source:i}=e.event;if(void 0===i)return!1;const s="some"===o.type&&o.some,a="all"===o.type&&o.all;if((s||a||[]).some((e=>w({collectionSchema:t,property:e.property})||j({collectionSchema:t,property:e.property,type:"trigger"}))))return!1;const l="some"===o.type&&(!(0,n().O9)(o.some)||0===o.some.length),c="all"===o.type&&(!(0,n().O9)(o.all)||0===o.all.length);if(!r&&("none"===o.type||l||c))return!1}else{if("recurrence"!==(null==e?void 0:e.type))return!1;if(!e.recurrence)return!1}return!0}},546461:(e,t,r)=>{r.d(t,{K4:()=>v,To:()=>w,fi:()=>x,q8:()=>_,u:()=>S});r(16280),r(18107),r(967357);var o=r(296540),n=()=>r(484714),i=()=>r(792485),s=()=>r(590526),a=()=>r(79926),l=()=>r(140934),c=()=>r(322867),u=()=>r(69708),d=()=>r(534177),p=()=>r(813297),m=()=>r(326887),g=()=>r(862292),y=()=>r(190019),b=()=>r(76190),h=r(474848);const f=(0,o.createContext)({ancestors:[]});f.displayName="AutomationContext";f.Consumer;function S(e){const{automationStore:t,children:r,contextType:S,enableExistenceGuarantees:_}=e,v=(0,n().v3)(),x=(0,u().tz)(),{value:w}=(0,a().fJ)(g().T.formulas),{value:j}=(0,a().fJ)(p().QV.automationTypecheck),C=(0,b().n)(t),T=(0,i().S)(),A=(0,s().K8)((()=>{if(!w)return{error:new(c().N9)("Missing formulas dependency")};if(!j)return{error:new(c().N9)("Missing automation dependency")};const e=function(e){const{environment:t,automationStore:r,automationTypecheckModule:o,contextType:n,formulasModule:i,intl:s,isSubscribed:a,pageStore:c,enableExistenceGuarantees:u}=e,p=function(e,t){if(t)return k.get(e);return k.get(e)??M.get(e)}(r,u);if(p)return p;const g=new(l().ComputedStore)((()=>{const e=r.getTriggerType();let l=n;return(0,d().O9)(e)&&(0,m().x2)(e)&&(l=(0,m().H8)(e)),(0,y().Z)({environment:t,automationStore:r,automationTypecheckModule:o,contextType:l,formulasModule:i,intl:s,isSubscribed:a,pageStore:c,enableExistenceGuarantees:u})}),{debugName:"automationContextTypecheckResultCachedStore"});return function(e,t,r){r?(k.set(e,t),M.set(e,t)):M.set(e,t)}(r,g,u),g}({automationStore:t,automationTypecheckModule:j,contextType:S,environment:v,formulasModule:w,intl:x,isSubscribed:C,pageStore:"button_block"===S?null==T?void 0:T.pageStore:void 0,enableExistenceGuarantees:_});return e.state}),[v,t,j,S,w,x,C,null==T?void 0:T.pageStore,_]),P=(0,o.useContext)(f),I=(0,o.useMemo)((()=>0===P.ancestors.length?[{automationStore:t,contextType:S,typecheckResult:A}]:[...P.ancestors,{automationStore:t,contextType:S,typecheckResult:A}]),[P,t,S,A]),q=(0,o.useMemo)((()=>({ancestors:I,enableExistenceGuarantees:_})),[I,_]);return(0,h.jsx)(f.Provider,{value:q,children:r})}function _(){const e=(0,o.useContext)(f).ancestors.at(-1);if(!e)throw new Error("No automation context found!");return e}function v(){return(0,o.useContext)(f).ancestors.at(-1)}function x(){return(0,o.useContext)(f).enableExistenceGuarantees}const k=new WeakMap,M=new WeakMap;function w(e){var t;return null===(t=k.get(e))||void 0===t?void 0:t.state}},563692:(e,t,r)=>{r.r(t),r.d(t,{iconDefinition:()=>o,xMarkFillSmallIcon:()=>n});r(296540);const o={viewBox:"0 0 16 16",fittedViewBox:"3.03 3.03 9.94 9.94",svg:(0,r(474848).jsx)("path",{d:"M12.73 4.33a.75.75 0 1 0-1.06-1.06L8 6.94 4.33 3.27a.75.75 0 1 0-1.06 1.06L6.94 8l-3.67 3.67a.75.75 0 1 0 1.06 1.06L8 9.06l3.67 3.67a.75.75 0 0 0 1.06-1.06L9.06 8z"})},n=(0,r(340498).wt)("xMarkFillSmall",o,"fillSmall")},613016:(e,t,r)=>{r.d(t,{a:()=>n});var o=()=>r(907258);function n(){const{sidebarSpaceStore:e}=o().default.getState();return e?e.id:void 0}},775275:(e,t,r)=>{r.d(t,{C:()=>R,X:()=>F});var o=r(296540),n=()=>r(907258),i=()=>r(484714),s=()=>r(590526),a=()=>r(401497),l=()=>r(718827),c=()=>r(249046),u=()=>r(807449),d=()=>r(265060),p=()=>r(406094),m=()=>r(631524),g=()=>r(493552),y=()=>r(187174),b=r(474848);const h={viewBox:"0 0 20 20",fittedViewBox:"2.37 2.37 15.25 15.25",svg:(0,b.jsx)("path",{d:"M8.758 2.476a7.7 7.7 0 0 1 2.484 0 .625.625 0 1 1-.202 1.233 6.4 6.4 0 0 0-2.08 0 .625.625 0 0 1-.202-1.233m4.812 1.469a.625.625 0 0 1 .872-.143 7.7 7.7 0 0 1 1.756 1.756.625.625 0 1 1-1.015.729 6.4 6.4 0 0 0-1.47-1.47.625.625 0 0 1-.143-.872m-7.283.872a.625.625 0 0 0-.73-1.015 7.7 7.7 0 0 0-1.755 1.756.625.625 0 1 0 1.015.729 6.4 6.4 0 0 1 1.47-1.47m10.519 3.425a.625.625 0 0 1 .718.516 7.7 7.7 0 0 1 0 2.484.625.625 0 0 1-1.233-.202 6.4 6.4 0 0 0 0-2.08.625.625 0 0 1 .515-.718M3.71 8.96a.625.625 0 0 0-1.234-.202 7.7 7.7 0 0 0 0 2.484.625.625 0 1 0 1.233-.202 6.4 6.4 0 0 1 0-2.08m12.346 4.61c.28.201.344.592.143.872a8 8 0 0 1-.625.762l-.006.007A7.6 7.6 0 0 1 10 17.625a7.6 7.6 0 0 1-4.434-1.42l-.008-.007a7.7 7.7 0 0 1-1.756-1.756.625.625 0 0 1 1.015-.729q.241.336.523.637l.006.006q.267.286.567.537C6.702 13.495 8.246 12.56 10 12.56s3.298.934 4.087 2.332a6.4 6.4 0 0 0 1.096-1.18.625.625 0 0 1 .872-.143m-8.3-7.4C8.277 5.519 9.05 5.125 10 5.125s1.723.393 2.245 1.044c.51.635.75 1.474.75 2.346s-.24 1.71-.75 2.346c-.522.65-1.294 1.044-2.245 1.044-.95 0-1.723-.394-2.245-1.044-.51-.635-.75-1.474-.75-2.346s.24-1.711.75-2.346"})},f=(0,r(340498).wt)("personCropCircleDashedFill",h,"fill");var S=()=>r(120251),_=()=>r(69708),v=()=>r(100622),x=()=>r(753812),k=()=>r(564884),M=()=>r(244828),w=()=>r(384944);var j=()=>r(369251),C=()=>r(1130),T=()=>r(134217),A=()=>r(303742),P=()=>r(799836),I=()=>r(311337),q=()=>r(515512);function R({sidebarSpaceStore:e,sidebarSpaceViewStore:t}){const r=function({sidebarSpaceStore:e,sidebarSpaceViewStore:t}){const r=(0,i().v3)(),a=(0,q().Q)({spaceStore:e}),{isEligibleForGuestMembershipRequest:l,isEligibleForGuestMembershipRequestStatus:c}=F({sidebarSpaceStore:e,environment:r}),u=(0,s().K8)((()=>{var t;const r=null===(t=n().default.state.currentUserSettingsStore)||void 0===t||null===(t=t.getSettings())||void 0===t?void 0:t.guest_sidebar_membership_request_popup_dismissed;return!!e&&Boolean(null==r?void 0:r.includes(e.id))}),[e]),d=(0,s().K8)((()=>{var e;return"guest_with_private_pages"===(null===(e=n().default.state.sidebarSpaceViewStore)||void 0===e?void 0:e.getGuestExperience())}),[]),p=(0,s().K8)((()=>!!(0,A().o)(t)||!(!a&&"pending"!==c)||!!u||(0,I().y)(r)),[a,u,c,r,t]),[{value:m}]=(0,P().P)({environment:r,skipServerFetch:p}),g=Boolean(null==m?void 0:m.hasJoinableSpaces);return(0,o.useMemo)((()=>({shouldShow:!p,isEligibleForGuestMembershipRequest:Boolean(l),hasJoinableSpaces:g,isGuestWithPrivatePages:d,isLoading:"pending"===c})),[p,l,g,d,c])}({sidebarSpaceStore:e,sidebarSpaceViewStore:t}),{shouldShow:a,isEligibleForGuestMembershipRequest:l,hasJoinableSpaces:c}=r;return a?(0,b.jsx)(W,{sidebarSpaceStore:e,isEligibleForGuestMembershipRequest:l,hasJoinableSpaces:c}):null}const D=(0,_().YK)({createOnlyDescription:{defaultMessage:"To unlock all of Notionâ€™s features, try creating your own workspace",id:"sidebar.guestPopup.createOnlyDescription"},joinDescription:{defaultMessage:"Join as member to collaborate",id:"sidebar.guestPopup.joinOrCreateDescription"},createWorkspaceCTA:{defaultMessage:"Create workspace",id:"sidebar.guestPopup.createWorkspaceCTA"},requestMembershipCTA:{defaultMessage:"Request membership",id:"sidebar.guestPopup.requestMembershipCTA"},createOrJoinWorkspaceCTA:{defaultMessage:"Join or create workspace",id:"sidebar.guestPopup.createOrJoinWorkspaceCTA"},pendingRequestCTA:{defaultMessage:"Membership requested",id:"sidebar.guestPopup.pendingRequestCTA"},pendingRequestDescription:{defaultMessage:"In the meantime, start creating pages",id:"sidebar.guestPopup.pendingRequestDescription"}});function W({sidebarSpaceStore:e,isEligibleForGuestMembershipRequest:t,hasJoinableSpaces:r}){const y=(0,i().v3)(),h=(0,s().K8)((()=>{var e;return"guest_with_private_pages"===(null===(e=n().default.state.sidebarSpaceViewStore)||void 0===e?void 0:e.getGuestExperience())}),[]),x=(0,a().IS)((()=>({iconRow:{marginBottom:10},guestPopupCard:{padding:14,borderRadius:8,marginTop:"auto",marginInlineEnd:8,marginBottom:8,marginInlineStart:8,background:v().Tj.background.elevated,border:`1px solid ${v().Tj.border.secondary}`},primaryButton:{width:"100%",height:"inherit",justifyContent:"center",padding:8,marginTop:8,whiteSpace:"normal",textAlign:"center",background:v().Tj.blue.background.secondaryTranslucent,color:v().Tj.blue.text.accentPrimary},secondaryButton:{width:"100%",height:"inherit",justifyContent:"center",padding:8,marginTop:4,whiteSpace:"normal",textAlign:"center",color:v().Tj.text.primary}})),[]),T=(0,o.useCallback)((()=>{C().createOrJoinSpace(y,"guest_popup")}),[y]),A=(0,o.useCallback)((()=>(0,b.jsx)(p().A,{style:x.secondaryButton,disabled:!0,children:(0,b.jsx)(g().D,{styleKey:"captionMedium",children:(0,b.jsx)(_().sA,{...D.pendingRequestCTA})})})),[x.secondaryButton]),P=(0,o.useCallback)((()=>e?(0,b.jsx)(j().A,{origin:(0,b.jsx)(m().p,{style:x.primaryButton,children:(0,b.jsx)(g().D,{styleKey:"captionMedium",children:(0,b.jsx)(_().sA,{...D.requestMembershipCTA})})})}):null),[e,x.primaryButton]),I=(0,o.useCallback)((({cta:e,isPrimary:t})=>(0,b.jsx)(p().A,{onClick:T,style:t?x.primaryButton:x.secondaryButton,children:(0,b.jsx)(g().D,{styleKey:"captionMedium",children:(0,b.jsx)(_().sA,{...e})})})),[T,x.primaryButton,x.secondaryButton]),q=Boolean(t),R=Boolean(r),W=Boolean(!r);let F,B;h?(F=D.pendingRequestDescription,B=(0,b.jsx)(A,{})):q&&R?(F=D.joinDescription,B=(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(P,{}),(0,b.jsx)(I,{cta:D.createOrJoinWorkspaceCTA,isPrimary:!1})]})):q&&W?(F=D.joinDescription,B=(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(P,{}),(0,b.jsx)(I,{cta:D.createWorkspaceCTA,isPrimary:!1})]})):!q&&R?(F=D.joinDescription,B=(0,b.jsx)(I,{cta:D.createOrJoinWorkspaceCTA,isPrimary:!0})):!q&&W&&(F=D.createOnlyDescription,B=(0,b.jsx)(I,{cta:D.createWorkspaceCTA,isPrimary:!0}));const L=(0,o.useCallback)((()=>{const{sidebarSpaceStore:e,currentUserSettingsStore:t}=n().default.state;e&&t&&function(e){var t;const{environment:r,userSettingsStore:o,spaceId:n,isEligibleForGuestMembershipRequest:i,hasJoinableSpaces:s,userAction:a}=e;(0,k().u)({environment:r,event:{eventName:"guest_membership_popup_dismissed",eventProperties:{request_membership:i,create_workspace:!s,create_or_join_workspace:s}}});const l=((null===(t=o.getSettings())||void 0===t?void 0:t.guest_sidebar_membership_request_popup_dismissed)||[]).concat(n);M().createAndCommit({environment:r,userAction:a,canUndo:!1,perform:e=>{w().zv({store:o,data:{settings:{...o.getSettings(),guest_sidebar_membership_request_popup_dismissed:l}},transaction:e})}})}({environment:y,userSettingsStore:t,spaceId:e.id,isEligibleForGuestMembershipRequest:q,hasJoinableSpaces:Boolean(r),userAction:"GuestSidebarFooter.dismissGuestMembershipRequestPopup"})}),[y,q,r]);return(0,b.jsxs)(c().wt,{style:x.guestPopupCard,children:[(0,b.jsxs)(c().Ye,{justifyContent:"space-between",style:x.iconRow,children:[(0,b.jsx)(u().I,{icon:f,colorVariant:"secondary"}),(0,b.jsx)(l().Ay,{onClick:L,children:(0,b.jsx)(d().Q,{iconGroup:S().k,variantName:"small",colorVariant:"secondary"})})]}),(0,b.jsx)(g().D,{styleKey:"captionRegular",colorVariant:"primary",children:(0,b.jsx)(_().sA,{defaultMessage:"Explore more of Notion",id:"sidebar.guestPopup.title"})}),(0,b.jsx)(g().D,{styleKey:"captionRegular",colorVariant:"secondary",children:(0,b.jsx)(_().sA,{...F})}),B]})}function F({sidebarSpaceStore:e,environment:t}){const[{value:r,status:o}]=(0,y().Yb)((async()=>{if(!e)return!1;if(!(0,T().dW)())return!1;const r=await x().callApi({eventName:"isEligibleForGuestMembershipRequest",environment:t,data:{spaceId:e.id}});return"failed"!==r.type&&r.data.isEligible}),[e,t]);return{isEligibleForGuestMembershipRequest:r,isEligibleForGuestMembershipRequestStatus:o}}},775916:(e,t,r)=>{r.d(t,{p:()=>s});var o=()=>r(300474),n=()=>r(166386),i=()=>r(985315);function s(){const e=(0,o().r)(),t=(0,i().g)({spaceId:e});if(t)return(0,n().e8)(t,"trial")}},783793:(e,t,r)=>{r.d(t,{o:()=>c,x:()=>l});r(296540);var o=()=>r(401497),n=()=>r(100622),i=()=>r(278589),s=()=>r(200424),a=r(474848);function l(e){const{variant:t,imgSource:r,tintColor:s,faceStyle:l,shadowVariant:u="strong",style:d,...p}=e,m=(0,o().IS)((()=>{const e=(0,i().N)(t);return{faceImgWrap:{width:e,height:e,borderRadius:"100%",background:n().Tj.assistantCornerButtonBackground,..."strong"===u&&{boxShadow:e>=90?n().Tj.shadowMDThickerOutline:n().Tj.shadowMD},..."light"===u&&{borderRadius:"50%",boxShadow:e>=90?n().Tj.shadowSMThickerOutline:n().Tj.shadowSM},overflow:"hidden",...d}}}),[t,u,d]);return(0,a.jsx)("div",{...p,children:(0,a.jsx)("div",{style:m.faceImgWrap,children:(0,a.jsx)(c,{imgSource:r,variant:t,tintColor:s,style:l})})})}function c(e){const{imgSource:t,variant:r,tintColor:n,style:l,alt:c,...u}=e,d=(0,i().N)(r),p=t??s(),m=c??"Notion AI face",g=(0,o().IS)((()=>({faceImg:{height:d,width:d,transform:"scaleX(var(--direction, 1))",...l},tintedFace:{height:d,width:d,transform:"scaleX(var(--direction, 1))",backgroundColor:n,WebkitMaskImage:`url(${p})`,maskImage:`url(${p})`,WebkitMaskRepeat:"no-repeat",maskRepeat:"no-repeat",WebkitMaskPosition:"center",maskPosition:"center",WebkitMaskSize:"contain",maskSize:"contain",...l}})),[d,l,n,p]);return void 0!==n?(0,a.jsx)("div",{style:g.tintedFace,role:"img","aria-label":m}):(0,a.jsx)("img",{...u,style:g.faceImg,src:p,alt:m})}},799836:(e,t,r)=>{r.d(t,{P:()=>i});var o=()=>r(187174),n=()=>r(753812);function i({environment:e,skipServerFetch:t,includeTopSpaces:r=!1,limit:i}){return(0,o().Yb)((async()=>{if(t)return;const o=await n().callMainCellApi({eventName:"hasJoinableSpaces",environment:e,data:{includeTopSpaces:r,limit:i}});return"failed"!==o.type?o.data:void 0}),[e,t,r,i])}},805419:(e,t,r)=>{r.r(t),r.d(t,{PublicShareLinkLoginModal:()=>d,publicShareLinkLoginModalStore:()=>u});var o=r(296540),n=()=>r(726637),i=()=>r(590526),s=()=>r(802149),a=()=>r(69708),l=()=>r(997513),c=r(474848);const u=new(r(215152).A);function d(){const e=(0,i().K8)((()=>u.state.open),[]),t=(0,o.useMemo)((()=>{const e=(0,s().KB)({config:n().A,fileHostProtocol:n().A.secureFileConfig.protocol,fileHostName:n().A.secureFileConfig.hostname});return null==e?void 0:e.shouldRedirectForExistingUsersOnly}),[e]);return e?(0,c.jsx)(l().z,{loginModalStore:u,title:(0,c.jsx)(a().sA,{id:"publicShareLinkLoginModal.title",defaultMessage:"Sign up or log in"}),description:t?(0,c.jsx)(a().sA,{id:"publicShareLinkLoginModal.description.createWorkspace",defaultMessage:"Create a new account to start building, or log in to access more features."}):(0,c.jsx)(a().sA,{id:"publicShareLinkLoginModal.description",defaultMessage:"Create an account or log in to access more features."})}):null}},933117:(e,t,r)=>{r.d(t,{A:()=>g});r(944114),r(898992),r(803949),r(581454);var o=r(296540),n=()=>r(245720),i=()=>r(30537),s=()=>r(546926),a=()=>r(890492),l=()=>r(663639),c=()=>r(736847),u=()=>r(69708),d=()=>r(496603),p=()=>r(534177),m=r(474848);const g=function({renderOrigin:e,onClick:t,items:o,getKey:n,renderItem:i,selectedItem:a,onSelect:l,dontCloseParentOnSelect:c,menuTypeOverride:u,menuTitle:d,width:p,minWidth:g,disabled:y,originGap:f,buttonPopupStore:S,sameWidthAsOrigin:_}){const v=(0,r(590526).uB)(S,r(118307).A),x=u??(r(726637).A.isMobile?s().gu.Modal:s().gu.Popup);return(0,m.jsx)(r(250910).A,{popupType:h(x),bottomSheetInitialState:"half",renderOrigin:e,buttonPopupStore:v,placementToOrigin:"bottom",onClick:t,render:e=>(0,m.jsx)(b,{parent:e,items:o,getKey:n,renderItem:i,selectedItem:a,onSelect:l,dontCloseParentOnSelect:c,menuType:x,menuTitle:d,width:p,minWidth:g}),disabled:y,originGap:f,sameWidthAsOrigin:_})};function y(e,t,r,n,i,s,a,l){return{key:0,render:e=>(0,o.createElement)(c().A,{...e,key:t,topBorder:t>0}),items:e.map((e=>({key:n(e),render:t=>i({...t,value:e,key:n(e),selectedItem:s}),action:()=>{!function(e,t,r){t!==e&&r(e)}(e,s,a),l||r.close()}})))}}function b({parent:e,items:t,getKey:r,renderItem:o,selectedItem:i,onSelect:c,dontCloseParentOnSelect:g,menuType:b,menuTitle:h,width:f,minWidth:S}){const _=[];if(function(e){return e.length>0&&e[0]instanceof Array}(t))t.forEach(((t,n)=>{const s=y(t,n,e,r,o,i,c,g);_.push(s)}));else{const n=y(t,0,e,r,o,i,c,g);_.push(n)}const v=(0,m.jsx)(l().A,{type:l().O.Vertical,initialFocus:d().SL(d().Bq(t),(e=>d().n4(e,i))),sections:_});let x;switch(b){case s().gu.ActionSheet:x={menuType:s().gu.ActionSheet};break;case s().gu.Modal:x={menuType:s().gu.Modal,title:h,right:(0,m.jsx)(u().sA,{...n().W.done}),onClickRight:e.close};break;case s().gu.Popup:x={menuType:s().gu.Popup,width:f||160,minWidth:S};break;default:(0,p().HB)(b)}return(0,m.jsx)(a().A,{...x,children:v})}function h(e){switch(e){case s().gu.ActionSheet:return i().n.SlideUp;case s().gu.Modal:return i().n.BottomSheet;case s().gu.Popup:return i().n.Popup}}},969339:(e,t,r)=>{r.d(t,{C6:()=>s,HQ:()=>i,Yo:()=>a});var o=()=>r(79926);const n=new(o().O2)("login",(async()=>{const{default:e}=await Promise.all([r.e(44711),r.e(35837),r.e(38293),r.e(91793),r.e(19456),r.e(65375),r.e(60751),r.e(25192),r.e(96966)]).then(r.bind(r,465209)),{default:t}=await Promise.all([r.e(44711),r.e(35837),r.e(38293),r.e(91793),r.e(19456),r.e(65375),r.e(60751),r.e(25192),r.e(96966)]).then(r.bind(r,406370)),{LoginMobileNative:o}=await Promise.all([r.e(44711),r.e(35837),r.e(38293),r.e(91793),r.e(19456),r.e(65375),r.e(60751),r.e(25192),r.e(96966)]).then(r.bind(r,737515)),{default:n}=await Promise.all([r.e(44711),r.e(35837),r.e(38293),r.e(91793),r.e(19456),r.e(65375),r.e(60751),r.e(25192),r.e(96966)]).then(r.bind(r,990718)),{default:i}=await Promise.all([r.e(44711),r.e(35837),r.e(38293),r.e(91793),r.e(19456),r.e(65375),r.e(60751),r.e(25192),r.e(96966)]).then(r.bind(r,52542));return{LoginPage:e,LoginDesktop:t,LoginMobileNative:o,FrontLoginPage:n,LoginModalContent:i}})),i=(0,o()._h)(n,(e=>e.LoginPage)),s=(0,o()._h)(n,(e=>e.FrontLoginPage)),a=(0,o()._h)(n,(e=>e.LoginModalContent))},985315:(e,t,r)=>{r.d(t,{g:()=>s});var o=()=>r(484714),n=()=>r(590526),i=()=>r(342641);function s({spaceId:e}){const t=(0,o().v3)();return(0,n().K8)((()=>{if(e)return i().default.getData(t,{spaceId:e})}),[t,e])}},997513:(e,t,r)=>{r.d(t,{z:()=>g});var o=r(296540),n=()=>r(726637),i=()=>r(590526),s=()=>r(611648),a=()=>r(394888),l=()=>r(69708),c=()=>r(100622),u=()=>r(376254),d=()=>r(969339),p=()=>r(20489),m=r(474848);function g({loginModalStore:e,title:t,description:r,isSignup:s,disableLoginLink:l,redirectURL:c,className:u,onDismiss:p,trustedDomain:g}){const f=(0,i().K8)((()=>e.state.open),[e]),S=(0,o.useId)(),_=(0,o.useId)(),v={title:t,description:r,isSignup:s,redirectURL:c,disableLoginLink:l,titleAriaId:S,descriptionAriaId:_,trustedDomain:g};return(0,m.jsx)(a().s,{ariaLabelledBy:S,ariaDescribedBy:_,isOpen:f,onDismiss:()=>{h({loginModalStore:e,onDismiss:p})},areaConstraint:{width:{type:"fixed",length:480},height:{type:"unlimited",scroll:"allow"}},deprecatedCompatibilityOverrides:{tabletsUsePhoneDisplayMode:!0},render:()=>(0,m.jsx)(y,{children:(0,m.jsxs)("div",{className:u,children:[n().A.isMobile?void 0:(0,m.jsx)(b,{loginModalStore:e,onDismiss:p}),(0,m.jsx)(d().Yo,{...v})]})})})}function y({children:e}){return n().A.isMobile?(0,m.jsx)(u().H,{type:s().A.Y,children:e}):e}function b({loginModalStore:e,onDismiss:t}){return(0,m.jsx)("div",{style:{fontSize:14,color:c().Tj.text.secondary,position:"absolute",insetInlineEnd:0,marginTop:16,marginInlineEnd:16,cursor:"pointer",zIndex:1},onClick:()=>{h({loginModalStore:e,onDismiss:t})},children:(0,m.jsx)(l().sA,{defaultMessage:"Cancel",id:"sidebarSwitcherMultiAccount.addAccountModal.cancelButton.label"})})}function h(e){const{loginModalStore:t,onDismiss:r}=e;p().b.reset(),t.setState({open:!1}),r&&r()}}}]);