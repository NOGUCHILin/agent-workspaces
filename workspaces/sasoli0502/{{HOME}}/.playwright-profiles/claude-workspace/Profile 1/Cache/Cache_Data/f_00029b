"use strict";(globalThis.webpackChunknotion_next=globalThis.webpackChunknotion_next||[]).push([[98288],{65402:(e,t,o)=>{o.d(t,{D:()=>n});const n=(0,o(69708).YK)({inputPlaceholder:{defaultMessage:"Filter by…",id:"database.viewSettings.createFilterTab.inputPlaceholder"},propertyInputPlaceholder:{defaultMessage:"Search for a property…",id:"database.viewSettings.mobileSheet.propertyInputPlaceholder"},sortTitle:{defaultMessage:"Sort",id:"database.viewSettings.mainTab.sortButton.title"},advancedFilterTitle:{defaultMessage:"Advanced filter",id:"database.viewSettings.createFilterTab.advancedFilterTitle"},addAdvancedFilterTitle:{defaultMessage:"Add advanced filter",id:"database.viewSettings.createFilterTab.addAdvancedFilter.title"},advancedFilterRulesCount:{defaultMessage:"{ruleCount, plural, one {{ruleCount} rule} other {{ruleCount} rules}}",id:"database.viewSettings.createFilterTab.advancedFilterRulesCount.title"},filterButtonTitle:{defaultMessage:"Filter",id:"database.viewSettings.mainTab.filterButton.title"},learnMoreAboutScimAttributes:{defaultMessage:"Learn about SCIM attributes",id:"database.viewSettings.scimPropertiesTab.learnMoreAboutScimAttributes"},loadingDataMessage:{defaultMessage:"It might take a couple of seconds for the data to load into the database",id:"database.viewSettings.scimPropertiesTab.loadingDataMessage"},numberOfFiltersTitle:{defaultMessage:"{numberOfFilters, plural, one {{numberOfFilters} filter} other {{numberOfFilters} filters}}",id:"database.viewSettings.mainTab.filterButton.filters.title"},noFiltersTitle:{defaultMessage:"No filters",id:"database.viewSettings.mainTab.filterButton.noFilters.title"},openFullscreenButton:{defaultMessage:"Open as full page",id:"database.collectionViewBlock.openFullscreenButton.label"},lockDatabaseMultiSourceTooltip:{defaultMessage:"Lock views and data sources in this database",id:"database.lockDatabase.multiSourceTooltip"},lockDatabaseViewsTooltip:{defaultMessage:"Lock all views in this database",id:"database.lockDatabaseViews.tooltip"},visibleToAllWorkspaceMembers:{defaultMessage:"Visible to all workspace members",id:"database.viewSettings.scimPropertiesTab.visibleToAllWorkspaceMembers"}})},155826:(e,t,o)=>{o.d(t,{l:()=>l});var n=()=>o(148307),i=()=>o(651124);const l={[i().uO.Jira]:n().A.images.externalIntegrations.jiraPng,[i().uO.Salesforce]:n().A.images.externalIntegrations.salesforcePng}},366792:(e,t,o)=>{o.r(t),o.d(t,{ExternalImportAndSyncIndicator:()=>q});var n=o(296540),i=()=>o(907258),l=()=>o(755531),a=()=>o(59226),s=()=>o(484714),c=()=>o(590526),r=()=>o(401497),d=()=>o(609679),u=()=>o(457205),p=()=>o(970236),g=()=>o(807449),y=()=>o(631524),S=()=>o(26697),f=()=>o(869190),m=()=>o(651124),b=()=>o(187174),v=()=>o(278238),x=()=>o(775842),T=()=>o(663640),_=o(474848);const h={viewBox:"0 0 20 20",fittedViewBox:"8 8 4 4",svg:(0,_.jsx)("path",{d:"M10 12a2 2 0 1 0 0-4 2 2 0 0 0 0 4"})},w=(0,o(340498).wt)("dot",h,"default");var I=()=>o(532940),C=()=>o(179034),k=()=>o(824862),j=()=>o(519831),M=()=>o(706021),A=()=>o(462853),F=()=>o(69708),P=()=>o(100622),V=()=>o(615234),B=()=>o(284371),E=()=>o(753812),H=()=>o(339798),D=()=>o(527438),L=()=>o(202775),z=()=>o(155826),N=()=>o(905388),W=()=>o(554045),U=()=>o(963575),O=()=>o(866515),R=(o(898992),o(737550),()=>o(477336));function K(e){const{store:t}=e,o=(0,c().K8)((()=>{const e=t.isCollectionView()?t.getCollectionStores():void 0;return!!e&&e.some((e=>{var t;const o=e.getFormat();return(null==o||null===(t=o.sync_state)||void 0===t?void 0:t.syncing)&&(null==o?void 0:o.static_import_collection_type)===m().IE.CsvImport}))}),[t]),n=(0,r().IS)((()=>({wrapper:{display:"flex",alignItems:"center",gap:6,paddingInlineStart:6,paddingInlineEnd:6},syncIcon:{position:"relative"},syncProgress:{fontWeight:B().Wy.medium,fontSize:14,color:P().Tj.text.secondary},badge:{background:"none",whiteSpace:"nowrap",width:"fit-content",height:28,display:"flex",marginBottom:5,borderRadius:20,padding:"2px 6px"}})),[]);return o?(0,_.jsx)("div",{style:{alignSelf:"end",display:"inline-block"},children:(0,_.jsx)(p().E,{style:n.badge,content:(0,_.jsxs)("div",{style:n.wrapper,children:[(0,_.jsx)(g().I,{icon:R().l,size:"xs",colorPalette:"blue",colorVariant:"accentPrimary",style:n.syncIcon}),(0,_.jsx)("span",{style:n.syncProgress,children:(0,_.jsx)(F().sA,{id:"PageTitle.ImportSync.syncInProgress.title",defaultMessage:"Importing CSV"})})]})})}):null}var J=()=>o(390366),X=()=>o(254526);const Y=(0,F().YK)({botDisconnectedTooltipHeading:{id:"CollectionViewBlockHeaderActions.ExternalSync.botDisconnected.tooltip.heading",defaultMessage:"Re-authenticate to continue syncing"},lastUpdatedTooltipCaption:{id:"CollectionViewBlockHeaderActions.ExternalSync.lastUpdatedTooltipCaption",defaultMessage:"Last updated {lastEditedTimeNormalized}"},syncFailedTitle:{id:"CollectionViewBlockHeaderActions.ExternalSync.syncFailed.title",defaultMessage:"Sync failed"},syncStoppedTitle:{id:"CollectionViewBlockHeaderActions.ExternalSync.syncStopped.title",defaultMessage:"Sync stopped"},someRowsFailedToSyncTooltipHeading:{id:"CollectionViewBlockHeaderActions.ExternalSync.someRowsFailedToSync.tooltip.heading",defaultMessage:"Failed to sync some rows"},syncFailedTooltipHeading:{id:"CollectionViewBlockHeaderActions.ExternalSync.syncFailed.tooltip.heading",defaultMessage:"Failed to sync some projects"},syncInProgressTitle:{id:"CollectionViewBlockHeaderActions.ExternalSync.syncInProgress.title",defaultMessage:"Syncing"},syncInProgressWithPercentage:{id:"CollectionViewBlockHeaderActions.ExternalSync.syncInProgressWithPercentage.title",defaultMessage:"Syncing {progress}% complete"},jiraSyncInProgressTooltipHeading:{id:"CollectionViewBlockHeaderActions.ExternalSync.jiraSyncInProgress.tooltip.heading",defaultMessage:"Syncing and updating issues from {site}"},salesforceSyncInProgressTooltipHeading:{id:"CollectionViewBlockHeaderActions.ExternalSync.salesforceSyncInProgress.tooltip.heading",defaultMessage:"Syncing report"},collectionLastSyncedTimestampAlt:{id:"CollectionViewBlockHeaderActions.ExternalSync.collectionLastSynced.subtitleAlt",defaultMessage:"Synced"},collectionLastSyncedTooltipHeading:{id:"CollectionViewBlockHeaderActions.ExternalSync.collectionLastSynced.tooltip.heading",defaultMessage:"Last updated {lastEditedTimeNormalized}"},pageLastSyncedTitle:{id:"CollectionViewBlockHeaderActions.ExternalSync.pageLastSynced.title",defaultMessage:"Synced with {integration}"},pageLastSyncedTimestampSubtitle:{id:"CollectionViewBlockHeaderActions.ExternalSync.pageLastSynced.subtitle",defaultMessage:"{lastUpdated}"},pageLastSyncedTooltipHeading:{id:"CollectionViewBlockHeaderActions.ExternalSync.pageLastSynced.tooltip.heading",defaultMessage:"Last updated {lastEditedTimeNormalized}"},pageLastSyncedTooltipCaption:{id:"CollectionViewBlockHeaderActions.ExternalSync.pageLastSynced.tooltip.caption",defaultMessage:"Click to view the help center"},featureUnavailableTooltip:{id:"CollectionViewBlockHeaderActions.collectionPremiumFeatureUpsell.noExpiration.description",defaultMessage:"{upsellTier, select, plus {Plus plan} business {Business plan} enterprise {Enterprise plan} other {Upgrade}} is required to access this feature"}});function q(e){const{store:t,collectionContextStore:o}=e,n=(0,c().K8)((()=>{var e;let o;if(t.table===j().Vl)o=t;else if(t.table===C().ev)if(t.isCollectionView())o=t.getCollectionStoreIfSingleSource();else{const e=t.getParentStore();(null==e?void 0:e.table)===j().Vl&&(o=e)}return null===(e=o)||void 0===e?void 0:e.getFormat()}),[t]);return(null==n?void 0:n.static_import_collection_type)===m().IE.CsvImport&&e.store.table===C().ev?(0,_.jsx)(K,{store:e.store}):o&&((null==n?void 0:n.external_collection_type)===m().uO.Jira||(null==n?void 0:n.external_collection_type)===m().uO.Salesforce)?(0,_.jsx)(G,{store:t,collectionContextStore:o,hideText:e.hideText}):null}function G(e){const{store:t,collectionContextStore:o,hideText:p=!1}=e,y=(0,F().tz)(),S=(0,s().v3)(),v=(0,c().O$)(i().AppStoreSidebarSpaceStore),h=(0,c().K8)((()=>t.table===C().ev&&t.getCreatedById()===o.getCurrentUserId()),[t,o]),w=(0,c().K8)((()=>{var e,t,n,i;const l=o.collectionStore();if(l&&l.table!==j().Vl)return{};const a=null==l?void 0:l.getFormat();return{isCollection:!0,isSyncFailed:Boolean(null==a||null===(e=a.error)||void 0===e?void 0:e.status_code),syncError:null==a?void 0:a.error,isSyncing:Boolean(null==a||null===(t=a.sync_state)||void 0===t?void 0:t.syncing),botId:null==a?void 0:a.bot_id,collectionSyncedTime:null==a||null===(n=a.sync_state)||void 0===n?void 0:n.last_synced_at,collectionSyncedTimeNormalized:null!=a&&null!==(i=a.sync_state)&&void 0!==i&&i.last_synced_at?(0,f().jE)(a.sync_state.last_synced_at,d().locale,y):void 0,pageSyncedTime:void 0,pageSyncedTimeNormalized:void 0,synced_collection_external_url:null==a?void 0:a.synced_collection_external_url,external_collection_type:null==a?void 0:a.external_collection_type,collectionId:null==l?void 0:l.id}}),[o,y]),U=(0,c().K8)((()=>{if(w.botId&&v){var e;return null===(e=u().v.createChildStore(v,{table:k().GP,id:w.botId,spaceId:v.id}).getModel())||void 0===e?void 0:e.integration_id}}),[w.botId,v]),[{value:R}]=(0,b().Yb)((async()=>{const e=o.getCurrentUserId(),t=(0,l().S)();if(!t||!e)return;const n=U?(0,A().l)(U):void 0;if(n)try{return(0,J().B)(S,{name:n,spaceId:t.id,userId:e})}catch{}}),[S,o,U]),K=(0,c().K8)((()=>!R||(0,M().e2)(R)),[R]),q=(0,a().X)("jira_sync_show_filter_warning"),G=(0,c().K8)((()=>{var e,t;return!((null===(e=o.collectionStore())||void 0===e?void 0:e.getFormat().external_collection_type)!==m().uO.Jira||!q||w.isSyncing||w.isSyncFailed||null!==(t=o.collectionStore())&&void 0!==t&&null!==(t=t.getFormat())&&void 0!==t&&null!==(t=t.sync_state)&&void 0!==t&&t.filter_config)}),[q,w.isSyncing,w.isSyncFailed,o]),$=(0,c().K8)((()=>{const e=(0,l().S)();if(w.botId&&e){const t=u().v.createChildStore(e,{table:k().GP,id:w.botId,spaceId:e.id});if("Salesforce"===w.external_collection_type&&h){return"connected"!==(0,X().i_)(t).status}return!!t.isDefined()&&!t.getAlive()}return!1}),[w.botId,w.external_collection_type,h]),Q=$||w.isSyncFailed&&!w.isSyncing&&w.isCollection||!K,ee=(0,c().K8)((()=>{const e="report"===W().A.state.type?W().A.state:void 0;return!!e&&(e.collectionId===w.collectionId&&"started"===e.status)}),[w.collectionId]),{collectionSpaceId:te,taskCollectionId:oe}=(0,c().K8)((()=>{var e,t;const n=o.collectionStore(),i=o.collectionViewBlockStore(),l="notion://projects_collection"===(null==n||null===(e=n.getFormat())||void 0===e?void 0:e.app_config_uri)?(0,D().k7)(i,null==n||null===(t=n.getSchema())||void 0===t?void 0:t["notion://projects/project_to_task_relation"]):n;return{collectionSpaceId:null==n?void 0:n.getSpaceId(),taskCollectionId:null==l?void 0:l.id}}),[o]),ne=function(e){const{taskCollectionId:t,spaceId:o,shouldPoll:i}=e,l=(0,s().v3)(),[c,r]=(0,n.useState)(0),d=(0,a().X)("enable_jira_sync_progress"),u=(0,n.useMemo)((()=>async()=>{if(t&&o)try{const e=await E().callApi({eventName:"getJiraSyncProgress",environment:l,data:{taskCollectionId:t,spaceId:o}});if("success"===e.type){const t=e.data;if("progress"in t){const e=Math.round(t.progress);r(e<100?e:99)}}}catch(e){}}),[l,t,o]);return(0,O().n)(u,10*V().TD,i&&Boolean(t&&o)&&d),(0,n.useEffect)((()=>{i&&d||r(0)}),[i,d]),c}({taskCollectionId:oe,spaceId:te,shouldPoll:Boolean(w.isSyncing&&w.external_collection_type===m().uO.Jira)});(0,n.useEffect)((()=>{ee&&($||!w.botId)&&void 0===w.collectionSyncedTime&&h&&H().eM({collectionSettingsStore:null==o?void 0:o.settingsStore,source:"external_source",openedFrom:"sync_indicator"})}),[$,w.botId,ee,w.collectionSyncedTime,null==o?void 0:o.settingsStore,h]);const ie=(0,r().IS)((()=>({wrapper:{display:"flex",alignItems:"center",gap:6},integrationIcon:{width:16,height:16,color:Q?P().Tj.yellow.icon.accentPrimary:P().Tj.blue.icon.accentPrimary},syncIcon:{color:Q?P().Tj.yellow.icon.accentPrimary:P().Tj.blue.icon.accentPrimary},syncProgress:{color:Q?P().Tj.text.primary:P().Tj.blue.text.accentPrimary},syncFailedText:{color:P().Tj.yellow.text.secondary},syncDefaultText:{fontWeight:B().Wy.medium,fontSize:B().J.UIRegular.desktop,color:P().Tj.text.secondary,textAlign:"center",marginBottom:"1px"}})),[Q]),le=(0,n.useMemo)((()=>"Salesforce"===w.external_collection_type?(0,_.jsx)(g().I,{icon:I().exclamationMarkTriangleIcon,size:"sm",style:ie.syncIcon}):(0,_.jsx)(g().I,{icon:T().i,size:"sm",style:ie.syncIcon})),[w.external_collection_type,ie.syncIcon]),ae=(0,n.useMemo)((()=>{const e=w.external_collection_type?z().l[w.external_collection_type]:"";var t,o;if(!K)return{icon:(0,_.jsx)(g().I,{icon:T().i,size:"sm",style:ie.syncIcon}),content:(0,_.jsx)("span",{style:{...ie.syncDefaultText,...ie.syncFailedText},children:(0,_.jsx)(F().sA,{...Y.syncStoppedTitle})}),tooltipContent:{heading:y.formatMessage(Y.featureUnavailableTooltip,{upsellTier:"product"===(null==R||null===(t=R.upsell)||void 0===t?void 0:t.type)?null==R||null===(o=R.upsell)||void 0===o?void 0:o.product:void 0})}};if($)return{icon:le,content:(0,_.jsx)("span",{style:{...ie.syncDefaultText,...ie.syncFailedText},children:(0,_.jsx)(F().sA,{...Y.syncFailedTitle})}),tooltipContent:{heading:y.formatMessage(Y.botDisconnectedTooltipHeading),caption:y.formatMessage(Y.lastUpdatedTooltipCaption,{lastEditedTimeNormalized:w.collectionSyncedTimeNormalized})}};if(w.isCollection){if(w.isSyncing){const e="Salesforce"===w.external_collection_type?y.formatMessage(Y.salesforceSyncInProgressTooltipHeading):y.formatMessage(Y.jiraSyncInProgressTooltipHeading,{site:(0,N().ay)(w.synced_collection_external_url||"")}),t=w.external_collection_type===m().uO.Jira&&ne>0,o=t?Y.syncInProgressWithPercentage:Y.syncInProgressTitle,n=t?{progress:ne}:{};return{icon:(0,_.jsx)("div",{style:{transform:"scaleX(-1)"},children:(0,_.jsx)(g().I,{icon:x().a,style:{...ie.syncIcon,fill:"currentColor"},className:"sync-spinner"})}),content:(0,_.jsx)("span",{style:ie.syncDefaultText,children:(0,_.jsx)(F().sA,{...o,values:n})}),tooltipContent:{heading:e}}}if(w.isSyncFailed){let e=Y.syncFailedTooltipHeading;var n;if("Salesforce"===w.external_collection_type)e=(null===(n=(0,X().q3)(w.syncError))||void 0===n?void 0:n.title)??Y.someRowsFailedToSyncTooltipHeading;return{icon:(0,_.jsx)(g().I,{icon:T().i,size:"sm",style:ie.syncIcon}),content:(0,_.jsx)("span",{style:{...ie.syncDefaultText,...ie.syncFailedText},children:(0,_.jsx)(F().sA,{...Y.syncFailedTitle})}),tooltipContent:{heading:y.formatMessage(e)}}}return{icon:(0,_.jsx)("img",{style:{...ie.integrationIcon,marginInlineEnd:2},src:e,alt:"External integration icon"}),content:!p&&w.collectionSyncedTime&&(0,_.jsx)("span",{style:ie.syncDefaultText,children:(0,_.jsx)(F().sA,{...Y.collectionLastSyncedTimestampAlt})}),tooltipContent:{heading:y.formatMessage(Y.collectionLastSyncedTooltipHeading,{lastEditedTimeNormalized:w.collectionSyncedTimeNormalized})}}}return{icon:(0,_.jsx)("img",{style:{...ie.integrationIcon,marginInlineEnd:2},src:e,alt:"External integration icon"}),content:(0,_.jsxs)(_.Fragment,{children:[(0,_.jsx)("span",{style:{...ie.syncDefaultText,...ie.syncProgress},children:(0,_.jsx)(F().sA,{...Y.pageLastSyncedTitle,values:{integration:w.external_collection_type}})}),w.pageSyncedTime?(0,_.jsx)("span",{style:ie.syncDefaultText,children:(0,_.jsx)(F().sA,{...Y.pageLastSyncedTimestampSubtitle})}):void 0]}),tooltipContent:{heading:y.formatMessage(Y.pageLastSyncedTooltipHeading,{lastEditedTimeNormalized:w.pageSyncedTimeNormalized}),caption:y.formatMessage(Y.pageLastSyncedTooltipCaption)}}}),[$,K,w,ie.syncProgress,ie.syncDefaultText,y,p,ie.syncFailedText,ie.integrationIcon,ie.syncIcon,R,le,ne]),se=w.isSyncFailed||w.isSyncing||w.collectionSyncedTime||!K;return w.external_collection_type&&se?(0,_.jsx)(Z,{onClick:()=>{const e=o.collectionStore(),t=(null==e?void 0:e.canEditCollection())??!1,n=!!e&&(0,L().r)(e);t&&!n&&H().eM({collectionSettingsStore:null==o?void 0:o.settingsStore,source:"external_source",openedFrom:"sync_indicator"})},shouldShowErrorBadgeStyles:Q,tooltipContent:ae.tooltipContent,shouldShowNotificationDot:G,isBackgroundColorsDisabledSource:"Salesforce"===w.external_collection_type,children:(0,_.jsxs)("div",{style:ie.wrapper,children:[ae.icon,ae.content]})}):null}function Z(e){const{tooltipContent:t,children:o,onClick:n,shouldShowNotificationDot:i,shouldShowErrorBadgeStyles:l=!1,isBackgroundColorsDisabledSource:a=!1}=e,s=(0,r().IS)((()=>({container:{display:"flex",alignItems:"center",borderRadius:U().A.borderRadius,position:"relative",backgroundColor:a?void 0:l?"rgba(251, 245, 228, 1)":"rgba(0, 0, 0, 0.05)"},badge:{background:"none",whiteSpace:"nowrap",width:"fit-content",height:28,display:"flex",borderRadius:20,padding:6,marginInlineStart:0},tooltipHeading:{fontSize:B().J.UISmall.desktop,fontWeight:B().Wy.medium},tooltipCaption:{fontSize:B().J.UISmall.desktop,color:v().l8.dark.gray,fontWeight:B().Wy.regular},button:{padding:0,background:"none"},buttonHovered:{background:l&&!a?"rgba(251, 237, 214, 1)":P().Tj.palette.translucentGray[200]},dotIcon:{position:"absolute",insetInlineEnd:-9,top:-9,borderRadius:"50%",overflow:"hidden",pointerEvents:"none",zIndex:1}})),[l,a]);return(0,_.jsx)("div",{style:s.container,children:(0,_.jsx)(S().m,{disableTooltip:!t,renderTooltip:()=>t&&(0,_.jsxs)("div",{children:[(0,_.jsx)("div",{style:s.tooltipHeading,children:t.heading}),t.caption?(0,_.jsx)("div",{style:s.tooltipCaption,children:t.caption}):void 0]}),render:e=>(0,_.jsxs)(_.Fragment,{children:[(0,_.jsx)("div",{...e,style:{alignSelf:"end",display:"inline-block"},children:(0,_.jsx)(y().p,{style:s.button,hoveredStyle:s.buttonHovered,onClick:n,children:(0,_.jsx)(p().E,{style:s.badge,content:o})})}),i?(0,_.jsx)(g().I,{icon:w,colorPalette:"yellow",colorVariant:"secondary",style:s.dotIcon}):null]}),placement:"bottom"})})}},462853:(e,t,o)=>{o.d(t,{l:()=>l});var n=()=>o(617871);const i={[n().e1]:"collection_connected_property_figma",[n().Hd]:"collection_connected_property_google_drive",[n().ob]:"collection_connected_property_github",[n().k0]:"collection_connected_property_zendesk",[n().bh]:"collection_synced_database_github",[n().MN]:"collection_synced_database_asana",[n().Fo]:"collection_synced_database_gitlab",[n().me]:"collection_synced_database_jira",[n().F6]:"collection_synced_database_jira_workspace",[n().Fv]:"collection_synced_database_jira_datacenter",[n().mn]:"collection_synced_database_salesforce_workspace"};function l(e){if(e)return i[e]}},527438:(e,t,o)=>{o.d(t,{Bd:()=>f,DN:()=>h,Fc:()=>F,II:()=>j,Jq:()=>M,R8:()=>k,U9:()=>C,VL:()=>b,ZF:()=>T,ZI:()=>v,jx:()=>x,k7:()=>A,nH:()=>I,u7:()=>P,wW:()=>w,xO:()=>m});o(16280),o(296540);var n=()=>o(732810),i=()=>o(898244),l=()=>o(651124),a=()=>o(69708),s=()=>o(631123),c=()=>o(680288),r=()=>o(167590),d=()=>o(540423),u=()=>o(988291),p=()=>o(712505),g=()=>o(244828),y=()=>o(65402),S=o(474848);let f=function(e){return e[e.ViewSettings=0]="ViewSettings",e[e.FilterBar=1]="FilterBar",e[e.TopbarFilterPopup=2]="TopbarFilterPopup",e[e.TopbarSortPopup=3]="TopbarSortPopup",e[e.TopbarFollowPopup=4]="TopbarFollowPopup",e[e.MobileSheet=5]="MobileSheet",e}({});const m=480,b=320;function v(e){const{timelineViewTab:t,collectionContextStore:o}=e,n=x({collectionContextStore:o}),i=T({collectionContextStore:o});return"timeline"===n?"timeline"===t?"timeline_properties":i?"timeline_table_properties":void 0:(0,l().u9)(x({collectionContextStore:o}))}function x(e){var t;const{collectionContextStore:o}=e,n=null===(t=o.collectionViewStore())||void 0===t?void 0:t.getType();if(!n)throw new Error("View type was not defined.");return n}function T(e){const{collectionContextStore:t}=e,o=t.normalizedFormatStore.state;return Boolean(o.timeline_show_table)}const _=600;function h(e,t,o){const n=o||0,i=e.settingsStore.state;if(i.open&&!0!==i.hideSettingsPopup)return w(e,t,n)}function w(e,t,o){const n=o||0,i=e.settingsStore.state,l=x({collectionContextStore:e});if(i.open&&"form_editor"===l)return"popup";return(0,u().I)(e)||e.isDashboardWidget()||t||p().default.isSidePeekOpen()||e.isInHomeWidgetStore.state||e.isInlineViewStore.state||n<=_?"popup":"sidebar"}function I({collectionViewBlockSourceType:e,isCollectionViewPageWithContent:t,locked:o}){return t?o?{label:(0,S.jsx)(a().sA,{defaultMessage:"Unlock wiki",id:"action.unlockWikiName.name"}),tooltip:void 0}:{label:(0,S.jsx)(a().sA,{defaultMessage:"Lock wiki",id:"action.lockWikiName.name"}),tooltip:void 0}:"linkedOnly"===e?o?{label:(0,S.jsx)(a().sA,{defaultMessage:"Unlock views",id:"database.viewSettings.mainTab.unlockViews.title"}),tooltip:(0,S.jsx)(a().sA,{defaultMessage:"Unlock all views in this database",id:"database.viewSettings.mainTab.unlockViews.tooltip"})}:{label:(0,S.jsx)(a().sA,{defaultMessage:"Lock views",id:"database.viewSettings.mainTab.lockViews.title"}),tooltip:(0,S.jsx)(a().sA,{...y().D.lockDatabaseViewsTooltip})}:o?{label:(0,S.jsx)(a().sA,{defaultMessage:"Unlock database",id:"database.viewSettings.mainTab.unlockDatabase.title"}),tooltip:"multiSourceOrMixedSource"===e?(0,S.jsx)(a().sA,{defaultMessage:"Unlock views and data sources in this database",id:"database.viewSettings.mainTab.unlockDatabase.tooltip"}):void 0}:{label:(0,S.jsx)(a().sA,{defaultMessage:"Lock database",id:"database.viewSettings.mainTab.lockDatabase.title"}),tooltip:"multiSourceOrMixedSource"===e?(0,S.jsx)(a().sA,{...y().D.lockDatabaseMultiSourceTooltip}):void 0}}let C=function(e){return e[e.Source=0]="Source",e[e.Relation=1]="Relation",e}({});const k=6;function j({currentViewType:e,isPlaceholderExternalCollection:t,collectionContextStore:o,allowedActions:n,settingsHeaderSizeObserver:i}){return"page"!==e&&"form_editor"!==e&&(!o.isDashboardWidget()&&(!t&&(!!o.shouldAllowNewItemCreation()&&(!(n&&!n.includes("addItem"))&&!(i&&i.rect.state.width>b)))))}function M({collectionContextStore:e,property:t}){return(0,c().Kc)(e)[t]}function A(e,t){var o;if("relation"!==(null==t?void 0:t.type))return;const l=null===(o=d().A.state.caches[r().oB])||void 0===o?void 0:o.inMemoryRecordCache,a=(0,i().Nv)(t),s=a&&e?n().m.createChildStore(e,a):void 0;return l?null==s?void 0:s.clone(l):s}function F(e){const{name:t,environment:o,property:n,collectionContextStore:i,inputValue:l}=e;if((0,c().fE)({property:n,collectionContextStore:i,newValue:l}))return;const a=i.collectionStore();if(!a)return;const r=a.getSchema()[n];r&&r.name!==t&&g().createAndCommit({userAction:"ButtonBuilderModal.handlePropertyNameSubmit",environment:o,canUndo:!0,perform:e=>{(0,s().Y)({collectionStore:a,property:n,name:t,transaction:e})}})}function P(e){return"addNewDataSource"===e.type||"linkToDatabase"===e.type||"createViewSource"===e.type||"createView"===e.type||"manageDataSources"===e.type?e.analytics:{}}},663640:(e,t,o)=>{o.d(t,{i:()=>i});o(296540);const n={viewBox:"0 0 20 20",fittedViewBox:"0.12 2.37 19.76 15.26",svg:(0,o(474848).jsx)("path",{d:"m4.897 3.085-.122-.142a.625.625 0 1 0-.95.814l.755.88A7.6 7.6 0 0 0 2.375 10v1.151L1.188 9.964a.625.625 0 1 0-.884.884l2.254 2.254c.244.244.64.244.884 0l2.254-2.254a.625.625 0 1 0-.884-.884l-1.187 1.187V10a6.35 6.35 0 0 1 1.772-4.41l8.258 9.634A6.35 6.35 0 0 1 10 16.375a6.35 6.35 0 0 1-4.338-1.703.625.625 0 0 0-.85.915A7.6 7.6 0 0 0 10 17.626a7.6 7.6 0 0 0 4.472-1.448l.754.88a.625.625 0 0 0 1.041-.67L4.989 3.228a.6.6 0 0 1-.093-.144M16.22 14.411A7.6 7.6 0 0 0 17.625 10V8.849l1.187 1.187a.625.625 0 1 0 .884-.884l-2.254-2.254a.625.625 0 0 0-.884 0l-2.254 2.254a.625.625 0 1 0 .884.884l1.187-1.187V10a6.35 6.35 0 0 1-.998 3.427zM7.435 4.162A6.35 6.35 0 0 1 10 3.625c1.676 0 3.2.646 4.338 1.703a.625.625 0 1 0 .85-.916A7.6 7.6 0 0 0 10 2.375a7.6 7.6 0 0 0-3.409.802z"})},i=(0,o(340498).wt)("arrowCircleLoopSlash",n,"default")},866515:(e,t,o)=>{o.d(t,{n:()=>i});var n=o(296540);function i(e,t,o){const i=(0,n.useRef)(e),l=(0,n.useRef)(null);(0,n.useEffect)((()=>{i.current=e}),[e]),(0,n.useEffect)((()=>{const e=async()=>{l.current&&(clearTimeout(l.current),l.current=null),o&&(await i.current(),l.current=setTimeout(e,t))};return o&&e(),()=>{l.current&&(clearTimeout(l.current),l.current=null)}}),[o,t])}},970236:(e,t,o)=>{o.d(t,{E:()=>s});o(296540);var n=()=>o(401497),i=()=>o(100622),l=()=>o(284371),a=o(474848);function s(e){const{color:t="gray",style:o,content:s,...c}=e,r=(0,n().IS)((()=>({badge:{alignSelf:"center",padding:"2px 4px",background:i().Tj[t].background.secondaryTranslucent,color:i().Tj[t].text.accentPrimary,borderRadius:4,fontSize:11,fontWeight:l().Wy.medium,lineHeight:1.3,...o}})),[t,o]);return(0,a.jsx)("div",{style:r.badge,...c,children:s})}},988291:(e,t,o)=>{o.d(t,{I:()=>i,X:()=>l});var n=()=>o(590526);function i(e){const t=e.collectionViewStore();if(!t)return!1;const o=t.getCollectionSource();return"myMeetings"===(null==o?void 0:o.type)}function l(e){return(0,n().K8)((()=>i(e)),[e])}}}]);