"use strict";(globalThis.webpackChunknotion_next=globalThis.webpackChunknotion_next||[]).push([[41882],{21899:(e,t,n)=>{n.d(t,{f:()=>o});n(898992),n(354520);var r=()=>n(272509),i=()=>n(310526);function o(e){const{currentUserRootStore:t,excludeGuestWithPrivatePages:n}=e;return t?t.getSpaceViewStores().filter((e=>e.getAlive()&&(0,r().I)(e.getSpaceStore())&&(!n||!(0,i().U)(e)))):[]}},51194:(e,t,n)=>{n.d(t,{a:()=>o});var r=n(296540),i=()=>n(525128);function o(){const e=(0,r.useRef)(!1);return(0,i().E)((()=>(e.current=!0,()=>{e.current=!1})),[]),e}},84987:(e,t,n)=>{n.r(t),n.d(t,{SidebarInboxButton:()=>B,inboxMessages:()=>C});var r=n(296540),i=()=>n(300474),o=()=>n(907258),a=()=>n(484714),s=()=>n(590526),l=()=>n(401497),c=()=>n(929219),d=()=>n(996332),u=()=>n(807449),p=()=>n(26697),m=()=>n(69708),f=()=>n(100622),g=()=>n(284371),h=()=>n(35392),v=()=>n(807054),b=()=>n(182805),y=()=>n(477293),x=()=>n(770906),S=()=>n(441199),M=()=>n(303742),j=()=>n(804319),I=()=>n(797730),A=()=>n(644914),_=()=>n(749687),k=()=>n(509659),w=()=>n(105127),E=n(474848);function B(e){const t=(0,a().v3)(),n=(0,m().tz)(),B=(0,i().r)(),T=(0,s().K8)((()=>"inbox"===S().default.state.contentType&&S().default.isOpen()),[]),D=(0,s().O$)(_().sidebarExpandedStore),F=(0,s().K8)((()=>S().default.state.mode),[]),z=(0,s().O$)(o().AppStoreSidebarSpaceViewStore),R=T&&"panel"===F,K=(0,r.useCallback)((()=>{x().ZT({environment:t,contentType:"inbox"})}),[t]),U=(0,l().IS)((()=>({sidebarItem:{...R&&{fontWeight:g().Wy.semibold,background:f().Tj.sidebarItemSelectedBackground}},badge:{width:void 0,minWidth:16,paddingInlineStart:3,paddingInlineEnd:3},number:{fontWeight:g().Wy.semibold,letterSpacing:.12,fontSize:10,fontVariantNumeric:"lining-nums tabular-nums",fontFeatureSettings:"lnum",MozFontFeatureSettings:"lnum",WebkitFontFeatureSettings:"lnum"},shortcutLabel:{color:f().Tj.text.inverseSecondary}})),[R]),W=(0,s().K8)((()=>(0,M().o)(z)?"allGuestSpaces":"currentSpace"),[z]),L=(0,A().ab)(),O=(0,s().K8)((()=>(0,v().isPrewarmedTabInitialRender)(t)&&(0,b().isPrewarmedTabLoadSidebarEnabled)()),[t]),P=(0,E.jsx)(w().A,{type:W,style:U.badge,numberStyle:U.number,fadeIn:!O,showExcessUnreadsAsStale:!0,isTranslucent:!0}),H="on"===(0,y().r)("collaboration_reaction_notifications")&&D&&!O,$=!(0,s().O$)(c().e);return(0,E.jsx)(p().m,{renderTooltip:()=>$?(0,E.jsx)("div",{children:n.formatMessage(C.offlineTooltip)}):(0,E.jsxs)("div",{children:[(0,E.jsx)("div",{children:n.formatMessage(C.tooltip)}),(0,E.jsx)(h().A,{style:U.shortcutLabel,name:"toggleAllUpdates"})]}),originGap:6,placement:"right",render:t=>{var r;return(0,E.jsx)(d().Q,{style:{...L.baseSidebarItem,...U.sidebarItem,...R&&L.currentSelectedSidebarItem},onClick:K,hoveredStyle:null===(r=e.styles)||void 0===r?void 0:r.buttonHoveredStyle,...t,disabled:$,disabledFeedback:$,children:(0,E.jsx)(j().A,{left:(0,E.jsx)(u().I,{icon:I().P.inbox,colorVariant:"secondary",size:"lg"}),right:H?(0,E.jsx)(k().f,{children:P},B):P,children:n.formatMessage(I().D.inbox)})})}})}const C=(0,m().YK)({tooltip:{id:"sidebar.inbox.tooltip",defaultMessage:"Review notifications & updates"},offlineTooltip:{id:"sidebar.inbox.offlineTooltip",defaultMessage:"Unavailable while offline"}})},105127:(e,t,n)=>{n.d(t,{A:()=>d});n(581454),n(296540);var r=()=>n(907258),i=()=>n(590526),o=()=>n(534177),a=()=>n(620506),s=()=>n(21899),l=()=>n(179534),c=n(474848);function d(e){const{type:t,...n}=e,d=(0,i().K8)((()=>{switch(t){case"currentSpace":return l().A.getUnreadCountForSidebarSpace().mentions;case"otherSpaces":return l().A.getUnreadMentionsCountForOtherSpaces();case"allSpaces":return l().A.getTotalUnreadMentionsCount();case"allGuestSpaces":const{currentUserRootStore:e}=r().default.state,n=(0,s().f)({currentUserRootStore:e});return l().A.getUnreadMentionsCountForSpaces(n.map((e=>e.getSpaceId())));default:(0,o().HB)(t)}}),[t]);return(0,c.jsx)(a().$,{count:d,...n})}},147294:(e,t,n)=>{n.d(t,{Ee:()=>g,J1:()=>u,oG:()=>p});n(296540);var r=()=>n(907258),i=()=>n(59226),o=()=>n(590526),a=()=>n(401497),s=()=>n(970236),l=()=>n(69708),c=n(474848);const d={define_variables_automation_action:{launchDateMs:17277408e5,expiryDateMs:1738368e6},passkey_setting:{launchDateMs:1729101727e3,expiryDateMs:1738432882e3},publish_site_settings_embed_page:{launchDateMs:1736208e6,expiryDateMs:1743984e6},generalized_recurrence_automations:{launchDateMs:17365536e5,expiryDateMs:17460576e5},ai_page_translation_topbar_more_action:{launchDateMs:1740451280830,expiryDateMs:17434656e5},verification:{launchDateMs:1740096e6,expiryDateMs:174375e7},notion_ai_workspace_settings:{launchDateMs:17424288e5,expiryDateMs:17550432e5},notion_mail_launch_modal:{launchDateMs:17446752e5,expiryDateMs:17525376e5},notion_mail_launch_modal_2:{launchDateMs:17446752e5,expiryDateMs:17578944e5},ui_doc_example:{launchDateMs:19249056e5,expiryDateMs:19249056e5},collection_property_permissions:{launchDateMs:17433792e5,expiryDateMs:17671392e5},salesforce_sync_unfurling_option:{launchDateMs:17443296e5,expiryDateMs:17538336e5},personal_home_sidebar_item:{launchDateMs:17470944e5,expiryDateMs:175392e7},collection_property_reminder:{launchDateMs:1751958e6,expiryDateMs:17552628e5},get_notified_onboarding_tooltip:{launchDateMs:17520228e5,expiryDateMs:17591904e5},conditional_color_feature:{launchDateMs:17537472e5,expiryDateMs:17563392e5},web_clipper_new_tab_settings:{launchDateMs:17471808e5,expiryDateMs:18149184e5},my_meetings:{launchDateMs:17578944e5,expiryDateMs:17657568e5},workspace_connections_tab:{launchDateMs:17578944e5,expiryDateMs:18149184e5},external_agents_tab:{launchDateMs:17578944e5,expiryDateMs:18149184e5},permissions_tab:{launchDateMs:17578944e5,expiryDateMs:18149184e5}};function u({style:e}){const t=(0,a().IS)((()=>({badge:{letterSpacing:0,whiteSpace:"nowrap",width:"fit-content",...e}})),[e]);return(0,c.jsx)(s().E,{color:"blue",style:t.badge,content:(0,c.jsx)(l().sA,{id:"newBadgeComponent.label",defaultMessage:"New"})})}function p(e){return(0,o().K8)((()=>{const{launchDateMs:t,expiryDateMs:n}=d[e],{currentUserSettingsStore:i}=r().default.state;if(i&&i.isReady()){var o;const e=null===(o=i.getSettings())||void 0===o?void 0:o.signup_time;if(e&&e>t)return!1}return Date.now()<=n}),[e])}function m({style:e,newBadgeKey:t}){return p(t)?(0,c.jsx)(u,{style:e}):null}function f({style:e,newBadgeKey:t}){return(0,i().X)(t)?(0,c.jsx)(u,{style:e}):null}function g(e){return e.didUserEngage?null:"feature_gate"===e.keyType?(0,c.jsx)(f,{...e}):(0,c.jsx)(m,{...e})}},173614:(e,t,n)=>{n.d(t,{c:()=>i});n(296540);const r={viewBox:"0 0 20 20",fittedViewBox:"2.12 3.02 15.83 14.41",svg:(0,n(474848).jsx)("path",{d:"M7.663 5.794a2.77 2.77 0 1 1-5.539 0 2.77 2.77 0 0 1 5.539 0m-1.25 0a1.52 1.52 0 1 0-3.039 0 1.52 1.52 0 0 0 3.039 0m2.497-.55a.55.55 0 0 0 0 1.1h.098a.55.55 0 1 0 0-1.1zm2.054 0a.55.55 0 1 0 0 1.1h.098a.55.55 0 0 0 0-1.1zm2.602 4.328a.55.55 0 0 0-.952-.55l-.049.083a.55.55 0 0 0 .952.552zm-6.208-.551a.55.55 0 0 0-.952.551l.049.085a.55.55 0 0 0 .952-.552zm5.182 2.324a.55.55 0 0 0-.952-.552l-.05.085a.55.55 0 1 0 .953.551zm-4.156-.552a.55.55 0 1 0-.951.552l.048.084a.55.55 0 1 0 .952-.551zm6.722-2.23a2.77 2.77 0 1 0 0-5.538 2.77 2.77 0 0 0 0 5.538m0-1.25a1.52 1.52 0 1 1 0-3.038 1.52 1.52 0 0 1 0 3.038m-2.336 7.343a2.77 2.77 0 1 1-5.54 0 2.77 2.77 0 0 1 5.54 0m-1.25 0a1.52 1.52 0 1 0-3.04 0 1.52 1.52 0 0 0 3.04 0"})},i=(0,n(340498).wt)("integration",r,"default")},198048:(e,t,n)=>{n.d(t,{C:()=>a});var r=n(296540),i=()=>n(51194),o=()=>n(610104);function a(){const e=(0,i().a)(),[t,n]=(0,r.useState)(0),a=(0,r.useCallback)((()=>{e.current&&n(t+1)}),[t]);return[(0,r.useCallback)((()=>o().Gt.postRender(a)),[a]),t]}},203066:(e,t,n)=>{n.d(t,{N:()=>c});var r=n(296540);class i extends r.Component{getSnapshotBeforeUpdate(e){const t=this.props.childRef.current;if(t&&e.isPresent&&!this.props.isPresent){const e=this.props.sizeRef.current;e.height=t.offsetHeight||0,e.width=t.offsetWidth||0,e.top=t.offsetTop,e.left=t.offsetLeft}return null}componentDidUpdate(){}render(){return this.props.children}}function o({children:e,isPresent:t}){const n=(0,r.useId)(),o=(0,r.useRef)(null),a=(0,r.useRef)({width:0,height:0,top:0,left:0});return(0,r.useInsertionEffect)((()=>{const{width:e,height:r,top:i,left:s}=a.current;if(t||!o.current||!e||!r)return;o.current.dataset.motionPopId=n;const l=document.createElement("style");return document.head.appendChild(l),l.sheet&&l.sheet.insertRule(`\n          [data-motion-pop-id="${n}"] {\n            position: absolute !important;\n            width: ${e}px !important;\n            height: ${r}px !important;\n            top: ${i}px !important;\n            left: ${s}px !important;\n          }\n        `),()=>{document.head.removeChild(l)}}),[t]),r.createElement(i,{isPresent:t,childRef:o,sizeRef:a},r.cloneElement(e,{ref:o}))}const a=({children:e,initial:t,isPresent:i,onExitComplete:a,custom:l,presenceAffectsLayout:c,mode:d})=>{const u=(0,n(328601).M)(s),p=(0,r.useId)(),m=(0,r.useMemo)((()=>({id:p,initial:t,isPresent:i,custom:l,onExitComplete:e=>{u.set(e,!0);for(const t of u.values())if(!t)return;a&&a()},register:e=>(u.set(e,!1),()=>u.delete(e))})),c?void 0:[i]);return(0,r.useMemo)((()=>{u.forEach(((e,t)=>u.set(t,!1)))}),[i]),r.useEffect((()=>{!i&&!u.size&&a&&a()}),[i]),"popLayout"===d&&(e=r.createElement(o,{isPresent:i},e)),r.createElement(n(786719).t.Provider,{value:m},e)};function s(){return new Map}const l=e=>e.key||"";const c=({children:e,custom:t,initial:i=!0,onExitComplete:o,exitBeforeEnter:s,presenceAffectsLayout:c=!0,mode:d="sync"})=>{(0,n(285238).V)(!s,"Replace exitBeforeEnter with mode='wait'");const u=(0,r.useContext)(n(29473).L).forceRender||(0,n(198048).C)()[0],p=(0,n(51194).a)(),m=function(e){const t=[];return r.Children.forEach(e,(e=>{(0,r.isValidElement)(e)&&t.push(e)})),t}(e);let f=m;const g=(0,r.useRef)(new Map).current,h=(0,r.useRef)(f),v=(0,r.useRef)(new Map).current,b=(0,r.useRef)(!0);if((0,n(525128).E)((()=>{b.current=!1,function(e,t){e.forEach((e=>{const n=l(e);t.set(n,e)}))}(m,v),h.current=f})),(0,n(757491).l)((()=>{b.current=!0,v.clear(),g.clear()})),b.current)return r.createElement(r.Fragment,null,f.map((e=>r.createElement(a,{key:l(e),isPresent:!0,initial:!!i&&void 0,presenceAffectsLayout:c,mode:d},e))));f=[...f];const y=h.current.map(l),x=m.map(l),S=y.length;for(let n=0;n<S;n++){const e=y[n];-1!==x.indexOf(e)||g.has(e)||g.set(e,void 0)}return"wait"===d&&g.size&&(f=[]),g.forEach(((e,n)=>{if(-1!==x.indexOf(n))return;const i=v.get(n);if(!i)return;const s=y.indexOf(n);let b=e;if(!b){const e=()=>{g.delete(n);const e=Array.from(v.keys()).filter((e=>!x.includes(e)));if(e.forEach((e=>v.delete(e))),h.current=m.filter((t=>{const r=l(t);return r===n||e.includes(r)})),!g.size){if(!1===p.current)return;u(),o&&o()}};b=r.createElement(a,{key:l(i),isPresent:!1,onExitComplete:e,custom:t,presenceAffectsLayout:c,mode:d},i),g.set(n,b)}f.splice(s,0,b)})),f=f.map((e=>{const t=e.key;return g.has(t)?e:r.createElement(a,{key:l(e),isPresent:!0,presenceAffectsLayout:c,mode:d},e)})),r.createElement(r.Fragment,null,g.size?f:f.map((e=>(0,r.cloneElement)(e))))}},212473:(e,t,n)=>{n.r(t),n.d(t,{arrowUpRightSquareIcon:()=>o,iconDefinition:()=>i});n(296540);var r=n(474848);const i={viewBox:"0 0 20 20",fittedViewBox:"3.12 3.12 13.75 13.75",svg:(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("path",{d:"M7.875 7c0-.345.28-.625.625-.625H13c.345 0 .625.28.625.625v4.5a.625.625 0 1 1-1.25 0V8.509l-5.12 5.12a.625.625 0 1 1-.884-.883l5.12-5.121H8.5A.625.625 0 0 1 7.875 7"}),(0,r.jsx)("path",{d:"M3.125 5.25c0-1.174.951-2.125 2.125-2.125h9.5c1.174 0 2.125.951 2.125 2.125v9.5a2.125 2.125 0 0 1-2.125 2.125h-9.5a2.125 2.125 0 0 1-2.125-2.125zm2.125-.875a.875.875 0 0 0-.875.875v9.5c0 .483.392.875.875.875h9.5a.875.875 0 0 0 .875-.875v-9.5a.875.875 0 0 0-.875-.875z"})]})},o=(0,n(340498).wt)("arrowUpRightSquare",i,"default")},290488:(e,t,n)=>{n.r(t),n.d(t,{SidebarMeetingsButton:()=>k});var r=n(296540),i=()=>n(564884),o=()=>n(484714),a=()=>n(590526),s=()=>n(401497),l=()=>n(79926),c=()=>n(929219),d=()=>n(718827),u=()=>n(996332),p=()=>n(807449),m=()=>n(26697),f=()=>n(120282),g=()=>n(863330),h=()=>n(69708),v=()=>n(147294),b=()=>n(854513),y=()=>n(554283),x=()=>n(472519),S=()=>n(797730),M=()=>n(644914),j=()=>n(299937),I=()=>n(317705),A=()=>n(804319),_=n(474848);function k(e){const t=(0,h().tz)(),n=(0,o().v3)(),k=(0,j().c)(),E=(0,l().fJ)(b().$),{sidebarTooltipStore:B,sidebarItemHoverStore:C,handleFocus:T,handleBlur:D,handleMouseMove:F,handleMouseLeave:z}=(0,I().W)(),R=(0,a().K8)((()=>{const e=n.RouterStore.state.route;return"meet"===(null==e?void 0:e.name)}),[n]),{isSidebarItemHovered:K,isSidebarItemFocused:U}=(0,a().O$)(C),W=K||U,L=(0,x().r)(),[O,P]=(0,y().B)();(0,r.useEffect)((()=>{C.setState({...C.state,isActionButtonHovered:P})}),[P,C]);const H=(0,r.useCallback)((e=>{if(e.stopPropagation(),e.preventDefault(),"resolved"!==E.status)return;const{createAndNavigateToTranscriptionBlock:t}=E.value;t({environment:n,from:"sidebar_meetings_tab_create_button",title:"none",origin:"sidebar_meetings_plus_button"})}),[n,E]),$=(0,s().IS)((()=>({plusButton:{display:"flex",alignItems:"center",justifyContent:"center",height:20,width:20,borderRadius:4,marginInlineStart:4},badgeWrapper:{marginInlineStart:6}})),[]),V=(0,M().ab)(),{isActionButtonHovered:N,isActionButtonFocused:G}=(0,a().O$)(C),Y=!(0,a().O$)(c().e),Q=(0,r.useCallback)((()=>Y?(0,_.jsx)("div",{children:t.formatMessage(w.offlineTooltip)}):N||G?(0,_.jsx)("div",{children:t.formatMessage(w.createMeetingTooltip)}):(0,_.jsx)("div",{children:t.formatMessage(w.tooltip)})),[t,N,G,Y]),q=(0,r.useCallback)((()=>{(0,i().u)({environment:n,event:{eventName:"ai_meetings_tab_click",eventProperties:{}}})}),[n]);return k?(0,_.jsx)(m().m,{store:B,renderTooltip:Q,originGap:6,placement:"right",render:n=>{var r;return(0,_.jsx)(u().Q,{style:{...V.baseSidebarItem,...R&&V.currentSelectedSidebarItem},href:"/meet",hoveredStyle:null===(r=e.styles)||void 0===r?void 0:r.buttonHoveredStyle,...n,onFocus:e=>{var t;null===(t=n.onFocus)||void 0===t||t.call(n,e),T(e)},onBlur:e=>{var t;null===(t=n.onBlur)||void 0===t||t.call(n,e),D()},onClick:q,disabled:Y,disabledFeedback:Y,children:(0,_.jsx)(A().A,{onMouseMove:F,onMouseLeave:z,left:(0,_.jsx)(p().I,{icon:f().a,colorVariant:"secondary",size:"lg"}),right:W?(0,_.jsx)("div",{ref:O,style:{opacity:W?1:0,transition:"opacity 0.1s ease-in-out"},children:(0,_.jsx)(d().Ay,{ariaLabel:t.formatMessage(w.createMeetingTooltip),style:$.plusButton,onClick:H,children:(0,_.jsx)(p().I,{icon:g().plusSmallIcon,size:"sm",colorPalette:"gray",colorVariant:"secondary"})})}):(0,_.jsx)("div",{style:$.badgeWrapper,children:void 0!==L?(0,_.jsx)(v().Ee,{newBadgeKey:"my_meetings",keyType:"date",didUserEngage:!0===L}):null}),children:(0,_.jsx)("div",{style:{display:"flex",alignItems:"center",gap:8},children:t.formatMessage(S().D.meetings)})})})}}):null}const w=(0,h().YK)({tooltip:{id:"sidebar.meetings.tooltip",defaultMessage:"Create & manage AI Meeting Notes in one place"},createMeetingTooltip:{id:"sidebar.meetings.createMeeting.tooltip",defaultMessage:"Create new AI meeting notes"},offlineTooltip:{id:"sidebar.meetings.offlineTooltip",defaultMessage:"Unavailable while offline"}})},301948:(e,t,n)=>{n.d(t,{A:()=>a});n(296540);var r=()=>n(970236),i=()=>n(69708),o=n(474848);function a(e){return(0,o.jsx)(r().E,{color:"blue",style:e.style,content:(0,o.jsx)(i().sA,{id:"AlphaBadgeComponent.label",defaultMessage:"Alpha"})})}},472519:(e,t,n)=>{n.d(t,{k:()=>c,r:()=>d});var r=n(296540),i=()=>n(907258),o=()=>n(484714),a=()=>n(590526),s=()=>n(680977),l=()=>n(244828);function c(){const e=(0,o().v3)(),t=(0,a().O$)(i().AppStoreCurrentUserSettingsStore),n=d();(0,r.useEffect)((()=>{t&&!1===n&&l().createAndCommit({environment:e,userAction:"useTrackMeetingPageUsage.updateMyMeetingsVisitedAt",perform:e=>{(0,s().m)({userSettingsStore:t,data:{my_meetings_visited_at:Date.now()},transaction:e})},canUndo:!1})}),[e,t,n])}function d(){const e=(0,a().O$)(i().AppStoreCurrentUserSettingsStore);return(0,a().K8)((()=>{const t=null==e?void 0:e.getSettings();if(t)return Boolean((t.my_meetings_visited_at??0)>0)}),[e])}},509659:(e,t,n)=>{n.d(t,{f:()=>B});n(898992),n(354520),n(430670),n(803949),n(581454);var r=()=>n(203066),i=()=>n(153321),o=n(296540),a=()=>n(300474),s=()=>n(907258),l=()=>n(590526),c=()=>n(401497),d=()=>n(755222),u=()=>n(34179),p=()=>n(97879),m=()=>n(302996),f=()=>n(959044),g=()=>n(204384),h=()=>n(96689),v=()=>n(496603),b=()=>n(534177),y=()=>n(56086),x=()=>n(299545),S=()=>n(179534);n(517642),n(658004),n(733853),n(845876),n(432475),n(515024),n(731698);class M extends(()=>n(757695))().Store{getInitialState(){return{emojisBySpace:{}}}addEmojis(e,t){this.update((n=>{const r=n.emojisBySpace[t]||[],i=new Set(r),o=e.filter((e=>!i.has(e)));if(o.length>0){const e=10-r.length,i=o.slice(0,e);if(i.length>0)return{emojisBySpace:{...n.emojisBySpace,[t]:[...r,...i]}}}return n}))}popEmoji(e){const t=this.state.emojisBySpace[e]||[],n=t[t.length-1];return n&&this.update((n=>({emojisBySpace:{...n.emojisBySpace,[e]:t.slice(0,-1)}}))),n}getEmojis(e){return this.state.emojisBySpace[e]||[]}clearEmojis(e){this.update((t=>({emojisBySpace:{...t.emojisBySpace,[e]:[]}})))}}const j=new M;var I=n(474848);const A=.8,_=1,k=24,w=432,E=1;function B(e){const{children:t}=e,[n,M]=(0,o.useState)(!1),[B,C]=(0,o.useState)(void 0),T=(0,l().K8)((()=>d().A.state.isVisible),[]);(0,l().K8)((()=>{const e=S().A.state.results,t=s().default.state.currentUserRootStore,n=d().A.state.isVisible;t&&n&&e.forEach((e=>{var n;const r=(null===(n=e.unreceived)||void 0===n?void 0:n.notificationIds)||[],i=e.spaceId;if(!i||!r.length)return;const o=m().SpaceStore.createChildStore(t,{table:h().NX,id:i});if(!o)return;S().A.markNotificationsAsReceived(i,r);const a=r.map((e=>u().T.createChildStore(o,{table:f()._p,id:e,spaceId:i}))),s=v().oE(a.map((e=>{const t=x().g5(e);if(null!=t&&t.isReady())return t}))).filter((e=>"reacted"===(null==e?void 0:e.getType()))).filter((e=>!(null!=e&&e.getInvalid()))).sort(((e,t)=>{const n=Number(null==e?void 0:e.getEndTime())||0;return(Number(null==t?void 0:t.getEndTime())||0)-n})).flatMap((e=>{const t=((null==e?void 0:e.getEdits())||[]).filter((e=>e&&"reaction_id"in e&&"reaction-created"===e.type)).sort(((e,t)=>{const n=(null==e?void 0:e.timestamp)??0;return((null==t?void 0:t.timestamp)??0)-n}))[0];return(null==t?void 0:t.reaction_id)??[]})).map((e=>p().L.createChildStore(o,{table:g().ez,id:e}))).map((e=>null==e?void 0:e.getIcon())).filter(b().O9);s.length>0&&j.addEmojis(s,i)}))}),[]);const D=(0,a().r)(),F=o.useRef(),z=o.useRef(),R=(0,o.useCallback)((()=>{F.current&&(clearTimeout(F.current),F.current=void 0),z.current&&(clearTimeout(z.current),z.current=void 0),M(!1),C(void 0)}),[]),K=(0,o.useCallback)((()=>{if(!T)return void R();if(!D)return void R();const e=j.popEmoji(D);C(e),e?(M(!0),F.current=setTimeout((()=>{M(!1),z.current=setTimeout((()=>{K()}),1e3*A)}),1e3*_)):R()}),[R,T,D]);(0,l().K8)((()=>{if(!D)return;j.getEmojis(D).length>0&&!n&&!F.current&&K()}),[n,K,D]),(0,o.useEffect)((()=>R),[R]);const U=(0,c().IS)((()=>({container:{display:"flex",alignItems:"center",justifyContent:"center"},badge:{display:"flex",alignItems:"center"}})),[]);return(0,I.jsx)("div",{style:U.container,children:(0,I.jsx)(r().N,{mode:"wait",children:B?(0,I.jsx)(i().P.div,{initial:{opacity:0,scale:.5},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.5},transition:{duration:A,type:"spring",damping:k,stiffness:w,mass:E},children:(0,I.jsx)(y().A,{char:B,size:18})},`emoji-${B}`):(0,I.jsx)(i().P.div,{initial:{opacity:0,scale:.5},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.5},transition:{duration:A,type:"spring",damping:k,stiffness:w,mass:E},style:U.badge,children:t},"number")})})}},529803:(e,t,n)=>{n.d(t,{A:()=>i});class r extends(()=>n(757695))().Store{}const i=new r},539412:(e,t,n)=>{n.d(t,{$y:()=>b,jc:()=>v,x9:()=>h});n(296540);var r=()=>n(564884),i=()=>n(484714),o=()=>n(590526),a=()=>n(212473),s=()=>n(922189),l=()=>n(69708),c=()=>n(209660),d=()=>n(511393),u=()=>n(529803),p=()=>n(780262),m=()=>n(807778),f=()=>n(671812),g=n(474848);function h(){const e=(0,o().K8)((()=>{const{editsBlocked:e}=p().A.state;return e??!1}),[]);return(0,o().K8)((()=>(0,m().Jq)()),[])&&e}function v(){return(0,o().K8)((()=>{var e;const t=u().A.state;return null==t||null===(e=t.data)||void 0===e?void 0:e.invoiceHostedUrl}),[])}function b(){const e=(0,i().v3)(),t=v(),n=(0,o().K8)((()=>{var e;const t=u().A.state;return(null==t||null===(e=t.data)||void 0===e?void 0:e.overdueInvoiceCount)??0}),[]),r=(0,o().K8)((()=>(0,d().h)(e)),[e]),p=function(e,t){if(e)return t>1?(0,g.jsx)(l().sA,{defaultMessage:"Access to Notion is limited because we couldn’t process {overdueInvoiceCount, plural, one {your last payment} other {{overdueInvoiceCount} payments}}.",id:"uncollectibleExperience.uncollectibleExperienceOverlay.multipleInvoicesMessageContent",values:{overdueInvoiceCount:t}}):(0,g.jsx)(l().sA,{defaultMessage:"Access to Notion is limited because we couldn’t process your last payment",id:"uncollectibleExperience.uncollectibleExperienceOverlay.messageContent"});return(0,g.jsx)(l().sA,{id:"uncollectibleExperience.uncollectibleExperienceOverlay.memberMessageContent",defaultMessage:"Access to Notion is limited"})}(r,n),m=function(e){if(e)return;return(0,g.jsx)(l().sA,{id:"uncollectibleExperience.uncollectibleExperienceOverlay.memberSecondaryLabel",defaultMessage:"Contact a workspace owner to update your workspace’s payment method"})}(r),h=function(e,t,n){if(t){const r=(0,f().a)(n);return n=>{r&&(y(t,e),r(n))}}return n=>{y(t,e),c().Ow()}}(e,r,t),b=function(e){if(e)return(0,g.jsx)(l().sA,{defaultMessage:"View unpaid invoice",id:"uncollectibleExperience.uncollectibleExperienceOverlay.buttonLabel"});return(0,g.jsx)(l().sA,{id:"uncollectibleExperience.uncollectibleExperienceOverlay.memberButtonLabel",defaultMessage:"View workspace owner"})}(r);return{clickAction:h,ctaMessage:b,primaryMessage:p,secondaryMessage:m,ctaIcon:r?a().arrowUpRightSquareIcon:s().personCircleFillIcon,tooltipBodyMessage:r?b:m,isWorkspaceOwner:r,overdueInvoiceCount:n}}function y(e,t){(0,r().u)({environment:t,event:{eventName:"subscription_uncollectible_blurred_experience_cta_clicked",eventProperties:{is_workspace_owner:e}}})}},554283:(e,t,n)=>{n.d(t,{B:()=>i});var r=n(296540);function i(){const e=(0,r.useRef)(null),[t,n]=(0,r.useState)(!1),i=(0,r.useCallback)((()=>{const t=e.current;t&&n(t.matches(":hover"))}),[]);return[(0,r.useCallback)((t=>{t?(t.addEventListener("mouseenter",i),t.addEventListener("mouseleave",i),e.current=t,i()):e.current&&(e.current.removeEventListener("mouseenter",i),e.current.removeEventListener("mouseleave",i),e.current=null)}),[i]),t,e]}},583550:(e,t,n)=>{n.r(t),n.d(t,{SidebarAiButton:()=>B,getTooltipDescriptionForAi:()=>C,sidebarAiButtonMessages:()=>T});var r=n(296540),i=()=>n(230711),o=()=>n(484714),a=()=>n(590526),s=()=>n(401497),l=()=>n(929219),c=()=>n(699143),d=()=>n(996332),u=()=>n(807449),p=()=>n(26697),m=()=>n(529099),f=()=>n(848538),g=()=>n(69708),h=()=>n(47373),v=()=>n(797730),b=()=>n(644914),y=()=>n(317705),x=()=>n(118884),S=()=>n(695115),M=()=>n(274570),j=()=>n(554283),I=()=>n(770906),A=()=>n(539412),_=()=>n(907893),k=n(474848);function w(e){const{sidebarItemHoverStore:t,sidebarTooltipStore:n}=e,i=(0,o().v3)(),l=(0,g().tz)(),c=(0,a().O$)(t),d=c.isSidebarItemHovered||c.isSidebarItemFocused,u=(0,_().Kd)(),p=(0,s().IS)((()=>({button:{...u.button,height:24,width:24,margin:0},iconContainer:{opacity:d?1:0,padding:0,margin:0,transition:"opacity 0.1s ease-in-out"}})),[u.button,d]);(0,x().X)((()=>{t.setState({...t.state,isActionButtonHovered:!1,isActionButtonFocused:!1})}));const m=(0,r.useCallback)((()=>{n.reset(),(0,I().ZT)({environment:i,contentType:"assistant"})}),[i,n]),[f,h]=(0,j().B)();(0,r.useEffect)((()=>{t.setState({...t.state,isActionButtonHovered:h})}),[h,t]);const v=(0,r.useCallback)((()=>{t.setState({...t.state,isActionButtonFocused:!0})}),[t]),b=(0,r.useCallback)((()=>{t.setState({...t.state,isActionButtonFocused:!1})}),[t]);if((0,A().x9)())return null;const y=l.formatMessage({id:"aiSidebarItem.askNotionAi.history.tooltip",defaultMessage:"Chat history"});return(0,k.jsx)("div",{ref:f,style:p.iconContainer,children:(0,k.jsx)(S().A,{onFocus:v,onBlur:b,icon:{icon:M().clockIcon,size:"default"},style:p.button,ariaLabel:y,onClick:m})})}var E=()=>n(804319);function B(e){const t=(0,o().v3)(),n=(0,g().tz)(),f=(0,a().K8)((()=>"ai"===t.RouterStore.state.route.name),[t]),h=!(0,a().O$)(l().e),{sidebarTooltipStore:x,sidebarItemHoverStore:S,handleFocus:M,handleBlur:j,handleMouseMove:I,handleMouseLeave:A}=(0,y().W)(),_=(0,b().ab)(),B=(0,s().IS)((()=>({linkBoxStyle:{..._.baseSidebarItem,...f&&_.currentSelectedSidebarItem},iconWrapper:{position:"relative"}})),[f,_.baseSidebarItem,_.currentSelectedSidebarItem]),{isActionButtonFocused:D,isActionButtonHovered:F,isSidebarItemFocused:z,isSidebarItemHovered:R}=(0,a().O$)(S),K=(R||z)&&!h,U=(0,i().U2)(),W=(0,a().K8)((()=>C(U)),[U]),L=(0,r.useCallback)((()=>h?(0,k.jsx)("div",{children:n.formatMessage(T.offlineTooltip)}):F||D?(0,k.jsx)(g().sA,{...T.chatHistoryTooltip}):(0,k.jsx)("div",{children:n.formatMessage(W)})),[n,D,F,W,h]);return(0,k.jsx)(p().m,{store:x,renderTooltip:L,originGap:6,placement:"right",render:t=>{var r;return(0,k.jsx)(d().Q,{style:B.linkBoxStyle,href:"/ai",hoveredStyle:null===(r=e.styles)||void 0===r?void 0:r.buttonHoveredStyle,...t,onFocus:e=>{var n;null===(n=t.onFocus)||void 0===n||n.call(t,e),M(e)},onBlur:e=>{var n;null===(n=t.onBlur)||void 0===n||n.call(t,e),j()},testId:"sidebar-ai-button",disabled:h,disabledFeedback:h,children:(0,k.jsx)(E().A,{left:(0,k.jsx)("div",{style:B.iconWrapper,children:(0,k.jsx)(u().I,{icon:m().aiFaceIcon,colorVariant:"secondary",size:"lg"})}),right:K&&(0,k.jsx)("div",{style:{display:"flex",flexDirection:"row",marginInlineEnd:-4,justifyContent:"center",gap:3},children:(0,k.jsx)(w,{sidebarItemHoverStore:S,sidebarTooltipStore:x})}),onMouseMove:I,onMouseLeave:A,children:(0,k.jsx)(c().Y1,{direction:"horizontal",gap:4,align:"center-left",children:n.formatMessage(v().D.notionAi)})})})}})}function C(e){const t=(0,h().$6)(),n=(0,f().Wf)(null==e?void 0:e.getMembershipType());return t&&n?T.tooltipAiAndAgents:T.tooltipAiOnly}const T=(0,g().YK)({tooltipAiAndAgents:{id:"sidebar.agents.tooltipAiAndAgents",defaultMessage:"Work with AI and manage your agents"},tooltipAiOnly:{id:"sidebar.agents.tooltipAiOnly",defaultMessage:"Ask, search & create with AI"},offlineTooltip:{id:"sidebar.ai.offlineTooltip",defaultMessage:"Unavailable while offline"},chatHistoryTooltip:{id:"aiSidebarItem.askNotionAi.history.tooltip",defaultMessage:"Chat history"}})},610832:(e,t,n)=>{n.r(t),n.d(t,{SidebarLibraryButton:()=>x});var r=n(296540),i=()=>n(907258),o=()=>n(484714),a=()=>n(590526),s=()=>n(401497),l=()=>n(996332),c=()=>n(807449),d=()=>n(26697),u=()=>n(605777),p=()=>n(69708),m=()=>n(301948),f=()=>n(763884);const g="library-alpha-badge-dismissed";var h=()=>n(644914),v=()=>n(362749),b=()=>n(804319),y=n(474848);function x(e){const t=(0,o().v3)(),n=(0,p().tz)(),{shouldShowBadge:x,dismissBadge:M}=function(){const e=(0,o().v3)().currentUser.id,[t,n]=(0,r.useState)(!1);return(0,r.useEffect)((()=>{const t=f().K.get({userId:e,key:g});n(!t)}),[e]),{shouldShowBadge:t,dismissBadge:(0,r.useCallback)((()=>{f().K.set({userId:e,key:g,value:!0}),n(!1)}),[e])}}(),j=(0,a().K8)((()=>{var e;return Boolean(null===(e=i().default.state.mainEditorCurrentBlockStore)||void 0===e?void 0:e.isLibraryBlock())}),[]),I=(0,r.useCallback)((async e=>{x&&M();(await(0,v().p)())({event:e,analyticsFrom:"sidebar_library_button",environment:t})}),[t,x,M]),A=(0,s().IS)((()=>({iconWrapper:{position:"relative"},badgeWrapper:{marginInlineStart:h().sI}})),[]),_=(0,h().ab)();return(0,y.jsx)(d().m,{renderTooltip:()=>(0,y.jsx)("div",{children:n.formatMessage(S.tooltip)}),originGap:6,placement:"right",render:t=>{var r;return(0,y.jsx)(l().Q,{style:{..._.baseSidebarItem,...j&&_.currentSelectedSidebarItem},onClick:I,hoveredStyle:null===(r=e.styles)||void 0===r?void 0:r.buttonHoveredStyle,...t,children:(0,y.jsx)(b().A,{left:(0,y.jsx)("div",{style:A.iconWrapper,children:(0,y.jsx)(c().I,{icon:u().bookIcon,colorVariant:"secondary",size:"lg"})}),right:x?(0,y.jsx)("div",{style:A.badgeWrapper,children:(0,y.jsx)(m().A,{})}):void 0,children:n.formatMessage(S.title)})})}})}const S=(0,p().YK)({tooltip:{id:"sidebar.library.tooltip",defaultMessage:"View all the pages related to you"},title:{id:"sidebar.library.button",defaultMessage:"Library"}})},620506:(e,t,n)=>{n.d(t,{$:()=>l});n(296540);var r=()=>n(401497),i=()=>n(100622),o=n(474848);const a={display:"inline-flex",alignItems:"center",justifyContent:"center",flexShrink:0,width:16,height:16,fontSize:10,textAlign:"center",fontWeight:n(284371).Wy.semibold,borderRadius:4,position:"static",marginInlineStart:6,WebkitFontSmoothing:"auto"},s=99;function l({count:e,style:t,numberStyle:n,fadeIn:l,showExcessUnreadsAsStale:u,isTranslucent:p}){const m=(0,r().IS)((()=>{const n=(e??0)>s;return{badge:{...a,...t,...n&&{width:void 0,padding:2},background:u&&n?i().Tj.gray.background[p?"secondaryTranslucent":"tertiary"]:i().Tj.red.background.accentPrimary,color:u&&n?i().Tj.gray.text.accentPrimary:i().Tj.red.text.inversePrimary,...l&&{transition:"opacity 0.1s",opacity:c(e)?1:0}}}}),[e,l,p,u,t]);return l||c(e)?(0,o.jsx)("div",{style:m.badge,children:(0,o.jsx)(d,{count:e,numberStyle:n})}):null}function c(e){return!!e&&e>0}function d({count:e,numberStyle:t}){return e?1===e?(0,o.jsx)("span",{style:{marginInlineStart:-.5,...t},children:"1"}):e>s?(0,o.jsx)("span",{style:{letterSpacing:-.5,...t},children:"99+"}):e>9?(0,o.jsx)("span",{style:{letterSpacing:-.5,marginInlineStart:-.5,...t},children:e}):(0,o.jsx)("span",{style:{...t},children:e}):null}},697781:(e,t,n)=>{n.r(t),n.d(t,{SidebarWorkersButton:()=>b});var r=n(296540),i=()=>n(484714),o=()=>n(590526),a=()=>n(401497),s=()=>n(699143),l=()=>n(996332),c=()=>n(807449),d=()=>n(26697),u=()=>n(173614),p=()=>n(69708),m=()=>n(644914),f=()=>n(317705),g=()=>n(804319),h=n(474848);const v=(0,p().YK)({tooltip:{id:"sidebar.workers.tooltip",defaultMessage:"View and manage installed workers"},title:{id:"sidebar.workers.button",defaultMessage:"Workers"}});function b(e){const t=(0,i().v3)(),n=(0,p().tz)(),b=(0,m().ab)(),{sidebarTooltipStore:y,handleFocus:x,handleBlur:S}=(0,f().W)(),M=(0,r.useCallback)((()=>(0,h.jsx)("div",{children:n.formatMessage(v.tooltip)})),[n]),j=(0,o().K8)((()=>{const e=t.RouterStore.state;return"workers"===e.route.name||"worker"===e.route.name}),[t]),I=(0,a().IS)((()=>({linkBoxStyle:{...b.baseSidebarItem,...j&&b.currentSelectedSidebarItem},iconWrapper:{position:"relative"}})),[j,b.baseSidebarItem,b.currentSelectedSidebarItem]);return(0,h.jsx)(d().m,{store:y,renderTooltip:M,originGap:6,placement:"right",render:t=>{var r;return(0,h.jsx)(l().Q,{style:I.linkBoxStyle,href:"/__workers__",hoveredStyle:null===(r=e.styles)||void 0===r?void 0:r.buttonHoveredStyle,...t,onFocus:e=>{var n;null===(n=t.onFocus)||void 0===n||n.call(t,e),x(e)},onBlur:e=>{var n;null===(n=t.onBlur)||void 0===n||n.call(t,e),S()},children:(0,h.jsx)(g().A,{left:(0,h.jsx)("div",{style:I.iconWrapper,children:(0,h.jsx)(c().I,{icon:u().c,colorVariant:"secondary",size:"lg"})}),children:(0,h.jsx)(s().Y1,{direction:"horizontal",gap:4,align:"center-left",children:n.formatMessage(v.title)})})})}})}},757491:(e,t,n)=>{n.d(t,{l:()=>i});var r=n(296540);function i(e){return(0,r.useEffect)((()=>()=>e()),[])}}}]);