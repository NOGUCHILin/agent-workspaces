"use strict";(globalThis.webpackChunknotion_next=globalThis.webpackChunknotion_next||[]).push([[22542,44158,97101],{79118:(e,t,o)=>{o.d(t,{Eo:()=>T,Fz:()=>m,KI:()=>u,M4:()=>l,YW:()=>x,iY:()=>k,mO:()=>y,qE:()=>c,vm:()=>v});var n=()=>o(604995),r=()=>o(247331),a=()=>o(239381);const i=(0,o(69708).YK)({buttonAutomationCurrentUserDescription:{defaultMessage:"The user who clicked this button",id:"automations.contextValue.buttonAutomationCurrentUserDescription"},buttonAutomationCurrentUserName:{defaultMessage:"Whoever clicked",id:"automations.contextValue.buttonAutomationCurrentUserName"},buttonAutomationCurrentUserTooltip:{defaultMessage:"The person who clicked the button",id:"automations.contextValue.buttonAutomationCurrentUserTooltip"},buttonAutomationThisPageDescription:{defaultMessage:"The page containing this button",id:"automations.contextValue.buttonAutomationThisPageDescription"},buttonAutomationThisPageName:{defaultMessage:"This page",id:"automations.contextValue.buttonAutomationThisPageName"},buttonAutomationThisPageTooltip:{defaultMessage:"The page containing this button",id:"automations.contextValue.buttonAutomationThisPageTooltip"},eventAutomationCurrentUserDescription:{defaultMessage:"The user who made the edit that triggered this automation to run.",id:"automations.contextValue.eventAutomationCurrentUserDescription"},eventAutomationCurrentUserName:{defaultMessage:"Whoever triggered",id:"automations.contextValue.eventAutomationCurrentUserName"},eventAutomationCurrentUserTooltip:{defaultMessage:"The person whose action triggered this automation",id:"automations.contextValue.eventAutomationCurrentUserTooltip"},eventAutomationThisPageDescription:{defaultMessage:"The page that was edited to trigger this automation to run.",id:"automations.contextValue.eventAutomationThisPageDescription"},eventAutomationThisPageName:{defaultMessage:"Trigger page",id:"automations.contextValue.eventAutomationThisPageName"},eventAutomationThisPageTooltip:{defaultMessage:"The page that triggered this automation",id:"automations.contextValue.eventAutomationThisPageTooltip"},now:{id:"automations.triggers.now.label",defaultMessage:"Time triggered"},nowDescription:{id:"automations.triggers.now.description",defaultMessage:"The time when this automation begins to run."},nowTooltip:{id:"automations.triggers.now.tooltip",defaultMessage:"The time this automation was triggered"},pageCreator:{id:"automations.triggers.pageCreator.label",defaultMessage:"Page creator"},pageCreatorDescription:{id:"automations.triggers.pageCreator.description",defaultMessage:"The user who created the page that was edited to trigger this automation to run."},pageCreatorTooltip:{id:"automations.triggers.pageCreator.tooltip",defaultMessage:"Person who created page"},today:{id:"automations.triggers.today.label",defaultMessage:"Date triggered"},todayDescription:{id:"automations.triggers.today.description",defaultMessage:"The date when this automation begins to run."},todayTooltip:{id:"automations.triggers.today.tooltip",defaultMessage:"The date this automation was triggered"}});function u(){return(0,a().$y)({source:"global",global:"button_page"})}function s(e,t,o){return{description:o,name:e,tooltip:t,compile:(n,a)=>({description:o?n.formatMessage(o):void 0,id:u(),kind:r().FormulaContextValueKind.ContextValue,name:n.formatMessage(e),tooltipName:n.formatMessage(t),type:{collection:a,type:"block"}}),evaluate:e=>({kind:r().FormulaContextValueKind.ContextValue,id:u(),value:{type:"block",value:e}})}}const l=s(i.buttonAutomationThisPageName,i.buttonAutomationThisPageTooltip,i.buttonAutomationThisPageDescription),c=s(i.eventAutomationThisPageName,i.eventAutomationThisPageTooltip,i.eventAutomationThisPageDescription);function p(){return(0,a().$y)({source:"global",global:"current_user"})}function d(e,t,o){return{description:o,name:e,tooltip:t,compile:n=>({description:o?n.formatMessage(o):void 0,id:p(),kind:r().FormulaContextValueKind.ContextValue,name:n.formatMessage(e),tooltipName:n.formatMessage(t),type:{type:"person"}}),evaluate:e=>({id:p(),kind:r().FormulaContextValueKind.ContextValue,value:{type:"person",value:e}})}}const m=d(i.buttonAutomationCurrentUserName,i.buttonAutomationCurrentUserTooltip,i.buttonAutomationCurrentUserDescription),y=d(i.eventAutomationCurrentUserName,i.eventAutomationCurrentUserTooltip,i.eventAutomationCurrentUserDescription);function g(){return(0,a().$y)({source:"global",global:"now"})}const v={description:i.nowDescription,name:i.now,tooltip:i.nowTooltip,compile(e){return{description:this.description?e.formatMessage(this.description):void 0,id:g(),kind:r().FormulaContextValueKind.ContextValue,name:e.formatMessage(this.name),tooltipName:this.tooltip?e.formatMessage(this.tooltip):void 0,type:{type:"date"}}},evaluate:e=>({id:g(),kind:r().FormulaContextValueKind.ContextValue,value:{type:"date",value:(0,n().KQ)(Date.now(),e)}})};function f(){return(0,a().$y)({source:"global",global:"today"})}const T={description:i.todayDescription,name:i.today,tooltip:i.todayTooltip,compile(e){return{description:this.description?e.formatMessage(this.description):void 0,id:f(),kind:r().FormulaContextValueKind.ContextValue,name:e.formatMessage(this.name),tooltipName:this.tooltip?e.formatMessage(this.tooltip):void 0,type:{type:"date"}}},evaluate:e=>({id:f(),kind:r().FormulaContextValueKind.ContextValue,value:{type:"date",value:(0,n().p6)(Date.now(),e)}})};function b(){return(0,a().$y)({source:"global",global:"page_creator"})}function h(e,t){return{description:i.pageCreatorDescription,name:e,tooltip:t,compile(o){return{description:this.description?o.formatMessage(this.description):void 0,id:b(),kind:r().FormulaContextValueKind.ContextValue,name:o.formatMessage(e),tooltipName:o.formatMessage(t),type:{type:"person"}}},evaluate:e=>({id:b(),kind:r().FormulaContextValueKind.ContextValue,value:{type:"person",value:e}})}}const x=h(i.pageCreator,i.pageCreatorTooltip),k=h(i.pageCreator,i.pageCreatorTooltip)},103966:(e,t,o)=>{o.d(t,{Z:()=>c});var n=()=>o(496603),r=()=>o(534177),a=()=>o(416504),i=()=>o(519831),u=()=>o(79118);const s={type:"button",getCreatePermissions(e){const{parentPointer:t}=e;return[{minimumRole:"read_and_write",pointer:t,type:"record_permission"}]},getEditPermissions(e){const{automationModel:t}=e;return[{minimumRole:"read_and_write",pointer:t.getParentPointer(),type:"record_permission"}]},getManagePermissions(e){const{automationModel:t}=e;return[{minimumRole:"read_and_write",pointer:t.getParentPointer(),type:"record_permission"}]},getExecutePermissions(e){const{automationModel:t}=e;return[{minimumRole:"reader",pointer:t.getParentPointer(),type:"record_permission"}]},typecheck(e){const{automationModel:t,contextType:a,getRecordModel:s,intl:l}=e,c=u().Fz.compile(l),p=u().vm.compile(l),d=u().Eo.compile(l),m=t.getParentPointer();let y,g;if("button_block"===a){if(e.pageBlockModel){const t=(0,o(236162).SH)({block:e.pageBlockModel,getRecordModel:s});y=u().M4.compile(l,null==t?void 0:t.pointer),g=u().YW.compile(l)}}else if("button_property"===a){const e=s(m);if((null==e?void 0:e.table)!==i().Vl)return{error:new(o(322867).N9)(`Unable to load automation parent: ${o(277153).L3.toKey(m)}`)};y=u().M4.compile(l,e.pointer),g=u().YW.compile(l)}else(0,r().HB)(a);return{value:{valueTypes:(0,n().oE)([c,p,d,y,g])}}},execute(e){const{formulaVariableResolution:t}=e,{executingUserPointer:o,executingUserTimeZone:r,thisPageBlockModel:i}=t??{},s=i?u().M4.evaluate(i.pointer):void 0,l=null==i?void 0:i.getCreatedByPointer(),c=l?u().YW.evaluate(l):void 0,p=o?u().Fz.evaluate(o):void 0,d=(0,a().P)(),m=u().vm.evaluate(r??d),y=u().Eo.evaluate(r??d);return{value:{values:(0,n().oE)([s,c,p,m,y])}}},isAvailableForContext:e=>!0};o(944114);const l={button:s,event:{type:"event",getCreatePermissions(e){const{parentPointer:t,spacePointer:o}=e;return[{minimumRole:"editor",pointer:t,type:"record_permission"},{minimumRole:"read_and_write",pointer:o,type:"record_permission"}]},getEditPermissions(e){const{automationModel:t}=e,n=[{minimumRole:"editor",pointer:t.getParentPointer(),type:"record_permission"},{minimumRole:"read_and_write",pointer:t.getSpacePointer(),type:"record_permission"}],a=t.getTrigger();if("event"===a.type){const e=a.event;(0,r().O9)(e.source)&&"filter"!==e.source.type&&(e.source.type===i().Vl||e.source.type===o(869558).Gy?n.push({minimumRole:"reader",pointer:e.source.pointer,type:"record_permission"}):(0,r().HB)(e.source))}return n},getManagePermissions(e){const{automationModel:t}=e;return[{minimumRole:"editor",pointer:t.getParentPointer(),type:"record_permission"},{minimumRole:"read_and_write",pointer:t.getSpacePointer(),type:"record_permission"}]},getExecutePermissions(e){const{automationModel:t}=e;return[{minimumRole:"reader",pointer:t.getParentPointer(),type:"record_permission"}]},typecheck(e){const{automationModel:t,intl:o}=e,r=u().mO.compile(o),a=u().iY.compile(o),s=u().vm.compile(o),l=u().Eo.compile(o),c=t.getParentPointer();let p;return c.table===i().Vl&&(p=u().qE.compile(o,c)),{value:{valueTypes:(0,n().oE)([r,a,s,l,p])}}},execute(e){const{formulaVariableResolution:t}=e,{executingUserPointer:o,executingUserTimeZone:i,thisPageBlockModel:s}=t??{},l=s?u().qE.evaluate(s.pointer):void 0,c=o?u().mO.evaluate(o):void 0,p=(0,a().P)(),d=u().vm.evaluate(i??p),m=null==s?void 0:s.getCreatedByPointer(),y=(0,r().O9)(m)?u().iY.evaluate(m):void 0,g=u().Eo.evaluate(i??p);return{value:{values:(0,n().oE)([l,c,d,g,y])}}},isAvailableForContext:e=>!!e.actorOnlyEditedUnaliveColumns||e.hasPremiumAutomations},recurrence:{type:"recurrence",getCreatePermissions(e){const{parentPointer:t}=e;return[{minimumRole:"read_and_write",pointer:t,type:"record_permission"}]},getEditPermissions(e){const{automationModel:t}=e;return[{minimumRole:"read_and_write",pointer:t.getParentPointer(),type:"record_permission"}]},getManagePermissions(e){const{automationModel:t}=e;return[{minimumRole:"read_and_write",pointer:t.getParentPointer(),type:"record_permission"}]},getExecutePermissions(e){const{automationModel:t}=e;return[{minimumRole:"reader",pointer:t.getParentPointer(),type:"record_permission"}]},typecheck(e){const{intl:t}=e;return{value:{valueTypes:[u().vm.compile(t),u().Eo.compile(t)]}}},execute(e){const{formulaVariableResolution:t}=e,{executingUserTimeZone:o}=t??{},n=(0,a().P)();return{value:{values:[u().vm.evaluate(o??n),u().Eo.evaluate(o??n)]}}},isAvailableForContext(e){const{automation:t,automationActions:n,hasPremiumAutomations:a}=e;if(t.parent_table===o(179034).ev)return!0;if(t.parent_table===i().Vl){const e=o(388821).RecordMap.create();for(const t of n)e.addModel(t);return!!t.isCompleteSprintAutomation({getRecordModel:o(792071).b4_.fromRecordMap(e)})||a}(0,r().HB)(t.parent_table)}}};function c(e){return l[e]}},104077:(e,t,o)=>{o.d(t,{r:()=>r});o(296540);const n={viewBox:"0 0 20 20",fittedViewBox:"2.79 2.35 14.41 15.68",svg:(0,o(474848).jsx)("path",{d:"M10 2.355a2.35 2.35 0 0 0-2.253 1.686 5.06 5.06 0 0 0-2.803 4.527v1.189c0 .919-.334 1.806-.939 2.498l-.818.935c-.881 1.007-.166 2.583 1.173 2.583h3.02a2.65 2.65 0 0 0 5.24 0h3.02c1.339 0 2.054-1.576 1.173-2.583l-.818-.935a3.8 3.8 0 0 1-.939-2.498v-1.19a5.06 5.06 0 0 0-2.803-4.526A2.35 2.35 0 0 0 10 2.355m1.5 13.418a1.55 1.55 0 0 1-2.998 0zM8.909 4.564A1.104 1.104 0 0 1 10 3.605c.556 0 1.017.415 1.091.96l.049.353.329.138a3.81 3.81 0 0 1 2.337 3.512v1.189c0 1.221.444 2.401 1.248 3.32l.818.936a.307.307 0 0 1-.232.51H4.36a.308.308 0 0 1-.232-.51l.818-.935a5.04 5.04 0 0 0 1.248-3.321v-1.19c0-1.58.963-2.936 2.337-3.511l.33-.138z"})},r=(0,o(340498).wt)("bell",n,"default")},241319:(e,t,o)=>{o.d(t,{y:()=>a});o(898992),o(672577);var n=()=>o(534177),r=()=>o(239381);function a(e){var t;const{actionModels:o,id:a}=e,i=(0,r().y5)(a),u="action"===i.source?o.find((e=>e.id===i.action_id)):void 0,s=(0,n().O9)(u)&&u.isType("create_page")?null===(t=u.getConfig())||void 0===t?void 0:t.collection:void 0;return{automationValueInfo:i,collectionPointer:s,actionModel:u}}},310109:(e,t,o)=>{o.r(t),o.d(t,{getAllContextValues:()=>f,getAllGuaranteedPropertyIds:()=>h,getContextValueForActionById:()=>b,getContextValuesForAction:()=>T,typecheckAutomation:()=>g,typecheckAutomationAsync:()=>v});o(944114),o(517642),o(658004),o(733853),o(845876),o(432475),o(515024),o(731698),o(898992),o(803949),o(581454),o(737550);var n=()=>o(496603),r=()=>o(973647),a=()=>o(534177),i=()=>o(999515),u=()=>o(239381),s=()=>o(368609),l=()=>o(638458),c=()=>o(322867),p=()=>o(281994),d=()=>o(648651),m=()=>o(103966);function*y(e){const{actionModels:t,automationModel:o,contextType:y,formulasModule:g,runtimeStats:v}=e,f={valueTypes:e.valueTypes,actionInputValueTypes:{},guaranteedPropertyIds:new Set,actionValidationFailures:{},actionValidationWarnings:{}},T=performance.now();let b,h,x;if("button_block"===y||"button_property"===y){if(!o.isButtonType())return{error:new(c().N9)(`Automation trigger (${o.getTriggerType()}) does not match context type (${y}).`)};const t=o.getTrigger();x=(0,m().Z)(o.getTriggerType()).typecheck(e,t)}else if("event"===y){if(!o.isEventType())return{error:new(c().N9)(`Automation trigger (${o.getTriggerType()}) does not match context type (${y}).`)};const t=o.getTrigger();x=(0,m().Z)(o.getTriggerType()).typecheck(e,t)}else if("recurrence"===y){if(!o.isRecurrenceType())return{error:new(c().N9)(`Automation trigger (${o.getTriggerType()}) does not match context type (${y}).`)};const t=o.getTrigger();x=(0,m().Z)(o.getTriggerType()).typecheck(e,t)}else(0,a().HB)(e);if(r().Q.isFail(x))return x;f.valueTypes.push(...n().o8(x.value.valueTypes));for(const a of t){b=void 0,v&&(b=d().hs.getOrCreateAction(v,a.pointer,a.getType()));const t=(0,s().getActionRegistryItem)(a.getType());if(!t){h={error:new(c().oM)({actionId:a.id,message:`Unsupported action type: ${a.getType()}`})};break}const m=performance.now(),y=(0,l().Q)({automationModel:o,formulasModule:g,formulaValueTypes:f.valueTypes,checkExperimentGate:e.checkExperimentGate}),T=(0,p().HI)(yield*t.resolveExecutionDependencies(y,a));yield*i().q.fetchRecords(T.map((e=>e.pointer))),b&&(b.totalDependencies=T.length,b.getDependenciesDurationMs=Math.trunc(performance.now()-m));const x=t.typecheck(e,a),C=n().o8(f.valueTypes);if(f.actionInputValueTypes[a.id]=C,r().Q.isFail(x)){h=x;break}var k;for(const e of x.value.valueTypes??[]){f.valueTypes.some((t=>(0,u().oH)(e,t)))||f.valueTypes.push(e)}null===(k=x.value.guaranteedPropertyIds)||void 0===k||k.forEach((e=>{f.guaranteedPropertyIds.add(e)})),x.value.validationFailures&&x.value.validationFailures.length>0&&(f.actionValidationFailures[a.id]=x.value.validationFailures),x.value.validationWarnings&&x.value.validationWarnings.length>0&&(f.actionValidationWarnings[a.id]=x.value.validationWarnings)}const C=Math.trunc(performance.now()-T);return v&&(v.typecheckStartTime=T,v.typecheckDurationMs=C,v.typecheckSuccess=!(0,a().O9)(h)),h??{value:f}}function g(e){return i().q.runSync(e.getRecordModel,y(e))}async function v(e){return await i().q.runAsync(e.loadRecordModel,y(e))}function f(e){return r().Q.isFail(e)?[]:e.value.valueTypes.slice(0)}function T(e,t){return r().Q.isFail(e)?[]:e.value.actionInputValueTypes[t]??[]}function b(e,t,o){const n=T(e,t);return(0,u().IV)(n,o)}function h(e){return r().Q.isFail(e)?new Set:e.value.guaranteedPropertyIds}},422540:(e,t,o)=>{o.d(t,{$0:()=>f,Fx:()=>M,Ge:()=>y,I3:()=>d,Kj:()=>k,PP:()=>P,TK:()=>A,Yy:()=>p,aE:()=>w,cQ:()=>C,kH:()=>g,m7:()=>m,nq:()=>h,nv:()=>T,tj:()=>v});o(898992),o(354520),o(737550);var n=()=>o(496603),r=()=>o(534177),a=()=>o(381283),i=()=>o(898244),u=()=>o(651124),s=()=>o(349835),l=()=>o(390066);const c={checkbox:!0,date:!0,email:!0,multi_select:!0,number:!0,person:!0,phone_number:!0,relation:!0,select:!0,status:!0,text:!0,title:!0,url:!0,auto_increment_id:!1,button:!1,created_by:!1,created_time:!1,file:!1,formula:!1,last_edited_by:!1,last_edited_time:!1,last_visited_time:!1,location:!1,rollup:!1,verification:!1,place:!1},p={checkbox:[{type:"checkbox"}],date:[{type:"date"}],email:[{type:"text"}],multi_select:[{type:"text"},{of:{type:"text"},type:"array"}],number:[{type:"number"}],person:[{type:"person"},{of:{type:"person"},type:"array"}],phone_number:[{type:"text"}],relation:[{type:"block"},{of:{type:"block"},type:"array"}],select:[{type:"text"},{of:{type:"text"},type:"array"}],status:[{type:"text"},{of:{type:"text"},type:"array"}],text:void 0,title:void 0,url:[{type:"text"}]};function d(e){return Boolean(c[e.type]&&!(0,i().UU)(e)&&(!(0,i().$M)(e)||void 0===(0,i().om)(e)))}function m(e){const{collectionFormat:t,collectionSchema:o,filter:a,sort:s,sourcePropertyIds:c}=e,p=(c??(0,r().uv)(o)).filter(((t,n,r)=>{const u=o[t];return!(!u||!d(u))&&(("relation"!==u.type||!e.restrictCrossSpace||!(0,i().o2)(e.spaceId,u))&&(!a||a([t,u],n,o)))}));if(0===p.length)return[];if(!t||!1===s)return p;const m=(0,l().L)(t,o,void 0,u().jf.Page).collection_page_properties||[];return n().Ul(p,(e=>m.findIndex((t=>t.property===e))))}function y(e){const{collectionFormat:t,collectionSchema:o,sort:i}=e,s=(0,r().uv)(o).filter(((e,t,n)=>{const r=o[e];return!(!r||!(0,a().J)(r))}));if(0===s.length)return[];if(!t||!1===i)return s;const c=(0,l().L)(t,o,void 0,u().jf.Page).collection_page_properties||[];return n().Ul(s,(e=>c.findIndex((t=>t.property===e))))}function g(e){return e.type===s().M9.InvalidCharacter?{type:e.type,character:e.character}:e.type===s().M9.TokenExpected?{type:e.type,token:e.token}:e.type===s().uW.MissingSchemaPropertyOnThisRow||e.type===s().uW.MissingSchemaPropertyOnCollection?{type:e.type,collectionId:e.collectionId,property:e.property,errorSource:e.errorSource}:e.type===s().uW.ThisRowBlockPropertyMismatchCollection?{type:e.type,thisRowCollection:e.thisRowCollection,errorSource:e.errorSource}:e.type===s().uW.MissingContextVariable?{type:e.type,valueId:e.valueId,errorSource:e.errorSource}:e.type===s().uW.FunctionCallTooFewArguments?{type:e.type,numArguments:e.numArguments,errorSource:e.errorSource}:e.type===s().uW.FunctionCallUnexpectedArgument?{type:e.type,parameterIndex:e.parameterIndex,errorSource:e.errorSource}:e.type===s().uW.FunctionCallArgumentWrongType?{type:e.type,argumentType:e.argumentType,libraryFunctionName:e.libraryFunction.name,parameterIndex:e.parameterIndex,errorSource:e.errorSource}:e.type===s().uW.MissingDataDependencyBlock?{type:e.type,blockPointer:e.blockPointer,node:e.node,errorSource:e.errorSource}:e.type===s().uW.MissingDataDependencyPerson?{type:e.type,personPointer:e.personPointer,errorSource:e.errorSource}:e.type===s().uW.MemberPropertyMismatchCollection?{type:e.type,blockCollection:e.blockCollection,errorSource:e.errorSource}:e.type===s().uW.DownstreamParseFailure?{type:e.type,collectionId:e.collectionId,property:e.property,errorSource:e.errorSource}:e.type===s().uW.ContextVariableWrongType?{type:e.type,valueId:e.valueId,expectedType:e.expectedType,resultType:e.resultType,errorSource:e.errorSource}:e.type===s().uW.DisallowedValueType?{type:e.type,expressionValue:e.expressionValue,allowedValueTypes:e.allowedValueTypes,errorSource:e.errorSource}:e.type===s().uW.LibraryFunctionExecutionError?{type:e.type,error:e.error,libraryFunctionName:e.libraryFunction.name,errorSource:e.errorSource}:"errorSource"in e?{type:e.type,errorSource:e.errorSource}:{type:e.type}}const v={checkbox:!0,date:!0,email:!0,multi_select:!0,number:!0,person:!0,phone_number:!0,relation:!0,select:!0,status:!0,text:!0,title:!0,url:!0,button:!1,file:!1,verification:!1,auto_increment_id:!1,created_by:!1,created_time:!1,formula:!1,last_edited_by:!1,last_edited_time:!1,last_visited_time:!1,location:!1,rollup:!1,place:!1};function f(e){return Boolean(v[e.type])}function T(e){const{collectionFormat:t,collectionSchema:o,filter:a,sort:s}=e,c=(0,r().uv)(o).filter(((e,t,n)=>{var r;const u=o[e];return!(!u||!v[u.type])&&((!(0,i().$M)(u)||null===(r=(0,i().om)(u))||void 0===r||!r.auto_update_on_edit)&&(!a||a([e,u],t,o)))}));if(0===c.length)return[];if(!t||!1===s)return c;const p=(0,l().L)(t,o,void 0,u().jf.Page).collection_page_properties||[];return n().Ul(c,(e=>p.findIndex((t=>t.property===e))))}const b={checkbox:!0,email:!0,multi_select:!0,number:!0,person:!0,phone_number:!0,relation:!0,select:!0,status:!0,text:!0,title:!0,url:!0,auto_increment_id:!1,button:!1,created_by:!1,created_time:!1,date:!1,file:!1,formula:!1,last_edited_by:!1,last_edited_time:!1,last_visited_time:!1,location:!1,rollup:!1,verification:!1,place:!1};function h(e){return b[e.type]}const x={checkbox:!0,created_by:!0,created_time:!0,date:!0,email:!0,multi_select:!0,number:!0,person:!0,phone_number:!0,relation:!0,select:!0,status:!0,text:!0,title:!0,url:!0,last_edited_by:!0,last_edited_time:!0,auto_increment_id:!1,button:!1,file:!1,formula:!1,last_visited_time:!1,location:!1,rollup:!1,verification:!1,place:!1};function k(e){return x[e.type]}function C(e){return 0===e}function M(e){return function(e){return"button_block"===e||"button_property"===e}(e)}function P(e){const{property:t,collectionSchema:o}=e;return!!o&&!o[t]}function A(e){const{collectionSchema:t,property:o,type:n}=e,r=null==t?void 0:t[o];return!r||("action"===n?!d(r):!v[r.type])}function w({automationTrigger:e,collectionSchema:t}){if("event"===(null==e?void 0:e.type)){const{pagesAdded:o,pagePropertiesEdited:n,source:a}=e.event;if(void 0===a)return!1;const i="some"===n.type&&n.some,u="all"===n.type&&n.all;if((i||u||[]).some((e=>P({collectionSchema:t,property:e.property})||A({collectionSchema:t,property:e.property,type:"trigger"}))))return!1;const s="some"===n.type&&(!(0,r().O9)(n.some)||0===n.some.length),l="all"===n.type&&(!(0,r().O9)(n.all)||0===n.all.length);if(!o&&("none"===n.type||s||l))return!1}else{if("recurrence"!==(null==e?void 0:e.type))return!1;if(!e.recurrence)return!1}return!0}},563015:(e,t,o)=>{o.d(t,{SA:()=>l,eJ:()=>v,ew:()=>g,ml:()=>p,rA:()=>m,yI:()=>y,zf:()=>d});o(581454);var n=()=>o(496603),r=()=>o(534177),a=()=>o(708685),i=()=>o(145076),u=()=>o(349835),s=()=>o(239381);function l(e){if("type"in e){if(e.type===u().IA.CalledFunctionOnEmptyValue)return"warning";if(e.type===u().IA.CallingFunctionWithUnknownTarget)return"warning";if(e.type===u().IA.CallingFunctionWithUnknownArgument)return"warning"}return"error"}function c(e){switch(e){case"checkbox":return"boolean";case"number":return"number";case"text":return"text";case"date":return"date";case"array":return"array";case"block":return"block";case"person":return"person";case"select":return"select";case"function":return"function";case"unknown":return"unknown";case"undefined":return"undefined";default:(0,r().HB)(e)}}function p(e){switch(e.type){case u().M9.InvalidCharacter:return{...i().x0.InvalidCharacter,values:{errorCharacter:e.character}};case u().M9.UnclosedStringLiteral:return i().x0.UnclosedStringLiteral;case u().M9.UnclosedComment:return i().x0.UnclosedComment;case u().M9.TokenExpected:return{...i().x0.TokenExpected,values:{expectedToken:e.token}};case u().M9.StringLiteralContainsToken:return i().x0.StringLiteralContainsToken;case u().M9.ExpressionExpected:return i().x0.ExpressionExpected;case u().M9.PropertyTokenOrFunctionExpected:return i().x0.PropertyTokenOrFunctionExpected;case u().M9.EndOfInputExpected:return i().x0.EndOfInputExpected;case u().M9.UnexpectedError:return i().x0.UnexpectedError;case u().M9.TooDeeplyNested:return i().x0.TooDeeplyNested;default:(0,r().HB)(e)}}function d(e){switch(e.type){case u().IA.FunctionCallArgumentWrongType:case u().IA.FunctionCallUnexpectedArgument:return e.argument;default:return e.node}}function m(e,t){let o;switch(t.type){case u().IA.ThisRowTypeNotFound:o=i().Xz.ThisRowTypeNotFound;break;case u().IA.ThisRowNotBlockWithCollection:o=i().Xz.ThisRowNotBlockWithCollection;break;case u().IA.MissingPropertyOnThisRow:o={...i().Xz.MissingPropertyOnThisRow,values:{propertyName:t.property}};break;case u().IA.MissingContextVariable:{const e=(0,s().ix)(t.token)?t.token.contextValueId:t.token.valueId;o={...i().Xz.MissingContextVariable,values:{valueId:e}}}break;case u().IA.MissingBlock:o={...i().Xz.MissingBlock,values:{blockId:t.token.blockId}};break;case u().IA.CallingNotFunction:o={...i().Xz.CallingNotFunction,values:{expressionType:c(t.callee.type.type)}};break;case u().IA.FunctionCallTooFewArguments:o={...i().Xz.FunctionCallTooFewArguments,values:{minNumParameters:t.minNumParameters,functionName:t.libraryFunction.name,numArguments:t.numArguments}};break;case u().IA.FunctionCallUnexpectedArgument:o={...i().Xz.FunctionCallUnexpectedArgument,values:{functionName:t.libraryFunction.name}};break;case u().IA.FunctionCallArgumentWrongType:o={...i().Xz.FunctionCallArgumentWrongType,values:{argumentType:c(t.argument.type.type),functionName:t.libraryFunction.name}};break;case u().IA.CallingFunctionWithUnknownArgument:{const e=Array.isArray(t.expectedParameter.type)?t.expectedParameter.type[0]:t.expectedParameter.type,n="expression"===e.type?"expression":c(e.type);o={...i().Xz.CallingFunctionWithUnknownArgument,values:{functionName:t.libraryFunction.name,expectedType:n}};break}case u().IA.MemberPropertyMismatchCollection:o={...i().Xz.MemberPropertyMismatchCollection,values:{propertyName:t.token.property}};break;case u().IA.MemberPropertyMissing:o={...i().Xz.MemberPropertyMissing,values:{propertyName:t.property}};break;case u().IA.MemberPropertyTargetNotBlock:o=i().Xz.MemberPropertyTargetNotBlock;break;case u().IA.MemberPropertyTypeInvalid:o={...i().Xz.MemberPropertyTypeInvalid,values:{propertyName:t.propertyName,propertyType:t.propertyType}};break;case u().IA.UndefinedIdentifier:o={...i().Xz.UndefinedIdentifier,values:{identifier:t.node.text}};break;case u().IA.InvalidPropCall:o={...i().Xz.InvalidPropCall,values:{propertyName:t.name}};break;case u().IA.InvalidContextCall:o={...i().Xz.InvalidContextCall,values:{variableName:t.name}};break;case u().IA.InvalidVariableCall:o={...i().Xz.InvalidVariableCall,values:{variableName:t.name}};break;case u().IA.UnifiedFunctionCannotFindFunction:o={...i().Xz.UnifiedFunctionCannotFindFunction,values:{functionName:t.name}};break;case u().IA.UnifiedFunctionNoArguments:o={...i().Xz.UnifiedFunctionNoArguments,values:{functionName:t.libraryFunction.name}};break;case u().IA.UnifiedFunctionTargetWrongType:o={...i().Xz.UnifiedFunctionTargetWrongType,values:{functionName:t.libraryFunction.name,targetType:c(t.expression.type.type)}};break;case u().IA.CallingFunctionWithUnknownTarget:{const e=Array.isArray(t.expectedParameter.type)?t.expectedParameter.type[0]:t.expectedParameter.type,n="expression"===e.type?"expression":c(e.type);o={...i().Xz.CallingFunctionWithUnknownTarget,values:{functionName:t.libraryFunction.name,expectedType:n}};break}case u().IA.CannotRelativelyCompareTypes:o={...i().Xz.CannotRelativelyCompareTypes,values:{lhsType:c(t.lhsType.type),rhsType:c(t.rhsType.type)}};break;case u().IA.CannotDoMathOnType:o={...i().Xz.CannotDoMathOnType,values:{lhsType:c(t.lhsType.type),rhsType:c(t.rhsType.type)}};break;case u().IA.UnaryMinusOnNonNumber:o={...i().Xz.UnaryMinusOnNonNumber,values:{type:c(t.expression.type.type)}};break;case u().IA.IdentifierExpected:o=i().Xz.IdentifierExpected;break;case u().IA.FunctionCallExpected:o={...i().Xz.FunctionCallExpected,values:{functionName:t.functionName}};break;case u().IA.RenamedIdentifier:o={...i().Xz.RenamedIdentifier,values:{identifier:t.identifier,renamedTo:t.renamedTo}};break;case u().IA.RemovedFunction:o={...i().Xz.RemovedFunction,values:{functionName:t.functionName,alternative:t.alternative}};break;case u().IA.ContextVariableNotBlockWithCollection:o={...i().Xz.ContextVariableNotBlockWithCollection,values:{valueId:t.token.contextValueId}};break;case u().IA.MissingPropertyOnContextVariable:o={...i().Xz.MissingPropertyOnContextVariable,values:{propertyName:t.property,valueId:t.token.contextValueId}};break;case u().IA.BlockPropertyTypeInvalid:o={...i().Xz.BlockPropertyTypeInvalid,values:{propertyName:t.propertyName}};break;case u().IA.DisallowedReturnType:{const n=t.allowedReturnTypes.map((t=>e.formatMessage((0,a().getHumanReadableType)(t)).toLocaleLowerCase()));o={...i().Xz.DisallowedReturnType,values:{allowedReturnType:e.formatList(n,{style:"long",type:"conjunction"}),allowedReturnTypeCount:t.allowedReturnTypes.length,returnType:e.formatMessage((0,a().getHumanReadableType)(t.returnType)).toLocaleLowerCase()}};break}case u().IA.CrossSpacePropertyNotSupported:o={...i().Xz.CrossSpacePropertyNotSupported};break;case u().IA.CalledFunctionOnEmptyValue:o={...i().Xz.CalledFunctionOnEmptyValue};break;default:(0,r().HB)(t)}return{...o,values:{...o.values,startOffset:t.node.startOffset,endOffset:t.node.endOffset+1}}}function y(e,t){let o;switch(t.type){case u().uW.MissingThisRow:o=i().X8.MissingThisRow;break;case u().uW.MissingSchemaPropertyOnThisRow:o={...i().X8.MissingSchemaPropertyOnThisRow,values:{propertyName:t.property}};break;case u().uW.ThisRowBlockPropertyMismatchCollection:o=i().X8.ThisRowBlockPropertyMismatchCollection;break;case u().uW.MissingContextVariable:o={...i().X8.MissingContextVariable,values:{valueId:t.valueId}};break;case u().uW.IdentifierNotFound:o={...i().X8.IdentifierNotFound,values:{identifier:t.node.text}};break;case u().uW.CannotRelativelyCompareTypes:o={...i().X8.CannotRelativelyCompareTypes,values:{lhsType:c(t.lhsType),rhsType:c(t.rhsType)}};break;case u().uW.CannotDoMathOnType:o={...i().X8.CannotDoMathOnType,values:{valueType:c(t.valueType)}};break;case u().uW.CannotCallNonFunction:o={...i().X8.CannotCallNonFunction,values:{calleeType:c(t.calleeType)}};break;case u().uW.UnifiedFunctionPropertyNotFound:o={...i().X8.UnifiedFunctionPropertyNotFound,values:{functionName:t.node.name}};break;case u().uW.LibraryFunctionExecutionError:const n=t.error instanceof u().x4?t.error:void 0;o=(null==n?void 0:n.info.type)===u().v3.DateInvalidDurationUnit?{...i().gW.DateInvalidDurationUnit,values:{functionName:t.libraryFunction.name,invalidUnit:n.info.invalidUnit}}:(null==n?void 0:n.info.type)===u().v3.CannotUseToNumberOnList?{...i().gW.CannotUseToNumberOnList}:(null==n?void 0:n.info.type)===u().v3.CannotRoundToNonInteger?{...i().gW.CannotRoundToNonInteger,values:{precision:n.info.precision}}:(null==n?void 0:n.info.type)===u().v3.CannotRoundToTooManyDecimalPlaces?{...i().gW.CannotRoundToTooManyDecimalPlaces,values:{precision:n.info.precision}}:(null==n?void 0:n.info.type)===u().v3.NumberFormatInvalid?{...i().gW.NumberFormatInvalid,values:{invalidFormat:n.info.invalidFormat}}:{...i().X8.LibraryFunctionExecutionError,values:{functionName:t.libraryFunction.name}};break;case u().uW.FunctionCallTooFewArguments:o={...i().X8.FunctionCallTooFewArguments,values:{functionName:t.libraryFunction.name}};break;case u().uW.FunctionCallUnexpectedArgument:o={...i().X8.FunctionCallUnexpectedArgument,values:{functionName:t.libraryFunction.name}};break;case u().uW.FunctionCallArgumentWrongType:o={...i().X8.FunctionCallArgumentWrongType,values:{functionName:t.libraryFunction.name,argumentType:c(t.argumentType)}};break;case u().uW.AccessingPropertyOnNonBlock:o=i().X8.AccessingPropertyOnNonBlock;break;case u().uW.MissingDataDependencyBlock:o={...i().X8.MissingDataDependencyBlock,values:{blockId:t.blockPointer.id}};break;case u().uW.MissingDataDependencyPerson:o={...i().X8.MissingDataDependencyPerson,values:{personId:t.personPointer.id}};break;case u().uW.MemberPropertyMismatchCollection:o=i().X8.MemberPropertyMismatchCollection;break;case u().uW.MissingPropertyOnSchemaForMemberProperty:o=i().X8.MissingPropertyOnSchemaForMemberProperty;break;case u().uW.UnaryMinusOnNonNumber:o={...i().X8.UnaryMinusOnNonNumber,values:{expressionType:c(t.expressionType)}};break;case u().uW.UnexpectedRecoveryNode:o=i().X8.UnexpectedRecoveryNode;break;case u().uW.UnexpectedError:o=i().X8.UnexpectedError;break;case u().uW.DepthExceeded:o=i().X8.DepthExceeded;break;case u().uW.CycleDetected:o=i().X8.CycleDetected;break;case u().uW.DownstreamParseFailure:o=i().X8.DownstreamParseFailure;break;case u().uW.MaxEvaluationTimeExceeded:o=i().X8.MaxEvaluationTimeExceeded;break;case u().uW.MissingSchemaPropertyOnCollection:o={...i().X8.MissingSchemaPropertyOnCollection,values:{collectionId:t.collectionId,propertyName:t.property}};break;case u().uW.ContextVariableWrongType:o={...i().X8.ContextVariableWrongType,values:{expectedType:t.expectedType,propertyType:t.resultType,valueId:t.valueId}};break;case u().uW.DisallowedValueType:{const n=t.allowedValueTypes.map((t=>e.formatMessage((0,a().getHumanReadableType)(t)).toLocaleLowerCase()));o={...i().Xz.DisallowedReturnType,values:{allowedValueType:e.formatList(n,{style:"long",type:"conjunction"}),allowedValueTypeCount:t.allowedValueTypes.length,valueType:e.formatMessage((0,a().getHumanReadableValueType)(t.expressionValue)).toLocaleLowerCase()}};break}case u().uW.TotalDependencyLimitExceeded:o={...i().X8.TotalDependencyLimitExceeded,values:{totalLoaded:t.totalLoaded,limit:t.limit}};break;case u().uW.PerFormulaDependencyLimitExceeded:o={...i().X8.PerFormulaDependencyLimitExceeded,values:{perFormulaLoaded:t.perFormulaLoaded,limit:t.limit}};break;default:(0,r().HB)(t)}return(0,s().li)(t)?{...o,values:{...o.values,startOffset:t.node.startOffset,endOffset:t.node.endOffset+1}}:o}function g(e){const t=null==e?void 0:e.values;return[n().cJ(e,"values"),t]}function v(e){return e.type===u().uW.DepthExceeded||e.type===u().uW.CycleDetected||e.type===u().uW.MaxEvaluationTimeExceeded||e.type===u().uW.LibraryFunctionExecutionError}},864779:(e,t,o)=>{o.d(t,{Me:()=>u,Vv:()=>r,Z3:()=>a,wI:()=>i});var n=()=>o(906745);function r(e){if("week"===e.frequency&&e.weekdays&&1===e.weekdays.length)return{weekday:e.weekdays[0],duration:e.interval}}function a(e){const{currentSprintEndDate:t,sprintSchedule:o}=e;return s({startDate:c({dateToAdjust:n().DateTime.fromISO(t),weekday:o.weekday,wrapForEqualDays:!0}),duration:o.duration})}function i(e){const{userTimeZone:t,sprintSchedule:o}=e;return s({startDate:n().DateTime.local({zone:t}),duration:o.duration})}function u(e){const{currentSprintStartDate:t,sprintSchedule:o}=e,r=c({dateToAdjust:n().DateTime.fromISO(t),weekday:o.weekday,wrapForEqualDays:!1}),{end_date:a}=s({startDate:r,duration:o.duration});let i=n().DateTime.fromISO(a);const u=n().DateTime.now().startOf("day");for(;i.diff(u,"days").days<0;)i=i.plus({weeks:1});return{type:"daterange",start_date:i.plus({days:1}).minus({weeks:o.duration}).toISODate(),end_date:i.toISODate()}}function s(e){const{startDate:t,duration:o}=e,n=t.plus({weeks:o}).minus({days:1});return{type:"daterange",start_date:t.toISODate(),end_date:n.toISODate()}}const l={SU:0,MO:1,TU:2,WE:3,TH:4,FR:5,SA:6};function c(e){const{dateToAdjust:t,weekday:o,wrapForEqualDays:n}=e,r=function(e){const{currentWeekday:t,nextWeekday:o,wrapForEqualDays:n}=e,r="number"==typeof t?t:l[t],a="number"==typeof o?o:l[o];if(r===a)return n?7:0;let i=r,u=0;for(;i!==a;)i===l.SA?i=0:i+=1,u+=1;return u}({currentWeekday:t.weekday%7,nextWeekday:l[o],wrapForEqualDays:n});return t.plus({days:r})}},950914:(e,t,o)=>{o.d(t,{AL:()=>a,Q6:()=>u,vt:()=>i});o(898992),o(672577);var n=()=>o(433337),r=()=>o(254947);const a={autoCompleteSprints:!1,actionConfig:{complete_sprint_action:"complete_sprint_and_move_incomplete_tasks_to_next_sprint"},recurrenceConfig:{interval:2,weekdays:["MO"]}};function i(e){const{eventTracker:t,properties:o}=e;t.DO_NOT_USE_commonTrackEvent({eventName:"complete_sprint_action",properties:o})}function u(e,t){var o;return null===(o=t.groups)||void 0===o||null===(o=o.find((t=>t.id===n().nl||(null==t?void 0:t.name)===r().P0||(null==t?void 0:t.name)===e.formatMessage(r().oz.statusGroupNameComplete))))||void 0===o?void 0:o.name}}}]);