"use strict";(globalThis.webpackChunknotion_next=globalThis.webpackChunknotion_next||[]).push([[2411,17680,22197,32626,48486,53697,76983,90871,92754,99171],{346:(e,t,o)=>{o.d(t,{MG:()=>f,T1:()=>m,a1:()=>S,dt:()=>v,kg:()=>h,lC:()=>g,n_:()=>y});var n=o(296540),r=()=>o(484714),i=()=>o(590526),a=()=>o(79926),s=()=>o(187174),l=()=>o(941463),c=()=>o(441199),d=()=>o(749687),u=()=>o(737230),p=()=>o(756114);const m=new(a().O2)("PerformanceToolbar",(()=>Promise.all([o.e(23640),o.e(45624)]).then(o.bind(o,688201)))),f=(0,a()._h)(m,(e=>e.PerformanceToolbar)),v=(0,a()._h)(m,(e=>e.PerformanceToolbarSettings));function h(){const e=(0,r().v3)();return(0,i().K8)((()=>(0,p().D)(e,e.RouterStore.state)),[e])}function y(){const e=(0,r().v3)(),t=b("performanceToolbarStore"),o=b("isPerformanceToolbarVisible");return(0,i().K8)((()=>!(!t||!o)&&o(e,e.RouterStore.state,t.state)),[o,e,t])}function g(){const e=b("performanceToolbarStore");return(0,i().K8)((()=>!!e&&e.state.isPerformanceToolbarMounted),[e])}function S(){const e=(0,r().v3)(),t=b("createPerformanceToolbarMouseListeners"),o=b("performanceToolbarStore"),{sidebarExpanded:a,sidebarWidth:s,secondarySidebarExpanded:p,secondarySidebarWidth:m,updateSidebarExpanded:f,updateSidebarWidth:v}=(0,i().K8)((()=>({sidebarExpanded:d().sidebarExpandedStore.state,sidebarWidth:d().sidebarWidthStore.state,secondarySidebarExpanded:c().default.isOpen(),secondarySidebarWidth:l().Ay.getWidth(),updateSidebarExpanded:u().Ay.state.expanded,updateSidebarWidth:u().Ay.state.width})),[]);return(0,n.useEffect)((()=>{if(o&&t)return t(e,(e=>o.update((t=>({...t,isMouseNearPerformanceToolbar:e})))),a,s,p,m,f,v)}),[t,e,o,a,s,p,m,f,v])}function b(e){const t=h(),[{value:o}]=(0,s().Yb)((()=>t?m.load().then((t=>t[e])):Promise.resolve(void 0)),[e,t]);return o}},6697:(e,t,o)=>{o.d(t,{h:()=>i});var n=()=>o(79926);const r=new(n().O2)("DictationAvatar",(async()=>await Promise.all([o.e(75134),o.e(35530),o.e(9773),o.e(36556),o.e(55373),o.e(36192),o.e(40537),o.e(27992),o.e(63452),o.e(66249),o.e(92845),o.e(87249),o.e(79022),o.e(14578),o.e(87017),o.e(34877),o.e(46414),o.e(11676),o.e(61165),o.e(94522),o.e(44584),o.e(38293),o.e(40992),o.e(88455),o.e(52871),o.e(47160),o.e(49021),o.e(53697),o.e(17680),o.e(6039),o.e(71136),o.e(86341),o.e(29316),o.e(3101)]).then(o.bind(o,310947)))),i=(0,n()._h)(r,(e=>e.DictationAvatar))},17680:(e,t,o)=>{o.d(t,{eQ:()=>G,hJ:()=>le,Ay:()=>$,Uo:()=>X,XE:()=>ae});o(944114),o(898992),o(823215),o(354520),o(672577),o(581454);var n=o(296540),r=()=>o(59226),i=()=>o(484714),a=()=>o(590526),s=()=>o(401497),l=()=>o(929219),c=()=>o(75435),d=()=>o(609679),u=()=>o(849255),p=()=>o(56268),m=()=>o(718827),f=()=>o(631524),v=()=>o(26697),h=()=>o(302501),y=()=>o(869190),g=()=>o(641007),S=()=>o(187174),b=()=>o(798880),x=()=>o(695608),_=()=>o(69708),w=()=>o(100622),M=()=>o(496603),T=()=>o(23420),C=()=>o(488923),k=()=>o(102172),I=()=>o(130119),A=()=>o(6697),j=()=>o(673657),R=()=>o(64790),E=()=>o(852273);const B=function(e){const t=(0,i().v3)(),r=(0,n.useRef)(),a=(0,o(336811).T)(),s=(0,n.useCallback)((async()=>{if(await o(129286).transactionQueue.awaitRecordTransaction(e.blockStore.pointer),!a.current)return;const n=(0,o(921997).Ws)(e.blockStore.id);r.current=E().Ay.addListener(n,void 0,M().nF((()=>o(466721).updatePageVisits(t,{blockStore:e.blockStore,pageVisitStore:e.pageVisitStore,incremental:!0,limit:e.limit})),1e3),void 0,t)}),[t,a,e.blockStore,e.limit,e.pageVisitStore]),l=(0,n.useCallback)((()=>{r.current&&(E().Ay.removeListener(r.current,t),r.current=void 0)}),[t]);return(0,n.useEffect)((()=>(s(),l)),[s,l]),null};var O=()=>o(869562),V=()=>o(737230),P=()=>o(994006),D=()=>o(453697),U=()=>o(79926);const N=new(U().O2)("AvatarHoverCard",(async()=>await Promise.all([o.e(86036),o.e(6608)]).then(o.bind(o,356221)))),F=(0,U()._h)(N,(e=>e.AvatarHoverCard)),L=new(U().O2)("LastViewedByHoverCard",(async()=>await o.e(1930).then(o.bind(o,652429)))),z=(0,U()._h)(L,(e=>e.LastViewedByHoverCard));var W=o(474848);const H=5,q=25,K=6,G=22;const $=function({pageVisitStore:e,presenceStore:t,rootStore:n,maxUsers:r}){return(0,W.jsxs)(W.Fragment,{children:[(0,W.jsx)(o(912474).a,{rootStore:n}),(0,W.jsx)(le,{rootStore:n,pageVisitStore:e,presenceStore:t,maxUsers:r,isShowingInFeed:!1}),(0,W.jsx)(B,{blockStore:n,pageVisitStore:e,limit:1+Q(r)+q})]})};function Y(e){return M().Ul(e,(e=>e.activityTimestampNearestMinuteMs))}function Q(e){return e??H}function Z(e,t){return u().L.createChildStore(t,{table:b().oo,id:e})}function X(e){const{environment:t,isShowingTabBar:o,isShowingInFeed:n}=e;return{...(0,I().g)({noDrag:t.device.isElectron&&!o}),display:"flex",alignItems:"center",position:"relative",flexDirection:"row-reverse",marginInlineStart:8,paddingInlineEnd:K,transform:"translateZ(0)",...n&&{maxHeight:54,paddingBottom:12}}}function J(){return{color:w().Tj.text.inverseSecondary,fontSize:10,textTransform:"uppercase",letterSpacing:"0.015em"}}function ee({userData:e,isPresent:t,rootStore:o,isShowingInFeed:n}){const r=(0,i().v3)(),s=(0,_().tz)(),l=r.currentUser.id,c=(0,a().K8)((()=>Z(e.userId,o)),[e,o]),u=(0,a().K8)((()=>c.isDefined()),[c]),p=(0,a().K8)((()=>(0,x().c6)(s,c.getModel())),[s,c]),m=(0,a().K8)((()=>c.getEmail()),[c]);if(!u)return null;let f;return t?l!==c.id&&(f=e.blockId&&!n?(0,W.jsx)(_().sA,{defaultMessage:"Viewing now. Click to see where they are.",id:"topbar.presenceIndicator.viewingNowWithLocation.tooltip"}):(0,W.jsx)(_().sA,{defaultMessage:"Viewing now",id:"topbar.presenceIndicator.viewingNow.tooltip"})):l!==c.id&&e.activityTimestampNearestMinuteMs&&(f=(0,W.jsx)(_().sA,{defaultMessage:"Last viewed {timeFromNow}",id:"topbar.presenceIndicator.lastViewedTime.tooltip",values:{timeFromNow:(0,y().v9)(Math.min(e.activityTimestampNearestMinuteMs,Date.now()),d().locale)}})),(0,W.jsxs)("div",{children:[(0,W.jsx)("div",{className:"notranslate",children:p}),(0,W.jsx)("div",{style:{fontWeight:400},children:m}),f?(0,W.jsx)("div",{style:{color:w().Tj.text.inverseSecondary,minWidth:150,paddingTop:2,paddingBottom:2,lineHeight:1.3},children:f}):void 0]})}function te({userData:e,index:t,rootStore:o}){const n=(0,i().v3)(),r=(0,R().dp)(n,e),s=(0,a().K8)((()=>Z(e.userId,o)),[e,o]);if(!(0,a().K8)((()=>s.isDefined()),[s]))return null;let l;!r&&e.activityTimestampNearestMinuteMs&&(l=(0,y().v9)(e.activityTimestampNearestMinuteMs,d().locale));const c=(0,W.jsxs)("div",{style:{display:"flex",alignContent:"flex-end",minWidth:140,width:"100%",marginTop:4},children:[(0,W.jsx)(P().A,{userStore:s,avatarSize:18,style:{flexGrow:1},hasPersonHoverCard:!1}),(0,W.jsx)("div",{style:{marginInlineStart:"auto",paddingInlineStart:12,textAlign:"end",flexShrink:1,color:w().Tj.text.inverseSecondary},children:l})]});if(r&&e.blockId){const t=e.blockId;return(0,W.jsx)(m().Ay,{onClick:()=>(0,T().B)([t],!0,n),style:{display:"flex",alignItems:"center"},children:c})}return(0,W.jsx)("div",{style:{display:"flex",alignItems:"center"},children:c})}function oe({hiddenUsers:e,hiddenUsersCount:t,hasMore:o,rootStore:n,environment:i}){if(!(0,r().X)("use_topbar_person_hovercards"))return(0,W.jsx)(v().m,{allowHover:!0,originGap:7,renderTooltip:r=>(0,W.jsx)(ne,{hiddenUsers:e,hiddenUsersCount:t,hasMore:o,rootStore:n,events:r}),render:e=>(0,W.jsx)(re,{hiddenUsersCount:t,events:e,environment:i,rootStore:n})});const a=e.filter((e=>!(0,R().dp)(i,e))),s=e.filter((e=>(0,R().dp)(i,e))).length,l=t-s;return(0,W.jsx)(z,{trigger:(0,W.jsx)(re,{hiddenUsersCount:t,environment:i,rootStore:n}),viewers:a,totalCount:l,rootStore:n})}function ne({hiddenUsers:e,hiddenUsersCount:t,hasMore:o,rootStore:n,events:r}){const a=(0,i().v3)(),s=[],l=[];for(const i of e)(0,R().dp)(a,i)?s.push(i):l.push(i);const c=l.slice(0,q-s.length),d=t-(s.length+c.length);return(0,W.jsxs)("div",{...r,children:[s.length>0?(0,W.jsxs)("div",{style:{marginBottom:4},children:[(0,W.jsx)(h().A,{style:J(),children:(0,W.jsx)(_().sA,{defaultMessage:"Viewing now",id:"topbar.presenceIndicator.hiddenUsers.viewingNow.tooltip"})}),s.map(((e,t)=>(0,W.jsx)(te,{userData:e,index:t,rootStore:n},t)))]}):void 0,c.length>0?(0,W.jsxs)("div",{style:{marginBottom:4},children:[(0,W.jsx)(h().A,{style:{...J()},children:(0,W.jsx)(_().sA,{defaultMessage:"Last viewed by",id:"topbar.presenceIndicator.hiddenUsers.lastViewedBy.tooltip"})}),c.map(((e,t)=>(0,W.jsx)(te,{userData:e,index:t,rootStore:n},t)))]}):void 0,(0,W.jsx)(ie,{remainingHiddenUsersCount:d,hasMore:o})]})}function re({hiddenUsersCount:e,events:t,environment:o,rootStore:r}){const i=(0,s().IS)((()=>({origin:{paddingInline:8,marginInlineStart:4,marginInlineEnd:-K-4}})),[]),a=(0,n.useCallback)((()=>{O().handleSidebarButtonClick(o,r,V().tF.Updates,"more_menu"),V().Ay.setState({...V().Ay.state,updatesSubTab:V().VE.Analytics})}),[o,r]);return(0,W.jsx)(f().p,{style:i.origin,size:"sm",shape:"pill",colorPalette:"gray",onClick:a,...t,children:(0,W.jsx)(_().sA,{defaultMessage:"{hiddenUsersCount, plural, one {+{hiddenUsersCount}} other {+{hiddenUsersCount}}}",id:"topbar.presenceIndicator.hiddenUsers.otherCount.message",values:{hiddenUsersCount:e}})})}function ie({hasMore:e,remainingHiddenUsersCount:t}){const o=(0,s().IS)((()=>({message:{marginInlineStart:2,marginTop:2,color:w().Tj.text.inverseSecondary}})),[]);return t>0?(0,W.jsx)("div",{style:o.message,children:e?(0,W.jsx)(_().sA,{defaultMessage:"{remainingVisitorsCount}+ more…",id:"topbarPresence.presenceIndicator.hiddenUsers.evenMoreUsersNotViewing.tooltip",values:{remainingVisitorsCount:t}}):(0,W.jsx)(_().sA,{defaultMessage:"{remainingVisitorsCount} more…",id:"topbarPresence.presenceIndicator.hiddenUsers.moreUsersNotViewing.tooltip",values:{remainingVisitorsCount:t}})}):null}function ae(e,t){const o=(0,s().DP)();return(0,s().IS)((()=>{const n={width:G,height:G,borderRadius:G},r=e(o);return{button:{transition:"all 0.2s ease",transform:"scale(1)"},buttonHovered:{transform:"scale(1.15)",background:"none"},buttonPressed:{transform:"scale(0.9)",background:"none"},uiUserAvatarStyles:{...n},avatarInnerOutline:{...n,outlineStyle:"solid",outlineColor:w().Tj.UIUserAvatarInnerOutline,outlineWidth:.5,outlineOffset:-.5},avatarBorder:t?{...n,outlineStyle:"solid",outlineColor:r,outlineWidth:1.5,outlineOffset:-.5}:{},avatarOuterOutline:{...n,outlineStyle:"solid",outlineColor:t?w().Tj.background.primary:w().Tj.UIUserAvatarIdleOutline,outlineWidth:.5,outlineOffset:t?1:0,backgroundColor:w().Tj.background.primary,marginInlineEnd:-6,position:"relative"},initialColor:{color:t?r:w().Tj.icon.secondary}}}),[e,t,o])}function se(e){const{userData:t,rootStore:o,isShowingInFeed:s=!1}=e,l=(0,i().v3)(),{userId:c}=t,u=(0,R().dp)(l,t),p=(0,b().MF)(c),f=(0,r().X)("use_topbar_person_hovercards"),{userStore:h,showAvatar:S}=(0,a().K8)((()=>{const e=Z(c,o);return{userStore:e,showAvatar:(e.isDefined()||p)&&!e.getIsSuspended()}}),[c,o,p]),x=ae((0,n.useCallback)((e=>(0,b().MF)(c)?w().Tj.icon.secondary:c===l.currentUser.id?w().Tj.border.accentPrimary:(0,w().Nq)(c,e)),[l.currentUser.id,c]),u);if(!S)return null;const M=(0,W.jsx)("div",{style:x.avatarOuterOutline,children:(0,W.jsx)("div",{style:x.avatarBorder,children:(0,W.jsx)(D().A,{iconStyle:x.avatarInnerOutline,userStore:p?g().px:h,style:x.uiUserAvatarStyles,isOffline:!u,size:G,avatarShouldShowShadow:!s,initialOverrideStyle:x.initialColor})})}),C=u&&t.blockId?(0,W.jsx)(m().Ay,{onClick:()=>(0,T().B)([t.blockId??""],!0,l),style:x.button,hoveredStyle:x.buttonHovered,pressedStyle:x.buttonPressed,children:M}):M;if(s||!l.currentUser.id)return C;if(f){const e=function({userData:e,isPresent:t,currentUserId:o,userId:n,isShowingInFeed:r}){if(o!==n)return t?e.blockId&&!r?(0,W.jsx)(_().sA,{defaultMessage:"Viewing now. Click to see where they are.",id:"topbar.presenceIndicator.viewingNowWithLocation.tooltip"}):(0,W.jsx)(_().sA,{defaultMessage:"Viewing now",id:"topbar.presenceIndicator.viewingNow.tooltip"}):e.activityTimestampNearestMinuteMs?(0,W.jsx)(_().sA,{defaultMessage:"Last viewed {timeFromNow}",id:"topbar.presenceIndicator.lastViewedTime.tooltip",values:{timeFromNow:(0,y().v9)(Math.min(e.activityTimestampNearestMinuteMs,Date.now()),d().locale)}}):void 0}({userData:t,isPresent:u,currentUserId:l.currentUser.id,userId:c,isShowingInFeed:s});return(0,W.jsx)(F,{trigger:C,userStore:h,header:e})}return(0,W.jsx)(v().m,{disableTooltip:s,textWrap:!0,renderTooltip:()=>(0,W.jsx)(ee,{rootStore:o,userData:t,isPresent:u,isShowingInFeed:s}),render:e=>(0,W.jsx)("div",{...e,children:C})})}function le(e){const{rootStore:t,pageVisitStore:o,presenceStore:n,maxUsers:r,isShowingInFeed:s}=e,d=(0,i().v3)(),u=d.currentUser.id,[{status:m,value:f}]=(0,S().Yb)((async()=>(0,C().$g)()),[]),v=(0,a().K8)((()=>{var e;if("resolved"===m)return null==f||null===(e=f.getPresencesForBlock(t.id))||void 0===e?void 0:e.find((e=>e.blockId===t.id))}),[f,m,t.id]),h=(0,a().K8)((()=>{const e=d.currentUser.id;if(!e)return;const i=s||(0,R().xm)(n)?(0,R().PZ)({pageVisitStore:o,presenceStore:n}):[];let a=(null==o?void 0:o.state.totalCount)??i.length;const l=[],c=[];for(const t of i)t.userId!==e?(0,R().dp)(d,t)?l.push(t):c.push(t):a--;!(0,p().r)({environment:d,store:t})&&t.isNavigableBlock()&&(0,k().BP)(t,d,d.device)&&"resolved"===m&&null!=v&&v.present&&l.push(v);const u=[...Y(l).reverse(),...Y(c).reverse()],f=Q(r)-1;return{visibleUsers:u.slice(0,f),hiddenUsers:u.slice(f),totalCount:a,hasMore:Boolean(null==o?void 0:o.state.hasMore)}}),[o,n,d,s,r,t,m,v],{useDeepEqual:!0}),{visibleUsers:y,hiddenUsers:g,hiddenUsersCount:x,hasMoreHiddenUsers:_,isEveryUserStoreReady:w}=(0,a().K8)((()=>{if(!u)return{};const{visibleUsers:e=[],hiddenUsers:o=[]}=h??{},n=[u,...e.map((e=>e.userId)),...o.map((e=>e.userId))].map((e=>Z(e,t)));return{visibleUsers:e,hiddenUsers:o,hiddenUsersCount:Number(null==h?void 0:h.totalCount)-e.length,hasMoreHiddenUsers:Boolean(null==h?void 0:h.hasMore),isEveryUserStoreReady:n.every((e=>e.isReady()||(0,b().MF)(e.id)))}}),[u,h,t]),M=(0,a().O$)(c().b),T=(0,j().n)(t),I=!(0,a().O$)(l().e);if(!u||!h||!w||I)return null;if(u!==t.userId)return null;if(0===y.length&&0===g.length)return T?(0,W.jsx)("div",{style:X({environment:d,isShowingTabBar:M,isShowingInFeed:s}),children:(0,W.jsx)(A().h,{enableClickToScroll:!0,rootStore:t})}):null;{const e=[...y];return e.reverse(),(0,W.jsxs)("div",{style:X({environment:d,isShowingTabBar:M,isShowingInFeed:s}),children:[x>0?(0,W.jsx)(oe,{rootStore:t,hiddenUsers:g,hiddenUsersCount:x,hasMore:_,environment:d}):void 0,e.map((e=>(0,W.jsx)(se,{userData:e,rootStore:t},e.userId))),s?void 0:(0,W.jsxs)(W.Fragment,{children:[(0,W.jsx)(se,{rootStore:t,userData:{userId:u,present:!0}}),(0,W.jsx)(A().h,{enableClickToScroll:!0,rootStore:t})]})]})}}},24126:(e,t,o)=>{o.d(t,{c:()=>r});o(296540);const n={viewBox:"0 0 20 20",fittedViewBox:"3.9 2.75 12.18 14.49",svg:(0,o(474848).jsx)("path",{d:"M12.626 2.768a.625.625 0 0 1 0 1.224l-.126.013h-.125v4.794l3.366 5.159c.893 1.369-.03 3.17-1.623 3.281l-.156.006H6.039c-1.688 0-2.703-1.873-1.78-3.287l3.366-5.157V4.005H7.5a.625.625 0 0 1 0-1.25h5zM8.875 9.173l-.102.156-1.567 2.401h5.589l-1.569-2.403-.101-.156V4.005h-2.25z"})},r=(0,o(340498).wt)("beaker",n,"default")},38554:(e,t,o)=>{o.d(t,{U:()=>a});var n=()=>o(590526),r=()=>o(822789),i=()=>o(229508);function a(){const e=(0,i().a)();return(0,n().K8)((()=>(0,r().XM)(e)),[e])}},51194:(e,t,o)=>{o.d(t,{a:()=>i});var n=o(296540),r=()=>o(525128);function i(){const e=(0,n.useRef)(!1);return(0,r().E)((()=>(e.current=!0,()=>{e.current=!1})),[]),e}},57145:(e,t,o)=>{var n=o(746518),r=o(179504),i=o(479306),a=o(225397),s=o(435370),l=o(344124),c=o(206469),d=Array,u=r(l("Array","sort"));n({target:"Array",proto:!0},{toSorted:function(e){void 0!==e&&i(e);var t=a(this),o=s(d,t);return u(o,e)}}),c("toSorted")},59110:(e,t,o)=>{o.r(t),o.d(t,{loadLocalSubtree:()=>x});o(944114),o(517642),o(658004),o(733853),o(845876),o(432475),o(515024),o(731698),o(898992),o(354520),o(803949);var n=()=>o(726637),r=()=>o(700500),i=()=>o(175482),a=()=>o(777447),s=()=>o(792071),l=()=>o(976618),c=()=>o(388821),d=()=>o(277153),u=()=>o(912720),p=()=>o(199378),m=()=>o(179034),f=()=>o(519831),v=()=>o(869558),h=()=>o(37165),y=()=>o(144081),g=()=>o(743246),S=()=>o(201980),b=()=>o(534177);function x(e){const{environment:t,blockId:o,inMemoryRecordCache:n,options:r}=e,i=t.currentUser.id,a=c().RecordMap.create(),s=new Set,l=[{pointer:{table:m().ev,id:o},parentId:"doesn't matter"}];for(;l.length>0;){const e=l.shift();if(!e)continue;if(s.has(e.pointer.id))continue;const t=o===e.pointer.id,c=_({pointer:e.pointer,recordMap:a,inMemoryRecordCache:n,currentUserId:i,cursors:l,cursor:e,options:r,isRootRequest:t});if(c)return c;s.add(e.pointer.id)}return{type:"success",recordMap:a}}function _(e){const{pointer:t,recordMap:o,inMemoryRecordCache:c,currentUserId:x,cursors:_,cursor:w,options:M,isRootRequest:T}=e;let C;return(0,d().Yt)(t,m().ev)?C=function(e){var t,o,l,c;const{pointer:d,recordMap:p,inMemoryRecordCache:f,currentUserId:h,cursors:y,cursor:x,options:_,isRootRequest:w}=e,M=f.getRecord({pointer:d,userId:h}),T=null==M?void 0:M.value;if(!T)return _.requireFullSubtree?{type:"error",reason:"missing_record",pointer:d}:void 0;const C=_.excludeCrdtData?i().ir(T):T;if(_.includeLegacyTransclusionBlockValues){if(!w&&C.parent_id!==x.parentId&&!x.isBlockContentChild)return}else if(!w&&C.parent_id!==x.parentId)return;if(C.type===r().xd.externalObjectInstance&&!_.allowCopyExternalObjectInstances)return{type:"error",reason:"encountered_external_object_instance",pointer:d};if(p.setValue(d,C),!_.skipNavigableChildren){const e=s().Bj6.fromBlock(C).getCollectionPointers();for(const t of e){const e=f.getRecord({pointer:t,userId:h});var k,I;if(e)(null===(k=e.value)||void 0===k?void 0:k.parent_table)===m().ev&&(null===(I=e.value)||void 0===I?void 0:I.parent_id)===C.id&&y.push({pointer:t,parentId:C.id});else if(_.requireFullSubtree)return{type:"error",reason:"missing_record",pointer:t}}if(C.view_ids)for(const t of C.view_ids)y.push({pointer:{table:v().Gy,id:t,spaceId:C.space_id},parentId:C.id})}if(!(_.skipBlockContent||_.skipTransclusionContainerChildren&&"transclusion_container"===C.type||_.skipNavigableChildren&&(0,r().$I)(C.type))){const e=s().Bj6.fromBlock(C).getRenderableContentIds();for(const t of e)y.push({pointer:{table:m().ev,id:t},parentId:C.id,isBlockContentChild:!0})}const A=s().Bj6.fromBlock(C).getNonContentChildren();for(const n of A)y.push({pointer:{table:m().ev,id:n},parentId:C.id,isBlockContentChild:!0});if(C.type===r().xd.externalObjectInstance){var j,R;const e=(null===(j=C.format)||void 0===j?void 0:j.related_external_object_uris_to_instance_ids)&&Object.values(null===(R=C.format)||void 0===R?void 0:R.related_external_object_uris_to_instance_ids)||[];for(const t of e)y.push({pointer:{table:m().ev,id:t,spaceId:C.space_id},parentId:C.id})}if(!_.skipNavigableChildren&&C.properties){const e=Object.values(C.properties).filter(b().O9);for(const t of e)for(const e of t)for(const t of S().uPN(e)){if(S().jIt(t)){const e=S().v55(t);y.push({pointer:{table:m().ev,id:e},parentId:C.id})}if(S().sh$(t)){const e=S().cQR(t),o=(0,a().lX)({url:e,baseUrl:n().A.domainBaseUrl,publicDomainName:n().A.publicDomainName});o&&y.push({pointer:{table:m().ev,id:o},parentId:C.id})}if(S().N53(t)){const e=S().T$c(t);e&&y.push({pointer:{table:m().ev,id:e,spaceId:C.space_id},parentId:C.id})}}}"form"===C.type&&null!==(t=C.format)&&void 0!==t&&t.form_layout_pointer&&y.push({pointer:C.format.form_layout_pointer,parentId:C.id});null!==(o=C.format)&&void 0!==o&&o.automation_id&&y.push({pointer:{table:u().yB,id:C.format.automation_id,spaceId:C.space_id},parentId:C.id});null!==(l=C.format)&&void 0!==l&&l.workflow_id&&y.push({pointer:{table:g().C0,id:C.format.workflow_id,spaceId:C.space_id},parentId:C.id});null!==(c=C.format)&&void 0!==c&&c.ai_instructions_page_pointer&&y.push({pointer:C.format.ai_instructions_page_pointer,parentId:C.id})}({pointer:t,recordMap:o,inMemoryRecordCache:c,currentUserId:x,cursors:_,cursor:w,options:M,isRootRequest:T}):(0,d().Yt)(t,f().Vl)?C=function(e){var t,o;const{pointer:n,recordMap:r,inMemoryRecordCache:i,currentUserId:a,cursors:s,cursor:l,options:c}=e;if(!c.allowCopyCollections)return{type:"error",reason:"encountered_collection",pointer:n};const d=i.getRecord({pointer:n,userId:a});if(null==d||!d.value)return c.requireFullSubtree?{type:"error",reason:"missing_record",pointer:n}:void 0;if(d.value.parent_id!==l.parentId)return;const p=d.value;r.setValue(n,p),i.forEachRecord(a,(({model:e})=>{e.table===m().ev&&e&&e.parent_id===n.id&&e.alive&&s.push({pointer:e.pointer,parentId:n.id})}));const f=(null===(t=p.format)||void 0===t?void 0:t.automation_ids)??[];for(const m of f)s.push({pointer:{table:u().yB,id:m,spaceId:p.space_id},parentId:p.id});p.schema&&Object.values(p.schema).forEach((e=>{e&&"button"===e.type&&e.automation_id&&s.push({pointer:{id:e.automation_id,spaceId:p.space_id,table:u().yB},parentId:p.id})}));null!==(o=p.format)&&void 0!==o&&o.layout_pointer&&s.push({pointer:p.format.layout_pointer,parentId:p.id})}({pointer:t,recordMap:o,inMemoryRecordCache:c,currentUserId:x,cursors:_,cursor:w,options:M}):(0,d().Yt)(t,v().Gy)?C=function(e){var t,o;const{pointer:n,recordMap:r,inMemoryRecordCache:i,currentUserId:a,cursors:s,cursor:l,options:c}=e,d=i.getRecord({pointer:n,userId:a});if(null==d||!d.value)return c.requireFullSubtree?{type:"error",reason:"missing_record",pointer:n}:void 0;if(d.value.parent_id!==l.parentId)return;"form_editor"===d.value.type&&null!==(t=d.value.format)&&void 0!==t&&t.form_block_pointer&&s.push({pointer:d.value.format.form_block_pointer,parentId:d.value.id});null!==(o=d.value.format)&&void 0!==o&&o.dashboard_layout_pointer&&s.push({pointer:d.value.format.dashboard_layout_pointer,parentId:d.value.id});r.setValue(n,d.value)}({pointer:t,recordMap:o,inMemoryRecordCache:c,currentUserId:x,cursors:_,cursor:w,options:M}):(0,d().Yt)(t,u().yB)?C=function(e){const{pointer:t,recordMap:o,inMemoryRecordCache:n,currentUserId:r,cursors:i,cursor:a,options:s}=e,l=n.getRecord({pointer:t,userId:r});if(null==l||!l.value)return s.requireFullSubtree?{type:"error",reason:"missing_record",pointer:t}:void 0;if(l.value.parent_id!==a.parentId)return;o.setValue(t,l.value);for(const c of l.value.action_ids??[])i.push({pointer:{table:p().SC,id:c,spaceId:l.value.space_id},parentId:l.value.id})}({pointer:t,recordMap:o,inMemoryRecordCache:c,currentUserId:x,cursors:_,cursor:w,options:M}):(0,d().Yt)(t,p().SC)?C=function(e){const{pointer:t,recordMap:o,inMemoryRecordCache:n,currentUserId:r,cursors:i,cursor:a,options:s}=e,l=n.getRecord({pointer:t,userId:r});if(null==l||!l.value)return s.requireFullSubtree?{type:"error",reason:"missing_record",pointer:a.pointer}:void 0;if(l.value.parent_id!==a.parentId)return;o.setValue(t,l.value);for(const c of l.value.blocks??[])i.push({pointer:{table:m().ev,id:c,spaceId:l.value.space_id},parentId:l.value.id})}({pointer:t,recordMap:o,inMemoryRecordCache:c,currentUserId:x,cursors:_,cursor:w,options:M}):(0,d().Yt)(t,g().C0)?C=function(e){const{pointer:t,recordMap:o,inMemoryRecordCache:n,currentUserId:r,cursor:i,options:a}=e,s=n.getRecord({pointer:t,userId:r});if(null==s||!s.value)return a.requireFullSubtree?{type:"error",reason:"missing_record",pointer:i.pointer}:void 0;if(s.value.parent_id!==i.parentId)return;o.setValue(t,s.value)}({pointer:t,recordMap:o,inMemoryRecordCache:c,currentUserId:x,cursor:w,options:M}):(0,d().Yt)(t,y().zx)?C=function(e){const{pointer:t,recordMap:o,inMemoryRecordCache:n,currentUserId:r,cursors:i,options:a}=e,c=n.getRecord({pointer:t,userId:r}),d=null==c?void 0:c.value;if(!d)return a.requireFullSubtree?{type:"error",reason:"missing_record",pointer:t}:void 0;o.setValue(t,d);const u=s().Bj6.fromValue(y().zx,d);for(const s of u.getBlockChildrenPointers())i.push({pointer:s,parentId:t.id});const p=e=>{const o={id:e.collection_view_id,table:v().Gy,spaceId:d.space_id};return i.push({pointer:o,parentId:t.id}),e};(0,l().E)(d.modules,(e=>{if("formQuestion"===e.type){const o={id:e.formQuestionId,table:h().lo,spaceId:d.space_id};i.push({pointer:o,parentId:t.id})}else if("view"===e.type)p(e);else if("row"===e.type)for(const t of e.modules)"view"===t.type&&p(t)}))}({pointer:t,recordMap:o,inMemoryRecordCache:c,currentUserId:x,cursors:_,cursor:w,options:M}):(0,d().Yt)(t,h().lo)&&(C=function(e){const{pointer:t,recordMap:o,inMemoryRecordCache:n,currentUserId:r,options:i}=e,a=n.getRecord({pointer:t,userId:r});if(null==a||!a.value)return i.requireFullSubtree?{type:"error",reason:"missing_record",pointer:t}:void 0;o.setValue(t,a.value)}({pointer:t,recordMap:o,inMemoryRecordCache:c,currentUserId:x,cursors:_,cursor:w,options:M})),C}},62900:(e,t,o)=>{o.r(t),o.d(t,{arrowStraightLeftSmallIcon:()=>r,iconDefinition:()=>n});o(296540);const n={viewBox:"0 0 16 16",fittedViewBox:"2.12 3.05 11.76 9.9",directional:!0,svg:(0,o(474848).jsx)("path",{d:"M2.16 8.206q.046.13.148.236l4.32 4.32a.625.625 0 0 0 .884-.884L4.259 8.625h8.991a.625.625 0 1 0 0-1.25H4.259l3.253-3.253a.625.625 0 1 0-.884-.884l-4.32 4.32a.62.62 0 0 0-.148.648"})},r=(0,o(340498).wt)("arrowStraightLeftSmall",n,"small")},64790:(e,t,o)=>{o.d(t,{$L:()=>u,EV:()=>s,PZ:()=>d,dp:()=>l,xm:()=>c});o(944114);var n=()=>o(798880),r=()=>o(100622),i=()=>o(496603),a=()=>o(720665);function s(e){if(null!=e&&e.blockId)return e.blockId}function l(e,t){const o=e.currentUser.id;return t.userId===o||t.present}function c(e){var t;return(null===(t=e.state.rootStore)||void 0===t?void 0:t.canEdit())??!1}function d(e){const{pageVisitStore:t,presenceStore:o}=e,{remotePresenceData:n}=o.state;let r=[];n&&i().uk(n,(e=>{null!=e&&e.userId&&r.push(e)}));const{pageId:s,lastViewTime:l,lastExitTime:c,totalCount:d,hasMore:u,...p}=t.state;return i().uk(p,(e=>{e.isDefined()&&r.push({userId:e.getUserId(),activityTimestampNearestMinuteMs:(0,a().WY)(e.getVisitedAt()),present:!1})})),r=i().hS(r,(e=>e.userId)),i().Ul(r,(({activityTimestampNearestMinuteMs:e})=>e?-e:0))}function u(e){const{userId:t,theme:o}=e;return(0,n().MF)(t)?r().Tj.icon.secondary:(0,r().Nq)(t,o)}},93988:(e,t,o)=>{o.d(t,{y:()=>d});var n=()=>o(637997),r=()=>o(267419);const i={ko:()=>o.e(2268).then(o.bind(o,224434)),es:()=>o.e(95264).then(o.bind(o,196425)),de:()=>o.e(35390).then(o.bind(o,653703)),fr:()=>o.e(3272).then(o.bind(o,94677)),pt:()=>o.e(27315).then(o.bind(o,766869)),zh:()=>o.e(69945).then(o.bind(o,516814)),ja:()=>o.e(77757).then(o.bind(o,824432)),da:()=>o.e(9423).then(o.bind(o,440761)),fi:()=>o.e(59337).then(o.bind(o,462135)),nb:()=>o.e(2040).then(o.bind(o,937314)),nl:()=>o.e(51106).then(o.bind(o,530897)),sv:()=>o.e(53631).then(o.bind(o,895222)),th:()=>o.e(17278).then(o.bind(o,796137)),id:()=>o.e(51872).then(o.bind(o,443716)),vi:()=>o.e(51872).then(o.bind(o,443716)),he:()=>o.e(51872).then(o.bind(o,443716)),ar:()=>o.e(51872).then(o.bind(o,443716))};let a=!1,s=!1;async function l(e){for(const[o,r]of Object.entries(e.emojiLocaleKeywords)){var t;n().fB[o]={...n().fB[o],keywords:[...r,...(null===(t=n().fB[o])||void 0===t?void 0:t.keywords)||[]]}}await r().A.waitUntilLoaded(),r().A.update((({emojiByName:t,...o})=>({...o,emojiByName:{...t,...e.emojiByName}})))}async function c(){if(a)return;const[e]=o(609679).locale.split("-");e in i&&(await l(await i[e]()),a=!0)}const d=(0,o(279900).A)((async()=>{await async function(){s||(await l(await o.e(51872).then(o.bind(o,443716))),s=!0)}(),await c()}))},103448:(e,t,o)=>{o.d(t,{A:()=>i});o(296540);var n=()=>o(284371),r=o(474848);const i=function({imageURL:e,imageWidth:t,imageHeight:n,caption:i,title:s,imageContainerStyle:l}){if(e){const c=(0,o(518461).L)(e);return(0,r.jsxs)("div",{style:{width:t||200,marginTop:4,marginBottom:4},children:[(0,r.jsx)("div",{style:{width:"100%",height:n||100,borderRadius:4,backgroundImage:`url(${c})`,backgroundSize:"cover",marginBottom:6,...l}}),(0,r.jsx)(a,{caption:i,title:s})]})}return(0,r.jsx)(a,{caption:i,title:s,style:{width:t}})};function a({style:e,caption:t,title:o}){return(0,r.jsxs)("div",{style:{whiteSpace:"normal",lineHeight:1.4,...e},children:[o?(0,r.jsx)("header",{style:{fontWeight:n().Wy.bold,marginBottom:4},children:o}):void 0,t]})}},106702:(e,t,o)=>{o.d(t,{$:()=>i});var n=()=>o(590526);const r=new(o(140934).ComputedStore)((()=>o(907258).default.state.currentUserStore),{debugName:"AppStoreCurrentUserStore"});function i(){return(0,n().O$)(r)}},130119:(e,t,o)=>{function n(e){return"drag"in e&&e.drag?{WebkitAppRegion:"drag"}:"noDrag"in e&&e.noDrag?{WebkitAppRegion:"no-drag"}:{}}o.d(t,{g:()=>n})},132855:(e,t,o)=>{o.r(t),o.d(t,{arrowInCircleUpFillIcon:()=>r,iconDefinition:()=>n});o(296540);const n={viewBox:"0 0 20 20",fittedViewBox:"2.37 2.37 15.25 15.26",svg:(0,o(474848).jsx)("path",{d:"M10 17.625a7.625 7.625 0 1 0 0-15.25 7.625 7.625 0 0 0 0 15.25m3.042-8.07a.625.625 0 0 1-.884 0L10.625 8.02v5.466a.625.625 0 1 1-1.25 0V8.021L7.842 9.554a.625.625 0 1 1-.884-.883l2.6-2.6a.625.625 0 0 1 .884 0l2.6 2.6a.625.625 0 0 1 0 .883"})},r=(0,o(340498).wt)("arrowInCircleUpFill",n,"fill")},133043:(e,t,o)=>{o.d(t,{P:()=>r});o(296540);const n={viewBox:"0 0 20 20",fittedViewBox:"2.5 3.05 15 13.82",svg:(0,o(474848).jsx)("path",{d:"M9.08 3.341a1.625 1.625 0 0 1 1.84 0l5.875 4.035c.441.304.705.805.705 1.34v6.034a2.125 2.125 0 0 1-2.125 2.125h-2.716a1.625 1.625 0 0 1-1.625-1.625v-4.065H8.967v4.065c0 .898-.728 1.625-1.625 1.625H4.625A2.125 2.125 0 0 1 2.5 14.75V8.716c0-.535.264-1.036.705-1.34zm1.132 1.03a.375.375 0 0 0-.424 0L3.913 8.407a.38.38 0 0 0-.163.309v6.034c0 .483.392.875.875.875h2.716a.375.375 0 0 0 .375-.375v-4.19c0-.621.503-1.125 1.125-1.125h2.319c.62 0 1.124.504 1.124 1.125v4.19c0 .207.168.375.375.375h2.716a.875.875 0 0 0 .875-.875V8.716c0-.124-.06-.24-.163-.31z"})},r=(0,o(340498).wt)("home",n,"default")},135599:(e,t,o)=>{o.d(t,{W:()=>K});o(517642),o(658004),o(733853),o(845876),o(432475),o(515024),o(731698),o(898992),o(823215),o(354520),o(581454);var n=o(296540),r=()=>o(755531),i=()=>o(242422),a=()=>o(726637),s=()=>o(395361),l=()=>o(484714),c=()=>o(590526),d=()=>o(721908),u=()=>o(79926),p=()=>o(929219),m=()=>o(711339),f=()=>o(295633),v=()=>o(732810),h=()=>o(302996),y=()=>o(591779),g=()=>o(206267),S=()=>o(519831),b=()=>o(96689),x=()=>o(620333),_=()=>o(245241),w=()=>o(496603),M=()=>o(973647),T=()=>o(534177),C=()=>o(222917),k=()=>o(753812),I=()=>o(383070),A=()=>o(518362),j=()=>o(825972),R=()=>o(466088),E=()=>o(798693),B=()=>o(487542),O=()=>o(113416),V=()=>o(470928),P=()=>o(659528),D=()=>o(475553),U=()=>o(106628),N=()=>o(361330),F=()=>o(499233),L=()=>o(671199),z=()=>o(326589),W=()=>o(968172),H=()=>o(873049),q=()=>o(770167);function K(e){var t;const{options:o,...g}=e,{overrideSearchSessionId:K,overrideSpaceStore:Q,disable:Z,debug:X,onLocalSearchBegin:J}=o,{type:ee,query:te="",source:oe,limit:ne,peopleBlocksToInclude:re}=g,ie=ne??20,ae=(0,l().v3)(),se=(0,y().ZC)(te),le=(0,y().ZC)(e.filters),ce=(0,y().ZC)(e.sort),de=(0,y().ZC)(e.options.searchExperimentOverrides),ue=(0,y().ZC)(X),pe=(0,n.useRef)(0),me=(0,n.useRef)(!0),fe=(0,c().O$)(p().e),ve=!fe,he=(0,D().y)(),ye=(0,n.useRef)(ie),[ge,Se]=(0,n.useState)(G()),be=(0,c().K8)((()=>K&&K!==ge.searchSessionId?(Se((e=>({...e,searchSessionId:K}))),K):ge.searchSessionId),[ge,K]);(0,n.useEffect)((()=>{pe.current=0}),[be]);const xe=(0,n.useRef)(),_e=(0,n.useRef)(new Map),we=(0,n.useRef)(void 0),Me=(0,c().K8)((()=>I().zD.isSearchModalV2Enabled()),[]),Te=(0,n.useCallback)((()=>{xe.current&&(m().default.measure(xe.current,{environment:ae,data:{query_length:te.length,source:oe,search_session_id:be,is_search_modal_v2:Me}}),xe.current=void 0)}),[ae,te.length,oe,be,Me]),Ce=(0,n.useCallback)((e=>{const t=we.current;if(void 0!==t){const o=Date.now()-t;_e.current.set(e,o)}}),[]),ke=(0,n.useCallback)((e=>_e.current.get(e)),[]),{localResults:Ie,serverResults:Ae,isResultsLoading:je,numTotalLocalResults:Re,numTotalServerResults:Ee}=ge,Be=(0,c().K8)((()=>Q||(0,r().S)()),[Q]),Oe=(0,c().K8)((()=>{if(ve||je&&me.current)return Ie;let e=function(e){const{localResults:t,serverResults:o}=e,n=t.map((e=>e.store.id)),r=new Set(n),i=o.filter((e=>!r.has(e.store.id)));return[...t,...i]}({localResults:Ie,serverResults:Ae});return ee===_().Vz.CollectionsInSpace&&(e=Y(e)),e}),[ve,je,Ie,ee,Ae]),Ve=(0,c().K8)((()=>"on"===i().default.getEligibleGroup({experimentId:"search-use-local-reranker-layered",parameter:"shouldUseLocalReranker",defaultGroup:"control"})),[]),Pe=(0,n.useMemo)((()=>e.sort?e.sort:{field:"relevance"}),[e.sort]),De=(0,n.useMemo)((()=>{var t;const n=(t=>{switch(e.type){case _().Vz.BlocksInCollection:return e.collectionId;case _().Vz.BlocksInParent:return e.parentId;default:return null===(t=e.filters)||void 0===t?void 0:t.parentId}})(),r={...e.filters,navigableBlockContentOnly:void 0!==(null===(t=e.filters)||void 0===t?void 0:t.navigableBlockContentOnly)?e.filters.navigableBlockContentOnly:!0===o.isTitleOnly,parentId:n};return(0,_().N2)(r)}),[o.isTitleOnly,e]),Ue=(0,n.useCallback)(((e,t)=>{const{isSuccess:o,totalResultsCount:n,localCacheMetadata:r,query:i}=t;m().default.measure(e,{environment:ae,data:{start_time:e.startTime,success:o,surface:oe,num_results:n,search_session_id:be,local_cache_metadata:r,local_cache_readiness_timings:(0,F().Yp)(),query_length:i.length}})}),[ae,oe,be]),Ne=(0,n.useCallback)(((e,t)=>{const{isSuccess:o,totalResultsCount:n,query:r}=t;m().default.measure(e,{environment:ae,data:{start_time:e.startTime,success:o,surface:oe,num_results:n,search_session_id:be,search_session_flow_number:pe.current,query_length:r.length}})}),[ae,oe,be]),Fe=(0,n.useMemo)((()=>{if(o.disableLocalSearch)return!1;const t=(0,B().B)(te),n=e.options.searchExperimentOverrides,r="on"===(null==n?void 0:n["search-no-local-blending"]);return"trash"===oe||(0,O().B)({isLocalBlendingDisabled:r,queryOperations:t,queryText:te,querySort:Pe})}),[o.disableLocalSearch,e.options.searchExperimentOverrides,te,Pe,oe]),Le=(0,c().K8)((()=>L().A.state.localSearchableBlocksCache),[]),ze=(0,u().fJ)(U().T.searchActions),We=(0,n.useCallback)((t=>{var o;const{query:n,spaceStore:r}=t;if(!Fe)return Se((e=>({...e,localResults:[],numTotalLocalResults:0}))),void(null==J||J({query:n}));null==J||J({query:n});const i=m().default.mark("rum.local_quick_search_query"),a=he&&!fe&&(0,T().Xk)(_().Iy,oe);if("resolved"!==ze.status)return;const s=ee===_().Vz.CollectionsInSpace,l=s&&0===n.length?function(e){const{spaceStore:t,environment:o}=e,n=(0,A().F)({currentUserId:o.currentUser.id,spaceId:t.id}).map((e=>{const o=v().m.createChildStore(t,{table:S().Vl,id:e}).getParentBlockStore();if(null==o?void 0:o.pathIsAccessibleAndAlive())return o}));return(0,w().oE)(n)}({environment:ae,spaceStore:r}).map(((e,t)=>({store:e,originalPosition:t,id:e.id,score:0,spaceId:e.getSpaceId(),sources:[_().Ni.Local],featureGroups:[],serverEventProperties:void 0}))):[],c=(0,F().PE)({environment:ae,overrideCurrentUserId:ae.currentUser.id,overrideSpaceId:r.id,overrideLocalSearchableBlocksCache:Le}),d=(0,E().E)(ae).hasPublicAccessPermission,{filters:u,excludedBlockIds:p}=(0,x().CT)({peopleBlocksToInclude:re,filters:De,excludedBlockIds:void 0,spaceIdCreator:ae.idCreator.getSpaceIdCreatorSync(r.id)}),f=(0,q().S6)({environment:ae,parentStore:r,spaceStore:r,isOnline:fe,requestInput:{query:{text:n,filters:{...u,blockTypes:$({blockTypes:null===(o=e.filters)||void 0===o?void 0:o.blockTypes,queryType:ee}),isOfflineOnly:a},sort:{field:"relevance"}},limit:ve?ie:Math.min(ie,5)},localSearchCache:Le,forceLocalCacheUsage:"trash"===oe,shouldUseNewRerankerDebugOverrideEnabled:Ve,shouldLimitLocalResultsWhenOnline:!ve,hasPublicAccessPermission:d}),h=f&&M().Q.unwrapOr(f,void 0),y=(null==h?void 0:h.results)??[],b=(null==h?void 0:h.total)??0;let C=w().hS([...l,...y],(e=>(0,H().a)(e)));C=s?Y(C):C,C=C.filter((e=>!p.includes(e.id)&&!(g.excludedBlockIds??[]).includes(e.id)&&(null==Be?void 0:Be.id)===e.spaceId)),Se((e=>e.query!==n?e:(lt.current=C.map((e=>e.id)),Ue(i,{query:n,isSuccess:Boolean(h),totalResultsCount:b,localCacheMetadata:c}),{...e,localResults:C,isResultsLoading:!ve&&e.isResultsLoading,numTotalLocalResults:b})))}),[he,fe,oe,ze.status,ee,ae,Le,De,null===(t=e.filters)||void 0===t?void 0:t.blockTypes,ve,Be,ie,Ve,Ue,g.excludedBlockIds,Fe,re,J]),He="quick_find"===oe?40:N().GR,qe=(0,s().Y)(We,He),Ke=(0,n.useCallback)((t=>{var o,n,r,i,s;const{result:l,isMetaClick:c,context:d}=t,u=void 0!==l.workflowData;C().sg(ae,{...l.serverEventProperties&&l.serverEventProperties["server-query"]?{"server-query":l.serverEventProperties["server-query"]}:{},queryText:l.serverEventProperties&&l.serverEventProperties["server-query"]&&l.serverEventProperties["server-query"].query?l.serverEventProperties["server-query"].query:te,sources:l.sources,localSources:Array.from(l.localSource||new Set),searchSessionId:be,aiSessionId:void 0,traceId:void 0,searchSessionFlowNumber:pe.current,context:d,queryStringLength:te.length,totalSearchResultCount:Re+Ee,numLocalResults:Ie.length,numTotalLocalResults:Re,isMobile:a().A.isMobile,isMetaClick:c,hasFilters:Boolean(e.filters),originalPosition:l.originalPosition,selectedItemIndex:l.originalPosition,selectedSearchResultMetadata:{blockId:l.id,blockType:u?"workflow":l.store.getModel().type},searchSource:oe,verificationState:(0,V().i1)(l.store),numKeystrokes:null===(o=t.searchSessionMetrics)||void 0===o?void 0:o.numKeystrokes,timeToSelectMs:null===(n=t.searchSessionMetrics)||void 0===n?void 0:n.timeToSelectMs,timeFromFirstKeyStrokeToSelectMs:null===(r=t.searchSessionMetrics)||void 0===r?void 0:r.timeFromFirstKeyStrokeToSelectMs,hadMetaClick:null===(i=t.searchSessionMetrics)||void 0===i?void 0:i.hadMetaClick,timeToRenderResult:null===(s=t.searchSessionMetrics)||void 0===s?void 0:s.timeToRenderResult})}),[ae,Re,Ee,Ie,te,be,pe,e.filters,oe]),Ge=se===te,$e=w().n4(le,e.filters),Ye=w().n4(ce,e.sort),Qe=w().n4(de,e.options.searchExperimentOverrides),Ze=ue===X,Xe=$e&&Ge&&Ye&&Qe&&Ze,Je=(0,c().K8)((()=>{const{publicAccessPermissionAncestorBlockId:e}=(0,E().E)(ae);return void 0!==e&&((0,R().w)(ae)||(0,z().g)())}),[ae]),et=0===te.length,tt=Boolean(se&&et),ot=!Z&&(Be||Je)&&!Xe,nt=!($e&&Ye&&Qe&&Ze),rt=tt||!Ge||nt,it=et||nt,at=(0,n.useRef)(!1),st=(0,n.useRef)([]),lt=(0,n.useRef)([]),ct=(0,c().K8)((()=>{if("mention_menu"!==oe)return;return P().A.getMentionedIds(ae.currentUser.id)}),[ae.currentUser.id,oe]),dt=(0,n.useCallback)((async t=>{xe.current=m().default.mark("time_to_render_search_results"),void 0===we.current&&(we.current=Date.now());const o=m().default.mark("rum.server_quick_search_query"),{query:n,spaceStore:r,size:i}=t,a=null==r?void 0:r.id;if(ve)return;const s=!me.current&&$e?st.current:[],l=w().sb([...g.excludedBlockIds??[],...lt.current||[]]),{finalFilters:c,finalExcludedBlockIds:d,isPublicAncestorSearch:u,publicAccessPermissionAncestorBlockId:p}=function(e){const{environment:t,peopleBlocksToInclude:o,filters:n,serverExcludedBlockIds:r,spaceId:i}=e,{filters:a,excludedBlockIds:s}=i?(0,x().CT)({peopleBlocksToInclude:o,filters:n,excludedBlockIds:r,spaceIdCreator:t.idCreator.getSpaceIdCreatorSync(i)}):{filters:n,excludedBlockIds:r},{shouldIncludePublicPages:l,isPublicAncestorSearch:c,publicAccessPermissionAncestorBlockId:d}=(0,q().dB)({environment:t,spaceId:i}),u=l?{...a,includePublicPagesWithoutExplicitAccess:!0}:a;return{finalFilters:u,finalExcludedBlockIds:s,isPublicAncestorSearch:c,publicAccessPermissionAncestorBlockId:d}}({environment:ae,peopleBlocksToInclude:re,filters:De,serverExcludedBlockIds:l,spaceId:a}),v=ee===_().Vz.BlocksInSpace&&u&&p?{type:_().Vz.BlocksInAncestor,ancestorId:p}:a?{spaceId:a}:void 0;if(!v)return void Se((e=>({...e,isResultsLoading:!1})));pe.current+=1;const y={...g,...v,excludedBlockIds:d,query:n,sort:Pe,filters:c,recentlyMentionedPageIds:ct,searchSessionFlowNumber:pe.current,searchSessionId:be,limit:i,recentPagesForBoosting:a?(0,j().cs)(W().A.getWithoutSubscribing(a)):[],ignoresHighlight:"quick_find"!==oe||!0===De.navigableBlockContentOnly,searchExperimentOverrides:e.options.searchExperimentOverrides,debug:X},S=await k().callApi({eventName:"search",environment:ae,data:y});if(!S||"failed"===S.type)return void Se((e=>({...e,isResultsLoading:!1})));const M=S.data.total,C=(0,T().MU)((0,T().WP)(S.data.trackEventProperties).map((([e,t])=>[`server-${e}`,t]))),I=S.data.results.slice(0,i).map(((e,t)=>{const o=r??new(h().SpaceStore)(ae,{table:b().NX,id:e.spaceId}),n=f().B.createChildStore(o,{id:e.id,spaceId:e.spaceId,table:"block"}),i=e.terms;return{store:n,originalPosition:t,...e,serverEventProperties:C,terms:i}}));at.current=!(M<i);const A=w().hS([...s,...I],(e=>(0,H().a)(e)));st.current=A,Se((e=>e.query!==n?e:(Ne(o,{query:n,isSuccess:"success"===S.type,totalResultsCount:M}),{...e,serverResults:A,isResultsLoading:!1,numTotalServerResults:M,debugInfo:S.data.debug})))}),[ve,$e,g,e.options.searchExperimentOverrides,Pe,De,ct,be,oe,ae,Ne,X,re,ee]),ut=(0,n.useCallback)((e=>{if(Z||!Be||!at.current||je||!fe)return;const t=e??20;ye.current+=t,at.current=!1,me.current=!1,Se((e=>({...e,isResultsLoading:!0}))),dt({query:te,spaceStore:Be,size:ye.current})}),[Be,Z,dt,fe,je,te]),pt="quick_find"===oe?100:N().ab,mt=(0,d().d)(ut,pt),ft=(0,s().Y)(dt,N().ab);return(0,n.useEffect)((()=>{rt&&(st.current=[],_e.current.clear(),we.current=void 0,ye.current=ie,at.current=!0,Se((e=>{const t=it?[]:e.localResults;return{...G(),localResults:t,numTotalLocalResults:t.length,searchSessionId:e.searchSessionId}}))),ot&&(me.current=!0,Se((e=>({...e,isResultsLoading:!0,query:te}))),we.current=Date.now(),Be&&qe({query:te,spaceStore:Be}),ft({query:te,spaceStore:Be,size:ye.current}))}),[Be,qe,ft,ie,te,ot,rt,oe,Ge,it]),{results:Oe,isResultsLoading:je,searchSessionId:be,fetchAdditionalServerResultsOnChange:!Z&&!ve&&at.current&&Xe?mt:void 0,searchSessionFlowNumber:pe.current,hasMoreResults:at.current,debugInfo:ge.debugInfo,searchAnalytics:{trackSelectSearchItem:Ke,endTimeToRenderServerResultsTiming:Te,setResultRenderTime:Ce,getResultRenderTime:ke}}}function G(){return{query:void 0,localResults:[],numTotalLocalResults:0,serverResults:[],numTotalServerResults:0,searchSessionId:(0,g().JW)(),isResultsLoading:!1,debugInfo:void 0}}function $(e){const{blockTypes:t,queryType:o}=e;switch(o){case _().Vz.CollectionsInSpace:return["collection_view","collection_view_page"];case _().Vz.BlocksInCollection:return["page","collection_view_page"];case _().Vz.BlocksInSpace:default:return t??[]}}function Y(e){const t=new Set;return e.filter((e=>{const o=e.store,n=(null==o?void 0:o.getCollectionStores())??[];if(n.every((e=>t.has(e.id))))return!1;for(const r of n)t.add(r.id);return!0}))}},191356:(e,t,o)=>{o.d(t,{C4:()=>S,Nf:()=>x,qM:()=>b});o(16280),o(944114),o(898992),o(430670),o(581454);var n=()=>o(726637),r=()=>o(675133),i=()=>o(792057),a=()=>o(732810),s=()=>o(617871),l=()=>o(388693),c=()=>o(519831),d=()=>o(161479),u=()=>o(534177),p=()=>o(753812),m=()=>o(457583),f=()=>o(384944),v=()=>o(594794),h=()=>o(620791),y=()=>o(661075);const g=(0,o(69708).YK)({authError:{defaultMessage:"Auth failed. Please try again or contact Notion support.",id:"database.viewSettings.propertyTypeSection.connected.authFail"},mobileAdminError:{defaultMessage:"Ask your workspace admin to configure the GitHub (Workspace) app in settings to use this feature.",id:"database.viewSettings.propertyTypeSection.connected.mobileAdminError"},mobileError:{defaultMessage:"Please authorize this integration on the desktop app or a browser.",id:"database.viewSettings.propertyTypeSection.connected.mobileError"}});async function S(e,t,o,a){const s=null==t?void 0:t.getSpaceStore();if(!s)return;const l=(0,h().jw)(o.id).length;if(n().A.isMobile&&a&&!l){const e=r().A.formatMessage(g.mobileAdminError);throw i().f1(e),new Error(e)}if(n().A.isMobile&&!a&&!l){const e=r().A.formatMessage(g.mobileError);throw i().f1(e),new Error(e)}if(!l&&a&&s.canAdmin()||!l&&!a)try{await m().Jq({environment:e,integration:o,spaceId:s.id,from:"collection_settings_property_type"})}catch(c){const e=r().A.formatMessage(g.authError);throw i().f1(e),new Error(e)}if(!(0,h().jw)(o.id).length){const e=r().A.formatMessage(g.authError);throw i().f1(e),new Error(e)}}function b(e){const{environment:t,pattern:o,integration:n,parentCollectionStore:r,transaction:i}=e;if(!o.connected_relation_properties)throw new Error("Cannot create a connected relation collection without properties");const s=new(a().m)(t,(0,v().zP)({environment:t,table:c().Vl,spaceId:r.pointer.spaceId})),l={};o.connected_relation_sub_schemas&&(0,u().WP)(o.connected_relation_sub_schemas).map((([e,o])=>{const n=new(a().m)(t,(0,v().zP)({environment:t,table:c().Vl,spaceId:r.pointer.spaceId})),u={bot_id:void 0,external_object_id:void 0,uri:e,integration_id:void 0,is_placeholder:void 0,original_url:void 0,domain:void 0,external_schema:o,sync_state:void 0,pattern_name:void 0},p={id:n.id,version:0,space_id:(0,d().e)(r.pointer.spaceId),parent_table:c().Vl,parent_id:s.id,alive:!0,format:u,schema:{}};l[e]=n.id,f().zv({store:n,data:p,transaction:i})}));const p={id:s.id,version:0,space_id:(0,d().e)(r.pointer.spaceId),parent_table:c().Vl,parent_id:r.id,alive:!0,format:{attributes:[{id:"title",name:"title",type:"inline",format:{type:"title",section:"title"},values:[(0,y().Fe)({pattern:o,integration:n})]}],bot_id:void 0,external_object_id:void 0,uri:`notion://user-defined-collection/${n.id}/${o.name}`,integration_id:n.id,is_placeholder:void 0,original_url:void 0,domain:void 0,external_schema:o.connected_relation_properties,sync_state:void 0,pattern_name:o.name,related_external_object_uris_to_instance_ids:l},schema:{}};return f().zv({store:s,data:p,transaction:i}),s}async function x(e){const{bot:t,connected_relation_properties:o}=e;if(t.integration_id===s().Iy||t.integration_id===s().mn)return await async function(e){var t,o,n;const{environment:r,objectName:i,spaceId:a,bot:s}=e,c=await p().callApi({eventName:"describeSalesforceObject",environment:r,data:{spaceId:a,objectName:i,botId:s.id}});if("success"!==(null==c?void 0:c.type))return{error:l().qh.FAILED_TO_FETCH_SALESFORCE_PROPERTIES};var d,u;if((null===(t=c.data)||void 0===t?void 0:t.responseStatus)===l().qh.REAUTHENTICATION_REQUIRED||(null===(o=c.data)||void 0===o?void 0:o.responseStatus)===l().qh.NO_USER_API_ACCESS)return{error:`${null===(d=c.data)||void 0===d?void 0:d.responseStatus}:${null===(u=c.data)||void 0===u?void 0:u.userType}`};const m=null==c||null===(n=c.data)||void 0===n?void 0:n.properties;if(m){return{value:m.flatMap((e=>{const t=e.custom?e.label:e.relationshipName||e.label;return"User"===e.referenceTo||"Group"===e.referenceTo?[{id:e.name,name:t,isSelected:!1,type:e.type,metadata:e,isAlreadySynced:e.isAlreadySynced,isAdminNotAccessible:e.isAdminNotAccessible},{id:`mapped_${e.name}`,name:`${t} (Notion User)`,isSelected:!1,type:"person",metadata:e,isAlreadySynced:e.isAlreadySynced,isAdminNotAccessible:e.isAdminNotAccessible}]:[{id:"Name"===e.name?"title":e.name,name:"relation"===e.type?t:e.label,isSelected:!1,type:e.type,metadata:e,isAlreadySynced:e.isAlreadySynced,isAdminNotAccessible:e.isAdminNotAccessible}]}))}}return{error:l().qh.NO_PROPERTIES_FOUND}}(e);const n=[],r=o;for(const i in r){const e=r[i];null!=e&&e.name&&null!=e&&e.type&&n.push({id:i,name:e.name,isSelected:!1,type:e.type,metadata:{name:e.name,label:e.name,type:e.type,custom:!1},isAlreadySynced:!1})}return{value:n}}},198048:(e,t,o)=>{o.d(t,{C:()=>a});var n=o(296540),r=()=>o(51194),i=()=>o(610104);function a(){const e=(0,r().a)(),[t,o]=(0,n.useState)(0),a=(0,n.useCallback)((()=>{e.current&&o(t+1)}),[t]);return[(0,n.useCallback)((()=>i().Gt.postRender(a)),[a]),t]}},200424:(e,t,o)=>{e.exports=o.p+"9ade71d75a1c0e93.png"},203066:(e,t,o)=>{o.d(t,{N:()=>c});var n=o(296540);class r extends n.Component{getSnapshotBeforeUpdate(e){const t=this.props.childRef.current;if(t&&e.isPresent&&!this.props.isPresent){const e=this.props.sizeRef.current;e.height=t.offsetHeight||0,e.width=t.offsetWidth||0,e.top=t.offsetTop,e.left=t.offsetLeft}return null}componentDidUpdate(){}render(){return this.props.children}}function i({children:e,isPresent:t}){const o=(0,n.useId)(),i=(0,n.useRef)(null),a=(0,n.useRef)({width:0,height:0,top:0,left:0});return(0,n.useInsertionEffect)((()=>{const{width:e,height:n,top:r,left:s}=a.current;if(t||!i.current||!e||!n)return;i.current.dataset.motionPopId=o;const l=document.createElement("style");return document.head.appendChild(l),l.sheet&&l.sheet.insertRule(`\n          [data-motion-pop-id="${o}"] {\n            position: absolute !important;\n            width: ${e}px !important;\n            height: ${n}px !important;\n            top: ${r}px !important;\n            left: ${s}px !important;\n          }\n        `),()=>{document.head.removeChild(l)}}),[t]),n.createElement(r,{isPresent:t,childRef:i,sizeRef:a},n.cloneElement(e,{ref:i}))}const a=({children:e,initial:t,isPresent:r,onExitComplete:a,custom:l,presenceAffectsLayout:c,mode:d})=>{const u=(0,o(328601).M)(s),p=(0,n.useId)(),m=(0,n.useMemo)((()=>({id:p,initial:t,isPresent:r,custom:l,onExitComplete:e=>{u.set(e,!0);for(const t of u.values())if(!t)return;a&&a()},register:e=>(u.set(e,!1),()=>u.delete(e))})),c?void 0:[r]);return(0,n.useMemo)((()=>{u.forEach(((e,t)=>u.set(t,!1)))}),[r]),n.useEffect((()=>{!r&&!u.size&&a&&a()}),[r]),"popLayout"===d&&(e=n.createElement(i,{isPresent:r},e)),n.createElement(o(786719).t.Provider,{value:m},e)};function s(){return new Map}const l=e=>e.key||"";const c=({children:e,custom:t,initial:r=!0,onExitComplete:i,exitBeforeEnter:s,presenceAffectsLayout:c=!0,mode:d="sync"})=>{(0,o(285238).V)(!s,"Replace exitBeforeEnter with mode='wait'");const u=(0,n.useContext)(o(29473).L).forceRender||(0,o(198048).C)()[0],p=(0,o(51194).a)(),m=function(e){const t=[];return n.Children.forEach(e,(e=>{(0,n.isValidElement)(e)&&t.push(e)})),t}(e);let f=m;const v=(0,n.useRef)(new Map).current,h=(0,n.useRef)(f),y=(0,n.useRef)(new Map).current,g=(0,n.useRef)(!0);if((0,o(525128).E)((()=>{g.current=!1,function(e,t){e.forEach((e=>{const o=l(e);t.set(o,e)}))}(m,y),h.current=f})),(0,o(757491).l)((()=>{g.current=!0,y.clear(),v.clear()})),g.current)return n.createElement(n.Fragment,null,f.map((e=>n.createElement(a,{key:l(e),isPresent:!0,initial:!!r&&void 0,presenceAffectsLayout:c,mode:d},e))));f=[...f];const S=h.current.map(l),b=m.map(l),x=S.length;for(let o=0;o<x;o++){const e=S[o];-1!==b.indexOf(e)||v.has(e)||v.set(e,void 0)}return"wait"===d&&v.size&&(f=[]),v.forEach(((e,o)=>{if(-1!==b.indexOf(o))return;const r=y.get(o);if(!r)return;const s=S.indexOf(o);let g=e;if(!g){const e=()=>{v.delete(o);const e=Array.from(y.keys()).filter((e=>!b.includes(e)));if(e.forEach((e=>y.delete(e))),h.current=m.filter((t=>{const n=l(t);return n===o||e.includes(n)})),!v.size){if(!1===p.current)return;u(),i&&i()}};g=n.createElement(a,{key:l(r),isPresent:!1,onExitComplete:e,custom:t,presenceAffectsLayout:c,mode:d},r),v.set(o,g)}f.splice(s,0,g)})),f=f.map((e=>{const t=e.key;return v.has(t)?e:n.createElement(a,{key:l(e),isPresent:!0,presenceAffectsLayout:c,mode:d},e)})),n.createElement(n.Fragment,null,v.size?f:f.map((e=>(0,n.cloneElement)(e))))}},212473:(e,t,o)=>{o.r(t),o.d(t,{arrowUpRightSquareIcon:()=>i,iconDefinition:()=>r});o(296540);var n=o(474848);const r={viewBox:"0 0 20 20",fittedViewBox:"3.12 3.12 13.75 13.75",svg:(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("path",{d:"M7.875 7c0-.345.28-.625.625-.625H13c.345 0 .625.28.625.625v4.5a.625.625 0 1 1-1.25 0V8.509l-5.12 5.12a.625.625 0 1 1-.884-.883l5.12-5.121H8.5A.625.625 0 0 1 7.875 7"}),(0,n.jsx)("path",{d:"M3.125 5.25c0-1.174.951-2.125 2.125-2.125h9.5c1.174 0 2.125.951 2.125 2.125v9.5a2.125 2.125 0 0 1-2.125 2.125h-9.5a2.125 2.125 0 0 1-2.125-2.125zm2.125-.875a.875.875 0 0 0-.875.875v9.5c0 .483.392.875.875.875h9.5a.875.875 0 0 0 .875-.875v-9.5a.875.875 0 0 0-.875-.875z"})]})},i=(0,o(340498).wt)("arrowUpRightSquare",r,"default")},229508:(e,t,o)=>{o.d(t,{a:()=>i});var n=()=>o(907258),r=()=>o(590526);function i(){return(0,r().O$)(n().AppStoreSidebarSpaceViewStore)}},241319:(e,t,o)=>{o.d(t,{y:()=>i});o(898992),o(672577);var n=()=>o(534177),r=()=>o(239381);function i(e){var t;const{actionModels:o,id:i}=e,a=(0,r().y5)(i),s="action"===a.source?o.find((e=>e.id===a.action_id)):void 0,l=(0,n().O9)(s)&&s.isType("create_page")?null===(t=s.getConfig())||void 0===t?void 0:t.collection:void 0;return{automationValueInfo:a,collectionPointer:l,actionModel:s}}},243331:(e,t,o)=>{o.d(t,{K_:()=>r,Lf:()=>a});var n=()=>o(206267);function r(){return{currentScreen:"none",status:"not_started",isBackendConnected:!1,externalSourceName:void 0,sessionId:n().JW(),analyticsFrom:"unknown",isConnected:!1,isPersonalAuthComplete:!1,isDisconnecting:!1,isLoaded:!1,isNotionMailProhibited:!1}}class i extends(()=>o(757695))().Store{getInitialState(){return r()}}const a=new i;(0,o(852832).exposeDebugValue)("notionMailAIConnectorStore",a)},245720:(e,t,o)=>{o.d(t,{W:()=>n});const n=(0,o(69708).YK)({done:{id:"modal.doneButton",defaultMessage:"Done"},cancel:{id:"modal.cancelButton",defaultMessage:"Cancel"},back:{id:"modal.backButton",defaultMessage:"Back"}})},246679:(e,t,o)=>{o.d(t,{VK:()=>r,gv:()=>a});var n=()=>o(206267);function r(){return{currentScreen:"none",status:"not_started",isBackendConnected:!1,externalSourceName:void 0,sessionId:n().JW(),analyticsFrom:"unknown",isConnected:!1,isPersonalAuthComplete:!1,isDisconnecting:!1,isLoaded:!1,isNotionCalendarProhibited:!1}}class i extends(()=>o(757695))().Store{getInitialState(){return r()}}const a=new i;(0,o(852832).exposeDebugValue)("notionCalendarAIConnectorStore",a)},255043:(e,t,o)=>{o.d(t,{O:()=>x,r:()=>_});o(898992),o(672577),o(581454);var n=o(296540),r=()=>o(401497),i=()=>o(249046),a=()=>o(250910),s=()=>o(807449),l=()=>o(546926),c=()=>o(631524),d=()=>o(302501),u=()=>o(890492),p=()=>o(81068),m=()=>o(663639),f=()=>o(736847),v=()=>o(324254),h=()=>o(676510),y=()=>o(534177),g=()=>o(608346),S=()=>o(419357),b=o(474848);function x(e){return(0,b.jsxs)(i().Ye,{alignItems:"center",style:{gap:4},children:[e.icon,(0,b.jsx)(d().A,{isSmall:e.isSmall,children:e.name})]})}function _(e){const{onSelectOption:t,options:o,currentOption:i,placeHolder:u,initialFocus:m,menuProps:f,iconOnly:g,inputProps:_,searchThreshold:M,selectorButtonStyle:T}=e,[C,k]=(0,n.useState)(""),I=o.find((({key:e})=>e===i)),A=(0,r().IS)((()=>({workspaceSelectorButton:{paddingTop:8,paddingBottom:8,paddingInlineStart:8,paddingInlineEnd:8,opacity:1,width:376,border:`1px solid ${h().$.light.gray[100]}`,justifyContent:"space-between",marginTop:8,marginBottom:8},teamspacePickerButton:{maxWidth:300},menuChevronDownIcon:{marginInlineStart:4}})),[]),j={..."workspace"===T?A.workspaceSelectorButton:{},..."teamspace"===T?A.teamspacePickerButton:{}};return(0,b.jsx)(a().A,{popupType:a().z.Popup,placementToOrigin:"bottom",alignmentToOrigin:e.alignmentToOrigin,originGap:4,renderOrigin:e=>(0,b.jsxs)(c().p,{...e,style:{color:i?void 0:h().$.light.gray[300],...j},children:[(0,b.jsx)(d().A,{style:{textOverflow:"ellipsis",fontSize:"14px",font:"SF Pro Text",color:i?void 0:"#ACABA9",lineHeight:"19.6px"},children:(g?null==I?void 0:I.icon:I&&(0,b.jsx)(x,{...I}))??u}),(0,b.jsx)(s().I,{icon:v().arrowChevronSingleDownSmallIcon,size:"xs",colorVariant:"secondary",style:A.menuChevronDownIcon})]}),render:e=>{const n=(0,b.jsx)(S().Ay,{style:{width:"100%",paddingTop:8,paddingBottom:2},onChange:e=>k(e.target.value),value:C,..._}),r={menuType:l().gu.Popup,width:376,left:50,header:(0,y().O9)(M)&&o.length>M?n:null,...f},a=o.map((({key:o,name:n,icon:r,searchTerm:a})=>({key:o,keywords:a??[],action:()=>{t(o),e.close()},render:e=>(0,b.jsx)(p().A,{...e,title:(0,b.jsx)(x,{name:n,icon:r}),shouldWrapCaption:!0,isChecked:i===o})})));return(0,b.jsx)(w,{menuOptions:r,menuItems:a,filterQuery:C,initialFocus:m})}})}function w({menuOptions:e,menuItems:t,filterQuery:o,initialFocus:n}){const r=(0,g().m)({sections:[{key:"dropdown.menuList",render:e=>(0,b.jsx)(f().A,{...e}),items:t}],filterQuery:o||void 0});return(0,b.jsx)(u().A,{...e,children:(0,b.jsx)(m().A,{type:m().O.Vertical,sections:r,initialFocus:n,style:{position:"relative",alignItems:"flex-end"}})})}},266685:(e,t,o)=>{o.d(t,{a:()=>l});o(296540);var n=()=>o(819121),r=()=>o(401497),i=()=>o(451306),a=()=>o(100622),s=o(474848);function l(e){const{disabled:t,checked:o,selectorSize:l}=e,[c,d]=(0,n().A)(),u=function(e){const{checked:t,disabled:o,isFocusVisible:n,selectorSize:i}=e;return(0,r().IS)((()=>({root:{position:"absolute",display:"flex",width:15,height:15,padding:5,margin:1.5,justifyContent:"center",alignItems:"center",gap:8,flexShrink:0,borderRadius:"50%",transition:"background 100ms ease-out",...t?{boxShadow:`0 0 0 1.5px ${o?a().Tj.background.tertiaryTranslucent:a().Tj.blue.background.accentPrimary}`,background:o?a().Tj.background.tertiaryTranslucent:a().Tj.blue.background.accentPrimary}:{boxShadow:`0 0 0 1.5px ${o?a().Tj.background.tertiaryTranslucent:a().Tj.border.strongTranslucent}`,background:a().Tj.background.primary},...n&&{boxShadow:a().Tj.buttonBlueFocusRing}},active:{background:t?a().Tj.blueButtonPressedBackground:a().Tj.buttonHoveredBackground},input:{opacity:0,width:"small"===i?14:18,height:"small"===i?14:18,...o?{pointerEvents:"none"}:{cursor:"pointer"}}})),[t,o,n,i])}({checked:o,disabled:t,isFocusVisible:d,selectorSize:l});return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("input",{ref:c,type:"radio",style:u.input,className:"radio-button",...e}),(0,s.jsx)("span",{...(0,i().ow)("custom-radio-button",u.root,t?{}:{pseudoActive:u.active})})]})}},278589:(e,t,o)=>{o.d(t,{N:()=>i});var n=()=>o(534177),r=()=>o(17680);function i(e){return"avatar"===e?r().eQ:"xsmall"===e?18:"xsmall_plus"===e?24:"small"===e?28:"small_plus"===e?32:"medium"===e?36:"medium_plus"===e?44:"medium_large"===e?48:"large"===e?50:"large_plus"===e?64:"xlarge"===e?94:"plans"===e?20:"deep_dive"===e?16:"upsell_banner"===e?74:"personalization_modal"===e?96:(0,n().HB)(e)}},279900:(e,t,o)=>{function n(e){let t,o,n;return async(...r)=>t?(n=r,o||(o=t.then((()=>(o=void 0,t=e(...n),t))),o)):(t=e(...r),t)}o.d(t,{A:()=>n})},298697:(e,t,o)=>{o.d(t,{A:()=>l});o(581454);var n=o(296540),r=()=>o(401497),i=()=>o(874832),a=()=>o(100622),s=o(474848);function l({paragraphs:e}){const t=(0,r().IS)((()=>({skeletonRect:{borderRadius:4,backgroundColor:a().Tj.background.tertiaryTranslucent}})),[]),o=null==e?void 0:e.map(((e,o)=>{const r={height:e.lineHeight,marginTop:e.lineMargin,marginBottom:e.lineMargin},a={marginTop:e.sectionMargin,marginBottom:e.sectionMargin},l=[...Array(e.repeat||1)].map(((o,n)=>(0,s.jsx)("div",{style:a,children:e.sectionWidths.map(((e,o)=>(0,s.jsx)(i().P,{style:{...t.skeletonRect,...r,width:`${e}%`}},o)))},n)));return(0,s.jsxs)(n.Fragment,{children:[" ",l," "]},o)}));return(0,s.jsxs)(s.Fragment,{children:[" ",o," "]})}},299177:(e,t,o)=>{o.d(t,{A:()=>i});class n extends(()=>o(757695))().Store{getInitialState(){return{}}}const r=new n;o(852832).exposeDebugValue("SpaceWorkflowTemplateInstanceMapStore",r);const i=r},320865:(e,t,o)=>{o.d(t,{A:()=>r});o(296540);var n=o(474848);const r=function(){return(0,n.jsx)(o(424400).Ay,{title:(0,n.jsx)(o(98126).k,{size:"default"}),titleStyle:{display:"flex",justifyContent:"center",alignItems:"center",width:"100%"}})}},326887:(e,t,o)=>{o.d(t,{$X:()=>i,H8:()=>a,x2:()=>r});var n=()=>o(534177);function r(e){return"event"===e||"recurrence"===e}function i(e){const t=e.getTrigger();return(0,n().O9)(t)&&r(t.type)}function a(e){return"event"===e?"event":"recurrence"===e?"recurrence":void(0,n().HB)(e)}},338862:(e,t,o)=>{o.r(t),o.d(t,{iconDefinition:()=>n,lockFillSmallIcon:()=>r});o(296540);const n={viewBox:"0 0 16 16",fittedViewBox:"3.24 1.67 9.51 12.3",svg:(0,o(474848).jsx)("path",{d:"M4.825 4.85a3.175 3.175 0 1 1 6.35 0v1.061a1.95 1.95 0 0 1 1.575 1.914v4.2a1.95 1.95 0 0 1-1.95 1.95H5.2a1.95 1.95 0 0 1-1.95-1.95v-4.2c0-.949.677-1.74 1.575-1.914zm1.1 1.025h4.15V4.85a2.075 2.075 0 0 0-4.15 0zm2.525 4.299a1.05 1.05 0 1 0-.9 0v.976a.45.45 0 0 0 .9 0z"})},r=(0,o(340498).wt)("lockFillSmall",n,"fillSmall")},344124:(e,t,o)=>{var n=o(444576);e.exports=function(e,t){var o=n[e],r=o&&o.prototype;return r&&r[t]}},344417:(e,t,o)=>{o.r(t),o.d(t,{iconDefinition:()=>n,magnifyingGlassSmallIcon:()=>r});o(296540);const n={viewBox:"0 0 16 16",fittedViewBox:"1.97 1.97 12.46 12.46",svg:(0,o(474848).jsx)("path",{d:"M7.1 1.975a5.125 5.125 0 1 0 3.155 9.164l3.107 3.107a.625.625 0 1 0 .884-.884l-3.107-3.107A5.125 5.125 0 0 0 7.1 1.975M3.225 7.1a3.875 3.875 0 1 1 7.75 0 3.875 3.875 0 0 1-7.75 0"})},r=(0,o(340498).wt)("magnifyingGlassSmall",n,"small")},348869:(e,t,o)=>{o.d(t,{g:()=>s});o(944114);var n=()=>o(792057),r=()=>o(785728),i=()=>o(532659),a=()=>o(753812);async function s(e){const{environment:t,onResponse:o,data:s,userId:l,tracking:c,abortSignal:d}=e,u=await a().callStreamApi({eventName:"runInferenceTranscript",environment:t,data:s,userId:l,tracking:c,abortSignal:d,headers:(0,r().WS)({spaceId:s.spaceId})});if("success"!==u.type)return null!=d&&d.aborted?{error:{message:"Aborted",code:0}}:(n().Qg(u),{error:{message:u.error.message,code:u.status}});const p=[];if(i().hS.is(u.data))for await(const n of u.data){if("error"===n.type)return{error:{message:n.message,code:n.errorCode}};null==o||o(n),p.push(n)}return{value:p}}},360576:(e,t,o)=>{o.r(t),o.d(t,{iconDefinition:()=>n,personFillSmallIcon:()=>r});o(296540);const n={viewBox:"0 0 16 16",fittedViewBox:"2.89 1.85 10.22 12.3",svg:(0,o(474848).jsx)("path",{d:"M8 1.85c-.925 0-1.673.382-2.179 1.012-.495.617-.73 1.435-.73 2.29 0 .856.235 1.674.73 2.291.506.63 1.255 1.012 2.18 1.012.924 0 1.672-.382 2.178-1.012.495-.617.73-1.435.73-2.29 0-.856-.235-1.674-.73-2.291C9.673 2.232 8.925 1.85 8 1.85m0 7.403c-2.175 0-4.115 1.06-4.94 2.672-.3.585-.165 1.179.19 1.594.34.396.873.63 1.43.63h6.64c.557 0 1.09-.234 1.43-.63.355-.415.49-1.01.19-1.594-.825-1.612-2.765-2.672-4.94-2.672"})},r=(0,o(340498).wt)("personFillSmall",n,"fillSmall")},375555:(e,t,o)=>{function n(e,t){const{device:o}=e;o.isAndroid&&t.focus(),t.select()}o.d(t,{G:()=>n})},390527:(e,t,o)=>{o.r(t),o.d(t,{DEFAULT_MAX_RECURRENCE_DUPLICATION_PER_TASK:()=>R,MAXIMUM_DAILY_RECURRENCES_IN_PATH:()=>w,MAXIMUM_NESTED_RECURRENCE_LEVEL:()=>_,MAX_RECURRENCE_INTERVAL:()=>y,MAX_RECURRENCE_NUMBER_OF_RUNS:()=>g,RRULE_WEEKDAYS_MAP:()=>h,adjustedStartDateIfPossible:()=>T,areRecurrenceSchedulesEqual:()=>P,convertFromUnpersistedRecurrenceConfig:()=>V,convertToUnpersistedRecurrenceConfig:()=>E,getFormattedEndCondition:()=>j,getFormattedNextRecurrenceTime:()=>A,getNewEndTimestamp:()=>B,getNextDateUtc:()=>I,getRecurrenceAfter:()=>C,isRunningBetweenMidnightAnd3AM:()=>k,isValidRecurrenceInterval:()=>S,isValidRecurrenceNumberOfRuns:()=>b,rruleFromRecurrence:()=>x,templateAncestorsViolateRecurrenceNesting:()=>M});o(898992),o(354520),o(581454);var n=()=>o(906745);o(944114);function r(e,...t){if(0===t.length)return e.map((e=>[e]));const o=[];for(const n of e)o.push(...r(t[0],...t.slice(1)).map((e=>[n,...e])));return o}var i=()=>o(496603),a=()=>o(534177),s=()=>o(720665),l=()=>o(597777),c=()=>o(869190),d=()=>o(416504),u=()=>o(402390);class p extends(()=>o(896346))().p3{constructor(e,t){super(e,t)}after(e,t){return super.after(e,t)}}var m=()=>o(912720);const f=(0,o(69708).YK)({dateAtTime:{id:"automations.recurrenceHelpers.dateAtTime",defaultMessage:"{date} at {time}"},dateBetweenMidnightAnd3AM:{id:"automations.recurrenceHelpers.dateBetweenMidnightAnd3AM",defaultMessage:"{date} between 12–3 AM"},numberEndConditionDescription:{id:"automations.recurrenceHelpers.numberEndConditionDescription",defaultMessage:"{number, plural, one {After {number} run} other {After {number} runs}}"},noEndCondition:{id:"automations.recurrenceHelpers.noEndCondition",defaultMessage:"Never"}}),v={hour:p.HOURLY,day:p.DAILY,week:p.WEEKLY,month:p.MONTHLY,year:p.YEARLY},h={MO:p.MO,TU:p.TU,WE:p.WE,TH:p.TH,FR:p.FR,SA:p.SA,SU:p.SU},y=99,g=999;function S(e){return(0,s().Et)(e)&&Number.isInteger(e)&&e>0&&e<=y}function b(e){return(0,s().Et)(e)&&Number.isInteger(e)&&e>0&&e<=g}function x(e){const{start_date:t,frequency:o,interval:n,weekdays:i,timezone:s,hour:c,minute:d}=e,u=(0,l().eU)(t);"hour"===o&&u.setUTCHours(c??0,d??0,0,0);const m="week"===o&&i?i.map((e=>h[e])):void 0,f={};return(0,a().O9)(e.end_condition)&&("date"===e.end_condition.type?f.until=(0,l().eU)(e.end_condition.end_at):"number"===e.end_condition.type?f.count=e.end_condition.number_of_occurrences:(0,a().HB)(e.end_condition)),"month"===e.frequency&&(0,a().O9)(e.monthly_restriction)&&("monthdays"===e.monthly_restriction.type?f.bymonthday=e.monthly_restriction.monthdays:"weekdays_in_month"===e.monthly_restriction.type?f.byweekday=r(e.monthly_restriction.weekdays,e.monthly_restriction.week_numbers).map((([e,t])=>h[e].nth(t))):(0,a().HB)(e.monthly_restriction)),new p({freq:v[o],dtstart:u,interval:n,byweekday:m,tzid:"hour"===o?void 0:s,..."hour"===o?{}:{byhour:c??0,byminute:d??0,bysecond:0},...f})}const _=1,w=1;function M(e){var t;if(0===e.length)return{violatesConstraint:!1,templateNestingExceedsMaxDepth:!1,ancestorHasDailyTemplate:!1,nestedDepthOfAutomationAncestors:void 0,immediateAncestorRecurrenceType:void 0};const o=e.filter((e=>{var t;return"day"===(null===(t=e.getRecurrence())||void 0===t?void 0:t.frequency)})),n=e.length,r=null===(t=e[0].getRecurrence())||void 0===t?void 0:t.frequency,i=n>_,a=o.length>=w;return{violatesConstraint:i||a,templateNestingExceedsMaxDepth:i,ancestorHasDailyTemplate:a,nestedDepthOfAutomationAncestors:n,immediateAncestorRecurrenceType:r}}function T(e){var t;const{recurrence:o,afterDate:r}=e;if("number"===(null===(t=o.end_condition)||void 0===t?void 0:t.type)||o.start_date>=r)return o;let i=n().DateTime.fromMillis(o.start_date,{zone:"utc"});const a=n().DateTime.fromMillis(r,{zone:"utc"});switch(o.frequency){case"hour":{const e=Math.floor(a.diff(i,"hours").hours/o.interval);i=i.plus({hours:e*o.interval});break}case"year":{const e=Math.floor(a.diff(i,"years").years/o.interval);i=i.plus({years:e*o.interval});break}case"month":{const e=Math.floor(a.diff(i,"months").months/o.interval);i=i.plus({months:e*o.interval});break}case"week":{const e=Math.floor(a.diff(i,"weeks").weeks/o.interval);i=i.plus({weeks:e*o.interval});break}case"day":{const e=Math.floor(a.diff(i,"days").days/o.interval);i=i.plus({days:e*o.interval});break}}return{...o,start_date:(0,l().DH)(i.toMillis())}}function C(e){const{recurrence:t,afterDate:o}=e;if((0,m().wt)(t)){const e=(0,l().l1)(o);return t.start_date>=e?new Date(t.start_date):void 0}{const e=x(T({recurrence:t,afterDate:o})).after((0,l().eU)(o));if(!e)return;return(0,l().h1)(e)}}function k(e){return 0===e.hour||1===e.hour||2===e.hour}function I(e){return x(e).after((0,l().eU)((0,l().Rz)()))||void 0}function A(e){const{recurrence:t,intl:o}=e,r=I(V(t));if(!r)return;const i=k(t),a=n().DateTime.fromJSDate(r).toUTC().setZone("local",{keepLocalTime:!0}).setLocale((0,u().H)(o)).setZone(t.timezone),s=(0,c().Yq)({date:a,dateFormat:"relative",allowRelativeDates:!0,intl:o,shortenDate:!0});if(i)return o.formatMessage(f.dateBetweenMidnightAnd3AM,{date:s});{let e=a.toLocaleString(n().DateTime.TIME_SIMPLE);return t.timezone!==(0,d().P)()&&(e+=` ${a.toFormat("ZZZZ")}`),o.formatMessage(f.dateAtTime,{date:s,time:e})}}function j(e,t){return(0,a().O9)(e)?"number"===e.type?t.formatMessage(f.numberEndConditionDescription,{number:e.number_of_occurrences}):"date"===e.type?(0,c().Yq)({date:n().DateTime.fromMillis(e.end_at),dateFormat:"relative",allowRelativeDates:!0,intl:t,shortenDate:!0}):void(0,a().HB)(e):t.formatMessage(f.noEndCondition)}const R=100;function E(e){return{...e,start_date:(0,l().l1)(e.start_date),end_condition:e.end_condition?"number"===e.end_condition.type?e.end_condition:"date"===e.end_condition.type?{type:"date",end_at:(0,l().l1)(e.end_condition.end_at)}:(0,a().HB)(e.end_condition):void 0}}function B(e,t,o){return e.plus(o-t)}function O(e,t){const o=n().DateTime.fromMillis(t.end_at).set({hour:e.hour??0,minute:e.minute??0});return{type:"date",end_at:(0,l().Rz)(o.toJSDate())}}function V(e){return{...e,start_date:(0,l().Rz)(new Date(e.start_date)),end_condition:e.end_condition?"number"===e.end_condition.type?e.end_condition:"date"===e.end_condition.type?O(e,e.end_condition):(0,a().HB)(e.end_condition):void 0}}function P(e,t){const o=i().fN(e,(e=>void 0!==e)),n=i().fN(t,(e=>void 0!==e));return i().n4(o,n)}},395546:(e,t,o)=>{o.r(t),o.d(t,{iconDefinition:()=>r,infoCircleSmallIcon:()=>i});o(296540);var n=o(474848);const r={viewBox:"0 0 16 16",fittedViewBox:"1.87 1.87 12.25 12.25",svg:(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("path",{d:"M7.9 4.425a.775.775 0 1 0 0 1.55.775.775 0 0 0 0-1.55M6.95 6.5a.625.625 0 1 0 0 1.25h.425V10H6.95a.625.625 0 1 0 0 1.25h2.1a.625.625 0 1 0 0-1.25h-.425V7.125A.625.625 0 0 0 8 6.5z"}),(0,n.jsx)("path",{d:"M8 1.875a6.125 6.125 0 1 0 0 12.25 6.125 6.125 0 0 0 0-12.25M3.125 8a4.875 4.875 0 1 1 9.75 0 4.875 4.875 0 0 1-9.75 0"})]})},i=(0,o(340498).wt)("infoCircleSmall",r,"small")},404905:(e,t,o)=>{o.d(t,{j:()=>c});var n=o(296540),r=()=>o(484714),i=()=>o(401497),a=()=>o(284371),s=()=>o(26697);var l=o(474848);function c(e){const{children:t,style:o,overlayContainerZIndex:c,placement:d="bottom",tooltipStyle:u}=e,{isSafari:p}=(0,r().Y0)(),m=(0,n.useRef)(null),f=function(e){const[t,o]=(0,n.useState)(!1);return(0,n.useEffect)((()=>{const{current:t}=e;if(!t)return void o(!1);const n="ResizeObserver"in window?new ResizeObserver((([e])=>{o(e.target.scrollWidth>e.target.clientWidth)})):void 0;return null==n||n.observe(t),()=>null==n?void 0:n.unobserve(t)}),[]),t}(m),v=(0,i().IS)((()=>({overflowText:{...a().RC,...o}})),[o]);return(0,l.jsx)(s().m,{delayThreshold:500,placement:d,textWrap:!0,style:u,overlayContainerZIndex:c,forceVisibleState:!(p||!f)&&void 0,renderTooltip:()=>f?t:void 0,render:e=>(0,l.jsx)("div",{ref:m,style:v.overflowText,...e,children:t})})}},419357:(e,t,o)=>{o.d(t,{Ay:()=>b,KF:()=>S,LG:()=>h,Zf:()=>g,yD:()=>y});var n=o(296540),r=()=>o(484714),i=()=>o(401497),a=()=>o(718827),s=()=>o(695115),l=()=>o(31511),c=()=>o(546926),d=()=>o(424400),u=()=>o(340498),p=()=>o(100622),m=()=>o(496603),f=()=>o(284371),v=o(474848);const h=30,y=28;function g(e){const{icon:t}=e;return t({fill:p().Tj.icon.secondary,width:u().Ev.sm,height:u().Ev.sm,flexGrow:0,flexShrink:0})}function S(e){const t=(0,r().WS)(),o=(0,i().eP)(),n=(0,i().IS)((()=>({outlineButton:{...(0,a().qq)({shape:"default",size:"sm",hasIconOnly:!0,isButtonGapEnabled:!0}),fontWeight:f().Wy.medium,lineHeight:1.2,border:`1px solid ${p().Tj.border.primaryTranslucent}`,background:e.hasBackground?p().Tj.background.primary:void 0},outlineButtonHovered:{background:p().Tj.background.secondary},outlineButtonPressed:{background:(0,a().yZ)({color:p().Tj.background.primary,mode:o})}})),[e.hasBackground,o]);return(0,v.jsx)(s().A,{size:"xs",colorVariant:"primary",...e,ariaLabel:e.ariaLabel,style:{...n.outlineButton,...e.style,height:t?h:y,width:t?h:y},hoveredStyle:n.outlineButtonHovered,pressedStyle:n.outlineButtonPressed})}const b=n.forwardRef((function({preventCaptureArrowShortcuts:e,preventCaptureDeleteWhenEmpty:t,preventCaptureClipboardShortcuts:r,preventCaptureSpacebarWhenEmpty:i,...a},s){const{left:l,right:u,inputLeft:p,inputRight:f,inputRightStyle:h,disableInput:y,inputOuterStyle:g,rightMobileEditLabel:S,mobileKeyboardOnDismiss:b,style:x,value:M,onChange:T,autosize:C,autosizeMinHeight:k,autosizeMaxHeight:I,customElementAttributes:A,disabled:j,format:R,id:E,placeholder:B,type:O,autoFocus:V,focus:P,focusInitial:D,focusAfterAnimation:U,forceShowClearButton:N,ignoreKeyboardMode:F,inputElementAttributes:L,inputStyle:z,isRightLastElementOfInput:W,maxlength:H,min:q,max:K,selectAll:G,showClearButton:$,suppressFocusRing:Y,textarea:Q,textareaSubmitOnEnter:Z,onBlur:X,onCancel:J,onClearButtonClick:ee,onClick:te,onFocus:oe,onKeyDown:ne,onSubmit:re,...ie}=a,[ae,se]=(0,n.useState)((()=>Boolean(P||D)));(0,n.useEffect)((()=>{void 0!==P&&se(P)}),[P]);const le=e?void 0:m().D_,ce=!t||M.length>0?m().D_:void 0,de=r?void 0:m().D_,ue=!i||M.length>0?m().D_:void 0,pe=(0,c().Tf)(),me=(0,n.useContext)(c().xu),fe=(0,n.useRef)(null),ve={value:M,onChange:T,autosize:C,autosizeMinHeight:k,autosizeMaxHeight:I,customElementAttributes:A,disabled:j,format:R,id:E,placeholder:B,type:O,autoFocus:V,focus:P,focusInitial:D,focusAfterAnimation:U,forceShowClearButton:N,ignoreKeyboardMode:F,inputElementAttributes:L,inputStyle:z,isRightLastElementOfInput:W,maxlength:H,min:q,max:K,selectAll:G,showClearButton:$,suppressFocusRing:Y,textarea:Q,textareaSubmitOnEnter:Z,onBlur:X,onCancel:J,onClearButtonClick:ee,onClick:te,onFocus:oe,onKeyDown:ne,onSubmit:re};return(0,v.jsx)(o(782482).N,{debugName:"InputMenuItem",capture:!0,onUntab:m().D_,onTab:m().D_,onSelectAll:m().D_,onRedo:m().D_,onUndo:m().D_,onToggleBold:m().D_,onToggleItalics:m().D_,onToggleCode:m().D_,onCut:de,onCopy:de,onPaste:de,onKeypress:m().D_,onLeft:le,onRight:le,onDelete:ce,onBackspace:ce,onSpace:ue,children:o(726637).A.isMobile?(0,v.jsxs)(v.Fragment,{children:[(0,v.jsx)(d().Ay,{ref:s,...ie,itemMarginLeft:pe?8:void 0,style:x,title:(0,v.jsx)(w,{ref:fe,left:l,right:u,inputLeft:p,inputRight:f,inputRightStyle:h,disableInput:y,inputOuterStyle:g,rightMobileEditLabel:S,isFocused:ae,setIsFocused:se,...ve})}),(0,v.jsx)(o(797324).A,{show:ae&&me.menuType!==c().gu.ActionSheet,onDismiss:b,inputRef:fe})]}):(0,v.jsx)(d().Ay,{ref:s,...ie,left:l,right:u,isTokenTitle:!0,title:(0,v.jsx)(_,{ref:fe,disableInput:y,inputOuterStyle:g,inputRight:f,inputRightStyle:h,inputLeft:p,...ve}),style:{paddingTop:4,paddingBottom:4,...x}})})}));function x({rightMobileEditLabel:e,inputRef:t}){const i=(0,r().v3)(),s=(0,n.useCallback)((e=>{e.preventDefault();const n=t.current;n&&(0,o(375555).G)(i,n)}),[i,t]);return(0,v.jsx)(a().Ay,{onClick:s,style:{color:p().Tj.text.secondary},children:e})}const _=n.forwardRef((function(e,t){const{disabled:o,disableInput:n,inputOuterStyle:r,inputRight:i,inputRightStyle:a,inputLeft:s,min:c,textarea:d,...u}=e;return(0,v.jsx)(l().A,{...u,ref:t,disabled:o||n,style:{height:d?void 0:28,padding:"3px 6px",...r},left:s,right:i,rightStyle:a,min:c,textarea:d})})),w=n.forwardRef((function(e,t){const{left:r,right:i,inputLeft:a,inputRight:s,inputRightStyle:c,disableInput:d,inputOuterStyle:u,rightMobileEditLabel:p,isFocused:m,setIsFocused:f,disabled:h,showClearButton:y,onBlur:g,onFocus:S,...b}=e,_=(0,n.useCallback)((e=>{f(!1),g&&g(e)}),[g,f]),w=(0,n.useCallback)((e=>{f(!0),S&&S(e)}),[S,f]),M=(0,n.useRef)(null),T=(0,o(93583).A)(M,t),C=p&&!m?(0,v.jsx)(x,{rightMobileEditLabel:p,inputRef:M}):null;return(0,v.jsx)(l().A,{...b,ref:T,format:"transparent",style:{fontSize:16,...u},onFocus:w,onBlur:_,showClearButton:!1!==y,disabled:h||d,left:a||r,right:C||s||i,rightStyle:c})}))},422540:(e,t,o)=>{o.d(t,{$0:()=>y,Fx:()=>M,Ge:()=>f,I3:()=>p,Kj:()=>_,PP:()=>T,TK:()=>C,Yy:()=>u,aE:()=>k,cQ:()=>w,kH:()=>v,m7:()=>m,nq:()=>b,nv:()=>g,tj:()=>h});o(898992),o(354520),o(737550);var n=()=>o(496603),r=()=>o(534177),i=()=>o(381283),a=()=>o(898244),s=()=>o(651124),l=()=>o(349835),c=()=>o(390066);const d={checkbox:!0,date:!0,email:!0,multi_select:!0,number:!0,person:!0,phone_number:!0,relation:!0,select:!0,status:!0,text:!0,title:!0,url:!0,auto_increment_id:!1,button:!1,created_by:!1,created_time:!1,file:!1,formula:!1,last_edited_by:!1,last_edited_time:!1,last_visited_time:!1,location:!1,rollup:!1,verification:!1,place:!1},u={checkbox:[{type:"checkbox"}],date:[{type:"date"}],email:[{type:"text"}],multi_select:[{type:"text"},{of:{type:"text"},type:"array"}],number:[{type:"number"}],person:[{type:"person"},{of:{type:"person"},type:"array"}],phone_number:[{type:"text"}],relation:[{type:"block"},{of:{type:"block"},type:"array"}],select:[{type:"text"},{of:{type:"text"},type:"array"}],status:[{type:"text"},{of:{type:"text"},type:"array"}],text:void 0,title:void 0,url:[{type:"text"}]};function p(e){return Boolean(d[e.type]&&!(0,a().UU)(e)&&(!(0,a().$M)(e)||void 0===(0,a().om)(e)))}function m(e){const{collectionFormat:t,collectionSchema:o,filter:i,sort:l,sourcePropertyIds:d}=e,u=(d??(0,r().uv)(o)).filter(((t,n,r)=>{const s=o[t];return!(!s||!p(s))&&(("relation"!==s.type||!e.restrictCrossSpace||!(0,a().o2)(e.spaceId,s))&&(!i||i([t,s],n,o)))}));if(0===u.length)return[];if(!t||!1===l)return u;const m=(0,c().L)(t,o,void 0,s().jf.Page).collection_page_properties||[];return n().Ul(u,(e=>m.findIndex((t=>t.property===e))))}function f(e){const{collectionFormat:t,collectionSchema:o,sort:a}=e,l=(0,r().uv)(o).filter(((e,t,n)=>{const r=o[e];return!(!r||!(0,i().J)(r))}));if(0===l.length)return[];if(!t||!1===a)return l;const d=(0,c().L)(t,o,void 0,s().jf.Page).collection_page_properties||[];return n().Ul(l,(e=>d.findIndex((t=>t.property===e))))}function v(e){return e.type===l().M9.InvalidCharacter?{type:e.type,character:e.character}:e.type===l().M9.TokenExpected?{type:e.type,token:e.token}:e.type===l().uW.MissingSchemaPropertyOnThisRow||e.type===l().uW.MissingSchemaPropertyOnCollection?{type:e.type,collectionId:e.collectionId,property:e.property,errorSource:e.errorSource}:e.type===l().uW.ThisRowBlockPropertyMismatchCollection?{type:e.type,thisRowCollection:e.thisRowCollection,errorSource:e.errorSource}:e.type===l().uW.MissingContextVariable?{type:e.type,valueId:e.valueId,errorSource:e.errorSource}:e.type===l().uW.FunctionCallTooFewArguments?{type:e.type,numArguments:e.numArguments,errorSource:e.errorSource}:e.type===l().uW.FunctionCallUnexpectedArgument?{type:e.type,parameterIndex:e.parameterIndex,errorSource:e.errorSource}:e.type===l().uW.FunctionCallArgumentWrongType?{type:e.type,argumentType:e.argumentType,libraryFunctionName:e.libraryFunction.name,parameterIndex:e.parameterIndex,errorSource:e.errorSource}:e.type===l().uW.MissingDataDependencyBlock?{type:e.type,blockPointer:e.blockPointer,node:e.node,errorSource:e.errorSource}:e.type===l().uW.MissingDataDependencyPerson?{type:e.type,personPointer:e.personPointer,errorSource:e.errorSource}:e.type===l().uW.MemberPropertyMismatchCollection?{type:e.type,blockCollection:e.blockCollection,errorSource:e.errorSource}:e.type===l().uW.DownstreamParseFailure?{type:e.type,collectionId:e.collectionId,property:e.property,errorSource:e.errorSource}:e.type===l().uW.ContextVariableWrongType?{type:e.type,valueId:e.valueId,expectedType:e.expectedType,resultType:e.resultType,errorSource:e.errorSource}:e.type===l().uW.DisallowedValueType?{type:e.type,expressionValue:e.expressionValue,allowedValueTypes:e.allowedValueTypes,errorSource:e.errorSource}:e.type===l().uW.LibraryFunctionExecutionError?{type:e.type,error:e.error,libraryFunctionName:e.libraryFunction.name,errorSource:e.errorSource}:"errorSource"in e?{type:e.type,errorSource:e.errorSource}:{type:e.type}}const h={checkbox:!0,date:!0,email:!0,multi_select:!0,number:!0,person:!0,phone_number:!0,relation:!0,select:!0,status:!0,text:!0,title:!0,url:!0,button:!1,file:!1,verification:!1,auto_increment_id:!1,created_by:!1,created_time:!1,formula:!1,last_edited_by:!1,last_edited_time:!1,last_visited_time:!1,location:!1,rollup:!1,place:!1};function y(e){return Boolean(h[e.type])}function g(e){const{collectionFormat:t,collectionSchema:o,filter:i,sort:l}=e,d=(0,r().uv)(o).filter(((e,t,n)=>{var r;const s=o[e];return!(!s||!h[s.type])&&((!(0,a().$M)(s)||null===(r=(0,a().om)(s))||void 0===r||!r.auto_update_on_edit)&&(!i||i([e,s],t,o)))}));if(0===d.length)return[];if(!t||!1===l)return d;const u=(0,c().L)(t,o,void 0,s().jf.Page).collection_page_properties||[];return n().Ul(d,(e=>u.findIndex((t=>t.property===e))))}const S={checkbox:!0,email:!0,multi_select:!0,number:!0,person:!0,phone_number:!0,relation:!0,select:!0,status:!0,text:!0,title:!0,url:!0,auto_increment_id:!1,button:!1,created_by:!1,created_time:!1,date:!1,file:!1,formula:!1,last_edited_by:!1,last_edited_time:!1,last_visited_time:!1,location:!1,rollup:!1,verification:!1,place:!1};function b(e){return S[e.type]}const x={checkbox:!0,created_by:!0,created_time:!0,date:!0,email:!0,multi_select:!0,number:!0,person:!0,phone_number:!0,relation:!0,select:!0,status:!0,text:!0,title:!0,url:!0,last_edited_by:!0,last_edited_time:!0,auto_increment_id:!1,button:!1,file:!1,formula:!1,last_visited_time:!1,location:!1,rollup:!1,verification:!1,place:!1};function _(e){return x[e.type]}function w(e){return 0===e}function M(e){return function(e){return"button_block"===e||"button_property"===e}(e)}function T(e){const{property:t,collectionSchema:o}=e;return!!o&&!o[t]}function C(e){const{collectionSchema:t,property:o,type:n}=e,r=null==t?void 0:t[o];return!r||("action"===n?!p(r):!h[r.type])}function k({automationTrigger:e,collectionSchema:t}){if("event"===(null==e?void 0:e.type)){const{pagesAdded:o,pagePropertiesEdited:n,source:i}=e.event;if(void 0===i)return!1;const a="some"===n.type&&n.some,s="all"===n.type&&n.all;if((a||s||[]).some((e=>T({collectionSchema:t,property:e.property})||C({collectionSchema:t,property:e.property,type:"trigger"}))))return!1;const l="some"===n.type&&(!(0,r().O9)(n.some)||0===n.some.length),c="all"===n.type&&(!(0,r().O9)(n.all)||0===n.all.length);if(!o&&("none"===n.type||l||c))return!1}else{if("recurrence"!==(null==e?void 0:e.type))return!1;if(!e.recurrence)return!1}return!0}},436525:(e,t,o)=>{o.d(t,{D:()=>u});var n=o(296540),r=()=>o(59226),i=()=>o(484714),a=()=>o(79926),s=()=>o(562984),l=()=>o(742734),c=()=>o(141465),d=o(474848);function u({userStore:e,suppressMouse:t,children:o,spaceStore:u}){const p=(0,n.useRef)(null),m=(0,l().E)({spaceStore:u,viewedUserId:null==e?void 0:e.id}),f=(0,r().X)("prefetch_extended_user_profiles"),v=m&&f,h=(0,a().fJ)(s().u.extendedUserProfileActions,{disabled:!v}),y=(0,i().v3)();(0,n.useEffect)((()=>{v&&"resolved"===h.status&&null!=e&&e.id&&u&&null!=u&&u.userId&&h.value.prefetchExtendedUserProfiles({spaceStore:u,actorUserId:u.userId,viewedUserIds:[e.id]},y)}),[v,null==e?void 0:e.id,u,m,y,h]);const g=(0,n.useCallback)((()=>{p.current&&e&&u&&!t&&c().A.setState({type:"user",store:e,domRect:p.current.getBoundingClientRect(),spaceStore:u})}),[e,u,t]),S=(0,n.useCallback)((()=>{c().A.setState(void 0)}),[]);return e&&m?(0,d.jsx)("div",{ref:p,onMouseEnter:m?g:void 0,onMouseLeave:m?S:void 0,children:o}):o}},448801:(e,t,o)=>{o.d(t,{i:()=>r});o(944114),o(517642),o(658004),o(733853),o(845876),o(432475),o(515024),o(731698);var n=()=>o(371562);n();function r(e,t){const o=n().create({arrays:{detectMove:!1,includeValueOnMove:!0}}).diff(e,t);if(!o)return{beforeOps:{},removeOps:new Set};let r=[],i=[];for(const n in o)"_t"!==n&&("_"===n[0]?r.push(parseInt(n.slice(1),10)):1===o[n].length&&i.push({index:parseInt(n,10),value:o[n][0]}));const a={},s=new Set,l=[...e];r=r.sort(((e,t)=>e-t));for(let n=r.length-1;n>=0;n--){const e=r[n],t=l.splice(e,1)[0];s.add(t)}i=i.sort(((e,t)=>e.index-t.index));for(let n=0;n<i.length;n++){const e=i[n];a[e.value]=l[e.index],l.splice(e.index,0,e.value)}return{beforeOps:a,removeOps:s}}},453697:(e,t,o)=>{o.d(t,{A:()=>p,n:()=>u});var n=o(296540),r=()=>o(590526),i=()=>o(401497),a=()=>o(849255),s=()=>o(807449),l=()=>o(798880),c=()=>o(100622),d=o(474848);function u(e){return(0,i().IS)((()=>({tooltipTextStyle:{color:c().Tj.text.inverseSecondary},tooltipAvatarContainer:{display:"flex",alignItems:"center",marginInlineEnd:8},tooltipContainer:{display:"flex",flexDirection:"row",padding:"4px 6px",alignItems:"center",...e},tooltipUserInfoContainer:{overflow:"hidden",textOverflow:"ellipsis"}})),[e])}const p=function(e){const{hasTooltip:t,showAvatarInTooltip:p,tooltipHeader:m,style:f,iconStyle:v,isOffline:h,borderStyle:y,avatarShouldShowShadow:g,initialOverrideStyle:S,tooltipOverrideStyle:b,userValue:x,userStore:_,avatar:w,type:M="avatar",delayThreshold:T,hasPersonHoverCard:C,avatarOutlineOffset:k}=e,I=(0,o(69708).tz)(),A=(0,r().O$)(o(907258).AppStoreSidebarSpaceStore),j=(0,o(792485).S)(),R=(0,r().K8)((()=>(0,o(876338).$)(j)??A),[j,A]),E=e.size??18,{initialStyle:B,avatarWrapStyle:O,avatarStyle:V,proxiedImageStyle:P,suspendedUserStyle:D}=(0,i().IS)((()=>({initialStyle:{boxSizing:"content-box",borderRadius:"100%",lineHeight:`${E}px`,width:E,height:E,overflow:"hidden",textAlign:"center",fontSize:Math.max(.4375*E,11),background:c().Tj.popoverBackground,userSelect:"none",WebkitUserSelect:"none",color:c().Tj.icon.secondary,opacity:h?.3:1,isolation:"auto",...v,...S},avatarWrapStyle:{background:c().Tj.background.primary,borderRadius:"100%",boxShadow:g?c().Tj.avatarBoxShadow:"none",outlineWidth:1,outlineStyle:y??"solid",outlineColor:c().Tj.border.secondaryTranslucent,outlineOffset:k??-1,...v},avatarStyle:{borderRadius:"100%",width:E,height:E,display:"flex",alignItems:"center",justifyContent:"center",userSelect:"none",WebkitUserSelect:"none",opacity:h?.3:1,...v},proxiedImageStyle:{width:E,height:E,...v},suspendedUserStyle:{boxSizing:"content-box",borderRadius:"100%",width:E-2,height:E-2,overflow:"hidden",background:c().Tj.suspendedUIUserAvatarBackground,userSelect:"none",WebkitUserSelect:"none",color:c().Tj.text.primary,opacity:h?.3:1,display:"flex",justifyContent:"center",alignItems:"center",...v}})),[S,g,y,h,E,v,k]),{tooltipTextStyle:U,tooltipAvatarContainer:N,tooltipContainer:F,tooltipUserInfoContainer:L}=u(b),z=(0,n.useMemo)((()=>_??(x?o(792071).Bj6.fromValue(l().oo,x):void 0)),[_,x]),W=(0,n.useMemo)((()=>z instanceof a().L?z:R&&z?a().L.createChildStore(R,{id:z.id,table:l().oo}):void 0),[z,R]),H=(0,r().K8)((()=>null==z?void 0:z.getFullName(I)),[z,I]),q=(0,r().K8)((()=>null==z?void 0:z.getDisplayName(I)),[z,I]),K=(0,r().K8)((()=>null==z?void 0:z.getEmail()),[z]),G=(0,r().K8)((()=>null==z?void 0:z.getProfilePhoto()),[z]),$=(0,r().K8)((()=>null==z?void 0:z.getIsSuspended()),[z]),Y=(0,o(742734).E)({spaceStore:R,viewedUserId:null==z?void 0:z.id})&&C,Q=()=>e.defaultAvatar??(0,d.jsx)(s().I,{icon:o(360576).personFillSmallIcon,size:"sm",colorVariant:"primary"}),Z=(e,t,n)=>{if(!e)return Q();const r={width:"100%",height:"100%",borderRadius:"100%",...n};return(0,d.jsx)(o(738471).A,{alt:t,src:e,enableLoadingShimmer:!0,style:r,placeholderStyle:r})},X=e=>(0,d.jsxs)("div",{style:F,children:[(0,d.jsx)("div",{style:N,children:te()}),(0,d.jsxs)("div",{style:L,children:[z?q:null==w?void 0:w.name,e?void 0:(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)("br",{}),z?(0,d.jsx)("span",{style:U,children:K}):null!=w&&w.email?(0,d.jsx)("span",{style:U,children:null==w?void 0:w.email}):null]})]})]}),J=()=>p?X():(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)("div",{children:m}),q,(0,d.jsx)("br",{}),z?(0,d.jsx)("span",{style:U,children:K}):void 0]}),ee=e=>{const t=o(634201).PE(e)[0].toUpperCase();return(0,d.jsx)("div",{style:O,children:(0,d.jsx)("div",{style:B,children:(0,d.jsx)("div",{children:t})})})},te=()=>{if(z){if($)return(0,d.jsx)("div",{style:O,children:(0,d.jsx)("div",{style:D,children:(0,d.jsx)(s().I,{icon:o(947086).personSlashIcon,size:E-2,colorVariant:"tertiary"})})});if(G)return(0,d.jsx)("div",{style:V,children:(0,d.jsx)(o(360083).A,{stripGoogleIconQuery:!0,url:G,isAuthenticated:!1,width:Math.max(Number(P.width),120),render:(e,t)=>Z(t,H,O)})});if(H)return ee(H);if(K)return ee(K)}else if(w){if(!w.type&&w.avatarUrl)return(0,d.jsx)("div",{style:O,children:(0,d.jsx)("div",{style:V,children:Z(w.avatarUrl,w.name)})});if(w.name)return ee(w.name);if(w.email)return ee(w.email)}return Q()};switch(M){case"avatar":{const e=(0,d.jsx)("div",{style:f,children:te()});return Y&&W&&R?(0,d.jsx)(o(436525).D,{userStore:W,spaceStore:R,children:e}):t?(0,d.jsx)(o(26697).m,{renderTooltip:J,placement:"bottom",alignment:"start",delayThreshold:T,render:t=>(0,d.jsx)("div",{style:f,"aria-label":q,...t,children:e})}):e}case"avatar-name":case"avatar-name-email":return X("avatar-name"===M);default:(0,o(534177).HB)(M)}}},460957:(e,t,o)=>{o.d(t,{E:()=>a});o(581454);var n=()=>o(201980),r=()=>o(718957),i=()=>o(29554);function a(e){const{multiSelection:t}=e;return(0,r().$W)(t).map((({store:e,selection:t})=>{const o=(0,n().RQ)(e.getValue()),r=(0,n().xbM)(o,t),{tokensInsideRange:a}=(0,n().AI5)(o,r.startIndex,r.endIndex);return(0,i().r4)(a,e)})).join("\n\n")}},462853:(e,t,o)=>{o.d(t,{l:()=>i});var n=()=>o(617871);const r={[n().e1]:"collection_connected_property_figma",[n().Hd]:"collection_connected_property_google_drive",[n().ob]:"collection_connected_property_github",[n().k0]:"collection_connected_property_zendesk",[n().bh]:"collection_synced_database_github",[n().MN]:"collection_synced_database_asana",[n().Fo]:"collection_synced_database_gitlab",[n().me]:"collection_synced_database_jira",[n().F6]:"collection_synced_database_jira_workspace",[n().Fv]:"collection_synced_database_jira_datacenter",[n().mn]:"collection_synced_database_salesforce_workspace"};function i(e){if(e)return r[e]}},466721:(e,t,o)=>{o.r(t),o.d(t,{STORE_MAX_LIMIT:()=>x,initializePageVisit:()=>_,updatePageVisits:()=>w});o(898992),o(354520),o(581454);var n=()=>o(907258),r=()=>o(770063),i=()=>o(273648),a=()=>o(90023),s=()=>o(179034),l=()=>o(874852),c=()=>o(559653),d=()=>o(161479),u=()=>o(743246),p=()=>o(496603),m=()=>o(534177),f=()=>o(211716),v=()=>o(299545),h=()=>o(761309),y=()=>o(41161),g=()=>o(129286),S=()=>o(753812);const b=32,x=100;async function _(e,t){await n().default.waitUntilRendered();const{fromPageRefresh:o,blockStore:i,pageVisitStore:p,timestamp:m,type:b}=t,x=e.currentUser.id;if(void 0===x||o)return;t.blockStore.id!==p.state.pageId&&p.setState({...p.getInitialState(),pageId:t.blockStore.id});const _=(0,r().v3)(i,{table:c().F9,id:(0,c().$5)({parent_id:i.id,user_id:x}),spaceId:(0,d().e)(i.pointer.spaceId)}),w=(0,r().v3)(i,{table:l().ou,id:(0,c().$5)({parent_id:i.id,user_id:x}),spaceId:(0,d().e)(i.pointer.spaceId)});if(await g().transactionQueue.awaitRecordTransaction({table:s().ev,id:i.id}),await(0,v().hS)(i),!i.canRead()||(0,h().qb)(e,i,i.getSpaceStore()))return;await _.load(),await w.load();const T=_.getKeyStore("visited_at").getValue(),C=w.getKeyStore("exited_at").getValue(),k=await async function(e,t,o,n,r){const{id:i}=e.currentUser,s=t.id,l=t.getSystemBlockTypeStore().getValue();if((0,a().kR)(l))return{type:"skipped"};const c=t.getParentTable()===u().C0;if(c)return{type:"skipped"};if(i&&"passive"!==r){var d;null==e||null===(d=e.mobileNative)||void 0===d||d.recordPageVisit(i,{blockId:s,spaceId:o,visitedAt:n}),y().A.recordVisit({id:s,systemBlockType:l,type:f().ig.Default,currentUserId:i})}const p=await S().callApi({eventName:"recordPageVisit",environment:e,data:{block:{id:s,spaceId:o},timestamp:n,type:r},headers:{recordId:s,spaceId:o}});return p}(e,i,(0,d().e)(i.pointer.spaceId),m,b);if("skipped"===k.type)return;if("failed"===k.type)return;const I=M({pageVisits:k.data.pageVisits,currentState:p.state,blockStore:i,totalCount:p.state.totalCount,hasMore:void 0});p.state.pageId===i.id&&p.setState({...I,lastViewTime:T,lastExitTime:C})}async function w(e,t){await n().default.waitUntilRendered();const o=e.currentUser.id;if(void 0===o)return;const{blockStore:r,pageVisitStore:i,incremental:a}=t,s=t.limit||b;let l;if(a){const{pageId:e,lastViewTime:t,lastExitTime:n,totalCount:r,hasMore:a,...s}=i.state,c=Object.entries(s).map((([e,t])=>{if(o===e)return;const n=t.getVisitedAt();return void 0!==n?n+1:void 0}));l=p().T9(c.filter(m().O9))}const c=await S().callApi({eventName:"getPageVisitors",environment:e,data:{block:{id:r.id,spaceId:(0,d().e)(r.pointer.spaceId)},sinceTimestamp:l,limit:s,includeTotalCount:t.includeTotalCount},headers:{recordId:r.id,spaceId:(0,d().e)(r.pointer.spaceId)}});if("failed"===c.type)return;const u=M({pageVisits:c.data.pageVisits,blockStore:r,currentState:i.state,totalCount:c.data.totalCount,hasMore:c.data.hasMore});let f;if(Object.keys(u).length<=x)f=u;else{const{pageId:e,lastViewTime:t,lastExitTime:o,totalCount:n,hasMore:r,...i}=u,a=(0,m().WP)(i).map((([e,t])=>[e,t.getVisitedAt()??0]));f={pageId:e,lastViewTime:void 0,lastExitTime:void 0,totalCount:n,hasMore:r};const s=p().Ul(a,(([,e])=>-e)).slice(0,x);for(const[l]of s)f[l]=u[l]}i.state.pageId===u.pageId&&i.setState(f)}function M(e){const{blockStore:t,pageVisits:o,currentState:n,totalCount:r,hasMore:a}=e,s={...n,pageId:t.id,totalCount:r,hasMore:a};for(const l of o){const{id:e,user_id:o}=l;o in s||(s[o]=i()._.createChildStore(t,{table:c().F9,id:e,spaceId:(0,d().e)(t.pointer.spaceId)}))}return s}},471095:(e,t,o)=>{o.r(t),o.d(t,{iconDefinition:()=>n,lockFillIcon:()=>r});o(296540);const n={viewBox:"0 0 20 20",fittedViewBox:"3.97 1.95 12.05 15.66",svg:(0,o(474848).jsx)("path",{d:"M6 5.95a4 4 0 1 1 8 0v1.433a2.426 2.426 0 0 1 2.025 2.392v5.4A2.425 2.425 0 0 1 13.6 17.6H6.4a2.425 2.425 0 0 1-2.425-2.425v-5.4c0-1.203.876-2.201 2.025-2.392zm6.75 1.4v-1.4a2.75 2.75 0 1 0-5.5 0v1.4zm-2.2 5.458a1.35 1.35 0 1 0-1.1 0v1.242a.55.55 0 0 0 1.1 0z"})},r=(0,o(340498).wt)("lockFill",n,"fill")},482871:(e,t,o)=>{o.d(t,{z:()=>d});o(517642),o(658004),o(733853),o(845876),o(432475),o(515024),o(731698),o(898992),o(430670),o(581454);var n=()=>o(770063),r=()=>o(898244),i=()=>o(448801),a=()=>o(179034),s=()=>o(722101),l=(o(354520),()=>o(496603));function c(e){const{collectionContextStore:t,collectionViewStore:o,transaction:i}=e,c=o.getPageSortStore(),d=c.getValue(),u=t.groupsStore.getAllGroupStates(),p=function(e){const{pageSort:t,currentResults:o}=e;if(!t||t.length<=r().WF)return[];const n=t.filter((e=>!o.has(e)));return l().sb([...n.reverse(),...l().o8(t).reverse()]).slice(0,t.length-r().WF)}({pageSort:d,currentResults:new Set(u.flatMap((e=>e.resultsStore.state.map((e=>e.id)))))});for(const r of p)s().TF({parentStore:c,childToRemoveStore:(0,n().v3)(c,{table:a().ev,id:r}),transaction:i})}function d(e){const{resultIds:t,collectionViewStore:o,collectionContextStore:l,transaction:d}=e,u=o.getPageSortStore(),p=u.getValue()||[],{beforeOps:m}=(0,i().i)(p,t.slice(0,r().WF));for(const[r,i]of Object.entries(m))if(i){const e=(0,n().v3)(o,{table:a().ev,id:i});s().nc({parentStore:u,insertStore:(0,n().v3)(o,{table:a().ev,id:r}),beforeStore:e,transaction:d})}else{const e=t.findIndex((e=>e===r)),i=t[e-1],l=i?(0,n().v3)(o,{table:a().ev,id:i}):void 0;s().WH({parentStore:u,insertStore:(0,n().v3)(o,{table:a().ev,id:r}),afterStore:l,transaction:d})}c({collectionContextStore:l,collectionViewStore:o,transaction:d})}},491848:(e,t,o)=>{o.d(t,{w:()=>r});o(898992),o(672577);var n=()=>o(209866);function r({collectionContextStore:e,transaction:t}){const o="collectionTypedView"===e.contextTypeFromStoreState,r=e.databaseTypeFromStoreState,i=e.collectionStoresStore.state,a=i.find((e=>e.canEdit()||e.canEditCollection()||e.canEditContentOnly()))||i[0];!o&&a&&(0,n().e)({transaction:t,databaseType:r,collectionId:a.id,spaceId:a.getSpaceId()})}},497222:(e,t,o)=>{o.d(t,{A:()=>f});o(296540);var n=()=>o(804773),r=()=>o(726637),i=()=>o(401497),a=()=>o(807449),s=()=>o(81068),l=()=>o(906380),c=()=>o(100622),d=()=>o(284371),u=()=>o(612900),p=()=>o(700251),m=o(474848);function f(e){const{icon:t,iconStyle:o,title:f,caption:v,right:h,rightStyle:y,isRedOnHover:g,isGray:S,isOrange:b,onClick:x,onMouseDown:_,onMouseEnter:w,onMouseLeave:M,disabled:T,showChevron:C,chevronStyle:k,rotateChevron:I,showDragHandle:A,focused:j,textWrapperStyle:R,shouldWrapCaption:E,desktopIconStyle:B,buttonStyle:O,desktopTitleStyle:V,source:P,menuListItemProps:D,isPulsing:U,shouldShowMobileBackground:N}=e,F=(0,p().y$)(),L=(0,i().IS)((()=>({style:{...S?{color:c().Tj.text.secondary,fill:c().Tj.icon.secondary}:b?{color:c().Tj.orange.icon.accentPrimary,fill:c().Tj.orange.icon.accentPrimary}:{color:c().Tj.text.primary,fill:c().Tj.icon.primary},opacity:T?.4:void 0,...O},leftIconStyle:{width:F,height:F,...o},rightStyle:{display:"flex",alignItems:"center",color:T?c().Tj.text.primary:c().Tj.text.tertiary,fill:T?c().Tj.icon.primary:c().Tj.icon.tertiary,flexShrink:0,marginInlineStart:r().A.isMobile?8:void 0,...y},rightChevronStyle:{marginInlineStart:"tableHeaderMenu"===P?0:6,transition:"transform 200ms ease-in-out",...I&&{transform:"rotate(90deg)"},...k}})),[S,b,T,o,k,y,O,F,I,P]),{itemRef:z,isTabbable:W,onKeyDown:H,onFocus:q}=(0,n().e)(),K=(0,m.jsx)(s().A,{ref:z,role:"menuitem",icon:null==t?void 0:t(L.leftIconStyle),focused:j||!1,disabled:T,title:f,caption:v,shouldWrapTitle:!0,shouldWrapCaption:E,desktopTitleStyle:{flexGrow:1,flexShrink:1,...V},onKeyDown:H,onFocus:q,disallowTabbing:!W,showDragHandle:A,buttonStyle:L.style,rightStyle:L.rightStyle,isRedOnHover:g,ignoreLocalHoverState:!!T||void 0,right:(0,m.jsxs)(m.Fragment,{children:[(0,m.jsx)("div",{style:{...d().RC,display:"flex"},children:h}),!T&&C?(0,m.jsx)(a().I,{icon:l().arrowChevronSingleRightSmallIcon,size:"sm",colorVariant:"tableHeaderMenu"===P?"secondary":"tertiary",style:L.rightChevronStyle}):null]}),onClick:x,onMouseDown:_,onMouseEnter:w,onMouseLeave:M,textWrapperStyle:R,desktopIconStyle:B,reducedPadding:e.reducedPadding,shouldShowMobileBackground:N,...D});return U?(0,m.jsx)(u().u,{borderRadius:6,shape:"square",children:K}):K}},526278:(e,t,o)=>{o.r(t),o.d(t,{arrowStraightLeftIcon:()=>r,iconDefinition:()=>n});o(296540);const n={viewBox:"0 0 20 20",fittedViewBox:"2.37 3.97 15.26 12.06",directional:!0,svg:(0,o(474848).jsx)("path",{d:"M2.411 9.79a.6.6 0 0 1 .147-.232l5.4-5.4a.625.625 0 1 1 .884.884L4.509 9.375H17a.625.625 0 1 1 0 1.25H4.509l4.333 4.333a.625.625 0 1 1-.884.884l-5.4-5.4a.62.62 0 0 1-.147-.651"})},r=(0,o(340498).wt)("arrowStraightLeft",n,"default")},529099:(e,t,o)=>{o.r(t),o.d(t,{aiFaceIcon:()=>i,iconDefinition:()=>r});o(296540);var n=o(474848);const r={viewBox:"0 0 20 20",fittedViewBox:"4.13 2.52 13.27 14.61",svg:(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("path",{d:"M12.758 9.976a1.178 1.178 0 1 0 .377-2.326 1.178 1.178 0 0 0-.377 2.326M6.547 8.97a1.178 1.178 0 1 0 .377-2.327 1.178 1.178 0 0 0-.377 2.326"}),(0,n.jsx)("path",{d:"M10.573 5.554a3.917 3.917 0 0 1 6.743.035.625.625 0 1 1-1.08.63 2.667 2.667 0 0 0-4.591-.023l-5.398 9.015 4.192.68a.625.625 0 0 1-.2 1.233l-5.102-.827a.625.625 0 0 1-.436-.938zM4.36 3.517a3.92 3.92 0 0 1 5.572.356.625.625 0 1 1-.945.818 2.67 2.67 0 0 0-3.795-.243.625.625 0 1 1-.833-.931"})]})},i=(0,o(340498).wt)("aiFace",r,"default")},529803:(e,t,o)=>{o.d(t,{A:()=>r});class n extends(()=>o(757695))().Store{}const r=new n},539412:(e,t,o)=>{o.d(t,{$y:()=>g,jc:()=>y,x9:()=>h});o(296540);var n=()=>o(564884),r=()=>o(484714),i=()=>o(590526),a=()=>o(212473),s=()=>o(922189),l=()=>o(69708),c=()=>o(209660),d=()=>o(511393),u=()=>o(529803),p=()=>o(780262),m=()=>o(807778),f=()=>o(671812),v=o(474848);function h(){const e=(0,i().K8)((()=>{const{editsBlocked:e}=p().A.state;return e??!1}),[]);return(0,i().K8)((()=>(0,m().Jq)()),[])&&e}function y(){return(0,i().K8)((()=>{var e;const t=u().A.state;return null==t||null===(e=t.data)||void 0===e?void 0:e.invoiceHostedUrl}),[])}function g(){const e=(0,r().v3)(),t=y(),o=(0,i().K8)((()=>{var e;const t=u().A.state;return(null==t||null===(e=t.data)||void 0===e?void 0:e.overdueInvoiceCount)??0}),[]),n=(0,i().K8)((()=>(0,d().h)(e)),[e]),p=function(e,t){if(e)return t>1?(0,v.jsx)(l().sA,{defaultMessage:"Access to Notion is limited because we couldn’t process {overdueInvoiceCount, plural, one {your last payment} other {{overdueInvoiceCount} payments}}.",id:"uncollectibleExperience.uncollectibleExperienceOverlay.multipleInvoicesMessageContent",values:{overdueInvoiceCount:t}}):(0,v.jsx)(l().sA,{defaultMessage:"Access to Notion is limited because we couldn’t process your last payment",id:"uncollectibleExperience.uncollectibleExperienceOverlay.messageContent"});return(0,v.jsx)(l().sA,{id:"uncollectibleExperience.uncollectibleExperienceOverlay.memberMessageContent",defaultMessage:"Access to Notion is limited"})}(n,o),m=function(e){if(e)return;return(0,v.jsx)(l().sA,{id:"uncollectibleExperience.uncollectibleExperienceOverlay.memberSecondaryLabel",defaultMessage:"Contact a workspace owner to update your workspace’s payment method"})}(n),h=function(e,t,o){if(t){const n=(0,f().a)(o);return o=>{n&&(S(t,e),n(o))}}return o=>{S(t,e),c().Ow()}}(e,n,t),g=function(e){if(e)return(0,v.jsx)(l().sA,{defaultMessage:"View unpaid invoice",id:"uncollectibleExperience.uncollectibleExperienceOverlay.buttonLabel"});return(0,v.jsx)(l().sA,{id:"uncollectibleExperience.uncollectibleExperienceOverlay.memberButtonLabel",defaultMessage:"View workspace owner"})}(n);return{clickAction:h,ctaMessage:g,primaryMessage:p,secondaryMessage:m,ctaIcon:n?a().arrowUpRightSquareIcon:s().personCircleFillIcon,tooltipBodyMessage:n?g:m,isWorkspaceOwner:n,overdueInvoiceCount:o}}function S(e,t){(0,n().u)({environment:t,event:{eventName:"subscription_uncollectible_blurred_experience_cta_clicked",eventProperties:{is_workspace_owner:e}}})}},546461:(e,t,o)=>{o.d(t,{K4:()=>x,To:()=>T,fi:()=>_,q8:()=>b,u:()=>S});o(16280),o(18107),o(967357);var n=o(296540),r=()=>o(484714),i=()=>o(792485),a=()=>o(590526),s=()=>o(79926),l=()=>o(140934),c=()=>o(322867),d=()=>o(69708),u=()=>o(534177),p=()=>o(813297),m=()=>o(326887),f=()=>o(862292),v=()=>o(190019),h=()=>o(76190),y=o(474848);const g=(0,n.createContext)({ancestors:[]});g.displayName="AutomationContext";g.Consumer;function S(e){const{automationStore:t,children:o,contextType:S,enableExistenceGuarantees:b}=e,x=(0,r().v3)(),_=(0,d().tz)(),{value:T}=(0,s().fJ)(f().T.formulas),{value:C}=(0,s().fJ)(p().QV.automationTypecheck),k=(0,h().n)(t),I=(0,i().S)(),A=(0,a().K8)((()=>{if(!T)return{error:new(c().N9)("Missing formulas dependency")};if(!C)return{error:new(c().N9)("Missing automation dependency")};const e=function(e){const{environment:t,automationStore:o,automationTypecheckModule:n,contextType:r,formulasModule:i,intl:a,isSubscribed:s,pageStore:c,enableExistenceGuarantees:d}=e,p=function(e,t){if(t)return w.get(e);return w.get(e)??M.get(e)}(o,d);if(p)return p;const f=new(l().ComputedStore)((()=>{const e=o.getTriggerType();let l=r;return(0,u().O9)(e)&&(0,m().x2)(e)&&(l=(0,m().H8)(e)),(0,v().Z)({environment:t,automationStore:o,automationTypecheckModule:n,contextType:l,formulasModule:i,intl:a,isSubscribed:s,pageStore:c,enableExistenceGuarantees:d})}),{debugName:"automationContextTypecheckResultCachedStore"});return function(e,t,o){o?(w.set(e,t),M.set(e,t)):M.set(e,t)}(o,f,d),f}({automationStore:t,automationTypecheckModule:C,contextType:S,environment:x,formulasModule:T,intl:_,isSubscribed:k,pageStore:"button_block"===S?null==I?void 0:I.pageStore:void 0,enableExistenceGuarantees:b});return e.state}),[x,t,C,S,T,_,k,null==I?void 0:I.pageStore,b]),j=(0,n.useContext)(g),R=(0,n.useMemo)((()=>0===j.ancestors.length?[{automationStore:t,contextType:S,typecheckResult:A}]:[...j.ancestors,{automationStore:t,contextType:S,typecheckResult:A}]),[j,t,S,A]),E=(0,n.useMemo)((()=>({ancestors:R,enableExistenceGuarantees:b})),[R,b]);return(0,y.jsx)(g.Provider,{value:E,children:o})}function b(){const e=(0,n.useContext)(g).ancestors.at(-1);if(!e)throw new Error("No automation context found!");return e}function x(){return(0,n.useContext)(g).ancestors.at(-1)}function _(){return(0,n.useContext)(g).enableExistenceGuarantees}const w=new WeakMap,M=new WeakMap;function T(e){var t;return null===(t=w.get(e))||void 0===t?void 0:t.state}},550368:(e,t,o)=>{o.d(t,{a:()=>u});var n=o(296540),r=()=>o(401497),i=()=>o(100622),a=()=>o(534177),s=()=>o(284371),l=()=>o(699143),c=()=>o(493552),d=o(474848);const u=n.forwardRef((function({additionalContent:e,description:t,isDisabled:o,isSelected:a,label:c,name:u,onChange:f,width:v="fill",selectorSize:h="normal",selectAlignXAxis:y="left",selectAlignYAxis:g="center",selectType:S="checkbox",style:b,supportText:x,value:_,colorVariant:w,alignAdditionalContent:M,...T},C){const k=(0,n.useId)(),I=function(e){const{isSelected:t,isDisabled:o,selectAlignYAxis:n,alignAdditionalContent:a}=e;return(0,r().IS)((()=>{const e=t&&!o?i().Tj.blue.border.accentPrimary:i().Tj.border.primary;return{container:{display:"flex",alignItems:a??"center",gap:12,userSelect:"none",paddingTop:9,paddingInlineEnd:16,paddingBottom:10,paddingInlineStart:10,borderRadius:6,border:`1px solid ${e}`,...!o&&{cursor:"pointer"}},title:{fontWeight:s().Wy.medium,fontSize:14,userSelect:"none",lineHeight:18},additionalContentWrapper:{flexShrink:0},selectorWrapper:{display:"flex",..."top"===n?{marginTop:2}:{}},rightAlignSelectorWrapper:{display:"flex"}}}),[t,o,n,a])}({isSelected:a,isDisabled:o,selectAlignYAxis:g,alignAdditionalContent:M}),A=(0,d.jsxs)(l().Y1,{direction:"horizontal",align:"top"===g?"top-left":"center-left",gap:12,width:v,children:[(0,d.jsx)("div",{style:I.selectorWrapper,children:(0,d.jsx)(m,{id:k,selectType:S,name:u,value:_,onChange:f,isSelected:a,selectorSize:h,isDisabled:o,...T})}),(0,d.jsx)(p,{colorVariant:w,description:t,label:c,selectorSize:h,supportText:x,isDisabled:o})]}),j=(0,d.jsxs)(l().Y1,{direction:"horizontal",align:"top"===g?"top-center":"center",gap:12,children:[(0,d.jsx)(p,{colorVariant:w,description:t,label:c,selectorSize:h,supportText:x,isDisabled:o}),(0,d.jsx)("div",{style:{...I.selectorWrapper,...I.rightAlignSelectorWrapper},children:(0,d.jsx)(m,{id:k,selectType:S,name:u,value:_,onChange:f,selectorSize:h,isSelected:a,isDisabled:o,...T})})]}),R=e?(0,d.jsx)("div",{style:I.additionalContentWrapper,children:e}):null;return(0,d.jsx)("label",{ref:C,style:{...I.container,...b},htmlFor:k,children:"left"===y?(0,d.jsxs)(d.Fragment,{children:[A,R]}):(0,d.jsxs)(d.Fragment,{children:[R,j]})})}));function p(e){const{description:t,label:o,supportText:n,selectorSize:r,isDisabled:i,colorVariant:s}=e;let u;return"large"===r?u="pageContentTextBlock":"normal"===r||void 0===r?u="bodySmMedium":"small"===r?u="captionRegular":(0,a().HB)(r),(0,d.jsxs)(l().Y1,{gap:4,children:[(0,d.jsxs)(l().Y1,{gap:2,children:[(0,d.jsx)(c().D,{styleKey:u,colorVariant:s||(i?"disabled":"primary"),children:o}),t?(0,d.jsx)(c().D,{styleKey:"captionRegular",colorVariant:i?"disabled":"secondary",children:t}):null]}),n?(0,d.jsx)(c().D,{styleKey:"captionMedium",colorVariant:"tertiary",children:n}):null]})}function m(e){const{selectType:t,selectorSize:n="normal",id:i,name:s,value:l,onChange:c,isSelected:u,isDisabled:p,...m}=e,f=(0,r().IS)((()=>({checkboxWrapper:{minWidth:18,display:"flex",justifyContent:"center"}})),[]);switch(t){case"radio":return(0,d.jsx)(o(266685).a,{id:i,name:s,value:l,onChange:c,checked:u,disabled:p,selectorSize:n,...m});case"checkbox":return(0,d.jsx)("div",{style:f.checkboxWrapper,children:(0,d.jsx)(o(665290).W,{id:i,name:s,value:l,onChange:c,checked:u,disabled:p,selectorSize:n,...m})});case"none":return null;default:(0,a().HB)(t)}}},554283:(e,t,o)=>{o.d(t,{B:()=>r});var n=o(296540);function r(){const e=(0,n.useRef)(null),[t,o]=(0,n.useState)(!1),r=(0,n.useCallback)((()=>{const t=e.current;t&&o(t.matches(":hover"))}),[]);return[(0,n.useCallback)((t=>{t?(t.addEventListener("mouseenter",r),t.addEventListener("mouseleave",r),e.current=t,r()):e.current&&(e.current.removeEventListener("mouseenter",r),e.current.removeEventListener("mouseleave",r),e.current=null)}),[r]),t,e]}},555267:(e,t,o)=>{o.d(t,{A:()=>l});var n=o(296540),r=()=>o(991003),i=()=>o(98126),a=()=>o(100622),s=o(474848);function l({loadingMessage:e}){const t=(0,r().A)(!0,400);return(0,s.jsx)("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",height:"100%"},children:t?(0,s.jsxs)(n.Fragment,{children:[(0,s.jsx)(i().k,{}),e?(0,s.jsx)("div",{style:{marginInlineStart:8,color:a().Tj.text.secondary},children:e}):void 0]}):void 0})}},562984:(e,t,o)=>{o.d(t,{i:()=>i,u:()=>r});var n=()=>o(79926);const r={PersonProfileContainer:new(n().O2)("PersonProfileContainer",(()=>Promise.all([o.e(75134),o.e(32370),o.e(26264),o.e(69785),o.e(29357),o.e(22585),o.e(41751),o.e(17680),o.e(95576),o.e(77093),o.e(23730),o.e(44632)]).then(o.bind(o,635686)))),extendedUserProfileActions:new(n().O2)("extendedUserProfileActions",(()=>o.e(63717).then(o.bind(o,260513))))},i=(0,n()._h)(r.PersonProfileContainer,(e=>e.PersonProfileContainer))},567121:(e,t,o)=>{o.d(t,{EG:()=>a,K5:()=>i,RH:()=>r,Yi:()=>s,ls:()=>n});const n=32,r=202,i=1e3,a="Want to add a metric? Look for 'src/client/performanceToolbar/config.ts' in notion-next.",s="To disable the toolbar entirely, go to the 'Experiments' panel and look for the 'performance_debugging_toolbar' flag."},578194:(e,t,o)=>{o.d(t,{r:()=>n});const n=(0,o(583835).Dv)("importEvernote")},595939:(e,t,o)=>{o.d(t,{OY:()=>s,S4:()=>a,Wu:()=>l});var n=()=>o(680074),r=()=>o(244828),i=()=>o(680977);function a(e){const{environment:t,preference:o}=e,a=(0,n().R$)(t);a&&(r().createAndCommit({environment:t,userAction:"userSettingsActions.setContrastPreference",canUndo:!0,cellTarget:"main",perform:e=>{(0,i().m)({userSettingsStore:a,transaction:e,data:{contrast_preference:o}})}}),s(o))}async function s(e){document.body.setAttribute("data-contrast",e);("high"===e||"auto"===e&&window.matchMedia("(prefers-contrast: more)").matches)&&await o.e(76353).then(o.bind(o,811300))}function l(e){const t=(0,n().R$)(e);return(null==t?void 0:t.getSettingsStore().getKeyStore("contrast_preference").getValue())??"auto"}},608346:(e,t,o)=>{o.d(t,{m:()=>a});o(898992),o(354520),o(672577),o(581454);var n=o.n(o(844751)),r=o(296540),i=()=>o(534177);function a({sections:e,filterQuery:t}){return(0,r.useMemo)((()=>e.map((e=>function(e,t){const{items:o,...r}=e;if(!t)return e;const i=o.filter((e=>e.keywords.find((e=>n().match(t,e)))));return i.length>0?{...r,items:i}:void 0}(e,t))).filter(i().O9)),[t,e])}},610101:(e,t,o)=>{o.d(t,{A:()=>r});class n extends(()=>o(757695))().Store{getInitialState(){return{isOpen:!1,from:void 0,collectionContextStore:void 0}}}const r=new n},612900:(e,t,o)=>{o.d(t,{u:()=>i});var n=()=>o(79926);const r=new(n().O2)("PulsingWrapper",(async()=>o.e(45248).then(o.bind(o,673962)))),i=(0,n().jQ)(r,(e=>e.PulsingWrapper),{renderLoading:(e,t)=>t.children})},613016:(e,t,o)=>{o.d(t,{a:()=>r});var n=()=>o(907258);function r(){const{sidebarSpaceStore:e}=n().default.getState();return e?e.id:void 0}},613885:(e,t,o)=>{o.d(t,{k:()=>r});var n=()=>o(726637);function r(e,t){const o=n().A.isMobile?2:3;return t.slice(0,o)}},619553:(e,t,o)=>{o.d(t,{B:()=>a});var n=()=>o(459621),r=()=>o(59145),i=()=>o(441748);function a({openInNew:e,url:t,makeTabActive:o,position:a,isNewPage:s,environment:l}){"tab"===e&&o?(0,r().x)(l,{url:t,position:a,makeTabActive:o,isNewPage:s}):"tab"!==e||o?"window"===e&&(0,i().E)(t):(0,n().x)(l,{url:t,position:a})}},621594:(e,t,o)=>{o.r(t),o.d(t,{exclamationMarkCircleSmallIcon:()=>i,iconDefinition:()=>r});o(296540);var n=o(474848);const r={viewBox:"0 0 16 16",fittedViewBox:"1.87 1.87 12.25 12.25",svg:(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("path",{d:"M7.9 4.875a.625.625 0 0 0-.625.625V8a.625.625 0 1 0 1.25 0V5.5a.625.625 0 0 0-.625-.625m0 4.7a.725.725 0 1 0 0 1.45.725.725 0 0 0 0-1.45"}),(0,n.jsx)("path",{d:"M8 1.875a6.125 6.125 0 1 0 0 12.25 6.125 6.125 0 0 0 0-12.25M3.125 8a4.875 4.875 0 1 1 9.75 0 4.875 4.875 0 0 1-9.75 0"})]})},i=(0,o(340498).wt)("exclamationMarkCircleSmall",r,"small")},627503:(e,t,o)=>{o.d(t,{a:()=>r});o(296540);const n={viewBox:"0 0 16 16",fittedViewBox:"1.37 1.37 13.25 13.25",svg:(0,o(474848).jsx)("path",{d:"M3.25 1.375c-1.036 0-1.875.84-1.875 1.875v6c0 1.036.84 1.875 1.875 1.875h1.625v1.625c0 1.036.84 1.875 1.875 1.875h6c1.036 0 1.875-.84 1.875-1.875v-6c0-1.036-.84-1.875-1.875-1.875h-1.625V3.25c0-1.036-.84-1.875-1.875-1.875zM2.625 3.25c0-.345.28-.625.625-.625h6c.345 0 .625.28.625.625v1.625H6.75c-1.036 0-1.875.84-1.875 1.875v3.125H3.25a.625.625 0 0 1-.625-.625zm3.5 3.5c0-.345.28-.625.625-.625h6c.345 0 .625.28.625.625v6c0 .345-.28.625-.625.625h-6a.625.625 0 0 1-.625-.625z"})},r=(0,o(340498).wt)("duplicateSmall",n,"small")},642557:(e,t,o)=>{o.r(t),o.d(t,{iconDefinition:()=>r,lockSmallIcon:()=>i});o(296540);var n=o(474848);const r={viewBox:"0 0 16 16",fittedViewBox:"3.17 1.59 9.66 12.45",svg:(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("path",{d:"M8 8.1a1.125 1.125 0 0 0-.525 2.12v.93a.525.525 0 1 0 1.05 0v-.93A1.125 1.125 0 0 0 8 8.1"}),(0,n.jsx)("path",{d:"M8 1.6a3.25 3.25 0 0 0-3.25 3.25v1a2.026 2.026 0 0 0-1.575 1.975v4.2c0 1.118.907 2.025 2.025 2.025h5.6a2.025 2.025 0 0 0 2.025-2.025v-4.2c0-.964-.673-1.77-1.575-1.975v-1A3.25 3.25 0 0 0 8 1.6M6 4.85a2 2 0 1 1 4 0v.95H6zM4.425 7.825c0-.428.347-.775.775-.775h5.6c.428 0 .775.347.775.775v4.2a.775.775 0 0 1-.775.775H5.2a.775.775 0 0 1-.775-.775z"})]})},i=(0,o(340498).wt)("lockSmall",r,"small")},662971:(e,t,o)=>{o.d(t,{A:()=>m});var n=o(296540),r=()=>o(30537);const i=function(){const[e,t]=n.useState({x:0,y:0});return n.useEffect((()=>{const e=e=>{t({x:e.clientX,y:e.clientY})};return window.addEventListener("mousemove",e),()=>{window.removeEventListener("mousemove",e)}}),[]),e};var a=o(474848);function s({x:e,mouseX:t}){return t>e?void 0:-Math.max(e-t,10)+"px"}function l({x:e,width:t,mouseX:o}){return o>e?-Math.max(o-(e+t),10)+"px":void 0}function c({x:e,width:t,mouseX:o}){return o>e?`${Math.max(o-(e+t),10)}px`:`${Math.max(e-o,10)}px`}function d({x:e,y:t,height:o,mouseX:n,mouseY:r}){return n>e?`polygon(0% 0%, 0% 100%, 100% ${100*(r-t)/o}%)`:`polygon(100% 0%, 0% ${100*(r-t)/o}%, 100% 100%)`}function u(e){const{x:t=0,y:o=0,height:r=0,width:u=0}=e.el.getBoundingClientRect()||{},{x:p,y:m}=i(),f={x:t,y:o,height:r,width:u,mouseX:p,mouseY:m},v=(0,n.useRef)(null),h=n.useCallback((e=>{if(v.current){v.current.style.pointerEvents="none";const t=document.elementFromPoint(e.clientX,e.clientY);if(v.current.style.pointerEvents="auto",t){const o=new MouseEvent(e.nativeEvent.type,e.nativeEvent);t.dispatchEvent(o)}}}),[]),y={insetInlineEnd:l(f),insetInlineStart:s(f),height:r,width:c(f),clipPath:d(f)};return(0,a.jsx)("div",{ref:v,onClick:h,style:{cursor:"pointer",position:"absolute",pointerEvents:"auto",top:0,...y}})}function p({onClick:e,renderOrigin:t,renderExtension:i,allowOptionalExtensionMenu:s,...l},c){const{disabled:d,disableDefaultClick:p,onFocus:m,focused:f,openOnFocus:v,placementToOrigin:h,alignmentToOrigin:y,disableCloseOnEnter:g,bottomSheetInitialState:S,popupTypeOverride:b}=l,x=(0,o(484714).WS)(),_=(0,o(546926).Tf)(),[w,M]=(0,n.useState)(!1),T=(0,n.useRef)(null),C=(0,n.useRef)(null),k=(0,n.useRef)(null),I=(0,n.useRef)(null),A=(0,n.useCallback)((()=>{k.current&&window.clearTimeout(k.current),I.current&&window.clearTimeout(I.current),k.current=null,I.current=null}),[]),j=(0,n.useCallback)((()=>{A(),d||M(!0)}),[d,A]),R=(0,n.useCallback)((()=>{A(),M(!1)}),[A]),E=(0,n.useCallback)((e=>{A(),w||(e&&e.preventDefault&&e.preventDefault(),k.current=window.setTimeout(j,120))}),[w,A,j]),B=(0,n.useCallback)((()=>{A(),w&&(I.current=window.setTimeout(R,100))}),[w,R,A]),O=(0,n.useCallback)((t=>{m(),j(),s&&(null==e||e(t),R())}),[m,j,s,e,R]),V=(0,n.useCallback)((()=>{E()}),[E]),P=(0,n.useCallback)((()=>{m(),E()}),[m,E]),D=(0,n.useCallback)((e=>{if(o(726637).A.isMobile)return;const t=T.current;w&&t&&!t.contains(e.target)&&R()}),[w,R]),U=(0,n.useCallback)((e=>{13===e.keyCode&&w&&!g&&R()}),[w,R,g]);(0,n.useEffect)((()=>{if(!Boolean(p))return window.addEventListener("click",D),()=>{window.removeEventListener("click",D)}}),[p,D]),(0,n.useEffect)((()=>(window.addEventListener("keydown",U),()=>{window.removeEventListener("keydown",U)})),[U]);const N=(0,n.useRef)(f);(0,n.useEffect)((()=>{v&&!N.current&&f?E():!f&&N.current&&B(),N.current=f}),[f,v,E,B]);const F=(0,o(401497).IS)((()=>({mobilePopupStyle:{borderRadius:12,backgroundColor:o(100622).Tj.background.secondary}})),[]),L={...(0,o(383036).A)({onMouseEnter:V,onClick:O},l),showExtensionArrow:!0};let z=r().n.Popup;return b?z=b:x&&(z=_?r().n.BottomSheet:r().n.SlideUp),(0,a.jsx)(o(782482).N,{debugName:"ExtensionMenuItem",capture:f,onEnter:w?void 0:E,onRight:E,onLeft:w?B:void 0,onEsc:w?B:void 0,children:(0,a.jsx)(o(127833).zD,{popupType:z,bottomSheetInitialState:S,open:w,origin:t(L,c),placementToOrigin:h??"right",alignmentToOrigin:y??"center",originGap:0,disableMouseCapture:!0,preventBlockRenderQueueOnEnter:!0,preventScaleTransition:!x,preventCaptureEsc:!0,ref:T,render:()=>(0,a.jsxs)(a.Fragment,{children:[!x&&C.current?(0,a.jsx)(u,{el:C.current}):null,(0,a.jsx)("div",{ref:C,style:{height:"100%"},children:i({onMouseEnter:P},{close:B})})]}),style:{overflow:"visible",...x&&F.mobilePopupStyle},trapFocus:!0,onDismiss:R})})}const m=n.forwardRef(p)},665290:(e,t,o)=>{o.d(t,{W:()=>d});o(296540);var n=()=>o(819121),r=()=>o(401497),i=()=>o(451306),a=()=>o(73956),s=()=>o(100622),l=()=>o(807449),c=o(474848);function d(e){const{selectorSize:t="normal",...o}=e,{disabled:d,checked:u}=o,[p,m]=(0,n().A)(),f=function(e){const{checked:t,disabled:o,isFocusVisible:n,selectorSize:i}=e;return(0,r().IS)((()=>({root:{position:"absolute",display:"flex",width:"large"===i?15:11,height:"large"===i?15:11,margin:1.5,justifyContent:"center",alignItems:"center",flexShrink:0,borderRadius:"large"===i?2:1,transition:"background 100ms ease-out",...t?{boxShadow:`0 0 0 1.5px ${o?s().Tj.background.tertiaryTranslucent:s().Tj.blue.background.accentPrimary}`,background:o?s().Tj.background.tertiaryTranslucent:s().Tj.blue.background.accentPrimary}:{boxShadow:`0 0 0 1.5px ${o?s().Tj.background.tertiaryTranslucent:s().Tj.border.strongTranslucent}`,background:s().Tj.background.primary},...n&&{boxShadow:s().Tj.buttonBlueFocusRing}},active:{background:t?s().Tj.blueButtonPressedBackground:s().Tj.buttonHoveredBackground},input:{opacity:0,width:"large"===i?18:void 0,height:"large"===i?18:void 0,...o?{pointerEvents:"none"}:{cursor:"pointer"}}})),[i,t,o,n])}({checked:u,disabled:d,selectorSize:t,isFocusVisible:m});return(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)("input",{ref:p,type:"checkbox",style:f.input,...o}),(0,c.jsx)("span",{...(0,i().ow)(f.root,d?{}:{pseudoActive:f.active}),children:u?(0,c.jsx)(l().I,{icon:a().checkmarkFillSmallIcon,colorPalette:"blue",colorVariant:"inversePrimary",size:"large"===t?"xs":"xxs"}):void 0})]})}},671089:(e,t,o)=>{o.r(t),o.d(t,{checkmarkCircleIcon:()=>i,iconDefinition:()=>r});o(296540);var n=o(474848);const r={viewBox:"0 0 20 20",fittedViewBox:"2.37 2.37 15.25 15.26",svg:(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("path",{d:"M12.876 7.982a.625.625 0 1 0-1.072-.644L9.25 11.595 7.815 9.92a.625.625 0 0 0-.95.813l2 2.334a.625.625 0 0 0 1.01-.085z"}),(0,n.jsx)("path",{d:"M10 2.375a7.625 7.625 0 1 0 0 15.25 7.625 7.625 0 0 0 0-15.25M3.625 10a6.375 6.375 0 1 1 12.75 0 6.375 6.375 0 0 1-12.75 0"})]})},i=(0,o(340498).wt)("checkmarkCircle",r,"default")},673657:(e,t,o)=>{o.d(t,{n:()=>i});var n=()=>o(590526),r=()=>o(964345);function i(e){return(0,n().K8)((()=>r().gZ.state&&(null==e?void 0:e.id)===r().Di.state),[e])}},685100:(e,t,o)=>{o.r(t),o.d(t,{MoveOrDuplicateProgress:()=>le().A,MoveToMenuRenderer:()=>ae,MoveToOrCreateMenu:()=>n().v8,MoveToSnackbarButtons:()=>se().F});var n=()=>o(963248),r=(o(898992),o(581454),o(737550),o(296540)),i=()=>o(726637),a=()=>o(484714),s=()=>o(590526),l=()=>o(792057),c=()=>o(127833),d=()=>o(30537),u=()=>o(165358),p=()=>o(69708),m=()=>o(95313),f=()=>o(891569),v=()=>o(384529),h=()=>o(297175),y=()=>o(691298),g=()=>o(376049),S=()=>o(797942),b=()=>o(922614),x=(o(354520),()=>o(394888)),_=()=>o(89002);const w=(0,o(340498).xh)("squareOnSquarePlus",{default:{loader:()=>o.e(59994).then(o.bind(o,904789))},small:{loader:()=>o.e(59994).then(o.bind(o,728567))},fill:{loader:()=>o.e(59994).then(o.bind(o,205317))},fillSmall:{loader:()=>o.e(59994).then(o.bind(o,62428))}},["copy","duplicate","clone","replicate","add","plus"]);var M=()=>o(201980),T=()=>o(284371),C=()=>o(562969),k=()=>o(761652),I=()=>o(241021),A=()=>o(838239),j=()=>o(227358),R=o(474848);function E({isOpen:e,onClose:t,collectionToMoveStore:o,onMoveDataSourceOnly:n,onMoveDataSourceAndViews:r}){const i=(0,s().K8)((()=>o.getParentCollectionViewBlockStore()),[o]),a=(0,s().K8)((()=>{const e=o.getParentCollectionViewBlockStore(),t=null==e?void 0:e.getCollectionStores();return 1===(null==t?void 0:t.length)&&!(0,M().w9s)(o.getDescription())}),[o]),l=(0,s().K8)((()=>(0,h().WO)({collectionViewBlockStore:i,collectionStore:o})),[i,o]),c=(0,s().K8)((()=>(0,h().h0)({collectionViewBlockStore:i,collectionStore:o}).filter((e=>"form_editor"===e.getType())).length),[i,o]),d=c>0,u=(0,C().useCollectionNameOrDefault)(o);return(0,R.jsx)(x().s,{isOpen:e,onDismiss:t,onClosed:t,areaConstraint:{width:{type:"min",length:380}},render:()=>(0,R.jsx)(_().t,{header:(0,R.jsx)(A().Y,{iconAndTitle:(0,R.jsx)(j().Z,{iconGroup:w,title:(0,R.jsx)(p().sA,{id:"dataSourceMoveToConfirmationModal.title",defaultMessage:"Moving data source {dataSourceNameWithIcon}",values:{dataSourceNameWithIcon:(0,R.jsx)(k().A,{store:o,iconSize:22,style:{fontWeight:T().Wy.semibold},useInvertedColors:!1})}})}),description:a?(0,R.jsx)(p().sA,{id:"dataSourceMoveToConfirmationModal.losingDescription.description",defaultMessage:"{numViews, plural, one {This database has {numViews} view based on this data source. Moving it will also remove the database description.} other {This database has {numViews} views based on this data source. Moving it will also remove the database description.}}",values:{numViews:l}}):(0,R.jsx)(p().sA,{id:"dataSourceMoveToConfirmationModal.description",defaultMessage:"{numViews, plural, one {This database has {numViews} view based on this data source.} other {This database has {numViews} views based on this data source.}}",values:{numViews:l}})}),footer:(0,R.jsx)(I().a,{layout:"vertical",primaryButtons:[{buttonType:"primary",onClick:r,label:(0,R.jsx)(p().sA,{id:"dataSourceMoveToConfirmationModal.moveDataSourceAndViewsButton.label",defaultMessage:"{numViews, plural, one {Move data source and {numViews} view} other {Move data source and {numViews} views}}",values:{numViews:l}})}],secondaryButtons:[{buttonType:"secondary",onClick:n,isDisabled:d,label:(0,R.jsx)(p().sA,{id:"dataSourceMoveToConfirmationModal.moveDataSourceOnlyButton.label",defaultMessage:"Move data source only"})}],secondaryButtonTooltip:d?(0,R.jsx)(p().sA,{id:"dataSourceMoveToConfirmationModal.moveDataSourceOnlyButton.collectionHasFormView.tooltip",defaultMessage:"{formViewCount, plural, one {Delete <dataSourceNameChunk>{dataSourceName}</dataSourceNameChunk>’s form to move the data source only} other {Delete <dataSourceNameChunk>{dataSourceName}</dataSourceNameChunk>’s forms to move the data source only}}",values:{dataSourceNameChunk:(...e)=>(0,R.jsx)("b",{children:e}),dataSourceName:u,formViewCount:c}}):void 0})})})}var B=()=>o(493552),O=()=>o(820156),V=()=>o(534177),P=()=>o(634292),D=()=>o(71304);function U({error:e,destinationCollectionViewBlockStore:t,collectionToMoveStore:o}){const n=(0,p().tz)(),r=(0,a().v3)(),i=(0,s().K8)((()=>(0,D().Qe)(o,n,r)),[o,n,r]),l=(0,s().K8)((()=>(0,D().Qe)(t,n,r)),[t,n,r]),c=(0,s().K8)((()=>o.getDatabaseType()),[o]),d=(0,s().K8)((()=>{var e;return null===(e=t.getOwnedTypedCollectionStores()[0])||void 0===e?void 0:e.getDatabaseType()}),[t]);switch(e){case"cannotMoveCollection":return(0,R.jsx)(N,{destinationCollectionViewBlockTitle:l,collectionTitle:i});case"cannotMoveViews":return(0,R.jsx)(F,{destinationCollectionViewBlockTitle:l,collectionTitle:i});case"cannotMoveTypedCollection":return(0,R.jsx)(L,{collectionType:c,existingCollectionType:d});default:(0,V().HB)(e)}}function N({destinationCollectionViewBlockTitle:e,collectionTitle:t}){return(0,R.jsxs)("div",{style:{display:"flex",flexDirection:"column",gap:4},children:[(0,R.jsx)(p().sA,{id:"dataSourceMoveToMenu.errorDialog.tooManyCollections.title",defaultMessage:"Maximum number of data sources ({maxDataSourceCount}) reached",values:{maxDataSourceCount:O().A}}),(0,R.jsx)(B().D,{styleKey:"bodyRegular",color:"error",children:(0,R.jsx)(p().sA,{id:"dataSourceMoveToMenu.errorDialog.tooManyCollections.message",defaultMessage:"{titlesAreDefined, select, true {Remove a data source from {destinationCollectionViewBlockTitle} to move {collectionTitle}.} other {Remove a data source from the database to move this data source.}}",values:{titlesAreDefined:Boolean(t&&e),collectionTitle:(0,R.jsx)(B().D,{styleKey:"bodySemibold",style:{display:"inline"},children:t}),destinationCollectionViewBlockTitle:(0,R.jsx)(B().D,{styleKey:"bodySemibold",style:{display:"inline"},children:e})}})})]})}function F({destinationCollectionViewBlockTitle:e,collectionTitle:t}){return(0,R.jsxs)("div",{style:{display:"flex",flexDirection:"column",gap:4},children:[(0,R.jsx)(p().sA,{id:"dataSourceMoveToMenu.errorDialog.tooManyViews.title",defaultMessage:"Maximum number of views ({maxViewCount}) reached",values:{maxViewCount:O().L}}),(0,R.jsx)(B().D,{styleKey:"bodyRegular",color:"error",children:(0,R.jsx)(p().sA,{id:"dataSourceMoveToMenu.errorDialog.tooManyViews.message",defaultMessage:"{titlesAreDefined, select, true {Remove views from {destinationCollectionViewBlockTitle} to move {collectionTitle} and views.} other {Remove views from the database to move this data source and views.}}",values:{titlesAreDefined:Boolean(t&&e),collectionTitle:(0,R.jsx)(B().D,{styleKey:"bodySemibold",style:{display:"inline"},children:t}),destinationCollectionViewBlockTitle:(0,R.jsx)(B().D,{styleKey:"bodySemibold",style:{display:"inline"},children:e})}})})]})}function L({collectionType:e,existingCollectionType:t}){const o=(0,P()._V)(e),n=(0,P()._V)(t);return(0,R.jsxs)("div",{style:{display:"flex",flexDirection:"column",gap:4},children:[(0,R.jsx)(p().sA,{id:"dataSourceMoveToMenu.errorDialog.cannotMoveTypedCollection.title",defaultMessage:"Cannot move a {collectionTypeName} data source into a database with a separate {existingCollectionTypeName} data source.",values:{collectionTypeName:o,existingCollectionTypeName:n}}),(0,R.jsx)(B().D,{styleKey:"bodyRegular",color:"error",children:(0,R.jsx)(p().sA,{id:"dataSourceMoveToMenu.errorDialog.cannotMoveTypedCollection.message",defaultMessage:"Please select a different destination."})})]})}var z=()=>o(717137),W=()=>o(782482),H=()=>o(546926),q=()=>o(890492),K=()=>o(736847),G=()=>o(452004),$=()=>o(245241),Y=()=>o(272509),Q=()=>o(135599),Z=()=>o(572748),X=()=>o(540742),J=()=>o(587989),ee=()=>o(276303),te=()=>o(478495);function oe(e){const{autocompleteQuery:t,desktopWidth:o,onAccept:i,onAutocompleteQueryChange:l,onCancel:c,onMouseEnter:d,collectionToMoveStore:u}=e,m=(0,a().WS)();(0,r.useEffect)((()=>(X().x.reset(),()=>{X().x.reset()})),[]);const f=(0,s().uB)(void 0,G().$),v=(0,s().K8)((()=>(0,ee().wc)()),[]),h=(0,s().K8)((()=>(0,ee().NA)()),[]),y=(0,s().K8)((()=>(0,Y().I)(v)),[v]),g=(0,s().K8)((()=>(0,ee().L2)(b().Ay.state)),[]),S=(0,s().K8)((()=>{var e;return null===(e=u.getParentCollectionViewBlockStore())||void 0===e?void 0:e.id}),[u]),x=(0,Q().W)({type:$().Vz.BlocksInSpace,query:t,limit:g,source:"move_to_menu",filters:{requireEditPermissions:!1,excludeSurrogateCollections:!0,excludeTemplates:!1},excludedBlockIds:[S].filter((e=>void 0!==e)),options:{disable:!1,overrideSpaceStore:v},peopleBlocksToInclude:"none"}),_=(0,r.useMemo)((()=>[u]),[u]),w=(0,Z().t)({allItemsToMoveAreNavigable:!1,forceShowPrivatePageOption:!1,isAddTo:!1,isCreateIn:!1,isTurnIntoPage:!1,showDataSources:!1,onAccept:i,parentBlockId:void 0,query:t,searchResults:x,itemsToMove:_}),M=(0,s().K8)((()=>(0,ee().R3)()),[]),T=(0,r.useMemo)((()=>{if(M)return m?(0,R.jsx)(n().Xy,{autocompleteQuery:t,onAutocompleteQueryChange:l,isDataSource:!0,menuListStore:f,isLoading:x.isResultsLoading}):(0,R.jsx)(K().A,{isInput:!0,children:(0,R.jsx)(n().Xy,{autocompleteQuery:t,onAutocompleteQueryChange:l,isDataSource:!0,menuListStore:f,isLoading:x.isResultsLoading})})}),[M,m,t,l,f,x.isResultsLoading]),C=(0,r.useMemo)((()=>m?{onMouseEnter:d,menuType:H().gu.Modal,title:(0,R.jsx)(p().sA,{defaultMessage:"Move to",id:"moveBlockMenu.mobileMoveTo.label"}),right:(0,R.jsx)(p().sA,{defaultMessage:"Done",id:"moveBlockMenu.rightDoneButton.label"}),onClickRight:c,header:T}:{onMouseEnter:d,menuType:H().gu.Popup,width:o,header:T}),[m,d,c,T,o]);return h&&v?(0,R.jsxs)(z().A,{debugName:"DataSourceMoveToMenu",capture:!0,allowMenuList:!0,allowEsc:!0,allowLeft:!0,allowTabUntab:!1,allowUndo:!1,children:[(0,R.jsx)(W().N,{debugName:"DataSourceMoveToMenu",capture:!0,onEsc:c}),(0,R.jsx)(q().A,{...C,footer:(0,R.jsx)(n().n5,{isCreateIn:!1,isAddTo:!1,allItemsToMoveAreNavigable:!1}),children:t||m?(0,R.jsx)(J().c,{sections:w,error:void 0,menuListStore:f,initialFocus:t?0:void 0,loading:x.isResultsLoading,canLoadMore:x.hasMoreResults,onLoadMore:()=>{var e;return null===(e=x.fetchAdditionalServerResultsOnChange)||void 0===e?void 0:e.call(x,g)}}):(0,R.jsx)(te().Cr,{spaceStore:v,spaceViewStore:h,onAccept:i,itemsToMove:[u],moveToPagesOnly:y,forceShowPrivatePageOption:!1})})]}):null}function ne(){const e=(0,a().v3)(),t=(0,s().K8)((()=>{const e=b().Ay.state;if(e.isOpen&&e.blocksToMove)return{autocompleteQuery:e.autocompleteQuery,blocksToMove:e.blocksToMove,isAddTo:e.isAddTo,isOpen:e.isOpen,forceShowPrivatePageOption:Boolean(e.forceShowPrivatePageOption)}}),[]),o=Boolean(null==t?void 0:t.isOpen);if((0,y().A)({shouldPreserveTextSelection:o,shouldPreserveBlockSelection:!1,shouldRestoreSelection:o&&!i().A.isMobile}),void 0===t||!t.isOpen)return null;const r=()=>{if(b().Ay.state.isOpen&&b().Ay.state.blocksToMove){const{flowId:t,blocksToMove:o,moveToContext:n}=b().Ay.state;m().X3(e,{from:n,render_type:"web",target_block_ids:o.map((e=>e.id)),flowId:t})}g().VN({environment:e,clearSelection:!0})},{autocompleteQuery:l,blocksToMove:c,isAddTo:d}=t;return(0,R.jsx)(n().v8,{autocompleteQuery:l,blocksToMove:c,onAutocompleteQueryChange:t=>{if(b().Ay.state.isOpen){b().Ay.setState({...b().Ay.state,queryLimit:S().p1,autocompleteQuery:t});const{flowId:o,moveToContext:n}=b().Ay.state;m().cn(e,{flowId:o,from:n})}},onAccept:async t=>{if(!b().Ay.state.isOpen||!b().Ay.state.blocksToMove)return;const o=b().Ay.state.blocksToMove,n=await(0,S().OY)({environment:e,blocks:o,from:"moveTo",moveToArgs:{moveToValue:t,destination:(0,S().sZ)(t)}});if(!n.confirmed)return void r();for(const a of o){const t=await v().rW({environment:e,block:a,action:"move"});"user_canceled"===t?r():t.length>1&&b().Ay.state.isOpen&&b().Ay.setState({...b().Ay.state,blocksToMove:t})}if(b().Ay.state.isOpen){const{flowId:o,blocksToMove:n,moveToContext:r,openedTimeMs:i,autocompleteQuery:a}=b().Ay.state,s="space-private-pages"===t.type?-1:n.findIndex((e=>e.id===t.id));m().uU(e,{from:r,render_type:"web",type:t.type,target_block_ids:n.map((e=>e.id)),time_to_select_ms:Date.now()-i,selected_item_index:s,query_length:a.length,flowId:o})}const{shouldClearPagePermissions:i}=n;(async({value:t,shouldClearPagePermissions:o})=>{await g().zA({environment:e,value:t,useSudoMode:b().Ay.state.isOpen&&b().Ay.state.useSudoMode,renderType:"web",shouldClearPagePermissions:o})})({value:t,shouldClearPagePermissions:i})},onCancel:r,desktopWidth:330,isAddTo:d,isCreateIn:!1,forceShowPrivatePageOption:t.forceShowPrivatePageOption})}async function re({environment:e,moveToValue:t,shouldMoveViews:o,handleCancel:n,menuState:r,intl:i}){var a;if(!r.collectionToMoveStore||!t)return;const s=(0,S().Il)(t);if(s&&!function(e){const{destinationCollectionViewBlockStore:t,collectionToMoveStore:o,shouldMoveViews:n}=e;if(n){const e=(0,h().WO)({collectionViewBlockStore:o.getParentCollectionViewBlockStore(),collectionStore:o});return t.canAddCollectionView(e)}{const e=(0,h().h0)({collectionViewBlockStore:t,collectionStore:o}).some((e=>{var t;return(null===(t=e.getCollectionStore())||void 0===t?void 0:t.id)===o.id}))?0:1;return t.canAddCollectionView(e)}}({destinationCollectionViewBlockStore:s,collectionToMoveStore:r.collectionToMoveStore,shouldMoveViews:o}))return void l().f1((0,R.jsx)(U,{error:"cannotMoveViews",destinationCollectionViewBlockStore:s,collectionToMoveStore:r.collectionToMoveStore}));const c=await(0,S().OY)({environment:e,blocks:[],from:"moveTo",moveToArgs:{moveToValue:t,destination:(0,S().sZ)(t)}});if(!c.confirmed)return void n();const{dataSourceSessionId:d,dataSourceFrom:u,moveToContext:p,collectionToMoveStore:f,useSudoMode:v,openedTimeMs:y,autocompleteQuery:b,flowId:x}=r;m().Aw(e,{data_source_session_id:d,data_source_from:u,from:p,render_type:"web",target_collection_id:f.id,original_collection_block_id:null===(a=f.getParentCollectionViewBlockStore())||void 0===a?void 0:a.id,time_to_select_ms:Date.now()-y,query_length:b.length,flowId:x}),g().Y8({environment:e,value:t,useSudoMode:v,renderType:"web",shouldClearPagePermissions:c.shouldClearPagePermissions,shouldMoveViews:o,intl:i})}function ie(){const e=(0,a().v3)(),t=(0,p().tz)(),o=(0,s().O$)(b().Ay),n=(0,r.useCallback)((()=>{var t;if(g().VN({environment:e,clearSelection:!0}),!b().Ay.state.isOpen||!b().Ay.state.collectionToMoveStore)return;const{dataSourceSessionId:o,dataSourceFrom:n,moveToContext:r,collectionToMoveStore:i}=b().Ay.state;m().z$(e,{data_source_session_id:o,data_source_from:n,from:r,render_type:"web",target_collection_id:i.id,original_collection_block_id:null===(t=i.getParentCollectionViewBlockStore())||void 0===t?void 0:t.id})}),[e]),i=(0,r.useCallback)((()=>{b().Ay.state.isOpen&&"dataSource"===b().Ay.state.variant&&b().Ay.setState({...b().Ay.state,isConfirmationModalOpen:!1,destination:void 0})}),[]),c=(0,r.useCallback)((async(r,i)=>{o.isOpen&&await re({environment:e,moveToValue:r,shouldMoveViews:i,handleCancel:n,menuState:o,intl:t})}),[e,o,n,t]),d=(0,r.useCallback)((async e=>{if(!o.isOpen||!o.collectionToMoveStore)return;const t=(0,S().Il)(e);if(t){const e=void 0!==o.collectionToMoveStore.getDatabaseType(),n=o.collectionToMoveStore.getParentCollectionViewBlockStore();if(e&&n&&!f().i_({originBlockStore:n,destinationBlockStore:t}))return l().f1((0,R.jsx)(U,{error:"cannotMoveTypedCollection",destinationCollectionViewBlockStore:t,collectionToMoveStore:o.collectionToMoveStore})),void u().log({level:"info",from:"DataSourceMoveToMenuModal",type:"cannotMoveTypedCollection",data:{message:"Cannot move typed collection because origin and destination blocks have different app_id values.",collectionId:o.collectionToMoveStore.id,collectionType:o.collectionToMoveStore.getDatabaseType(),originBlockId:n.id,originBlockAppId:n.getFormat().app_id,destinationBlockId:t.id,destinationBlockAppId:t.getFormat().app_id}});const r=null==t?void 0:t.canAddCollection();if(!r.canAddView&&"tooManyCollections"===r.reason)return void l().f1((0,R.jsx)(U,{error:"cannotMoveCollection",destinationCollectionViewBlockStore:t,collectionToMoveStore:o.collectionToMoveStore}));if(!r.canAddView&&"tooManyViews"===r.reason&&0===(0,h().WO)({collectionViewBlockStore:t,collectionStore:o.collectionToMoveStore}))return void l().f1((0,R.jsx)(U,{error:"cannotMoveViews",destinationCollectionViewBlockStore:t,collectionToMoveStore:o.collectionToMoveStore}))}0!==(0,h().WO)({collectionViewBlockStore:o.collectionToMoveStore.getParentCollectionViewBlockStore(),collectionStore:o.collectionToMoveStore})?b().Ay.state.isOpen&&"dataSource"===b().Ay.state.variant&&b().Ay.setState({...b().Ay.state,isConfirmationModalOpen:!0,destination:e}):await c(e,!1)}),[o,c]),v=(0,r.useCallback)((t=>{o.isOpen&&(b().Ay.setState({...o,queryLimit:S().p1,autocompleteQuery:t}),m().cn(e,{flowId:o.flowId,from:o.moveToContext}))}),[e,o]);return void 0!==o&&o.isOpen&&o.collectionToMoveStore?(0,R.jsxs)(R.Fragment,{children:[(0,R.jsx)(oe,{autocompleteQuery:o.autocompleteQuery,collectionToMoveStore:o.collectionToMoveStore,onAutocompleteQueryChange:v,onAccept:d,onCancel:n,desktopWidth:330}),(0,R.jsx)(E,{isOpen:o.isConfirmationModalOpen,onClose:i,collectionToMoveStore:o.collectionToMoveStore,onMoveDataSourceOnly:()=>c(o.destination,!1),onMoveDataSourceAndViews:()=>c(o.destination,!0)})]}):null}function ae(){const e=(0,a().v3)(),t=(0,s().K8)((()=>{const e=b().Ay.state;if(e.isOpen)return{renderType:e.renderType,isOpen:e.isOpen,rect:e.rect,alignmentToOrigin:e.alignmentToOrigin,placementToOrigin:e.placementToOrigin,variant:e.variant}}),[]),o=(0,r.useCallback)((()=>"dataSource"===(null==t?void 0:t.variant)?(0,R.jsx)(ie,{}):(0,R.jsx)(ne,{})),[t]);return(0,R.jsx)(c().zD,{popupType:i().A.isMobile?d().n.BottomSheet:d().n.Popup,alignmentToOrigin:(null==t?void 0:t.alignmentToOrigin)??"start",placementToOrigin:null==t?void 0:t.placementToOrigin,open:void 0!==t&&"mobileNative"!==t.renderType&&t.isOpen,render:o,originRect:null==t?void 0:t.rect,onDismiss:()=>{g().VN({environment:e,clearSelection:!0})},trapFocus:!0})}ae.displayName="MoveToMenuRenderer";var se=()=>o(554060),le=()=>o(575650)},687681:(e,t,o)=>{o.d(t,{u:()=>n});const n=(0,o(340498).xh)("pencilLine",{default:{loader:()=>o.e(92668).then(o.bind(o,105819))},small:{loader:()=>o.e(92668).then(o.bind(o,523389))},fill:{loader:()=>o.e(92668).then(o.bind(o,71287))},fillSmall:{loader:()=>o.e(92668).then(o.bind(o,396654))}},["compose","edit","write","create"])},691298:(e,t,o)=>{o.d(t,{A:()=>a});var n=o(296540),r=()=>o(232615),i=()=>o(206051);const a=function({shouldPreserveTextSelection:e,shouldPreserveBlockSelection:t,shouldRestoreSelection:a,onClearSelection:s}){const l=(0,o(484714).v3)(),c=(0,n.useRef)(e),d=(0,n.useRef)(""),u=(0,n.useRef)({selectionState:null,textSelectionState:null}),p=(0,n.useCallback)((()=>u.current),[]),m=(0,n.useCallback)((()=>{d.current=window.location.href,r().default.hasSelection()&&(u.current.textSelectionState=r().default.cloneState()),(0,o(755125).clear)({environment:l}),t&&(i().default.isSelected()&&(u.current.selectionState=i().default.cloneState()),(0,o(440024).I)({environment:l}))}),[l,t]),f=(0,n.useCallback)((()=>{u.current={selectionState:null,textSelectionState:null},d.current="",null==s||s()}),[s]),v=(0,n.useCallback)((()=>{const{selectionState:e,textSelectionState:o}=u.current;window.location.href===d.current&&(o&&"mode"in o&&"editing"===o.mode&&r().default.setState({...r().default.state,...o}),t&&e&&i().default.setState({...i().default.state,...e})),f()}),[f,t]);return(0,o(852507).l)((()=>{c.current=e,e&&m()})),(0,n.useEffect)((()=>(c.current&&!e?a?v():f():!c.current&&e&&m(),c.current=e,()=>{a?v():f()})),[e,f,v,m,a]),{clearSavedSelection:f,restoreSavedSelection:v,getSavedSelection:p}}},704658:(e,t,o)=>{o.r(t),o.d(t,{UpgradeButton:()=>h});o(296540);var n=()=>o(593531),r=()=>o(406094),i=()=>o(69708),a=()=>o(86269),s=()=>o(839897),l=()=>o(674482),c=()=>o(24796),d=o(474848);function u(e){var t;const{upgradeStatus:o,handleClick:n,size:u="default",width:p="fill",hoverRef:m,onMouseDown:f,upsell:v,featureName:h}=e,y=(0,i().tz)(),g=(0,s().e)(o),S=g.label.button({intl:y,upsell:v,featureName:h}),b=Boolean(g.disabledTooltip),x=(0,a().Lo)({width:p}),{animationState:_,animationTriggers:w}=(0,a().lP)(m);return(0,d.jsx)(c().T,{tooltipMessage:b&&!m?null===(t=g.disabledTooltip)||void 0===t?void 0:t.call(g,{intl:y,upsell:v,featureName:h}):void 0,children:(0,d.jsx)(r().A,{...m?{}:w,disabled:b,hoveredStyle:m?{background:"unset"}:void 0,size:l().lR[u],iconLeading:{...(0,a().e4)({icon:g.icon({upsell:v}),animationState:_}),size:l().Ud[u]},style:x,onClick:n,onMouseDown:f,children:S})})}var p=()=>o(160432);function m(e){var t;const{upsell:o,upgradeStatus:n,handleClick:r,onMouseDown:a,featureName:u}=e,m=(0,i().tz)(),f=(0,s().e)(n),v=f.label.button({intl:m,upsell:o,featureName:u}),h=Boolean(f.disabledTooltip);return(0,d.jsx)(c().T,{tooltipMessage:h?null===(t=f.disabledTooltip)||void 0===t?void 0:t.call(f,{intl:m,upsell:o,featureName:u}):void 0,children:(0,d.jsx)(p().A,{colorPalette:"blue",disabled:h,size:l().lR.default,onClick:r,onMouseDown:a,children:v})})}var f=()=>o(986321),v=()=>o(408543);function h({source:e,upsell:t,featureName:o,hoverRef:r,onMouseDown:i,postUpgradeCallback:a,onClickBeforeUpgradeAction:s,spaceStore:l,...c}){const{upgradeEligibility:p,handleClick:h}=(0,v().C)({upsell:t,source:e,buttonDisplayType:c.display,onClickBeforeUpgradeAction:s,postUpgradeCallback:a,spaceStore:l});if(!p||"not_eligible"===p.status&&"feature_not_upsellable"===p.reason)return null;switch(c.display){case"button":return(0,d.jsx)(u,{upgradeStatus:p.status,handleClick:h,upsell:t,featureName:o,hoverRef:r,onMouseDown:i,...c});case"icon":return(0,d.jsx)(n().c,{upgradeStatus:p.status,handleClick:h,upsell:t,featureName:o,hoverRef:r,onMouseDown:i,...c});case"text":return(0,d.jsx)(f().c,{upgradeStatus:p.status,handleClick:h,upsell:t,featureName:o,hoverRef:r,onMouseDown:i,...c});case"primary":return(0,d.jsx)(m,{upgradeStatus:p.status,handleClick:h,upsell:t,featureName:o,onMouseDown:i,...c})}}},709438:(e,t,o)=>{o.d(t,{m:()=>l});o(296540);var n=()=>o(401497),r=()=>o(69708),i=()=>o(100622),a=o(474848);const s=8;function l({color:e,size:t,style:o}){const l=(0,r().tz)(),c=(0,n().IS)((()=>({dot:{height:t||s,width:t||s,background:e||i().Tj.blue.icon.accentPrimary,flexShrink:0,borderRadius:"100%",pointerEvents:"none",...o}})),[t,e,o]);return(0,a.jsx)("div",{role:"img","aria-label":l.formatMessage({id:"statusDot.ariaLabel",defaultMessage:"New"}),style:c.dot})}},721253:(e,t,o)=>{o.d(t,{lv:()=>y,C5:()=>v,u7:()=>f,uh:()=>h});var n=()=>o(560198),r=()=>o(267785),i=()=>o(100622);const a="theme";var s=()=>o(534177),l=()=>o(44551);var c=()=>o(20822),d=()=>o(661179);const u=15;function p(e,t){const{ThemeStore:o}=e,{mode:s,usingSystemTheme:c}=t;if(n()._u)return;const d={mode:s};var u,p;o.setState(d),e.mobileNative&&e.mobileNative.setTheme(s,c),u=function(e,t){const o=(0,i().O4)({theme:e});return{mode:e,usingSystemTheme:t,colors:{white:i().oZ.white,blue:i().oZ.blue},borderRadius:4,textColor:o.text.primary,popoverBackgroundColor:o.popoverBackground,popoverBoxShadow:o.shadowMD,inputBoxShadow:o.inputBoxShadow,inputBackgroundColor:o.inputBackground,dividerColor:o.border.primaryTranslucent,shadowOpacity:0}}(s,c),null===l().electronApi||void 0===l().electronApi||null===(p=l().electronApi.setTheme)||void 0===p||p.call(l().electronApi,u);try{localStorage.setItem(a,JSON.stringify(d))}catch(m){(0,r().x)(a,JSON.stringify(d),"ThemeActions",m)}f(s),"dark"===s?(document.body.classList.add("dark"),document.body.classList.add("notion-dark-theme")):(document.body.classList.remove("dark"),document.body.classList.remove("notion-dark-theme"))}const m={scrollbarTrack:{light:"rgba(0, 0, 0, 0)",dark:"rgba(0, 0, 0, 0)"},scrollbarThumb:{light:"#D3D1CB",dark:"rgba(255, 255, 255, 0.2)"}};function f(e){if(0===d().A.state)return;const t=document.getElementById("scroll-properties");t&&(t.innerHTML=`\n\t\t* {\n\t\t\tscrollbar-width: ${u}px;\n\t\t\tscrollbar-color: ${m.scrollbarThumb[e]}  ${m.scrollbarTrack[e]};\n\t\t}\n\t`)}function v(e){c().A.setState(e)}function h(e){const t=y();switch(t){case"dark":case"light":p(e,{mode:t,usingSystemTheme:!1});break;case"system":!async function(e){const{mobileNative:t}=e;let o="light";o=t&&t.api.getTheme?await t.api.getTheme():(0,n().VD)(e),p(e,{mode:o,usingSystemTheme:!0})}(e);break;default:(0,s().HB)(t)}}function y(){const e=c().A.state||"system";return"dark"===(t=e)||"light"===t||"system"===t?t:"system";var t}},736767:(e,t,o)=>{o.d(t,{A:()=>a});var n=o(296540),r=o(474848);function i(e,t){return(0,r.jsx)(o(424400).Ay,{...e,ref:t,style:{background:"none",borderBottom:"none",boxShadow:"",marginTop:2,marginBottom:6,paddingTop:4,paddingBottom:4,minHeight:"none",...e.style}})}const a=(0,n.forwardRef)(i)},738508:(e,t,o)=>{o.r(t),o.d(t,{cursorIcon:()=>i,iconDefinition:()=>r});o(296540);var n=o(474848);const r={viewBox:"0 0 20 20",fittedViewBox:"1.25 0 17.5 20",svg:(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)("g",{className:"logo-light-mode",children:[(0,n.jsxs)("g",{clipPath:"url(#clip0_16020_205)",children:[(0,n.jsx)("path",{fill:"#757575",d:"m9.995 9.987 8.658 4.999a.6.6 0 0 1-.226.226l-8.092 4.672a.68.68 0 0 1-.68 0l-8.092-4.672a.6.6 0 0 1-.226-.226z"}),(0,n.jsx)("path",{fill:"#525252",d:"M9.995 0v9.987l-8.658 4.999a.6.6 0 0 1-.082-.309v-9.38c0-.22.117-.424.308-.534L9.655.09a.7.7 0 0 1 .34-.09"}),(0,n.jsx)("path",{fill:"#404040",d:"M18.652 4.989a.6.6 0 0 0-.225-.226L10.334.09A.7.7 0 0 0 9.995 0v9.987l8.658 4.999a.6.6 0 0 0 .083-.309v-9.38c0-.11-.03-.216-.083-.308"}),(0,n.jsx)("path",{fill:"#D9D9D9",d:"M18.047 5.339a.29.29 0 0 1 0 .29l-7.859 13.61c-.053.093-.193.055-.193-.05v-8.97a.4.4 0 0 0-.054-.201z"}),(0,n.jsx)("path",{fill:"#fff",d:"m18.047 5.339-8.106 4.68a.4.4 0 0 0-.147-.147L2.027 5.387c-.092-.053-.054-.193.052-.193h15.717c.111 0 .202.06.25.145"})]}),(0,n.jsx)("defs",{children:(0,n.jsx)("clipPath",{id:"clip0_16020_205",children:(0,n.jsx)("path",{fill:"#fff",d:"M1.255 0h17.49v20H1.256z"})})})]}),(0,n.jsxs)("g",{className:"logo-dark-mode",children:[(0,n.jsxs)("g",{clipPath:"url(#clip0_16020_213)",children:[(0,n.jsx)("path",{fill:"#6E6E6E",d:"m9.995 9.987 8.658 4.999a.6.6 0 0 1-.226.226l-8.092 4.672a.68.68 0 0 1-.68 0l-8.092-4.672a.6.6 0 0 1-.226-.226z"}),(0,n.jsx)("path",{fill:"#4A4A4A",d:"M9.995 0v9.987l-8.658 4.999a.6.6 0 0 1-.082-.309v-9.38c0-.22.117-.424.308-.534L9.655.09a.7.7 0 0 1 .34-.09"}),(0,n.jsx)("path",{fill:"#383838",d:"M18.652 4.989a.6.6 0 0 0-.225-.226L10.334.09A.7.7 0 0 0 9.995 0v9.987l8.658 4.999a.6.6 0 0 0 .083-.309v-9.38c0-.11-.03-.216-.083-.308"}),(0,n.jsx)("path",{fill:"#C9C9C9",d:"M18.047 5.339a.29.29 0 0 1 0 .29l-7.859 13.61c-.053.093-.193.055-.193-.05v-8.97a.4.4 0 0 0-.054-.201z"}),(0,n.jsx)("path",{fill:"#fff",d:"m18.047 5.339-8.106 4.68a.4.4 0 0 0-.147-.147L2.027 5.387c-.092-.053-.054-.193.052-.193h15.717c.111 0 .202.06.25.145"})]}),(0,n.jsx)("defs",{children:(0,n.jsx)("clipPath",{id:"clip0_16020_213",children:(0,n.jsx)("path",{fill:"#fff",d:"M1.255 0h17.49v20H1.256z"})})})]})]})},i=(0,o(340498).wt)("cursor",r,"default")},742734:(e,t,o)=>{o.d(t,{E:()=>a});var n=()=>o(230711),r=()=>o(590526),i=()=>o(304228);function a(e){const{spaceStore:t,viewedUserId:o}=e,a=(0,n().nB)(t),s=(0,n().V_)({spaceStore:t,userId:o});return(0,r().K8)((()=>(0,i().V)({spaceStore:t,actorRole:a,viewedRole:s})),[t,a,s])}},748054:(e,t,o)=>{o.d(t,{M:()=>r});o(296540);const n={viewBox:"0 0 20 20",fittedViewBox:"3.97 2.68 12.51 14.37",svg:(0,o(474848).jsx)("path",{d:"M10.282 3.66a5.39 5.39 0 0 0-5.217-.54l-.711.305a.63.63 0 0 0-.38.575v12.425a.625.625 0 1 0 1.25 0v-3.913l.333-.142a4.14 4.14 0 0 1 4.008.414 5.39 5.39 0 0 0 5.504.405l1.06-.53a.63.63 0 0 0 .346-.56V4a.625.625 0 0 0-.905-.558l-1.06.53c-1.36.68-2.983.56-4.228-.312m-5.057 7.495V4.412l.332-.142a4.14 4.14 0 0 1 4.008.413 5.39 5.39 0 0 0 5.504.406l.156-.078v6.703l-.715.357c-1.36.68-2.983.56-4.228-.312a5.4 5.4 0 0 0-5.057-.604"})},r=(0,o(340498).wt)("flag",n,"default")},748539:(e,t,o)=>{o.d(t,{f:()=>n});const n=new(o(79926).O2)("pageCovers",(async()=>{const{pageCovers:e}=await o.e(40198).then(o.bind(o,519737));return e}))},756114:(e,t,o)=>{o.d(t,{D:()=>n});function n(e,t){t.route.name;return!1}},757491:(e,t,o)=>{o.d(t,{l:()=>r});var n=o(296540);function r(e){return(0,n.useEffect)((()=>()=>e()),[])}},763765:(e,t,o)=>{o.d(t,{t:()=>r});class n extends(()=>o(757695))().Store{getInitialState(){return{loaded:!1}}USEWITHCAUTION_markStatsigUserFetched(e){const{userId:t,spaceId:o,fetched:n}=e;this.setState({loaded:n,userId:t,spaceId:o})}USEWITHCAUTION_isFetchedForSpaceAndUserId(e){const{spaceId:t,userId:o}=e;return this.state.loaded&&this.state.spaceId===t&&this.state.userId===o}}const r=new n;(0,o(852832).exposeDebugValue)("statsigUserLoadingStatusStore",r)},766854:(e,t,o)=>{o.d(t,{H:()=>_,Q:()=>x});o(898992),o(672577);var n=()=>o(230711),r=()=>o(907258),i=()=>o(135168),a=()=>o(242422),s=()=>o(929219),l=()=>o(711339),c=()=>o(295633),d=()=>o(700500),u=()=>o(179034),p=()=>o(201980),m=()=>o(384944),f=()=>o(649813),v=()=>o(390650),h=()=>o(381678),y=()=>o(622811),g=()=>o(491848),S=()=>o(482871);function b(e,t,o){const r=(0,h()._)(e),i=null==r?void 0:r.id;if(!i||!o)return;if(!a().default.checkGate({gateName:"full_access_for_created_collection_pages"}))return;if(t.canAdmin())return;const s=t.getSpaceStore();return s&&(0,n().dp)(s,i).isMember()?[{role:"editor",type:"user_permission",user_id:i}]:void 0}function x(e){const{collectionContextStore:t,transaction:o}=e;return(0,g().w)({collectionContextStore:t,transaction:o}),_(e)}function _(e){var t,o,n;const{environment:h,collectionContextStore:g,groupsPointer:x,insertAtIndex:_,shouldCoerce:w,templateStore:M,transaction:T,from:C,tracker:k,inMemoryRecordCache:I,isKeyboard:A,title:j}=e,R=l().default.DO_NOT_USE_markLegacy("collections.add_item_lag");l().default.DO_NOT_USE_measureAfterNextFlushLegacy(R,{environment:h,getData:()=>({...v().kz(g),from:C.createBlock})});const E="collectionTypedView"===g.contextTypeFromStoreState,B=g.databaseTypeFromStoreState,O=g.collectionStoresStore.state,V=O.find((e=>e.canEdit()||e.canEditCollection()||e.canEditContentOnly()))||O[0],P=null===(t=(0,i().f)(V))||void 0===t?void 0:t.id,D=r().default.state.currentUserSettingsStore,U=E&&B&&P&&D&&[...D.getAllPreferredCollections(P),...D.getPreferredCollectionsOfType(P,B)]||[];let N;const F=x[0];if("group_header"===C.createBlock&&"location"===F.value.type){const e=F.value.value;if(e){N=O.find((t=>t.id===e.id&&(t.canEdit()||t.canEditCollection()||t.canEditContentOnly())))}}else N=function(e,t){for(const o of e){const e=t.find((e=>e.id===o&&(e.canEdit()||e.canEditCollection()||e.canEditContentOnly())));if(e)return e}}(U,O);const L=N??V,z=null==L?void 0:L.getSpaceId(),W=g.collectionViewStore(),H=g.getViewType(),q=m().Wv({environment:h,type:d().xd.page,inMemoryRecordCache:I,transaction:T,spaceId:z,tracker:k,permissions:b(h,L,z),properties:{title:(0,p().x9d)(j)}});if(!L||!W||!H)return{coercionSucceeded:!0,newStore:q};const K=null===(o=g.groupsStore.getGroupState(x))||void 0===o?void 0:o.groupUiParentStore;if(!K)return{coercionSucceeded:!0,newStore:q};const G=c().B.createChildStore(K,{table:u().ev,id:q.id});M&&s().A.state.online&&f().TB({title:"template",environment:h,store:q,templateStore:M,isKeyboard:A??!1,isCreateIn:!1,transaction:T,from:C.initCollection??"collection_group_actions"});const $=(0,y().j)({environment:h,store:q,collectionStore:L,collectionContextStore:g,groupsPointer:x,shouldCoerce:w,transaction:T}),Y=(null===(n=g.groupsStore.getGroupState(x))||void 0===n||null===(n=n.reducerResultStore.state)||void 0===n?void 0:n.blockIds)||[],Q=void 0!==_?_:Y.length,Z=g.permissionScopesStore.state;if((a().default.checkGate({gateName:"can_create_pages_in_collection_permission"})?Z.canCreatePagesInCollection:Z.canEditContent)||E){const e=[...Y.slice(0,Q),G.id,...Y.slice(Q)];(0,S().z)({resultIds:e,collectionViewStore:W,collectionContextStore:g,transaction:T})}return{coercionSucceeded:$,newStore:G}}},791177:(e,t,o)=>{o.d(t,{$:()=>r});var n=o(296540);function r(){const[e,t]=(0,n.useState)({inputElementAttributes:void 0,suppressFocusRing:!1}),[o,r]=(0,n.useState)(!1),[i,a]=(0,n.useState)(!1);(0,n.useEffect)((()=>{if(o){function e(){a(!1)}function t(e){"ArrowDown"!==e.key&&"ArrowUp"!==e.key||a(!0)}return window.addEventListener("pointerdown",e),window.addEventListener("keydown",t),()=>{window.removeEventListener("pointerdown",e),window.removeEventListener("keydown",t)}}}),[o]);return[(0,n.useMemo)((()=>({inputElementAttributes:e.inputElementAttributes,suppressFocusRing:e.suppressFocusRing&&i,onFocus:()=>{r(!0)},onBlur:()=>{r(!1)}})),[e,i]),(0,n.useMemo)((()=>({setComboboxState:t,isFocusVisible:i,isComboboxFocused:o,onItemHover:()=>{a(!1)}})),[i,o])]}},797324:(e,t,o)=>{o.d(t,{A:()=>v});var n=o(296540),r=()=>o(560520),i=()=>o(484714),a=()=>o(790748),s=()=>o(581010),l=()=>o(69708),c=()=>o(100622),d=()=>o(284371),u=()=>o(396406),p=()=>o(718827),m=()=>o(843798),f=o(474848);function v(e){const{onDismiss:t,inputRef:o}=e,v=(0,i().Y0)(),h=(0,n.useRef)(null),y=v.isMobileNative&&v.isIOS,g=y&&e.show;(0,a().b)(s().A,(()=>({getNode:()=>h.current,isShown:()=>g})),[g]);const S=(0,r().n)(),b=(0,n.useCallback)((()=>{var e;null==o||null===(e=o.current)||void 0===e||e.focus(),t&&t();const n=document.activeElement;n instanceof HTMLElement&&n.blur()}),[o,t]);if(!y)return null;const x=g?-(m().j+S):0;return(0,f.jsx)(u().O,{open:!0,children:(0,f.jsx)("div",{style:{position:"fixed",top:"100vh",width:"100%",height:m().j,display:g?"flex":"none",alignItems:"center",justifyContent:"flex-end",backgroundColor:c().Tj.keyboardDoneBarBackground,transform:`translateY(${x}px)`,transition:g?"ease-out":"ease-in",boxShadow:g?`\n\t\t\t\t\t\t\t\t0 -1px 0 ${c().Tj.border.primaryTranslucent}\n\t\t\t\t\t\t\t`:void 0},ref:h,children:(0,f.jsx)(p().Ay,{style:{display:"flex",alignItems:"center",marginInlineEnd:16,color:c().oZ.blue,fontWeight:d().Wy.semibold},onTouchEnd:()=>{b()},children:(0,f.jsx)(l().sA,{defaultMessage:"Done",id:"mobile.dismissKeyboardBar.button.label"})})})})}},803960:(e,t,o)=>{o.r(t),o.d(t,{arrowChevronSingleDownIcon:()=>r,iconDefinition:()=>n});o(296540);const n={viewBox:"0 0 20 20",fittedViewBox:"3.97 6.97 12.06 6.66",svg:(0,o(474848).jsx)("path",{d:"M9.558 13.442c.244.244.64.244.884 0l5.4-5.4a.625.625 0 0 0-.884-.884L10 12.116 5.042 7.158a.625.625 0 1 0-.884.884z"})},r=(0,o(340498).wt)("arrowChevronSingleDown",n,"default")},838364:(e,t,o)=>{o.d(t,{H:()=>n});const n=52},839754:(e,t,o)=>{o.d(t,{Bi:()=>T,My:()=>M,ZM:()=>k,_M:()=>C,navigateToWorkflowTemplateOnboardingModal:()=>I});o(16280),o(944114),o(517642),o(658004),o(733853),o(845876),o(432475),o(515024),o(731698),o(898992),o(354520),o(672577),o(581454);var n=()=>o(907258),r=()=>o(295633),i=()=>o(584262),a=()=>o(663077),s=()=>o(179034),l=()=>o(201980),c=()=>o(896628),d=()=>o(384944),u=()=>o(730969),p=()=>o(840153),m=()=>o(339798),f=()=>o(180762),v=()=>o(799832),h=()=>o(111379),y=()=>o(535960),g=()=>o(31173),S=()=>o(295304),b=()=>o(244828),x=()=>o(373444),_=()=>o(165592),w=()=>o(204067);function M({transaction:e,collectionStore:t,propertyTemplates:o}){var n;const r=(null===(n=t.getParentBlockStore())||void 0===n?void 0:n.getCollectionViewStores().filter((e=>"table"===e.getType())))??[];if(0===r.length)return;const i=[];for(const l of o){const e=(0,w().S1)({collectionStore:t,templateId:l.templateId,instancePointerType:"property"});e&&i.push({property:e.id,visible:!(0,a().Sz)(l),...l.tablePropertyFormat})}if(0!==i.length)for(const a of r){var s;const t=(null===(s=a.getPropertyFormatsStore("table_properties"))||void 0===s?void 0:s.getValue())??[],o=new Set(t.map((e=>e.property))),n=i.filter((e=>!o.has(e.property)));0!==n.length&&c().zA({stores:[a],update:{table_properties:[...t,...n]},transaction:e})}}function T({transaction:e,collectionStore:t,propertyTemplates:o}){const n=[];for(const s of o){const e=(0,w().S1)({collectionStore:t,templateId:s.templateId,instancePointerType:"property"});e&&n.push({property:e.id,visible:!0})}const r=t.getFormat().collection_page_properties??[],i=new Set(r.map((e=>e.property))),a=n.filter((e=>!i.has(e.property)));a.length&&c().zA({stores:[t],update:{collection_page_properties:[...r,...a]},transaction:e})}function C({environment:e,newPageStore:t,result:o}){"accepted_template"!==o.type&&"accepted_empty_collection"!==o.type||b().createAndCommit({environment:e,canUndo:!1,perform:n=>{const i=t.getTitleValue();if(d().zv({store:t,transaction:n,data:{alive:!1}}),"accepted_empty_collection"===o.type&&!(0,l().w9s)(i)){const a=r().B.createChildStore(t,{table:"block",id:o.blockId}).getTitleStore();a&&S().yr({environment:e,transaction:n,tokens:i,index:0,store:a})}const a=t.getParentStore();if((null==a?void 0:a.table)===s().ev){const e=a.getContentIds();d().zv({store:a,transaction:n,data:{content:e.filter((e=>e!==t.id))}})}},userAction:"clean_up_empty_new_page"})}function k({environment:e,userAction:t,result:o,existingCollectionViewBlockStore:n,existingCollectionStore:r}){if("canceled"!==o.type){if("accepted_empty_collection"===o.type&&r){const n=r.getKeyStore("name"),i=(0,l().x9d)(o.newCollectionTitle);n&&b().createAndCommit({userAction:t,environment:e,canUndo:!0,perform:t=>S().R9({environment:e,store:n,transaction:t,value:i})})}if(n){var i;const e=null===(i=(0,v().U)(n))||void 0===i?void 0:i.settingsStore;e&&m().os({collectionSettingsStore:e})}if("accepted_template"===o.type&&null!=n&&n.isCollectionView()&&(null==n||!n.hasSingleSourceAndNoLinkedCollections())){const t=(0,v().U)(n),r=n.getCollectionViewStores().find((e=>{var t;return(null===(t=e.getCollectionStore())||void 0===t?void 0:t.id)===o.collectionId}));if(!t||!r)return;(0,f().t)({environment:e,collectionContextStore:t,collectionViewId:r.id,isFullScreen:t.isFullScreenStore.state,isRootChild:t.isRootChildStore.state,isInPeekRenderer:t.isInPeekRendererStore.state})}}}async function I({environment:e,collectionViewBlockStore:t}){const o=t.id;if(!t.isDefined()){const n=await(0,g().$)({environment:e,blockId:o});if(!n)return;e=await p().T({environment:e,newCurrentUserId:n}),t=new(r().B)(e,{table:s().ev,id:o}),await t.load()}const a=t.getSpaceId();if(!a)throw new Error("Space ID not found for collection block");const l=(0,h().k)(a);if(!l)throw new Error(`Space view not found for space ID: ${a}`);const{sidebarSpaceStore:c}=n().default.state;(null==c?void 0:c.id)!==a&&await(0,u().y)({environment:e,spaceViewStore:l});const d=t.getFormat();if("workflow_template_placeholder"===(null==d?void 0:d.collection_view_sub_type)&&null!=d&&d.placeholder_workflow_template_id&&t.isCollectionView()){const{getCollectionTemplateFromId:o}=await _().t.load(),n=o(d.placeholder_workflow_template_id);if(!n)throw new Error(`Collection template "${d.placeholder_workflow_template_id}" not found`);const{onNavigateToPlaceholderWorkflowTemplateBlock:r}=await x().O.load();r({environment:e,collectionTemplate:n,collectionViewBlockStore:t})}else(0,y().u)({environment:e,store:t,pageVisitSource:i().y8.WorkflowTemplatesDeeplink})}},888325:(e,t,o)=>{function n(e){return`${e.table}:${e.id}`}o.d(t,{_:()=>n})},890409:(e,t,o)=>{o.d(t,{Ah:()=>y,Dk:()=>f,Iv:()=>h,SF:()=>v,YO:()=>b,_f:()=>_,c_:()=>p,dW:()=>S,gW:()=>m,sp:()=>w,vN:()=>g});o(16280),o(944114),o(898992),o(354520),o(803949),o(581454),o(737550);var n=()=>o(496603),r=()=>o(973647),i=()=>o(534177),a=()=>o(842599),s=()=>o(239381),l=()=>o(179034),c=()=>o(798880),d=()=>o(201980),u=()=>o(241319);function p(e,t){e.DO_NOT_USE_commonTrackEvent({eventName:"add_automation_step",properties:t})}function m(e,t){e.DO_NOT_USE_commonTrackEvent({eventName:"delete_automation_step",properties:t})}function f(e,t){e.DO_NOT_USE_commonTrackEvent({eventName:"automation_create",properties:t})}function v(e,t){e.DO_NOT_USE_commonTrackEvent({eventName:"automation_update",properties:t})}function h(e,t){e.DO_NOT_USE_commonTrackEvent({eventName:"automation_delete",properties:t})}function y(e,t){e.DO_NOT_USE_commonTrackEvent({eventName:"automation_enable",properties:t})}function g(e,t){e.DO_NOT_USE_commonTrackEvent({eventName:"automation_disable",properties:t})}function S(e,t){e.DO_NOT_USE_commonTrackEvent({eventName:"automation_action_create",properties:t})}function b(e,t){e.DO_NOT_USE_commonTrackEvent({eventName:"automation_action_delete",properties:t})}function x(e){const{formulaAnalyticsModule:t,formulasModule:o,formulaTypecheckContextValues:n,getRecordModel:a,spaceId:l,value:c,featureGates:d}=e;if("formula"===c.type){if(!(0,i().O9)(c.value))return;const e=r().Q.unwrapOr(o.parseFormulaInputToAst(c.value),void 0);if(e){const r=o.addTypesToFormulaAST(e,{handleDataRequest:(0,s().zg)(a),spaceId:l,valueTypes:n,featureGates:d});return{...t.getFormulaAnalytics(e,{getRecordModel:a,typecheckContextValues:n}),formula_return_type:r.node.type,redacted_formula:t.getRedactedFormulaAsStringSync(e,{getRecordModel:a,typecheckContextValues:n})}}}else{if("simple"===c.type){if(!(0,i().O9)(c.value))return;return t.getSimpleFormulaAnalytics(c.value,{getRecordModel:a,typecheckContextValues:n})}(0,i().HB)(c.type)}}function _(e){const{automationActionModel:t,automationActionModels:o,formulaAnalyticsModule:r,formulasModule:l,formulaTypecheckContextValues:p,getRecordModel:m,featureGates:f,simpleFormulasModule:v}=e;return t.isType("complete_sprint")?{automation_action_id:t.pointer.id,type:"complete_sprint"}:t.isType("create_page")?function(e){const{automationActionModel:t,formulaAnalyticsModule:o,formulasModule:n,formulaTypecheckContextValues:r,getRecordModel:a,featureGates:s}=e,l=t.getConfig();let c,d=[];const u=null==l?void 0:l.collection,p=null==l?void 0:l.properties;if((0,i().O9)(u)&&(0,i().O9)(p)&&p.length>0){const e=a(u),f=null==e?void 0:e.getNormalizedSchema();(0,i().O9)(f)&&(d=p.map((e=>{var t;return(null===(t=f[e])||void 0===t?void 0:t.type)??"unknown"})));const v=null==l?void 0:l.values;if(n&&(0,i().O9)(v)){c=[];for(const e of p){var m;const i=null===(m=v[e])||void 0===m?void 0:m.value;if(!i)continue;const l=x({formulaAnalyticsModule:o,formulasModule:n,getRecordModel:a,formulaTypecheckContextValues:r,spaceId:t.spaceId,value:i,featureGates:s});l&&c.push(l)}}}return{automation_action_id:t.pointer.id,property_formula_stats:c,property_types:d,type:"create_page"}}({automationActionModel:t,formulaAnalyticsModule:r,formulasModule:l,formulaTypecheckContextValues:p,getRecordModel:m,featureGates:f}):t.isType("duplicate_blocks")?{automation_action_id:t.pointer.id,type:"duplicate_blocks"}:t.isType("modal_confirmation")?function(e){const{automationActionModel:t,formulaAnalyticsModule:o,formulasModule:n,formulaTypecheckContextValues:r,getRecordModel:a,featureGates:s}=e,l=t.getConfig(),c=[];if(n&&(0,i().O9)(l)&&l.text){const e=x({formulasModule:n,formulaAnalyticsModule:o,getRecordModel:a,formulaTypecheckContextValues:r,spaceId:t.spaceId,value:l.text,featureGates:s});e&&c.push(e)}return{automation_action_id:t.pointer.id,formula_stats:c,type:"modal_confirmation"}}({automationActionModel:t,formulaAnalyticsModule:r,formulasModule:l,formulaTypecheckContextValues:p,getRecordModel:m,featureGates:f}):t.isType("open_page")?{automation_action_id:t.pointer.id,type:"open_page"}:t.isType("query_collection")?{automation_action_id:t.pointer.id,type:"query_collection"}:t.isType("send_in_app_notification")?function(e){var t;const{automationActionModel:o,formulaAnalyticsModule:n,formulasModule:r,formulaTypecheckContextValues:a,getRecordModel:s,featureGates:l,simpleFormulasModule:c}=e,u={automation_action_id:o.pointer.id,messageCharacterCount:0,type:"send_in_app_notification"},p=o.getConfig();if(!(0,i().O9)(p))return u;if((0,i().O9)(p.target))if("formula"===p.target.type&&(0,i().O9)(p.target.value)){if(u.targetData={type:"formula",numUserFormulaTargets:(0,d().Fbh)(p.target.value.value).length,numFormulaContextTargets:c.getReferencedContextValueIds(p.target.value).length},r){const e=x({formulasModule:r,formulaAnalyticsModule:n,getRecordModel:s,formulaTypecheckContextValues:a,spaceId:o.spaceId,value:p.target.value,featureGates:l});e&&(u.formula_stats??=[],u.formula_stats.push(e))}}else if("property"===p.target.type&&(0,i().O9)(p.target.propertyId)&&(0,i().O9)(p.target.collectionPointer)){const e=s(p.target.collectionPointer),t=null==e?void 0:e.getSchema();var m;(0,i().O9)(t)&&(u.targetData={type:"property",propertyType:null===(m=t[p.target.propertyId])||void 0===m?void 0:m.type})}if((0,i().O9)(null===(t=p.notification_message)||void 0===t?void 0:t.value)&&(u.messageCharacterCount=(0,d().FAw)(p.notification_message.value),r)){const e=x({formulasModule:r,formulaAnalyticsModule:n,getRecordModel:s,formulaTypecheckContextValues:a,spaceId:o.spaceId,value:p.notification_message,featureGates:l});e&&(u.formula_stats??=[],u.formula_stats.push(e))}return u}({automationActionModel:t,formulaAnalyticsModule:r,formulasModule:l,formulaTypecheckContextValues:p,getRecordModel:m,featureGates:f,simpleFormulasModule:v}):t.isType("send_gmail_notification")?function(e){var t,o,r,s,l,u,p;const{automationActionModel:m,formulaAnalyticsModule:f,formulasModule:v,formulaTypecheckContextValues:h,getRecordModel:y,featureGates:g}=e,S=m.getConfig();if(!(0,i().O9)(S))return{automation_action_id:m.pointer.id,fields:{},recipient_domains:{},type:"send_gmail_notification"};const b=Object.fromEntries(Object.entries(S||{}).map((([e,t])=>{var o;return"formula"===(null==t?void 0:t.type)?[e,Boolean(null==t||null===(o=t.value)||void 0===o?void 0:o.value)]:"simple"===(null==t?void 0:t.type)?[e,Boolean(null==t?void 0:t.value)]:[e,Boolean(t)]}))),{to:_,cc:w,bcc:M}=S,T=[...(null==_||null===(t=_.value)||void 0===t?void 0:t.value)||[],...(null==w||null===(o=w.value)||void 0===o?void 0:o.value)||[],...(null==M||null===(r=M.value)||void 0===r?void 0:r.value)||[]],C=[...(0,d().Fbh)(T).map((e=>y({table:c().oo,id:e}))).map((e=>null==e?void 0:e.email)).filter(i().O9),...(0,a().C3)((0,d().k4p)(T))],k=n().Tr(C.map((e=>e.split("@")[1]))),I=[null===(s=S.to)||void 0===s?void 0:s.value,null===(l=S.cc)||void 0===l?void 0:l.value,null===(u=S.bcc)||void 0===u?void 0:u.value,null===(p=S.reply_to)||void 0===p?void 0:p.value,S.from_name,S.email_subject,S.email_body].map((e=>{if(v&&(0,i().O9)(e))return x({formulaAnalyticsModule:f,formulasModule:v,getRecordModel:y,formulaTypecheckContextValues:h,spaceId:m.spaceId,value:e,featureGates:g})})).filter(i().O9);return{automation_action_id:m.pointer.id,fields:b,formula_stats:I,recipient_domains:k,type:"send_gmail_notification"}}({automationActionModel:t,formulaAnalyticsModule:r,formulasModule:l,formulaTypecheckContextValues:p,getRecordModel:m,featureGates:f}):t.isType("slack_notification")?{automation_action_id:t.pointer.id,type:"slack_notification"}:t.isType("update_pages")?function(e){const{automationActionModel:t,automationActionModels:o,formulaAnalyticsModule:n,formulasModule:r,formulaTypecheckContextValues:a,getRecordModel:l,featureGates:c}=e,d=t.getConfig(),p=[],m=[],f=[];if((0,i().O9)(d)&&(0,i().O9)(d.target)&&(0,i().O9)(d.properties)&&d.properties.length>0){let e;if("variable"===d.target.type){const t=(0,s().y5)(d.target.id);if("action"===t.source){const t=(0,u().y)({actionModels:o,id:d.target.id}).collectionPointer;if((0,i().O9)(t)){const o=l(t);e=null==o?void 0:o.getNormalizedSchema()}}else{if("global"!==t.source||"button_page"!==t.global)throw new Error("Failed loading property schema");{const t=(0,s().IV)(a,d.target.id);if("block"===(null==t?void 0:t.type.type)&&(0,i().O9)(t.type.collection)){const o=l(t.type.collection);e=null==o?void 0:o.getNormalizedSchema()}}}}else if("collection"===d.target.type){const t=l(d.target.collection);e=null==t?void 0:t.getNormalizedSchema()}(0,i().O9)(e)&&d.properties.forEach((o=>{const s=e[o];if((0,i().O9)(s)&&(p.push(s.type),r&&(0,i().O9)(d.values))){const e=d.values[o];if((0,i().O9)(e)&&(m.push({type:s.type,operator:e.action}),e.value)){const o=x({formulasModule:r,formulaAnalyticsModule:n,getRecordModel:l,formulaTypecheckContextValues:a,spaceId:t.spaceId,value:e.value,featureGates:c});o&&f.push(o)}}}))}return{automation_action_id:t.pointer.id,property_configs:m,property_formula_stats:f,property_types:p,type:"update_pages"}}({automationActionModel:t,automationActionModels:o,formulaAnalyticsModule:r,formulasModule:l,formulaTypecheckContextValues:p,getRecordModel:m,featureGates:f}):t.isType("define_variables")?function(e){const{automationActionModel:t,formulaAnalyticsModule:o,formulasModule:n,formulaTypecheckContextValues:r,getRecordModel:a,featureGates:s}=e,l=t.getConfig(),c=[];if(n&&(0,i().O9)(l)&&l.values)for(const i of Object.values(l.values))if(i.value){const e=x({formulasModule:n,formulaAnalyticsModule:o,getRecordModel:a,formulaTypecheckContextValues:r,spaceId:t.spaceId,value:i.value,featureGates:s});e&&c.push(e)}return{automation_action_id:t.pointer.id,formula_stats:c,type:"define_variables"}}({automationActionModel:t,formulaAnalyticsModule:r,formulasModule:l,formulaTypecheckContextValues:p,getRecordModel:m,featureGates:f}):t.isType("http_request")?{automation_action_id:t.pointer.id,type:"http_request"}:t.isType("publish_site")?{automation_action_id:t.pointer.id,type:"publish_site"}:t.isType("worker")?{automation_action_id:t.pointer.id,type:"worker"}:void(0,i().HB)(t)}function w(e){const{automationModel:t,builderType:o="sidebar",formulaAnalyticsModule:n,formulasModule:r,formulaTypecheckContextValues:a,getRecordModel:s,featureGates:c,simpleFormulasModule:d,source:u}=e,p=[],m=t.getActionPointers().map((e=>s(e))).filter(i().O9);for(const l of t.getActionPointers()){const e=s(l);(0,i().O9)(e)&&p.push(_({automationActionModel:e,automationActionModels:m,formulaAnalyticsModule:n,formulasModule:r,formulaTypecheckContextValues:a,getRecordModel:s,featureGates:c,simpleFormulasModule:d}))}const f=[];let v,h,y;if(t.isEventType()){var g;const e=t.getEventConfiguration(),o=s(t.getParentPointer());v=t.getParentId();const n=t.getEventConfiguration();if("collection_view"===(null===(g=n.source)||void 0===g?void 0:g.type)){const e=s(n.source.pointer);(null==e?void 0:e.parent_table)===l().ev&&(y=null==e?void 0:e.parent_id),h=null==n?void 0:n.source.pointer.id}const r=null==o?void 0:o.getNormalizedSchema();if((0,i().O9)(r)){const{pagesAdded:t,pagePropertiesEdited:o}=e;if(t&&f.push({type:"page"}),"any"===o.type)f.push({condition:"any",type:"property"});else if("none"===o.type)f.push({condition:"none",type:"property"});else{let e=[];"some"===o.type?e=o.some??[]:"all"===o.type&&(e=o.all??[]);const t=[],n=[];e.forEach((e=>{var o;const a=null===(o=r[e.property])||void 0===o?void 0:o.type;(0,i().O9)(a)&&(t.push({type:a,operator:e.filter.operator}),n.push(a))})),f.push({condition:o.type,property_configs:t,property_types:n,type:"property"})}}}else if(t.isButtonType())f.push({type:"button"});else if(t.isRecurrenceType()){var S;f.push({type:"recurrence",frequency:null===(S=t.getTrigger().recurrence)||void 0===S?void 0:S.frequency})}else(0,i().HB)(t);return{automation_actions:p,automation_id:t.id,automation_triggers:f,collection_id:v,collection_view_id:h,collection_view_block_id:y,builder_type:o,source:u}}},912474:(e,t,o)=>{o.d(t,{a:()=>i});var n=()=>o(79926);const r=new(n().O2)("StopDictationButton",(async()=>await Promise.all([o.e(75134),o.e(35530),o.e(9773),o.e(36556),o.e(55373),o.e(36192),o.e(40537),o.e(27992),o.e(63452),o.e(66249),o.e(92845),o.e(87249),o.e(79022),o.e(14578),o.e(87017),o.e(34877),o.e(46414),o.e(11676),o.e(61165),o.e(94522),o.e(44584),o.e(38293),o.e(40992),o.e(88455),o.e(52871),o.e(47160),o.e(49021),o.e(53697),o.e(17680),o.e(6039),o.e(71136),o.e(86341),o.e(29316),o.e(3101)]).then(o.bind(o,962309)))),i=(0,n()._h)(r,(e=>e.StopDictationButton))},922952:(e,t,o)=>{o.d(t,{u:()=>a});var n=()=>o(295633),r=()=>o(302996),i=()=>o(723085);function a(e){return e instanceof i().h||e instanceof r().SpaceStore||e instanceof n().B}},928213:(e,t,o)=>{o.d(t,{c:()=>a});var n=()=>o(165358),r=()=>o(519831),i=()=>o(753812);async function a(e){const{environment:t,collectionStore:o}=e,a={id:o.id,table:r().Vl,spaceId:o.getSpaceId()},s=await i().callApi({eventName:"suggestRecordKey",environment:t,data:{...a,shouldSetSuccessfullySuggestedRecord:!0}});if("success"===s.type)return s.data.key;n().log({level:"error",from:"collectionAutoIncrementIdActions.suggestRecordKeyResponse",type:"JSONParseError",error:{miscDataString:s.error.message}})}},933117:(e,t,o)=>{o.d(t,{A:()=>f});o(944114),o(898992),o(803949),o(581454);var n=o(296540),r=()=>o(245720),i=()=>o(30537),a=()=>o(546926),s=()=>o(890492),l=()=>o(663639),c=()=>o(736847),d=()=>o(69708),u=()=>o(496603),p=()=>o(534177),m=o(474848);const f=function({renderOrigin:e,onClick:t,items:n,getKey:r,renderItem:i,selectedItem:s,onSelect:l,dontCloseParentOnSelect:c,menuTypeOverride:d,menuTitle:u,width:p,minWidth:f,disabled:v,originGap:g,buttonPopupStore:S,sameWidthAsOrigin:b}){const x=(0,o(590526).uB)(S,o(118307).A),_=d??(o(726637).A.isMobile?a().gu.Modal:a().gu.Popup);return(0,m.jsx)(o(250910).A,{popupType:y(_),bottomSheetInitialState:"half",renderOrigin:e,buttonPopupStore:x,placementToOrigin:"bottom",onClick:t,render:e=>(0,m.jsx)(h,{parent:e,items:n,getKey:r,renderItem:i,selectedItem:s,onSelect:l,dontCloseParentOnSelect:c,menuType:_,menuTitle:u,width:p,minWidth:f}),disabled:v,originGap:g,sameWidthAsOrigin:b})};function v(e,t,o,r,i,a,s,l){return{key:0,render:e=>(0,n.createElement)(c().A,{...e,key:t,topBorder:t>0}),items:e.map((e=>({key:r(e),render:t=>i({...t,value:e,key:r(e),selectedItem:a}),action:()=>{!function(e,t,o){t!==e&&o(e)}(e,a,s),l||o.close()}})))}}function h({parent:e,items:t,getKey:o,renderItem:n,selectedItem:i,onSelect:c,dontCloseParentOnSelect:f,menuType:h,menuTitle:y,width:g,minWidth:S}){const b=[];if(function(e){return e.length>0&&e[0]instanceof Array}(t))t.forEach(((t,r)=>{const a=v(t,r,e,o,n,i,c,f);b.push(a)}));else{const r=v(t,0,e,o,n,i,c,f);b.push(r)}const x=(0,m.jsx)(l().A,{type:l().O.Vertical,initialFocus:u().SL(u().Bq(t),(e=>u().n4(e,i))),sections:b});let _;switch(h){case a().gu.ActionSheet:_={menuType:a().gu.ActionSheet};break;case a().gu.Modal:_={menuType:a().gu.Modal,title:y,right:(0,m.jsx)(d().sA,{...r().W.done}),onClickRight:e.close};break;case a().gu.Popup:_={menuType:a().gu.Popup,width:g||160,minWidth:S};break;default:(0,p().HB)(h)}return(0,m.jsx)(s().A,{..._,children:x})}function y(e){switch(e){case a().gu.ActionSheet:return i().n.SlideUp;case a().gu.Modal:return i().n.BottomSheet;case a().gu.Popup:return i().n.Popup}}},935432:(e,t,o)=>{o.d(t,{A:()=>a});var n=()=>o(416845),r=()=>o(357264),i=()=>o(788579);function a(e,t){if((0,n().pA8)(t)){const o=(0,i().$)(t.clientData);if(o)return"messageValues"in t.clientData?e.formatMessage(o,t.clientData.messageValues):e.formatMessage(o)}return e.formatMessage(r().k.generic_error)}},947086:(e,t,o)=>{o.r(t),o.d(t,{iconDefinition:()=>n,personSlashIcon:()=>r});o(296540);const n={viewBox:"0 0 20 20",fittedViewBox:"3.31 2.31 14.13 16.25",svg:(0,o(474848).jsx)("path",{d:"M3.53 2.463a.626.626 0 0 1 .882.067l.032.038q.008.013.018.025l12.687 14.875q.089.101.203.156a.625.625 0 0 1-1.014.72l-.928-1.08a2.4 2.4 0 0 1-1.26.362h-8.3c-.68 0-1.328-.288-1.74-.768-.43-.501-.591-1.217-.23-1.923C4.899 12.945 7.3 11.63 10 11.63q.3 0 .593.021l-1.001-1.166a3.28 3.28 0 0 1-2.267-1.22c-.536-.669-.825-1.532-.886-2.453L3.463 3.345a.626.626 0 0 1 .067-.882M10 12.88c-2.335 0-4.245 1.138-5.007 2.625-.104.203-.071.379.066.54.157.182.449.33.79.33h8.301c.155 0 .3-.032.426-.082l-2.707-3.154a6.8 6.8 0 0 0-1.87-.26M10 2.375c1.137 0 2.055.469 2.675 1.241.607.757.899 1.766.9 2.824 0 1.058-.292 2.067-.9 2.825q-.213.263-.472.477l-.811-.951q.168-.138.307-.309c.392-.487.625-1.2.625-2.042S12.09 4.887 11.7 4.4c-.38-.473-.936-.775-1.7-.775-.762 0-1.32.302-1.7.774a2.4 2.4 0 0 0-.278.44l-.857-1.004q.076-.113.161-.219c.62-.772 1.538-1.241 2.675-1.241"})},r=(0,o(340498).wt)("personSlash",n,"default")},951105:(e,t,o)=>{o.d(t,{k:()=>r});o(296540);const n={viewBox:"0 0 16 16",fittedViewBox:"2.18 1.73 11.64 12.54",svg:(0,o(474848).jsx)("path",{d:"M7.435 1.735c-.875 0-1.585.71-1.585 1.585v.735H3.765c-.875 0-1.585.71-1.585 1.585v7.04c0 .875.71 1.585 1.585 1.585h4.8c.876 0 1.585-.71 1.585-1.585v-.735h2.085c.876 0 1.585-.71 1.585-1.585V5.638c0-.42-.167-.824-.464-1.121l-2.318-2.318a1.6 1.6 0 0 0-1.12-.464zM7.1 3.32c0-.185.15-.335.335-.335H9.58V4.44c0 .848.687 1.535 1.535 1.535h1.455v4.385c0 .185-.15.335-.335.335H10.15V7.958c0-.42-.167-.824-.464-1.121L7.368 4.519a1.6 1.6 0 0 0-.268-.215zm3.63 1.12v-.781l1.166 1.166h-.78a.385.385 0 0 1-.386-.385m-7.3 1.2c0-.185.15-.335.335-.335H5.91V6.76c0 .848.687 1.535 1.535 1.535H8.9v4.385c0 .185-.15.335-.335.335h-4.8a.335.335 0 0 1-.335-.335zm3.63 1.12v-.781l1.166 1.166h-.78a.385.385 0 0 1-.386-.385"})},r=(0,o(340498).wt)("docOnDocSmall",n,"small")},962753:(e,t,o)=>{o.d(t,{EH:()=>g,FO:()=>h,P$:()=>y,VA:()=>f,h0:()=>d,lM:()=>u,mq:()=>v});o(898992),o(581454),o(737550);var n=()=>o(907258),r=()=>o(242422),i=()=>o(763765),a=()=>o(613848),s=()=>o(496603),l=()=>o(534177),c=()=>o(822789);function d(e){const{currentUserRootStore:t}=n().default.state;if(!t)return!1;const o=t.getSpaceViewStores();return(0,s().oE)(null==o?void 0:o.map((e=>e.getSpaceId()))).map((t=>a().A.getData(e,{spaceId:t,userId:e.currentUser.id}))).some((e=>p(e)))}function u(e,t){return p(a().A.getData(e,{spaceId:t,userId:e.currentUser.id}))}function p(e){switch(null==e?void 0:e.membershipType){case void 0:case"none":case"page_guest":return!1;case"restricted_member":case"member":case"membership_admin":case"owner":return!0===e.is_sales_assisted;default:(0,l().HB)(e)}}function m(e,t){if(!t)return"control";if(u(e,t))return"control";const o=r().default.getEligibleGroup({experimentId:"ai_product_retention_simplified_input",defaultGroup:"control"});return"input"===o||"input_and_ask_mode"===o?o:"control"}function f(){switch(r().default.getEligibleGroup({experimentId:"ai_product_retention_agent_follow_ups",defaultGroup:"control"})){case"button_nudge":return["button","nudge"];case"button_control":return["button","default"];case"nudge":return["nudge"];default:return}}function v(e,t){const o=r().default.checkGate({gateName:"agent_deep_find"}),n=void 0!==t&&u(e,t),a=e.currentUser.id,s=!t||!a||i().t.USEWITHCAUTION_isFetchedForSpaceAndUserId({spaceId:t,userId:a}),l=o||!n&&s&&"on"===r().default.getEligibleGroup({experimentId:"ai_product_retention_deepfind",defaultGroup:"control"}),c=y(e,t);return{agentDeepFindEnabled:l,useReadOnlyMode:l&&c}}function h(e,t){if(t?(0,c().vp)(t):(0,c().hw)())return!0;return"control"!==m(e,t)}function y(e,t){return"input_and_ask_mode"===m(e,t)}function g(){return"on"===r().default.getEligibleGroup({experimentId:"ai_product_retention_agent_speculative_search",defaultGroup:"control"})}},970236:(e,t,o)=>{o.d(t,{E:()=>s});o(296540);var n=()=>o(401497),r=()=>o(100622),i=()=>o(284371),a=o(474848);function s(e){const{color:t="gray",style:o,content:s,...l}=e,c=(0,n().IS)((()=>({badge:{alignSelf:"center",padding:"2px 4px",background:r().Tj[t].background.secondaryTranslucent,color:r().Tj[t].text.accentPrimary,borderRadius:4,fontSize:11,fontWeight:i().Wy.medium,lineHeight:1.3,...o}})),[t,o]);return(0,a.jsx)("div",{style:c.badge,...l,children:s})}},994006:(e,t,o)=>{o.d(t,{A:()=>r});o(296540);var n=o(474848);const r=function(e){const t={marginInlineEnd:e.avatarMarginRight??6,alignSelf:"center"},r={display:"flex",alignItems:"center",minWidth:0,...e.style},i=e.inline?{...t,width:"none",minHeight:"none"}:t,{userStore:a,avatarShouldShowShadow:s,avatarSize:l,hasTooltip:c,tooltipHeader:d,hasPersonHoverCard:u,spaceStore:p}=e,m=(0,o(69708).tz)(),f=(0,o(590526).K8)((()=>null==a?void 0:a.getDisplayName(m)),[a,m]),v=(0,n.jsxs)("div",{style:r,children:[(0,n.jsx)("div",{style:i,children:(0,n.jsx)(o(453697).A,{userStore:a,avatarShouldShowShadow:s,size:l,hasTooltip:c&&!u,hasPersonHoverCard:!1,tooltipHeader:d})}),(0,n.jsx)("div",{className:"notranslate",style:{...o(284371).RC},children:f})]});return u?(0,n.jsx)(o(436525).D,{userStore:a,spaceStore:p,children:v}):v}}}]);