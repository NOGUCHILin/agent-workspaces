# Todoist リマインダー設定ガイド

携帯からリマインダーを設定する方法を説明します。

## 📱 携帯アプリでのリマインダー設定

### 方法1: プロジェクト全体のリマインダー（推奨）

毎日決まった時間に「今日のタスク」を確認できます。

1. **Todoistアプリを開く**
2. **「インボックス」を選択**
3. **右上の「...」（3点リーダー）をタップ**
4. **「リマインダー」を選択**
5. **「リマインダーを追加」をタップ**
6. **時間を設定**
   - 例：毎朝 9:00
   - 例：毎日 18:00（退勤前の確認用）
7. **繰り返しを設定**
   - 「毎日」を選択
8. **保存**

### 方法2: 個別タスクのリマインダー

特定のタスクだけ通知を受け取りたい場合：

1. **Todoistアプリを開く**
2. **タスクをタップ**
3. **「リマインダー」アイコン（ベルマーク）をタップ**
4. **日時を設定**
5. **保存**

## 🔔 推奨設定

### 毎日のルーチン

**朝の確認（9:00）**
- 目的：今日やるタスクを確認
- 設定：インボックス全体のリマインダー

**夕方の確認（18:00）**
- 目的：完了していないタスクを確認
- 設定：インボックス全体のリマインダー

### 最優先タスクの通知

CLAUDE.mdで `【最優先】` とマークされたタスクは、Todoistで自動的に**優先度4（赤色）**に設定されます。

優先度の高いタスクだけ通知を受け取りたい場合：

1. **フィルターを作成**
   - 名前：「最優先タスク」
   - クエリ：`p1`（優先度1 = 最優先）
2. **フィルターにリマインダーを設定**

## 🔄 自動同期の設定（任意）

5分ごとに自動でCLAUDE.mdとTodoistを同期したい場合、launchdを使用します。

### macOS での自動同期設定

1. **launchd設定ファイルを作成**

`~/Library/LaunchAgents/com.todoist.sync.plist`を作成：

```xml
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE plist PUBLIC "-//Apple//DTD PLIST 1.0//EN" "http://www.apple.com/DTDs/PropertyList-1.0.dtd">
<plist version="1.0">
<dict>
    <key>Label</key>
    <string>com.todoist.sync</string>
    <key>ProgramArguments</key>
    <array>
        <string>/bin/bash</string>
        <string>-c</string>
        <string>cd /Users/noguchisara/projects/work/misc-tasks/todoist-sync && uv run python sync_tasks.py</string>
    </array>
    <key>StartInterval</key>
    <integer>300</integer>
    <key>StandardOutPath</key>
    <string>/tmp/todoist-sync.log</string>
    <key>StandardErrorPath</key>
    <string>/tmp/todoist-sync-error.log</string>
</dict>
</plist>
```

2. **launchdに登録**

```bash
launchctl load ~/Library/LaunchAgents/com.todoist.sync.plist
```

3. **確認**

```bash
launchctl list | grep todoist
```

4. **停止したい場合**

```bash
launchctl unload ~/Library/LaunchAgents/com.todoist.sync.plist
```

### 手動同期

自動同期を設定しない場合は、必要に応じて手動で実行してください：

```bash
cd /Users/noguchisara/projects/work/misc-tasks/todoist-sync
uv run python sync_tasks.py
```

## 💡 使い方のコツ

### タスク追加時

1. **Claude Codeでタスクを追加**
   - `work/CLAUDE.md`の`<pending-tasks>`セクションに追加
2. **同期スクリプトを実行**（自動設定していない場合）
   - `uv run python sync_tasks.py`
3. **携帯のTodoistで確認**
   - 自動的に反映されます

### タスク完了時

1. **Claude Codeでタスクを削除**
   - `work/CLAUDE.md`から該当タスクを削除
2. **同期スクリプトを実行**（自動設定していない場合）
3. **携帯のTodoistからも消える**

### 携帯で直接完了させたい場合

Todoistアプリで直接タスクを完了することもできますが、**CLAUDE.mdには反映されません**。

CLAUDE.mdを正として管理する場合は：
- 携帯では「確認のみ」
- タスクの追加・削除はClaude Code経由

## ⚠️ 注意事項

1. **同期は一方向**
   - CLAUDE.md → Todoist のみ
   - Todoist → CLAUDE.md の逆同期はありません

2. **Todoistで直接編集しない**
   - Todoistで追加したタスクは、次回同期時に削除される可能性があります
   - タスク管理は必ずCLAUDE.md経由で行ってください

3. **APIトークンの管理**
   - `.env`ファイルは絶対にGitにコミットしないでください
   - APIトークンが漏洩すると、他人があなたのTodoistを操作できます

## 📞 トラブルシューティング

### 同期されない

```bash
# ログを確認
cat /tmp/todoist-sync.log
cat /tmp/todoist-sync-error.log

# 手動実行してエラーを確認
cd /Users/noguchisara/projects/work/misc-tasks/todoist-sync
uv run python sync_tasks.py
```

### リマインダーが届かない

1. **通知設定を確認**
   - 携帯の設定 → 通知 → Todoist → 通知を許可
2. **リマインダー設定を確認**
   - Todoistアプリでリマインダーが正しく設定されているか確認

### APIエラー

- APIトークンが正しいか確認
- Todoistの無料プランの制限に達していないか確認
