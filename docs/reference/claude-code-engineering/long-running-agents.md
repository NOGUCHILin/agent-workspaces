# Effective Harnesses for Long-Running Agents

出典: [Anthropic Engineering](https://www.anthropic.com/engineering/effective-harnesses-for-long-running-agents)

---

## 課題

エージェントは複数のコンテキストウィンドウにまたがる進捗維持が困難。
> 「シフト制のエンジニアが、前シフトの記憶なしに到着するプロジェクト」

---

## 2パート解決策

### 1. Initializer Agent（初回セッション）

- JSON形式で包括的な機能要件を設定
- `init.sh`スクリプト作成（開発サーバー起動用）
- Gitリポジトリと進捗追跡ファイルを確立
- ハイレベルなプロンプトを200+の詳細でテスト可能な機能に展開

### 2. Coding Agent（後続セッション）

- 一度に1機能ずつ段階的に作業
- 説明的なgitメッセージでコミット
- コンテキストウィンドウ終了前に進捗ドキュメント更新
- ブラウザ自動化ツールでE2Eテスト実行

---

## 主要メカニズム

| メカニズム | 説明 |
|-----------|------|
| **機能管理** | 構造化JSONで早期完了宣言を防止 |
| **環境継続性** | 各セッション開始時にgitログ・進捗ファイル読み込み |
| **テスト要件** | Puppeteer MCPでエンドユーザー視点の検証 |

---

## 重要ルール

> 「テストの削除・編集は不可。機能欠落やバグの原因となる。」

---

## 結果

本番品質のWebアプリを複数コンテキストウィンドウで構築可能に。
